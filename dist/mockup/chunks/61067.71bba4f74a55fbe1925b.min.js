(self.webpackChunk_plone_mockup=self.webpackChunk_plone_mockup||[]).push([[61067],{1555:function(t,e,n){"use strict";n.d(e,{zJ:function(){return f}});n(89476);var i=n(35686),r=n.n(i),s=n(33077),a=n(33541),o=n(62800),l=n(44563),c=n(23505),d=n(8633),u=n(59329);const p=c.A.getLogger("pat-validation"),h=new a.A("validation");h.addArgument("disable-selector","[type=submit], button:not([type=button])"),h.addArgument("message-date",""),h.addArgument("message-datetime",""),h.addArgument("message-email",""),h.addArgument("message-max",""),h.addArgument("message-min",""),h.addArgument("message-number",""),h.addArgument("message-required",""),h.addArgument("message-equality","is not equal to %{attribute}."),h.addArgument("not-after",null),h.addArgument("not-before",null),h.addArgument("equality",null),h.addArgument("delay",100),h.addAlias("message-integer","message-number");const g="__patternslib__input__error__el",m="__patternslib__input__error__msg";class f extends s.m{static name="validation";static trigger="form.pat-validation";static parser=h;init(){l.A.add_event_listener(this.el,"submit","pat-validation--submit--validator",t=>{for(const e of this.inputs)p.debug("Checking input for submit",e,t),this.check_input({input:e,event:t})},{capture:!0}),this.initialize_inputs(),r()(this.el).on("pat-update",()=>{this.initialize_inputs()}),this.el.setAttribute("novalidate","")}initialize_inputs(){this.inputs=[...this.el.querySelectorAll("input[name], select[name], textarea[name]")],this.disabled_elements=[...this.el.querySelectorAll(this.options.disableSelector)];for(const[t,e]of this.inputs.entries()){const n=d.A.debounce(t=>{p.debug("Checking input for event",e,t),this.check_input({input:e,event:t})},this.options.delay);l.A.add_event_listener(e,"input",`pat-validation--input-${e.name}--${t}--validator`,t=>n(t)),l.A.add_event_listener(e,"change",`pat-validation--change-${e.name}--${t}--validator`,t=>n(t)),l.A.add_event_listener(e,"blur",`pat-validation--blur-${e.name}--${t}--validator`,t=>n(t))}}check_input({input:t,event:e,stop:n=!1}){if(t.disabled)return;this.set_error({input:t,msg:"",skip_event:!0});const i=t.validity;if(e?.submitter?.hasAttribute("formnovalidate"))return;p.debug("validity_state: ",i);const r=h.parse(t);if(i.valid){if(r.equality&&this.el.querySelector(`[name=${r.equality}]`)?.value!==t.value){const e=r.message.equality||"The value is not equal to %{attribute}";this.set_error({input:t,msg:e,attribute:r.equality})}else if(r.not.after||r.not.before){const e=r.message.date||r.message.datetime,i="The date must be after %{attribute}",s="The date must be before %{attribute}";let a,o,l,c;if(r.not.after&&(d.A.is_iso_date_time(r.not.after,!0)?a=new Date(r.not.after):(o=document.querySelector(r.not.after),a=o?.value?new Date(o?.value):void 0),a=isNaN(a)?null:a),r.not.before&&(d.A.is_iso_date_time(r.not.before,!0)?l=new Date(r.not.before):(c=document.querySelector(r.not.before),l=c?.value?new Date(c?.value):void 0),l=isNaN(l)?null:l),t.value&&d.A.is_iso_date_time(t.value,!0)&&!isNaN(new Date(t.value))){const n=new Date(t.value);if(a&&n>a){let n;!o&&r.not.after?n=r.not.after:(n=o?.labels?.[0]?.textContent.replace(/\s\s+/g," "),n=n||o.name),this.set_error({input:t,msg:e||s,attribute:n.trim()})}else if(l&&n<l){let n;!c&&r.not.before?n=r.not.before:(n=c?.labels?.[0]?.textContent.replace(/\s\s+/g," "),n=n||c.name),this.set_error({input:t,msg:e||i,attribute:n.trim()})}}!n&&o&&(p.debug("Check `not-after` input.",o),this.check_input({input:o,stop:!0})),!n&&c&&(p.debug("Check `no-before` input.",o),this.check_input({input:c,stop:!0}))}if(!i.customError)return void this.remove_error(t,!0)}else i.valueMissing&&r.message.required?this.set_error({input:t,msg:r.message.required}):i.rangeUnderflow&&r.message.min?this.set_error({input:t,msg:r.message.min,min:t.getAttribute("min")}):i.rangeOverflow&&r.message.max?this.set_error({input:t,msg:r.message.max,max:t.getAttribute("max")}):(i.badInput||i.stepMismatch)&&"number"===t.type&&r.message.number?this.set_error({input:t,msg:r.message.number}):i.typeMismatch&&"email"===t.type&&r.message.email?this.set_error({input:t,msg:r.message.email}):i.rangeUnderflow&&"date"===t.type&&r.message.date||i.rangeOverflow&&"date"===t.type&&r.message.date?this.set_error({input:t,msg:r.message.date}):i.rangeUnderflow&&"datetime"===t.type&&r.message.datetime||i.rangeOverflow&&"datetime"===t.type&&r.message.datetime?this.set_error({input:t,msg:r.message.datetime}):this.emit_update("invalid");"submit"===e?.type&&(e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation()),this.set_error_message(t)}set_error({input:t,msg:e,attribute:n=null,min:i=null,max:r=null,skip_event:s=!1}){n&&(e=e.replace(/%{attribute}/g,n)),i&&(e=e.replace(/%{count}/g,i)),r&&(e=e.replace(/%{count}/g,r)),e=e.replace(/%{value}/g,JSON.stringify(t.value)),t.setCustomValidity(e),t[m]=e,s||this.emit_update("invalid")}remove_error(t,e=!1,n=!1){let i=[t];e&&(i=this.inputs.filter(e=>e.name===t.name));for(const t of i){const e=t[g];t[g]=null,e?.remove()}if(this.el.checkValidity())for(const t of this.disabled_elements)t.disabled&&(t.removeAttribute("disabled"),t.classList.remove("disabled"));n||this.emit_update("valid")}set_error_message(t){this.remove_error(t,!1,!0);const e=this.inputs.filter(e=>e.name===t.name);if(e.length>1&&e.some(t=>!!t[g]))return;const n=t.validationMessage||t[m],i=o.A.create_from_string(this.error_template(n)).firstChild;let r;"radio"!==t.type&&"checkbox"!==t.type||(r=t.closest("fieldset.pat-checklist")),r?r.append(i):t.after(i),t[g]=i;let s=!1;for(const t of this.disabled_elements)t.disabled||t.formNoValidate||(s=!0,t.setAttribute("disabled","disabled"),t.classList.add("disabled"),p.debug("Disable element",t));if(s){p.debug("Checking whole form after element was disabled.");for(const e of this.inputs.filter(e=>e!==t))this.check_input({input:e,stop:!0})}}error_template(t){return`<em class="validation warning message">${t}</em>`}}u.A.register(f)},8633:function(t,e,n){"use strict";var i=n(35686),r=n.n(i),s=n(62800);r().fn.safeClone=function(){return this.clone()},Array.prototype.forEach||(Array.prototype.forEach=function(t,e){var n,i;if(null===this)throw new TypeError(" this is null or not defined");var r=Object(this),s=r.length>>>0;if("function"!=typeof t)throw new TypeError(t+" is not a function");for(arguments.length>1&&(n=e),i=0;i<s;){var a;i in r&&(a=r[i],t.call(n,a,i,r)),i++}});var a=function(t,e,n){return this.each(function(){var i,s=r()(this);if(i=t.init(s,n),e){if(void 0===i[e])return r().error("Method "+e+" does not exist on jQuery."+t.name),!1;if("_"===e.charAt(0))return r().error("Method "+e+" is private on jQuery."+t.name),!1;i[e].apply(i,[n])}}),this},o=function(t,e,n){var i=this;if(e){if(t[e])return t[e].apply(i,[i].concat([n]));r().error("Method "+e+" does not exist on jQuery."+t.name)}else t.init.apply(i,[i].concat([n]));return i};function l(t){var e=typeof t;return"function"===e||"object"===e&&!!t}function c(t){let e=t.replace(/[\-\[\]{}()+?.,\\\^$|#\s]/g,"\\$&");return e=e.replace(/[*]/g,".*"),e=new RegExp(`^${e}$`),e}function d(t,e=!1,n=0){t instanceof r()&&(t=t[0]);const i=t.getBoundingClientRect();return![i.top,i.bottom,i.left,i.right].every(t=>0===t)&&(e?i.top<=0+n&&i.bottom>=0+n:i.top>=0&&i.left>=0&&i.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&i.right<=(window.innerWidth||document.documentElement.clientWidth))}var u={jqueryPlugin:function(t){return function(e,n){return 0===this.length?this:("object"==typeof e&&(n=e,e=void 0),"function"==typeof t?a.call(this,t,e,n):o.call(this,t,e,n))}},escapeRegExp:function(t){return t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},isObject:l,extend:function(t){if(!l(t))return t;for(var e,n,i=1,r=arguments.length;i<r;i++)for(n in e=arguments[i])hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t},findLabel:function(t){for(var e,n=t.parentNode;n&&11!==n.nodeType;n=n.parentNode)if("LABEL"===n.tagName)return n;return t.id&&(e=r()('label[for="'+t.id+'"]')),e&&0===e.length&&t.form&&(e=r()('label[for="'+t.name+'"]',t.form)),e&&e.length?e[0]:null},regexp_from_wildcard:c,removeWildcardClass:function(t,e){if(t=u.ensureArray(t),-1===e.indexOf("*"))for(const n of t)n.classList.remove(e);else{const n=c(e);for(const e of t){const t=(e.getAttribute("class")||"").split(/\s+/);if(!t.length)continue;const i=t.filter(t=>!n.test(t));i.length?e.setAttribute("class",i.join(" ")):e.removeAttribute("class")}}},hideOrShow:(t,e,n,i)=>{t=s.A.toNodeArray(t);const a={none:{hide:"hide",show:"show"},fade:{hide:"fadeOut",show:"fadeIn"},slide:{hide:"slideUp",show:"slideDown"}},o="css"===n.transition||"none"===n.transition?null:n.effect.duration,l=t=>{t.classList.remove("in-progress"),t.classList.add(e?"visible":"hidden"),r()(t).trigger("pat-update",{pattern:i,action:"attribute-changed",dom:t,transition:"complete"})};for(const c of t)if(c.classList.remove("visible"),c.classList.remove("hidden"),c.classList.remove("in-progress"),o){const t=a[n.transition];c.classList.add("in-progress"),r()(c).trigger("pat-update",{pattern:i,action:"attribute-changed",dom:c,transition:"start"}),r()(c)[e?t.show:t.hide]({duration:o,easing:n.effect.easing,complete:()=>l(c)})}else"css"!==n.transition&&s.A[e?"show":"hide"](c),l(c)},addURLQueryParameter:function(t,e,n){var i=new RegExp("(\\?|\\&)"+e+"=.*?(?=(&|$))"),r=t.toString().split("#"),s=r[0],a=r[1],o=s;return o=i.test(s)?s.replace(i,"$1"+e+"="+n):/\?.+$/.test(s)?s+"&"+e+"="+n:s+"?"+e+"="+n,a&&(o+="#"+a),o},removeDuplicateObjects:function(t){const e=function(t,e){return this[t]===e};return t.reduce(function(t,n){let i=!1;for(const r of t)i=Object.keys(r).length===Object.keys(n).length&&0===Object.entries(r).filter(t=>!e.bind(n)(t[0],t[1])).length;return i||t.push(n),t},[])},mergeStack:function(t,e){const n=[];for(let t=0;t<e;t++)n.push({});for(const i of t){const t=i.length-1;for(let s=0;s<e;s++)n[s]=r().extend(n[s]||{},i[s>t?t:s])}return n},isElementInViewport:d,hasValue:function(t){return"INPUT"===t.tagName?"checkbox"===t.type||"radio"===t.type?t.checked:""!==t.value:"SELECT"===t.tagName?-1!==t.selectedIndex:"TEXTAREA"===t.tagName&&""!==t.value},parseTime:function(t){var e=/^(\d+(?:\.\d+)?)\s*(\w*)/.exec(t);if(!e)throw new Error("Invalid time");var n=parseFloat(e[1]);switch(e[2]){case"s":return Math.round(1e3*n);case"m":return Math.round(1e3*n*60);default:return Math.round(n)}},parseLength:function(t,e=null){const n=/^(\d+(?:\.\d+)?)\s*(\%?\w*)/.exec(t);if(!n)throw new Error("Invalid length");const i=parseFloat(n[1]);switch(n[2]){case"px":default:return Math.round(i);case"%":return e?e/100*Math.round(i):0;case"vw":return Math.round(i*window.innerWidth/100);case"vh":return Math.round(i*window.innerHeight/100);case"vmin":return Math.round(i*Math.min(window.innerWidth,window.innerHeight)/100);case"vmax":return Math.round(i*Math.max(window.innerWidth,window.innerHeight)/100)}},findRelatives:function(t){var e=r()(t),n=r()(t),i=r()();if(n=(n=n.add(e.closest("label"))).add(e.closest("fieldset")),t.id&&(i=r()("label[for='"+t.id+"']")),!i.length){var s=e.closest("form");s.length||(s=r()(document.body)),i=s.find("label[for='"+t.name+"']")}return n=n.add(i)},get_bounds:function(t){const e=t.getBoundingClientRect();return{x:parseInt(Math.round(e.x),10)||0,y:parseInt(Math.round(e.y),10)||0,top:parseInt(Math.round(e.top),10)||0,bottom:parseInt(Math.round(e.bottom),10)||0,left:parseInt(Math.round(e.left),10)||0,right:parseInt(Math.round(e.right),10)||0,width:parseInt(Math.round(e.width),10)||0,height:parseInt(Math.round(e.height),10)||0}},checkInputSupport:function(t,e){let n=!1;const i=document.createElement("input");return i.setAttribute("type",t),n=i.type==t,void 0!==e&&(i.setAttribute("value",e),n=i.value!==e),n},checkCSSFeature:(t,e,n="div")=>{let i=void 0!==(n=document.createElement(n)).style[t];return i&&void 0!==e&&(n.style[t]=e,i=n.style[t]===e),i},animation_frame:()=>new Promise(window.requestAnimationFrame),timeout:t=>new Promise(e=>setTimeout(e,t)),debounce:(t,e,n={timer:null},i=!0)=>(n.last_run=0,function(){const r=arguments;!i&&n.timer&&Date.now()-n.last_run<=e||(clearTimeout(n.timer),n.last_run=Date.now(),n.timer=setTimeout(()=>{t.apply(this,r)},e))}),isIE:()=>!!document.documentMode,jqToNode:t=>(t.jquery&&(t=t[0]),t),ensureArray:(t,e)=>!!(NodeList.prototype.isPrototypeOf(t)||Array.isArray(t)||t.jquery)?e?[...t]:t:[t],localized_isodate:t=>{const e=t.getDate().toString().padStart(2,"0"),n=(t.getMonth()+1).toString().padStart(2,"0");return`${t.getFullYear().toString()}-${n}-${e}`},escape_html:t=>{if(!t)return"";const e=document.createElement("div");return e.appendChild(document.createTextNode(t)),e.innerHTML.replace(/"/g,"&quot;")},unescape_html:t=>{if(!t)return"";return(new DOMParser).parseFromString(t,"text/html").documentElement.textContent.replace(/&quot;/g,'"')},is_iso_date_time:(t,e=!1)=>(e?/^\d{4}-[01]\d-[0-3]\d(T[0-2]\d:[0-5]\d)?$/:/^\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d$/).test(t),is_iso_date:t=>/^\d{4}-[01]\d-[0-3]\d$/.test(t),date_diff:(t,e)=>{const n=Date.UTC(t.getFullYear(),t.getMonth(),t.getDate()),i=Date.UTC(e.getFullYear(),e.getMonth(),e.getDate());return Math.floor((n-i)/864e5)},threshold_list:(t=0)=>{let e=[];for(let n=1;n<=t;n++)e.push(n/t);return e.push(0),e.sort()},is_option_truthy:t=>![void 0,null,"none",!1,"false",""].includes(t),elementInViewport:t=>(console.warn("Deprecated. Use utils.isElementInViewport"),d(t))};e.A=u},9979:function(t,e,n){"use strict";var i=n(35686),r=n.n(i),s=n(33077),a=n(44563),o=n(62800),l=n(23505),c=n(33541),d=n(59329),u=n(8633);const p=l.A.getLogger("depends"),h=new c.A("depends");h.addArgument("condition"),h.addArgument("action","show",["show","enable","both"]),h.addArgument("transition","none",["none","css","fade","slide"]),h.addArgument("effect-duration","fast"),h.addArgument("effect-easing","swing");const g=(t={})=>new CustomEvent("input",{bubbles:!0,cancelable:!1,detail:t});class m extends s.m{static name="depends";static trigger=".pat-depends";static parser=h;async init(){this.$el=r()(this.el);const t=(await n.e(99093).then(n.bind(n,99093))).default;try{this.handler=new t(this.el,this.options.condition)}catch(t){return void p.error("Invalid condition: "+t.message,this.el)}this.set_state();for(const t of this.handler.getAllInputs())a.A.add_event_listener(t,"input",`pat-depends--input--${this.uuid}`,t=>{t?.detail?.pattern_uuid!==this.uuid&&this.set_state()}),t.form&&a.A.add_event_listener(t.form,"reset",`pat-depends--reset--${this.uuid}`,async()=>{await u.A.timeout(50),this.set_state.bind(this)})}update_modal(){this.el.closest(".pat-modal")&&r()(document).trigger("pat-update",{pattern:"depends"})}enable(){const t=o.A.find_inputs(this.el);for(const e of t)!1!==e.disabled&&(e.disabled=!1,e!==this.el&&(o.A.is_button(e)||e.dispatchEvent(g({pattern_uuid:this.uuid}))));"A"===this.el.tagName&&a.A.remove_event_listener(this.el,"pat-depends--click"),this.el.classList.remove("disabled"),this.$el.trigger("pat-update",{pattern:"depends",action:"attribute-changed",dom:this.el,enabled:!0})}disable(){const t=o.A.find_inputs(this.el);for(const e of t)!0!==e.disabled&&(e.disabled=!0,e!==this.el&&(o.A.is_button(e)||e.dispatchEvent(g({pattern_uuid:this.uuid}))));"A"===this.el.tagName&&a.A.add_event_listener(this.el,"click","pat-depends--click",t=>t.preventDefault()),this.el.classList.add("disabled"),this.$el.trigger("pat-update",{pattern:"depends",action:"attribute-changed",dom:this.el,enabled:!1})}set_state(){const t=this.handler.evaluate();switch(this.options.action){case"show":u.A.hideOrShow(this.el,t,this.options,this.name),this.update_modal();break;case"enable":t?this.enable():this.disable();break;case"both":u.A.hideOrShow(this.el,t,this.options,this.name),this.update_modal(),t?this.enable():this.disable()}}}d.A.register(m)},23505:function(t,e){"use strict";var n,i;Function.prototype.bind||(Function.prototype.bind=function(t){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var e=Array.prototype.slice.call(arguments,1),n=this,i=function(){},r=function(){return n.apply(this instanceof i&&t?this:t,e.concat(Array.prototype.slice.call(arguments)))};return i.prototype=this.prototype,r.prototype=new i,r});var r={DEBUG:10,INFO:20,WARN:30,ERROR:40,FATAL:50};function s(){}function a(t,e){this._loggers={},this.name=t||"",this._parent=e||null,e||(this._enabled=!0,this._level=r.WARN)}function o(t){i=t}s.prototype={output:function(t,e,n){t&&n.unshift(t+":"),e<=r.DEBUG?console.debug.apply(console,n):e<=r.INFO?console.info.apply(console,n):e<=r.WARN?console.warn.apply(console,n):console.error.apply(console,n)}},a.prototype={getLogger:function(t){for(var e=t.split("."),n=this,i=this.name?[this.name]:[];e.length;){var r=e.shift();i.push(r),r in n._loggers||(n._loggers[r]=new a(i.join("."),n)),n=n._loggers[r]}return n},_getFlag:function(t){var e=this;for(t="_"+t;null!==e;){if(void 0!==e[t])return e[t];e=e._parent}return null},setEnabled:function(t){this._enabled=!!t},isEnabled:function(){this._getFlag("enabled")},setLevel:function(t){"number"==typeof t?this._level=t:"string"==typeof t&&(t=t.toUpperCase())in r&&(this._level=r[t])},getLevel:function(){return this._getFlag("level")},log:function(t,e){!e.length||!this._getFlag("enabled")||t<this._getFlag("level")||(e=Array.prototype.slice.call(e),i.output(this.name,t,e))},debug:function(){this.log(r.DEBUG,arguments)},info:function(){this.log(r.INFO,arguments)},warn:function(){this.log(r.WARN,arguments)},error:function(){this.log(r.ERROR,arguments)},fatal:function(){this.log(r.FATAL,arguments)}},o(new s),n=new a;for(var l,c=/loglevel(|-[^=]+)=([^&]+)/g;null!==(l=c.exec(window.location.search));){(""===l[1]?n:n.getLogger(l[1].slice(1))).setLevel(l[2].toUpperCase())}var d={Level:r,getLogger:n.getLogger.bind(n),setEnabled:n.setEnabled.bind(n),isEnabled:n.isEnabled.bind(n),setLevel:n.setLevel.bind(n),getLevel:n.getLevel.bind(n),debug:n.debug.bind(n),info:n.info.bind(n),warn:n.warn.bind(n),error:n.error.bind(n),fatal:n.fatal.bind(n),getWriter:function(){return i},setWriter:o};e.A=d},25259:function(t,e,n){"use strict";var i=n(71553),r=n(33541),s=n(8633),a=n(62800);const o=new r.A("datetime-picker");o.addArgument("format","YYYY-MM-DD"),o.addArgument("week-numbers",[],["show","hide"]),o.addArgument("i18n"),o.addArgument("today","Today"),o.addArgument("clear","Clear"),o.addArgument("first-day",0);i.A.extend({name:"datetime-picker",trigger:".pat-datetime-picker",parser:o,el_date:null,el_time:null,async init(){const t=this.el;if(this.options=o.parse(this.el,this.options),s.A.checkInputSupport("datetime-local","invalid date"))return;window.__patternslib_import_styles&&n.e(61016).then(n.bind(n,61016));const e=(await Promise.resolve().then(n.bind(n,98678))).default,i=this.el.value.split("T"),r=i[0]||"",l=i[1]||"",c=document.createElement("div");c.setAttribute("class","pat-datetime-picker__wrapper"),a.A.hide(t);const d=`\n            <button type="button" class="_btn _now" title="${this.options.today}">\n                <span class="_icon"/>\n                <span class="_text">${this.options.today}</span>\n            </button>`,u=`\n            <button type="button" class="_btn _clear" title="${this.options.clear}">\n                <span class="_icon"/>\n                <span class="_text">${this.options.clear}</span>\n            </button>`;c.innerHTML=`\n            <input type="date" placeholder="YYYY-MM-DD" value="${r}" />\n            <input type="time" placeholder="hh:mm" value="${l}" />\n            ${this.options.today?d:""}\n            ${this.options.clear?u:""}\n        `,this.el_time=c.querySelector("input[type=time]"),this.el_time.addEventListener("change",()=>this.update()),this.el_date=c.querySelector("input[type=date]"),this.el_date.addEventListener("change",()=>{this.el_time.value||(this.el_time.value=this.isotime()),this.update()});const p={behavior:"native",format:this.options.format,weekNumbers:this.options.weekNumbers,firstDay:this.options.firstDay};if(await e.init(this.el_date,p),this.options.today){c.querySelector("._btn._now").addEventListener("click",t=>{t.preventDefault(),this.el_date.value=this.isodate(),this.el_time.value=this.isotime(),this.update()})}if(this.options.clear){c.querySelector("._btn._clear").addEventListener("click",t=>{t.preventDefault(),this.el_date.value="",this.el_time.value="",this.update()})}t.parentNode.insertBefore(c,t)},update(){this.el_date.value&&this.el_time.value?this.el.value=`${this.el_date.value}T${this.el_time.value}`:this.el.value="",this.el.dispatchEvent(new Event("change",{bubbles:!0,cancelable:!0}))},isodate(){return(new Date).toISOString().substr(0,10)},isotime(){return(new Date).toTimeString().substr(0,5)}})},33077:function(t,e,n){"use strict";n.d(e,{m:function(){return o}});var i=n(44563),r=n(23505),s=n(86557);const a=r.A.getLogger("basepattern");class o{static name;static trigger;static parser;parser_group_options=!0;parser_multiple=void 0;parser_inherit=!0;constructor(t,e={}){this.name=this.constructor.name,this.trigger=this.constructor.trigger,this.parser=this.constructor.parser,t?(t.jquery&&(t=t[0]),this.el=t,this.uuid=(0,s.A)(),this.el.dispatchEvent(new Event(`pre-init.${this.name}.patterns`,{bubbles:!0,cancelable:!0})),window.setTimeout(async()=>{if(void 0!==this.el[`pattern-${this.name}`])return a.debug(`Not reinstatiating the pattern ${this.name}.`,this.el),void this.el.dispatchEvent(new Event(`not-init.${this.name}.patterns`,{bubbles:!0,cancelable:!1}));this.options=this.parser?.parse(this.el,e,this.parser_multiple,this.parser_inherit,this.parser_group_options)??e,this.el[`pattern-${this.name}`]=this,await this.init(),this.el.dispatchEvent(new Event(`init.${this.name}.patterns`,{bubbles:!0,cancelable:!0}))},0)):a.warn(`No element given to pattern ${this.name}.`)}async init(){}emit_update(t=void 0,e={}){e={pattern:this.name,dom:this.el,action:t,...e},this.el.dispatchEvent(i.A.update_event(e))}one(t,e){i.A.add_event_listener(this.el,`${t}.${this.name}.patterns`,`basepattern-one--${t}.${this.name}.patterns`,e,{once:!0})}destroy(){delete this.el[`pattern-${this.name}`]}}},33541:function(t,e,n){"use strict";var i=n(35686),r=n.n(i),s=n(8633),a=n(23505);class o{constructor(t){this.order=[],this.parameters={},this.attribute="data-pat-"+t,this.enum_values={},this.enum_conflicts=[],this.groups={},this.possible_groups={},this.log=a.A.getLogger(t+".parser"),this.group_pattern=/([a-z][a-z0-9]*)-([A-Z][a-z0-0\-]*)/i,this.json_param_pattern=/^\s*\[?\s*{/i,this.named_param_pattern=/^\s*([a-z][a-z0-9\-]*)\s*:(.*)/is,this.token_pattern=/((["']).*?(?!\\)\2)|\s*(\S+)\s*/g}_camelCase(t){return t.replace(/\-([a-z])/g,(t,e)=>e.toUpperCase())}addAlias(t,e){if(!this.parameters[e])throw`Attempted to add an alias "${t}" for a non-existing parser argument "${e}".`;this.parameters[e].alias=t}addGroupToSpec(t){const e=t.name.match(this.group_pattern);if(e){const n=e[1],i=e[2];if(n in this.possible_groups){const t=this.possible_groups[n],e=t.name.match(this.group_pattern)[2];t.group=n,t.dest=e,this.groups[n]=new o,this.groups[n].addArgument(e,t.value,t.choices,t.multiple),delete this.possible_groups[n]}n in this.groups?(this.groups[n].addArgument(i,t.value,t.choices,t.multiple),t.group=n,t.dest=i):(this.possible_groups[n]=t,t.dest=this._camelCase(t.name))}return t}addJSONArgument(t,e){this.order.push(t),this.parameters[t]=this.addGroupToSpec({name:t,value:e,dest:t,group:null,type:"json"})}addArgument(t,e,n,i){const r={name:t,value:i&&!Array.isArray(e)?[e]:e,multiple:i,dest:t,group:null};if(n&&Array.isArray(n)&&n.length){r.choices=n,r.type=this._typeof(n[0]);for(const e of n)-1===this.enum_conflicts.indexOf(e)&&(e in this.enum_values?(this.enum_conflicts.push(e),delete this.enum_values[e]):this.enum_values[e]=t)}else"string"==typeof r.value&&"$"===r.value.slice(0,1)?r.type=this.parameters[r.value.slice(1)].type:r.type=this._typeof(i?r.value[0]:r.value);this.order.push(t),this.parameters[t]=this.addGroupToSpec(r)}_typeof(t){return null===t?"null":typeof t}_coerce(t,e){const n=this.parameters[t];if(typeof e!==n.type)try{switch(n.type){case"json":e=JSON.parse(e);break;case"boolean":if("string"==typeof e){e=e.toLowerCase();const t=parseInt(e,10);e=isNaN(t)?"true"===e||"y"===e||"yes"===e||"y"===e||"on"===e:!!t}else{if("number"!=typeof e)throw`Cannot convert value for ${t} to boolean.`;e=!!e}break;case"number":if("string"==typeof e){if(e=parseInt(e,10),isNaN(e))throw`Cannot convert value for ${t} to number.`}else{if("boolean"!=typeof e)throw`Cannot convert value for ${t} to number.`;e+=0}break;case"string":e=e.toString();break;case"null":case"undefined":break;default:throw`Do not know how to convert value for ${t} of type ${typeof e} to ${n.type}.`}}catch(t){return this.log.warn(t),null}return n.choices&&-1===n.choices.indexOf(e)?(this.log.warn(`Illegal value for ${t}: ${e}.`),null):e}_set(t,e,n){if(!(e in this.parameters))return void this.log.debug(`Ignoring value for unknown argument: ${e}.`);let i;if(this.parameters[e].multiple){i="string"==typeof n?n.split(/,+/):n,n=[];for(const t of i){const i=this._coerce(e,t.trim());null!==i&&n.push(i)}}else if(null===(n=this._coerce(e,n)))return;t[e]=n}_split(t){const e=[];return t.replace(this.token_pattern,(t,n,i,r)=>{n?e.push(n):r&&e.push(r)}),e}_parseExtendedNotation(t){const e={},n=t.replace(/;;/g,"\0x1f").replace(/&amp;/g,"&amp\0x1f").split(/;/).map(t=>t.replace(new RegExp("\0x1f","g"),";"));for(const i of n){if(!i)continue;const n=i.match(this.named_param_pattern);if(!n){this.log.warn(`Invalid parameter: ${i}: ${t}.`);continue}const r=n[1],s=n[2].trim(),a=Object.values(this.parameters).filter(t=>t.alias===r);if(1===a.length)this._set(e,a[0].name,s);else if(r in this.parameters)this._set(e,r,s);else{if(!(r in this.groups)){this.log.warn(`Unknown named parameter: ${n[1]}.`);continue}{const t=this.groups[r]._parseShorthandNotation(s);for(const n in t)this._set(e,r+"-"+n,t[n])}}}return e}_parseShorthandNotation(t){const e=this._split(t),n={};let i=0;for(;e.length;){const t=e.shift().trim();let r,s,a=!0;if("no-"===t.slice(0,3)?(r=!1,s=t.slice(3)):(r=!0,s=t),s in this.parameters&&"boolean"===this.parameters[s].type)a=!1,this._set(n,s,r);else if(s in this.enum_values)a=!1,this._set(n,this.enum_values[s],s);else{if(!a){e.unshift(t);break}this._set(n,this.order[i],t)}if(i++,i>=this.order.length)break}return e.length&&this.log.warn(`Ignore extra arguments: ${e.join(" ")}.`),n}_parse(t){if(!t)return{};if(t.match(this.json_param_pattern))try{return JSON.parse(t)}catch{this.log.warn(`Invalid JSON argument found: ${t}.`)}if(t.match(this.named_param_pattern))return this._parseExtendedNotation(t);const e=t.indexOf(";");if(-1===e)return this._parseShorthandNotation(t);const n=this._parseShorthandNotation(t.slice(0,e)),i=this._parseExtendedNotation(t.slice(e+1));for(const t in i)n[t]=i[t];return n}_defaults(t){const e={};for(const n in this.parameters)if("function"==typeof this.parameters[n].value)try{e[n]=this.parameters[n].value(t,n),this.parameters[n].type=typeof e[n]}catch{this.log.error(`Default function for ${n} failed.`)}else e[n]=this.parameters[n].value;return e}_cleanupOptions(t,e=!0){for(const e of Object.keys(t)){const n=this.parameters[e];void 0!==n&&(t[e]===n.value&&"string"==typeof n.value&&"$"===n.value.slice(0,1)&&(t[e]=t[n.value.slice(1)]))}if(e)for(const e of Object.keys(t)){const n=this.parameters[e];let i;void 0!==n&&(n.group?("object"!=typeof t[n.group]&&(t[n.group]={}),i=t[n.group]):i=t,n.dest!==e&&(i[n.dest]=t[e],delete t[e]))}return t}parse(t,e,n,i=!0,a=!0){t.jquery||(t=r()(t)),"boolean"==typeof e&&void 0===n&&(n=e,e={});const o=i?[[this._defaults(t)]]:[[{}]];let l,c=1;l=!i||t.hasClass("pat-modal")&&"data-pat-inject"===this.attribute?t:t.parents(`[${this.attribute}]`).addBack();for(const t of l){let e;const n=(r()(t).attr(this.attribute)||"").trim();if(!n)continue;const i=this._parse.bind(this);e=n.match(/&&/)?n.split(/\s*&&\s*/).map(i):i(n),Array.isArray(e)||(e=[e]),c=Math.max(e.length,c),o.push(e)}"object"==typeof e&&(Array.isArray(e)?(o.push(e),c=Math.max(e.length,c)):o.push([e])),n||(c=1);const d=s.A.removeDuplicateObjects(s.A.mergeStack(o,c)).map(t=>this._cleanupOptions(t,a));return n?d:d[0]}}o.prototype.add_argument=o.prototype.addArgument,e.A=o},40865:function(t,e,n){"use strict";n(89476);var i=n(35686),r=n.n(i),s=n(23505),a=n(33541),o=n(59329);const l=s.A.getLogger("pat.ajax"),c=new a.A("ajax");c.addArgument("accept","text/html"),c.addArgument("url",function(t){const e=t[0];return(("A"===e.tagName?e.getAttribute("href"):"FORM"===e.tagName?e.getAttribute("action"):"")||"").split("#")[0]}),c.addArgument("browser-cache","no-cache",["cache","no-cache"]);const d={get:function(t){return void 0!==this[t]?this[t]:0},inc:function(t){return this[t]=this.get(t)+1,this.get(t)}},u={name:"ajax",trigger:".pat-ajax",parser:c,init(t){return t.off(".pat-ajax"),t.filter("a").on("click.pat-ajax",u.onTriggerEvents),t.filter("form").on("submit.pat-ajax",u.onTriggerEvents).on("click.pat-ajax","[type=submit]",u.onClickSubmit),t.filter(":not(form,a)").each(function(){l.warn("Unsupported element:",this)}),t},destroy(t){t.off(".pat-ajax")},onClickSubmit(t){const e=t.submitter||t.target,n=e.form,i={};e.name&&(i[e.name]=e.value),r()(n).data("pat-ajax.clicked-data",i)},onTriggerEvents(t){t&&t.preventDefault(),u.request(r()(this))},request(t,e){return t.each(function(){u._request(r()(this),e)})},_request(t,e){const n=u.parser.parse(t,e),i=d.inc(n.url),s=t.data("pat-ajax.clicked-data"),a=s?r().param(s):"",o={context:t,data:[t.serialize(),a].filter(Boolean).join("&"),headers:{},url:n.url,method:t.attr("method")?t.attr("method"):"GET",cache:"cache"===n.browserCache};if(n.accept&&(o.headers.Accept=n.accept),t.is("form")&&t.attr("method")&&"POST"==t.attr("method").toUpperCase()){const e=new FormData(t[0]);for(const t in s)e.append(t,s[t]);o.method="POST",o.data=e,o.cache=!1,o.contentType=!1,o.processData=!1,o.type="POST"}t.removeData("pat-ajax.clicked-data"),l.debug("request:",o,t[0]);const c=r().ajax(o);c&&c.done(function(e,r,s){l.debug("success: jqxhr:",s),i===d.get(n.url)&&t.trigger({type:"pat-ajax-success",jqxhr:{url:n.url,...s}})}).fail(function(e,i,r){l.error("load error for "+n.url+":",r,e),t.trigger({type:"pat-ajax-error",jqxhr:e})})}};o.A.register(u);var p=u,h=n(62800),g=n(44563),m=n(86557),f=n(8633);const b=s.A.getLogger("pat.inject"),_=new a.A("inject");_.addArgument("default-selector"),_.addArgument("target"),_.addArgument("data-type","html"),_.addArgument("next-href"),_.addArgument("source"),_.addArgument("trigger","default",["default","autoload","autoload-visible","idle"]),_.addArgument("delay"),_.addArgument("browser-cache","no-cache",["cache","no-cache"]),_.addArgument("confirm","class",["never","always","form-data","class"]),_.addArgument("confirm-message","Are you sure you want to leave this page?"),_.addArgument("loading-class","injecting"),_.addArgument("executing-class","executing"),_.addArgument("executed-class","executed"),_.addArgument("class"),_.addArgument("history","none",["none","record"]),_.addArgument("push-marker"),_.addArgument("scroll"),_.addArgument("url");const v={name:"inject",trigger:"a.pat-inject, form.pat-inject, .pat-subform.pat-inject",parser:_,async init(t,e){await f.A.timeout(1);const n=f.A.jqToNode(t),i=this.extractConfig(t,e);if(i.some(t=>"record"===t.history)&&!("pushState"in history))return b.warn("HTML5 pushState is missing, aborting"),t;if(t.data("pat-inject",i),i[0].nextHref&&0===i[0].nextHref.indexOf("#")&&"A"===n.nodeName&&r()(i[0].nextHref).length>0)return b.debug("Skipping as next href is anchor, which already exists",i[0].nextHref),n.setAttribute("href",(window.location.href.split("#")[0]||"")+i[0].nextHref),t;if(i[0].pushMarker&&r()("body").on("push",(t,e)=>{b.debug("received push message: "+e),e==i[0].pushMarker&&(b.debug("re-injecting "+e),this.onTrigger({currentTarget:n}))}),i[0].idleTrigger)this._initIdleTrigger(t,i[0].idleTrigger);else switch(i[0].trigger){case"default":for(const t of i)t.delay&&(t.processDelay=t.delay);"FORM"===n?.nodeName?(b.debug("Initializing form with injection on",n),g.A.add_event_listener(n,"submit","pat-inject--form-submit",t=>{t.submitter?.matches("[type=submit], button:not([type=button]), [type=image]")&&p.onClickSubmit(t),this.onTrigger(t)})):n?.matches(".pat-subform")?b.debug("Initializing subform with injection"):t.on("click.pat-inject",this.onTrigger.bind(this));break;case"autoload":if(i[0].delay){const e=(0,m.A)();n.setAttribute("data-pat-inject-uuid",e);const r=e=>{const i=document.querySelector(`[data-pat-inject-uuid="${e}"]`);return!!i&&(t.data("pat-inject-autoloaded",!0),this.onTrigger({currentTarget:n}),i.removeAttribute("data-pat-inject-uuid"),!0)};window.setTimeout(r.bind(null,e),i[0].delay)}else this.onTrigger({currentTarget:n});break;case"autoload-visible":this._initAutoloadVisible(t,i);break;case"idle":this._initIdleTrigger(t,i[0].delay)}return b.debug("initialised:",n),t},destroy(t){return t.off(".pat-inject"),t.data("pat-inject",null),t},onTrigger(t){t.preventDefault&&t.preventDefault();const e=t.currentTarget,n=r()(e);let i=n.data("pat-inject");if("FORM"===e.nodeName&&"submit"===t.type){const s=e,a=t.submitter;if(!a?.matches("[formnovalidate]")&&!s.matches("[novalidate]")&&s.matches(":invalid"))return void b.debug("Form is invalid, aborting");const o=a?.getAttribute("formaction");if(o){const t={url:o},e=a.closest("[data-pat-inject]");i=this.extractConfig(r()(e),t)}for(const t of i)t.params=r().param(n.serializeArray())}n.trigger("patterns-inject-triggered"),this.execute(i,n)},submitSubform(t){const e=r()(t[0].closest("form")),n=t.data("pat-inject");for(const e of n)e.params=r().param(t.serializeArray());try{e.trigger("patterns-inject-triggered")}catch(t){b.error("patterns-inject-triggered",t)}this.execute(n,e)},extractConfig(t,e={}){const n=f.A.jqToNode(t);e=Object.assign({},e);const i=_.parse(t,e,!0);for(const r of i){r.$context=t,r.url=e.url||r.url||n?.getAttribute("href")||n?.getAttribute("action")||n?.closest("form")?.getAttribute("action")||"";const i=r.url.split("#");if(r.url=i[0],i.length>2&&b.warn("Ignoring additional source ids:",i.slice(2)),r.defaultSelector||(r.defaultSelector=i[1]&&"#"+i[1]||"body"),r.delay)try{r.delay=f.A.parseTime(r.delay)}catch{b.warn("Invalid delay value: ",r.delay),r.delay=null}r.processDelay=0}return i},elementIsDirty(t){const e=r().map(t.find(":input:not(select)"),t=>{const e=r()(t).val();return Boolean(e)&&e!==r()(t).attr("placeholder")});return-1!==r().inArray(!0,e)},askForConfirmation(t){let e,n=!1;for(const i of t){let t=!1;"always"==i.confirm?t=!0:"form-data"===i.confirm&&i.target&&"none"!==i.target?t=this.elementIsDirty(i.$target):"class"===i.confirm&&i.target&&"none"!==i.target&&(t=i.$target.hasClass("is-dirty")),t&&(n=!0,e=i.confirmMessage)}return!(n&&!window.confirm(e))},ensureTarget(t){if("none"===t.target)return!0;if(t.$target=t.$target||("self"===t.target?t.$context:r()(t.target)),0===t.$target.length){if(!t.target)return b.error("Need target selector",t),!1;t.$target=this.createTarget(t.target),t.$created_target=t.$target}return!0},verifySingleConfig(t,e){return e.url!==t?(b.error("Unsupported different urls for multi-inject"),!1):(e.source=e.source||e.defaultSelector,e.target=e.target||e.defaultSelector,!!this.extractModifiers(e)&&(!!this.ensureTarget(e)&&(this.listenForFormReset(e),!0)))},verifyConfig(t){return t.every(e=>this.verifySingleConfig(t[0].url,e))},listenForFormReset(t){if("none"===t.target)return;const e=t.$target.parents("form");0!==e.length&&void 0===t.$target.data("initial-value")&&(t.$target.data("initial-value",t.$target.html()),e.on("reset",()=>{t.$target.html(t.$target.data("initial-value"))}))},extractModifiers(t){const e=/^(.*?)(::element)?$/.exec(t.source),n=/^(.*?)(::element)?(::after|::before)?$/.exec(t.target);t.source=e[1],t.sourceMod=e[2]?"element":"content",t.target=n[1];const i=n[2]?"element":"content",r=(n[3]||"::").slice(2);return t.loadingClass&&(t.loadingClass+=" "+t.loadingClass+"-"+i,r&&t.loadingClass&&(t.loadingClass+=" "+t.loadingClass+"-"+r)),t.action=i+r,!0},createTarget(t){if("#"!==t.slice(0,1))return b.error("only id supported for non-existing target"),null;const e=r()("<div />").attr({id:t.slice(1)});return r()("body").append(e),e},_performInjection(t,e,n,i,s,a){const o=document.createElement("template");if(n.length>0){const t="content"===i.sourceMod?"innerHTML":"outerHTML",e=[...n].map(e=>e[t]).join("\n");o.innerHTML=e;for(const t of o.content.querySelectorAll("img"))g.A.add_event_listener(t,"load","inject_img_load",t=>{r()(t.currentTarget).trigger("pat-inject-content-loaded")},{once:!0})}const l=[...o.content.childNodes];this._inject(s,l,t,i)&&(this._update_history(i,s,a),this._afterInjection(e,i.$created_target||r()(l),i))},_update_history(t,e,n){if("record"!==t.history||!history?.pushState)return;let i=t.url;if(t.params){const e=i.indexOf("?")>-1?"&":"?";i=`${i}${e}${t.params}`}if(history.pushState({url:i},"",i),n?.length){const t=document.querySelector("title");t&&this._inject(e,n,t,{action:"element"})}},_afterInjection(t,e,n){const i=f.A.jqToNode(t);if(e.filter((t,e)=>3!==e.nodeType).data("pat-injected",{origin:n.url}),1===e.length&&3==e[0].nodeType?e.parent().trigger("patterns-injected",[n,i,e[0]]):e.each((t,e)=>{3!==e.nodeType&&r()(e).addClass(n.class).trigger("patterns-injected",[n,i,e])}),n.scroll&&"none"!==n.scroll){const t=["top","target"].includes(n.scroll)?n.$target[0]:h.A.querySelectorAllAndMe(e[0],n.scroll),i=h.A.find_scroll_container(t,null,window);"top"===n.scroll?h.A.scroll_to_top(i):t&&h.A.scroll_to_element(t,i)}i.dispatchEvent(new Event("pat-inject-success",{bubbles:!0,cancelable:!0}))},async _onInjectSuccess(t,e,n){let i=n?.jqxhr?.responseText;if(!i)return void b.warn("No response content, aborting",n);"none"===e[0].source&&(i="");const r=await this.callTypeHandler(e[0].dataType,"sources",t,[e,i,n]);let s;r&&r[r.length-1]&&r[r.length-1][0]&&"TITLE"===r[r.length-1][0].nodeName&&(s=r[r.length-1]),e.forEach((e,i)=>{const a=()=>{if("none"!==e.target)for(const a of e.$target)this._performInjection(a,t,r[i],e,n.target,s)};e.processDelay?setTimeout(()=>a(),e.processDelay):a()}),e[0].nextHref&&t.is("a")&&(t.attr({href:e[0].nextHref.replace(/&amp;/g,"&")}),this.destroy(t)),t.off("pat-ajax-success.pat-inject"),t.off("pat-ajax-error.pat-inject")},async _onInjectError(t,e,n){let i="";const s=n.jqxhr.status,a=new Date;let l,c;s%100==4?i="Sorry! We couldn't find the page to load. Please make a screenshot and send it to support. Thank you!":s%100==5?i="I am very sorry! There was an error at the server. Please make a screenshot and contact support. Thank you!":0==s&&(i="It seems, the server is down. Please make a screenshot and contact support. Thank you!");if(null===new URLSearchParams(window.location.search).get("pat-inject-errorhandler.off")){const t=document?.querySelector(`meta[name^=pat-inject-status-${s}]`)?.getAttribute("content",!1);if(c=t?.split("#")[1],c=c?`#${c}`:null,c&&(l=document.createElement("html"),l.innerHTML=n.jqxhr.responseText,l=l.querySelector(c)),!l&&t)try{const e=await fetch(t,{method:"GET"});l=document.createElement("html"),l.innerHTML=await e.text(),l=l.querySelector(c||"body")}catch{}}for(const n of e)"$created_target"in n&&n.$created_target.remove(),n.$target.removeClass(n.loadingClass),t.removeClass(n.executingClass);if(t.off("pat-ajax-success.pat-inject"),t.off("pat-ajax-error.pat-inject"),l){const t=document.querySelector(c||"body");t.innerHTML=l.innerHTML,o.A.scan(t)}else{const t=`${i} Status is ${s} ${n.jqxhr.statusText}, time was ${a}. You can click to close this.`;r()("body").attr("data-error-message",t),r()("body").on("click",()=>{r()("body").removeAttr("data-error-message"),window.location.href=window.location.href})}},execute(t,e){const n=f.A.jqToNode(e);if(t=t.map(t=>r().extend({},t)),!this.verifyConfig(t))return;if(!this.askForConfirmation(t))return;if(e.data("pat-inject-triggered"))return;e.data("pat-inject-triggered",!0);for(const e of t)e?.executingClass&&n.classList.add(e.executingClass),e?.loadingClass&&"none"!==e?.target&&e.$target.addClass(e.loadingClass);e.on("pat-ajax-success.pat-inject",async r=>{this._onInjectSuccess(e,t,r),await f.A.timeout(1),g.A.remove_event_listener(n,"pat-inject--close-panel"),i&&(i=!1,n.dispatchEvent(new Event("close-panel",{bubbles:!0,cancelable:!0})))}),e.on("pat-ajax-error.pat-inject",this._onInjectError.bind(this,e,t)),e.on("pat-ajax-success.pat-inject pat-ajax-error.pat-inject",()=>e.removeData("pat-inject-triggered"));let i=!1;g.A.add_event_listener(n,"close-panel","pat-inject--close-panel",t=>{t.stopPropagation(),t.stopImmediatePropagation(),i=!0}),t[0].url.length?p.request(e,{url:t[0].url,"browser-cache":t[0].browserCache}):e.trigger({type:"pat-ajax-success",jqxhr:{responseText:r()("body").html()}})},_inject(t,e,n,i){if("none"===i.source)return n.replaceWith(""),!0;if(0===e.length)return b.warn("Aborting injection, source not found:",e),r()(t).trigger("pat-inject-missingSource",{url:i.url,selector:i.source}),!1;if("none"===i.target)return!0;if(!n)return b.warn("Aborting injection, target not found:",n),r()(t).trigger("pat-inject-missingTarget",{selector:i.target}),!1;return n[{content:"replaceChildren",contentafter:"append",contentbefore:"prepend",element:"replaceWith",elementafter:"after",elementbefore:"before"}[i.action]](...e),!0},_sourcesFromHtml(t,e,n){const i=this._parseRawHtml(t,e);return n.map(t=>{if("body"===t&&(t="#__original_body"),"none"===t)return r()("\x3c!-- --\x3e");const n=i.find(t);return 0===n.length&&"title"!=t&&b.warn("No source elements for selector:",t,i),n.find('a[href^="#"]').each((t,i)=>{const r=i.getAttribute("href");-1===r.indexOf("#{1}")&&(1===r.length?i.href=e:n.find(r).length||(i.href=e+r))}),n})},_rebaseAttrs:{a:"href",form:"action",img:"src",object:"data",source:"src",video:"src"},_rebaseOptions:{calendar:["url","event-sources"],collapsible:["load-content"],"date-picker":["i18n"],"datetime-picker":["i18n"],inject:["url"]},_rebaseURL(t,e){return-1!==e.indexOf("://")||"/"===e[0]||0===e.indexOf("data:")?e:(t=new URL(t,window.location).href).slice(0,t.lastIndexOf("/")+1)+e},_rebaseHTML(t,e){if(""===e)return"";const n=document.createElement("div");n.innerHTML=e;const i=Object.entries(this._rebaseAttrs).map(([t,e])=>`${t}[${e}]`).join(", ");for(const e of n.querySelectorAll(i)){const n=this._rebaseAttrs[e.nodeName.toLowerCase()];let i=e.getAttribute(n);i&&"@@"!==i.slice(0,2)&&"#"!==i[0]&&"mailto:"!==i.slice(0,7)&&"tel:"!==i.slice(0,4)&&"fax:"!==i.slice(0,4)&&"callto:"!==i.slice(0,7)&&"ts3server:"!==i.slice(0,10)&&"teams:"!==i.slice(0,6)&&"javascript:"!==i.slice(0,11)&&(i=this._rebaseURL(t,i),e.setAttribute(n,i))}for(const[e,i]of Object.entries(this._rebaseOptions))for(const r of h.A.querySelectorAllAndMe(n,`[data-pat-${e}]`)){const n=o.A.patterns?.[e],s=n?.parser;if(!s)continue;const a=s.parse(r,{},!0,!1,!1);let l=!1;for(const e of a)for(const n of i){const i=e[n];i&&(l=!0,Array.isArray(i)?e[n]=i.map(e=>this._rebaseURL(t,e)):e[n]=this._rebaseURL(t,i))}l&&r.setAttribute(`data-pat-${e}`,JSON.stringify(1===a.length?a[0]:a))}return n.innerHTML.trim()},_parseRawHtml(t,e=""){const n=t.match(/\<title\>(.*)\<\/title\>/);let i=t.replace(/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,"").replace(/<head\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/head>/gi,"").replace(/<html([^>]*?)>/gi,"").replace(/<\/html([^>]*?)>/gi,"").replace(/<body([^>]*?)>/gi,'<div id="__original_body">').replace(/<\/body([^>]*?)>/gi,"</div>");n&&2==n.length&&(i=n[0]+i);try{i=this._rebaseHTML(e,i)}catch(t){b.error("Error rebasing urls",t)}const s=r()("<div/>").html(i);return 0===s.children().length&&b.warn("Parsing html resulted in empty jquery object:",i),s},_initAutoloadVisible(t,e){if(t.data("pat-inject-autoloaded"))return!1;const n=f.A.jqToNode(t),i=e[0].delay||200;b.debug(`Delay time: ${i}`);const r=e=>t.data("pat-inject-autoloaded")?(b.debug(`autoload-visible trigger skipped ${n}`),!1):(t.data("pat-inject-autoloaded",!0),this.onTrigger({currentTarget:n}),e&&e.preventDefault(),b.debug(`autoload-visible trigger run ${n}`),!0);let s=null;const a=new IntersectionObserver(t=>{for(const e of t)e.isIntersecting?(s=window.setTimeout(()=>{a.disconnect(),r()},i),b.debug(`autoload-visible intersecting ${n}`)):(window.clearTimeout(s),b.debug(`autoload-visible not intersecting ${n}`))},{threshold:0,root:null,margin:"0px"});a.observe(n)},_initIdleTrigger(t,e){const n=parseInt(e,10);let i;const r=f.A.jqToNode(t),s=()=>{this.onTrigger({currentTarget:r}),o(),clearTimeout(i)},a=f.A.debounce(()=>{document.body.contains(r)?(clearTimeout(i),i=setTimeout(s,n)):o()},n),o=()=>{for(const t of["scroll","resize"])window.removeEventListener(t,a);for(const t of["click","keypress","keyup","mousemove","touchstart","touchend"])document.removeEventListener(t,a)};a();for(const t of["scroll","resize"])window.addEventListener(t,a);for(const t of["click","keypress","keyup","mousemove","touchstart","touchend"])document.addEventListener(t,a)},registerTypeHandler(t,e){this.handlers[t]=e},async callTypeHandler(t,e,n,i){return t=t||"html",this.handlers[t]&&r().isFunction(this.handlers[t][e])?await this.handlers[t][e].bind(this)(...i):null},handlers:{html:{sources(t,e){const n=t.map(t=>t.source);n.push("title");return this._sourcesFromHtml(e,t[0].url,n)}}}};if(r()(document).on("patterns-injected.inject",async(t,e,n,i)=>{e?.skipPatInjectHandler||(e&&(e.$target.removeClass(e.loadingClass),r()(n).removeClass(e.executingClass).addClass(e.executedClass)),3!==i.nodeType&&8!==i.nodeType&&(o.A.scan(i,null,{type:"injection",element:n}),r()(i).trigger("patterns-injected-scanned"),await f.A.timeout(10),i.dispatchEvent(new CustomEvent("patterns-injected-delayed",{bubbles:!0,cancelable:!0,detail:{injected:i}}))))}),r()(window).on("popstate",t=>{if(t.originalEvent.state||!("replaceState"in history))window.location.reload();else try{history.replaceState("anchor","",document.location.href)}catch(t){b.debug(t)}}),"replaceState"in history)try{history.replaceState("pageload","",document.location.href)}catch(t){b.debug(t)}o.A.register(v)},44563:function(t,e,n){"use strict";var i=n(8633);const r=new Map,s=(t,e)=>{const n=t?[t]:r.keys();for(const t of n){if(!t?.removeEventListener)return;const n=r.get(t);if(!n)return;let s;s=e?[...n.entries()].filter(t=>i.A.regexp_from_wildcard(e).test(t[0])):n.entries();for(const e of s||[])t.removeEventListener(e[1][0],e[1][1],e[1][2]),r.get(t).delete(e[0]),r.get(t).size||r.delete(t)}};class a extends CustomEvent{constructor(t){super("pat-update",{bubbles:!0,cancelable:!0,detail:t})}}e.A={add_event_listener:(t,e,n,i,a={})=>{if(!t?.addEventListener)return;s(t,n),r.has(t)||r.set(t,new Map);let o=i;!0===a?.once&&(o=e=>{r.get(t)?.delete(n),i(e)}),r.get(t).set(n,[e,o,a.capture?a:void 0]),t.addEventListener(e,o,a)},remove_event_listener:s,await_event:(t,e)=>new Promise(n=>t.addEventListener(e,n,{once:!0})),await_pattern_init:t=>new Promise((e,n)=>{t.one("init",n=>{n.target===t.el&&(s(t.el,`basepattern-one--not-init.${t.name}.patterns`),e())}),t.one("not-init",e=>{e.target===t.el&&(s(t.el,`basepattern-one--init.${t.name}.patterns`),n())})}).catch(()=>{throw new Error(`Pattern "${t.name}" not initialized.`)}),generic_event:t=>new Event(t,{bubbles:!0,cancelable:!0}),update_event:t=>new a(t),blur_event:()=>new Event("blur",{bubbles:!1,cancelable:!1}),click_event:()=>new Event("click",{bubbles:!0,cancelable:!0}),change_event:()=>new Event("change",{bubbles:!0,cancelable:!1}),focus_event:()=>new Event("focus",{bubbles:!1,cancelable:!1}),input_event:()=>new Event("input",{bubbles:!0,cancelable:!1}),mousedown_event:()=>new Event("mousedown",{bubbles:!0,cancelable:!0}),mouseup_event:()=>new Event("mouseup",{bubbles:!0,cancelable:!0}),scroll_event:()=>new Event("scroll",{bubbles:!0,cancelable:!1}),submit_event:({submitter:t}={submitter:void 0})=>{const e=new Event("submit",{bubbles:!0,cancelable:!0});return e.submitter=t,e},dragstart_event:()=>new Event("dragstart",{bubbles:!0,cancelable:!0}),dragend_event:()=>new Event("dragend",{bubbles:!0,cancelable:!0})}},57099:function(t,e,n){"use strict";var i=n(71553),r=n(33541),s=n(62800),a=n(44563),o=n(8633),l=n(35686),c=n.n(l),d={init:function(t){var e={time:3,initialTime:8,exceptionAreas:[]};return this.each(function(){var n=c()(this);n.data("timeout")||(t&&c().extend(e,t),n.data("timeout",{lastEvent:new Date,trueTime:e.time,time:e.initialTime,untouched:!0,inExceptionArea:!1}),n.on("mouseover.timeout",d.mouseMoved),n.on("mouseenter.timeout",d.mouseMoved),c()(e.exceptionAreas).each(function(){n.find(this).live("mouseover.timeout",{parent:n},d.enteredException).live("mouseleave.timeout",{parent:n},d.leftException)}),e.initialTime>0?n.timeout("startTimer"):n.addClass("timeout"))})},enteredException:function(t){var e=t.data.parent.data("timeout");e.inExceptionArea=!0,t.data.parent.data("timeout",e),t.data.parent.trigger("mouseover")},leftException:function(t){var e=t.data.parent.data("timeout");e.inExceptionArea=!1,t.data.parent.data("timeout",e)},destroy:function(){return this.each(function(){var t=c()(this),e=t.data("timeout");c()(window).off(".timeout"),e.timeout.remove(),t.removeData("timeout")})},mouseMoved:function(){var t=c()(this),e=t.data("timeout");t.hasClass("timeout")?(t.removeClass("timeout"),t.timeout("startTimer")):e.untouched&&(e.untouched=!1,e.time=e.trueTime),e.lastEvent=new Date,t.data("timeout",e)},startTimer:function(){var t=c()(this),e=t.data("timeout"),n=function(){var e=t.data("timeout");if(e&&e.lastEvent)if(e.inExceptionArea)setTimeout(n,Math.floor(1e3*e.time));else{var i=new Date,r=Math.floor(1e3*e.time)-(i-e.lastEvent);r>0?setTimeout(n,r+100):t.addClass("timeout")}};setTimeout(n,Math.floor(1e3*e.time))}};c().fn.timeout=function(t){return d[t]?d[t].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof t&&t?void c().error("Method "+t+" does not exist on jQuery.timeout"):d.init.apply(this,arguments)},c().extend(c().expr[":"],{scrollable:function(t){return"scroll"===c()(t).css("overflow")||"scroll"===c()(t).css("overflowX")||"scroll"===c()(t).css("overflowY")||(t.clientHeight<t.scrollHeight&&(-1!==c().inArray(c()(t).css("overflowY"),["scroll","auto"])||-1!==c().inArray(c()(t).css("overflow"),["scroll","auto"]))||t.clientWidth<t.scrollWidth&&(-1!==c().inArray(c()(t).css("overflowX"),["scroll","auto"])||-1!==c().inArray(c()(t).css("overflow"),["scroll","auto"])))}}),c().fn.makeVisibleInScroll=function(t){var e=null;return"string"==typeof t?e=c()("#"+t):t&&(e=c()(t)),this.each(function(){var t,n=c()(this);t=e||((t=n.parents(":scrollable")).length>0?c()(t[0]):c()(window));var i=n.position().top,r=n.height()+i,s=t.scrollTop(),a=t.height()+s;i<s?t.scrollTop(i):r>a-t.height()/2&&t.scrollTop(i-(t.height()-n.height())/2)})},c().fn.safeOffset=function(){var t,e=this[0],n={top:0,left:0};return e&&e.nodeType?(t=(e.ownerDocument||document).documentElement,c().contains(t,e)?c().fn.offset.apply(this,arguments):n):n},c().fn.setPositionAbsolute=function(t,e,n){return this.each(function(){var i=c()(this),r=c()(this).width(),s=t.safeOffset(),a=t.width(),o=t.height(),l=s.left+a-r+n,d=s.top+o+e;i.css({"z-index":1,position:"absolute",marginLeft:0,marginTop:0,left:l+"px",top:d+"px",width:r}),i.remove().appendTo("body").show()})},c().fn.positionAncestor=function(t){var e=0,n=0;return this.each(function(){var i=c()(this).closest(t);if(i.length&&"static"!==i.css("position")){var r=c()(this),s=r.safeOffset().left-parseInt(r.css("marginLeft"),10),a=r.safeOffset().top-parseInt(r.css("marginTop"),10),o=i.safeOffset().left+parseInt(i.css("borderLeftWidth"),10),l=i.safeOffset().top+parseInt(i.css("borderTopWidth"),10);return e=s-o,n=a-l,!1}}),{left:e,top:n}},c().fn.findInclusive=function(t){return this.find("*").addBack().filter(t)},c().fn.slideIn=function(t,e,n){return this.animate({width:"show"},t,e,n)},c().fn.slideOut=function(t,e,n){return this.animate({width:"hide"},t,e,n)},c().expr[":"].Contains=function(t,e,n){return c()(t).text().toUpperCase().indexOf(n[3].toUpperCase())>=0},c().fn.scopedFind=function(t){return 0===t.indexOf("#")?c()(t):this.find(t)};const u=new r.A("checklist");u.addArgument("select",".select-all"),u.addArgument("deselect",".deselect-all"),u.addArgument("toggle",".toggle-all");i.A.extend({name:"checklist",trigger:".pat-checklist",jquery_plugin:!0,all_selects:[],all_deselects:[],all_toggles:[],all_checkboxes:[],all_radios:[],init(){this.options=u.parse(this.el,this.options,!1),this.$el.on("patterns-injected",this._init.bind(this)),this.change_handler=o.A.debounce(()=>{this.change_buttons_and_toggles(),this.change_checked()},50),this._init()},_init(){this.all_checkboxes=this.el.querySelectorAll("input[type=checkbox]"),this.all_radios=this.el.querySelectorAll("input[type=radio]"),this.all_selects=s.A.find_scoped(this.el,this.options.select);for(const t of this.all_selects)a.A.add_event_listener(t,"click","pat-checklist--select-all--click",this.select_all.bind(this));this.all_deselects=s.A.find_scoped(this.el,this.options.deselect);for(const t of this.all_deselects)a.A.add_event_listener(t,"click","pat-checklist--deselect-all--click",this.deselect_all.bind(this));this.all_toggles=s.A.find_scoped(this.el,this.options.toggle);for(const t of this.all_toggles)a.A.add_event_listener(t,"click","pat-checklist--toggle-all--click",this.toggle_all.bind(this));this.change_buttons_and_toggles(),this.change_checked(),a.A.add_event_listener(this.el,"change","pat-checklist--change-handler--change",this.change_handler.bind(this))},destroy(){for(const t of this.all_selects)a.A.remove_event_listener(t,"pat-checklist--select-all--click");for(const t of this.all_deselects)a.A.remove_event_listener(t,"pat-checklist--deselect-all--click");for(const t of this.all_toggles)a.A.remove_event_listener(t,"pat-checklist--toggle-all--click");a.A.remove_event_listener(this.el,"pat-checklist--change-handler--change"),this.$el.off("patterns_injected")},find_siblings(t,e){let n,i=t.parentNode;for(;i;){if(n=i.querySelectorAll(`${e}:not(${this.options.toggle})`),n.length||i===this.el)return n;i=i.parentNode}},find_checkboxes(t,e){let n=[];return n=0===this.options.select.indexOf("#")?this.el.querySelectorAll(e):this.find_siblings(t,e),n},change_buttons_and_toggles(){let t;for(const e of this.all_selects)t=this.find_checkboxes(e,"input[type=checkbox]"),e.disabled=[...t].map(t=>t.matches(":checked")).every(t=>!0===t);for(const e of this.all_deselects)t=this.find_checkboxes(e,"input[type=checkbox]"),e.disabled=[...t].map(t=>t.matches(":checked")).every(t=>!1===t);for(const e of this.all_toggles)t=this.find_checkboxes(e,"input[type=checkbox]"),e.checked=[...t].map(t=>t.matches(":checked")).every(t=>!0===t)},select_all(t){t.preventDefault();const e=this.find_checkboxes(t.target,"input[type=checkbox]:not(:checked)");for(const t of e)t.checked=!0,t.dispatchEvent(a.A.change_event()),t.dispatchEvent(a.A.input_event())},deselect_all(t){t.preventDefault();const e=this.find_checkboxes(t.target,"input[type=checkbox]:checked");for(const t of e)t.checked=!1,t.dispatchEvent(a.A.change_event()),t.dispatchEvent(a.A.input_event())},toggle_all(t){t.preventDefault();const e=t.target.checked,n=this.find_checkboxes(t.target,"input[type=checkbox]");for(const t of n)t.checked=e,t.dispatchEvent(a.A.change_event()),t.dispatchEvent(a.A.input_event())},change_checked(){for(const t of[...this.all_checkboxes,...this.all_radios])for(const e of t.labels)e.classList.remove("checked","unchecked"),e.classList.add(t.checked?"checked":"unchecked");for(const t of s.A.querySelectorAllAndMe(this.el,"fieldset"))t.querySelectorAll(`input[type=checkbox]:checked:not(${this.options.toggle}), input[type=radio]:checked`).length?(t.classList.remove("unchecked"),t.classList.add("checked")):(t.classList.remove("checked"),t.classList.add("unchecked"))}})},59329:function(t,e,n){"use strict";var i=n(35686),r=n.n(i),s=n(62800),a=n(23505),o=n(8633);const l=a.A.getLogger("registry"),c=/patterns-disable=([^&]+)/g,d=/patterns-dont-catch/g,u={};let p,h=!1;for(;null!==(p=c.exec(window.location.search));)u[p[1]]=!0,l.info("Pattern disabled via url config:",p[1]);for(;null!==(p=d.exec(window.location.search));)h=!0,l.info("I will not catch init exceptions");void 0===window.__patternslib_registry&&(window.__patternslib_registry={});const g=window.__patternslib_registry;void 0===window.__patternslib_registry_initialized&&(window.__patternslib_registry_initialized=!1);const m={patterns:g,init(){s.A.document_ready(()=>{window.__patternslib_registry_initialized||(window.__patternslib_registry_initialized=!0,l.debug("Loaded: "+Object.keys(m.patterns).sort().join(", ")),m.scan(document.body),l.debug("Finished initial scan."))})},clear(){for(const t in m.patterns)delete m.patterns[t]},transformPattern(t,e){if(u[t])return void l.debug(`Skipping disabled pattern: ${t}.`);const n=m.patterns[t],i=n.transform||n.prototype?.transform;if(i)try{i(r()(e))}catch(e){if(h)throw e;l.error(`Transform error for pattern ${t}.`,e)}},initPattern(t,e,n){const i=r()(e),s=m.patterns[t],o=a.A.getLogger(`pat.${t}`);if(e.matches(s.trigger)){o.debug("Initialising.",e);try{s.init?s.init(i,null,n):new s(i,null,n),o.debug("done.")}catch(t){if(h)throw t;o.error("Caught error:",t)}}},orderPatterns(t){return t.includes("validation")&&(t.splice(t.indexOf("validation"),1),t.unshift("validation")),t.includes("clone-code")&&(t.splice(t.indexOf("clone-code"),1),t.unshift("clone-code")),t},scan(t,e,n){if(!t)return;if("string"==typeof t)t=document.querySelector(t);else{if(t instanceof Text)return;t.jquery&&(t=t[0])}const i=[];e=this.orderPatterns(e||Object.keys(m.patterns));for(const n of e){this.transformPattern(n,t);const e=m.patterns[n];e.trigger&&i.unshift(e.trigger)}const r=i.map(t=>t.trim().replace(/,$/,"")).join(",");if(!r)return;let a=s.A.querySelectorAllAndMe(t,r);a=a.filter(t=>!t?.closest?.(".disable-patterns")&&!t?.parentNode?.closest?.("pre")&&!t?.closest?.(".cant-touch-this"));for(const t of a.reverse())for(const i of e)this.initPattern(i,t,n);document.body.classList.add("patterns-loaded")},register(t,e){if(!(e=e||t.name))return l.error("Pattern lacks a name.",t),!1;let n=window.__patternslib_patterns_blacklist;if(Array.isArray(n)||(n=[]),n.includes(e))return l.warn(`Pattern name ${e} is blacklisted.`),!1;if(m.patterns[e])return l.debug(`Already have a pattern called ${e}.`),!1;if(m.patterns[e]=t,t.jquery_plugin){const n=("pat-"+e).replace(/-([a-zA-Z])/g,function(t,e){return e.toUpperCase()});r().fn[n]=o.A.jqueryPlugin(t),r().fn[n.replace(/^pat/,"pattern")]=r().fn[n]}return l.debug(`Registered pattern ${e}`,t),window.__patternslib_registry_initialized&&(m.scan(document.body,[e]),l.debug(`Re-scanned dom with newly registered pattern ${e}.`)),!0}};e.A=m},62800:function(t,e,n){"use strict";var i=n(44563),r=n(23505),s=n(86557);const a=r.A.getLogger("core dom"),o="__patternslib__data_prefix__",l="__patternslib__style__display",c="input, select, textarea, button",d=(t,e)=>{if(!t||!t.querySelectorAll)return[];const n=[...t.querySelectorAll(e)];return t.matches(e)&&n.unshift(t),n};function u(t,e,n=!1,i=!1){let r=window.getComputedStyle(t).getPropertyValue(e);return(n||i)&&(r=parseFloat(r)||0),n&&!i&&(r=parseInt(Math.round(r),10)),r}const p=(t,e=document.body)=>{e===window&&(e=document.body);const n=Math.abs(t.getBoundingClientRect().left+e.scrollLeft-e.getBoundingClientRect().left-m.get_css_value(e,"border-left-width",!0));return{top:Math.abs(t.getBoundingClientRect().top+e.scrollTop-e.getBoundingClientRect().top-m.get_css_value(e,"border-top-width",!0)),left:n}},h=(t,e,n)=>t[`${o}${e}`]||n,g=(t,e,n)=>{t[`${o}${e}`]=n},m={document_ready:t=>{const e=(0,s.A)(),n=()=>{"loading"!==document.readyState&&(i.A.remove_event_listener(document,e),setTimeout(t,1))};i.A.add_event_listener(document,"readystatechange",e,n),n()},toNodeArray:t=>(t.jquery||t instanceof NodeList?t=[...t]:t instanceof Array==!1&&(t=[t]),t),querySelectorAllAndMe:d,wrap:(t,e)=>{t.parentNode.insertBefore(e,t),e.appendChild(t)},hide:t=>{"none"!==t.style.display&&(t.style.display&&(t[l]=t.style.display),t.style.display="none")},show:t=>{const e=t[l]||null;t.style.display=e,delete t[l]},find_inputs:t=>d(t,c),find_parents:(t,e)=>{const n=[];let i=t;for(;i;)i=i.parentNode?.closest?.(e),i&&n.push(i);return n},find_scoped:(t,e)=>(0===e.indexOf("#")?document:t).querySelectorAll(e),get_parents:t=>{const e=[];let n=t?.parentNode;for(;n;)e.push(n),n=n?.parentNode,n=n instanceof HTMLElement?n:null;return e},acquire_attribute:(t,e,n=!1,i=!1)=>{let r=t;const s=[];for(;r;){const t=r.getAttribute(e);if(t||n&&""===t){if(!i)return t;s.push(t)}r=r.parentElement}if(i)return s},is_visible:t=>t.offsetWidth>0&&t.offsetHeight>0,is_input:t=>/^(?:input|select|textarea|button)$/i.test(t.nodeName),is_button:t=>t.matches("\n        button,\n        input[type=image],\n        input[type=button],\n        input[type=reset],\n        input[type=submit]\n    "),create_from_string:t=>document.createRange().createContextualFragment(t.trim()),get_css_value:u,find_scroll_container:(t,e,n=document.body)=>{for(;t&&t!==document.body;){if(!e||"y"===e){let e=u(t,"overflow-y");if(["auto","scroll"].includes(e))return t}if(!e||"x"===e){let e=u(t,"overflow-x");if(["auto","scroll"].includes(e))return t}t=t.parentElement}return n},get_scroll_x:t=>void 0!==t.scrollLeft?t.scrollLeft:t.scrollX,get_scroll_y:t=>void 0!==t.scrollTop?t.scrollTop:t.scrollY,get_relative_position:p,scroll_to_element:(t,e,n=0,i="top")=>{const r=p(t,e),s={behavior:"auto"};"top"!==i&&"both"!==i||(s.top=r.top-n),"left"!==i&&"both"!==i||(s.left=r.left-n),e.scrollTo(s)},scroll_to_top:(t=document.body,e=0)=>{t.scrollTo({top:0-e,behavior:"auto"})},scroll_to_bottom:(t=document.body,e=0)=>{const n=(t===window?document.body:t).scrollHeight;t.scrollTo({top:n-e,behavior:"auto"})},get_data:h,set_data:g,delete_data:(t,e)=>{delete t[`${o}${e}`]},template:(t,e={})=>(a.warn("Using dom.template is not recommended due to a problem with Content-Security-Policy."),new Function("return `"+t+"`;").call(e)),get_visible_ratio:(t,e)=>{if(!t)return 0;const n=t.getBoundingClientRect(),i=e!==window?e.getBoundingClientRect():{top:0,bottom:window.innerHeight};let r=0;if(n.top<i.bottom&&n.bottom>i.top){const t=n.bottom-n.top;r=(Math.min(n.bottom,i.bottom)-Math.max(n.top,i.top))/t}return r},escape_css_id:t=>`#${CSS.escape(t.split("#")[1])}`,element_uuid:t=>(h(t,"uuid",!1)||g(t,"uuid",(0,s.A)()),h(t,"uuid")),find_form:t=>t.closest(".pat-subform")||t.form||t.querySelector(c)?.form||t.closest("form")};e.A=m},71553:function(t,e,n){"use strict";n.d(e,{A:function(){return u}});var i=n(35686),r=n.n(i),s=n(59329),a=n(23505),o={getOptions(t,e,n){n=n||{},0===t.length||r().nodeName(t[0],"body")||(n=this.getOptions(t.parent(),e,n));let i={};if(0!==t.length&&(i=t.data("pat-"+e),i&&"string"==typeof i)){const t={};r().each(i.split(";"),function(e,n){(n=n.split(":")).reverse();let i=n.pop();i=i.replace(/^\s+|\s+$/g,""),n.reverse();let r=n.join(":");r=r.replace(/^\s+|\s+$/g,""),t[i]=r}),i=t}return r().extend(!0,{},n,i)}};const l=a.A.getLogger("Patternslib Base"),c=function(t,e,n){t.jquery||(t=r()(t));const i=this.prototype.name,l=a.A.getLogger(`pat.${i}`);let c=t.data(`pattern-${i}`);if(void 0===c&&s.A.patterns[i])try{t.data(`pattern-${i}`,"initializing"),e="mockup"===this.prototype.parser?o.getOptions(t,i,e):e,c=new s.A.patterns[i](t,e,n)}catch(t){l.error(`Failed while initializing ${i} pattern.`,t)}return c},d=async function(t,e,n){t?.jquery&&0===t.length||!t?l.warn("No element given to pattern."):(t.jquery||(t=r()(t)),this.$el=t,this.el=t[0],this.options=r().extend(!0,{},this.defaults||{},e||{}),this.emit("pre-init"),await this.init(t,e,n),this.$el.data(`pattern-${this.name}`,this),this.el[`pattern-${this.name}`]=this,this.emit("init"))};d.prototype={constructor:d,on(t,e){this.$el.on(`${t}.${this.name}.patterns`,e)},one(t,e){this.$el.one(`${t}.${this.name}.patterns`,e)},emit(t,e){void 0===e&&(e=[]),this.$el.trigger(`${t}.${this.name}.patterns`,e)}},d.extend=function(t){const e=this;let n;if(!t)throw new Error("Pattern configuration properties required when calling Base.extend");n=Object.hasOwnProperty.call(t,"constructor")?t.constructor:function(){e.apply(this,arguments)},n.extend=d.extend,n.init=c,n.jquery_plugin=!0,n.trigger=t.trigger,n.parser=t?.parser||null;var i=function(){this.constructor=n};return i.prototype=e.prototype,n.prototype=new i,r().extend(!0,n.prototype,t),n.__super__=e.prototype,t.name?t.trigger?!1!==t.autoregister&&s.A.register(n,t.name):l.warn(`The pattern ${t.name} does not have a trigger attribute, it will not be registered.`):l.warn("This pattern without a name attribute will not be registered!"),n};var u=d},72236:function(t,e,n){"use strict";var i=n(33077),r=n(33541),s=n(44563),a=n(59329);const o=new r.A("code-editor");o.addArgument("language",null),o.addArgument("linenumbers",!1),o.addArgument("theme","dark"),o.addArgument("tab","    "),o.addArgument("indent-on","{$"),o.addArgument("spellcheck",!1),o.addArgument("catch-tab",!0),o.addArgument("preserve-ident",!0),o.addArgument("add-closing",!0),o.addArgument("history",!0);const l={atom:"xml",html:"xml",plist:"xml",rss:"xml",svg:"xml",wsf:"xml",xhtml:"xml",xjb:"xml",xsd:"xml",xsl:"xml"};class c extends i.m{static name="code-editor";static trigger=".pat-code-editor";static parser=o;async init(){const t=(await n.e(19983).then(n.bind(n,19983))).CodeJar,e=(await n.e(45981).then(n.t.bind(n,45981,23))).default;let i,r=this.el;i="light"===this.options.theme?"stackoverflow-light":"dark"===this.options.theme||"okaidia"===this.options.theme?"stackoverflow-dark":this.options.theme,await n(21132)(`./${i}.css`),window.__patternslib_import_styles&&await n.e(3027).then(n.bind(n,3027));const a=t=>{t.textContent=t.textContent,e.highlightElement(t)};let o=a;if(this.options.linenumbers){o=(0,(await n.e(13190).then(n.bind(n,90809))).withLineNumbers)(a,{class:`codejar-linenumbers ${i}`})}let c=[...r.classList].filter(t=>t.startsWith("language-"))[0];c=c?c.replace("language-",""):this.options.language,c=c||"plaintext";const d=(await n(32908)(`./${l[c]||c}`)).default;if(e.registerLanguage(c,d),["textarea","input"].includes(this.el.nodeName.toLowerCase())){const t=document.createElement("pre");t.innerHTML="<code contenteditable></code>",r=t.querySelector("code"),r.textContent=this.el.value,this.el.parentNode.insertBefore(t,this.el),this.el.setAttribute("hidden","")}r.classList.add("code-editor",`theme-${this.options.theme}`,`language-${c}`);const u={tab:this.options.tab.replace(/'/g,"").replace(/"/g,"").replace(/\\t/g,"\t"),indentOn:new RegExp(this.options.indentOn),spellcheck:this.options.spellcheck,catchTab:this.options.catchTab,preserveIdent:this.options.preserveIdent,addClosing:this.options.addClosing,history:this.options.history};this.codeeditor=t(r,o,u),r!==this.el&&this.codeeditor.onUpdate(t=>{this.el.value=t.trim(),this.el.dispatchEvent(s.A.input_event())})}}a.A.register(c)},86557:function(t,e){"use strict";e.A=()=>{let t;if(window.crypto.randomUUID)t=window.crypto.randomUUID();else{const e=new Uint32Array(4);t=window.crypto.getRandomValues(e).join("")}return t}},89476:function(){!function(){if(window.SubmitEvent&&"submitter"in window.SubmitEvent.prototype)return;let t=null;const e='button, input[type="button"], input[type="submit"], input[type="image"]';document.addEventListener("click",function(n){n.target.closest&&(t=n.target.closest(e))},!0),document.addEventListener("submit",function(n){if("submitter"in n)return;const i=[document.activeElement,t];t=null;for(const t of i)if(t&&t.form&&t.matches(e))return void(n.submitter=t);n.submitter=n.target.querySelector(e)},!0)}(),function(){if(null==window.navigation){class t extends CustomEvent{constructor(){super("navigate"),this.destination={url:void 0}}}window.navigation=document.createElement("div");const e=e=>{const n=new t;return n.destination.url=e[2],n},n=window.history.pushState;window.history.pushState=function(){n.apply(window.history,arguments),window.navigation.dispatchEvent(e(arguments))};const i=window.history.replaceState;window.history.replaceState=function(){i.apply(window.history,arguments),window.navigation.dispatchEvent(e(arguments))}}}()},90101:function(t,e,n){"use strict";n.r(e),n.d(e,{parser:function(){return d}});var i=n(71553),r=n(33541),s=n(62800),a=n(23505),o=n(8633);let l;const c=a.A.getLogger("pat-display-time"),d=new r.A("display-time");d.add_argument("format",""),d.add_argument("locale",null),d.add_argument("strict",!1),d.add_argument("from-now",!1),d.add_argument("no-suffix",!1),d.add_argument("output-format",null),e.default=i.A.extend({name:"display-time",trigger:".pat-display-time",async init(){l=(await n.e(38761).then(n.t.bind(n,38761,23))).default,this.options=d.parse(this.el,this.options);let t=this.options.locale||s.A.acquire_attribute(this.el,"lang")||"en";t=t.substr(0,2).toLowerCase();try{await n(89595)(`./${t}.js`),l.locale(t),this.lang=t}catch{l.locale("en"),this.lang="en"}c.debug(`Moment.js language used: ${t}.`),this.format()},format(){const t=this.el.getAttribute("datetime");let e="";if(t){const n=l(t,this.options.format,this.options.strict);if(e=n,!0===this.options.fromNow)if(o.A.is_iso_date(t)){const t=new Intl.RelativeTimeFormat(this.lang,{numeric:"auto"}),i=o.A.date_diff(n.toDate(),new Date);e=n.calendar(null,{lastWeek:`[${t.format(i,"day")}]`,lastDay:`[${t.format(-1,"day")}]`,sameDay:`[${t.format(0,"day")}]`,nextDay:`[${t.format(1,"day")}]`,nextWeek:"dddd",sameElse:()=>`[${t.format(i,"day")}]`})}else e=n.fromNow(this.options.noSuffix);else this.options.outputFormat&&(e=n.format(this.options.outputFormat))}this.el.textContent=e}})},94232:function(t,e,n){"use strict";n.d(e,{Ay:function(){return g},K3:function(){return p}});var i=n(35686),r=n.n(i),s=n(33077),a=n(23505),o=n(33541),l=n(44563),c=n(59329),d=n(8633);n(71553).A.extend({name:"close-panel",trigger:".close-panel",init(){const t=this.el.closest("dialog");t&&l.A.add_event_listener(t,"close-panel","close-panel--dialog",()=>{t.close()}),this.el.addEventListener("click",async t=>{await d.A.timeout(0),t.target.matches(":not([formnovalidate])")&&t.target.matches("[type=submit], button:not([type=button])")&&!1===this.el.closest("form")?.checkValidity()||this.el.dispatchEvent(new Event("close-panel",{bubbles:!0,cancelable:!0}))})}});const u=a.A.getLogger("pat-tooltip"),p=new o.A("tooltip");p.addArgument("position-list",[],["tl","tm","tr","rt","rm","rb","br","bm","bl","lb","lm","lt"],!0),p.addArgument("position-policy","auto",["auto","force"]),p.addArgument("trigger","click",["click","hover","none"]),p.addArgument("source","title",["ajax","content","title"]),p.addArgument("ajax-data-type","html",["html","markdown"]),p.addArgument("closing","auto",["auto","sticky","close-button"]),p.addArgument("delay"),p.addArgument("mark-inactive",!0),p.addArgument("class"),p.addArgument("target","body"),p.addArgument("arrow-padding",null),p.addArgument("url",null);class h extends s.m{static name="tooltip";static trigger=".pat-tooltip, .pat-tooltip-ng";static parser=p;tippy=null;active_class="tooltip-active-hover";inactive_class="tooltip-inactive";async init(){const t=this.el;window.__patternslib_import_styles&&n.e(41615).then(n.bind(n,41615));const e=(await n.e(56805).then(n.t.bind(n,56805,23))).default;this.tippy_options=this.parseOptionsForTippy(this.options);const i={animation:!1,arrow:!0,hideOnClick:"close-button"!==this.options.closing,ignoreAttributes:!0,interactive:!0,onHide:this._onHide.bind(this),onShow:this._onShow.bind(this),trigger:"click"};e.setDefaultProps(i),this.tippy=new e(t,this.tippy_options),"title"===this.options.source&&t.removeAttribute("title"),"click"===this.options.trigger&&"ajax"===this.options.source&&l.A.add_event_listener(t,"click","pat-tooltip--click-prevent-default",t=>{t.preventDefault(),t.stopPropagation()}),"click"===this.options.trigger&&(this.active_class="tooltip-active-click"),this.options.markInactive&&t.classList.add(this.inactive_class)}show(){this.tippy.show()}async hide(){await d.A.timeout(1),this.tippy.hide()}destroy(){super.destroy(),this.tippy.destroy()}parseOptionsForTippy(t){const e=t=>{return`${n=t[0],{t:"bottom",r:"left",b:"top",l:"right"}[n]}${e=t[1],{l:"-start",r:"-end",m:"",t:"-start",b:"-end"}[e]}`;var e,n},n={popperOptions:{modifiers:[]}};null!==t.arrowPadding&&n.popperOptions.modifiers.push({name:"arrow",options:{padding:parseInt(t.arrowPadding,10)}});const i={position:()=>{if(!t.position?.list?.length)return;n.placement=e(t.position.list[0]);const i={name:"flip",enabled:!0};if("force"===t.position.policy)i.enabled=!1;else if(t.position.length>1){const n=t.position.list.slice(1).map(e);i.fallbackPlacements=n}n.popperOptions.modifiers.push(i)},trigger(){"hover"===t.trigger?n.trigger="mouseenter focus":"none"===t.trigger&&(n.trigger="manual",n.hideOnClick=!1)},source:()=>{let e;"title"===t.source?e=this.el.getAttribute("title"):"content"===t.source?(e=this.el.innerHTML,n.allowHTML=!0):"ajax"===t.source&&(e=document.createElement("progress"),n.allowHTML=!0),n.content=e},delay(){t.delay&&(n.delay=[d.A.parseTime(t.delay),0])},target:()=>{t.target&&("parent"===t.target?n.appendTo="parent":"body"===t.target?n.appendTo=document.body:n.appendTo=document.querySelector(t.target))}};for(let e in t){switch(e){case"ajax-data-type":e="ajaxDataType";break;case"mark-inactive":e="markInactive"}i[e]&&i[e](e)}return n}_initialize_content(){c.A.scan(this.tippy.popper)}async _onShow(){const t=[];if(this.options.class&&t.push(...this.options.class.split(" ")),t.push("tooltip-container"),"close-button"===this.options.closing){for(const t of this.tippy.popper.querySelectorAll(".pat-tooltip--close-button"))t.remove();const t=document.createElement("button");t.setAttribute("class","close-panel pat-tooltip--close-button");const e=this.tippy.popper.querySelector(".tippy-content");e.parentNode.insertBefore(t,e)}l.A.add_event_listener(this.tippy.popper,"close-panel","pat-tooltip--close-panel",()=>this.hide()),this.tippy.popper.classList.add(...t),this.options.markInactive&&(this.el.classList.remove(this.inactive_class),this.el.classList.add(this.active_class)),"auto"!==this.options.closing&&"hover"===this.options.trigger&&this.tippy.setProps({trigger:"click"}),"ajax"===this.options.source&&await this._get_content(),r()(this.tippy.popper).trigger("patterns-injected",[{skipPatInjectHandler:!0},this.el,this.tippy.popper]),this._initialize_content()}_onHide(){this.options.markInactive&&(this.el.classList.remove(this.active_class),this.el.classList.add(this.inactive_class)),"auto"!==this.options.closing&&"hover"===this.options.trigger&&this.tippy.setProps({trigger:"mouseenter focus"}),"ajax"===this.options.source&&this.tippy.setContent(document.createElement("progress"))}async _get_content(t=this.options.url){let e,n;if(({url:t,selector:e}=this.get_url_parts(t||this.el.getAttribute("href"))),t){const i=this.data_type_handlers[this.options.ajaxDataType];try{const r=await fetch(t,{headers:{Accept:"text/html,application/xhtml+xml,application/xml"}}),s=await r.text();n=await i(s,t,e)}catch{u.error("Error on ajax request. ${e}")}}else e&&(n=document.querySelector(e),n=n?.innerHTML||void 0);n&&(this.tippy.setContent(n),await d.A.timeout(1),this.tippy.popperInstance.forceUpdate())}async get_content(t=this.options.url){await this._get_content(t),this._initialize_content()}get_url_parts(t){let e,n,i;return t?([e,n]=t.split("#"),n&&(n=`#${n}`,[n,i]=n.split("?")),i&&(e=`${e}?${i}`),{url:e,selector:n}):{url:e,selector:n}}static data_type_handlers={html(t,e,n){let i=document.createElement("div");return i.innerHTML=t,n&&(i=i.querySelector(n)),i?.innerHTML||""},async markdown(t,e,n){const i=c.A.patterns.markdown;if(!i)return t;const s=new i(r()("<div/>"));await l.A.await_pattern_init(s);const a={url:e};n&&(a.source=n);return(await s.renderForInjection(a,t))[0]}};static register_type_handler(t,e){h.data_type_handlers[t]=e}constructor(...t){super(...t),this.register_type_handler=this.constructor.register_type_handler,this.data_type_handlers=this.constructor.data_type_handlers}}c.A.register(h);var g=h},98678:function(t,e,n){"use strict";n.r(e),n.d(e,{default:function(){return v},parser:function(){return b},storage:function(){return _}});var i=n(35686),r=n.n(i),s=n(71553),a=n(23505),o=n(33541),l=n(62800),c=n(44563);const d=a.A.getLogger("Patternslib Store");function u(t,e){this.prefix=e,this.backend=t}function p(t,e){this.store=t,this.name=e}u.prototype._key=function(t){return this.prefix+":"+t},u.prototype._allKeys=function(){var t,e,n=[],i=this.prefix+":",r=i.length;for(e=0;e<this.backend.length;e++)(t=this.backend.key(e)).slice(0,r)===i&&n.push(t);return n},u.prototype.get=function(t){var e=this._key(t),n=this.backend.getItem(e);if(null!==n)try{n=JSON.parse(n)}catch{return void d.warn(`Cannot parse storage value for key ${e}`)}return n},u.prototype.set=function(t,e){var n=this._key(t);return this.backend.setItem(n,JSON.stringify(e))},u.prototype.remove=function(t){var e=this._key(t);return this.backend.removeItem(e)},u.prototype.clear=function(){for(var t=this._allKeys(),e=0;e<t.length;e++)this.backend.removeItem(t[e])},u.prototype.all=function(){for(var t=this._allKeys(),e=this.prefix.length+1,n={},i=0;i<t.length;i++)n[t[i].slice(e)]=JSON.parse(this.backend.getItem(t[i]));return n},p.prototype.get=function(){return this.store.get(this.name)},p.prototype.set=function(t){return this.store.set(this.name,t)},p.prototype.remove=function(){return this.store.remove(this.name)};var h={supported:!1,local:function(t){return new u(window.localStorage,t)},session:function(t){return new u(window.sessionStorage,t)},ValueStorage:p,updateOptions:function(t,e){return"none"!==e.store&&(t.id?h.supported||(d.warn("state persistance requested, but browser does not support webstorage"),e.store="none"):(d.warn("state persistance requested, but element has no id"),e.store="none")),e}};try{h.supported=void 0!==window.sessionStorage}catch{}var g=h,m=n(8633);const f=a.A.getLogger("date-picker"),b=new o.A("date-picker");b.addArgument("behavior","styled",["native","styled"]),b.addArgument("week-numbers",[],["show","hide"]),b.addArgument("i18n"),b.addArgument("first-day",0),b.addArgument("after"),b.addArgument("offset-days",0),b.add_argument("output-format",null),b.add_argument("locale",null),b.addAlias("behaviour","behavior");const _=g.session("pat-date-picker");var v=s.A.extend({name:"date-picker",trigger:".pat-date-picker",parser:b,format:"YYYY-MM-DD",async init(){const t=this.el,e=this.el.disabled;if(this.options=r().extend(b.parse(t),this.options),!e&&this.options.after){const t=document.querySelectorAll(this.options.after);for(const e of t)e.addEventListener("change",t=>{let e=t.target.value;if(e=e?new Date(e):null,!e)return;let n=this.el.value;if(n=n?new Date(n):null,!n||n<e){const t=this.options.offsetDays||0;e.setDate(e.getDate()+t),this.el.value=e.toISOString().substring(0,10),this.dispatch_change_event()}})}let i;if("styled"===this.options.behavior){l.A.hide(t),i=document.createElement("time"),i.setAttribute("class","output-field"),i.setAttribute("datetime",t.value),e&&i.classList.add("disabled"),t.insertAdjacentElement("beforebegin",i);const s=i.closest("label");let a;if(s&&c.A.add_event_listener(s,"click","pat-date-picker--label",t=>{t.preventDefault()}),this.options.outputFormat){const t=(await Promise.resolve().then(n.bind(n,90101))).default,e={format:this.format};this.options.outputFormat&&(e["output-format"]=this.options.outputFormat),this.options.locale&&(e.locale=this.options.locale),a=new t(i,e)}else this.el.value&&(i.textContent=t.value);const o=()=>{this.add_clear_button(i),!this.el.value&&this.el.placeholder&&(i.innerHTML=`<span class="placeholder">${this.el.placeholder}</span>`)};if(a?r()(i).on("init.display-time.patterns",()=>{o()}):o(),this.el.addEventListener("change",()=>{i.setAttribute("datetime",this.el.value),a&&this.el.value?a.format():i.textContent=this.el.value,o()}),e)return}else{if(e)return;if(m.A.checkInputSupport("date","invalid date"))return;"date"===t.getAttribute("type")&&t.setAttribute("type","text")}window.__patternslib_import_styles&&n.e(69498).then(n.bind(n,69498));const s=(await n.e(95463).then(n.t.bind(n,95463,23))).default,a={field:t,trigger:i||t,format:this.format,firstDay:this.options.firstDay,showWeekNumber:"show"===this.options.weekNumbers,onSelect:()=>this.dispatch_change_event(),onClose:()=>{"styled"!==this.options.behavior||this.el.value||t.dispatchEvent(c.A.blur_event())}};if(t.getAttribute("min")&&(a.minDate=new Date(t.getAttribute("min"))),t.getAttribute("max")&&(a.maxDate=new Date(t.getAttribute("max"))),this.options.i18n){let t=_.get(this.options.i18n);if(!t)try{const e=await fetch(this.options.i18n);t=await e.json(),_.set(this.options.i18n,t)}catch{f.error(`date-picker could not load i18n for ${this.options.i18n}`)}t&&(a.i18n=t)}this.pikaday=new s(a)},add_clear_button(t){if(!this.el.disabled&&!this.el.required&&this.el.value){const e=document.createElement("span");e.setAttribute("class","cancel-button"),e.addEventListener("click",t=>{t.stopPropagation(),this.el.value=null,this.dispatch_change_event()}),t.appendChild(e)}},dispatch_change_event(){const t=new Event("change",{bubbles:!0,cancelable:!0});t.firedBy=this.pikaday,this.el.dispatchEvent(t),r()(this.el).trigger("input-change"),r()(this.el.form).trigger("input-change")}})}}]);
//# sourceMappingURL=61067.71bba4f74a55fbe1925b.min.js.map