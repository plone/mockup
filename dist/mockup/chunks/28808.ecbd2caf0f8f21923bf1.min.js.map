{"version":3,"file":"chunks/28808.ecbd2caf0f8f21923bf1.min.js","mappings":"2LAEe,MAAMA,EACjBC,WAAAA,CAAYC,GACRC,KAAKD,GAAKA,CACd,CACAE,eAAAA,CAAgBC,GACZC,IAAAA,KAAOD,EAAU,SAAUE,EAAUC,GACjCA,EAAQC,SAAS,eACGH,IAAEE,GAASE,KAAK,gBACtBC,KAAK,WAAY,WACnC,EACJ,CACAC,cAAAA,CAAeP,GACXC,IAAAA,KAAOD,EAAU,SAAUE,EAAUC,GACjCA,EAAQK,YAAY,eACAP,IAAEE,GAASE,KAAK,gBACtBI,WAAW,WAC7B,EACJ,CACAC,cAAAA,GACI,IAAIC,EAAmBV,IAAE,iBAAiBW,SAAS,oBAC/CC,EAAoBZ,IAAE,iBAAiBW,SAAS,qBAChDE,EAAqBb,IAAE,iBAAiBW,SAAS,uBAG5B,IAArBD,EACAb,KAAKS,eAAe,CAChBN,IAAE,8CACFA,IAAE,mDACFA,IAAE,8CACFA,IAAE,gDACFA,IAAE,sDACFA,IAAE,0CACFA,IAAE,mCACFA,IAAE,gDACFA,IAAE,0DACFA,IAAE,2CACFA,IAAE,uDAGNH,KAAKC,gBAAgB,CACjBE,IAAE,8CACFA,IAAE,mDACFA,IAAE,8CACFA,IAAE,gDACFA,IAAE,sDACFA,IAAE,0CACFA,IAAE,mCACFA,IAAE,gDACFA,IAAE,0DACFA,IAAE,2CACFA,IAAE,wDAKiB,IAAvBa,EACAhB,KAAKC,gBAAgB,CACjBE,IAAE,0DACFA,IAAE,2CACFA,IAAE,wDAImB,IAArBU,GACAb,KAAKS,eAAe,CAChBN,IAAE,0DACFA,IAAE,2CACFA,IAAE,wDAOY,IAAtBY,GACAf,KAAKC,gBAAgB,CAACE,IAAE,+CAEhC,CAEAc,IAAAA,GACI,IAAIC,EAAOlB,KAUXkB,EAAKN,iBAELT,IAAE,oCAAoCgB,GAAG,SAAU,WAC3CnB,KAAKoB,QACLjB,IAAE,iBAAiBG,SAAS,oBAE5BH,IAAE,iBAAiBO,YAAY,oBAEnCQ,EAAKN,gBACT,GAOAT,IAAE,mCAAmCgB,GAAG,SAAU,WAC9ChB,IAAEH,MAAMO,KAAK,gBAAgBI,WAAW,WAC5C,EAGJ,E","sources":["webpack://@plone/mockup/./src/pat/controlpanels/discussion--implementation.js"],"sourcesContent":["import $ from \"jquery\";\n\nexport default class Contentrules {\n    constructor(el) {\n        this.el = el;\n    }\n    disableSettings(settings) {\n        $.each(settings, function (intIndex, setting) {\n            setting.addClass(\"unclickable\");\n            var setting_field = $(setting).find(\"input,select\");\n            setting_field.attr(\"disabled\", \"disabled\");\n        });\n    }\n    enableSettings(settings) {\n        $.each(settings, function (intIndex, setting) {\n            setting.removeClass(\"unclickable\");\n            var setting_field = $(setting).find(\"input,select\");\n            setting_field.removeAttr(\"disabled\");\n        });\n    }\n    updateSettings() {\n        var globally_enabled = $(\"#content-core\").hasClass(\"globally_enabled\");\n        var moderation_custom = $(\"#content-core\").hasClass(\"moderation_custom\");\n        var invalid_mail_setup = $(\"#content-core\").hasClass(\"invalid_mail_setup\");\n\n        /* If commenting is globally disabled, disable all settings. */\n        if (globally_enabled === true) {\n            this.enableSettings([\n                $(\"#formfield-form-widgets-anonymous_comments\"),\n                $(\"#formfield-form-widgets-anonymous_email_enabled\"),\n                $(\"#formfield-form-widgets-moderation_enabled\"),\n                $(\"#formfield-form-widgets-edit_comment_enabled\"),\n                $(\"#formfield-form-widgets-delete_own_comment_enabled\"),\n                $(\"#formfield-form-widgets-text_transform\"),\n                $(\"#formfield-form-widgets-captcha\"),\n                $(\"#formfield-form-widgets-show_commenter_image\"),\n                $(\"#formfield-form-widgets-moderator_notification_enabled\"),\n                $(\"#formfield-form-widgets-moderator_email\"),\n                $(\"#formfield-form-widgets-user_notification_enabled\"),\n            ]);\n        } else {\n            this.disableSettings([\n                $(\"#formfield-form-widgets-anonymous_comments\"),\n                $(\"#formfield-form-widgets-anonymous_email_enabled\"),\n                $(\"#formfield-form-widgets-moderation_enabled\"),\n                $(\"#formfield-form-widgets-edit_comment_enabled\"),\n                $(\"#formfield-form-widgets-delete_own_comment_enabled\"),\n                $(\"#formfield-form-widgets-text_transform\"),\n                $(\"#formfield-form-widgets-captcha\"),\n                $(\"#formfield-form-widgets-show_commenter_image\"),\n                $(\"#formfield-form-widgets-moderator_notification_enabled\"),\n                $(\"#formfield-form-widgets-moderator_email\"),\n                $(\"#formfield-form-widgets-user_notification_enabled\"),\n            ]);\n        }\n\n        /* If the mail setup is invalid, disable the mail settings. */\n        if (invalid_mail_setup === true) {\n            this.disableSettings([\n                $(\"#formfield-form-widgets-moderator_notification_enabled\"),\n                $(\"#formfield-form-widgets-moderator_email\"),\n                $(\"#formfield-form-widgets-user_notification_enabled\"),\n            ]);\n        } else {\n            /* Enable mail setup only if discussion is enabled. */\n            if (globally_enabled === true) {\n                this.enableSettings([\n                    $(\"#formfield-form-widgets-moderator_notification_enabled\"),\n                    $(\"#formfield-form-widgets-moderator_email\"),\n                    $(\"#formfield-form-widgets-user_notification_enabled\"),\n                ]);\n            }\n        }\n\n        /* If a custom workflow for comments is enabled, disable the moderation\n        switch. */\n        if (moderation_custom === true) {\n            this.disableSettings([$(\"#formfield-form-widgets-moderation_enabled\")]);\n        }\n    }\n\n    init() {\n        let self = this;\n        /* Disable a control panel setting */\n        //#JSCOVERAGE_IF 0\n\n        /**************************************************************************\n         * Window Load Function: Executes when complete page is fully loaded,\n         * including all frames,\n         **************************************************************************/\n\n        // Update settings on page load\n        self.updateSettings();\n        // Set #content-core class and update settings afterwards\n        $(\"#form-widgets-globally_enabled-0\").on(\"change\", function () {\n            if (this.checked) {\n                $(\"#content-core\").addClass(\"globally_enabled\");\n            } else {\n                $(\"#content-core\").removeClass(\"globally_enabled\");\n            }\n            self.updateSettings();\n        });\n\n        /**********************************************************************\n         * Remove the disabled attribute from all form elements before\n         * submitting the form. Otherwise the z3c.form will raise errors on\n         * the required attributes.\n         **********************************************************************/\n        $(\"form#DiscussionSettingsEditForm\").on(\"submit\", function () {\n            $(this).find(\"input,select\").removeAttr(\"disabled\");\n        });\n\n        //#JSCOVERAGE_ENDIF\n    }\n}\n"],"names":["Contentrules","constructor","el","this","disableSettings","settings","$","intIndex","setting","addClass","find","attr","enableSettings","removeClass","removeAttr","updateSettings","globally_enabled","hasClass","moderation_custom","invalid_mail_setup","init","self","on","checked"],"sourceRoot":""}