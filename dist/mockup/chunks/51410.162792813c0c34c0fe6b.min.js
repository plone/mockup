"use strict";(self.webpackChunk_plone_mockup=self.webpackChunk_plone_mockup||[]).push([[51410],{3831:function(e,t,s){s.d(t,{EO:function(){return g},Em:function(){return r},Yq:function(){return I},gf:function(){return o},qz:function(){return a},r1:function(){return u},x6:function(){return A}});var n=s(23505),i=s(49264),l=s(67545);const c=n.A.getLogger("pat-contentbrowser");async function r({method:e="GET",vocabularyUrl:t=null,attributes:s=[],path:n=null,uids:i=null,searchTerm:l=null,searchIndex:r="SearchableText",searchPath:A=null,levelInfoPath:a=null,selectableTypes:g=[],browseableTypes:o=[],pageSize:u=100,page:I=1}){let C={criteria:[]};if(n&&(C={criteria:[{i:"path",o:"plone.app.querystring.operation.string.path",v:`${n}::1`}],sort_on:"getObjPositionInParent",sort_order:"ascending"},g.length&&C.criteria.push({i:"portal_type",o:"plone.app.querystring.operation.list.contains",v:g.concat(o)})),a&&(C={criteria:[{i:"path",o:"plone.app.querystring.operation.string.path",v:`${a}::0`}]}),A&&(C={criteria:[{i:"path",o:"plone.app.querystring.operation.string.path",v:A}]},g.length&&C.criteria.push({i:"portal_type",o:"plone.app.querystring.operation.list.contains",v:g})),i&&(C={criteria:[{i:"UID",o:"plone.app.querystring.operation.list.contains",v:i}]}),l&&C.criteria.push({i:r,o:"plone.app.querystring.operation.string.contains",v:l}),!C.criteria.length)return{results:[],total:0};const p=JSON.stringify(C),b=JSON.stringify(s),d=u?JSON.stringify({page:I,size:u}):"";let m=encodeURI(`${t}${-1!==t.indexOf("?")?"&":"?"}query=${p}&attributes=${b}`+(d?`&batch=${d}`:""));const B=new Headers;B.set("Accept","application/json");let Q={method:e,headers:B};if("POST"==e&&-1!==m.indexOf("?")){const e=m.split("?");m=e[0];const t=e[1];B.set("Content-Type","application/x-www-form-urlencoded"),c.debug(m,t),Q.body=t}const x=await fetch(m,Q);if(!x.ok)return{results:[],total:0,errors:x.errors};const U=await x.json();if(!A&&!a&&g.length){const e={results:[],total:U.total};for(const t of U.results)(-1!=g.indexOf(t.portal_type)||t.is_folderish)&&e.results.push(t);return e}return U}async function A(e,t){if(!e)return[];const s=await r({method:"POST",vocabularyUrl:t.vocabularyUrl,attributes:t.attributes,uids:e,pageSize:null});let n=await(s?.results)||[];return n.sort((t,s)=>e.indexOf(t.UID)-e.indexOf(s.UID)),n}async function a(e,{iconName:t}){const s=await async function(e){return await i.A.resolveIcon(e)}(t);return e.outerHTML=s,{destroy(){}}}function g(e){const t=t=>{e&&!e.contains(t.target)&&e.dispatchEvent(new CustomEvent("click_outside",e))};return document.addEventListener("click",t,!0),{destroy(){document.removeEventListener("click",t,!0)}}}function o(e,t){let s=i.A.storage.get(t.recentlyUsedKey)||[];s=s.slice(s.length-1e3,s.length),e&&t?.selectableTypes.length&&(s=s.filter(e=>-1!=t.selectableTypes.indexOf(e.portal_type)));const n=parseInt(t.recentlyUsedMaxItems,20);return n&&(s=s.slice(s.length-n,s.length)),s}function u(e,t){if(!t.recentlyUsed)return;const s=o(!1,t),n=s.filter(t=>t.UID===e.UID);n.length>0&&s.splice(s.indexOf(n[0]),1),s.push(e),i.A.storage.set(t.recentlyUsedKey,s)}function I(e){const t=Date.parse(e),s=new l.A;return new Date(t).toLocaleString(s.currentLanguage.replace("_","-"))}},51410:function(e,t,s){s.r(t),s.d(t,{default:function(){return G}});var n=s(43467),i=(s(2531),s(41949),s(3831)),l=s(85072),c=s.n(l),r=s(97825),A=s.n(r),a=s(57722),g=s.n(a),o=s(55056),u=s.n(o),I=s(10540),C=s.n(I),p=s(41113),b=s.n(p),d=s(95428),m={};m.styleTagTransform=b(),m.setAttributes=u(),m.insert=g(),m.domAPI=A(),m.insertStyleElement=C();c()(d.A,m),d.A&&d.A.locals&&d.A.locals;function B(e){let t,s,i;return{c(){t=(0,n.ND4)("img"),(0,n.mq_)(t.src,s=e[0].getURL+"/@@images/image/mini")||(0,n.CFu)(t,"src",s),(0,n.CFu)(t,"alt",i=e[0].Title),(0,n.CFu)(t,"class","svelte-b5z3s7")},m(e,s){(0,n.Yry)(e,t,s)},p(e,l){1&l&&!(0,n.mq_)(t.src,s=e[0].getURL+"/@@images/image/mini")&&(0,n.CFu)(t,"src",s),1&l&&i!==(i=e[0].Title)&&(0,n.CFu)(t,"alt",i)},d(e){e&&(0,n.YoD)(t)}}}function Q(e){let t,s,l,c,r,A,a,g,o,u,I,C,p,b,d,m,Q,x=e[0].Title+"",U=e[0].path+"",G=e[0].getURL&&(e[0].getIcon||"Image"===e[0].portal_type)&&B(e);return{c(){t=(0,n.ND4)("div"),s=(0,n.ND4)("div"),l=(0,n.ND4)("button"),c=(0,n.QQy)("svg"),A=(0,n.xem)(),a=(0,n.ND4)("div"),g=(0,n.ND4)("span"),o=(0,n.Qq7)(x),u=(0,n.ND4)("br"),I=(0,n.xem)(),C=(0,n.ND4)("span"),p=(0,n.Qq7)(U),b=(0,n.xem)(),G&&G.c(),(0,n.CFu)(l,"class","btn btn-link btn-sm link-secondary svelte-b5z3s7"),(0,n.CFu)(g,"class","item-title"),(0,n.CFu)(C,"class","small"),(0,n.CFu)(s,"class","item-info svelte-b5z3s7"),(0,n.CFu)(t,"class","selected-item border border-secondary-subtle rounded p-2 mb-1 bg-body-tertiary svelte-b5z3s7"),(0,n.CFu)(t,"data-uuid",d=e[0].UID)},m(d,B){(0,n.Yry)(d,t,B),(0,n.BCw)(t,s),(0,n.BCw)(s,l),(0,n.BCw)(l,c),(0,n.BCw)(s,A),(0,n.BCw)(s,a),(0,n.BCw)(a,g),(0,n.BCw)(g,o),(0,n.BCw)(a,u),(0,n.BCw)(a,I),(0,n.BCw)(a,C),(0,n.BCw)(C,p),(0,n.BCw)(t,b),G&&G.m(t,null),m||(Q=[(0,n.hGc)(r=i.qz.call(null,c,{iconName:"x-circle"})),(0,n.KTR)(l,"click",(0,n.xZN)(e[2]))],m=!0)},p(e,[s]){1&s&&x!==(x=e[0].Title+"")&&(0,n.iQh)(o,x),1&s&&U!==(U=e[0].path+"")&&(0,n.iQh)(p,U),e[0].getURL&&(e[0].getIcon||"Image"===e[0].portal_type)?G?G.p(e,s):(G=B(e),G.c(),G.m(t,null)):G&&(G.d(1),G=null),1&s&&d!==(d=e[0].UID)&&(0,n.CFu)(t,"data-uuid",d)},i:n.lQ1,o:n.lQ1,d(e){e&&(0,n.YoD)(t),G&&G.d(),m=!1,(0,n.oOW)(Q)}}}function x(e,t,s){let{item:n}=t,{unselectItem:i}=t;return e.$$set=e=>{"item"in e&&s(0,n=e.item),"unselectItem"in e&&s(1,i=e.unselectItem)},[n,i,()=>i(n.UID)]}class U extends n.r7T{constructor(e){super(),(0,n.TsN)(this,e,x,Q,n.jXN,{item:0,unselectItem:1})}}var G=U},95428:function(e,t,s){var n=s(71354),i=s.n(n),l=s(76314),c=s.n(l)()(i());c.push([e.id,".selected-item.svelte-b5z3s7.svelte-b5z3s7{display:flex;flex-wrap:nowrap;align-items:start;justify-content:space-between;cursor:move}.selected-item.svelte-b5z3s7>.svelte-b5z3s7{margin-right:.5rem;display:block}.selected-item.svelte-b5z3s7 button.svelte-b5z3s7{cursor:pointer;padding:0 .375rem .374rem 0}.selected-item.svelte-b5z3s7 .item-info.svelte-b5z3s7{display:flex;align-items:start}.selected-item.svelte-b5z3s7>img.svelte-b5z3s7{object-fit:cover;width:95px;height:95px}","",{version:3,sources:["webpack://./src/pat/contentbrowser/src/SelectedItem.svelte"],names:[],mappings:"AAAA,2CAAA,YAAA,CAAA,gBAAA,CAAA,iBAAA,CAAA,6BAAA,CAAA,WAAA,CAAA,4CAAA,kBAAA,CAAA,aAAA,CAAA,kDAAA,cAAA,CAAA,2BAAA,CAAA,sDAAA,YAAA,CAAA,iBAAA,CAAA,+CAAA,gBAAA,CAAA,UAAA,CAAA,WAAA",sourcesContent:[".selected-item.svelte-b5z3s7.svelte-b5z3s7{display:flex;flex-wrap:nowrap;align-items:start;justify-content:space-between;cursor:move}.selected-item.svelte-b5z3s7>.svelte-b5z3s7{margin-right:0.5rem;display:block}.selected-item.svelte-b5z3s7 button.svelte-b5z3s7{cursor:pointer;padding:0 0.375rem 0.374rem 0}.selected-item.svelte-b5z3s7 .item-info.svelte-b5z3s7{display:flex;align-items:start}.selected-item.svelte-b5z3s7>img.svelte-b5z3s7{object-fit:cover;width:95px;height:95px}\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiU2VsZWN0ZWRJdGVtLnN2ZWx0ZSIsInNvdXJjZXMiOlsiU2VsZWN0ZWRJdGVtLnN2ZWx0ZSJdLCJzb3VyY2VzQ29udGVudCI6WyI8c2NyaXB0PlxuICAgIGltcG9ydCB7IGdldENvbnRleHQgfSBmcm9tIFwic3ZlbHRlXCI7XG4gICAgaW1wb3J0IHsgcmVzb2x2ZUljb24gfSBmcm9tIFwiLi91dGlsc1wiO1xuXG4gICAgLy8gaXRlbSBkYXRhXG4gICAgZXhwb3J0IGxldCBpdGVtO1xuICAgIGV4cG9ydCBsZXQgdW5zZWxlY3RJdGVtO1xuPC9zY3JpcHQ+XG5cbjxkaXYgY2xhc3M9XCJzZWxlY3RlZC1pdGVtIGJvcmRlciBib3JkZXItc2Vjb25kYXJ5LXN1YnRsZSByb3VuZGVkIHAtMiBtYi0xIGJnLWJvZHktdGVydGlhcnlcIiBkYXRhLXV1aWQ9e2l0ZW0uVUlEfT5cbiAgICA8ZGl2IGNsYXNzPVwiaXRlbS1pbmZvXCI+XG4gICAgICAgIDwhLS0gc3ZlbHRlLWlnbm9yZSBhMTF5LW1pc3NpbmctYXR0cmlidXRlIC0tPlxuICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgICBjbGFzcz1cImJ0biBidG4tbGluayBidG4tc20gbGluay1zZWNvbmRhcnlcIlxuICAgICAgICAgICAgb246Y2xpY2t8cHJldmVudERlZmF1bHQ9eygpID0+IHVuc2VsZWN0SXRlbShpdGVtLlVJRCl9XG4gICAgICAgICAgICA+PHN2ZyB1c2U6cmVzb2x2ZUljb249e3sgaWNvbk5hbWU6IFwieC1jaXJjbGVcIiB9fSAvPjwvYnV0dG9uXG4gICAgICAgID5cbiAgICAgICAgPGRpdj5cbiAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwiaXRlbS10aXRsZVwiPntpdGVtLlRpdGxlfTwvc3Bhbj48YnIgLz5cbiAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwic21hbGxcIj57aXRlbS5wYXRofTwvc3Bhbj5cbiAgICAgICAgPC9kaXY+XG4gICAgPC9kaXY+XG4gICAgeyNpZiBpdGVtLmdldFVSTCAmJiAoaXRlbS5nZXRJY29uIHx8IGl0ZW0ucG9ydGFsX3R5cGUgPT09IFwiSW1hZ2VcIil9PGltZ1xuICAgICAgICAgICAgc3JjPVwie2l0ZW0uZ2V0VVJMfS9AQGltYWdlcy9pbWFnZS9taW5pXCJcbiAgICAgICAgICAgIGFsdD17aXRlbS5UaXRsZX1cbiAgICAgICAgLz57L2lmfVxuPC9kaXY+XG5cbjxzdHlsZT5cbiAgICAuc2VsZWN0ZWQtaXRlbSB7XG4gICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgIGZsZXgtd3JhcDogbm93cmFwO1xuICAgICAgICBhbGlnbi1pdGVtczogc3RhcnQ7XG4gICAgICAgIGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjtcbiAgICAgICAgY3Vyc29yOiBtb3ZlO1xuICAgIH1cbiAgICAuc2VsZWN0ZWQtaXRlbSA+ICoge1xuICAgICAgICBtYXJnaW4tcmlnaHQ6IDAuNXJlbTtcbiAgICAgICAgZGlzcGxheTogYmxvY2s7XG4gICAgfVxuICAgIC5zZWxlY3RlZC1pdGVtIGJ1dHRvbiB7XG4gICAgICAgIGN1cnNvcjogcG9pbnRlcjtcbiAgICAgICAgcGFkZGluZzogMCAwLjM3NXJlbSAwLjM3NHJlbSAwO1xuICAgIH1cbiAgICAuc2VsZWN0ZWQtaXRlbSAuaXRlbS1pbmZvIHtcbiAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgYWxpZ24taXRlbXM6IHN0YXJ0O1xuICAgIH1cbiAgICAuc2VsZWN0ZWQtaXRlbSA+IGltZyB7XG4gICAgICAgIG9iamVjdC1maXQ6IGNvdmVyO1xuICAgICAgICB3aWR0aDogOTVweDtcbiAgICAgICAgaGVpZ2h0OiA5NXB4O1xuICAgIH1cbjwvc3R5bGU+XG4iXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBNkJJLDBDQUFlLENBQ1gsT0FBTyxDQUFFLElBQUksQ0FDYixTQUFTLENBQUUsTUFBTSxDQUNqQixXQUFXLENBQUUsS0FBSyxDQUNsQixlQUFlLENBQUUsYUFBYSxDQUM5QixNQUFNLENBQUUsSUFDWixDQUNBLDRCQUFjLENBQUcsY0FBRSxDQUNmLFlBQVksQ0FBRSxNQUFNLENBQ3BCLE9BQU8sQ0FBRSxLQUNiLENBQ0EsNEJBQWMsQ0FBQyxvQkFBTyxDQUNsQixNQUFNLENBQUUsT0FBTyxDQUNmLE9BQU8sQ0FBRSxDQUFDLENBQUMsUUFBUSxDQUFDLFFBQVEsQ0FBQyxDQUNqQyxDQUNBLDRCQUFjLENBQUMsd0JBQVcsQ0FDdEIsT0FBTyxDQUFFLElBQUksQ0FDYixXQUFXLENBQUUsS0FDakIsQ0FDQSw0QkFBYyxDQUFHLGlCQUFJLENBQ2pCLFVBQVUsQ0FBRSxLQUFLLENBQ2pCLEtBQUssQ0FBRSxJQUFJLENBQ1gsTUFBTSxDQUFFLElBQ1oifQ==*/"],sourceRoot:""}]),t.A=c}}]);
//# sourceMappingURL=51410.162792813c0c34c0fe6b.min.js.map