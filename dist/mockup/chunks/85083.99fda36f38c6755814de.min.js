"use strict";(self.webpackChunk_plone_mockup=self.webpackChunk_plone_mockup||[]).push([[85083],{3831:function(g,I,A){A.d(I,{EO:function(){return c},Em:function(){return e},gf:function(){return i},qz:function(){return t},r1:function(){return s},x6:function(){return l}});var C=A(49264);async function e(g){let{method:I="GET",vocabularyUrl:A=null,attributes:C=[],path:e=null,uids:l=null,searchTerm:t=null,searchPath:c=null,levelInfoPath:i=null,selectableTypes:s=[],pageSize:n=100,page:b=1}=g,d={criteria:[]};if(e&&(d={criteria:[{i:"path",o:"plone.app.querystring.operation.string.path",v:`${e}::1`}],sort_on:"getObjPositionInParent",sort_order:"ascending"}),i&&(d={criteria:[{i:"path",o:"plone.app.querystring.operation.string.path",v:`${i}::0`}]}),c&&(d={criteria:[{i:"path",o:"plone.app.querystring.operation.string.path",v:c}]},s.length&&d.criteria.push({i:"portal_type",o:"plone.app.querystring.operation.list.contains",v:s})),l&&(d={criteria:[{i:"UID",o:"plone.app.querystring.operation.list.contains",v:l}]}),t&&d.criteria.push({i:"SearchableText",o:"plone.app.querystring.operation.string.contains",v:`${t}`}),!d.criteria.length)return{results:[],total:0};let u=`${A}${-1!==A.indexOf("?")?"&":"?"}query=${JSON.stringify(d)}&attributes=${JSON.stringify(C)}&batch=${JSON.stringify({page:b,size:n})}`,a=new Headers;a.set("Accept","application/json");const o=await fetch(u,{method:I,headers:a});if(!o.ok)return{results:[],total:0,errors:G.errors};const G=await o.json();if(!c&&!i&&s.length){const g={results:[],total:G.total};for(const I of G.results)(-1!=s.indexOf(I.portal_type)||I.is_folderish)&&g.results.push(I);return g}return G}async function l(g,I){if(!g)return[];const A=await e({vocabularyUrl:I.vocabularyUrl,attributes:I.attributes,uids:g});let C=await(A?.results)||[];return C.sort(((I,A)=>g.indexOf(I.UID)-g.indexOf(A.UID))),C}async function t(g,I){let{iconName:A}=I;const e=await async function(g){return await C.A.resolveIcon(g)}(A);return g.outerHTML=e,{destroy(){}}}function c(g){const I=I=>{g&&!g.contains(I.target)&&g.dispatchEvent(new CustomEvent("click_outside",g))};return document.addEventListener("click",I,!0),{destroy(){document.removeEventListener("click",I,!0)}}}function i(g,I){let A=C.A.storage.get(I.recentlyUsedKey)||[];A=A.slice(A.length-1e3,A.length),g&&I?.selectableTypes.length&&(A=A.filter((g=>-1!=I.selectableTypes.indexOf(g.portal_type))));const e=parseInt(I.recentlyUsedMaxItems,20);return e&&(A=A.slice(A.length-e,A.length)),A}function s(g,I){if(!I.recentlyUsed)return;const A=i(!1,I),e=A.filter((I=>I.UID===g.UID));e.length>0&&A.splice(A.indexOf(e[0]),1),A.push(g),C.A.storage.set(I.recentlyUsedKey,A)}},24433:function(g,I,A){var C=A(71354),e=A.n(C),l=A(76314),t=A.n(l)()(e());t.push([g.id,".content-browser-position-wrapper.svelte-jgy3q8.svelte-jgy3q8.svelte-jgy3q8{position:fixed;top:0;right:0;display:flex;justify-content:end;z-index:1500;width:100%;height:100vh;background-color:rgba(0,0,0,.25)}.btn-xs.svelte-jgy3q8.svelte-jgy3q8.svelte-jgy3q8{--bs-btn-padding-y:0.15rem;--bs-btn-padding-x:0.5rem;--bs-btn-font-size:0.75rem}.content-browser.svelte-jgy3q8.svelte-jgy3q8.svelte-jgy3q8{height:100vh;min-width:550px;background-color:var(--bs-light-bg-subtle);border-left:var(--bs-border-style) var(--bs-border-width) #fff;z-index:1500;display:flex;flex-direction:column}.toolBar.svelte-jgy3q8.svelte-jgy3q8.svelte-jgy3q8{background-color:var(--bs-primary);padding:.325rem .75rem;color:var(--bs-light);width:100%;display:flex;justify-content:start}.toolBar.svelte-jgy3q8 svg{vertical-align:-0.125em}.levelColumns.svelte-jgy3q8.svelte-jgy3q8.svelte-jgy3q8{display:flex;flex-wrap:nowrap;width:100%;overflow:hidden;flex-grow:3;border-left:var(--bs-border-style) var(--bs-border-color) var(--bs-border-width);user-select:none}.levelColumn.svelte-jgy3q8.svelte-jgy3q8.svelte-jgy3q8{width:320px;border-right:var(--bs-border-style) var(--bs-border-width) var(--bs-border-color);display:flex;flex-direction:column}.levelToolbar.svelte-jgy3q8.svelte-jgy3q8.svelte-jgy3q8{width:100%;height:2.5rem;display:flex;justify-content:space-between;padding:.375rem;border-bottom:var(--bs-border-style) var(--bs-border-width) var(--bs-border-color)}.levelToolbar.svelte-jgy3q8>.levelActions.svelte-jgy3q8.svelte-jgy3q8{margin-left:auto}.levelToolbar.svelte-jgy3q8>button.svelte-jgy3q8.svelte-jgy3q8{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.levelItems.svelte-jgy3q8.svelte-jgy3q8.svelte-jgy3q8{overflow-x:auto}.contentItem.svelte-jgy3q8.svelte-jgy3q8.svelte-jgy3q8{display:flex;align-items:center;justify-content:space-between;font-size:90%;min-height:2rem}.contentItem.svelte-jgy3q8.svelte-jgy3q8.svelte-jgy3q8:focus-visible{outline:none}.contentItem.even.svelte-jgy3q8.svelte-jgy3q8.svelte-jgy3q8{background-color:rgba(var(--bs-secondary-bg-rgb), 0.4)}.contentItem.inPath.svelte-jgy3q8.svelte-jgy3q8.svelte-jgy3q8,.contentItem.svelte-jgy3q8.svelte-jgy3q8.svelte-jgy3q8:focus{background-color:rgba(var(--bs-primary-rgb), 0.15)}.contentItem.selectedItem.svelte-jgy3q8.svelte-jgy3q8.svelte-jgy3q8{background-color:var(--bs-primary);color:var(--bs-body-bg)}.contentItem.svelte-jgy3q8>.svelte-jgy3q8.svelte-jgy3q8{padding:.5rem;white-space:nowrap;max-width:450px;text-overflow:ellipsis;overflow:hidden}.contentItem.svelte-jgy3q8>.browseSub.svelte-jgy3q8.svelte-jgy3q8{flex-shrink:0}.contentItem.svelte-jgy3q8 .grid-preview.svelte-jgy3q8>img.svelte-jgy3q8{width:95px;height:95px;object-fit:cover;float:left;margin-right:1rem}.preview.svelte-jgy3q8.svelte-jgy3q8.svelte-jgy3q8{width:320px;min-height:300px;display:flex;flex-direction:column;align-items:center}.preview.svelte-jgy3q8 .info.svelte-jgy3q8.svelte-jgy3q8{padding:.5rem;width:100%;word-wrap:anywhere}.preview.svelte-jgy3q8 .info .previewIcon.svelte-jgy3q8.svelte-jgy3q8{margin:0 auto 1rem auto}.preview.svelte-jgy3q8 .info .previewIcon svg.svelte-jgy3q8.svelte-jgy3q8{width:50px !important;height:50px !important}.preview.svelte-jgy3q8 h4.svelte-jgy3q8.svelte-jgy3q8{font-size:1.2 rem}.preview.svelte-jgy3q8 img.svelte-jgy3q8.svelte-jgy3q8{max-width:100%;max-width:100%;margin-bottom:.5rem}.upload-wrapper.svelte-jgy3q8.svelte-jgy3q8.svelte-jgy3q8{padding:1rem;width:590px;overflow-x:auto}.loadmore.svelte-jgy3q8.svelte-jgy3q8.svelte-jgy3q8{text-align:center;padding:.25rem 0}","",{version:3,sources:["webpack://./src/pat/contentbrowser/src/ContentBrowser.svelte"],names:[],mappings:"AAAA,4EAAA,cAAA,CAAA,KAAA,CAAA,OAAA,CAAA,YAAA,CAAA,mBAAA,CAAA,YAAA,CAAA,UAAA,CAAA,YAAA,CAAA,gCAAA,CAAA,kDAAA,0BAAA,CAAA,yBAAA,CAAA,0BAAA,CAAA,2DAAA,YAAA,CAAA,eAAA,CAAA,0CAAA,CAAA,8DAAA,CAAA,YAAA,CAAA,YAAA,CAAA,qBAAA,CAAA,mDAAA,kCAAA,CAAA,sBAAA,CAAA,qBAAA,CAAA,UAAA,CAAA,YAAA,CAAA,qBAAA,CAAA,2BAAA,uBAAA,CAAA,wDAAA,YAAA,CAAA,gBAAA,CAAA,UAAA,CAAA,eAAA,CAAA,WAAA,CAAA,gFAAA,CAAA,gBAAA,CAAA,uDAAA,WAAA,CAAA,iFAAA,CACmC,YAAA,CAAA,qBAAA,CAAA,wDAAA,UAAA,CAAA,aAAA,CAAA,YAAA,CAAA,6BAAA,CAAA,eAAA,CAAA,kFAAA,CACA,sEAAA,gBAAA,CAAA,+DAAA,kBAAA,CAAA,eAAA,CAAA,sBAAA,CAAA,sDAAA,eAAA,CAAA,uDAAA,YAAA,CAAA,kBAAA,CAAA,6BAAA,CAAA,aAAA,CAAA,eAAA,CAAA,qEAAA,YAAA,CAAA,4DAAA,sDAAA,CAAA,2HAAA,kDAAA,CAAA,oEAAA,kCAAA,CAAA,uBAAA,CAAA,wDAAA,aAAA,CAAA,kBAAA,CAAA,eAAA,CAAA,sBAAA,CAAA,eAAA,CAAA,kEAAA,aAAA,CAAA,yEAAA,UAAA,CAAA,WAAA,CAAA,gBAAA,CAAA,UAAA,CAAA,iBAAA,CAAA,mDAAA,WAAA,CAAA,gBAAA,CAAA,YAAA,CAAA,qBAAA,CAAA,kBAAA,CAAA,yDAAA,aAAA,CAAA,UAAA,CAAA,kBAAA,CAAA,sEAAA,uBAAA,CAAA,0EAAA,qBAAA,CAAA,sBAAA,CAAA,sDAAA,iBAAA,CAAA,uDAAA,cAAA,CAAA,cAAA,CAAA,mBAAA,CAAA,0DAAA,YAAA,CAAA,WAAA,CAAA,eAAA,CAAA,oDAAA,iBAAA,CAAA,gBAAA",sourcesContent:[".content-browser-position-wrapper.svelte-jgy3q8.svelte-jgy3q8.svelte-jgy3q8{position:fixed;top:0;right:0;display:flex;justify-content:end;z-index:1500;width:100%;height:100vh;background-color:rgba(0, 0, 0, 0.25)}.btn-xs.svelte-jgy3q8.svelte-jgy3q8.svelte-jgy3q8{--bs-btn-padding-y:0.15rem;--bs-btn-padding-x:0.5rem;--bs-btn-font-size:0.75rem}.content-browser.svelte-jgy3q8.svelte-jgy3q8.svelte-jgy3q8{height:100vh;min-width:550px;background-color:var(--bs-light-bg-subtle);border-left:var(--bs-border-style) var(--bs-border-width) #fff;z-index:1500;display:flex;flex-direction:column}.toolBar.svelte-jgy3q8.svelte-jgy3q8.svelte-jgy3q8{background-color:var(--bs-primary);padding:0.325rem 0.75rem;color:var(--bs-light);width:100%;display:flex;justify-content:start}.toolBar.svelte-jgy3q8 svg{vertical-align:-0.125em}.levelColumns.svelte-jgy3q8.svelte-jgy3q8.svelte-jgy3q8{display:flex;flex-wrap:nowrap;width:100%;overflow:hidden;flex-grow:3;border-left:var(--bs-border-style) var(--bs-border-color) var(--bs-border-width);user-select:none}.levelColumn.svelte-jgy3q8.svelte-jgy3q8.svelte-jgy3q8{width:320px;border-right:var(--bs-border-style) var(--bs-border-width)\n            var(--bs-border-color);display:flex;flex-direction:column}.levelToolbar.svelte-jgy3q8.svelte-jgy3q8.svelte-jgy3q8{width:100%;height:2.5rem;display:flex;justify-content:space-between;padding:0.375rem;border-bottom:var(--bs-border-style) var(--bs-border-width)\n            var(--bs-border-color)}.levelToolbar.svelte-jgy3q8>.levelActions.svelte-jgy3q8.svelte-jgy3q8{margin-left:auto}.levelToolbar.svelte-jgy3q8>button.svelte-jgy3q8.svelte-jgy3q8{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.levelItems.svelte-jgy3q8.svelte-jgy3q8.svelte-jgy3q8{overflow-x:auto}.contentItem.svelte-jgy3q8.svelte-jgy3q8.svelte-jgy3q8{display:flex;align-items:center;justify-content:space-between;font-size:90%;min-height:2rem}.contentItem.svelte-jgy3q8.svelte-jgy3q8.svelte-jgy3q8:focus-visible{outline:none}.contentItem.even.svelte-jgy3q8.svelte-jgy3q8.svelte-jgy3q8{background-color:rgba(var(--bs-secondary-bg-rgb), .4)}.contentItem.inPath.svelte-jgy3q8.svelte-jgy3q8.svelte-jgy3q8,.contentItem.svelte-jgy3q8.svelte-jgy3q8.svelte-jgy3q8:focus{background-color:rgba(var(--bs-primary-rgb), 0.15)}.contentItem.selectedItem.svelte-jgy3q8.svelte-jgy3q8.svelte-jgy3q8{background-color:var(--bs-primary);color:var(--bs-body-bg)}.contentItem.svelte-jgy3q8>.svelte-jgy3q8.svelte-jgy3q8{padding:0.5rem;white-space:nowrap;max-width:450px;text-overflow:ellipsis;overflow:hidden}.contentItem.svelte-jgy3q8>.browseSub.svelte-jgy3q8.svelte-jgy3q8{flex-shrink:0}.contentItem.svelte-jgy3q8 .grid-preview.svelte-jgy3q8>img.svelte-jgy3q8{width:95px;height:95px;object-fit:cover;float:left;margin-right:1rem}.preview.svelte-jgy3q8.svelte-jgy3q8.svelte-jgy3q8{width:320px;min-height:300px;display:flex;flex-direction:column;align-items:center}.preview.svelte-jgy3q8 .info.svelte-jgy3q8.svelte-jgy3q8{padding:0.5rem;width:100%;word-wrap:anywhere}.preview.svelte-jgy3q8 .info .previewIcon.svelte-jgy3q8.svelte-jgy3q8{margin:0 auto 1rem auto}.preview.svelte-jgy3q8 .info .previewIcon svg.svelte-jgy3q8.svelte-jgy3q8{width:50px !important;height:50px !important}.preview.svelte-jgy3q8 h4.svelte-jgy3q8.svelte-jgy3q8{font-size:1.2 rem}.preview.svelte-jgy3q8 img.svelte-jgy3q8.svelte-jgy3q8{max-width:100%;max-width:100%;margin-bottom:0.5rem}.upload-wrapper.svelte-jgy3q8.svelte-jgy3q8.svelte-jgy3q8{padding:1rem;width:590px;overflow-x:auto}.loadmore.svelte-jgy3q8.svelte-jgy3q8.svelte-jgy3q8{text-align:center;padding:0.25rem 0}\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiQ29udGVudEJyb3dzZXIuc3ZlbHRlIiwic291cmNlcyI6WyJDb250ZW50QnJvd3Nlci5zdmVsdGUiXSwic291cmNlc0NvbnRlbnQiOlsiPHNjcmlwdD5cbiAgICBpbXBvcnQgdXRpbHMgZnJvbSBcIkBwYXR0ZXJuc2xpYi9wYXR0ZXJuc2xpYi9zcmMvY29yZS91dGlsc1wiO1xuICAgIGltcG9ydCB7IGdldENvbnRleHQgfSBmcm9tIFwic3ZlbHRlXCI7XG4gICAgaW1wb3J0ICogYXMgYW5pbWF0ZVNjcm9sbCBmcm9tIFwic3ZlbHRlLXNjcm9sbHRvXCI7XG4gICAgaW1wb3J0IHsgZmx5IH0gZnJvbSBcInN2ZWx0ZS90cmFuc2l0aW9uXCI7XG4gICAgaW1wb3J0IF90IGZyb20gXCIuLi8uLi8uLi9jb3JlL2kxOG4td3JhcHBlclwiO1xuICAgIGltcG9ydCBVcGxvYWQgZnJvbSBcIi4uLy4uL3VwbG9hZC91cGxvYWRcIjtcbiAgICBpbXBvcnQgY29udGVudFN0b3JlIGZyb20gXCIuL0NvbnRlbnRTdG9yZVwiO1xuICAgIGltcG9ydCB7XG4gICAgICAgIGNsaWNrT3V0c2lkZSxcbiAgICAgICAgZ2V0X2l0ZW1zX2Zyb21fdWlkcyxcbiAgICAgICAgcmVxdWVzdCxcbiAgICAgICAgcmVzb2x2ZUljb24sXG4gICAgICAgIHVwZGF0ZVJlY2VudGx5VXNlZCxcbiAgICB9IGZyb20gXCIuL3V0aWxzXCI7XG4gICAgaW1wb3J0IEZhdm9yaXRlcyBmcm9tIFwiLi9GYXZvcml0ZXMuc3ZlbHRlXCI7XG4gICAgaW1wb3J0IFJlY2VudGx5VXNlZCBmcm9tIFwiLi9SZWNlbnRseVVzZWQuc3ZlbHRlXCI7XG5cbiAgICBhbmltYXRlU2Nyb2xsLnNldEdsb2JhbE9wdGlvbnMoe1xuICAgICAgICBzY3JvbGxYOiB0cnVlLFxuICAgICAgICBjb250YWluZXI6IFwiLmxldmVsQ29sdW1uc1wiLFxuICAgICAgICBkdXJhdGlvbjogNTAwLFxuICAgIH0pO1xuXG4gICAgLy8gZ2V0IGNvbnRleHQgc3RvcmVzXG4gICAgY29uc3QgY3VycmVudFBhdGggPSBnZXRDb250ZXh0KFwiY3VycmVudFBhdGhcIik7XG4gICAgY29uc3QgY29uZmlnID0gZ2V0Q29udGV4dChcImNvbmZpZ1wiKTtcbiAgICBjb25zdCBwYXRoQ2FjaGUgPSBnZXRDb250ZXh0KFwicGF0aENhY2hlXCIpO1xuICAgIGNvbnN0IHNob3dDb250ZW50QnJvd3NlciA9IGdldENvbnRleHQoXCJzaG93Q29udGVudEJyb3dzZXJcIik7XG4gICAgY29uc3Qgc2VsZWN0ZWRJdGVtcyA9IGdldENvbnRleHQoXCJzZWxlY3RlZEl0ZW1zXCIpO1xuICAgIGNvbnN0IHNlbGVjdGVkVWlkcyA9IGdldENvbnRleHQoXCJzZWxlY3RlZFVpZHNcIik7XG4gICAgY29uc3QgcHJldmlld1VpZHMgPSBnZXRDb250ZXh0KFwicHJldmlld1VpZHNcIik7XG5cbiAgICAvLyBpbml0aWFsaXplIGNvbnRlbnQgYnJvd3NlciBzdG9yZVxuICAgIGNvbnN0IGNvbnRlbnRJdGVtcyA9IGNvbnRlbnRTdG9yZSgkY29uZmlnLCBwYXRoQ2FjaGUpO1xuXG4gICAgbGV0IHNob3dVcGxvYWQgPSBmYWxzZTtcbiAgICBsZXQgcHJldmlld0l0ZW0gPSB7fTtcbiAgICBsZXQga2V5Ym9hcmROYXZJbml0aWFsaXplZCA9IGZhbHNlO1xuICAgIGxldCBzaGlmdEtleSA9IGZhbHNlO1xuXG4gICAgbGV0IHZ3ID0gTWF0aC5tYXgoZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudFdpZHRoIHx8IDAsIHdpbmRvdy5pbm5lcldpZHRoIHx8IDApO1xuXG4gICAgZnVuY3Rpb24gdXBkYXRlUHJldmlldyh7IGRhdGEgPSBudWxsLCB1dWlkID0gbnVsbCwgYWN0aW9uID0gXCJzaG93XCIgfSkge1xuICAgICAgICBpZiAoZGF0YSAmJiBhY3Rpb24gPT0gXCJzaG93XCIpIHtcbiAgICAgICAgICAgIHByZXZpZXdJdGVtID0gZGF0YTtcbiAgICAgICAgICAgICRwcmV2aWV3VWlkcyA9IFtkYXRhLlVJRF07XG4gICAgICAgIH0gZWxzZSBpZiAodXVpZCAmJiBhY3Rpb24gPT0gXCJhZGRcIiAmJiAkcHJldmlld1VpZHMuaW5kZXhPZih1dWlkKSA9PT0gLTEpIHtcbiAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAkY29uZmlnLm1heGltdW1TZWxlY3Rpb25TaXplID4gMCAmJlxuICAgICAgICAgICAgICAgICRwcmV2aWV3VWlkcy5sZW5ndGggPj0gJGNvbmZpZy5tYXhpbXVtU2VsZWN0aW9uU2l6ZVxuICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgLy8gcmVzcGVjdCBtYXhpbXVtU2VsZWN0aW9uU2l6ZVxuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgICRwcmV2aWV3VWlkcyA9IFsuLi4kcHJldmlld1VpZHMsIHV1aWRdOyAvLyBOT1RFOiAkcHJldmlld1VpZHMucHVzaCgpIGlzIG5vdCBhIHJlYWN0aXZlIGNoYW5nZVxuICAgICAgICB9IGVsc2UgaWYgKHV1aWQgJiYgYWN0aW9uID09IFwicmVtb3ZlXCIgJiYgJHByZXZpZXdVaWRzLmluZGV4T2YodXVpZCkgIT09IC0xKSB7XG4gICAgICAgICAgICBwcmV2aWV3VWlkcy51cGRhdGUoKG4pID0+IHtcbiAgICAgICAgICAgICAgICBuLnNwbGljZShuLmluZGV4T2YodXVpZCksIDEpO1xuICAgICAgICAgICAgICAgIHJldHVybiBuO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0gZWxzZSBpZiAoYWN0aW9uID09IFwiY2xlYXJcIikge1xuICAgICAgICAgICAgcHJldmlld0l0ZW0gPSB7fTtcbiAgICAgICAgICAgICRwcmV2aWV3VWlkcyA9IFtdO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgYXN5bmMgZnVuY3Rpb24gdXBsb2FkKCkge1xuICAgICAgICB1cGRhdGVQcmV2aWV3KHsgYWN0aW9uOiBcImNsZWFyXCIgfSk7XG4gICAgICAgIHNob3dVcGxvYWQgPSB0cnVlO1xuICAgICAgICBhd2FpdCB1dGlscy50aW1lb3V0KDEpO1xuICAgICAgICBjb25zdCB1cGxvYWRFbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIudXBsb2FkLXdyYXBwZXJcIik7XG4gICAgICAgIHVwbG9hZEVsLmNsYXNzTGlzdC5hZGQoXCJwYXQtdXBsb2FkXCIpO1xuICAgICAgICBjb25zdCBwYXRVcGxvYWQgPSBuZXcgVXBsb2FkKHVwbG9hZEVsLCB7XG4gICAgICAgICAgICBiYXNlVXJsOiAkY29uZmlnLnJvb3RVcmwsXG4gICAgICAgICAgICBjdXJyZW50UGF0aDogJGN1cnJlbnRQYXRoLFxuICAgICAgICAgICAgcmVsYXRpdmVQYXRoOiBcIkBAZmlsZVVwbG9hZFwiLFxuICAgICAgICAgICAgYWxsb3dQYXRoU2VsZWN0aW9uOiBmYWxzZSxcbiAgICAgICAgICAgIGhpZGRlbklucHV0Q29udGFpbmVyOiBcIi51cGxvYWQtd3JhcHBlclwiLFxuICAgICAgICAgICAgc3VjY2VzczogKGZpbGVVcGxvYWQsIG9iaikgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnRlbnRJdGVtcy5nZXQoeyBwYXRoOiAkY3VycmVudFBhdGgsIHVwZGF0ZUNhY2hlOiB0cnVlIH0pO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gc2hvd1ByZXZpZXcoaXRlbSkge1xuICAgICAgICBpZiAoJGNvbmZpZy5tb2RlID09IFwic2VhcmNoXCIpIHtcbiAgICAgICAgICAgIC8vIG9uZSBsZXZlbCBzZWFyY2ggbW9kZVxuICAgICAgICAgICAgdXBkYXRlUHJldmlldyh7IGRhdGE6IGl0ZW0gfSk7XG4gICAgICAgIH0gZWxzZSBpZiAoaXRlbS5pc19mb2xkZXJpc2gpIHtcbiAgICAgICAgICAgICRwcmV2aWV3VWlkcyA9IFtpdGVtLlVJRF07XG4gICAgICAgICAgICBjdXJyZW50UGF0aC5zZXQoaXRlbS5wYXRoKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IHBhdGhQYXJ0cyA9IGl0ZW0ucGF0aC5zcGxpdChcIi9cIik7XG4gICAgICAgICAgICBjb25zdCBmb2xkZXJQYXRoID0gcGF0aFBhcnRzLnNsaWNlKDAsIHBhdGhQYXJ0cy5sZW5ndGggLSAxKS5qb2luKFwiL1wiKTtcbiAgICAgICAgICAgIGN1cnJlbnRQYXRoLnNldChmb2xkZXJQYXRoIHx8ICRjb25maWcucm9vdFBhdGgpO1xuICAgICAgICAgICAgdXBkYXRlUHJldmlldyh7IGRhdGE6IGl0ZW0gfSk7XG4gICAgICAgIH1cbiAgICAgICAgc2Nyb2xsVG9SaWdodCgpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGNoYW5nZVBhdGgoaXRlbSwgZSkge1xuICAgICAgICAvLyBhbHdheXMgaGlkZSB1cGxvYWQgd2hlbiBjaGFuZ2luZyBwYXRoXG4gICAgICAgIHNob3dVcGxvYWQgPSBmYWxzZTtcblxuICAgICAgICAvLyBjbGVhciBwcmV2aW91cyBzZWxlY3Rpb25cbiAgICAgICAgdXBkYXRlUHJldmlldyh7IGFjdGlvbjogXCJjbGVhclwiIH0pO1xuXG4gICAgICAgIGlmIChpdGVtID09PSBcIi9cIiB8fCBpdGVtID09PSAkY29uZmlnLnJvb3RQYXRoKSB7XG4gICAgICAgICAgICAvLyBjbGlja2VkIFwiaG9tZVwiIGJ1dHRvblxuICAgICAgICAgICAgY3VycmVudFBhdGguc2V0KCRjb25maWcucm9vdFBhdGgpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gc2hvdyBjbGlja2VkIGl0ZW1cbiAgICAgICAgc2hvd1ByZXZpZXcoaXRlbSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gY2xpY2tJdGVtKGl0ZW0sIGUpIHtcbiAgICAgICAgaWYgKCFrZXlib2FyZE5hdkluaXRpYWxpemVkKSB7XG4gICAgICAgICAgICAvLyBpZiB3ZSd2ZSBhbHJlYWR5IGNsaWNrZWQgYW4gZWxlbWVudCB3aXRoIHRoZSBtb3VzZVxuICAgICAgICAgICAgLy8gZG8gbm90IHN0YXJ0IG92ZXIga2V5Ym9hcmRuYXZcbiAgICAgICAgICAgIGtleWJvYXJkTmF2SW5pdGlhbGl6ZWQgPSB0cnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gY2hlY2sgZm9yIG11bHRpc2VsZWN0aW9uXG4gICAgICAgIGNvbnN0IGxldmVsV3JhcHBlciA9IGUuY3VycmVudFRhcmdldC5jbG9zZXN0KFwiLmxldmVsSXRlbXNcIik7XG4gICAgICAgIGNvbnN0IHByZXZTZWxlY3Rpb24gPSBsZXZlbFdyYXBwZXIucXVlcnlTZWxlY3RvckFsbChcIi5zZWxlY3RlZEl0ZW1cIik7XG5cbiAgICAgICAgaWYgKHByZXZTZWxlY3Rpb24ubGVuZ3RoICYmICRjb25maWcubWF4aW11bVNlbGVjdGlvblNpemUgIT0gMSkge1xuICAgICAgICAgICAgLy8gY2hlY2sgZm9yIHByZXNzZWQgc2hpZnQgb3IgY3RybC9tZXRhIGtleSBmb3IgbXVsdGlzZWxlY3Rpb25cblxuICAgICAgICAgICAgaWYgKHNoaWZ0S2V5IHx8IGU/LnNoaWZ0S2V5KSB7XG4gICAgICAgICAgICAgICAgLy8gaXRlciB0aHJvdWdoIHRoZSB3cmFwcGVyIGNoaWxkcmVuIGFuZCBzZWxlY3QgYWxsXG4gICAgICAgICAgICAgICAgLy8gaW5iZXR3ZWVuIGN1cnJlbnQgc2VsZWN0aW9uIGFuZCBsYXN0IHByZXZpZXdcbiAgICAgICAgICAgICAgICBsZXQgc2VsZWN0ID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBlbCBvZiBsZXZlbFdyYXBwZXIuY2hpbGRyZW4pIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKFtpdGVtLlVJRCwgcHJldmlld0l0ZW0uVUlEXS5pbmRleE9mKGVsLmRhdGFzZXQudXVpZCkgIT09IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoc2VsZWN0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gc3RvcCBzZWxlY3RpbmcgYnV0IG1ha2Ugc3VyZSB0aGUgbGFzdCBpdGVtIGlzIHNlbGVjdGVkIHRvb1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVwZGF0ZVByZXZpZXcoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1dWlkOiBlbC5kYXRhc2V0LnV1aWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjdGlvbjogXCJhZGRcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxlY3QgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHN0YXJ0IHNlbGVjdGluZ1xuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZWN0ID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB1cGRhdGVQcmV2aWV3KHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHV1aWQ6IGVsLmRhdGFzZXQudXVpZCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGFjdGlvbjogc2VsZWN0ID8gXCJhZGRcIiA6IFwicmVtb3ZlXCIsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZT8ubWV0YUtleSB8fCBlPy5jdHJsS2V5KSB7XG4gICAgICAgICAgICAgICAgLy8gZGUvc2VsZWN0IG11bHRpcGxlIHNpbmdsZSBpdGVtc1xuICAgICAgICAgICAgICAgIC8vIE5PVEU6IG9ubHkgZm9yIG1vdXNlIGNsaWNrIGV2ZW50XG4gICAgICAgICAgICAgICAgdXBkYXRlUHJldmlldyh7XG4gICAgICAgICAgICAgICAgICAgIHV1aWQ6IGl0ZW0uVUlELFxuICAgICAgICAgICAgICAgICAgICBhY3Rpb246ICRwcmV2aWV3VWlkcy5pbmRleE9mKGl0ZW0uVUlEKSA9PSAtMSA/IFwiYWRkXCIgOiBcInJlbW92ZVwiLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyB1bnNlbGVjdFxuICAgICAgICAgICAgICAgIFsuLi5wcmV2U2VsZWN0aW9uXS5tYXAoKGVsKSA9PiBlbC5jbGFzc0xpc3QucmVtb3ZlKFwic2VsZWN0ZWRJdGVtXCIpKTtcbiAgICAgICAgICAgICAgICBjaGFuZ2VQYXRoKGl0ZW0sIGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY2hhbmdlUGF0aChpdGVtLCBlKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGUuY3VycmVudFRhcmdldC5mb2N1cygpOyAvLyBuZWVkZWQgZm9yIGtleWJvYXJkIG5hdmlnYXRpb25cbiAgICAgICAgZS5jdXJyZW50VGFyZ2V0LmNsYXNzTGlzdC5hZGQoXCJzZWxlY3RlZEl0ZW1cIik7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gaW5pdEtleWJvYXJkTmF2KCkge1xuICAgICAgICAvLyBmb2N1cyBmaXJzdCBlbGVtZW50IHdoZW4gc2hvd2luZyBjb250ZW50YnJvd3NlclxuICAgICAgICBpZiAoa2V5Ym9hcmROYXZJbml0aWFsaXplZCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHBvc3NpYmxlRm9jdXNFbHMgPSBbXG4gICAgICAgICAgICAuLi5kb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLmxldmVsQ29sdW1uIC5pblBhdGhcIiksIC8vIHByZXZpb3VzbHkgc2VsZWN0ZWQgZm9sZGVyXG4gICAgICAgICAgICAuLi5kb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLmxldmVsQ29sdW1uIC5zZWxlY3RlZEl0ZW1cIiksIC8vIHByZXZpb3VzbHkgc2VsZWN0ZWQgaXRlbVxuICAgICAgICBdO1xuICAgICAgICBpZighcG9zc2libGVGb2N1c0Vscy5sZW5ndGggJiYgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5sZXZlbENvbHVtbiAuY29udGVudEl0ZW1cIikpIHtcbiAgICAgICAgICAgIHBvc3NpYmxlRm9jdXNFbHMucHVzaChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmxldmVsQ29sdW1uIC5jb250ZW50SXRlbVwiKSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHBvc3NpYmxlRm9jdXNFbHMubGVuZ3RoKSB7XG4gICAgICAgICAgICBrZXlib2FyZE5hdkluaXRpYWxpemVkID0gdHJ1ZTtcbiAgICAgICAgICAgIHBvc3NpYmxlRm9jdXNFbHNbMF0uZm9jdXMoKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGtleWJvYXJkTmF2aWdhdGlvbihpdGVtLCBlKSB7XG4gICAgICAgIGNvbnN0IG5vZGUgPSBlLmN1cnJlbnRUYXJnZXQ7XG4gICAgICAgIHNoaWZ0S2V5ID0gZS5zaGlmdEtleTtcbiAgICAgICAgaWYgKGUua2V5ID09IFwiRXNjYXBlXCIpIHtcbiAgICAgICAgICAgIGNhbmNlbFNlbGVjdGlvbigpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChcbiAgICAgICAgICAgIGUua2V5ID09IFwiQXJyb3dEb3duXCIgJiZcbiAgICAgICAgICAgIG5vZGU/Lm5leHRFbGVtZW50U2libGluZz8uY2xhc3NMaXN0LmNvbnRhaW5zKFwiY29udGVudEl0ZW1cIilcbiAgICAgICAgKSB7XG4gICAgICAgICAgICBub2RlLm5leHRFbGVtZW50U2libGluZy5jbGljaygpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChcbiAgICAgICAgICAgIGUua2V5ID09IFwiQXJyb3dVcFwiICYmXG4gICAgICAgICAgICBub2RlPy5wcmV2aW91c0VsZW1lbnRTaWJsaW5nPy5jbGFzc0xpc3QuY29udGFpbnMoXCJjb250ZW50SXRlbVwiKVxuICAgICAgICApIHtcbiAgICAgICAgICAgIG5vZGUucHJldmlvdXNFbGVtZW50U2libGluZy5jbGljaygpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChlLmtleSA9PSBcIkFycm93UmlnaHRcIikge1xuICAgICAgICAgICAgY29uc3QgY3VyckNvbCA9IGUudGFyZ2V0LmNsb3Nlc3QoXCIubGV2ZWxDb2x1bW5cIik7XG4gICAgICAgICAgICBjb25zdCBueHRDb2wgPSBjdXJyQ29sPy5uZXh0RWxlbWVudFNpYmxpbmc7XG4gICAgICAgICAgICBpZiAoIW54dENvbCB8fCAhbnh0Q29sLmNsYXNzTGlzdC5jb250YWlucyhcImxldmVsQ29sdW1uXCIpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbnh0Q29sLnF1ZXJ5U2VsZWN0b3IoXCIuY29udGVudEl0ZW1cIik/LmNsaWNrKCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGUua2V5ID09IFwiQXJyb3dMZWZ0XCIpIHtcbiAgICAgICAgICAgIGNvbnN0IGN1cnJDb2wgPSBlLnRhcmdldC5jbG9zZXN0KFwiLmxldmVsQ29sdW1uXCIpO1xuICAgICAgICAgICAgY29uc3QgcHJldkNvbCA9IGN1cnJDb2w/LnByZXZpb3VzRWxlbWVudFNpYmxpbmc7XG4gICAgICAgICAgICBpZiAoIXByZXZDb2wgfHwgIXByZXZDb2wuY2xhc3NMaXN0LmNvbnRhaW5zKFwibGV2ZWxDb2x1bW5cIikpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBwcmV2Q29sLnF1ZXJ5U2VsZWN0b3IoXCIuaW5QYXRoXCIpLmNsaWNrKCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGUua2V5ID09IFwiU3BhY2VcIikge1xuICAgICAgICAgICAgLy8gYWRkIGl0ZW0gdG8gc2VsZWN0aW9uIChsaWtlIG1ldGFLZXkgKyBjbGljaylcbiAgICAgICAgICAgIGNsaWNrSXRlbShpdGVtLCBlLCB0cnVlKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZS5rZXkgPT0gXCJFbnRlclwiKSB7XG4gICAgICAgICAgICBpZiAoaXNTZWxlY3RhYmxlKGl0ZW0pKSB7XG4gICAgICAgICAgICAgICAgaWYgKCRjb25maWcubWF4aW11bVNlbGVjdGlvblNpemUgPT0gMSkge1xuICAgICAgICAgICAgICAgICAgICBhZGRJdGVtKGl0ZW0pO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGFkZFNlbGVjdGVkSXRlbXMoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBhc3luYyBmdW5jdGlvbiBhZGRJdGVtKGl0ZW0pIHtcbiAgICAgICAgaWYgKCRjb25maWcubWF4aW11bVNlbGVjdGlvblNpemUgPT0gMSkge1xuICAgICAgICAgICAgc2VsZWN0ZWRJdGVtcy5zZXQoW2l0ZW1dKTtcbiAgICAgICAgICAgIHNlbGVjdGVkVWlkcy5zZXQoW2l0ZW0uVUlEXSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBzZWxlY3RlZEl0ZW1zLnVwZGF0ZSgobikgPT4gWy4uLm4sIGl0ZW1dKTtcbiAgICAgICAgICAgIHNlbGVjdGVkVWlkcy51cGRhdGUoKCkgPT4gJHNlbGVjdGVkSXRlbXMubWFwKCh4KSA9PiB4LlVJRCkpO1xuICAgICAgICB9XG4gICAgICAgIHVwZGF0ZVJlY2VudGx5VXNlZChpdGVtLCAkY29uZmlnKTtcbiAgICAgICAgdXBkYXRlUHJldmlldyh7IGFjdGlvbjogXCJjbGVhclwiIH0pO1xuICAgICAgICAkc2hvd0NvbnRlbnRCcm93c2VyID0gZmFsc2U7XG4gICAgICAgIGtleWJvYXJkTmF2SW5pdGlhbGl6ZWQgPSBmYWxzZTtcbiAgICB9XG5cbiAgICBhc3luYyBmdW5jdGlvbiBhZGRTZWxlY3RlZEl0ZW1zKCkge1xuICAgICAgICBjb25zdCBwcmV2aWV3SXRlbXMgPSBhd2FpdCBnZXRfaXRlbXNfZnJvbV91aWRzKCRwcmV2aWV3VWlkcywgJGNvbmZpZyk7XG4gICAgICAgIHNlbGVjdGVkSXRlbXMudXBkYXRlKChuKSA9PiB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGl0IG9mIHByZXZpZXdJdGVtcykge1xuICAgICAgICAgICAgICAgIGlmICgkc2VsZWN0ZWRVaWRzLmluZGV4T2YoaXQuVUlEKSAhPSAtMSkgY29udGludWU7XG4gICAgICAgICAgICAgICAgbi5wdXNoKGl0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBuO1xuICAgICAgICB9KTtcbiAgICAgICAgc2VsZWN0ZWRVaWRzLnVwZGF0ZSgoKSA9PiAkc2VsZWN0ZWRJdGVtcy5tYXAoKHgpID0+IHguVUlEKSk7XG4gICAgICAgIHVwZGF0ZVByZXZpZXcoeyBhY3Rpb246IFwiY2xlYXJcIiB9KTtcbiAgICAgICAgJHNob3dDb250ZW50QnJvd3NlciA9IGZhbHNlO1xuICAgICAgICBrZXlib2FyZE5hdkluaXRpYWxpemVkID0gZmFsc2U7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gc2VsZWN0UmVjZW50bHlVc2VkKGV2ZW50KSB7XG4gICAgICAgIGFkZEl0ZW0oZXZlbnQuZGV0YWlsLml0ZW0pO1xuICAgIH1cblxuICAgIGFzeW5jIGZ1bmN0aW9uIHNlbGVjdEZhdm9yaXRlKGV2ZW50KSB7XG4gICAgICAgIGNvbnN0IHBhdGggPSBldmVudC5kZXRhaWwuaXRlbS5wYXRoO1xuICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHJlcXVlc3Qoe1xuICAgICAgICAgICAgdm9jYWJ1bGFyeVVybDogJGNvbmZpZy52b2NhYnVsYXJ5VXJsLFxuICAgICAgICAgICAgYXR0cmlidXRlczogJGNvbmZpZy5hdHRyaWJ1dGVzLFxuICAgICAgICAgICAgbGV2ZWxJbmZvUGF0aDogcGF0aCxcbiAgICAgICAgfSk7XG4gICAgICAgIGlmICghcmVzcG9uc2UudG90YWwpIHtcbiAgICAgICAgICAgIGFsZXJ0KGAke3BhdGh9IG5vdCBmb3VuZCFgKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBpdGVtID0gcmVzcG9uc2UucmVzdWx0c1swXTtcbiAgICAgICAgaWYgKCFpdGVtLnBhdGgpIHtcbiAgICAgICAgICAgIC8vIGZpeCBmb3Igcm9vdFxuICAgICAgICAgICAgaXRlbS5wYXRoID0gJGNvbmZpZy5yb290UGF0aDtcbiAgICAgICAgfVxuICAgICAgICBjaGFuZ2VQYXRoKGl0ZW0pO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGNhbmNlbFNlbGVjdGlvbigpIHtcbiAgICAgICAgJHNob3dDb250ZW50QnJvd3NlciA9IGZhbHNlO1xuICAgICAgICBrZXlib2FyZE5hdkluaXRpYWxpemVkID0gZmFsc2U7XG4gICAgICAgIHVwZGF0ZVByZXZpZXcoeyBhY3Rpb246IFwiY2xlYXJcIiB9KTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBpc1NlbGVjdGFibGUoaXRlbSkge1xuICAgICAgICByZXR1cm4gJHNlbGVjdGVkVWlkcy5pbmRleE9mKGl0ZW0uVUlEKSA9PT0gLTE7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gc2Nyb2xsVG9SaWdodCgpIHtcbiAgICAgICAgY29uc3Qgc2Nyb2xsQ29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5sZXZlbENvbHVtbnNcIik7XG4gICAgICAgIGlmIChzY3JvbGxDb250YWluZXIpIHtcbiAgICAgICAgICAgIGFuaW1hdGVTY3JvbGwuc2Nyb2xsVG8oe1xuICAgICAgICAgICAgICAgIC8vIGVsZW1lbnQ6IFwiLmxldmVsQ29sdW1uOmxhc3QtY2hpbGRcIixcbiAgICAgICAgICAgICAgICB4OiBzY3JvbGxDb250YWluZXIuc2Nyb2xsV2lkdGggKyAxMDAsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGl0ZW1JblBhdGgoaXRlbSkge1xuICAgICAgICByZXR1cm4gJGNvbmZpZy5tb2RlID09IFwiYnJvd3NlXCIgJiYgJGN1cnJlbnRQYXRoLmluZGV4T2YoaXRlbS5wYXRoKSAhPSAtMTtcbiAgICB9XG5cbiAgICBjb25zdCBmaWx0ZXJJdGVtcyA9IHV0aWxzLmRlYm91bmNlKChlKSA9PiB7XG4gICAgICAgIGNvbnRlbnRJdGVtcy5nZXQoeyBwYXRoOiAkY3VycmVudFBhdGgsIHNlYXJjaFRlcm06IGUudGFyZ2V0LnZhbHVlIH0pO1xuICAgIH0sIDMwMCk7XG5cbiAgICBmdW5jdGlvbiBsb2FkTW9yZShub2RlKSB7XG4gICAgICAgIGNvbnN0IG9ic2VydmVyID0gbmV3IEludGVyc2VjdGlvbk9ic2VydmVyKFxuICAgICAgICAgICAgKGVudHJpZXMpID0+IHtcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGVudHJ5IG9mIGVudHJpZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGVudHJ5LmlzSW50ZXJzZWN0aW5nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBwYXRoID0gbm9kZS5kYXRhc2V0LmxldmVsUGF0aDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHBhZ2UgPSBwYXJzZUludChub2RlLmRhdGFzZXQubGV2ZWxOZXh0UGFnZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50SXRlbXMuZ2V0KHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2FkTW9yZVBhdGg6IHBhdGgsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFnZTogcGFnZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHsgdGhyZXNob2xkOiAwLCByb290OiBudWxsLCBtYXJnaW46IFwiMHB4XCIgfSxcbiAgICAgICAgKTtcbiAgICAgICAgLy8gZGVmZXIgb2JzZXJ2aW5nXG4gICAgICAgIHdpbmRvdy5zZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgIG9ic2VydmVyLm9ic2VydmUobm9kZSk7XG4gICAgICAgIH0sIDUwMCk7XG4gICAgfVxuXG4gICAgJDoge1xuICAgICAgICBpZiAoJHNob3dDb250ZW50QnJvd3Nlcikge1xuICAgICAgICAgICAgY29udGVudEl0ZW1zLmdldCh7IHBhdGg6ICRjdXJyZW50UGF0aCB9KTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgICQ6IHtcbiAgICAgICAgJGNvbnRlbnRJdGVtcztcbiAgICAgICAgc2Nyb2xsVG9SaWdodCgpO1xuICAgIH1cblxuICAgICQ6IHtcbiAgICAgICAgJHByZXZpZXdVaWRzO1xuICAgIH1cbjwvc2NyaXB0PlxuXG57I2lmICRzaG93Q29udGVudEJyb3dzZXJ9XG4gICAgPGRpdiBjbGFzcz1cImNvbnRlbnQtYnJvd3Nlci1wb3NpdGlvbi13cmFwcGVyXCI+XG4gICAgICAgIDxuYXZcbiAgICAgICAgICAgIGNsYXNzPVwiY29udGVudC1icm93c2VyXCJcbiAgICAgICAgICAgIHRyYW5zaXRpb246Zmx5PXt7IHg6ICh2dyAvIDEwMCkgKiA5NCwgb3BhY2l0eTogMSB9fVxuICAgICAgICAgICAgb246aW50cm9lbmQ9eygpID0+IHtcbiAgICAgICAgICAgICAgICBzY3JvbGxUb1JpZ2h0KCk7XG4gICAgICAgICAgICAgICAgaW5pdEtleWJvYXJkTmF2KCk7XG4gICAgICAgICAgICB9fVxuICAgICAgICAgICAgdXNlOmNsaWNrT3V0c2lkZVxuICAgICAgICAgICAgb246Y2xpY2tfb3V0c2lkZT17Y2FuY2VsU2VsZWN0aW9ufVxuICAgICAgICA+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwidG9vbEJhciBuYXZiYXJcIj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZmlsdGVyIG1lLTNcIj5cbiAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9XCJ0ZXh0XCIgbmFtZT1cImZpbHRlclwiIG9uOmlucHV0PXtmaWx0ZXJJdGVtc30gLz5cbiAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGZvcj1cImZpbHRlclwiXG4gICAgICAgICAgICAgICAgICAgICAgICA+PHN2ZyB1c2U6cmVzb2x2ZUljb249e3sgaWNvbk5hbWU6IFwic2VhcmNoXCIgfX0gLz48L2xhYmVsXG4gICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8UmVjZW50bHlVc2VkIG9uOnNlbGVjdEl0ZW09e3NlbGVjdFJlY2VudGx5VXNlZH0gLz5cbiAgICAgICAgICAgICAgICA8RmF2b3JpdGVzIG9uOnNlbGVjdEl0ZW09e3NlbGVjdEZhdm9yaXRlfSAvPlxuICAgICAgICAgICAgICAgIHsjaWYgJGNvbmZpZy51cGxvYWRFbmFibGVkfVxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwibXMtMlwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU9XCJidXR0b25cIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzPVwidXBsb2FkIGJ0biBidG4tb3V0bGluZS1saWdodCBidG4tc21cIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhYmluZGV4PVwiMFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb246a2V5ZG93bj17dXBsb2FkfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uOmNsaWNrPXt1cGxvYWR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPjxzdmcgdXNlOnJlc29sdmVJY29uPXt7IGljb25OYW1lOiBcInVwbG9hZFwiIH19IC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge190KFwidXBsb2FkIHRvICR7Y3VycmVudF9wYXRofVwiLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRfcGF0aDogJGN1cnJlbnRQYXRoLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pfTwvYnV0dG9uXG4gICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIHsvaWZ9XG4gICAgICAgICAgICAgICAgPGJ1dHRvblxuICAgICAgICAgICAgICAgICAgICBjbGFzcz1cImJ0biBidG4tbGluayB0ZXh0LXdoaXRlIG1zLWF1dG9cIlxuICAgICAgICAgICAgICAgICAgICB0YWJpbmRleD1cIjBcIlxuICAgICAgICAgICAgICAgICAgICBvbjpjbGlja3xwcmV2ZW50RGVmYXVsdD17KCkgPT4gY2FuY2VsU2VsZWN0aW9uKCl9XG4gICAgICAgICAgICAgICAgICAgID48c3ZnIHVzZTpyZXNvbHZlSWNvbj17eyBpY29uTmFtZTogXCJ4LWNpcmNsZVwiIH19IC8+PC9idXR0b25cbiAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIHsjYXdhaXQgJGNvbnRlbnRJdGVtc31cbiAgICAgICAgICAgICAgICA8cD57X3QoXCJsb2FkaW5nIGNvbnRlbnQgaXRlbXNcIil9PC9wPlxuICAgICAgICAgICAgezp0aGVuIGxldmVsc31cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwibGV2ZWxDb2x1bW5zXCI+XG4gICAgICAgICAgICAgICAgICAgIHsjZWFjaCBsZXZlbHMgYXMgbGV2ZWwsIGkgKGxldmVsLnBhdGgpfVxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzPVwibGV2ZWxDb2x1bW57aSAlIDIgPT0gMCA/ICcgb2RkJyA6ICcgZXZlbid9XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbjpmbHl8bG9jYWw9e3sgZHVyYXRpb246IDMwMCB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJsZXZlbFRvb2xiYXJcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeyNpZiBpID09IDAgJiYgJGNvbmZpZy5tb2RlID09IFwiYnJvd3NlXCJ9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZT1cImJ1dHRvblwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3M9XCJidG4gYnRuLWxpbmsgYnRuLXhzIHBzLTBcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhYmluZGV4PVwiMFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb246a2V5ZG93bj17KCkgPT4gY2hhbmdlUGF0aCgkY29uZmlnLnJvb3RQYXRoKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbjpjbGljaz17KCkgPT4gY2hhbmdlUGF0aCgkY29uZmlnLnJvb3RQYXRoKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+PHN2Z1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1c2U6cmVzb2x2ZUljb249e3sgaWNvbk5hbWU6IFwiaG91c2VcIiB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+PC9idXR0b25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgey9pZn1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeyNpZiBsZXZlbC5zZWxlY3RhYmxlfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzPVwiYnRuIGJ0bi1wcmltYXJ5IGJ0bi14c1wiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU9XCJ7bGV2ZWwuZGlzcGxheVBhdGh9XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaXNhYmxlZD17IWlzU2VsZWN0YWJsZShsZXZlbCl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb246Y2xpY2t8cHJldmVudERlZmF1bHQ9eygpID0+IGFkZEl0ZW0obGV2ZWwpfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtfdChcInNlbGVjdCAke2xldmVsX3BhdGh9XCIsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV2ZWxfcGF0aDogbGV2ZWwuVGl0bGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgey9pZn1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImxldmVsQWN0aW9uc1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeyNpZiAhbGV2ZWwuZ3JpZFZpZXd9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzcz1cImJ0biBidG4tbGluayBidG4teHMgZ3JpZC12aWV3XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb246Y2xpY2s9eygpID0+IChsZXZlbC5ncmlkVmlldyA9IHRydWUpfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHN2Z1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXNlOnJlc29sdmVJY29uPXt7IGljb25OYW1lOiBcImdyaWRcIiB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgezplbHNlfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3M9XCJidG4gYnRuLWxpbmsgYnRuLXhzIGdyaWQtdmlld1wiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uOmNsaWNrPXsoKSA9PiAobGV2ZWwuZ3JpZFZpZXcgPSBmYWxzZSl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3ZnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1c2U6cmVzb2x2ZUljb249e3sgaWNvbk5hbWU6IFwibGlzdFwiIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7L2lmfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwibGV2ZWxJdGVtc1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7I2VhY2ggbGV2ZWwucmVzdWx0cyB8fCBbXSBhcyBpdGVtLCBufVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPCEtLSBzdmVsdGUtaWdub3JlIG1pc3NpbmctZGVjbGFyYXRpb24gLS0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3M9XCJjb250ZW50SXRlbXtuICUgMiA9PSAwXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gJyBvZGQnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogJyBldmVuJ317aXRlbUluUGF0aChpdGVtKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/ICcgaW5QYXRoJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6ICcnfXskcHJldmlld1VpZHMuaW5kZXhPZihpdGVtLlVJRCkgIT0gLTFcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyAnIHNlbGVjdGVkSXRlbSdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiAnJ317IWlzU2VsZWN0YWJsZShpdGVtKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/ICcgdGV4dC1tdXRlZCdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiAnJ31cIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvbGU9XCJidXR0b25cIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhYmluZGV4PXtufVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEtdXVpZD17aXRlbS5VSUR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb246a2V5ZG93bnxwcmV2ZW50RGVmYXVsdD17KGUpID0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleWJvYXJkTmF2aWdhdGlvbihpdGVtLCBlKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbjpjbGljaz17KGUpID0+IGNsaWNrSXRlbShpdGVtLCBlKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7I2lmIGxldmVsLmdyaWRWaWV3fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZ3JpZC1wcmV2aWV3XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7I2lmIGl0ZW0uZ2V0SWNvbn1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW1nXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNyYz17YCR7aXRlbS5nZXRVUkx9L0BAaW1hZ2VzL2ltYWdlL3RodW1iYH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWx0PXtpdGVtLlRpdGxlfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7OmVsc2V9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHN2Z1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1c2U6cmVzb2x2ZUljb249e3tcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGljb25OYW1lOiBgY29udGVudHR5cGUvJHtpdGVtLnBvcnRhbF90eXBlLnRvTG93ZXJDYXNlKCkucmVwbGFjZSgvXFwufCAvZywgXCItXCIpfWAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsvaWZ9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7aXRlbS5UaXRsZX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgezplbHNlfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzcz1cIml0ZW0tdGl0bGVcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU9XCJ7aXRlbS5wb3J0YWxfdHlwZX06IHtpdGVtLlRpdGxlfVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzdmdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1c2U6cmVzb2x2ZUljb249e3tcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWNvbk5hbWU6IGBjb250ZW50dHlwZS8ke2l0ZW0ucG9ydGFsX3R5cGUudG9Mb3dlckNhc2UoKS5yZXBsYWNlKC9cXC58IC9nLCBcIi1cIil9YCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtpdGVtLlRpdGxlfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeyNpZiAkY29uZmlnLm1vZGUgPT0gXCJzZWFyY2hcIn1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxicj48c3BhbiBjbGFzcz1cInNtYWxsXCI+e2l0ZW0ucGF0aH08L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7L2lmfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7L2lmfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsjaWYgaXRlbS5pc19mb2xkZXJpc2ggJiYgJGNvbmZpZy5tb2RlID09IFwiYnJvd3NlXCJ9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJicm93c2VTdWJcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzdmdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1c2U6cmVzb2x2ZUljb249e3tcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWNvbk5hbWU6IFwiYXJyb3ctcmlnaHQtY2lyY2xlXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsvaWZ9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgey9lYWNofVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7I2lmIGxldmVsLm1vcmV9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3M9XCJsb2FkbW9yZVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YS1sZXZlbC1wYXRoPXtsZXZlbC5wYXRofVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEtbGV2ZWwtbmV4dC1wYWdlPXtwYXJzZUludChsZXZlbC5wYWdlKSArIDF9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXNlOmxvYWRNb3JlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInNwaW5uZXItYm9yZGVyXCIgcm9sZT1cInN0YXR1c1wiPjwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsvaWZ9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsjaWYgbGV2ZWwudG90YWwgPT0gMH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjb250ZW50SXRlbVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwPntfdChcIm5vIHJlc3VsdHMgZm91bmRcIil9PC9wPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsvaWZ9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgey9lYWNofVxuICAgICAgICAgICAgICAgICAgICB7I2lmIHByZXZpZXdJdGVtPy5VSUQgJiYgJHByZXZpZXdVaWRzLmxlbmd0aCA9PSAxfVxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInByZXZpZXdcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwibGV2ZWxUb29sYmFyXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzPVwiYnRuIGJ0bi1wcmltYXJ5IGJ0bi14c1wiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaXNhYmxlZD17IWlzU2VsZWN0YWJsZShwcmV2aWV3SXRlbSl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbjpjbGlja3xwcmV2ZW50RGVmYXVsdD17KCkgPT4gYWRkSXRlbShwcmV2aWV3SXRlbSl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+e190KFwic2VsZWN0ICR7cHJldmlld19wYXRofVwiLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJldmlld19wYXRoOiBwcmV2aWV3SXRlbS5wYXRoLnNwbGl0KFwiL1wiKS5wb3AoKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pfTwvYnV0dG9uXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiaW5mb1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7I2lmIHByZXZpZXdJdGVtLmdldEljb259XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwicHJldmlld0ltYWdlXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGltZ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzcmM9XCJ7cHJldmlld0l0ZW0uZ2V0VVJMfS9AQGltYWdlcy9pbWFnZS9wcmV2aWV3XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWx0PXtwcmV2aWV3SXRlbS5UaXRsZX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHs6ZWxzZX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJwcmV2aWV3SWNvblwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzdmdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXNlOnJlc29sdmVJY29uPXt7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpY29uTmFtZTogYGNvbnRlbnR0eXBlLyR7cHJldmlld0l0ZW0ucG9ydGFsX3R5cGUudG9Mb3dlckNhc2UoKS5yZXBsYWNlKC9cXC58IC9nLCBcIi1cIil9YCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsvaWZ9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxoND57cHJldmlld0l0ZW0uVGl0bGV9PC9oND5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHA+e3ByZXZpZXdJdGVtLkRlc2NyaXB0aW9ufTwvcD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICB7L2lmfVxuICAgICAgICAgICAgICAgICAgICB7I2lmICRwcmV2aWV3VWlkcy5sZW5ndGggPiAxfVxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInByZXZpZXdcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwibGV2ZWxUb29sYmFyXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzPVwiYnRuIGJ0bi1wcmltYXJ5IGJ0bi14c1wiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbjpjbGlja3xwcmV2ZW50RGVmYXVsdD17YWRkU2VsZWN0ZWRJdGVtc31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID57X3QoXCJhZGQgc2VsZWN0ZWQgaXRlbXNcIil9PC9idXR0b25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJpbmZvXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzdmdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVzZTpyZXNvbHZlSWNvbj17e1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGljb25OYW1lOiBcImZpbGVzXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIHsvaWZ9XG4gICAgICAgICAgICAgICAgICAgIHsjaWYgc2hvd1VwbG9hZH1cbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJ1cGxvYWQtd3JhcHBlclwiPjwvZGl2PlxuICAgICAgICAgICAgICAgICAgICB7L2lmfVxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgezpjYXRjaCBlcnJvcn1cbiAgICAgICAgICAgICAgICA8cCBzdHlsZT1cImNvbG9yOiByZWRcIj57ZXJyb3IubWVzc2FnZX08L3A+XG4gICAgICAgICAgICB7L2F3YWl0fVxuICAgICAgICA8L25hdj5cbiAgICA8L2Rpdj5cbnsvaWZ9XG5cbjxzdHlsZT5cbiAgICAuY29udGVudC1icm93c2VyLXBvc2l0aW9uLXdyYXBwZXIge1xuICAgICAgICBwb3NpdGlvbjogZml4ZWQ7XG4gICAgICAgIHRvcDogMDtcbiAgICAgICAgcmlnaHQ6IDA7XG4gICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgIGp1c3RpZnktY29udGVudDogZW5kO1xuICAgICAgICB6LWluZGV4OiAxNTAwO1xuICAgICAgICB3aWR0aDogMTAwJTtcbiAgICAgICAgaGVpZ2h0OiAxMDB2aDtcbiAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogcmdiYSgwLCAwLCAwLCAwLjI1KTtcbiAgICB9XG4gICAgLmJ0bi14cyB7XG4gICAgICAgIC0tYnMtYnRuLXBhZGRpbmcteTogMC4xNXJlbTtcbiAgICAgICAgLS1icy1idG4tcGFkZGluZy14OiAwLjVyZW07XG4gICAgICAgIC0tYnMtYnRuLWZvbnQtc2l6ZTogMC43NXJlbTtcbiAgICB9XG4gICAgLmNvbnRlbnQtYnJvd3NlciB7XG4gICAgICAgIGhlaWdodDogMTAwdmg7XG4gICAgICAgIG1pbi13aWR0aDogNTUwcHg7XG4gICAgICAgIGJhY2tncm91bmQtY29sb3I6IHZhcigtLWJzLWxpZ2h0LWJnLXN1YnRsZSk7XG4gICAgICAgIGJvcmRlci1sZWZ0OiB2YXIoLS1icy1ib3JkZXItc3R5bGUpIHZhcigtLWJzLWJvcmRlci13aWR0aCkgI2ZmZjtcbiAgICAgICAgei1pbmRleDogMTUwMDtcbiAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgICB9XG4gICAgLnRvb2xCYXIge1xuICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1icy1wcmltYXJ5KTtcbiAgICAgICAgcGFkZGluZzogMC4zMjVyZW0gMC43NXJlbTtcbiAgICAgICAgY29sb3I6IHZhcigtLWJzLWxpZ2h0KTtcbiAgICAgICAgd2lkdGg6IDEwMCU7XG4gICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgIGp1c3RpZnktY29udGVudDogc3RhcnQ7XG4gICAgfVxuICAgIC50b29sQmFyIDpnbG9iYWwoc3ZnKSB7XG4gICAgICAgIHZlcnRpY2FsLWFsaWduOiAtMC4xMjVlbTtcbiAgICB9XG4gICAgLmxldmVsQ29sdW1ucyB7XG4gICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgIGZsZXgtd3JhcDogbm93cmFwO1xuICAgICAgICB3aWR0aDogMTAwJTtcbiAgICAgICAgb3ZlcmZsb3c6IGhpZGRlbjtcbiAgICAgICAgZmxleC1ncm93OiAzO1xuICAgICAgICBib3JkZXItbGVmdDogdmFyKC0tYnMtYm9yZGVyLXN0eWxlKSB2YXIoLS1icy1ib3JkZXItY29sb3IpIHZhcigtLWJzLWJvcmRlci13aWR0aCk7XG4gICAgICAgIHVzZXItc2VsZWN0OiBub25lO1xuICAgIH1cblxuICAgIC5sZXZlbENvbHVtbiB7XG4gICAgICAgIHdpZHRoOiAzMjBweDtcbiAgICAgICAgYm9yZGVyLXJpZ2h0OiB2YXIoLS1icy1ib3JkZXItc3R5bGUpIHZhcigtLWJzLWJvcmRlci13aWR0aClcbiAgICAgICAgICAgIHZhcigtLWJzLWJvcmRlci1jb2xvcik7XG4gICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gICAgfVxuXG4gICAgLmxldmVsVG9vbGJhciB7XG4gICAgICAgIHdpZHRoOiAxMDAlO1xuICAgICAgICBoZWlnaHQ6IDIuNXJlbTtcbiAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuO1xuICAgICAgICBwYWRkaW5nOiAwLjM3NXJlbTtcbiAgICAgICAgYm9yZGVyLWJvdHRvbTogdmFyKC0tYnMtYm9yZGVyLXN0eWxlKSB2YXIoLS1icy1ib3JkZXItd2lkdGgpXG4gICAgICAgICAgICB2YXIoLS1icy1ib3JkZXItY29sb3IpO1xuICAgIH1cbiAgICAubGV2ZWxUb29sYmFyID4gLmxldmVsQWN0aW9ucyB7XG4gICAgICAgIG1hcmdpbi1sZWZ0OiBhdXRvO1xuICAgIH1cbiAgICAubGV2ZWxUb29sYmFyID4gYnV0dG9ue1xuICAgICAgICB3aGl0ZS1zcGFjZTogbm93cmFwO1xuICAgICAgICBvdmVyZmxvdzogaGlkZGVuO1xuICAgICAgICB0ZXh0LW92ZXJmbG93OiBlbGxpcHNpcztcbiAgICB9XG5cbiAgICAubGV2ZWxJdGVtcyB7XG4gICAgICAgIG92ZXJmbG93LXg6IGF1dG87XG4gICAgfVxuICAgIC5jb250ZW50SXRlbSB7XG4gICAgICAgIC8qIHBhZGRpbmc6IDFyZW0gMXJlbTsgKi9cbiAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICAgICAganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuO1xuICAgICAgICBmb250LXNpemU6IDkwJTtcbiAgICAgICAgbWluLWhlaWdodDogMnJlbTtcbiAgICB9XG4gICAgLmNvbnRlbnRJdGVtOmZvY3VzLXZpc2libGUge1xuICAgICAgICBvdXRsaW5lOiBub25lO1xuICAgIH1cbiAgICAuY29udGVudEl0ZW0uZXZlbiB7XG4gICAgICAgIGJhY2tncm91bmQtY29sb3I6IHJnYmEodmFyKC0tYnMtc2Vjb25kYXJ5LWJnLXJnYiksIC40KTtcbiAgICB9XG4gICAgLmNvbnRlbnRJdGVtLmluUGF0aCxcbiAgICAuY29udGVudEl0ZW06Zm9jdXMge1xuICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2JhKHZhcigtLWJzLXByaW1hcnktcmdiKSwgMC4xNSk7XG4gICAgfVxuICAgIC5jb250ZW50SXRlbS5zZWxlY3RlZEl0ZW0ge1xuICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1icy1wcmltYXJ5KTtcbiAgICAgICAgY29sb3I6IHZhcigtLWJzLWJvZHktYmcpO1xuICAgIH1cbiAgICAuY29udGVudEl0ZW0gPiAqIHtcbiAgICAgICAgcGFkZGluZzogMC41cmVtO1xuICAgICAgICB3aGl0ZS1zcGFjZTogbm93cmFwO1xuICAgICAgICBtYXgtd2lkdGg6IDQ1MHB4O1xuICAgICAgICB0ZXh0LW92ZXJmbG93OiBlbGxpcHNpcztcbiAgICAgICAgb3ZlcmZsb3c6IGhpZGRlbjtcbiAgICB9XG4gICAgLmNvbnRlbnRJdGVtID4gLmJyb3dzZVN1YiB7XG4gICAgICAgIGZsZXgtc2hyaW5rOiAwO1xuICAgIH1cblxuICAgIC5jb250ZW50SXRlbSAuZ3JpZC1wcmV2aWV3ID4gaW1nIHtcbiAgICAgICAgd2lkdGg6IDk1cHg7XG4gICAgICAgIGhlaWdodDogOTVweDtcbiAgICAgICAgb2JqZWN0LWZpdDogY292ZXI7XG4gICAgICAgIGZsb2F0OiBsZWZ0O1xuICAgICAgICBtYXJnaW4tcmlnaHQ6IDFyZW07XG4gICAgfVxuICAgIC5wcmV2aWV3IHtcbiAgICAgICAgd2lkdGg6IDMyMHB4O1xuICAgICAgICBtaW4taGVpZ2h0OiAzMDBweDtcbiAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICB9XG4gICAgLnByZXZpZXcgLmluZm8ge1xuICAgICAgICBwYWRkaW5nOiAwLjVyZW07XG4gICAgICAgIHdpZHRoOiAxMDAlO1xuICAgICAgICB3b3JkLXdyYXA6IGFueXdoZXJlO1xuICAgIH1cbiAgICAucHJldmlldyAuaW5mbyAucHJldmlld0ljb24ge1xuICAgICAgICBtYXJnaW46IDAgYXV0byAxcmVtIGF1dG87XG4gICAgfVxuICAgIC5wcmV2aWV3IC5pbmZvIC5wcmV2aWV3SWNvbiBzdmcge1xuICAgICAgICB3aWR0aDogNTBweCAhaW1wb3J0YW50O1xuICAgICAgICBoZWlnaHQ6IDUwcHggIWltcG9ydGFudDtcbiAgICB9XG4gICAgLnByZXZpZXcgaDQge1xuICAgICAgICBmb250LXNpemU6IDEuMiByZW07XG4gICAgfVxuICAgIC5wcmV2aWV3IGltZyB7XG4gICAgICAgIG1heC13aWR0aDogMTAwJTtcbiAgICAgICAgbWF4LXdpZHRoOiAxMDAlO1xuICAgICAgICBtYXJnaW4tYm90dG9tOiAwLjVyZW07XG4gICAgfVxuXG4gICAgLnVwbG9hZC13cmFwcGVyIHtcbiAgICAgICAgcGFkZGluZzogMXJlbTtcbiAgICAgICAgd2lkdGg6IDU5MHB4O1xuICAgICAgICBvdmVyZmxvdy14OiBhdXRvO1xuICAgIH1cbiAgICAubG9hZG1vcmUge1xuICAgICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XG4gICAgICAgIHBhZGRpbmc6IDAuMjVyZW0gMDtcbiAgICB9XG48L3N0eWxlPlxuIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQTRsQkksMkVBQWtDLENBQzlCLFFBQVEsQ0FBRSxLQUFLLENBQ2YsR0FBRyxDQUFFLENBQUMsQ0FDTixLQUFLLENBQUUsQ0FBQyxDQUNSLE9BQU8sQ0FBRSxJQUFJLENBQ2IsZUFBZSxDQUFFLEdBQUcsQ0FDcEIsT0FBTyxDQUFFLElBQUksQ0FDYixLQUFLLENBQUUsSUFBSSxDQUNYLE1BQU0sQ0FBRSxLQUFLLENBQ2IsZ0JBQWdCLENBQUUsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQ3hDLENBQ0EsaURBQVEsQ0FDSixrQkFBa0IsQ0FBRSxPQUFPLENBQzNCLGtCQUFrQixDQUFFLE1BQU0sQ0FDMUIsa0JBQWtCLENBQUUsT0FDeEIsQ0FDQSwwREFBaUIsQ0FDYixNQUFNLENBQUUsS0FBSyxDQUNiLFNBQVMsQ0FBRSxLQUFLLENBQ2hCLGdCQUFnQixDQUFFLElBQUksb0JBQW9CLENBQUMsQ0FDM0MsV0FBVyxDQUFFLElBQUksaUJBQWlCLENBQUMsQ0FBQyxJQUFJLGlCQUFpQixDQUFDLENBQUMsSUFBSSxDQUMvRCxPQUFPLENBQUUsSUFBSSxDQUNiLE9BQU8sQ0FBRSxJQUFJLENBQ2IsY0FBYyxDQUFFLE1BQ3BCLENBQ0Esa0RBQVMsQ0FDTCxnQkFBZ0IsQ0FBRSxJQUFJLFlBQVksQ0FBQyxDQUNuQyxPQUFPLENBQUUsUUFBUSxDQUFDLE9BQU8sQ0FDekIsS0FBSyxDQUFFLElBQUksVUFBVSxDQUFDLENBQ3RCLEtBQUssQ0FBRSxJQUFJLENBQ1gsT0FBTyxDQUFFLElBQUksQ0FDYixlQUFlLENBQUUsS0FDckIsQ0FDQSxzQkFBUSxDQUFTLEdBQUssQ0FDbEIsY0FBYyxDQUFFLFFBQ3BCLENBQ0EsdURBQWMsQ0FDVixPQUFPLENBQUUsSUFBSSxDQUNiLFNBQVMsQ0FBRSxNQUFNLENBQ2pCLEtBQUssQ0FBRSxJQUFJLENBQ1gsUUFBUSxDQUFFLE1BQU0sQ0FDaEIsU0FBUyxDQUFFLENBQUMsQ0FDWixXQUFXLENBQUUsSUFBSSxpQkFBaUIsQ0FBQyxDQUFDLElBQUksaUJBQWlCLENBQUMsQ0FBQyxJQUFJLGlCQUFpQixDQUFDLENBQ2pGLFdBQVcsQ0FBRSxJQUNqQixDQUVBLHNEQUFhLENBQ1QsS0FBSyxDQUFFLEtBQUssQ0FDWixZQUFZLENBQUUsSUFBSSxpQkFBaUIsQ0FBQyxDQUFDLElBQUksaUJBQWlCLENBQUM7QUFDbkUsWUFBWSxJQUFJLGlCQUFpQixDQUFDLENBQzFCLE9BQU8sQ0FBRSxJQUFJLENBQ2IsY0FBYyxDQUFFLE1BQ3BCLENBRUEsdURBQWMsQ0FDVixLQUFLLENBQUUsSUFBSSxDQUNYLE1BQU0sQ0FBRSxNQUFNLENBQ2QsT0FBTyxDQUFFLElBQUksQ0FDYixlQUFlLENBQUUsYUFBYSxDQUM5QixPQUFPLENBQUUsUUFBUSxDQUNqQixhQUFhLENBQUUsSUFBSSxpQkFBaUIsQ0FBQyxDQUFDLElBQUksaUJBQWlCLENBQUM7QUFDcEUsWUFBWSxJQUFJLGlCQUFpQixDQUM3QixDQUNBLDJCQUFhLENBQUcseUNBQWMsQ0FDMUIsV0FBVyxDQUFFLElBQ2pCLENBQ0EsMkJBQWEsQ0FBRyxrQ0FBTSxDQUNsQixXQUFXLENBQUUsTUFBTSxDQUNuQixRQUFRLENBQUUsTUFBTSxDQUNoQixhQUFhLENBQUUsUUFDbkIsQ0FFQSxxREFBWSxDQUNSLFVBQVUsQ0FBRSxJQUNoQixDQUNBLHNEQUFhLENBRVQsT0FBTyxDQUFFLElBQUksQ0FDYixXQUFXLENBQUUsTUFBTSxDQUNuQixlQUFlLENBQUUsYUFBYSxDQUM5QixTQUFTLENBQUUsR0FBRyxDQUNkLFVBQVUsQ0FBRSxJQUNoQixDQUNBLHNEQUFZLGNBQWUsQ0FDdkIsT0FBTyxDQUFFLElBQ2IsQ0FDQSxZQUFZLCtDQUFNLENBQ2QsZ0JBQWdCLENBQUUsS0FBSyxJQUFJLHFCQUFxQixDQUFDLENBQUMsQ0FBQyxFQUFFLENBQ3pELENBQ0EsWUFBWSxpREFBTyxDQUNuQixzREFBWSxNQUFPLENBQ2YsZ0JBQWdCLENBQUUsS0FBSyxJQUFJLGdCQUFnQixDQUFDLENBQUMsQ0FBQyxJQUFJLENBQ3RELENBQ0EsWUFBWSx1REFBYyxDQUN0QixnQkFBZ0IsQ0FBRSxJQUFJLFlBQVksQ0FBQyxDQUNuQyxLQUFLLENBQUUsSUFBSSxZQUFZLENBQzNCLENBQ0EsMEJBQVksQ0FBRyw0QkFBRSxDQUNiLE9BQU8sQ0FBRSxNQUFNLENBQ2YsV0FBVyxDQUFFLE1BQU0sQ0FDbkIsU0FBUyxDQUFFLEtBQUssQ0FDaEIsYUFBYSxDQUFFLFFBQVEsQ0FDdkIsUUFBUSxDQUFFLE1BQ2QsQ0FDQSwwQkFBWSxDQUFHLHNDQUFXLENBQ3RCLFdBQVcsQ0FBRSxDQUNqQixDQUVBLDBCQUFZLENBQUMsMkJBQWEsQ0FBRyxpQkFBSSxDQUM3QixLQUFLLENBQUUsSUFBSSxDQUNYLE1BQU0sQ0FBRSxJQUFJLENBQ1osVUFBVSxDQUFFLEtBQUssQ0FDakIsS0FBSyxDQUFFLElBQUksQ0FDWCxZQUFZLENBQUUsSUFDbEIsQ0FDQSxrREFBUyxDQUNMLEtBQUssQ0FBRSxLQUFLLENBQ1osVUFBVSxDQUFFLEtBQUssQ0FDakIsT0FBTyxDQUFFLElBQUksQ0FDYixjQUFjLENBQUUsTUFBTSxDQUN0QixXQUFXLENBQUUsTUFDakIsQ0FDQSxzQkFBUSxDQUFDLGlDQUFNLENBQ1gsT0FBTyxDQUFFLE1BQU0sQ0FDZixLQUFLLENBQUUsSUFBSSxDQUNYLFNBQVMsQ0FBRSxRQUNmLENBQ0Esc0JBQVEsQ0FBQyxLQUFLLENBQUMsd0NBQWEsQ0FDeEIsTUFBTSxDQUFFLENBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLElBQ3hCLENBQ0Esc0JBQVEsQ0FBQyxLQUFLLENBQUMsWUFBWSxDQUFDLCtCQUFJLENBQzVCLEtBQUssQ0FBRSxJQUFJLENBQUMsVUFBVSxDQUN0QixNQUFNLENBQUUsSUFBSSxDQUFDLFVBQ2pCLENBQ0Esc0JBQVEsQ0FBQyw4QkFBRyxDQUNSLFNBQVMsQ0FBRSxHQUFHLENBQUMsR0FDbkIsQ0FDQSxzQkFBUSxDQUFDLCtCQUFJLENBQ1QsU0FBUyxDQUFFLElBQUksQ0FDZixTQUFTLENBQUUsSUFBSSxDQUNmLGFBQWEsQ0FBRSxNQUNuQixDQUVBLHlEQUFnQixDQUNaLE9BQU8sQ0FBRSxJQUFJLENBQ2IsS0FBSyxDQUFFLEtBQUssQ0FDWixVQUFVLENBQUUsSUFDaEIsQ0FDQSxtREFBVSxDQUNOLFVBQVUsQ0FBRSxNQUFNLENBQ2xCLE9BQU8sQ0FBRSxPQUFPLENBQUMsQ0FDckIifQ==*/"],sourceRoot:""}]),I.A=t},19394:function(g,I,A){var C=A(71354),e=A.n(C),l=A(76314),t=A.n(l)()(e());t.push([g.id,".content-browser-selected-items-wrapper.svelte-awokap{display:flex;align-items:start}.content-browser-selected-items.svelte-awokap{list-style:none;background-color:var(--bs-body-bg);border-radius:var(--bs-border-radius) 0 0 var(--bs-border-radius);border:var(--bs-border-style) var(--bs-border-color) var(--bs-border-width);min-height:2.4rem;padding:.5rem .5rem 0 .5rem;flex:1 1 auto}","",{version:3,sources:["webpack://./src/pat/contentbrowser/src/SelectedItems.svelte"],names:[],mappings:"AAAA,sDAAA,YAAA,CAAA,iBAAA,CAAA,8CAAA,eAAA,CAAA,kCAAA,CAAA,iEAAA,CAAA,2EAAA,CAAA,iBAAA,CAAA,2BAAA,CAAA,aAAA",sourcesContent:[".content-browser-selected-items-wrapper.svelte-awokap{display:flex;align-items:start}.content-browser-selected-items.svelte-awokap{list-style:none;background-color:var(--bs-body-bg);border-radius:var(--bs-border-radius) 0 0 var(--bs-border-radius);border:var(--bs-border-style) var(--bs-border-color) var(--bs-border-width);min-height:2.4rem;padding:0.5rem 0.5rem 0 0.5rem;flex:1 1 auto}\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiU2VsZWN0ZWRJdGVtcy5zdmVsdGUiLCJzb3VyY2VzIjpbIlNlbGVjdGVkSXRlbXMuc3ZlbHRlIl0sInNvdXJjZXNDb250ZW50IjpbIjxzY3JpcHQ+XG4gICAgaW1wb3J0IHsgZ2V0Q29udGV4dCwgb25Nb3VudCwgc2V0Q29udGV4dCB9IGZyb20gXCJzdmVsdGVcIjtcbiAgICBpbXBvcnQgeyBnZXRfaXRlbXNfZnJvbV91aWRzIH0gZnJvbSBcIi4vdXRpbHMuanNcIjtcbiAgICBpbXBvcnQgU29ydGFibGUgZnJvbSBcInNvcnRhYmxlanNcIjtcbiAgICBpbXBvcnQgX3QgZnJvbSBcIi4uLy4uLy4uL2NvcmUvaTE4bi13cmFwcGVyXCI7XG4gICAgaW1wb3J0IGV2ZW50cyBmcm9tIFwiQHBhdHRlcm5zbGliL3BhdHRlcm5zbGliL3NyYy9jb3JlL2V2ZW50c1wiO1xuICAgIGltcG9ydCBwbG9uZV9yZWdpc3RyeSBmcm9tIFwiQHBsb25lL3JlZ2lzdHJ5XCI7XG5cbiAgICBsZXQgcmVmO1xuICAgIGxldCBpbml0aWFsaXppbmcgPSB0cnVlO1xuXG4gICAgLy8gZ2V0IHJlYWN0aXZlIGNvbnRleHQgY29uZmlnXG4gICAgY29uc3QgY29uZmlnID0gZ2V0Q29udGV4dChcImNvbmZpZ1wiKTtcbiAgICBjb25zdCBmaWVsZElkID0gJGNvbmZpZy5maWVsZElkO1xuICAgIGNvbnN0IHNlbGVjdGVkSXRlbXNOb2RlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoZmllbGRJZCk7XG5cbiAgICAvLyBnZXQgcmVhY3RpdmUgY29udGV4dCBzdG9yZVxuICAgIGNvbnN0IHNlbGVjdGVkSXRlbXMgPSBnZXRDb250ZXh0KFwic2VsZWN0ZWRJdGVtc1wiKTtcbiAgICBjb25zdCBzZWxlY3RlZFVpZHMgPSBnZXRDb250ZXh0KFwic2VsZWN0ZWRVaWRzXCIpO1xuXG4gICAgLy8gc2hvd0NvbnRlbnRCcm93c2VyIHJlYWN0aXZlIHN0YXRlXG4gICAgY29uc3Qgc2hvd0NvbnRlbnRCcm93c2VyID0gZ2V0Q29udGV4dChcInNob3dDb250ZW50QnJvd3NlclwiKTtcblxuICAgIC8vIGdldCBzZWxlY3RlZEl0ZW0gY29tcG9uZW50IGZyb20gcmVnaXN0cnkuXG4gICAgLy8gdGhlIHJlZ2lzdHJ5IGtleSBjYW4gYmUgY3VzdG9taXplZCB3aXRoIHBhdHRlcm5fb3B0aW9uc1xuICAgIC8vIGlmIGFuIGFkZG9uIHJlZ2lzdGVycyBhIGN1c3RvbSBjb21wb25lbnQgdG8gYSBjdXN0b20ga2V5XG4gICAgY29uc3QgUmVnaXN0ZXJlZFNlbGVjdGVkSXRlbSA9IHBsb25lX3JlZ2lzdHJ5LmdldENvbXBvbmVudChcbiAgICAgICAgJGNvbmZpZy5jb21wb25lbnRSZWdpc3RyeUtleXM/LnNlbGVjdGVkSXRlbSB8fMKgXCJwYXQtY29udGVudGJyb3dzZXIuU2VsZWN0ZWRJdGVtXCJcbiAgICApO1xuXG4gICAgb25Nb3VudChhc3luYyAoKSA9PiB7XG4gICAgICAgIGF3YWl0IGluaXRpYWxpemVTZWxlY3RlZEl0ZW1zU3RvcmUoKTtcbiAgICAgICAgaW5pdGlhbGl6ZVNvcnRpbmcoKTtcbiAgICAgICAgaW5pdGlhbGl6aW5nID0gZmFsc2U7XG4gICAgfSk7XG5cbiAgICBmdW5jdGlvbiB1bnNlbGVjdEl0ZW0oaSkge1xuICAgICAgICBzZWxlY3RlZEl0ZW1zLnVwZGF0ZSgobikgPT4ge1xuICAgICAgICAgICAgbi5zcGxpY2UoaSwgMSk7XG4gICAgICAgICAgICByZXR1cm4gbjtcbiAgICAgICAgfSk7XG4gICAgICAgIHNlbGVjdGVkVWlkcy51cGRhdGUoKCkgPT4gJHNlbGVjdGVkSXRlbXMubWFwKCh4KSA9PiB4LlVJRCkpO1xuICAgIH1cblxuICAgIC8vIHVzZSB0aGlzIGZ1bmN0aW9uIGluIFwiU2VsZWN0ZWRJdGVtXCIgY29tcG9uZW50IHdpdGhcbiAgICAvLyBjb25zdCB1bnNlbGVjdEl0ZW0gPSBnZXRDb250ZXh0KFwidW5zZWxlY3RJdGVtXCIpXG4gICAgc2V0Q29udGV4dChcInVuc2VsZWN0SXRlbVwiLCB1bnNlbGVjdEl0ZW0pO1xuXG4gICAgYXN5bmMgZnVuY3Rpb24gaW5pdGlhbGl6ZVNlbGVjdGVkSXRlbXNTdG9yZSgpIHtcbiAgICAgICAgY29uc3QgaW5pdGlhbFZhbHVlID0gJGNvbmZpZy5zZWxlY3Rpb24ubGVuZ3RoXG4gICAgICAgICAgICA/ICRjb25maWcuc2VsZWN0aW9uXG4gICAgICAgICAgICA6IHNlbGVjdGVkSXRlbXNOb2RlPy52YWx1ZVxuICAgICAgICAgICAgICA/IHNlbGVjdGVkSXRlbXNOb2RlLnZhbHVlLnNwbGl0KCRjb25maWcuc2VwYXJhdG9yKVxuICAgICAgICAgICAgICA6IFtdO1xuXG4gICAgICAgIGlmICghaW5pdGlhbFZhbHVlLmxlbmd0aCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgJHNlbGVjdGVkSXRlbXMgPSBhd2FpdCBnZXRfaXRlbXNfZnJvbV91aWRzKGluaXRpYWxWYWx1ZSwgJGNvbmZpZyk7XG4gICAgICAgIHNlbGVjdGVkVWlkcy51cGRhdGUoKCkgPT4gJHNlbGVjdGVkSXRlbXMubWFwKCh4KSA9PiB4LlVJRCkpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGluaXRpYWxpemVTb3J0aW5nKCkge1xuICAgICAgICBpZiAoJGNvbmZpZy5tYXhpbXVtU2VsZWN0aW9uU2l6ZSAhPT0gMSAmJiAkc2VsZWN0ZWRJdGVtcy5sZW5ndGggPiAxKSB7XG4gICAgICAgICAgICBTb3J0YWJsZS5jcmVhdGUoXG4gICAgICAgICAgICAgICAgc2VsZWN0ZWRJdGVtc05vZGUucHJldmlvdXNTaWJsaW5nLnF1ZXJ5U2VsZWN0b3IoXG4gICAgICAgICAgICAgICAgICAgIFwiLmNvbnRlbnQtYnJvd3Nlci1zZWxlY3RlZC1pdGVtc1wiLFxuICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBkcmFnZ2FibGU6IFwiLnNlbGVjdGVkLWl0ZW1cIixcbiAgICAgICAgICAgICAgICAgICAgYW5pbWF0aW9uOiAyMDAsXG4gICAgICAgICAgICAgICAgICAgIG9uVXBkYXRlOiAoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHNvcnRlZFV1aWRzID0gW107XG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGVsIG9mIGUudGFyZ2V0LmNoaWxkcmVuKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc29ydGVkVXVpZHMucHVzaChlbC5kYXRhc2V0W1widXVpZFwiXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBzZXROb2RlVmFsdWUoc29ydGVkVXVpZHMpO1xuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gc2VsZWN0ZWRVaWRzRnJvbVNlbGVjdGVkSXRlbXMoKSB7XG4gICAgICAgIGxldCBpdGVtcyA9IFtdO1xuICAgICAgICAkc2VsZWN0ZWRJdGVtcy5mb3JFYWNoKChpdGVtKSA9PiB7XG4gICAgICAgICAgICBpdGVtcy5wdXNoKGl0ZW0uVUlEKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBpdGVtcztcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBzZXROb2RlVmFsdWUoc2VsZWN0ZWRVaWRzKSB7XG4gICAgICAgIGNvbnN0IG5vZGVfdmFsID0gc2VsZWN0ZWRVaWRzLmpvaW4oJGNvbmZpZy5zZXBhcmF0b3IpO1xuICAgICAgICBzZWxlY3RlZEl0ZW1zTm9kZS52YWx1ZSA9IG5vZGVfdmFsO1xuICAgICAgICBzZWxlY3RlZEl0ZW1zTm9kZS5kaXNwYXRjaEV2ZW50KGV2ZW50cy5jaGFuZ2VfZXZlbnQoKSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gTG9hZFNlbGVjdGVkSXRlbUNvbXBvbmVudChub2RlLCBwcm9wcykge1xuICAgICAgICBjb25zdCBjb21wb25lbnQgPSBuZXcgUmVnaXN0ZXJlZFNlbGVjdGVkSXRlbS5jb21wb25lbnQoe3RhcmdldDogbm9kZSwgcHJvcHM6IHByb3BzfSk7XG4gICAgfVxuXG4gICAgJDoge1xuICAgICAgICAkc2VsZWN0ZWRJdGVtcztcbiAgICAgICAgaWYgKCRzZWxlY3RlZEl0ZW1zLmxlbmd0aCB8fCAhaW5pdGlhbGl6aW5nKSB7XG4gICAgICAgICAgICBzZXROb2RlVmFsdWUoc2VsZWN0ZWRVaWRzRnJvbVNlbGVjdGVkSXRlbXMoKSk7XG4gICAgICAgICAgICBpbml0aWFsaXplU29ydGluZygpO1xuICAgICAgICB9XG4gICAgfVxuPC9zY3JpcHQ+XG5cbjxkaXZcbiAgICBjbGFzcz1cImNvbnRlbnQtYnJvd3Nlci1zZWxlY3RlZC1pdGVtcy13cmFwcGVyXCJcbiAgICBzdHlsZT1cIndpZHRoOiB7JGNvbmZpZy53aWR0aCB8fCAnYXV0byd9XCJcbiAgICBiaW5kOnRoaXM9e3JlZn1cbj5cbiAgICA8IS0tIHN2ZWx0ZS1pZ25vcmUgYTExeS1jbGljay1ldmVudHMtaGF2ZS1rZXktZXZlbnRzIC0tPlxuICAgIDwhLS0gc3ZlbHRlLWlnbm9yZSBhMTF5LW5vLXN0YXRpYy1lbGVtZW50LWludGVyYWN0aW9ucyAtLT5cbiAgICA8ZGl2IGNsYXNzPVwiY29udGVudC1icm93c2VyLXNlbGVjdGVkLWl0ZW1zXCJcbiAgICAgICAgIG9uOmNsaWNrPXsoKSA9PiAkc2hvd0NvbnRlbnRCcm93c2VyID0gJHNlbGVjdGVkSXRlbXMubGVuZ3RoID8gZmFsc2UgOiB0cnVlIH0+XG4gICAgICAgIHsjaWYgJHNlbGVjdGVkSXRlbXN9XG4gICAgICAgICAgICB7I2VhY2ggJHNlbGVjdGVkSXRlbXMgYXMgc2VsSXRlbSwgaSAoc2VsSXRlbS5VSUQpfVxuICAgICAgICAgICAgICAgIDxkaXYgdXNlOkxvYWRTZWxlY3RlZEl0ZW1Db21wb25lbnQ9e3tpZHg6aSwgaXRlbTpzZWxJdGVtfX0gLz5cbiAgICAgICAgICAgIHsvZWFjaH1cbiAgICAgICAgey9pZn1cbiAgICAgICAgeyNpZiAhJHNlbGVjdGVkSXRlbXN9XG4gICAgICAgICAgICA8cD57X3QoXCJsb2FkaW5nIHNlbGVjdGVkIGl0ZW1zXCIpfTwvcD5cbiAgICAgICAgey9pZn1cbiAgICA8L2Rpdj5cbiAgICA8IS0tIHN2ZWx0ZS1pZ25vcmUgYTExeS1pbnZhbGlkLWF0dHJpYnV0ZSAtLT5cbiAgICA8YVxuICAgICAgICBjbGFzcz1cImJ0biBidG4tcHJpbWFyeVwiIGhyZWY9XCIjXCJcbiAgICAgICAgc3R5bGU9XCJib3JkZXItcmFkaXVzOjAgdmFyKC0tYnMtYm9yZGVyLXJhZGl1cykgdmFyKC0tYnMtYm9yZGVyLXJhZGl1cykgMFwiXG4gICAgICAgIG9uOmNsaWNrfHByZXZlbnREZWZhdWx0PXsoKSA9PiAoJHNob3dDb250ZW50QnJvd3NlciA9IHRydWUpfVxuICAgICAgICA+e190KFwiU2VsZWN0XCIpfTwvYVxuICAgID5cbjwvZGl2PlxuXG48c3R5bGU+XG4gICAgLmNvbnRlbnQtYnJvd3Nlci1zZWxlY3RlZC1pdGVtcy13cmFwcGVyIHtcbiAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgYWxpZ24taXRlbXM6IHN0YXJ0O1xuICAgIH1cbiAgICAuY29udGVudC1icm93c2VyLXNlbGVjdGVkLWl0ZW1zIHtcbiAgICAgICAgbGlzdC1zdHlsZTogbm9uZTtcbiAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tYnMtYm9keS1iZyk7XG4gICAgICAgIGJvcmRlci1yYWRpdXM6IHZhcigtLWJzLWJvcmRlci1yYWRpdXMpIDAgMCB2YXIoLS1icy1ib3JkZXItcmFkaXVzKTtcbiAgICAgICAgYm9yZGVyOiB2YXIoLS1icy1ib3JkZXItc3R5bGUpIHZhcigtLWJzLWJvcmRlci1jb2xvcikgdmFyKC0tYnMtYm9yZGVyLXdpZHRoKTtcbiAgICAgICAgbWluLWhlaWdodDogMi40cmVtO1xuICAgICAgICBwYWRkaW5nOiAwLjVyZW0gMC41cmVtIDAgMC41cmVtO1xuICAgICAgICBmbGV4OiAxIDEgYXV0bztcbiAgICB9XG48L3N0eWxlPlxuIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQTJJSSxxREFBd0MsQ0FDcEMsT0FBTyxDQUFFLElBQUksQ0FDYixXQUFXLENBQUUsS0FDakIsQ0FDQSw2Q0FBZ0MsQ0FDNUIsVUFBVSxDQUFFLElBQUksQ0FDaEIsZ0JBQWdCLENBQUUsSUFBSSxZQUFZLENBQUMsQ0FDbkMsYUFBYSxDQUFFLElBQUksa0JBQWtCLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksa0JBQWtCLENBQUMsQ0FDbEUsTUFBTSxDQUFFLElBQUksaUJBQWlCLENBQUMsQ0FBQyxJQUFJLGlCQUFpQixDQUFDLENBQUMsSUFBSSxpQkFBaUIsQ0FBQyxDQUM1RSxVQUFVLENBQUUsTUFBTSxDQUNsQixPQUFPLENBQUUsTUFBTSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUMvQixJQUFJLENBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUNkIn0=*/"],sourceRoot:""}]),I.A=t},85083:function(g,I,A){A.r(I),A.d(I,{default:function(){return Dg}});var C=A(43467),e=(A(2531),A(23505)),l=A(41949),t=A(8633),c=A(78836),i=A(95669),s=A(61751),n=A(8936),b=A(54603),d=A(3831);function u(g,I){const A=(0,b.T5)([]),C=async I=>(I={...{vocabularyUrl:g.vocabularyUrl,attributes:g.attributes,pageSize:g.pageSize},...I},g.selectableTypes.length&&(I.selectableTypes=g.selectableTypes),await(0,d.Em)(I));return A.get=async e=>{let{path:l="",searchTerm:t="",updateCache:c=!1,loadMorePath:i="",page:s=1}=e;if("search"===g.mode)await(async(I,e)=>{let l={searchPath:g.rootPath,page:e};if(I){if(I.length<2)return;l.searchTerm="*"+I+"*"}let t=await C(l);t.page=e,t.searchTerm=I,A.update((A=>{const C=e*g.pageSize<t.total;return 0==A.length||A[0].searchTerm!=I?(t.more=C,t.selectable=!1,t.gridView=!1,[t]):(A[0].more=C,A[0].page=t.page,A[0].results=[...A[0].results,...t.results],A)}))})(t,s);else if(i){const e=(0,b.Jt)(I);if(!(i in e))return;let l=e[i];s>l.page&&await(async(I,e,l)=>{let t={path:I,page:e};l&&(t.searchTerm="*"+l+"*");let c=await C(t);c.more=e*g.pageSize<c.total,c.page=e,A.update((g=>(g.forEach((g=>{if(g.path!=I)return g;g.page=c.page,g.more=c.more,g.results=[...g.results,...c.results]})),g)))})(i,s,l.searchTerm)}else l&&await(async(e,l,t)=>{let c=g.rootPath,i=c.replace(/^\/+/,"").split("/"),s=e,n=c;if(!s.startsWith(c))if(1===i.length)s=c+s;else{let g=s.replace(/^\/+/,"").split("/"),I=i.length;for(let A=0;A<i.length;A++)if(i[A]===g[0]){I=A;break}n="/"+i.filter((I=>g.includes(I))).join("/"),s="/"+i.slice(1,I).concat(g).join("/")}let d=[],u=s.split("/")||[];const a=Math.min(u.length,g.maxDepth||999);let o=u.slice(u.length-a,u.length);const G=u.slice(0,u.length-a).join("/");for(;o.length>0;){let g=o.join("/").replace(/^\//,"");if(g=G+(""!=o.pop()?`/${g}`:""),g&&-1===d.indexOf(g)&&d.push(g),g==c)break}const r=(0,b.Jt)(I);let Z=[],m=0;for(var X of d){m++;const A=1==m;let e={};if(!(X in r)||A&&l||t){let t={path:X};if(A&&l&&(t.searchTerm="*"+l+"*"),e=await C(t),e.more=g.pageSize<e.total,e.searchTerm=l,e.page=1,e.path=X,e.displayPath=X.replace(new RegExp(`^(${n}|${c})`),"")||"/",!l){const A=await C({levelInfoPath:X});A.total&&(e.UID=A.results[0].UID,e.Title=A.results[0].Title,e.portal_type=A.results[0].portal_type,e.getIcon=A.results[0].getIcon,e.selectable=!g.selectableTypes.length||-1!=g.selectableTypes.indexOf(A.results[0].portal_type)),e.gridView=!1,I.update((g=>(g[X]=e,g)))}}else e=r[X];Z=[e,...Z]}A.set(Z)})(l,t,c)},A}function a(g,I,A){const C=g.slice();return C[5]=I[A],C}function o(g){let I,A,e,l,t,c,i,n,b,u,o=(0,s.Ay)("Favorites")+"",r=(0,C.rv_)(g[0].favorites),Z=[];for(let I=0;I<r.length;I+=1)Z[I]=G(a(g,r,I));return{c(){I=(0,C.ND4)("div"),A=(0,C.ND4)("button"),e=(0,C.QQy)("svg"),t=(0,C.xem)(),c=(0,C.Qq7)(o),i=(0,C.xem)(),n=(0,C.ND4)("ul");for(let g=0;g<Z.length;g+=1)Z[g].c();(0,C.CFu)(A,"type","button"),(0,C.CFu)(A,"class","favorites dropdown-toggle btn btn-outline-light btn-sm"),(0,C.CFu)(A,"data-bs-toggle","dropdown"),(0,C.CFu)(A,"aria-haspopup","true"),(0,C.CFu)(A,"aria-expanded","false"),(0,C.CFu)(n,"class","dropdown-menu"),(0,C.CFu)(I,"class","favorites dropdown dropdown-menu-end ms-2")},m(g,s){(0,C.Yry)(g,I,s),(0,C.BCw)(I,A),(0,C.BCw)(A,e),(0,C.BCw)(A,t),(0,C.BCw)(A,c),(0,C.BCw)(I,i),(0,C.BCw)(I,n);for(let g=0;g<Z.length;g+=1)Z[g]&&Z[g].m(n,null);b||(u=(0,C.hGc)(l=d.qz.call(null,e,{iconName:"star-fill"})),b=!0)},p(g,I){if(5&I){let A;for(r=(0,C.rv_)(g[0].favorites),A=0;A<r.length;A+=1){const C=a(g,r,A);Z[A]?Z[A].p(C,I):(Z[A]=G(C),Z[A].c(),Z[A].m(n,null))}for(;A<Z.length;A+=1)Z[A].d(1);Z.length=r.length}},d(g){g&&(0,C.YoD)(I),(0,C.ppq)(Z,g),b=!1,u()}}}function G(g){let I,A,e,l,t,c,i,s=g[5].title+"";function n(){return g[3](g[5])}return{c(){I=(0,C.ND4)("li"),A=(0,C.ND4)("a"),e=(0,C.Qq7)(s),t=(0,C.xem)(),(0,C.CFu)(A,"class","dropdown-item"),(0,C.CFu)(A,"href",l=g[5].path)},m(g,l){(0,C.Yry)(g,I,l),(0,C.BCw)(I,A),(0,C.BCw)(A,e),(0,C.BCw)(I,t),c||(i=(0,C.KTR)(A,"click",(0,C.xZN)(n)),c=!0)},p(I,t){g=I,1&t&&s!==(s=g[5].title+"")&&(0,C.iQh)(e,s),1&t&&l!==(l=g[5].path)&&(0,C.CFu)(A,"href",l)},d(g){g&&(0,C.YoD)(I),c=!1,i()}}}function r(g){let I,A=g[0]?.favorites&&o(g);return{c(){A&&A.c(),I=(0,C.Iex)()},m(g,e){A&&A.m(g,e),(0,C.Yry)(g,I,e)},p(g,[C]){g[0]?.favorites?A?A.p(g,C):(A=o(g),A.c(),A.m(I.parentNode,I)):A&&(A.d(1),A=null)},i:C.lQ1,o:C.lQ1,d(g){g&&(0,C.YoD)(I),A&&A.d(g)}}}function Z(g,I,A){let e;const t=(0,l.SD)("config");(0,C.j0C)(g,t,(g=>A(0,e=g)));const c=(0,l.ur)();function i(g){c("selectItem",{item:g})}return[e,t,i,g=>i(g)]}class m extends C.r7T{constructor(g){super(),(0,C.TsN)(this,g,Z,r,C.jXN,{})}}var X=m;function B(g,I,A){const C=g.slice();return C[6]=I[A],C}function x(g){let I,A,e,l,t,c,i,n,b,u,a=(0,s.Ay)("Recently Used")+"",o=(0,C.rv_)(g[2].reverse()),G=[];for(let I=0;I<o.length;I+=1)G[I]=V(B(g,o,I));return{c(){I=(0,C.ND4)("div"),A=(0,C.ND4)("button"),e=(0,C.QQy)("svg"),t=(0,C.xem)(),c=(0,C.Qq7)(a),i=(0,C.xem)(),n=(0,C.ND4)("ul");for(let g=0;g<G.length;g+=1)G[g].c();(0,C.CFu)(A,"type","button"),(0,C.CFu)(A,"class","recentlyUsed dropdown-toggle btn btn-outline-light btn-sm"),(0,C.CFu)(A,"data-bs-toggle","dropdown"),(0,C.CFu)(A,"aria-haspopup","true"),(0,C.CFu)(A,"aria-expanded","false"),(0,C.CFu)(n,"class","dropdown-menu"),(0,C.CFu)(I,"class","recentlyUsed dropdown ms-2")},m(g,s){(0,C.Yry)(g,I,s),(0,C.BCw)(I,A),(0,C.BCw)(A,e),(0,C.BCw)(A,t),(0,C.BCw)(A,c),(0,C.BCw)(I,i),(0,C.BCw)(I,n);for(let g=0;g<G.length;g+=1)G[g]&&G[g].m(n,null);b||(u=(0,C.hGc)(l=d.qz.call(null,e,{iconName:"grid-fill"})),b=!0)},p(g,I){if(12&I){let A;for(o=(0,C.rv_)(g[2].reverse()),A=0;A<o.length;A+=1){const C=B(g,o,A);G[A]?G[A].p(C,I):(G[A]=V(C),G[A].c(),G[A].m(n,null))}for(;A<G.length;A+=1)G[A].d(1);G.length=o.length}},d(g){g&&(0,C.YoD)(I),(0,C.ppq)(G,g),b=!1,u()}}}function V(g){let I,A,e,l,t,c,i,s,n,b,u=g[6].Title+"";function a(){return g[4](g[6])}return{c(){I=(0,C.ND4)("li"),A=(0,C.ND4)("a"),e=(0,C.QQy)("svg"),t=(0,C.xem)(),c=(0,C.Qq7)(u),s=(0,C.xem)(),(0,C.CFu)(A,"href",i=g[6].getURL||"#"),(0,C.CFu)(A,"class","dropdown-item")},m(i,u){(0,C.Yry)(i,I,u),(0,C.BCw)(I,A),(0,C.BCw)(A,e),(0,C.BCw)(A,t),(0,C.BCw)(A,c),(0,C.BCw)(I,s),n||(b=[(0,C.hGc)(l=d.qz.call(null,e,{iconName:`contenttype/${g[6]?.portal_type.toLowerCase().replace(/\.| /g,"-")}`})),(0,C.KTR)(A,"click",(0,C.xZN)(a))],n=!0)},p(I,A){g=I},d(g){g&&(0,C.YoD)(I),n=!1,(0,C.oOW)(b)}}}function p(g){let I,A=g[0].recentlyUsed&&g[2].length&&x(g);return{c(){A&&A.c(),I=(0,C.Iex)()},m(g,e){A&&A.m(g,e),(0,C.Yry)(g,I,e)},p(g,[C]){g[0].recentlyUsed&&g[2].length?A?A.p(g,C):(A=x(g),A.c(),A.m(I.parentNode,I)):A&&(A.d(1),A=null)},i:C.lQ1,o:C.lQ1,d(g){g&&(0,C.YoD)(I),A&&A.d(g)}}}function y(g,I,A){let e;const t=(0,l.SD)("config");(0,C.j0C)(g,t,(g=>A(0,e=g)));const c=(0,d.gf)(!0,e),i=(0,l.ur)();function s(g){i("selectItem",{item:g})}return[e,t,c,s,g=>s(g)]}class W extends C.r7T{constructor(g){super(),(0,C.TsN)(this,g,y,p,C.jXN,{})}}var F=W,v=A(85072),Q=A.n(v),N=A(97825),h=A.n(N),U=A(57722),Y=A.n(U),R=A(55056),w=A.n(R),D=A(10540),J=A.n(D),L=A(41113),S=A.n(L),j=A(24433),f={};f.styleTagTransform=S(),f.setAttributes=w(),f.insert=Y(),f.domAPI=h(),f.insertStyleElement=J();Q()(j.A,f),j.A&&j.A.locals&&j.A.locals;function k(g,I,A){const C=g.slice();return C[48]=I[A],C[49]=I,C[50]=A,C}function H(g,I,A){const C=g.slice();return C[51]=I[A],C[53]=A,C}function z(g){let I,A,e,l,t,c,s,n,b,u,a,o,G,r,Z,m,B,x,V,p,y,W,v,Q,N;a=new F({}),a.$on("selectItem",g[22]),G=new X({}),G.$on("selectItem",g[23]);let h=g[6].uploadEnabled&&E(g),U={ctx:g,current:null,token:null,hasCatch:!0,pending:ug,then:q,catch:T,value:47,error:54};return(0,C.vBd)(p=g[1],U),{c(){I=(0,C.ND4)("div"),A=(0,C.ND4)("nav"),e=(0,C.ND4)("div"),l=(0,C.ND4)("div"),t=(0,C.ND4)("input"),c=(0,C.xem)(),s=(0,C.ND4)("label"),n=(0,C.QQy)("svg"),u=(0,C.xem)(),(0,C.N0i)(a.$$.fragment),o=(0,C.xem)(),(0,C.N0i)(G.$$.fragment),r=(0,C.xem)(),h&&h.c(),Z=(0,C.xem)(),m=(0,C.ND4)("button"),B=(0,C.QQy)("svg"),V=(0,C.xem)(),U.block.c(),(0,C.CFu)(t,"type","text"),(0,C.CFu)(t,"name","filter"),(0,C.CFu)(s,"for","filter"),(0,C.CFu)(l,"class","filter me-3"),(0,C.CFu)(m,"class","btn btn-link text-white ms-auto"),(0,C.CFu)(m,"tabindex","0"),(0,C.CFu)(e,"class","toolBar navbar svelte-jgy3q8"),(0,C.CFu)(A,"class","content-browser svelte-jgy3q8"),(0,C.CFu)(I,"class","content-browser-position-wrapper svelte-jgy3q8")},m(i,X){(0,C.Yry)(i,I,X),(0,C.BCw)(I,A),(0,C.BCw)(A,e),(0,C.BCw)(e,l),(0,C.BCw)(l,t),(0,C.BCw)(l,c),(0,C.BCw)(l,s),(0,C.BCw)(s,n),(0,C.BCw)(e,u),(0,C.wSR)(a,e,null),(0,C.BCw)(e,o),(0,C.wSR)(G,e,null),(0,C.BCw)(e,r),h&&h.m(e,null),(0,C.BCw)(e,Z),(0,C.BCw)(e,m),(0,C.BCw)(m,B),(0,C.BCw)(A,V),U.block.m(A,U.anchor=null),U.mount=()=>A,U.anchor=null,v=!0,Q||(N=[(0,C.KTR)(t,"input",g[28]),(0,C.hGc)(b=d.qz.call(null,n,{iconName:"search"})),(0,C.hGc)(x=d.qz.call(null,B,{iconName:"x-circle"})),(0,C.KTR)(m,"click",(0,C.xZN)(g[30])),(0,C.KTR)(A,"introend",g[39]),(0,C.hGc)(y=d.EO.call(null,A)),(0,C.KTR)(A,"click_outside",g[24])],Q=!0)},p(I,A){(g=I)[6].uploadEnabled?h?h.p(g,A):(h=E(g),h.c(),h.m(e,Z)):h&&(h.d(1),h=null),U.ctx=g,2&A[0]&&p!==(p=g[1])&&(0,C.vBd)(p,U)||(0,C._6B)(U,g,A)},i(I){v||((0,C.c7F)(a.$$.fragment,I),(0,C.c7F)(G.$$.fragment,I),I&&(0,C.Dti)((()=>{v&&(W||(W=(0,C.h86)(A,i._J,{x:g[14]/100*94,opacity:1},!0)),W.run(1))})),v=!0)},o(I){(0,C.Tn8)(a.$$.fragment,I),(0,C.Tn8)(G.$$.fragment,I),I&&(W||(W=(0,C.h86)(A,i._J,{x:g[14]/100*94,opacity:1},!1)),W.run(0)),v=!1},d(g){g&&(0,C.YoD)(I),(0,C.Hbl)(a),(0,C.Hbl)(G),h&&h.d(),U.block.d(),U.token=null,U=null,g&&W&&W.end(),Q=!1,(0,C.oOW)(N)}}}function E(g){let I,A,e,l,t,c,i,n,b=(0,s.Ay)("upload to ${current_path}",{current_path:g[2]})+"";return{c(){I=(0,C.ND4)("div"),A=(0,C.ND4)("button"),e=(0,C.QQy)("svg"),t=(0,C.xem)(),c=(0,C.Qq7)(b),(0,C.CFu)(A,"type","button"),(0,C.CFu)(A,"class","upload btn btn-outline-light btn-sm"),(0,C.CFu)(A,"tabindex","0"),(0,C.CFu)(I,"class","ms-2")},m(s,b){(0,C.Yry)(s,I,b),(0,C.BCw)(I,A),(0,C.BCw)(A,e),(0,C.BCw)(A,t),(0,C.BCw)(A,c),i||(n=[(0,C.hGc)(l=d.qz.call(null,e,{iconName:"upload"})),(0,C.KTR)(A,"keydown",g[15]),(0,C.KTR)(A,"click",g[15])],i=!0)},p(g,I){4&I[0]&&b!==(b=(0,s.Ay)("upload to ${current_path}",{current_path:g[2]})+"")&&(0,C.iQh)(c,b)},d(g){g&&(0,C.YoD)(I),i=!1,(0,C.oOW)(n)}}}function T(g){let I,A,e=g[54].message+"";return{c(){I=(0,C.ND4)("p"),A=(0,C.Qq7)(e),(0,C.hgi)(I,"color","red")},m(g,e){(0,C.Yry)(g,I,e),(0,C.BCw)(I,A)},p(g,I){2&I[0]&&e!==(e=g[54].message+"")&&(0,C.iQh)(A,e)},d(g){g&&(0,C.YoD)(I)}}}function q(g){let I,A,e,l,t=[],c=new Map,i=(0,C.rv_)(g[47]);const s=g=>g[48].path;for(let I=0;I<i.length;I+=1){let A=k(g,i,I),C=s(A);c.set(C,t[I]=cg(C,A))}let n=g[5]?.UID&&1==g[0].length&&ig(g),b=g[0].length>1&&bg(g),d=g[4]&&dg(g);return{c(){I=(0,C.ND4)("div");for(let g=0;g<t.length;g+=1)t[g].c();A=(0,C.xem)(),n&&n.c(),e=(0,C.xem)(),b&&b.c(),l=(0,C.xem)(),d&&d.c(),(0,C.CFu)(I,"class","levelColumns svelte-jgy3q8")},m(g,c){(0,C.Yry)(g,I,c);for(let g=0;g<t.length;g+=1)t[g]&&t[g].m(I,null);(0,C.BCw)(I,A),n&&n.m(I,null),(0,C.BCw)(I,e),b&&b.m(I,null),(0,C.BCw)(I,l),d&&d.m(I,null)},p(g,u){169541699&u[0]&&(i=(0,C.rv_)(g[47]),t=(0,C.l7s)(t,u,s,1,g,i,c,I,C.n_k,cg,A,k)),g[5]?.UID&&1==g[0].length?n?n.p(g,u):(n=ig(g),n.c(),n.m(I,e)):n&&(n.d(1),n=null),g[0].length>1?b?b.p(g,u):(b=bg(g),b.c(),b.m(I,l)):b&&(b.d(1),b=null),g[4]?d||(d=dg(g),d.c(),d.m(I,null)):d&&(d.d(1),d=null)},d(g){g&&(0,C.YoD)(I);for(let g=0;g<t.length;g+=1)t[g].d();n&&n.d(),b&&b.d(),d&&d.d()}}}function P(g){let I,A,e,l,t;return{c(){I=(0,C.ND4)("button"),A=(0,C.QQy)("svg"),(0,C.CFu)(I,"type","button"),(0,C.CFu)(I,"class","btn btn-link btn-xs ps-0 svelte-jgy3q8"),(0,C.CFu)(I,"tabindex","0")},m(c,i){(0,C.Yry)(c,I,i),(0,C.BCw)(I,A),l||(t=[(0,C.hGc)(e=d.qz.call(null,A,{iconName:"house"})),(0,C.KTR)(I,"keydown",g[31]),(0,C.KTR)(I,"click",g[32])],l=!0)},p:C.lQ1,d(g){g&&(0,C.YoD)(I),l=!1,(0,C.oOW)(t)}}}function K(g){let I,A,e,l,t,c,i=(0,s.Ay)("select ${level_path}",{level_path:g[48].Title})+"";function n(){return g[33](g[48])}return{c(){I=(0,C.ND4)("button"),A=(0,C.Qq7)(i),(0,C.CFu)(I,"class","btn btn-primary btn-xs svelte-jgy3q8"),(0,C.CFu)(I,"title",e=g[48].displayPath),I.disabled=l=!g[25](g[48])},m(g,e){(0,C.Yry)(g,I,e),(0,C.BCw)(I,A),t||(c=(0,C.KTR)(I,"click",(0,C.xZN)(n)),t=!0)},p(t,c){g=t,2&c[0]&&i!==(i=(0,s.Ay)("select ${level_path}",{level_path:g[48].Title})+"")&&(0,C.iQh)(A,i),2&c[0]&&e!==(e=g[48].displayPath)&&(0,C.CFu)(I,"title",e),2&c[0]&&l!==(l=!g[25](g[48]))&&(I.disabled=l)},d(g){g&&(0,C.YoD)(I),t=!1,c()}}}function O(g){let I,A,e,l,t;function c(){return g[35](g[48],g[49],g[50])}return{c(){I=(0,C.ND4)("button"),A=(0,C.QQy)("svg"),(0,C.CFu)(I,"class","btn btn-link btn-xs grid-view svelte-jgy3q8")},m(g,i){(0,C.Yry)(g,I,i),(0,C.BCw)(I,A),l||(t=[(0,C.hGc)(e=d.qz.call(null,A,{iconName:"list"})),(0,C.KTR)(I,"click",c)],l=!0)},p(I,A){g=I},d(g){g&&(0,C.YoD)(I),l=!1,(0,C.oOW)(t)}}}function M(g){let I,A,e,l,t;function c(){return g[34](g[48],g[49],g[50])}return{c(){I=(0,C.ND4)("button"),A=(0,C.QQy)("svg"),(0,C.CFu)(I,"class","btn btn-link btn-xs grid-view svelte-jgy3q8")},m(g,i){(0,C.Yry)(g,I,i),(0,C.BCw)(I,A),l||(t=[(0,C.hGc)(e=d.qz.call(null,A,{iconName:"grid"})),(0,C.KTR)(I,"click",c)],l=!0)},p(I,A){g=I},d(g){g&&(0,C.YoD)(I),l=!1,(0,C.oOW)(t)}}}function $(g){let I,A,e,l,t,c,i,s,n,b=g[51].Title+"",u="search"==g[6].mode&&gg(g);return{c(){I=(0,C.ND4)("div"),A=(0,C.QQy)("svg"),l=(0,C.xem)(),t=(0,C.Qq7)(b),c=(0,C.xem)(),u&&u.c(),(0,C.CFu)(I,"class","item-title svelte-jgy3q8"),(0,C.CFu)(I,"title",i=g[51].portal_type+": "+g[51].Title)},m(i,b){(0,C.Yry)(i,I,b),(0,C.BCw)(I,A),(0,C.BCw)(I,l),(0,C.BCw)(I,t),(0,C.BCw)(I,c),u&&u.m(I,null),s||(n=(0,C.hGc)(e=d.qz.call(null,A,{iconName:`contenttype/${g[51].portal_type.toLowerCase().replace(/\.| /g,"-")}`})),s=!0)},p(A,l){g=A,e&&(0,C.Qk1)(e.update)&&2&l[0]&&e.update.call(null,{iconName:`contenttype/${g[51].portal_type.toLowerCase().replace(/\.| /g,"-")}`}),2&l[0]&&b!==(b=g[51].Title+"")&&(0,C.iQh)(t,b),"search"==g[6].mode?u?u.p(g,l):(u=gg(g),u.c(),u.m(I,null)):u&&(u.d(1),u=null),2&l[0]&&i!==(i=g[51].portal_type+": "+g[51].Title)&&(0,C.CFu)(I,"title",i)},d(g){g&&(0,C.YoD)(I),u&&u.d(),s=!1,n()}}}function _(g){let I,A,e,l=g[51].Title+"";function t(g,I){return g[51].getIcon?Ag:Ig}let c=t(g),i=c(g);return{c(){I=(0,C.ND4)("div"),i.c(),A=(0,C.xem)(),e=(0,C.Qq7)(l),(0,C.CFu)(I,"class","grid-preview svelte-jgy3q8")},m(g,l){(0,C.Yry)(g,I,l),i.m(I,null),(0,C.BCw)(I,A),(0,C.BCw)(I,e)},p(g,s){c===(c=t(g))&&i?i.p(g,s):(i.d(1),i=c(g),i&&(i.c(),i.m(I,A))),2&s[0]&&l!==(l=g[51].Title+"")&&(0,C.iQh)(e,l)},d(g){g&&(0,C.YoD)(I),i.d()}}}function gg(g){let I,A,e,l=g[51].path+"";return{c(){I=(0,C.ND4)("br"),A=(0,C.ND4)("span"),e=(0,C.Qq7)(l),(0,C.CFu)(A,"class","small")},m(g,l){(0,C.Yry)(g,I,l),(0,C.Yry)(g,A,l),(0,C.BCw)(A,e)},p(g,I){2&I[0]&&l!==(l=g[51].path+"")&&(0,C.iQh)(e,l)},d(g){g&&((0,C.YoD)(I),(0,C.YoD)(A))}}}function Ig(g){let I,A,e,l;return{c(){I=(0,C.QQy)("svg")},m(t,c){(0,C.Yry)(t,I,c),e||(l=(0,C.hGc)(A=d.qz.call(null,I,{iconName:`contenttype/${g[51].portal_type.toLowerCase().replace(/\.| /g,"-")}`})),e=!0)},p(I,e){g=I,A&&(0,C.Qk1)(A.update)&&2&e[0]&&A.update.call(null,{iconName:`contenttype/${g[51].portal_type.toLowerCase().replace(/\.| /g,"-")}`})},d(g){g&&(0,C.YoD)(I),e=!1,l()}}}function Ag(g){let I,A,e;return{c(){I=(0,C.ND4)("img"),(0,C.mq_)(I.src,A=`${g[51].getURL}/@@images/image/thumb`)||(0,C.CFu)(I,"src",A),(0,C.CFu)(I,"alt",e=g[51].Title),(0,C.CFu)(I,"class","svelte-jgy3q8")},m(g,A){(0,C.Yry)(g,I,A)},p(g,l){2&l[0]&&!(0,C.mq_)(I.src,A=`${g[51].getURL}/@@images/image/thumb`)&&(0,C.CFu)(I,"src",A),2&l[0]&&e!==(e=g[51].Title)&&(0,C.CFu)(I,"alt",e)},d(g){g&&(0,C.YoD)(I)}}}function Cg(g){let I,A,e,l,t;return{c(){I=(0,C.ND4)("div"),A=(0,C.QQy)("svg"),(0,C.CFu)(I,"class","browseSub svelte-jgy3q8")},m(g,c){(0,C.Yry)(g,I,c),(0,C.BCw)(I,A),l||(t=(0,C.hGc)(e=d.qz.call(null,A,{iconName:"arrow-right-circle"})),l=!0)},d(g){g&&(0,C.YoD)(I),l=!1,t()}}}function eg(g){let I,A,e,l,t,c,i;function s(g,I){return g[48].gridView?_:$}let n=s(g),b=n(g),d=g[51].is_folderish&&"browse"==g[6].mode&&Cg();function u(...I){return g[36](g[51],...I)}function a(...I){return g[37](g[51],...I)}return{c(){I=(0,C.ND4)("div"),b.c(),A=(0,C.xem)(),d&&d.c(),(0,C.CFu)(I,"class",e="contentItem"+(g[53]%2==0?" odd":" even")+(g[27](g[51])?" inPath":"")+(-1!=g[0].indexOf(g[51].UID)?" selectedItem":"")+(g[25](g[51])?"":" text-muted")+" svelte-jgy3q8"),(0,C.CFu)(I,"role","button"),(0,C.CFu)(I,"tabindex",l=g[53]),(0,C.CFu)(I,"data-uuid",t=g[51].UID)},m(g,e){(0,C.Yry)(g,I,e),b.m(I,null),(0,C.BCw)(I,A),d&&d.m(I,null),c||(i=[(0,C.KTR)(I,"keydown",(0,C.xZN)(u)),(0,C.KTR)(I,"click",a)],c=!0)},p(l,c){n===(n=s(g=l))&&b?b.p(g,c):(b.d(1),b=n(g),b&&(b.c(),b.m(I,A))),g[51].is_folderish&&"browse"==g[6].mode?d||(d=Cg(),d.c(),d.m(I,null)):d&&(d.d(1),d=null),3&c[0]&&e!==(e="contentItem"+(g[53]%2==0?" odd":" even")+(g[27](g[51])?" inPath":"")+(-1!=g[0].indexOf(g[51].UID)?" selectedItem":"")+(g[25](g[51])?"":" text-muted")+" svelte-jgy3q8")&&(0,C.CFu)(I,"class",e),2&c[0]&&t!==(t=g[51].UID)&&(0,C.CFu)(I,"data-uuid",t)},d(g){g&&(0,C.YoD)(I),b.d(),d&&d.d(),c=!1,(0,C.oOW)(i)}}}function lg(g){let I,A,e,l,t,c,i;return{c(){I=(0,C.ND4)("div"),A=(0,C.ND4)("div"),(0,C.CFu)(A,"class","spinner-border"),(0,C.CFu)(A,"role","status"),(0,C.CFu)(I,"class","loadmore svelte-jgy3q8"),(0,C.CFu)(I,"data-level-path",e=g[48].path),(0,C.CFu)(I,"data-level-next-page",l=parseInt(g[48].page)+1)},m(e,l){(0,C.Yry)(e,I,l),(0,C.BCw)(I,A),c||(i=(0,C.hGc)(t=g[29].call(null,I)),c=!0)},p(g,A){2&A[0]&&e!==(e=g[48].path)&&(0,C.CFu)(I,"data-level-path",e),2&A[0]&&l!==(l=parseInt(g[48].page)+1)&&(0,C.CFu)(I,"data-level-next-page",l)},d(g){g&&(0,C.YoD)(I),c=!1,i()}}}function tg(g){let I,A;return{c(){I=(0,C.ND4)("div"),A=(0,C.ND4)("p"),A.textContent=`${(0,s.Ay)("no results found")}`,(0,C.CFu)(A,"class","svelte-jgy3q8"),(0,C.CFu)(I,"class","contentItem svelte-jgy3q8")},m(g,e){(0,C.Yry)(g,I,e),(0,C.BCw)(I,A)},d(g){g&&(0,C.YoD)(I)}}}function cg(g,I){let A,e,l,t,c,s,n,b,d,u,a,o=0==I[50]&&"browse"==I[6].mode&&P(I),G=I[48].selectable&&K(I);function r(g,I){return g[48].gridView?O:M}let Z=r(I),m=Z(I),X=(0,C.rv_)(I[48].results||[]),B=[];for(let g=0;g<X.length;g+=1)B[g]=eg(H(I,X,g));let x=I[48].more&&lg(I),V=0==I[48].total&&tg();return{key:g,first:null,c(){A=(0,C.ND4)("div"),e=(0,C.ND4)("div"),o&&o.c(),l=(0,C.xem)(),G&&G.c(),t=(0,C.xem)(),c=(0,C.ND4)("div"),m.c(),s=(0,C.xem)(),n=(0,C.ND4)("div");for(let g=0;g<B.length;g+=1)B[g].c();b=(0,C.xem)(),x&&x.c(),d=(0,C.xem)(),V&&V.c(),(0,C.CFu)(c,"class","levelActions svelte-jgy3q8"),(0,C.CFu)(e,"class","levelToolbar svelte-jgy3q8"),(0,C.CFu)(n,"class","levelItems svelte-jgy3q8"),(0,C.CFu)(A,"class",u="levelColumn"+(I[50]%2==0?" odd":" even")+" svelte-jgy3q8"),this.first=A},m(g,I){(0,C.Yry)(g,A,I),(0,C.BCw)(A,e),o&&o.m(e,null),(0,C.BCw)(e,l),G&&G.m(e,null),(0,C.BCw)(e,t),(0,C.BCw)(e,c),m.m(c,null),(0,C.BCw)(A,s),(0,C.BCw)(A,n);for(let g=0;g<B.length;g+=1)B[g]&&B[g].m(n,null);(0,C.BCw)(n,b),x&&x.m(n,null),(0,C.BCw)(n,d),V&&V.m(n,null)},p(g,i){if(0==(I=g)[50]&&"browse"==I[6].mode?o?o.p(I,i):(o=P(I),o.c(),o.m(e,l)):o&&(o.d(1),o=null),I[48].selectable?G?G.p(I,i):(G=K(I),G.c(),G.m(e,t)):G&&(G.d(1),G=null),Z===(Z=r(I))&&m?m.p(I,i):(m.d(1),m=Z(I),m&&(m.c(),m.m(c,null))),168427587&i[0]){let g;for(X=(0,C.rv_)(I[48].results||[]),g=0;g<X.length;g+=1){const A=H(I,X,g);B[g]?B[g].p(A,i):(B[g]=eg(A),B[g].c(),B[g].m(n,b))}for(;g<B.length;g+=1)B[g].d(1);B.length=X.length}I[48].more?x?x.p(I,i):(x=lg(I),x.c(),x.m(n,d)):x&&(x.d(1),x=null),0==I[48].total?V||(V=tg(),V.c(),V.m(n,null)):V&&(V.d(1),V=null),2&i[0]&&u!==(u="levelColumn"+(I[50]%2==0?" odd":" even")+" svelte-jgy3q8")&&(0,C.CFu)(A,"class",u)},i(g){g&&(a||(0,C.Dti)((()=>{a=(0,C.b7f)(A,i._J,{duration:300}),a.start()})))},o:C.lQ1,d(g){g&&(0,C.YoD)(A),o&&o.d(),G&&G.d(),m.d(),(0,C.ppq)(B,g),x&&x.d(),V&&V.d()}}}function ig(g){let I,A,e,l,t,c,i,n,b,d,u,a,o,G,r,Z=(0,s.Ay)("select ${preview_path}",{preview_path:g[5].path.split("/").pop()})+"",m=g[5].Title+"",X=g[5].Description+"";function B(g,I){return g[5].getIcon?ng:sg}let x=B(g),V=x(g);return{c(){I=(0,C.ND4)("div"),A=(0,C.ND4)("div"),e=(0,C.ND4)("button"),l=(0,C.Qq7)(Z),c=(0,C.xem)(),i=(0,C.ND4)("div"),V.c(),n=(0,C.xem)(),b=(0,C.ND4)("h4"),d=(0,C.Qq7)(m),u=(0,C.xem)(),a=(0,C.ND4)("p"),o=(0,C.Qq7)(X),(0,C.CFu)(e,"class","btn btn-primary btn-xs svelte-jgy3q8"),e.disabled=t=!g[25](g[5]),(0,C.CFu)(A,"class","levelToolbar svelte-jgy3q8"),(0,C.CFu)(b,"class","svelte-jgy3q8"),(0,C.CFu)(i,"class","info svelte-jgy3q8"),(0,C.CFu)(I,"class","preview svelte-jgy3q8")},m(t,s){(0,C.Yry)(t,I,s),(0,C.BCw)(I,A),(0,C.BCw)(A,e),(0,C.BCw)(e,l),(0,C.BCw)(I,c),(0,C.BCw)(I,i),V.m(i,null),(0,C.BCw)(i,n),(0,C.BCw)(i,b),(0,C.BCw)(b,d),(0,C.BCw)(i,u),(0,C.BCw)(i,a),(0,C.BCw)(a,o),G||(r=(0,C.KTR)(e,"click",(0,C.xZN)(g[38])),G=!0)},p(g,I){32&I[0]&&Z!==(Z=(0,s.Ay)("select ${preview_path}",{preview_path:g[5].path.split("/").pop()})+"")&&(0,C.iQh)(l,Z),32&I[0]&&t!==(t=!g[25](g[5]))&&(e.disabled=t),x===(x=B(g))&&V?V.p(g,I):(V.d(1),V=x(g),V&&(V.c(),V.m(i,n))),32&I[0]&&m!==(m=g[5].Title+"")&&(0,C.iQh)(d,m),32&I[0]&&X!==(X=g[5].Description+"")&&(0,C.iQh)(o,X)},d(g){g&&(0,C.YoD)(I),V.d(),G=!1,r()}}}function sg(g){let I,A,e,l,t;return{c(){I=(0,C.ND4)("div"),A=(0,C.QQy)("svg"),(0,C.CFu)(A,"class","svelte-jgy3q8"),(0,C.CFu)(I,"class","previewIcon svelte-jgy3q8")},m(c,i){(0,C.Yry)(c,I,i),(0,C.BCw)(I,A),l||(t=(0,C.hGc)(e=d.qz.call(null,A,{iconName:`contenttype/${g[5].portal_type.toLowerCase().replace(/\.| /g,"-")}`})),l=!0)},p(g,I){e&&(0,C.Qk1)(e.update)&&32&I[0]&&e.update.call(null,{iconName:`contenttype/${g[5].portal_type.toLowerCase().replace(/\.| /g,"-")}`})},d(g){g&&(0,C.YoD)(I),l=!1,t()}}}function ng(g){let I,A,e,l;return{c(){I=(0,C.ND4)("div"),A=(0,C.ND4)("img"),(0,C.mq_)(A.src,e=g[5].getURL+"/@@images/image/preview")||(0,C.CFu)(A,"src",e),(0,C.CFu)(A,"alt",l=g[5].Title),(0,C.CFu)(A,"class","svelte-jgy3q8"),(0,C.CFu)(I,"class","previewImage")},m(g,e){(0,C.Yry)(g,I,e),(0,C.BCw)(I,A)},p(g,I){32&I[0]&&!(0,C.mq_)(A.src,e=g[5].getURL+"/@@images/image/preview")&&(0,C.CFu)(A,"src",e),32&I[0]&&l!==(l=g[5].Title)&&(0,C.CFu)(A,"alt",l)},d(g){g&&(0,C.YoD)(I)}}}function bg(g){let I,A,e,l,t,c,i,n,b;return{c(){I=(0,C.ND4)("div"),A=(0,C.ND4)("div"),e=(0,C.ND4)("button"),e.textContent=`${(0,s.Ay)("add selected items")}`,l=(0,C.xem)(),t=(0,C.ND4)("div"),c=(0,C.QQy)("svg"),(0,C.CFu)(e,"class","btn btn-primary btn-xs svelte-jgy3q8"),(0,C.CFu)(A,"class","levelToolbar svelte-jgy3q8"),(0,C.CFu)(c,"class","svelte-jgy3q8"),(0,C.CFu)(t,"class","info svelte-jgy3q8"),(0,C.CFu)(I,"class","preview svelte-jgy3q8")},m(s,u){(0,C.Yry)(s,I,u),(0,C.BCw)(I,A),(0,C.BCw)(A,e),(0,C.BCw)(I,l),(0,C.BCw)(I,t),(0,C.BCw)(t,c),n||(b=[(0,C.KTR)(e,"click",(0,C.xZN)(g[21])),(0,C.hGc)(i=d.qz.call(null,c,{iconName:"files"}))],n=!0)},p:C.lQ1,d(g){g&&(0,C.YoD)(I),n=!1,(0,C.oOW)(b)}}}function dg(g){let I;return{c(){I=(0,C.ND4)("div"),(0,C.CFu)(I,"class","upload-wrapper svelte-jgy3q8")},m(g,A){(0,C.Yry)(g,I,A)},d(g){g&&(0,C.YoD)(I)}}}function ug(g){let I;return{c(){I=(0,C.ND4)("p"),I.textContent=`${(0,s.Ay)("loading content items")}`},m(g,A){(0,C.Yry)(g,I,A)},p:C.lQ1,d(g){g&&(0,C.YoD)(I)}}}function ag(g){let I,A,e=g[3]&&z(g);return{c(){e&&e.c(),I=(0,C.Iex)()},m(g,l){e&&e.m(g,l),(0,C.Yry)(g,I,l),A=!0},p(g,A){g[3]?e?(e.p(g,A),8&A[0]&&(0,C.c7F)(e,1)):(e=z(g),e.c(),(0,C.c7F)(e,1),e.m(I.parentNode,I)):e&&((0,C.V44)(),(0,C.Tn8)(e,1,1,(()=>{e=null})),(0,C.GYV)())},i(g){A||((0,C.c7F)(e),A=!0)},o(g){(0,C.Tn8)(e),A=!1},d(g){g&&(0,C.YoD)(I),e&&e.d(g)}}}function og(g,I,A){let e,i,s,b,a,o,G;c.ih({scrollX:!0,container:".levelColumns",duration:500});const r=(0,l.SD)("currentPath");(0,C.j0C)(g,r,(g=>A(2,s=g)));const Z=(0,l.SD)("config");(0,C.j0C)(g,Z,(g=>A(6,a=g)));const m=(0,l.SD)("pathCache"),X=(0,l.SD)("showContentBrowser");(0,C.j0C)(g,X,(g=>A(3,b=g)));const B=(0,l.SD)("selectedItems");(0,C.j0C)(g,B,(g=>A(43,G=g)));const x=(0,l.SD)("selectedUids");(0,C.j0C)(g,x,(g=>A(42,o=g)));const V=(0,l.SD)("previewUids");(0,C.j0C)(g,V,(g=>A(0,e=g)));const p=u(a,m);(0,C.j0C)(g,p,(g=>A(1,i=g)));let y=!1,W={},F=!1,v=!1,Q=Math.max(document.documentElement.clientWidth||0,window.innerWidth||0);function N({data:g=null,uuid:I=null,action:l="show"}){if(g&&"show"==l)A(5,W=g),(0,C.vu6)(V,e=[g.UID],e);else if(I&&"add"==l&&-1===e.indexOf(I)){if(a.maximumSelectionSize>0&&e.length>=a.maximumSelectionSize)return;(0,C.vu6)(V,e=[...e,I],e)}else I&&"remove"==l&&-1!==e.indexOf(I)?V.update((g=>(g.splice(g.indexOf(I),1),g))):"clear"==l&&(A(5,W={}),(0,C.vu6)(V,e=[],e))}function h(g,I){A(4,y=!1),N({action:"clear"}),"/"!==g&&g!==a.rootPath?function(g){if("search"==a.mode)N({data:g});else if(g.is_folderish)(0,C.vu6)(V,e=[g.UID],e),r.set(g.path);else{const I=g.path.split("/"),A=I.slice(0,I.length-1).join("/");r.set(A||a.rootPath),N({data:g})}S()}(g):r.set(a.rootPath)}function U(g,I){F||(F=!0);const A=I.currentTarget.closest(".levelItems"),C=A.querySelectorAll(".selectedItem");if(C.length&&1!=a.maximumSelectionSize)if(v||I?.shiftKey){let I=!1;for(const C of A.children){if(-1!==[g.UID,W.UID].indexOf(C.dataset.uuid)){if(I){N({uuid:C.dataset.uuid,action:"add"}),I=!1;continue}I=!0}N({uuid:C.dataset.uuid,action:I?"add":"remove"})}}else I?.metaKey||I?.ctrlKey?N({uuid:g.UID,action:-1==e.indexOf(g.UID)?"add":"remove"}):([...C].map((g=>g.classList.remove("selectedItem"))),h(g));else h(g);I.currentTarget.focus(),I.currentTarget.classList.add("selectedItem")}function Y(){if(F)return;const g=[...document.querySelectorAll(".levelColumn .inPath"),...document.querySelectorAll(".levelColumn .selectedItem")];!g.length&&document.querySelector(".levelColumn .contentItem")&&g.push(document.querySelector(".levelColumn .contentItem")),g.length&&(F=!0,g[0].focus())}function R(g,I){const A=I.currentTarget;if(v=I.shiftKey,"Escape"==I.key&&J(),"ArrowDown"==I.key&&A?.nextElementSibling?.classList.contains("contentItem")&&A.nextElementSibling.click(),"ArrowUp"==I.key&&A?.previousElementSibling?.classList.contains("contentItem")&&A.previousElementSibling.click(),"ArrowRight"==I.key){const g=I.target.closest(".levelColumn"),A=g?.nextElementSibling;if(!A||!A.classList.contains("levelColumn"))return;A.querySelector(".contentItem")?.click()}if("ArrowLeft"==I.key){const g=I.target.closest(".levelColumn"),A=g?.previousElementSibling;if(!A||!A.classList.contains("levelColumn"))return;A.querySelector(".inPath").click()}"Space"==I.key&&U(g,I),"Enter"==I.key&&L(g)&&(1==a.maximumSelectionSize?w(g):D())}async function w(g){1==a.maximumSelectionSize?(B.set([g]),x.set([g.UID])):(B.update((I=>[...I,g])),x.update((()=>G.map((g=>g.UID))))),(0,d.r1)(g,a),N({action:"clear"}),(0,C.vu6)(X,b=!1,b),F=!1}async function D(){const g=await(0,d.x6)(e,a);B.update((I=>{for(const A of g)-1==o.indexOf(A.UID)&&I.push(A);return I})),x.update((()=>G.map((g=>g.UID)))),N({action:"clear"}),(0,C.vu6)(X,b=!1,b),F=!1}function J(){(0,C.vu6)(X,b=!1,b),F=!1,N({action:"clear"})}function L(g){return-1===o.indexOf(g.UID)}function S(){const g=document.querySelector(".levelColumns");g&&c.VG({x:g.scrollWidth+100})}const j=t.A.debounce((g=>{p.get({path:s,searchTerm:g.target.value})}),300);return g.$$.update=()=>{12&g.$$.dirty[0]&&b&&p.get({path:s}),2&g.$$.dirty[0]&&S(),g.$$.dirty[0]},[e,i,s,b,y,W,a,r,Z,X,B,x,V,p,Q,async function(){N({action:"clear"}),A(4,y=!0),await t.A.timeout(1);const g=document.querySelector(".upload-wrapper");g.classList.add("pat-upload"),new n.default(g,{baseUrl:a.rootUrl,currentPath:s,relativePath:"@@fileUpload",allowPathSelection:!1,hiddenInputContainer:".upload-wrapper",success:(g,I)=>{p.get({path:s,updateCache:!0})}})},h,U,Y,R,w,D,function(g){w(g.detail.item)},async function(g){const I=g.detail.item.path,A=await(0,d.Em)({vocabularyUrl:a.vocabularyUrl,attributes:a.attributes,levelInfoPath:I});if(!A.total)return void alert(`${I} not found!`);const C=A.results[0];C.path||(C.path=a.rootPath),h(C)},J,L,S,function(g){return"browse"==a.mode&&-1!=s.indexOf(g.path)},j,function(g){const I=new IntersectionObserver((I=>{for(const A of I)if(A.isIntersecting){const I=g.dataset.levelPath,A=parseInt(g.dataset.levelNextPage);p.get({loadMorePath:I,page:A})}}),{threshold:0,root:null,margin:"0px"});window.setTimeout((()=>{I.observe(g)}),500)},()=>J(),()=>h(a.rootPath),()=>h(a.rootPath),g=>w(g),(g,I,A)=>(0,C.vu6)(p,I[A].gridView=!0,i),(g,I,A)=>(0,C.vu6)(p,I[A].gridView=!1,i),(g,I)=>R(g,I),(g,I)=>U(g,I),()=>w(W),()=>{S(),Y()}]}class Gg extends C.r7T{constructor(g){super(),(0,C.TsN)(this,g,og,ag,C.jXN,{},null,[-1,-1])}}var rg=Gg,Zg=A(64708),mg=A.n(Zg),Xg=A(44563),Bg=A(58621),xg=A.n(Bg),Vg=A(19394),pg={};pg.styleTagTransform=S(),pg.setAttributes=w(),pg.insert=Y(),pg.domAPI=h(),pg.insertStyleElement=J();Q()(Vg.A,pg),Vg.A&&Vg.A.locals&&Vg.A.locals;function yg(g,I,A){const C=g.slice();return C[21]=I[A],C[23]=A,C}function Wg(g){let I,A=[],e=new Map,l=(0,C.rv_)(g[0]);const t=g=>g[21].UID;for(let I=0;I<l.length;I+=1){let C=yg(g,l,I),c=t(C);e.set(c,A[I]=Fg(c,C))}return{c(){for(let g=0;g<A.length;g+=1)A[g].c();I=(0,C.Iex)()},m(g,e){for(let I=0;I<A.length;I+=1)A[I]&&A[I].m(g,e);(0,C.Yry)(g,I,e)},p(g,c){1&c&&(l=(0,C.rv_)(g[0]),A=(0,C.l7s)(A,c,t,1,g,l,e,I.parentNode,C.n_k,Fg,I,yg))},d(g){g&&(0,C.YoD)(I);for(let I=0;I<A.length;I+=1)A[I].d(g)}}}function Fg(g,I){let A,e,l,t;return{key:g,first:null,c(){A=(0,C.ND4)("div"),this.first=A},m(g,c){(0,C.Yry)(g,A,c),l||(t=(0,C.hGc)(e=I[7].call(null,A,{idx:I[23],item:I[21]})),l=!0)},p(g,A){I=g,e&&(0,C.Qk1)(e.update)&&1&A&&e.update.call(null,{idx:I[23],item:I[21]})},d(g){g&&(0,C.YoD)(A),l=!1,t()}}}function vg(g){let I;return{c(){I=(0,C.ND4)("p"),I.textContent=`${(0,s.Ay)("loading selected items")}`},m(g,A){(0,C.Yry)(g,I,A)},d(g){g&&(0,C.YoD)(I)}}}function Qg(g){let I,A,e,l,t,c,i,n=g[0]&&Wg(g),b=!g[0]&&vg();return{c(){I=(0,C.ND4)("div"),A=(0,C.ND4)("div"),n&&n.c(),e=(0,C.xem)(),b&&b.c(),l=(0,C.xem)(),t=(0,C.ND4)("a"),t.textContent=`${(0,s.Ay)("Select")}`,(0,C.CFu)(A,"class","content-browser-selected-items svelte-awokap"),(0,C.CFu)(t,"class","btn btn-primary"),(0,C.CFu)(t,"href","#"),(0,C.hgi)(t,"border-radius","0 var(--bs-border-radius) var(--bs-border-radius) 0"),(0,C.CFu)(I,"class","content-browser-selected-items-wrapper svelte-awokap"),(0,C.hgi)(I,"width",g[2].width||"auto")},m(s,d){(0,C.Yry)(s,I,d),(0,C.BCw)(I,A),n&&n.m(A,null),(0,C.BCw)(A,e),b&&b.m(A,null),(0,C.BCw)(I,l),(0,C.BCw)(I,t),g[11](I),c||(i=[(0,C.KTR)(A,"click",g[9]),(0,C.KTR)(t,"click",(0,C.xZN)(g[10]))],c=!0)},p(g,[l]){g[0]?n?n.p(g,l):(n=Wg(g),n.c(),n.m(A,e)):n&&(n.d(1),n=null),g[0]?b&&(b.d(1),b=null):b||(b=vg(),b.c(),b.m(A,null)),4&l&&(0,C.hgi)(I,"width",g[2].width||"auto")},i:C.lQ1,o:C.lQ1,d(A){A&&(0,C.YoD)(I),n&&n.d(),b&&b.d(),g[11](null),c=!1,(0,C.oOW)(i)}}}function Ng(g,I,A){let e,t,c,i,s=!0;const n=(0,l.SD)("config");(0,C.j0C)(g,n,(g=>A(2,t=g)));const b=t.fieldId,u=document.getElementById(b),a=(0,l.SD)("selectedItems");(0,C.j0C)(g,a,(g=>A(0,e=g)));const o=(0,l.SD)("selectedUids"),G=(0,l.SD)("showContentBrowser");(0,C.j0C)(g,G,(g=>A(3,c=g)));const r=xg().getComponent(t.componentRegistryKeys?.selectedItem||"pat-contentbrowser.SelectedItem");function Z(){1!==t.maximumSelectionSize&&e.length>1&&mg().create(u.previousSibling.querySelector(".content-browser-selected-items"),{draggable:".selected-item",animation:200,onUpdate:g=>{let I=[];for(const A of g.target.children)I.push(A.dataset.uuid);m(I)}})}function m(g){const I=g.join(t.separator);u.value=I,u.dispatchEvent(Xg.A.change_event())}(0,l.Rc)((async()=>{await async function(){const g=t.selection.length?t.selection:u?.value?u.value.split(t.separator):[];if(!g.length)return;(0,C.vu6)(a,e=await(0,d.x6)(g,t),e),o.update((()=>e.map((g=>g.UID))))}(),Z(),A(8,s=!1)})),(0,l.o)("unselectItem",(function(g){a.update((I=>(I.splice(g,1),I))),o.update((()=>e.map((g=>g.UID))))}));return g.$$.update=()=>{257&g.$$.dirty&&(!e.length&&s||(m(function(){let g=[];return e.forEach((I=>{g.push(I.UID)})),g}()),Z()))},[e,i,t,c,n,a,G,function(g,I){new r.component({target:g,props:I})},s,()=>(0,C.vu6)(G,c=!e.length,c),()=>(0,C.vu6)(G,c=!0,c),function(g){C.Dnk[g?"unshift":"push"]((()=>{i=g,A(1,i)}))}]}class hg extends C.r7T{constructor(g){super(),(0,C.TsN)(this,g,Ng,Qg,C.jXN,{})}}var Ug=hg;(0,b.T5)(!1);function Yg(g){let I,A,e,l;return I=new rg({}),e=new Ug({}),{c(){(0,C.N0i)(I.$$.fragment),A=(0,C.xem)(),(0,C.N0i)(e.$$.fragment)},m(g,t){(0,C.wSR)(I,g,t),(0,C.Yry)(g,A,t),(0,C.wSR)(e,g,t),l=!0},p:C.lQ1,i(g){l||((0,C.c7F)(I.$$.fragment,g),(0,C.c7F)(e.$$.fragment,g),l=!0)},o(g){(0,C.Tn8)(I.$$.fragment,g),(0,C.Tn8)(e.$$.fragment,g),l=!1},d(g){g&&(0,C.YoD)(A),(0,C.Hbl)(I,g),(0,C.Hbl)(e,g)}}}function Rg(g,I,A){let t,c,{maxDepth:i}=I,{width:s}=I,{attributes:n}=I,{contextPath:d}=I,{vocabularyUrl:u}=I,{mode:a="browse"}=I,{rootPath:o=""}=I,{rootUrl:G=""}=I,{basePath:r=""}=I,{selectableTypes:Z=[]}=I,{maximumSelectionSize:m=-1}=I,{separator:X}=I,{selection:B=[]}=I,{query:x={}}=I,{fieldId:V}=I,{upload:p}=I,{favorites:y}=I,{recentlyUsed:W}=I,{recentlyUsedKey:F}=I,{recentlyUsedMaxItems:v}=I,{bSize:Q=20}=I,{componentRegistryKeys:N={}}=I;const h=e.A.getLogger("pat-contentbrowser");!function(){let g=(0,b.T5)("");(0,l.o)("currentPath",g)}(),function(){let g=(0,b.T5)({});(0,l.o)("config",g)}(),function(){let g=(0,b.T5)({});(0,l.o)("pathCache",g)}(),function(){let g=(0,b.T5)([]);(0,l.o)("selectedItems",g)}(),function(){let g=(0,b.T5)(!1);(0,l.o)("showContentBrowser",g)}(),function(){let g=(0,b.T5)([]);(0,l.o)("selectedUids",g)}(),function(){let g=(0,b.T5)([]);(0,l.o)("previewUids",g)}();const U=(0,l.SD)("currentPath");if((0,C.j0C)(g,U,(g=>A(25,c=g))),!c)if(r||o)(0,C.vu6)(U,c=0!=r.indexOf(o)?o:r,c);else{const g=new URL(u).pathname.split("/");o=d=(0,C.vu6)(U,c=g.slice(0,g.length-1).join("/")||"/",c)}let Y=(0,l.SD)("config");return(0,C.j0C)(g,Y,(g=>A(24,t=g))),(0,C.vu6)(Y,t={mode:a,attributes:n,contextPath:d,vocabularyUrl:u,width:s,maxDepth:i,rootPath:o,rootUrl:G,basePath:r,selectableTypes:Z,maximumSelectionSize:m,separator:X,selection:B,query:x,fieldId:V,uploadEnabled:p,favorites:y,recentlyUsed:W,recentlyUsedKey:F,recentlyUsedMaxItems:v,pageSize:Q,componentRegistryKeys:N},t),h.debug(`Initialized App<${V}> with config ${JSON.stringify(t)}`),g.$$set=g=>{"maxDepth"in g&&A(4,i=g.maxDepth),"width"in g&&A(5,s=g.width),"attributes"in g&&A(6,n=g.attributes),"contextPath"in g&&A(2,d=g.contextPath),"vocabularyUrl"in g&&A(7,u=g.vocabularyUrl),"mode"in g&&A(8,a=g.mode),"rootPath"in g&&A(3,o=g.rootPath),"rootUrl"in g&&A(9,G=g.rootUrl),"basePath"in g&&A(10,r=g.basePath),"selectableTypes"in g&&A(11,Z=g.selectableTypes),"maximumSelectionSize"in g&&A(12,m=g.maximumSelectionSize),"separator"in g&&A(13,X=g.separator),"selection"in g&&A(14,B=g.selection),"query"in g&&A(15,x=g.query),"fieldId"in g&&A(16,V=g.fieldId),"upload"in g&&A(17,p=g.upload),"favorites"in g&&A(18,y=g.favorites),"recentlyUsed"in g&&A(19,W=g.recentlyUsed),"recentlyUsedKey"in g&&A(20,F=g.recentlyUsedKey),"recentlyUsedMaxItems"in g&&A(21,v=g.recentlyUsedMaxItems),"bSize"in g&&A(22,Q=g.bSize),"componentRegistryKeys"in g&&A(23,N=g.componentRegistryKeys)},[U,Y,d,o,i,s,n,u,a,G,r,Z,m,X,B,x,V,p,y,W,F,v,Q,N]}class wg extends C.r7T{constructor(g){super(),(0,C.TsN)(this,g,Rg,Yg,C.jXN,{maxDepth:4,width:5,attributes:6,contextPath:2,vocabularyUrl:7,mode:8,rootPath:3,rootUrl:9,basePath:10,selectableTypes:11,maximumSelectionSize:12,separator:13,selection:14,query:15,fieldId:16,upload:17,favorites:18,recentlyUsed:19,recentlyUsedKey:20,recentlyUsedMaxItems:21,bSize:22,componentRegistryKeys:23})}}var Dg=wg}}]);
//# sourceMappingURL=85083.99fda36f38c6755814de.min.js.map