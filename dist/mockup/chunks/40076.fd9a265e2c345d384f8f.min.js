"use strict";(self.webpackChunk_plone_mockup=self.webpackChunk_plone_mockup||[]).push([[40076],{40076:function(e,t,n){n.r(t),n.d(t,{default:function(){return r}});var a=n(35686),s=n.n(a);class r{constructor(e){this.el=e}updatezebra(e){e.find("tr:visible:odd").removeClass("odd even").addClass("odd"),e.find("tr:visible:even").removeClass("odd even").addClass("even")}initStatusMessageArea(){if(document.getElementById("portalMessagesWrapper"))return;let e=document.createElement("div");e.id="portalMessagesWrapper",document.getElementById("content").insertAdjacentElement("afterbegin",e)}addStatusMessage(e,t){void 0===t&&(t="info");let n=document.createElement("dl"),a=document.createElement("dt"),s=document.createElement("dd");n.classList.add("alert","alert-"+t),a.innerText=t,s.innerText=e,n.appendChild(a),n.appendChild(s);let r=document.getElementById("portalMessagesWrapper");r&&(r.innerHTML="",r.appendChild(n))}init(){let e=this;e.initStatusMessageArea(),s()(".btn-rule-action").off("click").on("click",function(t){t.preventDefault();var n=s()(this),a=this,r=n.parents("tr").first(),l=r.parent(),d=n.data("value"),i=n.data("url");s().ajax({type:"POST",url:i,data:{"rule-id":d,_authenticator:s()('input[name="_authenticator"]').val()},beforeSend:function(){s()("#spinner").show()},error:function(){e.addStatusMessage(s()("#trns_form_error").html(),"warn")},success:function(){let t="";t=r.find(".rule-title")[0].innerText,n.hasClass("btn-rule-enable")&&(r.removeClass("state-disabled").addClass("state-enabled"),a.parentNode.querySelector(".btn-rule-enable").classList.add("d-none"),a.parentNode.querySelector(".btn-rule-disable").classList.remove("d-none"),e.addStatusMessage(s()("#trns_form_success_enabled").html()+": "+t,"info")),n.hasClass("btn-rule-disable")&&(r.removeClass("state-enabled").addClass("state-disabled"),a.parentNode.querySelector(".btn-rule-disable").classList.add("d-none"),a.parentNode.querySelector(".btn-rule-enable").classList.remove("d-none"),e.addStatusMessage(s()("#trns_form_success_disabled").html()+": "+t,"info")),n.hasClass("btn-rule-delete")&&(r.remove(),e.updatezebra(l),e.addStatusMessage(s()("#trns_form_success_deleted").html()+": "+t,"info"))},complete:function(){s()("#spinner").hide()}})}),s()(".filter-option input").off("change").on("change",function(){var t=s()("#rules_table_form table"),n=s()(".state-filters input:checked"),a=s()(".type-filters input:checked");t.find("tr").show(),n.length>0&&s()(".state-filters input:not(:checked)").each(function(){t.find("."+this.id).hide()}),a.length>0&&s()(".type-filters input:not(:checked)").each(function(){t.find("."+this.id).hide()}),e.updatezebra(t)}),s()("#rules_disable_globally").on("change",function(){var t=s()("#fieldset-global form"),n="";s()("#rules_disable_globally")[0].checked&&(n="True"),s().ajax({type:"POST",url:t.attr("action"),data:{"global_disable:boolean":n,_authenticator:s()('input[name="_authenticator"]').val()},beforeSend:function(){s()("#spinner").show()},error:function(){e.addStatusMessage(s()("#trns_form_error").html(),"warn")},success:function(){e.addStatusMessage(s()("#trns_form_success").html(),"info")},complete:function(){s()("#spinner").hide()}})})}}}}]);
//# sourceMappingURL=40076.fd9a265e2c345d384f8f.min.js.map