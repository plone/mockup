{"version":3,"file":"chunks/90095.801028a0e8cb469b67fa.min.js","mappings":"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","sources":["webpack://@plone/mockup/./node_modules/tinymce/plugins/link/plugin.js"],"sourcesContent":["/**\n * TinyMCE version 8.3.1 (2025-12-17)\n */\n\n(function () {\n    'use strict';\n\n    var global$5 = tinymce.util.Tools.resolve('tinymce.PluginManager');\n\n    /* eslint-disable @typescript-eslint/no-wrapper-object-types */\n    const hasProto = (v, constructor, predicate) => {\n        if (predicate(v, constructor.prototype)) {\n            return true;\n        }\n        else {\n            // String-based fallback time\n            return v.constructor?.name === constructor.name;\n        }\n    };\n    const typeOf = (x) => {\n        const t = typeof x;\n        if (x === null) {\n            return 'null';\n        }\n        else if (t === 'object' && Array.isArray(x)) {\n            return 'array';\n        }\n        else if (t === 'object' && hasProto(x, String, (o, proto) => proto.isPrototypeOf(o))) {\n            return 'string';\n        }\n        else {\n            return t;\n        }\n    };\n    const isType = (type) => (value) => typeOf(value) === type;\n    const isSimpleType = (type) => (value) => typeof value === type;\n    const eq = (t) => (a) => t === a;\n    const isString = isType('string');\n    const isObject = isType('object');\n    const isArray = isType('array');\n    const isNull = eq(null);\n    const isBoolean = isSimpleType('boolean');\n    const isNullable = (a) => a === null || a === undefined;\n    const isNonNullable = (a) => !isNullable(a);\n    const isFunction = isSimpleType('function');\n    const isArrayOf = (value, pred) => {\n        if (isArray(value)) {\n            for (let i = 0, len = value.length; i < len; ++i) {\n                if (!(pred(value[i]))) {\n                    return false;\n                }\n            }\n            return true;\n        }\n        return false;\n    };\n\n    const noop = () => { };\n    const constant = (value) => {\n        return () => {\n            return value;\n        };\n    };\n    const identity = (x) => {\n        return x;\n    };\n    const tripleEquals = (a, b) => {\n        return a === b;\n    };\n\n    /**\n     * The `Optional` type represents a value (of any type) that potentially does\n     * not exist. Any `Optional<T>` can either be a `Some<T>` (in which case the\n     * value does exist) or a `None` (in which case the value does not exist). This\n     * module defines a whole lot of FP-inspired utility functions for dealing with\n     * `Optional` objects.\n     *\n     * Comparison with null or undefined:\n     * - We don't get fancy null coalescing operators with `Optional`\n     * - We do get fancy helper functions with `Optional`\n     * - `Optional` support nesting, and allow for the type to still be nullable (or\n     * another `Optional`)\n     * - There is no option to turn off strict-optional-checks like there is for\n     * strict-null-checks\n     */\n    class Optional {\n        tag;\n        value;\n        // Sneaky optimisation: every instance of Optional.none is identical, so just\n        // reuse the same object\n        static singletonNone = new Optional(false);\n        // The internal representation has a `tag` and a `value`, but both are\n        // private: able to be console.logged, but not able to be accessed by code\n        constructor(tag, value) {\n            this.tag = tag;\n            this.value = value;\n        }\n        // --- Identities ---\n        /**\n         * Creates a new `Optional<T>` that **does** contain a value.\n         */\n        static some(value) {\n            return new Optional(true, value);\n        }\n        /**\n         * Create a new `Optional<T>` that **does not** contain a value. `T` can be\n         * any type because we don't actually have a `T`.\n         */\n        static none() {\n            return Optional.singletonNone;\n        }\n        /**\n         * Perform a transform on an `Optional` type. Regardless of whether this\n         * `Optional` contains a value or not, `fold` will return a value of type `U`.\n         * If this `Optional` does not contain a value, the `U` will be created by\n         * calling `onNone`. If this `Optional` does contain a value, the `U` will be\n         * created by calling `onSome`.\n         *\n         * For the FP enthusiasts in the room, this function:\n         * 1. Could be used to implement all of the functions below\n         * 2. Forms a catamorphism\n         */\n        fold(onNone, onSome) {\n            if (this.tag) {\n                return onSome(this.value);\n            }\n            else {\n                return onNone();\n            }\n        }\n        /**\n         * Determine if this `Optional` object contains a value.\n         */\n        isSome() {\n            return this.tag;\n        }\n        /**\n         * Determine if this `Optional` object **does not** contain a value.\n         */\n        isNone() {\n            return !this.tag;\n        }\n        // --- Functor (name stolen from Haskell / maths) ---\n        /**\n         * Perform a transform on an `Optional` object, **if** there is a value. If\n         * you provide a function to turn a T into a U, this is the function you use\n         * to turn an `Optional<T>` into an `Optional<U>`. If this **does** contain\n         * a value then the output will also contain a value (that value being the\n         * output of `mapper(this.value)`), and if this **does not** contain a value\n         * then neither will the output.\n         */\n        map(mapper) {\n            if (this.tag) {\n                return Optional.some(mapper(this.value));\n            }\n            else {\n                return Optional.none();\n            }\n        }\n        // --- Monad (name stolen from Haskell / maths) ---\n        /**\n         * Perform a transform on an `Optional` object, **if** there is a value.\n         * Unlike `map`, here the transform itself also returns an `Optional`.\n         */\n        bind(binder) {\n            if (this.tag) {\n                return binder(this.value);\n            }\n            else {\n                return Optional.none();\n            }\n        }\n        // --- Traversable (name stolen from Haskell / maths) ---\n        /**\n         * For a given predicate, this function finds out if there **exists** a value\n         * inside this `Optional` object that meets the predicate. In practice, this\n         * means that for `Optional`s that do not contain a value it returns false (as\n         * no predicate-meeting value exists).\n         */\n        exists(predicate) {\n            return this.tag && predicate(this.value);\n        }\n        /**\n         * For a given predicate, this function finds out if **all** the values inside\n         * this `Optional` object meet the predicate. In practice, this means that\n         * for `Optional`s that do not contain a value it returns true (as all 0\n         * objects do meet the predicate).\n         */\n        forall(predicate) {\n            return !this.tag || predicate(this.value);\n        }\n        filter(predicate) {\n            if (!this.tag || predicate(this.value)) {\n                return this;\n            }\n            else {\n                return Optional.none();\n            }\n        }\n        // --- Getters ---\n        /**\n         * Get the value out of the inside of the `Optional` object, using a default\n         * `replacement` value if the provided `Optional` object does not contain a\n         * value.\n         */\n        getOr(replacement) {\n            return this.tag ? this.value : replacement;\n        }\n        /**\n         * Get the value out of the inside of the `Optional` object, using a default\n         * `replacement` value if the provided `Optional` object does not contain a\n         * value.  Unlike `getOr`, in this method the `replacement` object is also\n         * `Optional` - meaning that this method will always return an `Optional`.\n         */\n        or(replacement) {\n            return this.tag ? this : replacement;\n        }\n        /**\n         * Get the value out of the inside of the `Optional` object, using a default\n         * `replacement` value if the provided `Optional` object does not contain a\n         * value. Unlike `getOr`, in this method the `replacement` value is\n         * \"thunked\" - that is to say that you don't pass a value to `getOrThunk`, you\n         * pass a function which (if called) will **return** the `value` you want to\n         * use.\n         */\n        getOrThunk(thunk) {\n            return this.tag ? this.value : thunk();\n        }\n        /**\n         * Get the value out of the inside of the `Optional` object, using a default\n         * `replacement` value if the provided Optional object does not contain a\n         * value.\n         *\n         * Unlike `or`, in this method the `replacement` value is \"thunked\" - that is\n         * to say that you don't pass a value to `orThunk`, you pass a function which\n         * (if called) will **return** the `value` you want to use.\n         *\n         * Unlike `getOrThunk`, in this method the `replacement` value is also\n         * `Optional`, meaning that this method will always return an `Optional`.\n         */\n        orThunk(thunk) {\n            return this.tag ? this : thunk();\n        }\n        /**\n         * Get the value out of the inside of the `Optional` object, throwing an\n         * exception if the provided `Optional` object does not contain a value.\n         *\n         * WARNING:\n         * You should only be using this function if you know that the `Optional`\n         * object **is not** empty (otherwise you're throwing exceptions in production\n         * code, which is bad).\n         *\n         * In tests this is more acceptable.\n         *\n         * Prefer other methods to this, such as `.each`.\n         */\n        getOrDie(message) {\n            if (!this.tag) {\n                throw new Error(message ?? 'Called getOrDie on None');\n            }\n            else {\n                return this.value;\n            }\n        }\n        // --- Interop with null and undefined ---\n        /**\n         * Creates an `Optional` value from a nullable (or undefined-able) input.\n         * Null, or undefined, is converted to `None`, and anything else is converted\n         * to `Some`.\n         */\n        static from(value) {\n            return isNonNullable(value) ? Optional.some(value) : Optional.none();\n        }\n        /**\n         * Converts an `Optional` to a nullable type, by getting the value if it\n         * exists, or returning `null` if it does not.\n         */\n        getOrNull() {\n            return this.tag ? this.value : null;\n        }\n        /**\n         * Converts an `Optional` to an undefined-able type, by getting the value if\n         * it exists, or returning `undefined` if it does not.\n         */\n        getOrUndefined() {\n            return this.value;\n        }\n        // --- Utilities ---\n        /**\n         * If the `Optional` contains a value, perform an action on that value.\n         * Unlike the rest of the methods on this type, `.each` has side-effects. If\n         * you want to transform an `Optional<T>` **into** something, then this is not\n         * the method for you. If you want to use an `Optional<T>` to **do**\n         * something, then this is the method for you - provided you're okay with not\n         * doing anything in the case where the `Optional` doesn't have a value inside\n         * it. If you're not sure whether your use-case fits into transforming\n         * **into** something or **doing** something, check whether it has a return\n         * value. If it does, you should be performing a transform.\n         */\n        each(worker) {\n            if (this.tag) {\n                worker(this.value);\n            }\n        }\n        /**\n         * Turn the `Optional` object into an array that contains all of the values\n         * stored inside the `Optional`. In practice, this means the output will have\n         * either 0 or 1 elements.\n         */\n        toArray() {\n            return this.tag ? [this.value] : [];\n        }\n        /**\n         * Turn the `Optional` object into a string for debugging or printing. Not\n         * recommended for production code, but good for debugging. Also note that\n         * these days an `Optional` object can be logged to the console directly, and\n         * its inner value (if it exists) will be visible.\n         */\n        toString() {\n            return this.tag ? `some(${this.value})` : 'none()';\n        }\n    }\n\n    const nativeSlice = Array.prototype.slice;\n    const nativeIndexOf = Array.prototype.indexOf;\n    const nativePush = Array.prototype.push;\n    const rawIndexOf = (ts, t) => nativeIndexOf.call(ts, t);\n    const contains = (xs, x) => rawIndexOf(xs, x) > -1;\n    const map = (xs, f) => {\n        // pre-allocating array size when it's guaranteed to be known\n        // http://jsperf.com/push-allocated-vs-dynamic/22\n        const len = xs.length;\n        const r = new Array(len);\n        for (let i = 0; i < len; i++) {\n            const x = xs[i];\n            r[i] = f(x, i);\n        }\n        return r;\n    };\n    // Unwound implementing other functions in terms of each.\n    // The code size is roughly the same, and it should allow for better optimisation.\n    // const each = function<T, U>(xs: T[], f: (x: T, i?: number, xs?: T[]) => void): void {\n    const each$1 = (xs, f) => {\n        for (let i = 0, len = xs.length; i < len; i++) {\n            const x = xs[i];\n            f(x, i);\n        }\n    };\n    const foldl = (xs, f, acc) => {\n        each$1(xs, (x, i) => {\n            acc = f(acc, x, i);\n        });\n        return acc;\n    };\n    const flatten = (xs) => {\n        // Note, this is possible because push supports multiple arguments:\n        // http://jsperf.com/concat-push/6\n        // Note that in the past, concat() would silently work (very slowly) for array-like objects.\n        // With this change it will throw an error.\n        const r = [];\n        for (let i = 0, len = xs.length; i < len; ++i) {\n            // Ensure that each value is an array itself\n            if (!isArray(xs[i])) {\n                throw new Error('Arr.flatten item ' + i + ' was not an array, input: ' + xs);\n            }\n            nativePush.apply(r, xs[i]);\n        }\n        return r;\n    };\n    const bind = (xs, f) => flatten(map(xs, f));\n    const get = (xs, i) => i >= 0 && i < xs.length ? Optional.some(xs[i]) : Optional.none();\n    const head = (xs) => get(xs, 0);\n    isFunction(Array.from) ? Array.from : (x) => nativeSlice.call(x);\n    const findMap = (arr, f) => {\n        for (let i = 0; i < arr.length; i++) {\n            const r = f(arr[i], i);\n            if (r.isSome()) {\n                return r;\n            }\n        }\n        return Optional.none();\n    };\n\n    // There are many variations of Object iteration that are faster than the 'for-in' style:\n    // http://jsperf.com/object-keys-iteration/107\n    //\n    // Use the native keys if it is available (IE9+), otherwise fall back to manually filtering\n    const keys = Object.keys;\n    const hasOwnProperty = Object.hasOwnProperty;\n    const each = (obj, f) => {\n        const props = keys(obj);\n        for (let k = 0, len = props.length; k < len; k++) {\n            const i = props[k];\n            const x = obj[i];\n            f(x, i);\n        }\n    };\n    const objAcc = (r) => (x, i) => {\n        r[i] = x;\n    };\n    const internalFilter = (obj, pred, onTrue, onFalse) => {\n        each(obj, (x, i) => {\n            (pred(x, i) ? onTrue : onFalse)(x, i);\n        });\n    };\n    const filter = (obj, pred) => {\n        const t = {};\n        internalFilter(obj, pred, objAcc(t), noop);\n        return t;\n    };\n    const has = (obj, key) => hasOwnProperty.call(obj, key);\n    const hasNonNullableKey = (obj, key) => has(obj, key) && obj[key] !== undefined && obj[key] !== null;\n\n    const Cell = (initial) => {\n        let value = initial;\n        const get = () => {\n            return value;\n        };\n        const set = (v) => {\n            value = v;\n        };\n        return {\n            get,\n            set\n        };\n    };\n\n    /**\n     * **Is** the value stored inside this Optional object equal to `rhs`?\n     */\n    const is = (lhs, rhs, comparator = tripleEquals) => lhs.exists((left) => comparator(left, rhs));\n    const cat = (arr) => {\n        const r = [];\n        const push = (x) => {\n            r.push(x);\n        };\n        for (let i = 0; i < arr.length; i++) {\n            arr[i].each(push);\n        }\n        return r;\n    };\n    // This can help with type inference, by specifying the type param on the none case, so the caller doesn't have to.\n    const someIf = (b, a) => b ? Optional.some(a) : Optional.none();\n\n    const singleton = (doRevoke) => {\n        const subject = Cell(Optional.none());\n        const revoke = () => subject.get().each(doRevoke);\n        const clear = () => {\n            revoke();\n            subject.set(Optional.none());\n        };\n        const isSet = () => subject.get().isSome();\n        const get = () => subject.get();\n        const set = (s) => {\n            revoke();\n            subject.set(Optional.some(s));\n        };\n        return {\n            clear,\n            isSet,\n            get,\n            set\n        };\n    };\n    const value = () => {\n        const subject = singleton(noop);\n        const on = (f) => subject.get().each(f);\n        return {\n            ...subject,\n            on\n        };\n    };\n\n    const removeFromStart = (str, numChars) => {\n        return str.substring(numChars);\n    };\n\n    const checkRange = (str, substr, start) => substr === '' || str.length >= substr.length && str.substr(start, start + substr.length) === substr;\n    const removeLeading = (str, prefix) => {\n        return startsWith(str, prefix) ? removeFromStart(str, prefix.length) : str;\n    };\n    /** Does 'str' start with 'prefix'?\n     *  Note: all strings start with the empty string.\n     *        More formally, for all strings x, startsWith(x, \"\").\n     *        This is so that for all strings x and y, startsWith(y + x, y)\n     */\n    const startsWith = (str, prefix) => {\n        return checkRange(str, prefix, 0);\n    };\n\n    const option = (name) => (editor) => editor.options.get(name);\n    const register$1 = (editor) => {\n        const registerOption = editor.options.register;\n        registerOption('link_assume_external_targets', {\n            processor: (value) => {\n                const valid = isString(value) || isBoolean(value);\n                if (valid) {\n                    if (value === true) {\n                        return { value: 1 /* AssumeExternalTargets.WARN */, valid };\n                    }\n                    else if (value === \"http\" /* AssumeExternalTargets.ALWAYS_HTTP */ || value === \"https\" /* AssumeExternalTargets.ALWAYS_HTTPS */) {\n                        return { value, valid };\n                    }\n                    else {\n                        return { value: 0 /* AssumeExternalTargets.OFF */, valid };\n                    }\n                }\n                else {\n                    return { valid: false, message: 'Must be a string or a boolean.' };\n                }\n            },\n            default: false\n        });\n        registerOption('link_context_toolbar', {\n            processor: 'boolean',\n            default: false\n        });\n        registerOption('link_list', {\n            processor: (value) => isString(value) || isFunction(value) || isArrayOf(value, isObject)\n        });\n        registerOption('link_default_target', {\n            processor: 'string'\n        });\n        registerOption('link_default_protocol', {\n            processor: 'string',\n            default: 'https'\n        });\n        registerOption('link_target_list', {\n            processor: (value) => isBoolean(value) || isArrayOf(value, isObject),\n            default: true\n        });\n        registerOption('link_rel_list', {\n            processor: 'object[]',\n            default: []\n        });\n        registerOption('link_class_list', {\n            processor: 'object[]',\n            default: []\n        });\n        registerOption('link_title', {\n            processor: 'boolean',\n            default: true\n        });\n        registerOption('allow_unsafe_link_target', {\n            processor: 'boolean',\n            default: false\n        });\n        registerOption('link_quicklink', {\n            processor: 'boolean',\n            default: false\n        });\n        registerOption('link_attributes_postprocess', {\n            processor: 'function',\n        });\n        registerOption('files_upload_handler', {\n            processor: 'function'\n        });\n        registerOption('link_uploadtab', {\n            processor: 'boolean',\n            default: true\n        });\n    };\n    const assumeExternalTargets = option('link_assume_external_targets');\n    const hasContextToolbar = option('link_context_toolbar');\n    const getLinkList = option('link_list');\n    const getDefaultLinkTarget = option('link_default_target');\n    const getDefaultLinkProtocol = option('link_default_protocol');\n    const getTargetList = option('link_target_list');\n    const getRelList = option('link_rel_list');\n    const getLinkClassList = option('link_class_list');\n    const shouldShowLinkTitle = option('link_title');\n    const allowUnsafeLinkTarget = option('allow_unsafe_link_target');\n    const useQuickLink = option('link_quicklink');\n    const attributesPostProcess = option('link_attributes_postprocess');\n    const getFilesUploadHandler = option('files_upload_handler');\n    const hasLinkUploadtab = option('link_uploadtab');\n    const getDocumentsFileTypes = option('documents_file_types');\n    const hasFilesUploadHandler = (editor) => isNonNullable(editor.options.get('files_upload_handler'));\n    const hasDocumentsFileTypes = (editor) => isNonNullable(editor.options.get('documents_file_types'));\n\n    var global$4 = tinymce.util.Tools.resolve('tinymce.util.URI');\n\n    var global$3 = tinymce.util.Tools.resolve('tinymce.dom.TreeWalker');\n\n    var global$2 = tinymce.util.Tools.resolve('tinymce.util.Tools');\n\n    const isAnchor = (elm) => isNonNullable(elm) && elm.nodeName.toLowerCase() === 'a';\n    const isLink = (elm) => isAnchor(elm) && !!getHref(elm);\n    const collectNodesInRange = (rng, predicate) => {\n        if (rng.collapsed) {\n            return [];\n        }\n        else {\n            const contents = rng.cloneContents();\n            const firstChild = contents.firstChild;\n            const walker = new global$3(firstChild, contents);\n            const elements = [];\n            let current = firstChild;\n            do {\n                if (predicate(current)) {\n                    elements.push(current);\n                }\n            } while ((current = walker.next()));\n            return elements;\n        }\n    };\n    const hasProtocol = (url) => /^\\w+:/i.test(url);\n    const getHref = (elm) => {\n        // Returns the real href value not the resolved a.href value\n        return elm.getAttribute('data-mce-href') ?? elm.getAttribute('href') ?? '';\n    };\n    const applyRelTargetRules = (rel, isUnsafe) => {\n        const rules = ['noopener'];\n        const rels = rel ? rel.split(/\\s+/) : [];\n        const toString = (rels) => global$2.trim(rels.sort().join(' '));\n        const addTargetRules = (rels) => {\n            rels = removeTargetRules(rels);\n            return rels.length > 0 ? rels.concat(rules) : rules;\n        };\n        const removeTargetRules = (rels) => rels.filter((val) => global$2.inArray(rules, val) === -1);\n        const newRels = isUnsafe ? addTargetRules(rels) : removeTargetRules(rels);\n        return newRels.length > 0 ? toString(newRels) : '';\n    };\n    const trimCaretContainers = (text) => text.replace(/\\uFEFF/g, '');\n    const getAnchorElement = (editor, selectedElm) => {\n        selectedElm = selectedElm || getLinksInSelection(editor.selection.getRng())[0] || editor.selection.getNode();\n        if (isImageFigure(selectedElm)) {\n            // for an image contained in a figure we look for a link inside the selected element\n            return Optional.from(editor.dom.select('a[href]', selectedElm)[0]);\n        }\n        else {\n            return Optional.from(editor.dom.getParent(selectedElm, 'a[href]'));\n        }\n    };\n    const isInAnchor = (editor, selectedElm) => getAnchorElement(editor, selectedElm).isSome();\n    const getAnchorText = (selection, anchorElm) => {\n        const text = anchorElm.fold(() => selection.getContent({ format: 'text' }), (anchorElm) => anchorElm.innerText || anchorElm.textContent || '');\n        return trimCaretContainers(text);\n    };\n    const getLinksInSelection = (rng) => collectNodesInRange(rng, isLink);\n    const getLinks$1 = (elements) => global$2.grep(elements, isLink);\n    const hasLinks = (elements) => getLinks$1(elements).length > 0;\n    const hasLinksInSelection = (rng) => getLinksInSelection(rng).length > 0;\n    const isOnlyTextSelected = (editor) => {\n        // Allow anchor and inline text elements to be in the selection but nothing else\n        const inlineTextElements = editor.schema.getTextInlineElements();\n        const isElement = (elm) => elm.nodeType === 1 && !isAnchor(elm) && !has(inlineTextElements, elm.nodeName.toLowerCase());\n        // If selection is inside a block anchor then always treat it as non text only\n        const isInBlockAnchor = getAnchorElement(editor).exists((anchor) => anchor.hasAttribute('data-mce-block'));\n        if (isInBlockAnchor) {\n            return false;\n        }\n        const rng = editor.selection.getRng();\n        if (!rng.collapsed) {\n            // Collect all non inline text elements in the range and make sure no elements were found\n            const elements = collectNodesInRange(rng, isElement);\n            return elements.length === 0;\n        }\n        else {\n            return true;\n        }\n    };\n    const isImageFigure = (elm) => isNonNullable(elm) && elm.nodeName === 'FIGURE' && /\\bimage\\b/i.test(elm.className);\n    const blobToDataUri = (blob) => new Promise((resolve, reject) => {\n        const reader = new FileReader();\n        reader.onload = () => {\n            resolve(reader.result);\n        };\n        reader.onerror = () => {\n            reject(new Error(reader.error?.message ?? 'Failed to convert blob to a data url'));\n        };\n        reader.readAsDataURL(blob);\n    });\n\n    const getLinkAttrs = (data) => {\n        const attrs = ['title', 'rel', 'class', 'target'];\n        return foldl(attrs, (acc, key) => {\n            data[key].each((value) => {\n                // If dealing with an empty string, then treat that as being null so the attribute is removed\n                acc[key] = value.length > 0 ? value : null;\n            });\n            return acc;\n        }, {\n            href: data.href\n        });\n    };\n    const handleExternalTargets = (href, assumeExternalTargets) => {\n        if ((assumeExternalTargets === \"http\" /* AssumeExternalTargets.ALWAYS_HTTP */\n            || assumeExternalTargets === \"https\" /* AssumeExternalTargets.ALWAYS_HTTPS */)\n            && !hasProtocol(href)) {\n            return assumeExternalTargets + '://' + href;\n        }\n        return href;\n    };\n    const applyLinkOverrides = (editor, linkAttrs) => {\n        const newLinkAttrs = { ...linkAttrs };\n        if (getRelList(editor).length === 0 && !allowUnsafeLinkTarget(editor)) {\n            const newRel = applyRelTargetRules(newLinkAttrs.rel, newLinkAttrs.target === '_blank');\n            newLinkAttrs.rel = newRel ? newRel : null;\n        }\n        if (Optional.from(newLinkAttrs.target).isNone() && getTargetList(editor) === false) {\n            newLinkAttrs.target = getDefaultLinkTarget(editor);\n        }\n        newLinkAttrs.href = handleExternalTargets(newLinkAttrs.href, assumeExternalTargets(editor));\n        return newLinkAttrs;\n    };\n    const updateLink = (editor, anchorElm, text, linkAttrs) => {\n        // If we have text, then update the anchor elements text content\n        text.each((text) => {\n            if (has(anchorElm, 'innerText')) {\n                anchorElm.innerText = text;\n            }\n            else {\n                anchorElm.textContent = text;\n            }\n        });\n        editor.dom.setAttribs(anchorElm, linkAttrs);\n        // Move the cursor behind the updated link, so the user can go on typing.\n        const rng = editor.dom.createRng();\n        rng.setStartAfter(anchorElm);\n        rng.setEndAfter(anchorElm);\n        editor.selection.setRng(rng);\n    };\n    const createLink = (editor, selectedElm, text, linkAttrs) => {\n        const dom = editor.dom;\n        if (isImageFigure(selectedElm)) {\n            linkImageFigure(dom, selectedElm, linkAttrs);\n        }\n        else {\n            text.fold(() => {\n                editor.execCommand('mceInsertLink', false, linkAttrs);\n                // Now the newly inserted link is selected. Move the cursor behind the new link, so the user can go on typing.\n                const end = editor.selection.getEnd();\n                const rng = dom.createRng();\n                rng.setStartAfter(end);\n                rng.setEndAfter(end);\n                editor.selection.setRng(rng);\n            }, (text) => {\n                editor.insertContent(dom.createHTML('a', linkAttrs, dom.encode(text)));\n            });\n        }\n    };\n    const linkDomMutation = (editor, attachState, data) => {\n        const selectedElm = editor.selection.getNode();\n        const anchorElm = getAnchorElement(editor, selectedElm);\n        const linkAttrs = applyLinkOverrides(editor, getLinkAttrs(data));\n        const attributesPostProcess$1 = attributesPostProcess(editor);\n        if (isNonNullable(attributesPostProcess$1)) {\n            attributesPostProcess$1(linkAttrs);\n        }\n        editor.undoManager.transact(() => {\n            if (data.href === attachState.href) {\n                attachState.attach();\n            }\n            anchorElm.fold(() => {\n                createLink(editor, selectedElm, data.text, linkAttrs);\n            }, (elm) => {\n                editor.focus();\n                updateLink(editor, elm, data.text, linkAttrs);\n            });\n        });\n    };\n    const unlinkSelection = (editor) => {\n        const dom = editor.dom, selection = editor.selection;\n        const bookmark = selection.getBookmark();\n        const rng = selection.getRng().cloneRange();\n        // Extend the selection out to the entire anchor element\n        const startAnchorElm = dom.getParent(rng.startContainer, 'a[href]', editor.getBody());\n        const endAnchorElm = dom.getParent(rng.endContainer, 'a[href]', editor.getBody());\n        if (startAnchorElm) {\n            rng.setStartBefore(startAnchorElm);\n        }\n        if (endAnchorElm) {\n            rng.setEndAfter(endAnchorElm);\n        }\n        selection.setRng(rng);\n        // Remove the link\n        editor.execCommand('unlink');\n        selection.moveToBookmark(bookmark);\n    };\n    const unlinkDomMutation = (editor) => {\n        editor.undoManager.transact(() => {\n            const node = editor.selection.getNode();\n            if (isImageFigure(node)) {\n                unlinkImageFigure(editor, node);\n            }\n            else {\n                unlinkSelection(editor);\n            }\n            editor.focus();\n        });\n    };\n    /*\n     * RTC uses unwrapped options.\n     *\n     * To best simulate this, we unwrap to null and filter out empty values.\n     */\n    const unwrapOptions = (data) => {\n        const { class: cls, href, rel, target, text, title } = data;\n        return filter({\n            class: cls.getOrNull(),\n            href,\n            rel: rel.getOrNull(),\n            target: target.getOrNull(),\n            text: text.getOrNull(),\n            title: title.getOrNull()\n        }, (v, _k) => isNull(v) === false);\n    };\n    const sanitizeData = (editor, data) => {\n        const getOption = editor.options.get;\n        const uriOptions = {\n            allow_html_data_urls: getOption('allow_html_data_urls'),\n            allow_script_urls: getOption('allow_script_urls'),\n            allow_svg_data_urls: getOption('allow_svg_data_urls')\n        };\n        // Sanitize the URL\n        const href = data.href;\n        return {\n            ...data,\n            href: global$4.isDomSafe(href, 'a', uriOptions) ? href : ''\n        };\n    };\n    const link = (editor, attachState, data) => {\n        const sanitizedData = sanitizeData(editor, data);\n        editor.hasPlugin('rtc', true) ? editor.execCommand('createlink', false, unwrapOptions(sanitizedData)) : linkDomMutation(editor, attachState, sanitizedData);\n    };\n    const unlink = (editor) => {\n        editor.hasPlugin('rtc', true) ? editor.execCommand('unlink') : unlinkDomMutation(editor);\n    };\n    const unlinkImageFigure = (editor, fig) => {\n        const img = editor.dom.select('img', fig)[0];\n        if (img) {\n            const a = editor.dom.getParents(img, 'a[href]', fig)[0];\n            if (a) {\n                a.parentNode?.insertBefore(img, a);\n                editor.dom.remove(a);\n            }\n        }\n    };\n    const linkImageFigure = (dom, fig, attrs) => {\n        const img = dom.select('img', fig)[0];\n        if (img) {\n            const a = dom.create('a', attrs);\n            img.parentNode?.insertBefore(a, img);\n            a.appendChild(img);\n        }\n    };\n\n    const getValue = (item) => isString(item.value) ? item.value : '';\n    const getText = (item) => {\n        if (isString(item.text)) {\n            return item.text;\n        }\n        else if (isString(item.title)) {\n            return item.title;\n        }\n        else {\n            return '';\n        }\n    };\n    const sanitizeList = (list, extractValue) => {\n        const out = [];\n        global$2.each(list, (item) => {\n            const text = getText(item);\n            if (item.menu !== undefined) {\n                const items = sanitizeList(item.menu, extractValue);\n                out.push({ text, items }); // list group\n            }\n            else {\n                const value = extractValue(item);\n                out.push({ text, value }); // list value\n            }\n        });\n        return out;\n    };\n    const sanitizeWith = (extracter = getValue) => (list) => Optional.from(list).map((list) => sanitizeList(list, extracter));\n    const sanitize = (list) => sanitizeWith(getValue)(list);\n    // NOTE: May need to care about flattening.\n    const createUi = (name, label) => (items) => ({\n        name,\n        type: 'listbox',\n        label,\n        items\n    });\n    const ListOptions = {\n        sanitize,\n        sanitizeWith,\n        createUi,\n        getValue\n    };\n\n    const isListGroup = (item) => hasNonNullableKey(item, 'items');\n    const findTextByValue = (value, catalog) => findMap(catalog, (item) => {\n        if (isListGroup(item)) {\n            return findTextByValue(value, item.items);\n        }\n        else {\n            return someIf(item.value === value, item);\n        }\n    });\n    const getDelta = (persistentText, fieldName, catalog, data) => {\n        const value = data[fieldName];\n        const hasPersistentText = persistentText.length > 0;\n        return value !== undefined ? findTextByValue(value, catalog).map((i) => ({\n            url: {\n                value: i.value,\n                meta: {\n                    text: hasPersistentText ? persistentText : i.text,\n                    attach: noop\n                }\n            },\n            text: hasPersistentText ? persistentText : i.text\n        })) : Optional.none();\n    };\n    const findCatalog = (catalogs, fieldName) => {\n        if (fieldName === 'link') {\n            return catalogs.link;\n        }\n        else if (fieldName === 'anchor') {\n            return catalogs.anchor;\n        }\n        else {\n            return Optional.none();\n        }\n    };\n    const init = (initialData, linkCatalog) => {\n        const persistentData = {\n            text: initialData.text,\n            title: initialData.title\n        };\n        const getTitleFromUrlChange = (url) => someIf(persistentData.title.length <= 0, Optional.from(url.meta?.title).getOr(''));\n        const getTextFromUrlChange = (url) => someIf(persistentData.text.length <= 0, Optional.from(url.meta?.text).getOr(url.value));\n        const onUrlChange = (data) => {\n            const text = getTextFromUrlChange(data.url);\n            const title = getTitleFromUrlChange(data.url);\n            // We are going to change the text/title because it has not been manually entered by the user.\n            if (text.isSome() || title.isSome()) {\n                return Optional.some({\n                    ...text.map((text) => ({ text })).getOr({}),\n                    ...title.map((title) => ({ title })).getOr({})\n                });\n            }\n            else {\n                return Optional.none();\n            }\n        };\n        const onCatalogChange = (data, change) => {\n            const catalog = findCatalog(linkCatalog, change).getOr([]);\n            return getDelta(persistentData.text, change, catalog, data);\n        };\n        const onChange = (getData, change) => {\n            const name = change.name;\n            if (name === 'url') {\n                return onUrlChange(getData());\n            }\n            else if (contains(['anchor', 'link'], name)) {\n                return onCatalogChange(getData(), name);\n            }\n            else if (name === 'text' || name === 'title') {\n                // Update the persistent text/title state, as a user has input custom text\n                persistentData[name] = getData()[name];\n                return Optional.none();\n            }\n            else {\n                return Optional.none();\n            }\n        };\n        return {\n            onChange\n        };\n    };\n    const DialogChanges = {\n        init,\n        getDelta\n    };\n\n    var global$1 = tinymce.util.Tools.resolve('tinymce.util.Delay');\n\n    // Delay confirm since onSubmit will move focus\n    const delayedConfirm = (editor, message, callback) => {\n        const rng = editor.selection.getRng();\n        global$1.setEditorTimeout(editor, () => {\n            editor.windowManager.confirm(message, (state) => {\n                editor.selection.setRng(rng);\n                callback(state);\n            });\n        });\n    };\n    const tryEmailTransform = (data) => {\n        const url = data.href;\n        const suggestMailTo = url.indexOf('@') > 0 && url.indexOf('/') === -1 && url.indexOf('mailto:') === -1;\n        return suggestMailTo ? Optional.some({\n            message: 'The URL you entered seems to be an email address. Do you want to add the required mailto: prefix?',\n            preprocess: (oldData) => ({ ...oldData, href: 'mailto:' + url })\n        }) : Optional.none();\n    };\n    const tryProtocolTransform = (assumeExternalTargets, defaultLinkProtocol) => (data) => {\n        const url = data.href;\n        const suggestProtocol = (assumeExternalTargets === 1 /* AssumeExternalTargets.WARN */ && !hasProtocol(url) ||\n            assumeExternalTargets === 0 /* AssumeExternalTargets.OFF */ && /^\\s*www(\\.|\\d\\.)/i.test(url));\n        return suggestProtocol ? Optional.some({\n            message: `The URL you entered seems to be an external link. Do you want to add the required ${defaultLinkProtocol}:// prefix?`,\n            preprocess: (oldData) => ({ ...oldData, href: defaultLinkProtocol + '://' + url })\n        }) : Optional.none();\n    };\n    const preprocess = (editor, data) => findMap([tryEmailTransform, tryProtocolTransform(assumeExternalTargets(editor), getDefaultLinkProtocol(editor))], (f) => f(data)).fold(() => Promise.resolve(data), (transform) => new Promise((callback) => {\n        delayedConfirm(editor, transform.message, (state) => {\n            callback(state ? transform.preprocess(data) : data);\n        });\n    }));\n    const DialogConfirms = {\n        preprocess\n    };\n\n    // NOTE: you currently need anchors in the content for this field to appear\n    const getAnchors = (editor) => {\n        const anchorNodes = editor.dom.select('a:not([href])');\n        const anchors = bind(anchorNodes, (anchor) => {\n            const id = anchor.name || anchor.id;\n            return id ? [{ text: id, value: '#' + id }] : [];\n        });\n        return anchors.length > 0 ? Optional.some([{ text: 'None', value: '' }].concat(anchors)) : Optional.none();\n    };\n    const AnchorListOptions = {\n        getAnchors\n    };\n\n    // Looks like tinymce currently renders menus, but doesn't\n    // let you choose from one.\n    const getClasses = (editor) => {\n        const list = getLinkClassList(editor);\n        if (list.length > 0) {\n            return ListOptions.sanitize(list);\n        }\n        return Optional.none();\n    };\n    const ClassListOptions = {\n        getClasses\n    };\n\n    const parseJson = (text) => {\n        // Do some proper modelling.\n        try {\n            return Optional.some(JSON.parse(text));\n        }\n        catch {\n            return Optional.none();\n        }\n    };\n    const getLinks = (editor) => {\n        const extractor = (item) => editor.convertURL(item.value || item.url || '', 'href');\n        const linkList = getLinkList(editor);\n        return new Promise((resolve) => {\n            // TODO - better handling of failure\n            if (isString(linkList)) {\n                fetch(linkList)\n                    .then((res) => res.ok ? res.text().then(parseJson) : Promise.reject())\n                    .then(resolve, () => resolve(Optional.none()));\n            }\n            else if (isFunction(linkList)) {\n                linkList((output) => resolve(Optional.some(output)));\n            }\n            else {\n                resolve(Optional.from(linkList));\n            }\n        }).then((optItems) => optItems.bind(ListOptions.sanitizeWith(extractor)).map((items) => {\n            if (items.length > 0) {\n                const noneItem = [{ text: 'None', value: '' }];\n                return noneItem.concat(items);\n            }\n            else {\n                return items;\n            }\n        }));\n    };\n    const LinkListOptions = {\n        getLinks\n    };\n\n    const getRels = (editor, initialTarget) => {\n        const list = getRelList(editor);\n        if (list.length > 0) {\n            const isTargetBlank = is(initialTarget, '_blank');\n            const enforceSafe = allowUnsafeLinkTarget(editor) === false;\n            const safeRelExtractor = (item) => applyRelTargetRules(ListOptions.getValue(item), isTargetBlank);\n            const sanitizer = enforceSafe ? ListOptions.sanitizeWith(safeRelExtractor) : ListOptions.sanitize;\n            return sanitizer(list);\n        }\n        return Optional.none();\n    };\n    const RelOptions = {\n        getRels\n    };\n\n    // In current tinymce, targets can be nested menus.\n    // Do we really want to support that?\n    const fallbacks = [\n        { text: 'Current window', value: '' },\n        { text: 'New window', value: '_blank' }\n    ];\n    const getTargets = (editor) => {\n        const list = getTargetList(editor);\n        if (isArray(list)) {\n            return ListOptions.sanitize(list).orThunk(() => Optional.some(fallbacks));\n        }\n        else if (list === false) {\n            return Optional.none();\n        }\n        return Optional.some(fallbacks);\n    };\n    const TargetOptions = {\n        getTargets\n    };\n\n    const nonEmptyAttr = (dom, elem, name) => {\n        const val = dom.getAttrib(elem, name);\n        return val !== null && val.length > 0 ? Optional.some(val) : Optional.none();\n    };\n    const extractFromAnchor = (editor, anchor) => {\n        const dom = editor.dom;\n        const onlyText = isOnlyTextSelected(editor);\n        const text = onlyText ? Optional.some(getAnchorText(editor.selection, anchor)) : Optional.none();\n        const url = anchor.bind((anchorElm) => Optional.from(dom.getAttrib(anchorElm, 'href')));\n        const target = anchor.bind((anchorElm) => Optional.from(dom.getAttrib(anchorElm, 'target')));\n        const rel = anchor.bind((anchorElm) => nonEmptyAttr(dom, anchorElm, 'rel'));\n        const linkClass = anchor.bind((anchorElm) => nonEmptyAttr(dom, anchorElm, 'class'));\n        const title = anchor.bind((anchorElm) => nonEmptyAttr(dom, anchorElm, 'title'));\n        return {\n            url,\n            text,\n            title,\n            target,\n            rel,\n            linkClass\n        };\n    };\n    const collect = (editor, linkNode) => LinkListOptions.getLinks(editor).then((links) => {\n        const hasUploadPanel = hasFilesUploadHandler(editor) && hasDocumentsFileTypes(editor) && hasLinkUploadtab(editor);\n        const anchor = extractFromAnchor(editor, linkNode);\n        return {\n            anchor,\n            catalogs: {\n                targets: TargetOptions.getTargets(editor),\n                // This should be initial target. Is anchor.target that?\n                rels: RelOptions.getRels(editor, anchor.target),\n                classes: ClassListOptions.getClasses(editor),\n                anchor: AnchorListOptions.getAnchors(editor),\n                link: links\n            },\n            hasUploadPanel,\n            optNode: linkNode,\n            flags: {\n                titleEnabled: shouldShowLinkTitle(editor)\n            }\n        };\n    });\n    const DialogInfo = {\n        collect\n    };\n\n    const makeTab = (fileTypes) => {\n        const items = [\n            {\n                type: 'dropzone',\n                name: 'fileinput',\n                buttonLabel: 'Browse for a file',\n                dropAreaLabel: 'Drop a file here',\n                allowedFileTypes: fileTypes.map((e) => e.mimeType).join(','),\n                allowedFileExtensions: flatten(fileTypes.map((e) => e.extensions)),\n            }\n        ];\n        return {\n            title: 'Upload',\n            name: 'upload',\n            items\n        };\n    };\n    const UploadTab = {\n        makeTab\n    };\n\n    const handleSubmit = (editor, info) => (api) => {\n        const data = api.getData();\n        if (!data.url.value) {\n            unlink(editor);\n            // Temporary fix. TODO: TINY-2811\n            api.close();\n            return;\n        }\n        // Check if a key is defined, meaning it was a field in the dialog. If it is,\n        // then check if it's changed and return none if nothing has changed.\n        const getChangedValue = (key) => Optional.from(data[key]).filter((value) => !is(info.anchor[key], value));\n        const changedData = {\n            href: data.url.value,\n            text: getChangedValue('text'),\n            target: getChangedValue('target'),\n            rel: getChangedValue('rel'),\n            class: getChangedValue('linkClass'),\n            title: getChangedValue('title')\n        };\n        const attachState = {\n            href: data.url.value,\n            attach: data.url.meta !== undefined && data.url.meta.attach ? data.url.meta.attach : noop\n        };\n        // eslint-disable-next-line @typescript-eslint/no-floating-promises\n        DialogConfirms.preprocess(editor, changedData).then((pData) => {\n            link(editor, attachState, pData);\n        });\n        api.close();\n    };\n    const uploadFile = (editor) => (blobInfo, progress) => {\n        const fileUploadHandler = getFilesUploadHandler(editor);\n        return fileUploadHandler(blobInfo, progress);\n    };\n    const dataUrlToBase64 = (dataUrl) => Optional.from(dataUrl.split(',')[1]).getOr('');\n    const changeFileInput = (helpers, api) => {\n        const data = api.getData();\n        api.block('Uploading file');\n        head(data.fileinput)\n            .fold(() => {\n            api.unblock();\n        }, (file) => {\n            const blobUri = URL.createObjectURL(file);\n            const updateUrlAndSwitchTab = ({ url, fileName }) => {\n                api.setData({ text: fileName, title: fileName, url: { value: url, meta: {} } });\n                api.showTab('general');\n                api.focus('url');\n            };\n            const finalize = () => {\n                api.unblock();\n                URL.revokeObjectURL(blobUri);\n            };\n            blobToDataUri(file).then((dataUrl) => {\n                const existingBlobInfo = helpers.getExistingBlobInfo(dataUrlToBase64(dataUrl), file.type);\n                const blobInfo = existingBlobInfo && existingBlobInfo.filename() === file.name ? existingBlobInfo : helpers.createBlobCache(file, blobUri, dataUrl);\n                helpers.addToBlobCache(blobInfo);\n                return helpers.uploadFile(blobInfo, identity);\n            }).then((result) => {\n                updateUrlAndSwitchTab(result);\n                finalize();\n            }).catch((err) => {\n                finalize();\n                helpers.alertErr(err, () => {\n                    api.focus('fileinput');\n                });\n            });\n        });\n    };\n    const createBlobCache = (editor) => (file, blobUri, dataUrl) => editor.editorUpload.blobCache.create({\n        blob: file,\n        blobUri,\n        name: file.name?.replace(/\\.[^\\.]+$/, ''),\n        filename: file.name,\n        base64: dataUrl.split(',')[1]\n    });\n    const addToBlobCache = (editor) => (blobInfo) => {\n        editor.editorUpload.blobCache.add(blobInfo);\n    };\n    const getExistingBlobInfo = (editor) => (base64, type) => {\n        return editor.editorUpload.blobCache.getByData(base64, type);\n    };\n    const alertErr = (editor) => (message, callback) => {\n        editor.windowManager.alert(message, callback);\n    };\n    const collectData = (editor) => {\n        const anchorNode = getAnchorElement(editor);\n        return DialogInfo.collect(editor, anchorNode);\n    };\n    const getInitialData = (info, defaultTarget) => {\n        const anchor = info.anchor;\n        const url = anchor.url.getOr('');\n        return {\n            url: {\n                value: url,\n                meta: {\n                    original: {\n                        value: url\n                    }\n                }\n            },\n            text: anchor.text.getOr(''),\n            title: anchor.title.getOr(''),\n            anchor: url,\n            link: url,\n            rel: anchor.rel.getOr(''),\n            target: anchor.target.or(defaultTarget).getOr(''),\n            linkClass: anchor.linkClass.getOr(''),\n            fileinput: []\n        };\n    };\n    const makeDialogBody = (urlInput, displayText, titleText, catalogs, hasUploadPanel, fileTypes) => {\n        const generalPanelItems = flatten([\n            urlInput,\n            displayText,\n            titleText,\n            cat([\n                catalogs.anchor.map(ListOptions.createUi('anchor', 'Anchors')),\n                catalogs.rels.map(ListOptions.createUi('rel', 'Rel')),\n                catalogs.targets.map(ListOptions.createUi('target', 'Open link in...')),\n                catalogs.link.map(ListOptions.createUi('link', 'Link list')),\n                catalogs.classes.map(ListOptions.createUi('linkClass', 'Class'))\n            ])\n        ]);\n        if (hasUploadPanel) {\n            const tabPanel = {\n                type: 'tabpanel',\n                tabs: flatten([\n                    [{\n                            title: 'General',\n                            name: 'general',\n                            items: generalPanelItems\n                        }],\n                    [UploadTab.makeTab(fileTypes)]\n                ])\n            };\n            return tabPanel;\n        }\n        else {\n            return {\n                type: 'panel',\n                items: generalPanelItems\n            };\n        }\n    };\n    const makeDialog = (settings, onSubmit, editor) => {\n        const urlInput = [\n            {\n                name: 'url',\n                type: 'urlinput',\n                filetype: 'file',\n                label: 'URL',\n                picker_text: 'Browse links'\n            }\n        ];\n        const displayText = settings.anchor.text.map(() => ({\n            name: 'text',\n            type: 'input',\n            label: 'Text to display'\n        })).toArray();\n        const titleText = settings.flags.titleEnabled ? [\n            {\n                name: 'title',\n                type: 'input',\n                label: 'Title'\n            }\n        ] : [];\n        const defaultTarget = Optional.from(getDefaultLinkTarget(editor));\n        const initialData = getInitialData(settings, defaultTarget);\n        const catalogs = settings.catalogs;\n        const dialogDelta = DialogChanges.init(initialData, catalogs);\n        const body = makeDialogBody(urlInput, displayText, titleText, catalogs, settings.hasUploadPanel, getDocumentsFileTypes(editor));\n        const helpers = {\n            addToBlobCache: addToBlobCache(editor),\n            createBlobCache: createBlobCache(editor),\n            alertErr: alertErr(editor),\n            uploadFile: uploadFile(editor),\n            getExistingBlobInfo: getExistingBlobInfo(editor)\n        };\n        return {\n            title: 'Insert/Edit Link',\n            size: 'normal',\n            body,\n            buttons: [\n                {\n                    type: 'cancel',\n                    name: 'cancel',\n                    text: 'Cancel'\n                },\n                {\n                    type: 'submit',\n                    name: 'save',\n                    text: 'Save',\n                    primary: true\n                }\n            ],\n            initialData,\n            onChange: (api, { name }) => {\n                if (name === 'fileinput') {\n                    changeFileInput(helpers, api);\n                }\n                else {\n                    dialogDelta.onChange(api.getData, { name }).each((newData) => {\n                        api.setData(newData);\n                    });\n                }\n            },\n            onSubmit\n        };\n    };\n    const open = (editor) => {\n        const data = collectData(editor);\n        // eslint-disable-next-line @typescript-eslint/no-floating-promises\n        data.then((info) => {\n            const onSubmit = handleSubmit(editor, info);\n            return makeDialog(info, onSubmit, editor);\n        }).then((spec) => {\n            editor.windowManager.open(spec);\n        });\n    };\n\n    const register = (editor) => {\n        editor.addCommand('mceLink', (_ui, value) => {\n            if (value?.dialog === true || !useQuickLink(editor)) {\n                open(editor);\n            }\n            else {\n                editor.dispatch('contexttoolbar-show', {\n                    toolbarKey: 'quicklink'\n                });\n            }\n        });\n    };\n\n    const setup$2 = (editor) => {\n        editor.addShortcut('Meta+K', '', () => {\n            editor.execCommand('mceLink');\n        });\n    };\n\n    var global = tinymce.util.Tools.resolve('tinymce.util.VK');\n\n    const appendClickRemove = (link, evt) => {\n        document.body.appendChild(link);\n        link.dispatchEvent(evt);\n        document.body.removeChild(link);\n    };\n    const openLink = (url) => {\n        const link = document.createElement('a');\n        link.target = '_blank';\n        link.href = url;\n        link.rel = 'noreferrer noopener';\n        const evt = new MouseEvent('click', {\n            bubbles: true,\n            cancelable: true,\n            view: window\n        });\n        document.dispatchEvent(evt);\n        appendClickRemove(link, evt);\n    };\n    const hasOnlyAltModifier = (e) => {\n        return e.altKey === true && e.shiftKey === false && e.ctrlKey === false && e.metaKey === false;\n    };\n    const gotoLink = (editor, a) => {\n        if (a) {\n            const href = getHref(a);\n            if (/^#/.test(href)) {\n                const targetEl = editor.dom.select(`${href},[name=\"${removeLeading(href, '#')}\"]`);\n                if (targetEl.length) {\n                    editor.selection.scrollIntoView(targetEl[0], true);\n                }\n            }\n            else {\n                openLink(a.href);\n            }\n        }\n    };\n    const isSelectionOnImageWithEmbeddedLink = (editor) => {\n        const rng = editor.selection.getRng();\n        const node = rng.startContainer;\n        // Handle a case where an image embedded with a link is selected\n        return isLink(node) && rng.startContainer === rng.endContainer && editor.dom.select('img', node).length === 1;\n    };\n    const getLinkFromElement = (editor, element) => {\n        const links = getLinks$1(editor.dom.getParents(element));\n        return someIf(links.length === 1, links[0]);\n    };\n    const getLinkInSelection = (editor) => {\n        const links = getLinksInSelection(editor.selection.getRng());\n        return someIf(links.length > 0, links[0]).or(getLinkFromElement(editor, editor.selection.getNode()));\n    };\n    const getLinkFromSelection = (editor) => editor.selection.isCollapsed() || isSelectionOnImageWithEmbeddedLink(editor)\n        ? getLinkFromElement(editor, editor.selection.getStart())\n        : getLinkInSelection(editor);\n    const setup$1 = (editor) => {\n        const selectedLink = value();\n        const getSelectedLink = () => selectedLink.get().or(getLinkFromSelection(editor));\n        const gotoSelectedLink = () => getSelectedLink().each((link) => gotoLink(editor, link));\n        editor.on('contextmenu', (e) => {\n            getLinkFromElement(editor, e.target).each(selectedLink.set);\n        });\n        editor.on('SelectionChange', () => {\n            if (!selectedLink.isSet()) {\n                getLinkFromSelection(editor).each(selectedLink.set);\n            }\n        });\n        editor.on('click', (e) => {\n            selectedLink.clear();\n            const links = getLinks$1(editor.dom.getParents(e.target));\n            if (links.length === 1 && global.metaKeyPressed(e)) {\n                e.preventDefault();\n                gotoLink(editor, links[0]);\n            }\n        });\n        editor.on('keydown', (e) => {\n            selectedLink.clear();\n            if (!e.isDefaultPrevented() && e.keyCode === 13 && hasOnlyAltModifier(e)) {\n                getSelectedLink().each((link) => {\n                    e.preventDefault();\n                    gotoLink(editor, link);\n                });\n            }\n        });\n        return {\n            gotoSelectedLink\n        };\n    };\n\n    const openDialog = (editor) => () => {\n        editor.execCommand('mceLink', false, { dialog: true });\n    };\n    const toggleState = (editor, toggler) => {\n        editor.on('NodeChange', toggler);\n        return () => editor.off('NodeChange', toggler);\n    };\n    const toggleLinkState = (editor) => (api) => {\n        const updateState = () => {\n            api.setActive(!editor.mode.isReadOnly() && isInAnchor(editor, editor.selection.getNode()));\n            api.setEnabled(editor.selection.isEditable());\n        };\n        updateState();\n        return toggleState(editor, updateState);\n    };\n    const toggleLinkMenuState = (editor) => (api) => {\n        const updateState = () => {\n            api.setEnabled(editor.selection.isEditable());\n        };\n        updateState();\n        return toggleState(editor, updateState);\n    };\n    const toggleRequiresLinkState = (editor) => (api) => {\n        const hasLinks$1 = (parents) => hasLinks(parents) || hasLinksInSelection(editor.selection.getRng());\n        const parents = editor.dom.getParents(editor.selection.getStart());\n        const updateEnabled = (parents) => {\n            api.setEnabled(hasLinks$1(parents) && editor.selection.isEditable());\n        };\n        updateEnabled(parents);\n        return toggleState(editor, (e) => updateEnabled(e.parents));\n    };\n    const setupButtons = (editor, openLink) => {\n        editor.ui.registry.addToggleButton('link', {\n            icon: 'link',\n            tooltip: 'Insert/edit link',\n            shortcut: 'Meta+K',\n            onAction: openDialog(editor),\n            onSetup: toggleLinkState(editor)\n        });\n        editor.ui.registry.addButton('openlink', {\n            icon: 'new-tab',\n            tooltip: 'Open link',\n            onAction: openLink.gotoSelectedLink,\n            onSetup: toggleRequiresLinkState(editor)\n        });\n        editor.ui.registry.addButton('unlink', {\n            icon: 'unlink',\n            tooltip: 'Remove link',\n            onAction: () => unlink(editor),\n            onSetup: toggleRequiresLinkState(editor)\n        });\n    };\n    const setupMenuItems = (editor, openLink) => {\n        editor.ui.registry.addMenuItem('openlink', {\n            text: 'Open link',\n            icon: 'new-tab',\n            onAction: openLink.gotoSelectedLink,\n            onSetup: toggleRequiresLinkState(editor)\n        });\n        editor.ui.registry.addMenuItem('link', {\n            icon: 'link',\n            text: 'Link...',\n            shortcut: 'Meta+K',\n            onAction: openDialog(editor),\n            onSetup: toggleLinkMenuState(editor)\n        });\n        editor.ui.registry.addMenuItem('unlink', {\n            icon: 'unlink',\n            text: 'Remove link',\n            onAction: () => unlink(editor),\n            onSetup: toggleRequiresLinkState(editor)\n        });\n    };\n    const setupContextMenu = (editor) => {\n        const inLink = 'link unlink openlink';\n        const noLink = 'link';\n        editor.ui.registry.addContextMenu('link', {\n            update: (element) => {\n                const isEditable = editor.dom.isEditable(element);\n                if (!isEditable) {\n                    return '';\n                }\n                return hasLinks(editor.dom.getParents(element, 'a')) ? inLink : noLink;\n            }\n        });\n    };\n    const setupContextToolbars = (editor, openLink) => {\n        const collapseSelectionToEnd = (editor) => {\n            editor.selection.collapse(false);\n        };\n        const onSetupLink = (buttonApi) => {\n            const node = editor.selection.getNode();\n            buttonApi.setEnabled(isInAnchor(editor, node) && editor.selection.isEditable());\n            return noop;\n        };\n        /**\n         * if we're editing a link, don't change the text.\n         * if anything other than text is selected, don't change the text.\n         * TINY-9593: If there is a text selection return `Optional.none`\n         * because `mceInsertLink` command will handle the selection.\n         */\n        const getLinkText = (value) => {\n            const anchor = getAnchorElement(editor);\n            const onlyText = isOnlyTextSelected(editor);\n            if (anchor.isNone() && onlyText) {\n                const text = getAnchorText(editor.selection, anchor);\n                return someIf(text.length === 0, value);\n            }\n            else {\n                return Optional.none();\n            }\n        };\n        editor.ui.registry.addContextForm('quicklink', {\n            launch: {\n                type: 'contextformtogglebutton',\n                icon: 'link',\n                tooltip: 'Link',\n                onSetup: toggleLinkState(editor)\n            },\n            label: 'Link',\n            predicate: (node) => hasContextToolbar(editor) && isInAnchor(editor, node),\n            initValue: () => {\n                const elm = getAnchorElement(editor);\n                return elm.fold(constant(''), getHref);\n            },\n            commands: [\n                {\n                    type: 'contextformtogglebutton',\n                    icon: 'link',\n                    tooltip: 'Link',\n                    primary: true,\n                    onSetup: (buttonApi) => {\n                        const node = editor.selection.getNode();\n                        // TODO: Make a test for this later.\n                        buttonApi.setActive(isInAnchor(editor, node));\n                        return toggleLinkState(editor)(buttonApi);\n                    },\n                    onAction: (formApi) => {\n                        const value = formApi.getValue();\n                        const text = getLinkText(value);\n                        const attachState = { href: value, attach: noop };\n                        link(editor, attachState, {\n                            href: value,\n                            text,\n                            title: Optional.none(),\n                            rel: Optional.none(),\n                            target: Optional.from(getDefaultLinkTarget(editor)),\n                            class: Optional.none()\n                        });\n                        collapseSelectionToEnd(editor);\n                        formApi.hide();\n                    }\n                },\n                {\n                    type: 'contextformbutton',\n                    icon: 'unlink',\n                    tooltip: 'Remove link',\n                    onSetup: onSetupLink,\n                    // TODO: The original inlite action was quite complex. Are we missing something with this?\n                    onAction: (formApi) => {\n                        unlink(editor);\n                        formApi.hide();\n                    }\n                },\n                {\n                    type: 'contextformbutton',\n                    icon: 'new-tab',\n                    tooltip: 'Open link',\n                    onSetup: onSetupLink,\n                    onAction: (formApi) => {\n                        openLink.gotoSelectedLink();\n                        formApi.hide();\n                    }\n                }\n            ]\n        });\n    };\n    const setup = (editor) => {\n        const openLink = setup$1(editor);\n        setupButtons(editor, openLink);\n        setupMenuItems(editor, openLink);\n        setupContextMenu(editor);\n        setupContextToolbars(editor, openLink);\n    };\n\n    var Plugin = () => {\n        global$5.add('link', (editor) => {\n            register$1(editor);\n            register(editor);\n            setup(editor);\n            setup$2(editor);\n        });\n    };\n\n    Plugin();\n    /** *****\n     * DO NOT EXPORT ANYTHING\n     *\n     * IF YOU DO ROLLUP WILL LEAVE A GLOBAL ON THE PAGE\n     *******/\n\n})();\n"],"names":["global$5","tinymce","util","Tools","resolve","isType","type","value","x","t","Array","isArray","o","v","proto","constructor","String","prototype","isPrototypeOf","name","typeOf","isSimpleType","isString","isObject","isNull","a","isBoolean","isNonNullable","isNullable","isFunction","isArrayOf","pred","i","len","length","noop","identity","tripleEquals","b","Optional","tag","static","this","some","none","singletonNone","fold","onNone","onSome","isSome","isNone","map","mapper","bind","binder","exists","predicate","forall","filter","getOr","replacement","or","getOrThunk","thunk","orThunk","getOrDie","message","Error","from","getOrNull","getOrUndefined","each","worker","toArray","toString","slice","nativeIndexOf","indexOf","nativePush","push","contains","xs","ts","call","rawIndexOf","flatten","r","apply","f","head","get","findMap","arr","keys","Object","hasOwnProperty","internalFilter","obj","onTrue","onFalse","props","k","has","key","is","lhs","rhs","comparator","left","cat","someIf","subject","doRevoke","initial","set","Cell","revoke","clear","isSet","s","singleton","on","startsWith","str","prefix","substr","start","checkRange","option","editor","options","assumeExternalTargets","hasContextToolbar","getLinkList","getDefaultLinkTarget","getDefaultLinkProtocol","getTargetList","getRelList","getLinkClassList","shouldShowLinkTitle","allowUnsafeLinkTarget","useQuickLink","attributesPostProcess","getFilesUploadHandler","hasLinkUploadtab","getDocumentsFileTypes","global$4","global$3","global$2","isAnchor","elm","nodeName","toLowerCase","isLink","getHref","collectNodesInRange","rng","collapsed","contents","cloneContents","firstChild","walker","elements","current","next","hasProtocol","url","test","getAttribute","applyRelTargetRules","rel","isUnsafe","rules","rels","split","removeTargetRules","val","inArray","newRels","concat","addTargetRules","trim","sort","join","getAnchorElement","selectedElm","getLinksInSelection","selection","getRng","getNode","isImageFigure","dom","select","getParent","isInAnchor","getAnchorText","anchorElm","text","replace","trimCaretContainers","getContent","format","innerText","textContent","getLinks$1","grep","hasLinks","isOnlyTextSelected","inlineTextElements","schema","getTextInlineElements","isElement","nodeType","anchor","hasAttribute","className","applyLinkOverrides","linkAttrs","newLinkAttrs","newRel","target","href","handleExternalTargets","linkDomMutation","attachState","data","acc","each$1","getLinkAttrs","attributesPostProcess$1","undoManager","transact","attach","linkImageFigure","execCommand","end","getEnd","createRng","setStartAfter","setEndAfter","setRng","insertContent","createHTML","encode","createLink","focus","setAttribs","updateLink","unwrapOptions","class","cls","title","_k","link","sanitizedData","getOption","uriOptions","allow_html_data_urls","allow_script_urls","allow_svg_data_urls","isDomSafe","sanitizeData","hasPlugin","unlink","node","unlinkImageFigure","bookmark","getBookmark","cloneRange","startAnchorElm","startContainer","getBody","endAnchorElm","endContainer","setStartBefore","moveToBookmark","unlinkSelection","unlinkDomMutation","fig","img","getParents","parentNode","insertBefore","remove","attrs","create","appendChild","getValue","item","sanitizeList","list","extractValue","out","getText","undefined","menu","items","sanitizeWith","extracter","ListOptions","sanitize","createUi","label","isListGroup","hasNonNullableKey","findTextByValue","catalog","getDelta","persistentText","fieldName","hasPersistentText","meta","DialogChanges","initialData","linkCatalog","persistentData","onUrlChange","getTitleFromUrlChange","onCatalogChange","change","catalogs","onChange","getData","global$1","tryEmailTransform","preprocess","oldData","tryProtocolTransform","defaultLinkProtocol","DialogConfirms","Promise","transform","callback","setEditorTimeout","windowManager","confirm","state","delayedConfirm","AnchorListOptions","anchorNodes","anchors","id","ClassListOptions","parseJson","JSON","parse","LinkListOptions","extractor","convertURL","linkList","fetch","then","res","ok","reject","output","optItems","RelOptions","initialTarget","isTargetBlank","safeRelExtractor","fallbacks","TargetOptions","nonEmptyAttr","elem","getAttrib","DialogInfo","linkNode","links","hasUploadPanel","hasFilesUploadHandler","hasDocumentsFileTypes","linkClass","extractFromAnchor","targets","classes","optNode","flags","titleEnabled","UploadTab","fileTypes","buttonLabel","dropAreaLabel","allowedFileTypes","e","mimeType","allowedFileExtensions","extensions","uploadFile","blobInfo","progress","fileUploadHandler","changeFileInput","helpers","api","block","fileinput","unblock","file","blobUri","URL","createObjectURL","finalize","revokeObjectURL","blob","reader","FileReader","onload","result","onerror","error","readAsDataURL","dataUrl","existingBlobInfo","getExistingBlobInfo","dataUrlToBase64","filename","createBlobCache","addToBlobCache","fileName","setData","showTab","updateUrlAndSwitchTab","catch","err","alertErr","editorUpload","blobCache","base64","add","getByData","alert","makeDialog","settings","onSubmit","displayText","titleText","info","defaultTarget","original","getInitialData","dialogDelta","body","urlInput","generalPanelItems","tabs","makeDialogBody","filetype","picker_text","size","buttons","primary","newData","open","anchorNode","collectData","close","getChangedValue","changedData","pData","handleSubmit","spec","global","openLink","document","createElement","evt","MouseEvent","bubbles","cancelable","view","window","dispatchEvent","removeChild","appendClickRemove","gotoLink","targetEl","numChars","substring","removeFromStart","scrollIntoView","getLinkFromElement","element","getLinkFromSelection","isCollapsed","isSelectionOnImageWithEmbeddedLink","getStart","getLinkInSelection","openDialog","dialog","toggleState","toggler","off","toggleLinkState","updateState","setActive","mode","isReadOnly","setEnabled","isEditable","toggleLinkMenuState","toggleRequiresLinkState","hasLinks$1","parents","updateEnabled","setupContextToolbars","onSetupLink","buttonApi","ui","registry","addContextForm","launch","icon","tooltip","onSetup","initValue","constant","commands","onAction","formApi","onlyText","getLinkText","collapse","collapseSelectionToEnd","hide","gotoSelectedLink","setup","selectedLink","getSelectedLink","metaKeyPressed","preventDefault","isDefaultPrevented","keyCode","altKey","shiftKey","ctrlKey","metaKey","hasOnlyAltModifier","setup$1","addToggleButton","shortcut","addButton","setupButtons","addMenuItem","setupMenuItems","addContextMenu","update","setupContextMenu","registerOption","register","processor","valid","default","register$1","addCommand","_ui","dispatch","toolbarKey","addShortcut","setup$2"],"sourceRoot":""}