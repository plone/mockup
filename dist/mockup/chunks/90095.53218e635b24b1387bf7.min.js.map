{"version":3,"file":"chunks/90095.53218e635b24b1387bf7.min.js","mappings":"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","sources":["webpack://@plone/mockup/./node_modules/tinymce/plugins/link/plugin.js"],"sourcesContent":["/**\n * TinyMCE version 7.7.0 (TBD)\n */\n\n(function () {\n    'use strict';\n\n    var global$5 = tinymce.util.Tools.resolve('tinymce.PluginManager');\n\n    const hasProto = (v, constructor, predicate) => {\n      var _a;\n      if (predicate(v, constructor.prototype)) {\n        return true;\n      } else {\n        return ((_a = v.constructor) === null || _a === void 0 ? void 0 : _a.name) === constructor.name;\n      }\n    };\n    const typeOf = x => {\n      const t = typeof x;\n      if (x === null) {\n        return 'null';\n      } else if (t === 'object' && Array.isArray(x)) {\n        return 'array';\n      } else if (t === 'object' && hasProto(x, String, (o, proto) => proto.isPrototypeOf(o))) {\n        return 'string';\n      } else {\n        return t;\n      }\n    };\n    const isType = type => value => typeOf(value) === type;\n    const isSimpleType = type => value => typeof value === type;\n    const eq = t => a => t === a;\n    const isString = isType('string');\n    const isObject = isType('object');\n    const isArray = isType('array');\n    const isNull = eq(null);\n    const isBoolean = isSimpleType('boolean');\n    const isNullable = a => a === null || a === undefined;\n    const isNonNullable = a => !isNullable(a);\n    const isFunction = isSimpleType('function');\n    const isArrayOf = (value, pred) => {\n      if (isArray(value)) {\n        for (let i = 0, len = value.length; i < len; ++i) {\n          if (!pred(value[i])) {\n            return false;\n          }\n        }\n        return true;\n      }\n      return false;\n    };\n\n    const noop = () => {\n    };\n    const constant = value => {\n      return () => {\n        return value;\n      };\n    };\n    const tripleEquals = (a, b) => {\n      return a === b;\n    };\n\n    class Optional {\n      constructor(tag, value) {\n        this.tag = tag;\n        this.value = value;\n      }\n      static some(value) {\n        return new Optional(true, value);\n      }\n      static none() {\n        return Optional.singletonNone;\n      }\n      fold(onNone, onSome) {\n        if (this.tag) {\n          return onSome(this.value);\n        } else {\n          return onNone();\n        }\n      }\n      isSome() {\n        return this.tag;\n      }\n      isNone() {\n        return !this.tag;\n      }\n      map(mapper) {\n        if (this.tag) {\n          return Optional.some(mapper(this.value));\n        } else {\n          return Optional.none();\n        }\n      }\n      bind(binder) {\n        if (this.tag) {\n          return binder(this.value);\n        } else {\n          return Optional.none();\n        }\n      }\n      exists(predicate) {\n        return this.tag && predicate(this.value);\n      }\n      forall(predicate) {\n        return !this.tag || predicate(this.value);\n      }\n      filter(predicate) {\n        if (!this.tag || predicate(this.value)) {\n          return this;\n        } else {\n          return Optional.none();\n        }\n      }\n      getOr(replacement) {\n        return this.tag ? this.value : replacement;\n      }\n      or(replacement) {\n        return this.tag ? this : replacement;\n      }\n      getOrThunk(thunk) {\n        return this.tag ? this.value : thunk();\n      }\n      orThunk(thunk) {\n        return this.tag ? this : thunk();\n      }\n      getOrDie(message) {\n        if (!this.tag) {\n          throw new Error(message !== null && message !== void 0 ? message : 'Called getOrDie on None');\n        } else {\n          return this.value;\n        }\n      }\n      static from(value) {\n        return isNonNullable(value) ? Optional.some(value) : Optional.none();\n      }\n      getOrNull() {\n        return this.tag ? this.value : null;\n      }\n      getOrUndefined() {\n        return this.value;\n      }\n      each(worker) {\n        if (this.tag) {\n          worker(this.value);\n        }\n      }\n      toArray() {\n        return this.tag ? [this.value] : [];\n      }\n      toString() {\n        return this.tag ? `some(${ this.value })` : 'none()';\n      }\n    }\n    Optional.singletonNone = new Optional(false);\n\n    const nativeIndexOf = Array.prototype.indexOf;\n    const nativePush = Array.prototype.push;\n    const rawIndexOf = (ts, t) => nativeIndexOf.call(ts, t);\n    const contains = (xs, x) => rawIndexOf(xs, x) > -1;\n    const map = (xs, f) => {\n      const len = xs.length;\n      const r = new Array(len);\n      for (let i = 0; i < len; i++) {\n        const x = xs[i];\n        r[i] = f(x, i);\n      }\n      return r;\n    };\n    const each$1 = (xs, f) => {\n      for (let i = 0, len = xs.length; i < len; i++) {\n        const x = xs[i];\n        f(x, i);\n      }\n    };\n    const foldl = (xs, f, acc) => {\n      each$1(xs, (x, i) => {\n        acc = f(acc, x, i);\n      });\n      return acc;\n    };\n    const flatten = xs => {\n      const r = [];\n      for (let i = 0, len = xs.length; i < len; ++i) {\n        if (!isArray(xs[i])) {\n          throw new Error('Arr.flatten item ' + i + ' was not an array, input: ' + xs);\n        }\n        nativePush.apply(r, xs[i]);\n      }\n      return r;\n    };\n    const bind = (xs, f) => flatten(map(xs, f));\n    const findMap = (arr, f) => {\n      for (let i = 0; i < arr.length; i++) {\n        const r = f(arr[i], i);\n        if (r.isSome()) {\n          return r;\n        }\n      }\n      return Optional.none();\n    };\n\n    const is = (lhs, rhs, comparator = tripleEquals) => lhs.exists(left => comparator(left, rhs));\n    const cat = arr => {\n      const r = [];\n      const push = x => {\n        r.push(x);\n      };\n      for (let i = 0; i < arr.length; i++) {\n        arr[i].each(push);\n      }\n      return r;\n    };\n    const someIf = (b, a) => b ? Optional.some(a) : Optional.none();\n\n    const option = name => editor => editor.options.get(name);\n    const register$1 = editor => {\n      const registerOption = editor.options.register;\n      registerOption('link_assume_external_targets', {\n        processor: value => {\n          const valid = isString(value) || isBoolean(value);\n          if (valid) {\n            if (value === true) {\n              return {\n                value: 1,\n                valid\n              };\n            } else if (value === 'http' || value === 'https') {\n              return {\n                value,\n                valid\n              };\n            } else {\n              return {\n                value: 0,\n                valid\n              };\n            }\n          } else {\n            return {\n              valid: false,\n              message: 'Must be a string or a boolean.'\n            };\n          }\n        },\n        default: false\n      });\n      registerOption('link_context_toolbar', {\n        processor: 'boolean',\n        default: false\n      });\n      registerOption('link_list', { processor: value => isString(value) || isFunction(value) || isArrayOf(value, isObject) });\n      registerOption('link_default_target', { processor: 'string' });\n      registerOption('link_default_protocol', {\n        processor: 'string',\n        default: 'https'\n      });\n      registerOption('link_target_list', {\n        processor: value => isBoolean(value) || isArrayOf(value, isObject),\n        default: true\n      });\n      registerOption('link_rel_list', {\n        processor: 'object[]',\n        default: []\n      });\n      registerOption('link_class_list', {\n        processor: 'object[]',\n        default: []\n      });\n      registerOption('link_title', {\n        processor: 'boolean',\n        default: true\n      });\n      registerOption('allow_unsafe_link_target', {\n        processor: 'boolean',\n        default: false\n      });\n      registerOption('link_quicklink', {\n        processor: 'boolean',\n        default: false\n      });\n      registerOption('link_attributes_postprocess', { processor: 'function' });\n    };\n    const assumeExternalTargets = option('link_assume_external_targets');\n    const hasContextToolbar = option('link_context_toolbar');\n    const getLinkList = option('link_list');\n    const getDefaultLinkTarget = option('link_default_target');\n    const getDefaultLinkProtocol = option('link_default_protocol');\n    const getTargetList = option('link_target_list');\n    const getRelList = option('link_rel_list');\n    const getLinkClassList = option('link_class_list');\n    const shouldShowLinkTitle = option('link_title');\n    const allowUnsafeLinkTarget = option('allow_unsafe_link_target');\n    const useQuickLink = option('link_quicklink');\n    const attributesPostProcess = option('link_attributes_postprocess');\n\n    const keys = Object.keys;\n    const hasOwnProperty = Object.hasOwnProperty;\n    const each = (obj, f) => {\n      const props = keys(obj);\n      for (let k = 0, len = props.length; k < len; k++) {\n        const i = props[k];\n        const x = obj[i];\n        f(x, i);\n      }\n    };\n    const objAcc = r => (x, i) => {\n      r[i] = x;\n    };\n    const internalFilter = (obj, pred, onTrue, onFalse) => {\n      each(obj, (x, i) => {\n        (pred(x, i) ? onTrue : onFalse)(x, i);\n      });\n    };\n    const filter = (obj, pred) => {\n      const t = {};\n      internalFilter(obj, pred, objAcc(t), noop);\n      return t;\n    };\n    const has = (obj, key) => hasOwnProperty.call(obj, key);\n    const hasNonNullableKey = (obj, key) => has(obj, key) && obj[key] !== undefined && obj[key] !== null;\n\n    var global$4 = tinymce.util.Tools.resolve('tinymce.util.URI');\n\n    var global$3 = tinymce.util.Tools.resolve('tinymce.dom.TreeWalker');\n\n    var global$2 = tinymce.util.Tools.resolve('tinymce.util.Tools');\n\n    const isAnchor = elm => isNonNullable(elm) && elm.nodeName.toLowerCase() === 'a';\n    const isLink = elm => isAnchor(elm) && !!getHref(elm);\n    const collectNodesInRange = (rng, predicate) => {\n      if (rng.collapsed) {\n        return [];\n      } else {\n        const contents = rng.cloneContents();\n        const firstChild = contents.firstChild;\n        const walker = new global$3(firstChild, contents);\n        const elements = [];\n        let current = firstChild;\n        do {\n          if (predicate(current)) {\n            elements.push(current);\n          }\n        } while (current = walker.next());\n        return elements;\n      }\n    };\n    const hasProtocol = url => /^\\w+:/i.test(url);\n    const getHref = elm => {\n      var _a, _b;\n      return (_b = (_a = elm.getAttribute('data-mce-href')) !== null && _a !== void 0 ? _a : elm.getAttribute('href')) !== null && _b !== void 0 ? _b : '';\n    };\n    const applyRelTargetRules = (rel, isUnsafe) => {\n      const rules = ['noopener'];\n      const rels = rel ? rel.split(/\\s+/) : [];\n      const toString = rels => global$2.trim(rels.sort().join(' '));\n      const addTargetRules = rels => {\n        rels = removeTargetRules(rels);\n        return rels.length > 0 ? rels.concat(rules) : rules;\n      };\n      const removeTargetRules = rels => rels.filter(val => global$2.inArray(rules, val) === -1);\n      const newRels = isUnsafe ? addTargetRules(rels) : removeTargetRules(rels);\n      return newRels.length > 0 ? toString(newRels) : '';\n    };\n    const trimCaretContainers = text => text.replace(/\\uFEFF/g, '');\n    const getAnchorElement = (editor, selectedElm) => {\n      selectedElm = selectedElm || getLinksInSelection(editor.selection.getRng())[0] || editor.selection.getNode();\n      if (isImageFigure(selectedElm)) {\n        return Optional.from(editor.dom.select('a[href]', selectedElm)[0]);\n      } else {\n        return Optional.from(editor.dom.getParent(selectedElm, 'a[href]'));\n      }\n    };\n    const isInAnchor = (editor, selectedElm) => getAnchorElement(editor, selectedElm).isSome();\n    const getAnchorText = (selection, anchorElm) => {\n      const text = anchorElm.fold(() => selection.getContent({ format: 'text' }), anchorElm => anchorElm.innerText || anchorElm.textContent || '');\n      return trimCaretContainers(text);\n    };\n    const getLinksInSelection = rng => collectNodesInRange(rng, isLink);\n    const getLinks$1 = elements => global$2.grep(elements, isLink);\n    const hasLinks = elements => getLinks$1(elements).length > 0;\n    const hasLinksInSelection = rng => getLinksInSelection(rng).length > 0;\n    const isOnlyTextSelected = editor => {\n      const inlineTextElements = editor.schema.getTextInlineElements();\n      const isElement = elm => elm.nodeType === 1 && !isAnchor(elm) && !has(inlineTextElements, elm.nodeName.toLowerCase());\n      const isInBlockAnchor = getAnchorElement(editor).exists(anchor => anchor.hasAttribute('data-mce-block'));\n      if (isInBlockAnchor) {\n        return false;\n      }\n      const rng = editor.selection.getRng();\n      if (!rng.collapsed) {\n        const elements = collectNodesInRange(rng, isElement);\n        return elements.length === 0;\n      } else {\n        return true;\n      }\n    };\n    const isImageFigure = elm => isNonNullable(elm) && elm.nodeName === 'FIGURE' && /\\bimage\\b/i.test(elm.className);\n\n    const getLinkAttrs = data => {\n      const attrs = [\n        'title',\n        'rel',\n        'class',\n        'target'\n      ];\n      return foldl(attrs, (acc, key) => {\n        data[key].each(value => {\n          acc[key] = value.length > 0 ? value : null;\n        });\n        return acc;\n      }, { href: data.href });\n    };\n    const handleExternalTargets = (href, assumeExternalTargets) => {\n      if ((assumeExternalTargets === 'http' || assumeExternalTargets === 'https') && !hasProtocol(href)) {\n        return assumeExternalTargets + '://' + href;\n      }\n      return href;\n    };\n    const applyLinkOverrides = (editor, linkAttrs) => {\n      const newLinkAttrs = { ...linkAttrs };\n      if (getRelList(editor).length === 0 && !allowUnsafeLinkTarget(editor)) {\n        const newRel = applyRelTargetRules(newLinkAttrs.rel, newLinkAttrs.target === '_blank');\n        newLinkAttrs.rel = newRel ? newRel : null;\n      }\n      if (Optional.from(newLinkAttrs.target).isNone() && getTargetList(editor) === false) {\n        newLinkAttrs.target = getDefaultLinkTarget(editor);\n      }\n      newLinkAttrs.href = handleExternalTargets(newLinkAttrs.href, assumeExternalTargets(editor));\n      return newLinkAttrs;\n    };\n    const updateLink = (editor, anchorElm, text, linkAttrs) => {\n      text.each(text => {\n        if (has(anchorElm, 'innerText')) {\n          anchorElm.innerText = text;\n        } else {\n          anchorElm.textContent = text;\n        }\n      });\n      editor.dom.setAttribs(anchorElm, linkAttrs);\n      const rng = editor.dom.createRng();\n      rng.setStartAfter(anchorElm);\n      rng.setEndAfter(anchorElm);\n      editor.selection.setRng(rng);\n    };\n    const createLink = (editor, selectedElm, text, linkAttrs) => {\n      const dom = editor.dom;\n      if (isImageFigure(selectedElm)) {\n        linkImageFigure(dom, selectedElm, linkAttrs);\n      } else {\n        text.fold(() => {\n          editor.execCommand('mceInsertLink', false, linkAttrs);\n          const end = editor.selection.getEnd();\n          const rng = dom.createRng();\n          rng.setStartAfter(end);\n          rng.setEndAfter(end);\n          editor.selection.setRng(rng);\n        }, text => {\n          editor.insertContent(dom.createHTML('a', linkAttrs, dom.encode(text)));\n        });\n      }\n    };\n    const linkDomMutation = (editor, attachState, data) => {\n      const selectedElm = editor.selection.getNode();\n      const anchorElm = getAnchorElement(editor, selectedElm);\n      const linkAttrs = applyLinkOverrides(editor, getLinkAttrs(data));\n      const attributesPostProcess$1 = attributesPostProcess(editor);\n      if (isNonNullable(attributesPostProcess$1)) {\n        attributesPostProcess$1(linkAttrs);\n      }\n      editor.undoManager.transact(() => {\n        if (data.href === attachState.href) {\n          attachState.attach();\n        }\n        anchorElm.fold(() => {\n          createLink(editor, selectedElm, data.text, linkAttrs);\n        }, elm => {\n          editor.focus();\n          updateLink(editor, elm, data.text, linkAttrs);\n        });\n      });\n    };\n    const unlinkSelection = editor => {\n      const dom = editor.dom, selection = editor.selection;\n      const bookmark = selection.getBookmark();\n      const rng = selection.getRng().cloneRange();\n      const startAnchorElm = dom.getParent(rng.startContainer, 'a[href]', editor.getBody());\n      const endAnchorElm = dom.getParent(rng.endContainer, 'a[href]', editor.getBody());\n      if (startAnchorElm) {\n        rng.setStartBefore(startAnchorElm);\n      }\n      if (endAnchorElm) {\n        rng.setEndAfter(endAnchorElm);\n      }\n      selection.setRng(rng);\n      editor.execCommand('unlink');\n      selection.moveToBookmark(bookmark);\n    };\n    const unlinkDomMutation = editor => {\n      editor.undoManager.transact(() => {\n        const node = editor.selection.getNode();\n        if (isImageFigure(node)) {\n          unlinkImageFigure(editor, node);\n        } else {\n          unlinkSelection(editor);\n        }\n        editor.focus();\n      });\n    };\n    const unwrapOptions = data => {\n      const {\n        class: cls,\n        href,\n        rel,\n        target,\n        text,\n        title\n      } = data;\n      return filter({\n        class: cls.getOrNull(),\n        href,\n        rel: rel.getOrNull(),\n        target: target.getOrNull(),\n        text: text.getOrNull(),\n        title: title.getOrNull()\n      }, (v, _k) => isNull(v) === false);\n    };\n    const sanitizeData = (editor, data) => {\n      const getOption = editor.options.get;\n      const uriOptions = {\n        allow_html_data_urls: getOption('allow_html_data_urls'),\n        allow_script_urls: getOption('allow_script_urls'),\n        allow_svg_data_urls: getOption('allow_svg_data_urls')\n      };\n      const href = data.href;\n      return {\n        ...data,\n        href: global$4.isDomSafe(href, 'a', uriOptions) ? href : ''\n      };\n    };\n    const link = (editor, attachState, data) => {\n      const sanitizedData = sanitizeData(editor, data);\n      editor.hasPlugin('rtc', true) ? editor.execCommand('createlink', false, unwrapOptions(sanitizedData)) : linkDomMutation(editor, attachState, sanitizedData);\n    };\n    const unlink = editor => {\n      editor.hasPlugin('rtc', true) ? editor.execCommand('unlink') : unlinkDomMutation(editor);\n    };\n    const unlinkImageFigure = (editor, fig) => {\n      var _a;\n      const img = editor.dom.select('img', fig)[0];\n      if (img) {\n        const a = editor.dom.getParents(img, 'a[href]', fig)[0];\n        if (a) {\n          (_a = a.parentNode) === null || _a === void 0 ? void 0 : _a.insertBefore(img, a);\n          editor.dom.remove(a);\n        }\n      }\n    };\n    const linkImageFigure = (dom, fig, attrs) => {\n      var _a;\n      const img = dom.select('img', fig)[0];\n      if (img) {\n        const a = dom.create('a', attrs);\n        (_a = img.parentNode) === null || _a === void 0 ? void 0 : _a.insertBefore(a, img);\n        a.appendChild(img);\n      }\n    };\n\n    const getValue = item => isString(item.value) ? item.value : '';\n    const getText = item => {\n      if (isString(item.text)) {\n        return item.text;\n      } else if (isString(item.title)) {\n        return item.title;\n      } else {\n        return '';\n      }\n    };\n    const sanitizeList = (list, extractValue) => {\n      const out = [];\n      global$2.each(list, item => {\n        const text = getText(item);\n        if (item.menu !== undefined) {\n          const items = sanitizeList(item.menu, extractValue);\n          out.push({\n            text,\n            items\n          });\n        } else {\n          const value = extractValue(item);\n          out.push({\n            text,\n            value\n          });\n        }\n      });\n      return out;\n    };\n    const sanitizeWith = (extracter = getValue) => list => Optional.from(list).map(list => sanitizeList(list, extracter));\n    const sanitize = list => sanitizeWith(getValue)(list);\n    const createUi = (name, label) => items => ({\n      name,\n      type: 'listbox',\n      label,\n      items\n    });\n    const ListOptions = {\n      sanitize,\n      sanitizeWith,\n      createUi,\n      getValue\n    };\n\n    const isListGroup = item => hasNonNullableKey(item, 'items');\n    const findTextByValue = (value, catalog) => findMap(catalog, item => {\n      if (isListGroup(item)) {\n        return findTextByValue(value, item.items);\n      } else {\n        return someIf(item.value === value, item);\n      }\n    });\n    const getDelta = (persistentText, fieldName, catalog, data) => {\n      const value = data[fieldName];\n      const hasPersistentText = persistentText.length > 0;\n      return value !== undefined ? findTextByValue(value, catalog).map(i => ({\n        url: {\n          value: i.value,\n          meta: {\n            text: hasPersistentText ? persistentText : i.text,\n            attach: noop\n          }\n        },\n        text: hasPersistentText ? persistentText : i.text\n      })) : Optional.none();\n    };\n    const findCatalog = (catalogs, fieldName) => {\n      if (fieldName === 'link') {\n        return catalogs.link;\n      } else if (fieldName === 'anchor') {\n        return catalogs.anchor;\n      } else {\n        return Optional.none();\n      }\n    };\n    const init = (initialData, linkCatalog) => {\n      const persistentData = {\n        text: initialData.text,\n        title: initialData.title\n      };\n      const getTitleFromUrlChange = url => {\n        var _a;\n        return someIf(persistentData.title.length <= 0, Optional.from((_a = url.meta) === null || _a === void 0 ? void 0 : _a.title).getOr(''));\n      };\n      const getTextFromUrlChange = url => {\n        var _a;\n        return someIf(persistentData.text.length <= 0, Optional.from((_a = url.meta) === null || _a === void 0 ? void 0 : _a.text).getOr(url.value));\n      };\n      const onUrlChange = data => {\n        const text = getTextFromUrlChange(data.url);\n        const title = getTitleFromUrlChange(data.url);\n        if (text.isSome() || title.isSome()) {\n          return Optional.some({\n            ...text.map(text => ({ text })).getOr({}),\n            ...title.map(title => ({ title })).getOr({})\n          });\n        } else {\n          return Optional.none();\n        }\n      };\n      const onCatalogChange = (data, change) => {\n        const catalog = findCatalog(linkCatalog, change).getOr([]);\n        return getDelta(persistentData.text, change, catalog, data);\n      };\n      const onChange = (getData, change) => {\n        const name = change.name;\n        if (name === 'url') {\n          return onUrlChange(getData());\n        } else if (contains([\n            'anchor',\n            'link'\n          ], name)) {\n          return onCatalogChange(getData(), name);\n        } else if (name === 'text' || name === 'title') {\n          persistentData[name] = getData()[name];\n          return Optional.none();\n        } else {\n          return Optional.none();\n        }\n      };\n      return { onChange };\n    };\n    const DialogChanges = {\n      init,\n      getDelta\n    };\n\n    var global$1 = tinymce.util.Tools.resolve('tinymce.util.Delay');\n\n    const delayedConfirm = (editor, message, callback) => {\n      const rng = editor.selection.getRng();\n      global$1.setEditorTimeout(editor, () => {\n        editor.windowManager.confirm(message, state => {\n          editor.selection.setRng(rng);\n          callback(state);\n        });\n      });\n    };\n    const tryEmailTransform = data => {\n      const url = data.href;\n      const suggestMailTo = url.indexOf('@') > 0 && url.indexOf('/') === -1 && url.indexOf('mailto:') === -1;\n      return suggestMailTo ? Optional.some({\n        message: 'The URL you entered seems to be an email address. Do you want to add the required mailto: prefix?',\n        preprocess: oldData => ({\n          ...oldData,\n          href: 'mailto:' + url\n        })\n      }) : Optional.none();\n    };\n    const tryProtocolTransform = (assumeExternalTargets, defaultLinkProtocol) => data => {\n      const url = data.href;\n      const suggestProtocol = assumeExternalTargets === 1 && !hasProtocol(url) || assumeExternalTargets === 0 && /^\\s*www(\\.|\\d\\.)/i.test(url);\n      return suggestProtocol ? Optional.some({\n        message: `The URL you entered seems to be an external link. Do you want to add the required ${ defaultLinkProtocol }:// prefix?`,\n        preprocess: oldData => ({\n          ...oldData,\n          href: defaultLinkProtocol + '://' + url\n        })\n      }) : Optional.none();\n    };\n    const preprocess = (editor, data) => findMap([\n      tryEmailTransform,\n      tryProtocolTransform(assumeExternalTargets(editor), getDefaultLinkProtocol(editor))\n    ], f => f(data)).fold(() => Promise.resolve(data), transform => new Promise(callback => {\n      delayedConfirm(editor, transform.message, state => {\n        callback(state ? transform.preprocess(data) : data);\n      });\n    }));\n    const DialogConfirms = { preprocess };\n\n    const getAnchors = editor => {\n      const anchorNodes = editor.dom.select('a:not([href])');\n      const anchors = bind(anchorNodes, anchor => {\n        const id = anchor.name || anchor.id;\n        return id ? [{\n            text: id,\n            value: '#' + id\n          }] : [];\n      });\n      return anchors.length > 0 ? Optional.some([{\n          text: 'None',\n          value: ''\n        }].concat(anchors)) : Optional.none();\n    };\n    const AnchorListOptions = { getAnchors };\n\n    const getClasses = editor => {\n      const list = getLinkClassList(editor);\n      if (list.length > 0) {\n        return ListOptions.sanitize(list);\n      }\n      return Optional.none();\n    };\n    const ClassListOptions = { getClasses };\n\n    const parseJson = text => {\n      try {\n        return Optional.some(JSON.parse(text));\n      } catch (_a) {\n        return Optional.none();\n      }\n    };\n    const getLinks = editor => {\n      const extractor = item => editor.convertURL(item.value || item.url || '', 'href');\n      const linkList = getLinkList(editor);\n      return new Promise(resolve => {\n        if (isString(linkList)) {\n          fetch(linkList).then(res => res.ok ? res.text().then(parseJson) : Promise.reject()).then(resolve, () => resolve(Optional.none()));\n        } else if (isFunction(linkList)) {\n          linkList(output => resolve(Optional.some(output)));\n        } else {\n          resolve(Optional.from(linkList));\n        }\n      }).then(optItems => optItems.bind(ListOptions.sanitizeWith(extractor)).map(items => {\n        if (items.length > 0) {\n          const noneItem = [{\n              text: 'None',\n              value: ''\n            }];\n          return noneItem.concat(items);\n        } else {\n          return items;\n        }\n      }));\n    };\n    const LinkListOptions = { getLinks };\n\n    const getRels = (editor, initialTarget) => {\n      const list = getRelList(editor);\n      if (list.length > 0) {\n        const isTargetBlank = is(initialTarget, '_blank');\n        const enforceSafe = allowUnsafeLinkTarget(editor) === false;\n        const safeRelExtractor = item => applyRelTargetRules(ListOptions.getValue(item), isTargetBlank);\n        const sanitizer = enforceSafe ? ListOptions.sanitizeWith(safeRelExtractor) : ListOptions.sanitize;\n        return sanitizer(list);\n      }\n      return Optional.none();\n    };\n    const RelOptions = { getRels };\n\n    const fallbacks = [\n      {\n        text: 'Current window',\n        value: ''\n      },\n      {\n        text: 'New window',\n        value: '_blank'\n      }\n    ];\n    const getTargets = editor => {\n      const list = getTargetList(editor);\n      if (isArray(list)) {\n        return ListOptions.sanitize(list).orThunk(() => Optional.some(fallbacks));\n      } else if (list === false) {\n        return Optional.none();\n      }\n      return Optional.some(fallbacks);\n    };\n    const TargetOptions = { getTargets };\n\n    const nonEmptyAttr = (dom, elem, name) => {\n      const val = dom.getAttrib(elem, name);\n      return val !== null && val.length > 0 ? Optional.some(val) : Optional.none();\n    };\n    const extractFromAnchor = (editor, anchor) => {\n      const dom = editor.dom;\n      const onlyText = isOnlyTextSelected(editor);\n      const text = onlyText ? Optional.some(getAnchorText(editor.selection, anchor)) : Optional.none();\n      const url = anchor.bind(anchorElm => Optional.from(dom.getAttrib(anchorElm, 'href')));\n      const target = anchor.bind(anchorElm => Optional.from(dom.getAttrib(anchorElm, 'target')));\n      const rel = anchor.bind(anchorElm => nonEmptyAttr(dom, anchorElm, 'rel'));\n      const linkClass = anchor.bind(anchorElm => nonEmptyAttr(dom, anchorElm, 'class'));\n      const title = anchor.bind(anchorElm => nonEmptyAttr(dom, anchorElm, 'title'));\n      return {\n        url,\n        text,\n        title,\n        target,\n        rel,\n        linkClass\n      };\n    };\n    const collect = (editor, linkNode) => LinkListOptions.getLinks(editor).then(links => {\n      const anchor = extractFromAnchor(editor, linkNode);\n      return {\n        anchor,\n        catalogs: {\n          targets: TargetOptions.getTargets(editor),\n          rels: RelOptions.getRels(editor, anchor.target),\n          classes: ClassListOptions.getClasses(editor),\n          anchor: AnchorListOptions.getAnchors(editor),\n          link: links\n        },\n        optNode: linkNode,\n        flags: { titleEnabled: shouldShowLinkTitle(editor) }\n      };\n    });\n    const DialogInfo = { collect };\n\n    const handleSubmit = (editor, info) => api => {\n      const data = api.getData();\n      if (!data.url.value) {\n        unlink(editor);\n        api.close();\n        return;\n      }\n      const getChangedValue = key => Optional.from(data[key]).filter(value => !is(info.anchor[key], value));\n      const changedData = {\n        href: data.url.value,\n        text: getChangedValue('text'),\n        target: getChangedValue('target'),\n        rel: getChangedValue('rel'),\n        class: getChangedValue('linkClass'),\n        title: getChangedValue('title')\n      };\n      const attachState = {\n        href: data.url.value,\n        attach: data.url.meta !== undefined && data.url.meta.attach ? data.url.meta.attach : noop\n      };\n      DialogConfirms.preprocess(editor, changedData).then(pData => {\n        link(editor, attachState, pData);\n      });\n      api.close();\n    };\n    const collectData = editor => {\n      const anchorNode = getAnchorElement(editor);\n      return DialogInfo.collect(editor, anchorNode);\n    };\n    const getInitialData = (info, defaultTarget) => {\n      const anchor = info.anchor;\n      const url = anchor.url.getOr('');\n      return {\n        url: {\n          value: url,\n          meta: { original: { value: url } }\n        },\n        text: anchor.text.getOr(''),\n        title: anchor.title.getOr(''),\n        anchor: url,\n        link: url,\n        rel: anchor.rel.getOr(''),\n        target: anchor.target.or(defaultTarget).getOr(''),\n        linkClass: anchor.linkClass.getOr('')\n      };\n    };\n    const makeDialog = (settings, onSubmit, editor) => {\n      const urlInput = [{\n          name: 'url',\n          type: 'urlinput',\n          filetype: 'file',\n          label: 'URL',\n          picker_text: 'Browse links'\n        }];\n      const displayText = settings.anchor.text.map(() => ({\n        name: 'text',\n        type: 'input',\n        label: 'Text to display'\n      })).toArray();\n      const titleText = settings.flags.titleEnabled ? [{\n          name: 'title',\n          type: 'input',\n          label: 'Title'\n        }] : [];\n      const defaultTarget = Optional.from(getDefaultLinkTarget(editor));\n      const initialData = getInitialData(settings, defaultTarget);\n      const catalogs = settings.catalogs;\n      const dialogDelta = DialogChanges.init(initialData, catalogs);\n      const body = {\n        type: 'panel',\n        items: flatten([\n          urlInput,\n          displayText,\n          titleText,\n          cat([\n            catalogs.anchor.map(ListOptions.createUi('anchor', 'Anchors')),\n            catalogs.rels.map(ListOptions.createUi('rel', 'Rel')),\n            catalogs.targets.map(ListOptions.createUi('target', 'Open link in...')),\n            catalogs.link.map(ListOptions.createUi('link', 'Link list')),\n            catalogs.classes.map(ListOptions.createUi('linkClass', 'Class'))\n          ])\n        ])\n      };\n      return {\n        title: 'Insert/Edit Link',\n        size: 'normal',\n        body,\n        buttons: [\n          {\n            type: 'cancel',\n            name: 'cancel',\n            text: 'Cancel'\n          },\n          {\n            type: 'submit',\n            name: 'save',\n            text: 'Save',\n            primary: true\n          }\n        ],\n        initialData,\n        onChange: (api, {name}) => {\n          dialogDelta.onChange(api.getData, { name }).each(newData => {\n            api.setData(newData);\n          });\n        },\n        onSubmit\n      };\n    };\n    const open = editor => {\n      const data = collectData(editor);\n      data.then(info => {\n        const onSubmit = handleSubmit(editor, info);\n        return makeDialog(info, onSubmit, editor);\n      }).then(spec => {\n        editor.windowManager.open(spec);\n      });\n    };\n\n    const register = editor => {\n      editor.addCommand('mceLink', (_ui, value) => {\n        if ((value === null || value === void 0 ? void 0 : value.dialog) === true || !useQuickLink(editor)) {\n          open(editor);\n        } else {\n          editor.dispatch('contexttoolbar-show', { toolbarKey: 'quicklink' });\n        }\n      });\n    };\n\n    const setup$2 = editor => {\n      editor.addShortcut('Meta+K', '', () => {\n        editor.execCommand('mceLink');\n      });\n    };\n\n    const Cell = initial => {\n      let value = initial;\n      const get = () => {\n        return value;\n      };\n      const set = v => {\n        value = v;\n      };\n      return {\n        get,\n        set\n      };\n    };\n\n    const singleton = doRevoke => {\n      const subject = Cell(Optional.none());\n      const revoke = () => subject.get().each(doRevoke);\n      const clear = () => {\n        revoke();\n        subject.set(Optional.none());\n      };\n      const isSet = () => subject.get().isSome();\n      const get = () => subject.get();\n      const set = s => {\n        revoke();\n        subject.set(Optional.some(s));\n      };\n      return {\n        clear,\n        isSet,\n        get,\n        set\n      };\n    };\n    const value = () => {\n      const subject = singleton(noop);\n      const on = f => subject.get().each(f);\n      return {\n        ...subject,\n        on\n      };\n    };\n\n    const removeFromStart = (str, numChars) => {\n      return str.substring(numChars);\n    };\n\n    const checkRange = (str, substr, start) => substr === '' || str.length >= substr.length && str.substr(start, start + substr.length) === substr;\n    const removeLeading = (str, prefix) => {\n      return startsWith(str, prefix) ? removeFromStart(str, prefix.length) : str;\n    };\n    const startsWith = (str, prefix) => {\n      return checkRange(str, prefix, 0);\n    };\n\n    var global = tinymce.util.Tools.resolve('tinymce.util.VK');\n\n    const appendClickRemove = (link, evt) => {\n      document.body.appendChild(link);\n      link.dispatchEvent(evt);\n      document.body.removeChild(link);\n    };\n    const openLink = url => {\n      const link = document.createElement('a');\n      link.target = '_blank';\n      link.href = url;\n      link.rel = 'noreferrer noopener';\n      const evt = new MouseEvent('click', {\n        bubbles: true,\n        cancelable: true,\n        view: window\n      });\n      document.dispatchEvent(evt);\n      appendClickRemove(link, evt);\n    };\n    const hasOnlyAltModifier = e => {\n      return e.altKey === true && e.shiftKey === false && e.ctrlKey === false && e.metaKey === false;\n    };\n    const gotoLink = (editor, a) => {\n      if (a) {\n        const href = getHref(a);\n        if (/^#/.test(href)) {\n          const targetEl = editor.dom.select(`${ href },[name=\"${ removeLeading(href, '#') }\"]`);\n          if (targetEl.length) {\n            editor.selection.scrollIntoView(targetEl[0], true);\n          }\n        } else {\n          openLink(a.href);\n        }\n      }\n    };\n    const isSelectionOnImageWithEmbeddedLink = editor => {\n      const rng = editor.selection.getRng();\n      const node = rng.startContainer;\n      return isLink(node) && rng.startContainer === rng.endContainer && editor.dom.select('img', node).length === 1;\n    };\n    const getLinkFromElement = (editor, element) => {\n      const links = getLinks$1(editor.dom.getParents(element));\n      return someIf(links.length === 1, links[0]);\n    };\n    const getLinkInSelection = editor => {\n      const links = getLinksInSelection(editor.selection.getRng());\n      return someIf(links.length > 0, links[0]).or(getLinkFromElement(editor, editor.selection.getNode()));\n    };\n    const getLinkFromSelection = editor => editor.selection.isCollapsed() || isSelectionOnImageWithEmbeddedLink(editor) ? getLinkFromElement(editor, editor.selection.getStart()) : getLinkInSelection(editor);\n    const setup$1 = editor => {\n      const selectedLink = value();\n      const getSelectedLink = () => selectedLink.get().or(getLinkFromSelection(editor));\n      const gotoSelectedLink = () => getSelectedLink().each(link => gotoLink(editor, link));\n      editor.on('contextmenu', e => {\n        getLinkFromElement(editor, e.target).each(selectedLink.set);\n      });\n      editor.on('SelectionChange', () => {\n        if (!selectedLink.isSet()) {\n          getLinkFromSelection(editor).each(selectedLink.set);\n        }\n      });\n      editor.on('click', e => {\n        selectedLink.clear();\n        const links = getLinks$1(editor.dom.getParents(e.target));\n        if (links.length === 1 && global.metaKeyPressed(e)) {\n          e.preventDefault();\n          gotoLink(editor, links[0]);\n        }\n      });\n      editor.on('keydown', e => {\n        selectedLink.clear();\n        if (!e.isDefaultPrevented() && e.keyCode === 13 && hasOnlyAltModifier(e)) {\n          getSelectedLink().each(link => {\n            e.preventDefault();\n            gotoLink(editor, link);\n          });\n        }\n      });\n      return { gotoSelectedLink };\n    };\n\n    const openDialog = editor => () => {\n      editor.execCommand('mceLink', false, { dialog: true });\n    };\n    const toggleState = (editor, toggler) => {\n      editor.on('NodeChange', toggler);\n      return () => editor.off('NodeChange', toggler);\n    };\n    const toggleLinkState = editor => api => {\n      const updateState = () => {\n        api.setActive(!editor.mode.isReadOnly() && isInAnchor(editor, editor.selection.getNode()));\n        api.setEnabled(editor.selection.isEditable());\n      };\n      updateState();\n      return toggleState(editor, updateState);\n    };\n    const toggleLinkMenuState = editor => api => {\n      const updateState = () => {\n        api.setEnabled(editor.selection.isEditable());\n      };\n      updateState();\n      return toggleState(editor, updateState);\n    };\n    const toggleRequiresLinkState = editor => api => {\n      const hasLinks$1 = parents => hasLinks(parents) || hasLinksInSelection(editor.selection.getRng());\n      const parents = editor.dom.getParents(editor.selection.getStart());\n      const updateEnabled = parents => {\n        api.setEnabled(hasLinks$1(parents) && editor.selection.isEditable());\n      };\n      updateEnabled(parents);\n      return toggleState(editor, e => updateEnabled(e.parents));\n    };\n    const setupButtons = (editor, openLink) => {\n      editor.ui.registry.addToggleButton('link', {\n        icon: 'link',\n        tooltip: 'Insert/edit link',\n        shortcut: 'Meta+K',\n        onAction: openDialog(editor),\n        onSetup: toggleLinkState(editor)\n      });\n      editor.ui.registry.addButton('openlink', {\n        icon: 'new-tab',\n        tooltip: 'Open link',\n        onAction: openLink.gotoSelectedLink,\n        onSetup: toggleRequiresLinkState(editor)\n      });\n      editor.ui.registry.addButton('unlink', {\n        icon: 'unlink',\n        tooltip: 'Remove link',\n        onAction: () => unlink(editor),\n        onSetup: toggleRequiresLinkState(editor)\n      });\n    };\n    const setupMenuItems = (editor, openLink) => {\n      editor.ui.registry.addMenuItem('openlink', {\n        text: 'Open link',\n        icon: 'new-tab',\n        onAction: openLink.gotoSelectedLink,\n        onSetup: toggleRequiresLinkState(editor)\n      });\n      editor.ui.registry.addMenuItem('link', {\n        icon: 'link',\n        text: 'Link...',\n        shortcut: 'Meta+K',\n        onAction: openDialog(editor),\n        onSetup: toggleLinkMenuState(editor)\n      });\n      editor.ui.registry.addMenuItem('unlink', {\n        icon: 'unlink',\n        text: 'Remove link',\n        onAction: () => unlink(editor),\n        onSetup: toggleRequiresLinkState(editor)\n      });\n    };\n    const setupContextMenu = editor => {\n      const inLink = 'link unlink openlink';\n      const noLink = 'link';\n      editor.ui.registry.addContextMenu('link', {\n        update: element => {\n          const isEditable = editor.dom.isEditable(element);\n          if (!isEditable) {\n            return '';\n          }\n          return hasLinks(editor.dom.getParents(element, 'a')) ? inLink : noLink;\n        }\n      });\n    };\n    const setupContextToolbars = (editor, openLink) => {\n      const collapseSelectionToEnd = editor => {\n        editor.selection.collapse(false);\n      };\n      const onSetupLink = buttonApi => {\n        const node = editor.selection.getNode();\n        buttonApi.setEnabled(isInAnchor(editor, node) && editor.selection.isEditable());\n        return noop;\n      };\n      const getLinkText = value => {\n        const anchor = getAnchorElement(editor);\n        const onlyText = isOnlyTextSelected(editor);\n        if (anchor.isNone() && onlyText) {\n          const text = getAnchorText(editor.selection, anchor);\n          return someIf(text.length === 0, value);\n        } else {\n          return Optional.none();\n        }\n      };\n      editor.ui.registry.addContextForm('quicklink', {\n        launch: {\n          type: 'contextformtogglebutton',\n          icon: 'link',\n          tooltip: 'Link',\n          onSetup: toggleLinkState(editor)\n        },\n        label: 'Link',\n        predicate: node => hasContextToolbar(editor) && isInAnchor(editor, node),\n        initValue: () => {\n          const elm = getAnchorElement(editor);\n          return elm.fold(constant(''), getHref);\n        },\n        commands: [\n          {\n            type: 'contextformtogglebutton',\n            icon: 'link',\n            tooltip: 'Link',\n            primary: true,\n            onSetup: buttonApi => {\n              const node = editor.selection.getNode();\n              buttonApi.setActive(isInAnchor(editor, node));\n              return toggleLinkState(editor)(buttonApi);\n            },\n            onAction: formApi => {\n              const value = formApi.getValue();\n              const text = getLinkText(value);\n              const attachState = {\n                href: value,\n                attach: noop\n              };\n              link(editor, attachState, {\n                href: value,\n                text,\n                title: Optional.none(),\n                rel: Optional.none(),\n                target: Optional.from(getDefaultLinkTarget(editor)),\n                class: Optional.none()\n              });\n              collapseSelectionToEnd(editor);\n              formApi.hide();\n            }\n          },\n          {\n            type: 'contextformbutton',\n            icon: 'unlink',\n            tooltip: 'Remove link',\n            onSetup: onSetupLink,\n            onAction: formApi => {\n              unlink(editor);\n              formApi.hide();\n            }\n          },\n          {\n            type: 'contextformbutton',\n            icon: 'new-tab',\n            tooltip: 'Open link',\n            onSetup: onSetupLink,\n            onAction: formApi => {\n              openLink.gotoSelectedLink();\n              formApi.hide();\n            }\n          }\n        ]\n      });\n    };\n    const setup = editor => {\n      const openLink = setup$1(editor);\n      setupButtons(editor, openLink);\n      setupMenuItems(editor, openLink);\n      setupContextMenu(editor);\n      setupContextToolbars(editor, openLink);\n    };\n\n    var Plugin = () => {\n      global$5.add('link', editor => {\n        register$1(editor);\n        register(editor);\n        setup(editor);\n        setup$2(editor);\n      });\n    };\n\n    Plugin();\n\n})();\n"],"names":["global$5","tinymce","util","Tools","resolve","isType","type","value","x","t","Array","isArray","o","v","proto","constructor","String","prototype","isPrototypeOf","_a","name","typeOf","isSimpleType","isString","isObject","isNull","a","isBoolean","isNonNullable","isNullable","isFunction","isArrayOf","pred","i","len","length","noop","tripleEquals","b","Optional","tag","this","some","none","singletonNone","fold","onNone","onSome","isSome","isNone","map","mapper","bind","binder","exists","predicate","forall","filter","getOr","replacement","or","getOrThunk","thunk","orThunk","getOrDie","message","Error","from","getOrNull","getOrUndefined","each","worker","toArray","toString","nativeIndexOf","indexOf","nativePush","push","contains","xs","ts","call","rawIndexOf","flatten","r","apply","f","findMap","arr","is","lhs","rhs","comparator","left","cat","someIf","option","editor","options","get","assumeExternalTargets","hasContextToolbar","getLinkList","getDefaultLinkTarget","getDefaultLinkProtocol","getTargetList","getRelList","getLinkClassList","shouldShowLinkTitle","allowUnsafeLinkTarget","useQuickLink","attributesPostProcess","keys","Object","hasOwnProperty","internalFilter","obj","onTrue","onFalse","props","k","has","key","global$4","global$3","global$2","isAnchor","elm","nodeName","toLowerCase","isLink","getHref","collectNodesInRange","rng","collapsed","contents","cloneContents","firstChild","walker","elements","current","next","hasProtocol","url","test","_b","getAttribute","applyRelTargetRules","rel","isUnsafe","rules","rels","split","removeTargetRules","val","inArray","newRels","concat","addTargetRules","trim","sort","join","getAnchorElement","selectedElm","getLinksInSelection","selection","getRng","getNode","isImageFigure","dom","select","getParent","isInAnchor","getAnchorText","anchorElm","text","replace","trimCaretContainers","getContent","format","innerText","textContent","getLinks$1","grep","hasLinks","isOnlyTextSelected","inlineTextElements","schema","getTextInlineElements","isElement","nodeType","anchor","hasAttribute","className","applyLinkOverrides","linkAttrs","newLinkAttrs","newRel","target","href","handleExternalTargets","linkDomMutation","attachState","data","acc","each$1","getLinkAttrs","attributesPostProcess$1","undoManager","transact","attach","linkImageFigure","execCommand","end","getEnd","createRng","setStartAfter","setEndAfter","setRng","insertContent","createHTML","encode","createLink","focus","setAttribs","updateLink","unwrapOptions","class","cls","title","_k","link","sanitizedData","getOption","uriOptions","allow_html_data_urls","allow_script_urls","allow_svg_data_urls","isDomSafe","sanitizeData","hasPlugin","unlink","node","unlinkImageFigure","bookmark","getBookmark","cloneRange","startAnchorElm","startContainer","getBody","endAnchorElm","endContainer","setStartBefore","moveToBookmark","unlinkSelection","unlinkDomMutation","fig","img","getParents","parentNode","insertBefore","remove","attrs","create","appendChild","getValue","item","sanitizeList","list","extractValue","out","getText","undefined","menu","items","sanitizeWith","extracter","ListOptions","sanitize","createUi","label","isListGroup","hasNonNullableKey","findTextByValue","catalog","getDelta","persistentText","fieldName","hasPersistentText","meta","DialogChanges","initialData","linkCatalog","persistentData","onUrlChange","getTitleFromUrlChange","onCatalogChange","change","catalogs","onChange","getData","global$1","tryEmailTransform","preprocess","oldData","tryProtocolTransform","defaultLinkProtocol","DialogConfirms","Promise","transform","callback","setEditorTimeout","windowManager","confirm","state","delayedConfirm","AnchorListOptions","anchorNodes","anchors","id","ClassListOptions","parseJson","JSON","parse","LinkListOptions","extractor","convertURL","linkList","fetch","then","res","ok","reject","output","optItems","RelOptions","initialTarget","isTargetBlank","safeRelExtractor","fallbacks","TargetOptions","nonEmptyAttr","elem","getAttrib","DialogInfo","linkNode","links","linkClass","extractFromAnchor","targets","classes","optNode","flags","titleEnabled","open","anchorNode","collectData","info","onSubmit","api","close","getChangedValue","changedData","pData","handleSubmit","settings","displayText","titleText","defaultTarget","original","getInitialData","dialogDelta","size","body","filetype","picker_text","buttons","primary","newData","setData","makeDialog","spec","subject","doRevoke","initial","set","Cell","revoke","clear","isSet","s","singleton","on","startsWith","str","prefix","substr","start","checkRange","global","openLink","document","createElement","evt","MouseEvent","bubbles","cancelable","view","window","dispatchEvent","removeChild","appendClickRemove","gotoLink","targetEl","numChars","substring","removeFromStart","scrollIntoView","getLinkFromElement","element","getLinkFromSelection","isCollapsed","isSelectionOnImageWithEmbeddedLink","getStart","getLinkInSelection","openDialog","dialog","toggleState","toggler","off","toggleLinkState","updateState","setActive","mode","isReadOnly","setEnabled","isEditable","toggleLinkMenuState","toggleRequiresLinkState","hasLinks$1","parents","updateEnabled","e","setupContextToolbars","onSetupLink","buttonApi","ui","registry","addContextForm","launch","icon","tooltip","onSetup","initValue","constant","commands","onAction","formApi","onlyText","getLinkText","collapse","collapseSelectionToEnd","hide","gotoSelectedLink","setup","selectedLink","getSelectedLink","metaKeyPressed","preventDefault","isDefaultPrevented","keyCode","altKey","shiftKey","ctrlKey","metaKey","hasOnlyAltModifier","setup$1","addToggleButton","shortcut","addButton","setupButtons","addMenuItem","setupMenuItems","addContextMenu","update","setupContextMenu","add","registerOption","register","processor","valid","default","register$1","addCommand","_ui","dispatch","toolbarKey","addShortcut","setup$2"],"sourceRoot":""}