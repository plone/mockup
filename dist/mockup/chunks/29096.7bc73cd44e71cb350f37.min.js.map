{"version":3,"file":"chunks/29096.7bc73cd44e71cb350f37.min.js","mappings":"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","sources":["webpack://@plone/mockup/./src/core/ui/views/base.js","webpack://@plone/mockup/./src/core/ui/views/container.js","webpack://@plone/mockup/./src/core/ui/views/toolbar.js","webpack://@plone/mockup/./src/core/ui/views/buttongroup.js","webpack://@plone/mockup/./src/core/ui/views/button.js","webpack://@plone/mockup/./src/pat/structure/js/actionmenu.js","webpack://@plone/mockup/./src/pat/structure/js/models/result.js","webpack://@plone/mockup/./src/pat/structure/js/actions.js","webpack://@plone/mockup/./src/pat/structure/js/views/actionmenu.js","webpack://@plone/mockup/./src/pat/structure/js/views/tablerow.js","webpack://@plone/mockup/./src/pat/structure/js/views/table.js","webpack://@plone/mockup/./src/core/ui/views/popover.js","webpack://@plone/mockup/./src/pat/structure/js/views/selectionwell.js","webpack://@plone/mockup/./src/pat/structure/js/views/generic-popover.js","webpack://@plone/mockup/./src/pat/structure/js/views/rearrange.js","webpack://@plone/mockup/./src/pat/structure/js/views/selectionbutton.js","webpack://@plone/mockup/./src/pat/structure/js/views/paging.js","webpack://@plone/mockup/./src/pat/structure/js/views/columns.js","webpack://@plone/mockup/./src/pat/structure/js/views/textfilter.js","webpack://@plone/mockup/./src/pat/structure/js/views/upload.js","webpack://@plone/mockup/./src/pat/structure/js/collections/selected.js","webpack://@plone/mockup/./src/pat/structure/js/collections/result.js","webpack://@plone/mockup/./src/pat/structure/js/views/app.js"],"sourcesContent":["import $ from \"jquery\";\nimport _ from \"underscore\";\nimport _t from \"../../i18n-wrapper\";\nimport Backbone from \"backbone\";\n\nexport default Backbone.View.extend({\n    isUIView: true,\n    eventPrefix: \"ui\",\n    template: null,\n    idPrefix: \"base-\",\n    appendInContainer: true,\n    initialize: function (options) {\n        this.options = options;\n        for (var key in this.options) {\n            this[key] = this.options[key];\n        }\n        this.options._t = _t;\n    },\n    render: function () {\n        this.applyTemplate();\n\n        this.trigger(\"render\", this);\n        this.afterRender();\n\n        if (this.options.id) {\n            // apply id to element\n            this.$el.attr(\"id\", this.idPrefix + this.options.id);\n        }\n        return this;\n    },\n    afterRender: function () {},\n    serializedModel: function () {\n        return this.options;\n    },\n    applyTemplate: function () {\n        if (this.template !== null) {\n            var data = $.extend({ _t: _t }, this.options, this.serializedModel());\n            var template = this.template;\n            if (typeof template === \"string\") {\n                template = _.template(template);\n            }\n            this.$el.html(template(data));\n        }\n    },\n    propagateEvent: function (eventName) {\n        if (eventName.indexOf(\":\") > 0) {\n            var eventId = eventName.split(\":\")[0];\n            if (this.eventPrefix !== \"\") {\n                if (\n                    eventId === this.eventPrefix ||\n                    eventId === this.eventPrefix + \".\" + this.id\n                ) {\n                    return true;\n                }\n            }\n        }\n        return false;\n    },\n    uiEventTrigger: function (name) {\n        var args = [].slice.call(arguments, 0);\n\n        if (this.eventPrefix !== \"\") {\n            args[0] = this.eventPrefix + \":\" + name;\n            Backbone.View.prototype.trigger.apply(this, args);\n            if (this.id) {\n                args[0] = this.eventPrefix + \".\" + this.id + \":\" + name;\n                Backbone.View.prototype.trigger.apply(this, args);\n            }\n        }\n    },\n});\n","import $ from \"jquery\";\nimport _ from \"underscore\";\nimport BaseView from \"./base\";\n\nexport default BaseView.extend({\n    id: \"\",\n    items: [],\n    itemContainer: null,\n    isOffsetParent: true,\n    idPrefix: \"container-\",\n    render: function () {\n        if (this.options.id) {\n            this.$el.attr(\"id\", this.idPrefix + this.options.id);\n        }\n\n        this.applyTemplate();\n\n        this.renderItems();\n        this.bindEvents();\n\n        if (this.isOffsetParent) {\n            this.$el.addClass(\"ui-offset-parent\");\n        }\n\n        this.trigger(\"render\", this);\n\n        this.afterRender();\n\n        this.$el.data(\"component\", this);\n        return this;\n    },\n    renderItems: function () {\n        var $container;\n\n        if (this.itemContainer !== null) {\n            $container = $(this.itemContainer, this.$el);\n            if ($container.length === 0) {\n                throw \"Item Container element not found.\";\n            }\n        } else {\n            $container = this.$el;\n        }\n        _.each(\n            this.items,\n            function (view) {\n                if (view.appendInContainer === true) {\n                    $container.append(view.render().$el);\n                } else {\n                    view.render();\n                }\n            },\n            this\n        );\n    },\n    bindEvents: function () {\n        var self = this;\n        _.each(this.items, function (view) {\n            view.on(\"all\", function () {\n                var slice = [].slice;\n                var eventName = arguments[0];\n                var eventTarget;\n                var newName = self.id !== \"\" ? self.id + \".\" + eventName : eventName;\n                if (arguments.length > 1) {\n                    eventTarget = arguments[1];\n                }\n                if (newName !== eventName) {\n                    var newArgs = slice.call(arguments, 0);\n                    newArgs[0] = newName;\n                    self.trigger.apply(self, newArgs);\n                }\n                if (eventTarget !== undefined && eventTarget.isUIView === true) {\n                    if (eventTarget.propagateEvent(eventName) === true) {\n                        self.trigger.apply(self, arguments);\n                    }\n                }\n            });\n        });\n    },\n    get: function (id) {\n        // Remove the recursive part because it was confusing if two children had the\n        // same id\n        return _.findWhere(this.items, { id: id });\n    },\n    add: function (item) {\n        if (item.id !== undefined && this.get(item.id)) {\n            throw \"Another item with the same `id` already exists.\";\n        }\n        this.items.push(item);\n    },\n});\n","import ContainerView from \"./container\";\n\nexport default ContainerView.extend({\n    tagName: \"div\",\n    className: \"navbar\",\n    idPrefix: \"toolbar-\",\n});\n","import _ from \"underscore\";\nimport ContainerView from \"./container\";\n\nexport default ContainerView.extend({\n    tagName: \"div\",\n    className: \"btn-group\",\n    idPrefix: \"btngroup-\",\n    disable: function () {\n        _.each(this.items, function (button) {\n            button.disable();\n        });\n    },\n    enable: function () {\n        _.each(this.items, function (button) {\n            button.enable();\n        });\n    },\n});\n","import _ from \"underscore\";\nimport BaseView from \"./base\";\nimport Tooltip from \"@patternslib/patternslib/src/pat/tooltip/tooltip\";\nimport dom from \"@patternslib/patternslib/src/core/dom\";\nimport utils from \"../../utils\";\n\nexport default BaseView.extend({\n    tagName: \"a\",\n    className: \"btn\",\n    eventPrefix: \"button\",\n    context: \"outline-secondary\",\n    idPrefix: \"btn-\",\n    attributes: {\n        href: \"#\",\n    },\n    extraClasses: [],\n    tooltip: null,\n    template: \"<%= title %>\",\n    events: {\n        click: \"handleClick\",\n    },\n    initialize: function (options) {\n        if (!options.id) {\n            const title = options.title || \"\";\n            options.id = title !== \"\" ? title.toLowerCase().replace(\" \", \"-\") : this.cid; // prettier-ignore\n        }\n        BaseView.prototype.initialize.apply(this, [options]);\n\n        this.on(\n            \"render\",\n            async function () {\n                this.$el.attr(\"title\", this.options.title || \"\");\n                this.$el.attr(\n                    \"aria-label\",\n                    this.options.title || this.options.tooltip || \"\"\n                );\n                if (this.context !== null) {\n                    this.$el.addClass(\"btn-\" + this.context);\n                }\n                _.each(\n                    this.extraClasses,\n                    function (klass) {\n                        this.$el.addClass(klass);\n                    }.bind(this)\n                );\n\n                if (this.icon && typeof this.icon == \"string\") {\n                    const icon_markup = await utils.resolveIcon(this.icon);\n                    const icon_el = dom.create_from_string(icon_markup);\n                    if (icon_el) {\n                        this.$el.prepend(icon_el);\n                    }\n                }\n\n                if (this.tooltip !== null) {\n                    this.$el.attr(\"title\", this.tooltip);\n                    new Tooltip(this.$el);\n                    // XXX since tooltip triggers hidden\n                    // suppress so it plays nice with modals, backdrops, etc\n                    this.$el.on(\"hidden\", function (e) {\n                        if (e.type === \"hidden\") {\n                            e.stopPropagation();\n                        }\n                    });\n                }\n            },\n            this\n        );\n    },\n    handleClick: function (e) {\n        e.preventDefault();\n        if (!this.$el.is(\".disabled\")) {\n            this.uiEventTrigger(\"click\", this, e);\n        }\n    },\n    serializedModel: function () {\n        return _.extend({ icon: \"\", title: \"\" }, this.options);\n    },\n    disable: function () {\n        this.$el.addClass(\"disabled\");\n    },\n    enable: function () {\n        this.$el.removeClass(\"disabled\");\n    },\n});\n","import _t from \"../../../core/i18n-wrapper\";\n\nconst menuOptions = {\n    \"openItem\": {\n        url: \"#\",\n        title: _t(\"Open\"),\n        category: \"button\",\n        icon: \"plone-view\",\n        css: \"\",\n        modal: false,\n    },\n    \"editItem\": {\n        url: \"#\",\n        title: _t(\"Edit\"),\n        category: \"button\",\n        icon: \"plone-edit\",\n        css: \"\",\n        modal: false,\n    },\n    \"cutItem\": {\n        method: \"cutClicked\",\n        url: \"#\",\n        title: _t(\"Cut\"),\n        category: \"dropdown\",\n        icon: \"plone-cut\",\n        css: \"\",\n        modal: false,\n    },\n    \"copyItem\": {\n        method: \"copyClicked\",\n        url: \"#\",\n        title: _t(\"Copy\"),\n        category: \"dropdown\",\n        icon: \"plone-copy\",\n        css: \"\",\n        modal: false,\n    },\n    \"pasteItem\": {\n        method: \"pasteClicked\",\n        url: \"#\",\n        title: _t(\"Paste\"),\n        category: \"dropdown\",\n        icon: \"plone-paste\",\n        css: \"\",\n        modal: false,\n    },\n    \"move-top\": {\n        method: \"moveTopClicked\",\n        url: \"#\",\n        title: _t(\"Move to top of folder\"),\n        category: \"dropdown\",\n        icon: \"arrow-bar-up\",\n        css: \"\",\n        modal: false,\n    },\n    \"move-bottom\": {\n        method: \"moveBottomClicked\",\n        url: \"#\",\n        title: _t(\"Move to bottom of folder\"),\n        category: \"dropdown\",\n        icon: \"arrow-bar-down\",\n        css: \"\",\n        modal: false,\n    },\n    \"set-default-page\": {\n        method: \"setDefaultPageClicked\",\n        url: \"#\",\n        title: _t(\"Set as default page\"),\n        category: \"dropdown\",\n        icon: \"check-circle\",\n        css: \"\",\n        modal: false,\n    },\n    \"selectAll\": {\n        method: \"selectAll\",\n        url: \"#\",\n        title: _t(\"Select all contained items\"),\n        category: \"dropdown\",\n        icon: \"check-all\",\n        css: \"\",\n        modal: false,\n    },\n};\n\nconst ActionMenu = function (menu) {\n    // If an explicit menu was specified as an option to AppView, this\n    // constructor will not override that.\n    if (menu.app.menuOptions !== null) {\n        return menu.app.menuOptions;\n    }\n\n    const model = menu.model.attributes;\n    const app = menu.app;\n    const canMove = !!app.options.moveUrl;\n\n    const result = JSON.parse(JSON.stringify(menuOptions));\n    if (!(app.pasteAllowed() && model.is_folderish)) {\n        delete result.pasteItem;\n    }\n    if (app.inQueryMode() || canMove === false) {\n        delete result[\"move-top\"];\n        delete result[\"move-bottom\"];\n    }\n    if (\n        app.defaultPageTypes.indexOf(model.portal_type) === -1 ||\n        !app.setDefaultPageUrl\n    ) {\n        delete result[\"set-default-page\"];\n    }\n\n    if (!model.is_folderish) {\n        delete result.selectAll;\n    }\n\n    const typeToViewAction = app.options.typeToViewAction;\n    const viewAction = (typeToViewAction && typeToViewAction[model.portal_type]) || \"\";\n    result.openItem.url = model.getURL + viewAction;\n    result.editItem.url = model.getURL + \"/edit\";\n\n    return result;\n};\n\nexport default ActionMenu;\n","import Backbone from \"backbone\";\n\nexport default Backbone.Model.extend({\n    defaults: function () {\n        return {\n            is_folderish: false,\n            review_state: \"\",\n            getURL: \"\",\n        };\n    },\n\n    uid: function () {\n        return this.attributes.UID;\n    },\n});\n","import _t from \"../../../core/i18n-wrapper\";\nimport utils from \"../../../core/utils\";\nimport Backbone from \"backbone\";\nimport Result from \"./models/result\";\n\n// use a more primative class than Backbone.Model?\nexport default Backbone.Model.extend({\n    initialize: function (options) {\n        this.options = options;\n        this.app = options.app;\n        this.model = options.model;\n        this.selectedCollection = this.app.selectedCollection;\n    },\n\n    selectAll: async function (e) {\n        // This implementation is very specific to the default collection\n        // with the reliance on its queryParser and queryHelper.  Custom\n        // collection (PageableCollection implementation)\n        // will have to come up with their own action for this.\n        e.preventDefault();\n        let page = 1;\n        let count = 0;\n        const getPage = async () => {\n            this.app.loading.show();\n\n            const url = new URL(this.app.collection.url);\n            url.searchParams.append(\n                \"query\",\n                this.app.collection.queryParser({\n                    searchPath: this.model.attributes.path,\n                })\n            );\n            url.searchParams.append(\n                \"batch\",\n                JSON.stringify({\n                    page: page,\n                    size: 100,\n                })\n            );\n            url.searchParams.append(\n                \"attributes\",\n                JSON.stringify(this.app.collection.queryHelper.options.attributes)\n            );\n            const resp = await fetch(url, {\n                headers: {\n                    Accept: \"application/json\",\n                },\n            });\n            const data = await resp.json();\n\n            const items = this.app.collection.parse(data, count);\n            count += items.length;\n            for (const item of items) {\n                this.app.selectedCollection.add(new Result(item));\n            }\n            page += 1;\n            if (data.total > count) {\n                await getPage();\n            } else {\n                this.app.loading.hide();\n                await this.app.tableView.render();\n            }\n        };\n        await getPage();\n    },\n\n    doAction: async function (buttonName, successMsg, failMsg) {\n        const url = new URL(this.app.buttons.get(buttonName).options.url);\n        const resp = await fetch(url, {\n            headers: {\n                \"Content-Type\": \"application/x-www-form-urlencoded; charset=UTF-8\",\n            },\n            method: \"POST\",\n            body: new URLSearchParams({\n                selection: JSON.stringify([this.model.attributes.UID]),\n                folder: this.model.attributes.path,\n                _authenticator: utils.getAuthenticator(),\n            }),\n        });\n        const data = await resp.json();\n\n        let msg,\n            state_type = \"warning\";\n        if (data.status === \"success\") {\n            msg = _t(`${successMsg} \"${this.model.attributes.Title}\"`);\n            this.app.collection.fetch();\n            this.app.updateButtons();\n        } else {\n            msg = _t(\"Error\") + `: ${failMsg} \"${this.model.attributes.Title}\"`;\n            state_type = \"danger\";\n        }\n        this.app.clearStatus();\n        this.app.setStatus({\n            text: msg,\n            type: data.status || state_type,\n        });\n    },\n\n    cutClicked: function (e) {\n        e.preventDefault();\n        this.doAction(\"cut\", _t(\"Cut\"), _t(\"cutting\"));\n    },\n\n    copyClicked: function (e) {\n        e.preventDefault();\n        this.doAction(\"copy\", _t(\"Copied\"), _t(\"copying\"));\n    },\n\n    pasteClicked: function (e) {\n        e.preventDefault();\n        this.doAction(\"paste\", _t(\"Pasted into\"), _t(\"Error pasting into\"));\n    },\n\n    moveTopClicked: function (e) {\n        e.preventDefault();\n        this.app.moveItem(this.model.attributes.id, \"top\");\n    },\n\n    moveBottomClicked: function (e) {\n        e.preventDefault();\n        this.app.moveItem(this.model.attributes.id, \"bottom\");\n    },\n\n    setDefaultPageClicked: async function (e) {\n        e.preventDefault();\n        try {\n            const url = new URL(this.app.getAjaxUrl(this.app.setDefaultPageUrl));\n            const resp = await fetch(url, {\n                headers: {\n                    \"Content-Type\": \"application/x-www-form-urlencoded; charset=UTF-8\",\n                },\n                method: \"POST\",\n                body: new URLSearchParams({\n                    id: this.model.attributes.id,\n                    _authenticator: utils.getAuthenticator(),\n                }),\n            });\n            const data = await resp.json();\n            this.app.ajaxSuccessResponse.apply(this.app, [data]);\n        } catch (e) {\n            this.app.ajaxSuccessResponse.apply(this.app, [e]);\n        }\n    },\n});\n","import $ from \"jquery\";\nimport _ from \"underscore\";\nimport _t from \"../../../../core/i18n-wrapper\";\nimport utils from \"../../../../core/utils\";\nimport registry from \"@patternslib/patternslib/src/core/registry\";\nimport BaseView from \"../../../../core/ui/views/base\";\nimport ActionMenuTemplate from \"../../templates/actionmenu.xml\";\nimport \"../../../modal/modal\";\nimport \"@patternslib/patternslib/src/pat/tooltip/tooltip\";\nimport actionmenu_generator from \"../actionmenu\";\nimport Actions from \"../actions\";\n\nexport default BaseView.extend({\n    className: \"btn-group actionmenu\",\n    template: _.template(ActionMenuTemplate),\n\n    // Static menu options\n    menuOptions: null,\n    // Dynamic menu options\n\n    generate_events: function () {\n        /* Backbone.view.events:\n         * refactored since Backbone 1.4.1 calls \"events\" before \"initialize\"\n         */\n        const result = {};\n\n        _.each(this.menuOptions, (menuOption, key) => {\n            // Create event handler and add it to the results object.\n            const method = menuOption.method;\n            if (!method || !this.actions[method]) {\n                return false;\n            }\n            result[`click a.${key}`] = this.actions[method].bind(this.actions);\n        });\n\n        return result;\n    },\n\n    initialize: function (options) {\n        this.actions = new Actions(options);\n        BaseView.prototype.initialize.apply(this, [options]);\n        this.options = options;\n        this.selectedCollection = this.app.selectedCollection;\n\n        this.menuOptions = actionmenu_generator(this);\n        // define events here and delegate them manually\n        this.events = this.generate_events();\n        // Backbone API\n        this.delegateEvents();\n    },\n\n    menuOptionsCategorized: async function () {\n        const result = {};\n\n        _.each(this.menuOptions, async (menuOption, key) => {\n            // set a unique identifier to uniquely bind the events.\n            menuOption.idx = utils.generateId();\n            menuOption.name = key; // we want to add the action's key as class name to the output.\n\n            const category = menuOption.category || \"dropdown\";\n            if (result[category] === undefined) {\n                result[category] = [];\n            }\n            result[category].push(menuOption);\n            menuOption.classes = [menuOption.name, menuOption.idx];\n            if (menuOption.css) {\n                menuOption.classes.push(menuOption.css);\n            }\n            if (menuOption.modal === true) {\n                // add standard pat-plone-modal.\n                // If you want another modal implementation, don't use modal=true but set the css option on action items.\n                menuOption.css += \" pat-plone-modal\";\n            }\n            if (menuOption.icon) {\n                menuOption.iconSVG = await utils.resolveIcon(menuOption.icon);\n            }\n        });\n\n        return result;\n    },\n\n    render: async function () {\n        this.el.innerHTML = \"\";\n\n        const data = this.model.toJSON();\n        data.header = this.options.header || null;\n        data.menuOptions = await this.menuOptionsCategorized();\n\n        this.el.innerHTML = this.template(\n            $.extend(\n                {\n                    dropdownIcon: await utils.resolveIcon(\"plone-settings\"),\n                    _t: _t,\n                    id: utils.generateId(),\n                },\n                data\n            )\n        );\n\n        if (this.options.className) {\n            this.$el.addClass(this.options.className);\n        }\n\n        registry.scan(this.$el);\n        return this.el;\n    },\n});\n","import $ from \"jquery\";\nimport _ from \"underscore\";\nimport _t from \"../../../../core/i18n-wrapper\";\nimport { translate_plone as _tp } from \"../../../../core/i18n-wrapper\"; // eslint-disable-line\nimport utils from \"../../../../core/utils\";\nimport Backbone from \"backbone\";\n\nimport ActionMenuView from \"./actionmenu\";\nimport TableRowTemplate from \"../../templates/tablerow.xml\";\n\nexport default Backbone.View.extend({\n    tagName: \"tr\",\n    className: \"itemRow\",\n    template: _.template(TableRowTemplate),\n\n    events: {\n        \"change input\": \"itemSelected\",\n        \"click td.title a.manage\": \"itemClicked\",\n    },\n\n    initialize: function (options) {\n        this.options = options;\n        this.app = options.app;\n        this.selectedCollection = this.app.selectedCollection;\n        this.table = this.options.table;\n        this.now = new Date();\n        this.listenTo(this.table, \"context-info:set\", this.render);\n    },\n\n    expired: function (data) {\n        if (!data.attributes.ExpirationDate) {\n            return false;\n        }\n        const dt = new Date(data.attributes.ExpirationDate);\n        return this.now > dt;\n    },\n\n    ineffective: function (data) {\n        if (!data.attributes.EffectiveDate) {\n            return false;\n        }\n        const dt = new Date(data.attributes.EffectiveDate);\n        return this.now < dt;\n    },\n\n    render: async function () {\n        const data = this.model.toJSON();\n\n        data.selected = !!this.selectedCollection.findWhere({ UID: data.UID });\n        data.attributes = this.model.attributes;\n        data.activeColumns = this.app.activeColumns;\n        data.availableColumns = this.app.availableColumns;\n        data.portal_type = data.portal_type ? data.portal_type : \"\";\n        data.contenttype = data.portal_type.toLowerCase().replace(/\\.| /g, \"-\");\n        data._authenticator = utils.getAuthenticator();\n        data.thumb_scale = this.app.thumb_scale;\n        data.mimeIcon = await utils.resolveIcon(`contenttype/${data.contenttype}`);\n\n        const viewAction =\n            (this.app.typeToViewAction &&\n                this.app.typeToViewAction[data.attributes.portal_type]) ||\n            \"\";\n        data.viewURL = data.attributes.getURL + viewAction;\n\n        data._t = _t;\n        data.convertColumnValue = this.convertColumnValue.bind(this);\n        data.expired = this.expired(data);\n        data.ineffective = this.ineffective(data);\n        data.exclude_from_nav = data.exclude_from_nav || false;\n\n        this.$el.html(this.template(data));\n\n        const attrs = this.model.attributes;\n        this.$el.addClass([`state-${attrs.review_state}`, `type-${attrs.portal_type}`]);\n        this.$el.attr(\"data-path\", data.path);\n        this.$el.attr(\"data-UID\", data.UID);\n        this.$el.attr(\"data-id\", data.id);\n        this.$el.attr(\"data-type\", data.portal_type);\n        this.$el.attr(\"data-folderish\", data.is_folderish);\n        this.$el.toggleClass(\"folder\", data.is_folderish);\n        this.$el.toggleClass(\n            \"default-page\",\n            data.id === this.table.contextInfo?.defaultPage\n        );\n        this.$el.toggleClass(\"expired\", data.expired);\n        this.$el.toggleClass(\"ineffective\", data.ineffective);\n\n        this.el.model = this.model;\n\n        const menuview = new ActionMenuView({\n            app: this.app,\n            model: this.model,\n        });\n        $(\".actionmenu-container\", this.$el).append(await menuview.render());\n\n        return this;\n    },\n\n    /**\n     * Converts Column value in Human-Readable format\n     * @param {string} column\n     * @param {*} value\n     * @returns {string|*}\n     */\n    convertColumnValue: function (column, value) {\n        if (this.table.dateColumns.includes(column)) {\n            const date = new Date(value);\n            if (date instanceof Date && date.toString() === \"Invalid Date\") {\n                return value;\n            }\n            return date.toLocaleString(this.app.language, this.app.dateFormat);\n        }\n        if (this.table.translatableColumns.includes(column)) {\n            return _tp(value);\n        }\n        return value;\n    },\n\n    itemClicked: function (e) {\n        /* check if this should just be opened in new window */\n        const keyEvent = this.app.keyEvent;\n        // Resolve the correct handler based on these keys.\n        if ((keyEvent && keyEvent.ctrlKey) || !this.model.attributes.is_folderish) {\n            // middle/ctrl-click or not a folder content\n            // not yet implemented.\n            return null;\n        }\n\n        e.preventDefault();\n        // handler for folder, go down path and show in contents window.\n        this.app.setCurrentPath(this.model.attributes.path);\n        // also switch to fix page in batch\n        this.app.collection.getFirstPage();\n    },\n\n    itemSelected: function () {\n        const checkbox = this.$(\"input\")[0];\n        const selectedCollection = this.app.selectedCollection;\n        if (checkbox.checked) {\n            selectedCollection.add(this.model.clone());\n        } else {\n            selectedCollection.removeResult(this.model);\n        }\n\n        /* check for shift click now */\n        const keyEvent = this.app.keyEvent;\n        if (\n            keyEvent &&\n            keyEvent.shiftKey &&\n            this.app[\"last_selected\"] &&\n            this.app[\"last_selected\"].parentNode !== null\n        ) {\n            let $el = $(this.app[\"last_selected\"]);\n            const lastCheckedIndex = $el.index();\n            const thisIndex = this.$el.index();\n            for (const item of this.app.tableView.$('input[type=\"checkbox\"]')) {\n                $el = $(item);\n                const index = $el.parents(\"tr\").index();\n                if (\n                    (index > lastCheckedIndex && index < thisIndex) ||\n                    (index < lastCheckedIndex && index > thisIndex)\n                ) {\n                    this.checked = checkbox.checked;\n                    const $tr = $(this).closest(\"tr.itemRow\");\n                    if ($tr.length > 0) {\n                        const model = $tr[0].model;\n                        const existing = selectedCollection.getByUID(\n                            model.attributes.UID\n                        );\n                        if (this.checked) {\n                            if (!existing) {\n                                selectedCollection.add(model.clone());\n                            }\n                        } else if (existing) {\n                            selectedCollection.removeResult(existing);\n                        }\n                    }\n                }\n            }\n        }\n        this.app[\"last_selected\"] = this.el;\n    },\n});\n","import $ from \"jquery\";\nimport _ from \"underscore\";\nimport _t from \"../../../../core/i18n-wrapper\";\nimport events from \"@patternslib/patternslib/src/core/events\";\nimport registry from \"@patternslib/patternslib/src/core/registry\";\nimport BaseView from \"../../../../core/ui/views/base\";\nimport TableRowView from \"./tablerow\";\nimport TableTemplate from \"../../templates/table.xml\";\nimport Sortable from \"../../../sortable/sortable\";\nimport \"../../../datatables/datatables\";\nimport \"bootstrap/js/src/alert\";\nimport utils from \"../../../../core/utils\";\nimport patternslib_utils from \"@patternslib/patternslib/src/core/utils\";\n\nexport default BaseView.extend({\n    tagName: \"div\",\n    template: _.template(TableTemplate),\n    tableSortable: null,\n\n    initialize: function (options) {\n        var self = this;\n        BaseView.prototype.initialize.apply(self, [options]);\n        self.collection = self.app.collection;\n        self.selectedCollection = self.app.selectedCollection;\n        self.subsetIds = [];\n        self.contextInfo = null;\n        self.tableSortable = null;\n\n        // init events\n        self.listenTo(self.collection, \"sync\", self.render);\n        self.listenTo(self.selectedCollection, \"remove\", self.render);\n        self.listenTo(self.selectedCollection, \"reset\", self.render);\n\n        $(\"body\").on(\"context-info-loaded\", (event, data) => {\n            self.contextInfo = data;\n            /* set default page info */\n            self.setContextInfo();\n        });\n\n        self.dateColumns = [\n            \"ModificationDate\",\n            \"EffectiveDate\",\n            \"CreationDate\",\n            \"ExpirationDate\",\n            \"start\",\n            \"end\",\n            \"last_comment_date\",\n        ];\n\n        self.translatableColumns = [\"review_state\"];\n    },\n\n    events: {\n        \"click .fc-breadcrumbs a\": \"breadcrumbClicked\",\n        \"change .select-all\": \"selectAll\",\n    },\n\n    setContextInfo: function () {\n        const data = this.contextInfo;\n        /* set breadcrumb title info */\n        const crumbs = data && data.breadcrumbs;\n        if (crumbs && crumbs.length) {\n            const $crumbs = this.$(\".fc-breadcrumbs a.crumb\");\n            _.each(crumbs, (crumb, idx) => {\n                $crumbs.eq(idx).html(patternslib_utils.escape_html(crumb.title));\n            });\n        }\n        this.trigger(\"context-info:set\");\n    },\n\n    render: async function () {\n        // By default do not start sorted by any column\n        // Ignore first column and the last one (activeColumns.length + 1)\n        // Do not show paginator, search or information, we only want column sorting\n        const datatables_options = {\n            order: [0, \"asc\"],\n            columnDefs: [\n                {\n                    orderable: false,\n                    targets: [0, this.app.activeColumns.length + 1],\n                },\n            ],\n            paging: false,\n            searching: false,\n            info: false,\n            ...this.app.options.datatables_options,\n        };\n\n        this.$el.html(\n            this.template({\n                _t: _t,\n                homeIcon: await utils.resolveIcon(\"house\"),\n                pathParts: this.app\n                    .getCurrentPath()\n                    .split(\"/\")\n                    .slice(1)\n                    .filter((val) => {\n                        return val.length > 0;\n                    }),\n                activeColumns: this.app.activeColumns,\n                availableColumns: this.app.availableColumns,\n                datatables_options: JSON.stringify(datatables_options),\n            })\n        );\n\n        if (this.collection.length) {\n            const container = $(\"tbody\", this.$el);\n\n            const collection_length = this.collection.length;\n            let collection_cnt = 0;\n\n            this.collection.each(async (result) => {\n                this.dateColumns.map((col) => {\n                    // empty column instead of displaying \"None\".\n                    if (\n                        Object.prototype.hasOwnProperty.call(result.attributes, col) &&\n                        (result.attributes[col] === \"None\" || !result.attributes[col])\n                    ) {\n                        result.attributes[col] = \"\";\n                    }\n                });\n\n                const view = new TableRowView({\n                    model: result,\n                    app: this.app,\n                    table: this,\n                });\n                await view.render();\n                container.append(view.el);\n\n                // Throw the ``table_row_rendering_finished`` event after all table rows have finished rendering.\n                collection_cnt++;\n                if (collection_cnt === collection_length) {\n                    this.el.dispatchEvent(new Event(\"table_row_rendering_finished\"));\n                }\n            });\n\n            // NOTE: this is based on the concept of awaiting an event.\n            // See this Stackoverflow answer here:\n\n            // https://stackoverflow.com/a/44746691/1337474\n            // When the last table row has finished rendering, throw an event.\n            // For this \"table_row_rendering_finished\" event we're a-waiting for.\n            // And after that we can scan the table.\n            const table_row_rendering_finished = () =>\n                new Promise((resolve) =>\n                    events.add_event_listener(\n                        this.el,\n                        \"table_row_rendering_finished\",\n                        \"table_row_rendering_finished__listener\",\n                        resolve,\n                        { once: true }\n                    )\n                );\n\n            await table_row_rendering_finished();\n            events.remove_event_listener = (this.el, \"table_row_rendering_finished__listener\"); // prettier-ignore\n            registry.scan(this.$el);\n        }\n\n        this.$el\n            .find(\"table\")\n            .on(\"init.dt\", () => {\n                // Add reordering action by drag and drop\n                if (this.app.options.moveUrl) {\n                    this.addReordering();\n                }\n                // store Order of nativ sorting for move action\n                this.storeOrder();\n            })\n            .on(\"order.dt\", (e, settings, ordArr) => {\n                // prevent message from showing for nativ order\n                if (ordArr.length === 1) {\n                    const order = ordArr[0];\n                    if (order.col === 0 && order.dir === \"asc\") {\n                        if (this.tableSortable) {\n                            this.tableSortable.enableSort();\n                        }\n                        // Clear the status message\n                        this.app.clearStatus(\"sorting_dndreordering_disabled\");\n                        return;\n                    }\n                }\n                const e_target = e.target;\n                const btn = $(\n                    '<button type=\"button\" class=\"btn btn-danger btn-sm\"></button>'\n                )\n                    .text(_t(\"Reset column sorting\"))\n                    .on(\"click\", () => {\n                        // Use column 0 to restore ordering and then empty list so it doesn't\n                        // show the icon in the column header\n                        const api = $(e_target).dataTable().api();\n                        api.order([0, \"asc\"]);\n                        api.draw();\n                    });\n                this.app.setStatus(\n                    {\n                        text: _t(\"Notice: Drag and drop reordering is disabled when viewing the contents sorted by a column.\"), // prettier-ignore\n                        type: \"warning\",\n                    },\n                    btn,\n                    false,\n                    \"sorting_dndreordering_disabled\"\n                );\n                if (this.tableSortable) {\n                    this.tableSortable.disableSort();\n                }\n                this.$el.removeClass(\"order-support\");\n            });\n\n        return this;\n    },\n\n    breadcrumbClicked: function (e) {\n        e.preventDefault();\n        let $el = $(e.target);\n        if ($el[0].tagName !== \"A\") {\n            $el = $el.parent(\"a\");\n        }\n        let path = \"\";\n        for (const item of $($el.prevAll(\"a\").get().reverse())) {\n            let part = $(item).attr(\"data-path\");\n            path += part;\n            if (part !== \"/\") {\n                path += \"/\";\n            }\n        }\n        path += $el.attr(\"data-path\");\n        this.app.setCurrentPath(path);\n        this.app.collection.getPage(this.app.collection.state.firstPage);\n    },\n\n    selectAll: function (e) {\n        if ($(e.target).is(\":checked\")) {\n            $('input[type=\"checkbox\"]', this.$(\"tbody\")).prop(\"checked\", true).trigger(\"change\");\n        } else {\n            /* delaying the re-rendering is much faster in this case */\n            this.selectedCollection.remove(this.collection.models, {\n                silent: true,\n            });\n            this.selectedCollection.trigger(\"remove\");\n        }\n        this.setContextInfo();\n    },\n    toggleSelectAll: function (e) {\n        const $el = $(e.target);\n        if (!$el.is(\":checked\")) {\n            this.$(\".select-all\").prop(\"checked\", false);\n        }\n    },\n\n    addReordering: function () {\n        // if we have a custom query going on, we do not allow sorting.\n        if (this.app.inQueryMode()) {\n            this.$el.removeClass(\"order-support\");\n            return;\n        }\n        this.$el.addClass(\"order-support\");\n        this.tableSortable = new Sortable(this.$(\"tbody\"), {\n            selector: \"tr\",\n            createDragItem: (pattern, $el) => {\n                const $tr = $el.clone();\n                const $table = $(\"<table><tbody></tbody></table>\");\n                $(\"tbody\", $table).append($tr);\n                $table\n                    .addClass(\"structure-dragging\")\n                    .css({ opacity: 0.85, position: \"absolute\" });\n                $table.width($el.width());\n                $table.height($el.height());\n                $table.appendTo(document.body);\n                return $table;\n            },\n            drop: ($el, delta) => {\n                if (delta !== 0) {\n                    this.app.moveItem($el.attr(\"data-id\"), delta, this.subsetIds);\n                    this.storeOrder();\n                }\n            },\n        });\n    },\n\n    storeOrder: function () {\n        const subsetIds = [];\n        this.$(\"tbody tr.itemRow\").each(function () {\n            subsetIds.push($(this).attr(\"data-id\"));\n        });\n        this.subsetIds = subsetIds;\n    },\n});\n","import $ from \"jquery\";\nimport _ from \"underscore\";\nimport ContainerView from \"./container\";\nimport Backdrop from \"../../../pat/backdrop/backdrop\";\nimport PopoverTemplate from \"../templates/popover.xml\";\n\nexport default ContainerView.extend({\n    tagName: \"div\",\n    className: \"popover\",\n    eventPrefix: \"popover\",\n    template: PopoverTemplate,\n    content: null,\n    title: null,\n    triggerView: null,\n    idPrefix: \"popover-\",\n    triggerEvents: {\n        \"button:click\": \"toggle\",\n    },\n    placement: \"bottom\",\n    events: {},\n    opened: false,\n    closeOnOutClick: true,\n    appendInContainer: true,\n    backdrop: undefined,\n    $backdrop: null,\n    useBackdrop: true,\n    backdropOptions: {\n        zIndex: \"1009\",\n        opacity: \"0.4\",\n        className: \"backdrop backdrop-popover\",\n        classActiveName: \"backdrop-active\",\n        closeOnEsc: false,\n        closeOnClick: true,\n    },\n    initialize: function (options) {\n        var self = this;\n        ContainerView.prototype.initialize.apply(this, [options]);\n        this.bindTriggerEvents();\n\n        this.on(\n            \"render\",\n            function () {\n                this.$el.attr(\"role\", \"tooltip\").attr(\"aria-hidden\", \"false\");\n                this.renderTitle();\n                this.renderContent();\n            },\n            this\n        );\n\n        this.$el.on(\"keyup\", function (e) {\n            if (e.keyCode === 27) {\n                self.hide();\n            }\n        });\n    },\n    afterRender: function () {},\n    getTemplateOptions: function () {\n        return this.options;\n    },\n    renderTitle: function () {\n        var title = this.title;\n        if (typeof title === \"function\") {\n            title = title(this.getTemplateOptions());\n        }\n        this.$(\".popover-title\").empty().append(title);\n    },\n    renderContent: function () {\n        this.$(\".popover-content\")\n            .empty()\n            .append(this.content(this.getTemplateOptions()));\n    },\n    bindTriggerEvents: function () {\n        if (this.triggerView) {\n            _.each(\n                this.triggerEvents,\n                function (func, event) {\n                    var method = this[func];\n                    if (!method) {\n                        $.error(\"Function not found.\");\n                    }\n                    this.stopListening(this.triggerView, event);\n                    this.listenTo(this.triggerView, event, method);\n                },\n                this\n            );\n        }\n    },\n\n    getPosition: function () {\n        var $el = this.triggerView.$el;\n        return $.extend(\n            {},\n            {\n                width: $el[0].offsetWidth,\n                height: $el[0].offsetHeight,\n            },\n            $el.offset()\n        );\n    },\n\n    getBodyClassName: function () {\n        var name = \"popover-\";\n        if (this.options.id) {\n            name += this.options.id + \"-\";\n        }\n        name += \"active\";\n        return name;\n    },\n\n    show: function () {\n        /* hide existing */\n        $(\".popover:visible\").each(function () {\n            var popover = $(this).data(\"component\");\n            if (popover) {\n                popover.hide();\n            }\n        });\n\n        this.position();\n\n        this.setBackdrop();\n        if (this.useBackdrop === true) {\n            this.backdrop.show();\n        }\n\n        this.opened = true;\n\n        if (this.triggerView) {\n            this.triggerView.$el.addClass(\"active\");\n        }\n\n        this.uiEventTrigger(\"show\", this);\n        this.$el.attr(\"aria-hidden\", \"false\");\n        $(\"body\").addClass(this.getBodyClassName());\n    },\n\n    position: function () {\n        var pos = this.getPosition();\n        var $tip = this.$el,\n            tp,\n            placement,\n            actualWidth,\n            actualHeight;\n\n        placement = this.placement;\n\n        $tip.css({ top: 0, left: 0 }).addClass(\"active\");\n\n        actualWidth = $tip[0].offsetWidth;\n        actualHeight = $tip[0].offsetHeight;\n\n        switch (placement) {\n            case \"bottom-right\":\n                tp = {\n                    top: pos.top + pos.height,\n                    left: pos.left + pos.width - 40,\n                };\n                break;\n            case \"bottom\":\n                tp = {\n                    top: pos.top + pos.height,\n                    left: pos.left + pos.width / 2 - actualWidth / 2,\n                };\n                break;\n            case \"top\":\n                tp = {\n                    top: pos.top - actualHeight,\n                    left: pos.left + pos.width / 2 - actualWidth / 2,\n                };\n                break;\n            case \"left\":\n                tp = {\n                    top: pos.top + pos.height / 2 - actualHeight / 2,\n                    left: pos.left - actualWidth,\n                };\n                break;\n            case \"right\":\n                tp = {\n                    top: pos.top + pos.height / 2 - actualHeight / 2,\n                    left: pos.left + pos.width,\n                };\n                break;\n        }\n\n        this.applyPlacement(tp, placement);\n    },\n\n    applyPlacement: function (offset, placement) {\n        var $el = this.$el,\n            $tip = this.$el,\n            width = $tip[0].offsetWidth,\n            height = $tip[0].offsetHeight,\n            actualWidth,\n            actualHeight,\n            delta,\n            replace;\n\n        $el.removeClass(placement);\n\n        $el.offset(offset).addClass(placement).addClass(\"active\");\n\n        actualWidth = $tip[0].offsetWidth;\n        actualHeight = $tip[0].offsetHeight;\n\n        if (placement === \"top\" && actualHeight !== height) {\n            offset.top = offset.top + height - actualHeight;\n            replace = true;\n        }\n\n        if (placement === \"bottom\" || placement === \"top\") {\n            delta = 0;\n\n            if (offset.left < 0) {\n                delta = offset.left * -2;\n                offset.left = 0;\n                $el.removeClass(placement);\n                $el.offset(offset).addClass(placement);\n                actualWidth = $tip[0].offsetWidth;\n                actualHeight = $tip[0].offsetHeight;\n            }\n\n            this.positionArrow(delta - width + actualWidth, actualWidth, \"left\");\n        } else if (placement !== \"bottom-right\") {\n            // If placement is bottom-right, don't override left position for the arrow that is defined in css to 20px.\n            this.positionArrow(actualHeight - height, actualHeight, \"top\");\n        }\n\n        if (replace) {\n            $el.offset(offset);\n        }\n    },\n    positionArrow: function (delta, dimension, position) {\n        var $arrow = this.$(\".arrow\");\n        $arrow.css(position, delta ? 50 * (1 - delta / dimension) + \"%\" : \"\");\n    },\n    hide: function () {\n        this.opened = false;\n        this.$el.removeClass(\"active\");\n        if (this.triggerView) {\n            this.triggerView.$el.removeClass(\"active\");\n            this.triggerView.$el.attr(\"aria-hidden\", \"true\");\n        }\n        this.uiEventTrigger(\"hide\", this);\n        this.$el.attr(\"aria-hidden\", \"true\");\n        $(\"body\").removeClass(this.getBodyClassName());\n    },\n    // eslint-disable-next-line no-unused-vars\n    toggle: function (button, e) {\n        if (this.opened) {\n            this.hide();\n        } else {\n            this.show();\n        }\n    },\n    setBackdrop: function () {\n        if (this.useBackdrop === true && this.backdrop === undefined) {\n            var self = this;\n            this.$backdrop = this.$el.closest(\".ui-backdrop-element\");\n            if (this.$backdrop.length === 0) {\n                this.$backdrop = $(\"body\");\n            }\n\n            this.backdrop = new Backdrop(this.$backdrop, this.backdropOptions);\n            this.backdrop.$el.on(\"hidden.backdrop.patterns\", function (e) {\n                if (e.namespace === \"backdrop.patterns\") {\n                    e.stopPropagation();\n                    if (self.opened === true) {\n                        self.hide();\n                    }\n                }\n            });\n            this.on(\n                \"popover:hide\",\n                function () {\n                    this.backdrop.hide();\n                },\n                this\n            );\n        }\n    },\n});\n","import $ from \"jquery\";\nimport _ from \"underscore\";\nimport PopoverView from \"../../../../core/ui/views/popover\";\nimport utils from \"../../../../core/utils\";\nimport ItemTemplate from \"../../templates/selection_item.xml\";\n\nexport default PopoverView.extend({\n    className: \"popover selected-items\",\n\n    title: _.template(\n        '<input type=\"text\" class=\"filter\" placeholder=\"<%- _t(\"Filter\") %>\" />' +\n            '<a href=\"#\" class=\" remove-all\">' +\n            '<%= removeIcon %> <%- _t(\"remove all\") %></a>'\n    ),\n\n    content: _.template(\n        \"<% collection.each(function(item) { %>\" +\n            \"<%= item_template($.extend({'removeIcon': removeIcon}, item.toJSON())) %>\" +\n            \"<% }); %>\"\n    ),\n\n    events: {\n        \"click a.remove\": \"itemRemoved\",\n        \"keyup input.filter\": \"filterSelected\",\n        \"click .remove-all\": \"removeAll\",\n    },\n\n    initialize: function (options) {\n        PopoverView.prototype.initialize.apply(this, [options]);\n        let timeout = 0;\n        this.listenTo(this.collection, \"reset all add remove\", () => {\n            clearTimeout(timeout);\n            timeout = setTimeout(() => {\n                this.render();\n            }, 50);\n        });\n        this.options[\"item_template\"] = _.template(ItemTemplate);\n    },\n\n    render: async function () {\n        this.options[\"removeIcon\"] = await utils.resolveIcon(\"x-circle\");\n        PopoverView.prototype.render.call(this);\n        if (this.collection.length === 0) {\n            this.$el.removeClass(\"active\");\n        }\n        return this;\n    },\n\n    itemRemoved: function (e) {\n        e.preventDefault();\n        const uid = $(e.currentTarget).data(\"uid\");\n        this.collection.removeByUID(uid);\n        if (this.collection.length !== 0) {\n            // re-rendering causes it to close, reopen\n            this.show();\n        }\n    },\n\n    filterSelected: function (e) {\n        const val = $(e.target).val().toLowerCase();\n        for (const item of $(\".selected-item\", this.$el)) {\n            const $el = $(item);\n            if ($el.text().toLowerCase().indexOf(val) === -1) {\n                $el.hide();\n            } else {\n                $el.show();\n            }\n        }\n    },\n\n    removeAll: function (e) {\n        e.preventDefault();\n        this.collection.reset();\n        this.hide();\n    },\n});\n","import $ from \"jquery\";\nimport _ from \"underscore\";\nimport _t from \"../../../../core/i18n-wrapper\";\nimport PopoverView from \"../../../../core/ui/views/popover\";\nimport registry from \"@patternslib/patternslib/src/core/registry\";\nimport utils from \"@patternslib/patternslib/src/core/utils\";\n\nexport default PopoverView.extend({\n    events: {\n        \"click button.applyBtn\": \"applyButtonClicked\",\n        \"click button.closeBtn\": \"toggle\",\n    },\n    submitText: _t(\"Apply\"),\n\n    initialize: function (options) {\n        this.app = options.app;\n        this.className = \"popover \" + options.id;\n        this.title = options.form.title || options.title;\n        this.submitText = options.form.submitText || _t(\"Apply\");\n        this.submitContext = options.form.submitContext || \"primary\";\n        this.data = {};\n\n        this.options = options;\n        this.setContent(options.form.template);\n\n        PopoverView.prototype.initialize.apply(this, [options]);\n    },\n\n    setContent: function (content) {\n        let html = \"<form>\" + content + \"</form>\";\n        html +=\n            '<button class=\"btn btn-block btn-' +\n            this.submitContext +\n            ' applyBtn\">' +\n            this.submitText +\n            \" </button>\";\n        if (this.options.form.closeText) {\n            html +=\n                '<button class=\"btn btn-block btn-secondary closeBtn\">' +\n                this.options.form.closeText +\n                \" </button>\";\n        }\n        this.content = _.template(html);\n    },\n\n    getTemplateOptions: function () {\n        const items = [];\n        for (const item of this.app.selectedCollection.models) {\n            let _json = item.toJSON();\n            _json[\"Title\"] = utils.escape_html(_json[\"Title\"]);\n            items.push(_json);\n        }\n        return $.extend({}, true, this.options, {\n            items: items,\n            data: this.data,\n        });\n    },\n\n    applyButtonClicked: function () {\n        const data = {};\n        for (const param of this.$el.find(\"form\").serializeArray()) {\n            if (param.name in data) {\n                data[param.name] += \",\" + param.value;\n            } else {\n                data[param.name] = param.value;\n            }\n        }\n\n        this.app.buttonClickEvent(this.triggerView, data);\n        this.hide();\n    },\n\n    afterRender: function () {\n        if (this.options.form.dataUrl) {\n            this.$(\".popover-content\").html(_t(\"Loading...\"));\n            this.app.loading.show();\n            const url = this.app.getAjaxUrl(this.options.form.dataUrl);\n            $.ajax({\n                url: url,\n                dataType: \"json\",\n                type: \"POST\",\n                cache: false,\n                data: {\n                    selection: JSON.stringify(this.app.getSelectedUids()),\n                    transitions: true,\n                    render: \"yes\",\n                },\n            })\n                .done((result) => {\n                    this.data = result.data || result;\n                    this.renderContent();\n                    registry.scan(this.$el);\n                })\n                .fail(() => {\n                    /* we temporarily set original html to a value here so we can\n             render the updated content and then put the original back */\n                    const originalContent = this.content;\n                    this.setContent(\n                        \"<p>\" + _t(\"Error loading popover from server.\") + \"</p>\",\n                        false\n                    );\n                    this.renderContent();\n                    this.content = originalContent;\n                })\n                .always(() => {\n                    this.app.loading.hide();\n                    this.position();\n                });\n        } else {\n            registry.scan(this.$el);\n            this.position();\n        }\n    },\n\n    toggle: function (button, e) {\n        PopoverView.prototype.toggle.apply(this, [button, e]);\n        if (!this.opened) {\n            return;\n        }\n        this.$el.replaceWith(this.render().el);\n        this.position();\n    },\n});\n","import _ from \"underscore\";\nimport _t from \"../../../../core/i18n-wrapper\";\nimport PopoverView from \"../../../../core/ui/views/popover\";\n\nexport default PopoverView.extend({\n    className: \"popover rearrange\",\n    title: _.template('<%- _t(\"Rearrange items in this folder\") %>'),\n    content: _.template(\n        '<div class=\"form-group\">' +\n            '<label><%- _t(\"What to rearrange on\") %></label>' +\n            '<select name=\"rearrange_on\" class=\"form-select\">' +\n            \"<% _.each(rearrangeProperties, function(title, property) { %>\" +\n            '<option value=\"<%- property %>\"><%- title %></option>' +\n            \"<% }); %>\" +\n            \"</select>\" +\n            '<p class=\"help-block\">' +\n            '<b><%- _t(\"This permanently changes the order of items in this folder. This operation may take a long time depending on the size of the folder.\") %></b>' + // prettier-ignore\n            \"</p>\" +\n            \"</div>\" +\n            '<div class=\"form-check\">' +\n            '<input class=\"form-check-input\" type=\"checkbox\" name=\"reversed\" />' +\n            '<label class=\"form-check-label\"><%- _t(\"Reverse\") %></label>' +\n            \"</div>\" +\n            '<button class=\"btn btn-block btn-primary btn-sm\"><%- _t(\"Rearrange\") %></button>'\n    ),\n\n    events: {\n        \"click button\": \"rearrangeButtonClicked\",\n    },\n\n    initialize: function (options) {\n        this.app = options.app;\n        PopoverView.prototype.initialize.apply(this, [options]);\n        this.options.rearrangeProperties = this.app.options.rearrange.properties;\n    },\n\n    render: function () {\n        PopoverView.prototype.render.call(this);\n        this.$rearrangeOn = this.$('[name=\"rearrange_on\"]');\n        this.$reversed = this.$('[name=\"reversed\"]');\n        return this;\n    },\n\n    rearrangeButtonClicked: function () {\n        if (this.app.collection.getCurrentPath() === \"/\") {\n            if (\n                !window.confirm(\n                    _t(\"Sorting the content on the base of the site could affect your navigation order. Are you certain you want to do this?\") // prettier-ignore\n                )\n            ) {\n                return;\n            }\n        }\n        const data = {\n            rearrange_on: this.$rearrangeOn.val(),\n            reversed: false,\n        };\n        if (this.$reversed[0].checked) {\n            data.reversed = true;\n        }\n        this.app.buttonClickEvent(this.triggerView, data);\n        this.hide();\n    },\n});\n","import ButtonView from \"../../../../core/ui/views/button\";\nimport tplButton from \"../../templates/selection_button.xml\";\n\nexport default ButtonView.extend({\n    collection: null,\n    template: tplButton,\n\n    initialize: function (options) {\n        ButtonView.prototype.initialize.apply(this, [options]);\n        this.timeout = 0;\n        if (this.collection !== null) {\n            this.collection.on(\n                \"add remove reset\",\n                () => {\n                    /* delay it */\n                    clearTimeout(this.timeout);\n                    this.timeout = setTimeout(() => {\n                        this.render();\n                        if (this.collection.length === 0) {\n                            this.$el.removeClass(\"active\");\n                        }\n                    }, 50);\n                },\n                this\n            );\n        }\n    },\n\n    serializedModel: function () {\n        const obj = {\n            icon: \"\",\n            title: this.options.title,\n            length: 0,\n        };\n        if (this.collection !== null) {\n            obj.length = this.collection.length;\n        }\n        return obj;\n    },\n});\n","import $ from \"jquery\";\nimport _ from \"underscore\";\nimport _t from \"../../../../core/i18n-wrapper\";\nimport Backbone from \"backbone\";\nimport PagingTemplate from \"../../templates/paging.xml\";\nimport logging from \"@patternslib/patternslib/src/core/logging\";\n\nconst log = logging.getLogger(\"pat-structure/table\");\nlog.setLevel(\"DEBUG\");\n\nexport default Backbone.View.extend({\n    events: {\n        \"click a.servernext\": \"nextResultPage\",\n        \"click a.serverprevious\": \"previousResultPage\",\n        \"click a.serverlast\": \"gotoLast\",\n        \"click a.page\": \"gotoPage\",\n        \"click a.serverfirst\": \"gotoFirst\",\n        \"click a.serverpage\": \"gotoPage\",\n        \"click .serverhowmany a\": \"changeCount\",\n    },\n\n    tagName: \"aside\",\n    template: _.template(PagingTemplate),\n    maxPages: 7,\n\n    initialize: function (options) {\n        this.options = options;\n        this.app = this.options.app;\n        this.collection = this.app.collection;\n        this.listenTo(this.collection, \"reset\", this.render);\n        this.listenTo(this.collection, \"sync\", this.render);\n    },\n\n    render: function () {\n        const data = this.collection.state;\n        data.pages = this.getPages(data);\n        const html = this.template(\n            $.extend(\n                {\n                    _t: _t,\n                },\n                data\n            )\n        );\n\n        this.$el.html(html);\n        return this;\n    },\n\n    getPages: function (data) {\n        const totalPages = data.totalPages;\n        if (!totalPages) {\n            return [];\n        }\n        let left = 1;\n        let right = totalPages;\n        if (totalPages > this.maxPages) {\n            left = Math.max(1, Math.floor(data.currentPage - this.maxPages / 2));\n            right = Math.min(left + this.maxPages, totalPages);\n            if (right - left < this.maxPages) {\n                left = left - Math.floor(this.maxPages / 2);\n            }\n        }\n        let pages = [];\n        for (let i = left; i <= right; i = i + 1) {\n            pages.push(i);\n        }\n\n        /* add before and after */\n        if (pages[0] > 1) {\n            if (pages[0] > 2) {\n                pages = [\"...\"].concat(pages);\n            }\n            pages = [1].concat(pages);\n        }\n        if (pages[pages.length - 1] < totalPages - 1) {\n            if (pages[pages.length - 2] < totalPages - 2) {\n                pages.push(\"...\");\n            }\n            pages.push(totalPages);\n        }\n        return pages;\n    },\n\n    nextResultPage: function (e) {\n        e.preventDefault();\n        this.app.clearStatus();\n        this.collection.getNextPage();\n    },\n\n    previousResultPage: function (e) {\n        e.preventDefault();\n        this.app.clearStatus();\n        this.collection.getPreviousPage();\n    },\n\n    gotoFirst: function (e) {\n        e.preventDefault();\n        this.app.clearStatus();\n        this.collection.getPage(this.collection.state.firstPage);\n    },\n\n    gotoLast: function (e) {\n        e.preventDefault();\n        this.app.clearStatus();\n        this.collection.getPage(this.collection.state.totalPages);\n    },\n\n    gotoPage: function (e) {\n        e.preventDefault();\n        this.app.clearStatus();\n        const page = parseInt($(e.target).text());\n        this.collection.getPage(page);\n    },\n\n    changeCount: function (e) {\n        e.preventDefault();\n        this.app.clearStatus();\n        const size = parseInt($(e.target).text());\n        this.collection.setPageSize(size, { first: true });\n        this.app.setCookieSetting(\"pageSize\", size);\n    },\n});\n","import $ from \"jquery\";\nimport _ from \"underscore\";\nimport PopoverView from \"../../../../core/ui/views/popover\";\nimport Sortable from \"../../../sortable/sortable\";\n\nexport default PopoverView.extend({\n    className: \"popover attribute-columns\",\n    title: _.template('<%- _t(\"Columns\") %>'),\n    content: _.template(`\n        <label>\n            <%- _t(\"Select columns to show, drag and drop to reorder\") %>\n        </label>\n        <ul>\n        </ul>\n        <button class=\"btn btn-block btn-primary btn-sm\"><%- _t(\"Save\") %></button>`),\n    itemTemplate: _.template(`\n        <li>\n            <div class=\"form-check form-switch\">\n                <input class=\"form-check-input\" type=\"checkbox\" role=\"switch\" id=\"columnswitch-<%- id %>\" value=\"<%- id %>\"/>\n                <label class=\"form-check-label\" for=\"columnswitch-<%- id %>\"><%- title %></label>\n            </div>\n        </li>`),\n    events: {\n        \"click button\": \"applyButtonClicked\",\n    },\n\n    initialize: function (options) {\n        this.app = options.app;\n        PopoverView.prototype.initialize.apply(this, [options]);\n    },\n\n    afterRender: function () {\n        const objKeySortCmp = (a, b) => {\n            // object key sort compare function\n            const ca = this.app.availableColumns[a];\n            const cb = this.app.availableColumns[b];\n            if (ca < cb) {\n                return -1;\n            } else if (ca == cb) {\n                return 0;\n            } else {\n                return 1;\n            }\n        };\n\n        this.$container = this.$(\"ul\");\n\n        for (const id of this.app.activeColumns) {\n            const $el = $(\n                this.itemTemplate({\n                    title: this.app.availableColumns[id],\n                    id: id,\n                })\n            );\n            $el.find(\"input\")[0].checked = true;\n            this.$container.append($el);\n        }\n\n        const availableKeys = _.keys(\n            _.omit(this.app.availableColumns, this.app.activeColumns)\n        ).sort(objKeySortCmp);\n        for (const id of availableKeys) {\n            const $el = $(\n                this.itemTemplate({\n                    title: this.app.availableColumns[id],\n                    id: id,\n                })\n            );\n            this.$container.append($el);\n        }\n\n        new Sortable(this.$container, {\n            selector: \"li\",\n        });\n        return this;\n    },\n\n    async applyButtonClicked() {\n        this.hide();\n        this.app.activeColumns = [];\n        for (const inp of this.$(\"input:checked\")) {\n            this.app.activeColumns.push($(inp).val());\n        }\n        this.app.setCookieSetting(this.app.activeColumnsCookie, this.app.activeColumns);\n        await this.app.tableView.render();\n    },\n});\n","import $ from \"jquery\";\nimport _ from \"underscore\";\nimport _t from \"../../../../core/i18n-wrapper\";\nimport QueryString from \"../../../querystring/querystring\";\nimport BaseView from \"../../../../core/ui/views/base\";\nimport ButtonView from \"../../../../core/ui/views/button\";\nimport PopoverView from \"../../../../core/ui/views/popover\";\n\nexport default BaseView.extend({\n    tagName: \"div\",\n    className: \"navbar-search form-search ui-offset-parent\",\n    template: _.template(\n        '<div class=\"input-group\">' +\n            '<input id=\"textFilterInput\" type=\"text\" class=\"form-control search-query\" aria-label=\"<%- _t(\"Search\") %>\" placeholder=\"<%- _t(\"Search\") %>\">' +\n            \"</div>\"\n    ),\n    popoverContent: _.template('<input class=\"pat-querystring\" />'),\n    events: {\n        \"keyup .search-query\": \"filter\",\n    },\n    term: null,\n    timeoutId: null,\n    keyupDelay: 300,\n    statusKeyFilter: \"textfilter_status_message_filter\",\n    statusKeySorting: \"textfilter_status_message_sorting\",\n\n    initialize: function (options) {\n        BaseView.prototype.initialize.apply(this, [options]);\n        this.app = this.options.app;\n    },\n\n    setFilterStatusMessage: function () {\n        const clear_btn = $(\n            '<button type=\"button\" class=\"btn btn-primary btn-sm\"></button>'\n        )\n            .text(_t(\"Clear\"))\n            .on(\"click\", () => this.clearFilter());\n\n        const statusTextFilter = _t(\"This listing has filters applied. Not all items are shown.\"); // prettier-ignore\n        this.app.setStatus(\n            {\n                text: statusTextFilter,\n                type: \"success\",\n            },\n            clear_btn,\n            true,\n            this.statusKeyFilter\n        );\n\n        const statusTextSorting = _t(\"Drag and drop reordering is disabled while filters are applied.\"); // prettier-ignore\n        this.app.setStatus(\n            {\n                text: statusTextSorting,\n                type: \"warning\",\n            },\n            null,\n            true,\n            this.statusKeySorting\n        );\n    },\n\n    clearFilterStatusMessage: function () {\n        if (!this.term && !this.app.additionalCriterias.length) {\n            this.app.clearStatus(this.statusKeyFilter);\n            this.app.clearStatus(this.statusKeySorting);\n        }\n    },\n\n    setTerm: function (term, set_input) {\n        const term_el = this.$el[0].querySelector(\".search-query\");\n        this.term = encodeURIComponent(term);\n        if (set_input) {\n            term_el.value = term;\n        }\n        this.app.collection.currentPage = 1;\n        this.app.collection.fetch();\n\n        if (term) {\n            term_el.classList.add(\"has-filter\");\n            this.setFilterStatusMessage();\n        } else {\n            let hasquery = false;\n            try {\n                const qu = this.$queryString.val();\n                if (qu && JSON.parse(qu).length > 0) {\n                    hasquery = true;\n                }\n            } finally {\n                if (!hasquery) {\n                    term_el.classList.remove(\"has-filter\");\n                    this.clearFilterStatusMessage();\n                }\n            }\n        }\n    },\n\n    setQuery: function (query, set_input) {\n        let query_string = null;\n        let query_obj = null;\n        try {\n            if (typeof query === \"string\") {\n                query_obj = JSON.parse(query);\n                query_string = query;\n            } else {\n                query_string = JSON.stringify(query);\n                query_obj = query;\n            }\n        } catch {\n            query_obj = [];\n            query_string = \"[]\";\n        }\n\n        if (set_input) {\n            this.$queryString.val(query_string);\n            // TODO clear query string form\n            // this.queryString._init();\n        }\n        this.app.additionalCriterias = query_obj;\n        this.app.collection.currentPage = 1;\n        this.app.collection.fetch();\n        if (query_obj.length) {\n            this.button.$el[0].classList.add(\"has-filter\");\n            this.setFilterStatusMessage();\n        } else if (!this.term) {\n            this.button.$el[0].classList.remove(\"has-filter\");\n            this.clearFilterStatusMessage();\n        }\n    },\n\n    clearTerm: function () {\n        this.setTerm(\"\", true);\n    },\n\n    clearFilter: function () {\n        this.setTerm(\"\", true);\n        this.setQuery([], true);\n    },\n\n    render: function () {\n        this.$el.html(this.template({ _t: _t }));\n        this.button = new ButtonView({\n            title: _t(\"Filter\"),\n            icon: \"filter\",\n            extraClasses: [\"btn-queryfilter\"],\n        });\n        this.popover = new PopoverView({\n            triggerView: this.button,\n            id: \"structure-query\",\n            title: _.template(_t(\"Filter\")),\n            content: this.popoverContent,\n            placement: \"left\",\n        });\n        this.$el.find(\".input-group\").append(this.button.render().el);\n        this.$el.append(this.popover.render().el);\n        this.popover.$el.addClass(\"query\");\n        this.$queryString = this.popover.$(\"input.pat-querystring\");\n        this.queryString = new QueryString(this.$queryString, {\n            indexOptionsUrl: this.app.options.indexOptionsUrl,\n            showPreviews: false,\n        });\n        this.queryString.$el.on(\"change\", () => {\n            if (this.timeoutId) {\n                clearTimeout(this.timeoutId);\n            }\n            this.timeoutId = setTimeout(() => {\n                this.setQuery(this.$queryString.val(), false);\n            }, this.keyupDelay);\n        });\n        this.queryString.$el.on(\"initialized\", () => {\n            this.queryString.$sortOn.on(\"change\", () => {\n                this.app[\"sort_on\"] = this.queryString.$sortOn.val();\n                this.app.collection.currentPage = 1;\n                this.app.collection.fetch();\n            });\n            this.queryString.$sortOrder.change(() => {\n                if (this.queryString.$sortOrder[0].checked) {\n                    this.app[\"sort_order\"] = \"reverse\";\n                } else {\n                    this.app[\"sort_order\"] = \"ascending\";\n                }\n                this.app.collection.currentPage = 1;\n                this.app.collection.fetch();\n            });\n        });\n        return this;\n    },\n\n    filter: function (event) {\n        if (this.timeoutId) {\n            clearTimeout(this.timeoutId);\n        }\n        this.timeoutId = setTimeout(() => {\n            const term_el = $(event.currentTarget);\n            this.setTerm(term_el.val(), false);\n        }, this.keyupDelay);\n    },\n});\n","import $ from \"jquery\";\nimport _ from \"underscore\";\nimport PopoverView from \"../../../../core/ui/views/popover\";\nimport Upload from \"../../../upload/upload\";\n\nexport default PopoverView.extend({\n    className: \"popover upload\",\n    title: _.template('<%- _t(\"Upload files\") %>'),\n    content: _.template(\n        '<input type=\"text\" name=\"upload\" style=\"display:none\" />' +\n            '<div class=\"uploadify-me\"></div>'\n    ),\n\n    initialize(options) {\n        this.app = options.app;\n        PopoverView.prototype.initialize.apply(this, [options]);\n        this.currentPathData = null;\n        $(\"body\").on(\"context-info-loaded\", (event, data) => {\n            this.currentPathData = data;\n        });\n    },\n\n    render() {\n        PopoverView.prototype.render.call(this);\n        var options = this.app.options.upload;\n        options.success = () => {\n            this.app.collection.fetch();\n        };\n        options.currentPath = this.app.getCurrentPath();\n        options.allowPathSelection = false;\n        this.upload = new Upload(\n            this.$(\".uploadify-me\").addClass(\"pat-upload\"),\n            options\n        );\n        return this;\n    },\n\n    toggle(button, e) {\n        /* we need to be able to change the current default upload directory */\n        PopoverView.prototype.toggle.apply(this, [button, e]);\n        if (!this.opened) {\n            return;\n        }\n        var currentPath = this.app.getCurrentPath();\n        if (this.currentPathData && currentPath !== this.upload.currentPath) {\n            this.upload.setPath(currentPath);\n        }\n    },\n});\n","import Backbone from \"backbone\";\nimport Result from \"../models/result\";\n\nexport default Backbone.Collection.extend({\n    model: Result,\n\n    removeResult: function (model) {\n        return this.removeByUID(model.uid());\n    },\n\n    removeByUID: function (uid) {\n        var found = this.getByUID(uid);\n        if (found) {\n            this.remove(found);\n        }\n        return found;\n    },\n\n    getByUID: function (uid) {\n        return this.findWhere({ UID: uid });\n    },\n});\n","import Backbone from \"backbone\";\nimport Result from \"../models/result\";\nimport utils from \"../../../../core/utils\";\nimport \"backbone.paginator\";\n\nexport default Backbone.PageableCollection.extend({\n    model: Result,\n    mode: \"server\",\n\n    initialize: function (models, options) {\n        this.options = options;\n        this.view = options.view;\n        this.url = options.url;\n\n        this.queryHelper = utils.QueryHelper({\n            attributes: this.view.options.queryHelperAttributes,\n            ...this.view.options,\n        });\n\n        this.queryParser = function (options) {\n            if (options === undefined) {\n                options = {};\n            }\n            const term = this.view?.toolbar?.get?.(\"filter\")?.term || null;\n            const sortOn = this.view?.sort_on || \"getObjPositionInParent\";\n            const sortOrder = this.view.sort_order;\n\n            return JSON.stringify({\n                criteria: this.queryHelper.getCriterias(term, {\n                    additionalCriterias: this.view.additionalCriterias,\n                    ...options,\n                }),\n                sort_on: sortOn,\n                sort_order: sortOrder,\n            });\n        };\n\n        // check and see if a hash is provided for initial path\n        if (window.location.hash.substring(0, 2) === \"#/\") {\n            this.queryHelper.currentPath = window.location.hash.substring(1);\n        }\n\n        Backbone.PageableCollection.prototype.initialize.apply(this, [models, options]);\n    },\n\n    getCurrentPath: function () {\n        return this.queryHelper.getCurrentPath();\n    },\n\n    setCurrentPath: function (path) {\n        this.queryHelper.currentPath = path;\n    },\n\n    // query parameters passed directly (currently GET\n    // parameters).  These are currently generated using following\n    // functions.\n    queryParams: {\n        query: function () {\n            return this.queryParser();\n        },\n        batch: function () {\n            this.queryHelper.options.batchSize = this.state.pageSize;\n            return JSON.stringify(this.queryHelper.getBatch(this.state.currentPage));\n        },\n        attributes: function () {\n            return JSON.stringify(this.queryHelper.options.attributes);\n        },\n    },\n\n    parseState: function (response, queryParams, state, options) {  // eslint-disable-line\n        this.state.totalRecords = response.total;\n        this.state.totalPages = Math.ceil(response.total / state.pageSize);\n    },\n\n    parseRecords: function (response, options) {  // eslint-disable-line\n        const results = response.results;\n        // Manually set sort order here since backbone will otherwise do arbitrary sorting\n        results.forEach((item, idx) => {\n            item._sort = idx;\n        });\n        return results;\n    },\n});\n","import $ from \"jquery\";\nimport _ from \"underscore\";\nimport _t from \"../../../../core/i18n-wrapper\";\nimport dom from \"@patternslib/patternslib/src/core/dom\";\nimport utils from \"../../../../core/utils\";\nimport logging from \"@patternslib/patternslib/src/core/logging\";\nimport Cookies from \"js-cookie\";\n\nimport Toolbar from \"../../../../core/ui/views/toolbar\";\nimport ButtonGroup from \"../../../../core/ui/views/buttongroup\";\nimport ButtonView from \"../../../../core/ui/views/button\";\nimport BaseView from \"../../../../core/ui/views/base\";\n\nimport TableView from \"./table\";\nimport SelectionWellView from \"./selectionwell\";\nimport GenericPopover from \"./generic-popover\";\nimport RearrangeView from \"./rearrange\";\nimport SelectionButtonView from \"./selectionbutton\";\nimport PagingView from \"./paging\";\nimport ColumnsView from \"./columns\";\nimport TextFilterView from \"./textfilter\";\nimport UploadView from \"./upload\";\nimport SelectedCollection from \"../collections/selected\";\nimport StatusTemplate from \"../../templates/status.xml\";\n\nimport ResultCollection from \"../collections/result\";\n\nconst log = logging.getLogger(\"pat-structure/app\");\n\nexport default BaseView.extend({\n    tagName: \"div\",\n    statusTemplate: _.template(StatusTemplate),\n    statusMessages: [],\n    sort_on: \"getObjPositionInParent\",\n    sort_order: \"ascending\",\n    additionalCriterias: [],\n    cookieSettingPrefix: \"_fc_\",\n\n    buttons: null,\n    textfilter: null,\n    forms: [],\n\n    pasteAllowed: function () {\n        return !!Cookies.get(\"__cp\");\n    },\n\n    initialize: function (options) {\n        BaseView.prototype.initialize.apply(this, [options]);\n        this.loading = new utils.Loading();\n        this.loading.show();\n\n        /* close popovers when clicking away */\n        $(document).on(\"click\", (e) => {\n            const $el = $(e.target);\n            if (\n                !$el.is(\":visible\") ||\n                $el.css(\"visibility\") === \"hidden\" ||\n                $el.css(\"opacity\") === \"0\"\n            ) {\n                // ignore this, fake event trigger to element that is not visible\n                return;\n            }\n            if ($el.is(\"a\") || $el.parent().is(\"a\") || $el.hasClass(\"popover-structure-query-active\")) {\n                // elements that should not close\n                // NOTE: \"popover-structure-query-active\" is set on body when\n                // select2 elements are clicked inside the structure filter\n                // -> Firefox gets a bubbled click event and would close the popover\n                return;\n            }\n            const $popover = $(\".popover:visible\");\n            if ($popover.length > 0 && !$.contains($popover[0], $el[0])) {\n                const popover = $popover.data(\"component\");\n                if (popover) {\n                    popover.hide();\n                }\n            }\n        });\n\n        this.collection = new ResultCollection([], {\n            // Due to default implementation need to poke at things in here,\n            // view is passed.\n            view: this,\n            url: this.options.collectionUrl,\n        });\n\n        this.activeColumns = this.getCookieSetting(\n            this.activeColumnsCookie,\n            this.activeColumns\n        );\n\n        this.selectedCollection = new SelectedCollection();\n        this.pagingView = new PagingView({ app: this });\n        this.tableView = new TableView({ app: this });\n\n        // set initial pageSize\n        this.collection.state.pageSize = this.getCookieSetting(\"pageSize\", 15);\n\n        // fetch results from collection\n        // NOTE: this also calls this.tableView.render() and\n        // this.pagingView.render()\n        this.collection.fetch();\n\n        // initialize buttons\n        this.setupButtons();\n\n        this.wellView = new SelectionWellView({\n            collection: this.selectedCollection,\n            triggerView: this.toolbar.get(\"selected-items\"),\n            app: this,\n            id: \"selected-items\",\n        });\n\n        this.toolbar.get(\"selected-items\").disable();\n        this.buttons.disable();\n\n        let timeout = 0;\n        this.selectedCollection.on(\n            \"add remove reset\",\n            (/*modal, collection*/) => {\n                /* delay rendering since this can happen in batching */\n                clearTimeout(timeout);\n                timeout = setTimeout(() => {\n                    this.updateButtons();\n                }, 100);\n            },\n            this\n        );\n\n        this.collection.on(\"sync\", () => {\n            if (this.contextInfoUrl) {\n                $.ajax({\n                    url: this.getAjaxUrl(this.contextInfoUrl),\n                    dataType: \"json\",\n                    success: (data) => {\n                        $(\"body\").trigger(\"context-info-loaded\", [data]);\n                    },\n                    error: (response) => {\n                        // XXX handle error?\n                        if (response.status === 404) {\n                            log.info(\"context info url not found\");\n                        }\n                    },\n                });\n            }\n\n            // undo the flag set by popState to prevent the push state\n            // from being triggered here, and early abort out of the\n            // function to not execute the folowing pushState logic.\n            if (this.doNotPushState) {\n                this.doNotPushState = false;\n                return;\n            }\n\n            this.loading.show();\n            this.updateButtons();\n\n            let path = this.getCurrentPath();\n            let url;\n            if (path === \"/\") {\n                path = \"\";\n            }\n            /* maintain history here */\n            if (this.options.pushStateUrl) {\n                // permit an extra slash in pattern, but strip that if there\n                // as path always will be prefixed with a `/`\n                const pushStateUrl = this.options.pushStateUrl.replace(\n                    \"/{path}\",\n                    \"{path}\"\n                );\n                url = pushStateUrl.replace(\"{path}\", path);\n                window.history.pushState(null, null, url);\n            } else if (this.options.urlStructure) {\n                // fallback to urlStructure specification\n                url =\n                    this.options.urlStructure.base +\n                    path +\n                    this.options.urlStructure.appended;\n                window.history.pushState(null, null, url);\n            }\n\n            if (this.options.traverseView) {\n                // flag specifies that the context view implements a traverse\n                // view (i.e. IPublishTraverse) and the path is a virtual path\n                // of some kind - use the base object instead for that by not\n                // specifying a path.\n                path = \"\";\n                // TODO figure out whether the following event after this is\n                // needed at all.\n            }\n            $(\"body\").trigger(\"structure-url-changed\", [path]);\n\n            this.loading.hide();\n        });\n\n        if (\n            (this.options.pushStateUrl || this.options.urlStructure) &&\n            utils.featureSupport.history()\n        ) {\n            $(window).on(\"popstate\", () => {\n                /* normalize this url first... */\n                const win = utils.getWindow();\n                let url = win.location.href;\n                let base, appended;\n                if (url.indexOf(\"?\") !== -1) {\n                    url = url.split(\"?\")[0];\n                }\n                if (url.indexOf(\"#\") !== -1) {\n                    url = url.split(\"#\")[0];\n                }\n                if (this.options.pushStateUrl) {\n                    const tmp = this.options.pushStateUrl.split(\"{path}\");\n                    base = tmp[0];\n                    appended = tmp[1];\n                } else {\n                    base = this.options.urlStructure.base;\n                    appended = this.options.urlStructure.appended;\n                }\n                // take off the base url\n                let path = url.substring(base.length);\n                if (path.substring(path.length - appended.length) === appended) {\n                    /* check that it ends with appended value */\n                    path = path.substring(0, path.length - appended.length);\n                }\n                if (!path) {\n                    path = \"/\";\n                }\n                this.setCurrentPath(path);\n                $(\"body\").trigger(\"structure-url-changed\", [path]);\n                // since this next call causes state to be pushed...\n                this.doNotPushState = true;\n                this.collection.getPage(this.collection.state.firstPage);\n            });\n            /* detect key events */\n            $(document).on(\"keyup keydown\", (e) => {\n                this.keyEvent = e;\n            });\n        }\n\n        this.togglePasteBtn();\n    },\n\n    updateButtons: function () {\n        if (this.selectedCollection.length) {\n            this.toolbar.get(\"selected-items\").enable();\n            this.buttons.enable();\n        } else {\n            this.toolbar.get(\"selected-items\").disable();\n            this.buttons.disable();\n        }\n\n        this.togglePasteBtn();\n    },\n\n    togglePasteBtn: function () {\n        if (\n            _.find(this.buttons.items, (btn) => {\n                return btn.id === \"paste\";\n            })\n        ) {\n            if (this.pasteAllowed()) {\n                this.buttons.get(\"paste\").enable();\n            } else {\n                this.buttons.get(\"paste\").disable();\n            }\n        }\n    },\n\n    inQueryMode: function () {\n        if (this.toolbar) {\n            if (this.toolbar.get(\"filter\").term) {\n                return true;\n            }\n        }\n        if (this.additionalCriterias.length > 0) {\n            return true;\n        }\n        if (this.sort_on && this.sort_on !== \"getObjPositionInParent\") {\n            return true;\n        }\n        if (this.sort_order !== \"ascending\") {\n            return true;\n        }\n        return false;\n    },\n\n    getSelectedUids: function (collection) {\n        if (collection === undefined) {\n            collection = this.selectedCollection;\n        }\n        const uids = [];\n        collection.each(function (item) {\n            uids.push(item.uid());\n        });\n        return uids;\n    },\n\n    getCurrentPath: function () {\n        return this.collection.getCurrentPath();\n    },\n\n    setCurrentPath: function (path) {\n        this.collection.setCurrentPath(path);\n        // this.textfilter.clearTerm();\n        this.clearStatus();\n    },\n\n    getAjaxUrl: function (url) {\n        return url.replace(\"{path}\", this.getCurrentPath());\n    },\n\n    buttonClickEvent: function (button) {\n        let data = null;\n        let callback = null;\n\n        if (button.url) {\n            this.loading.show();\n            // handle ajax now\n\n            if (arguments.length > 1) {\n                const arg1 = arguments[1];\n                if (!arg1.preventDefault) {\n                    data = arg1;\n                }\n            }\n            if (arguments.length > 2) {\n                const arg2 = arguments[2];\n                if (typeof arg2 === \"function\") {\n                    callback = arg2;\n                }\n            }\n            if (data === null) {\n                data = {};\n            }\n            if (data.selection === undefined) {\n                // if selection is overridden by another mechanism\n                data.selection = JSON.stringify(this.getSelectedUids());\n            }\n            data._authenticator = utils.getAuthenticator();\n            if (data.folder === undefined) {\n                data.folder = this.getCurrentPath();\n            }\n\n            const url = this.getAjaxUrl(button.url);\n            $.ajax(\n                {\n                    url: url,\n                    type: \"POST\",\n                    data: data,\n                    success: (data) => {\n                        this.ajaxSuccessResponse.apply(this, [data, callback]);\n                        this.loading.hide();\n                    },\n                    error: (response) => {\n                        this.ajaxErrorResponse.apply(this, [response, url]);\n                        this.loading.hide();\n                    },\n                },\n                this\n            );\n        }\n    },\n\n    ajaxSuccessResponse: function (data, callback) {\n        this.clearStatus();\n        this.selectedCollection.reset();\n        if (data.status === \"success\") {\n            this.collection.reset();\n        }\n        if (data.msg) {\n            // give status message somewhere...\n            this.setStatus({\n                text: data.msg,\n                type: data.status || \"warning\",\n            });\n        }\n        if (callback !== null && callback !== undefined) {\n            callback(data);\n        }\n        this.collection.fetch();\n    },\n\n    ajaxErrorResponse: function (response, url) {\n        if (response.status === 404) {\n            window.alert(_t(\"operation url ${url} is not valid\", { url: url }));\n        } else {\n            window.alert(_t(\"there was an error performing the action\"));\n        }\n    },\n\n    setupButtons: function () {\n        const items = [];\n\n        const columnsBtn = new ButtonView({\n            id: \"structure-columns\",\n            tooltip: _t(\"Configure displayed columns\"),\n            icon: \"plone-three-dots\",\n        });\n\n        this.columnsView = new ColumnsView({\n            app: this,\n            triggerView: columnsBtn,\n            id: \"structure-columns\",\n            placement: \"bottom-right\",\n        });\n        items.push(columnsBtn);\n\n        items.push(\n            new SelectionButtonView({\n                title: _t(\"Selected\"),\n                id: \"selected-items\",\n                tooltip: _t(\"Manage selection\"),\n                collection: this.selectedCollection,\n                icon: \"plone-selection\",\n            })\n        );\n\n        if (this.options.rearrange) {\n            const rearrangeButton = new ButtonView({\n                id: \"structure-rearrange\",\n                title: _t(\"Rearrange\"),\n                icon: \"plone-rearrange\",\n                tooltip: _t(\"Rearrange folder contents\"),\n                url: this.options.rearrange.url,\n            });\n            this.rearrangeView = new RearrangeView({\n                triggerView: rearrangeButton,\n                app: this,\n                id: \"structure-rearrange\",\n            });\n            items.push(rearrangeButton);\n        }\n        if (\n            this.options.upload &&\n            utils.featureSupport.dragAndDrop() &&\n            utils.featureSupport.fileApi()\n        ) {\n            const uploadButton = new ButtonView({\n                id: \"upload\",\n                title: _t(\"Upload\"),\n                tooltip: _t(\"Upload files\"),\n                icon: \"upload\",\n            });\n            this.uploadView = new UploadView({\n                triggerView: uploadButton,\n                app: this,\n                id: \"upload\",\n            });\n            items.push(uploadButton);\n        }\n\n        const buttons = [];\n        for (const buttonOptions of this.options.buttons) {\n            try {\n                const button = new ButtonView(buttonOptions);\n                buttons.push(button);\n\n                if (button.form) {\n                    buttonOptions.triggerView = button;\n                    buttonOptions.app = this;\n                    const view = new GenericPopover(buttonOptions);\n                    this.forms.push(view.el);\n                } else {\n                    button.on(\"button:click\", () => this.buttonClickEvent(button), this);\n                }\n            } catch (err) {\n                log.error(\n                    `Error initializing button ${\n                        buttonOptions.title || buttonOptions.id\n                    } ${err}`\n                );\n            }\n        }\n        this.buttons = new ButtonGroup({\n            items: buttons,\n            id: \"mainbuttons\",\n            app: this,\n        });\n        items.push(this.buttons);\n\n        this.textfilter = new TextFilterView({\n            id: \"filter\",\n            app: this,\n        });\n        items.push(this.textfilter);\n\n        this.toolbar = new Toolbar({\n            items: items,\n        });\n    },\n\n    moveItem: function (id, delta, subsetIds) {\n        $.ajax({\n            url: this.getAjaxUrl(this.options.moveUrl),\n            type: \"POST\",\n            data: {\n                delta: delta,\n                id: id,\n                _authenticator: utils.getAuthenticator(),\n                subsetIds: JSON.stringify(subsetIds),\n            },\n            dataType: \"json\",\n            success: (data) => {\n                this.clearStatus();\n                if (data.msg) {\n                    this.setStatus({ text: data.msg });\n                } else if (data.status !== \"success\") {\n                    // XXX handle error here with something?\n                    this.setStatus({\n                        text: _t(\"Error moving item\"),\n                        type: \"danger\",\n                    });\n                }\n                this.collection.fetch(); // reload it all\n            },\n            error: () => {\n                this.clearStatus();\n                this.setStatus({\n                    text: _t(\"Error moving item\"),\n                    type: \"danger\",\n                });\n            },\n        });\n    },\n\n    clearStatus: function (key) {\n        const statusContainer = this.$el[0].querySelector(\".fc-status-container\");\n        let toBeRemoved = [];\n        if (key) {\n            // remove specific status, even if marked with ``fixed``.\n            toBeRemoved = this.statusMessages.filter(function (item) {\n                return item.key === key;\n            });\n            toBeRemoved.forEach(function (statusItem) {\n                try {\n                    statusContainer.removeChild(statusItem.el);\n                } catch {\n                    // just ignore.\n                }\n            });\n            this.statusMessages = this.statusMessages.filter(function (item) {\n                return item.key !== key;\n            });\n        } else {\n            // remove all status messages except those marked with ``fixed``.\n            this.statusMessages.forEach(\n                function (statusItem) {\n                    if (!statusItem.fixed) {\n                        try {\n                            statusContainer.removeChild(statusItem.el);\n                            toBeRemoved.push(statusItem);\n                        } catch {\n                            // just ignore.\n                        }\n                    }\n                }.bind(this)\n            );\n            this.statusMessages = this.statusMessages.filter(function (item) {\n                return toBeRemoved.indexOf(item) === -1;\n            });\n        }\n    },\n\n    setStatus: function (status, btn, fixed, key) {\n        if (\n            key &&\n            this.statusMessages.filter(function (item) {\n                return item.key === key;\n            }).length > 0\n        ) {\n            // Prevent two same status messages\n            return;\n        }\n\n        const el = dom.create_from_string(\n            this.statusTemplate({\n                label: status.label || \"\",\n                text: status.text,\n                type: status.type || \"warning\",\n            })\n        ).lastChild;\n\n        if (btn) {\n            btn = $(btn)[0]; // support jquert + bare dom elements\n            el.appendChild(btn);\n        }\n\n        status = {\n            el: el,\n            fixed: fixed,\n            key: key, // to be used for filtering to prevent double status messages.\n        };\n\n        const statusContainer = this.$el[0].querySelector(\".fc-status-container\");\n        statusContainer.appendChild(status.el);\n        this.statusMessages.push(status);\n\n        return status;\n    },\n\n    render: async function () {\n        this.$el.append(this.toolbar.render().el);\n        if (this.wellView) {\n            this.$el\n                .find(\"#btn-\" + this.wellView.id)\n                .after((await this.wellView.render()).el);\n        }\n        for (const form of this.forms) {\n            const id = $(form).attr(\"id\");\n            const $btn = this.$el.find(\"#btn-\" + id);\n            if ($btn.closest(\".btn-group\").length) {\n                $btn.closest(\".btn-group\").after(form);\n            } else {\n                this.$el.find(\"#btn-\" + id).after(form);\n            }\n        }\n        this.$el.append(\n            dom.create_from_string('<div class=\"fc-status-container\"></div>')\n        );\n        if (this.columnsView) {\n            this.$el\n                .find(\"#btn-\" + this.columnsView.id)\n                .after(this.columnsView.render().el);\n        }\n        if (this.rearrangeView) {\n            this.$el\n                .find(\"#btn-\" + this.rearrangeView.id)\n                .after(this.rearrangeView.render().el);\n        }\n        if (this.uploadView) {\n            this.$el\n                .find(\"#btn-\" + this.uploadView.id)\n                .after(this.uploadView.render().el);\n        }\n\n        // NOTE: tableView and pagingView get rendered on\n        // this.collection.fetch() on initialization so we simply\n        // append the rendered output to the template once here\n        this.$el.append(this.tableView.el);\n        this.$el.append(this.pagingView.el);\n\n        // Backdrop class\n        if (this.options.backdropSelector !== null) {\n            $(this.options.backdropSelector).addClass(\"ui-backdrop-element\");\n        } else {\n            this.$el.addClass(\"ui-backdrop-element\");\n        }\n\n        return this;\n    },\n\n    getCookieSetting: function (name, _default) {\n        if (_default === undefined) {\n            _default = null;\n        }\n        let val;\n        try {\n            val = Cookies.get(this.cookieSettingPrefix + name);\n            val = JSON.parse(val).value;\n        } catch {\n            /* error parsing json, load default here now */\n            return _default;\n        }\n        if (val === undefined || val === null) {\n            return _default;\n        }\n        return val;\n    },\n\n    setCookieSetting: function (name, val) {\n        Cookies.set(\n            this.cookieSettingPrefix + name,\n            JSON.stringify({\n                value: val,\n            })\n        );\n    },\n});\n"],"names":["Backbone","extend","isUIView","eventPrefix","template","idPrefix","appendInContainer","initialize","options","key","this","_t","render","applyTemplate","trigger","afterRender","id","$el","attr","serializedModel","data","$","_","html","propagateEvent","eventName","indexOf","eventId","split","uiEventTrigger","name","args","slice","call","arguments","prototype","apply","BaseView","items","itemContainer","isOffsetParent","renderItems","bindEvents","addClass","$container","length","view","append","self","on","eventTarget","newName","newArgs","undefined","get","add","item","push","ContainerView","tagName","className","disable","button","enable","context","attributes","href","extraClasses","tooltip","events","click","title","toLowerCase","replace","cid","async","klass","bind","icon","icon_markup","utils","resolveIcon","icon_el","dom","create_from_string","prepend","Tooltip","e","type","stopPropagation","handleClick","preventDefault","is","removeClass","menuOptions","url","category","css","modal","method","menu","app","model","canMove","moveUrl","result","JSON","parse","stringify","pasteAllowed","is_folderish","pasteItem","inQueryMode","defaultPageTypes","portal_type","setDefaultPageUrl","selectAll","typeToViewAction","viewAction","openItem","getURL","editItem","defaults","review_state","uid","UID","selectedCollection","page","count","getPage","loading","show","URL","collection","searchParams","queryParser","searchPath","path","size","queryHelper","resp","fetch","headers","Accept","json","Result","total","hide","tableView","doAction","buttonName","successMsg","failMsg","buttons","body","URLSearchParams","selection","folder","_authenticator","getAuthenticator","msg","state_type","status","Title","updateButtons","clearStatus","setStatus","text","cutClicked","copyClicked","pasteClicked","moveTopClicked","moveItem","moveBottomClicked","setDefaultPageClicked","getAjaxUrl","ajaxSuccessResponse","generate_events","menuOption","actions","Actions","actionmenu_generator","delegateEvents","menuOptionsCategorized","idx","generateId","classes","iconSVG","el","innerHTML","toJSON","header","dropdownIcon","registry","scan","table","now","Date","listenTo","expired","ExpirationDate","dt","ineffective","EffectiveDate","selected","findWhere","activeColumns","availableColumns","contenttype","thumb_scale","mimeIcon","viewURL","convertColumnValue","exclude_from_nav","attrs","toggleClass","contextInfo","defaultPage","menuview","ActionMenuView","column","value","dateColumns","includes","date","toString","toLocaleString","language","dateFormat","translatableColumns","_tp","itemClicked","keyEvent","ctrlKey","setCurrentPath","getFirstPage","itemSelected","checkbox","checked","clone","removeResult","shiftKey","parentNode","lastCheckedIndex","index","thisIndex","parents","$tr","closest","existing","getByUID","tableSortable","subsetIds","event","setContextInfo","crumbs","breadcrumbs","$crumbs","crumb","eq","patternslib_utils","escape_html","datatables_options","order","columnDefs","orderable","targets","paging","searching","info","homeIcon","pathParts","getCurrentPath","filter","val","container","collection_length","collection_cnt","each","map","col","Object","hasOwnProperty","TableRowView","dispatchEvent","Event","table_row_rendering_finished","Promise","resolve","add_event_listener","once","remove_event_listener","find","addReordering","storeOrder","settings","ordArr","dir","enableSort","e_target","target","btn","api","dataTable","draw","disableSort","breadcrumbClicked","parent","prevAll","reverse","part","state","firstPage","prop","remove","models","silent","toggleSelectAll","Sortable","selector","createDragItem","pattern","$table","opacity","position","width","height","appendTo","document","drop","delta","content","triggerView","triggerEvents","placement","opened","closeOnOutClick","backdrop","$backdrop","useBackdrop","backdropOptions","zIndex","classActiveName","closeOnEsc","closeOnClick","bindTriggerEvents","renderTitle","renderContent","keyCode","getTemplateOptions","empty","func","stopListening","getPosition","offsetWidth","offsetHeight","offset","getBodyClassName","popover","setBackdrop","tp","actualWidth","actualHeight","pos","$tip","top","left","applyPlacement","positionArrow","dimension","toggle","Backdrop","namespace","PopoverView","timeout","clearTimeout","setTimeout","itemRemoved","currentTarget","removeByUID","filterSelected","removeAll","reset","submitText","form","submitContext","setContent","closeText","_json","applyButtonClicked","param","serializeArray","buttonClickEvent","dataUrl","dataType","cache","getSelectedUids","transitions","done","fail","originalContent","always","replaceWith","rearrangeProperties","rearrange","properties","$rearrangeOn","$reversed","rearrangeButtonClicked","window","confirm","rearrange_on","reversed","ButtonView","obj","logging","getLogger","setLevel","maxPages","pages","getPages","totalPages","right","Math","max","floor","currentPage","min","i","concat","nextResultPage","getNextPage","previousResultPage","getPreviousPage","gotoFirst","gotoLast","gotoPage","parseInt","changeCount","setPageSize","first","setCookieSetting","itemTemplate","availableKeys","sort","objKeySortCmp","a","b","ca","cb","inp","activeColumnsCookie","popoverContent","term","timeoutId","keyupDelay","statusKeyFilter","statusKeySorting","setFilterStatusMessage","clear_btn","clearFilter","statusTextFilter","statusTextSorting","clearFilterStatusMessage","additionalCriterias","setTerm","set_input","term_el","querySelector","encodeURIComponent","classList","hasquery","qu","$queryString","setQuery","query","query_string","query_obj","clearTerm","queryString","QueryString","indexOptionsUrl","showPreviews","$sortOn","$sortOrder","change","currentPathData","upload","success","currentPath","allowPathSelection","Upload","setPath","found","mode","QueryHelper","queryHelperAttributes","toolbar","sortOn","sort_on","sortOrder","sort_order","criteria","getCriterias","location","hash","substring","queryParams","batch","batchSize","pageSize","getBatch","parseState","response","totalRecords","ceil","parseRecords","results","forEach","_sort","log","statusTemplate","statusMessages","cookieSettingPrefix","textfilter","forms","Cookies","Loading","hasClass","$popover","ResultCollection","collectionUrl","getCookieSetting","SelectedCollection","pagingView","PagingView","TableView","setupButtons","wellView","SelectionWellView","contextInfoUrl","error","doNotPushState","pushStateUrl","history","pushState","urlStructure","base","appended","traverseView","featureSupport","getWindow","tmp","togglePasteBtn","uids","callback","arg1","arg2","ajaxErrorResponse","alert","columnsBtn","columnsView","ColumnsView","SelectionButtonView","rearrangeButton","rearrangeView","RearrangeView","dragAndDrop","fileApi","uploadButton","uploadView","UploadView","buttonOptions","GenericPopover","err","ButtonGroup","TextFilterView","Toolbar","statusContainer","toBeRemoved","statusItem","removeChild","fixed","label","lastChild","appendChild","after","$btn","backdropSelector","_default"],"sourceRoot":""}