"use strict";(self.webpackChunk_plone_mockup=self.webpackChunk_plone_mockup||[]).push([[85083],{3831:function(I,g,A){A.d(g,{EO:function(){return n},Em:function(){return c},Yq:function(){return u},gf:function(){return b},qz:function(){return s},r1:function(){return d},x6:function(){return i}});var C=A(23505),l=A(49264),e=A(67545);const t=C.A.getLogger("pat-contentbrowser");async function c(I){let{method:g="GET",vocabularyUrl:A=null,attributes:C=[],path:l=null,uids:e=null,searchTerm:c=null,searchIndex:i="SearchableText",searchPath:s=null,levelInfoPath:n=null,selectableTypes:b=[],browseableTypes:d=[],pageSize:u=100,page:a=1}=I,o={criteria:[]};if(l&&(o={criteria:[{i:"path",o:"plone.app.querystring.operation.string.path",v:`${l}::1`}],sort_on:"getObjPositionInParent",sort_order:"ascending"},b.length&&o.criteria.push({i:"portal_type",o:"plone.app.querystring.operation.list.contains",v:b.concat(d)})),n&&(o={criteria:[{i:"path",o:"plone.app.querystring.operation.string.path",v:`${n}::0`}]}),s&&(o={criteria:[{i:"path",o:"plone.app.querystring.operation.string.path",v:s}]},b.length&&o.criteria.push({i:"portal_type",o:"plone.app.querystring.operation.list.contains",v:b})),e&&(o={criteria:[{i:"UID",o:"plone.app.querystring.operation.list.contains",v:e}]}),c&&o.criteria.push({i:i,o:"plone.app.querystring.operation.string.contains",v:c}),!o.criteria.length)return{results:[],total:0};const G=JSON.stringify(o),r=JSON.stringify(C),Z=JSON.stringify({page:a,size:u}),m=encodeURI(`${A}${-1!==A.indexOf("?")?"&":"?"}query=${G}&attributes=${r}&batch=${Z}`);t.debug(m);const X=new Headers;X.set("Accept","application/json");const B=await fetch(m,{method:g,headers:X});if(!B.ok)return{results:[],total:0,errors:x.errors};const x=await B.json();if(!s&&!n&&b.length){const I={results:[],total:x.total};for(const g of x.results)(-1!=b.indexOf(g.portal_type)||g.is_folderish)&&I.results.push(g);return I}return x}async function i(I,g){if(!I)return[];const A=await c({vocabularyUrl:g.vocabularyUrl,attributes:g.attributes,uids:I});let C=await(A?.results)||[];return C.sort(((g,A)=>I.indexOf(g.UID)-I.indexOf(A.UID))),C}async function s(I,g){let{iconName:A}=g;const C=await async function(I){return await l.A.resolveIcon(I)}(A);return I.outerHTML=C,{destroy(){}}}function n(I){const g=g=>{I&&!I.contains(g.target)&&I.dispatchEvent(new CustomEvent("click_outside",I))};return document.addEventListener("click",g,!0),{destroy(){document.removeEventListener("click",g,!0)}}}function b(I,g){let A=l.A.storage.get(g.recentlyUsedKey)||[];A=A.slice(A.length-1e3,A.length),I&&g?.selectableTypes.length&&(A=A.filter((I=>-1!=g.selectableTypes.indexOf(I.portal_type))));const C=parseInt(g.recentlyUsedMaxItems,20);return C&&(A=A.slice(A.length-C,A.length)),A}function d(I,g){if(!g.recentlyUsed)return;const A=b(!1,g),C=A.filter((g=>g.UID===I.UID));C.length>0&&A.splice(A.indexOf(C[0]),1),A.push(I),l.A.storage.set(g.recentlyUsedKey,A)}function u(I){const g=Date.parse(I),A=new e.A;return new Date(g).toLocaleString(A.currentLanguage.replace("_","-"))}},19394:function(I,g,A){var C=A(71354),l=A.n(C),e=A(76314),t=A.n(e)()(l());t.push([I.id,".content-browser-selected-items-wrapper.svelte-awokap{display:flex;align-items:start}.content-browser-selected-items.svelte-awokap{list-style:none;background-color:var(--bs-body-bg);border-radius:var(--bs-border-radius) 0 0 var(--bs-border-radius);border:var(--bs-border-style) var(--bs-border-color) var(--bs-border-width);min-height:2.4rem;padding:.5rem .5rem 0 .5rem;flex:1 1 auto}","",{version:3,sources:["webpack://./src/pat/contentbrowser/src/SelectedItems.svelte"],names:[],mappings:"AAAA,sDAAA,YAAA,CAAA,iBAAA,CAAA,8CAAA,eAAA,CAAA,kCAAA,CAAA,iEAAA,CAAA,2EAAA,CAAA,iBAAA,CAAA,2BAAA,CAAA,aAAA",sourcesContent:[".content-browser-selected-items-wrapper.svelte-awokap{display:flex;align-items:start}.content-browser-selected-items.svelte-awokap{list-style:none;background-color:var(--bs-body-bg);border-radius:var(--bs-border-radius) 0 0 var(--bs-border-radius);border:var(--bs-border-style) var(--bs-border-color) var(--bs-border-width);min-height:2.4rem;padding:0.5rem 0.5rem 0 0.5rem;flex:1 1 auto}\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiU2VsZWN0ZWRJdGVtcy5zdmVsdGUiLCJzb3VyY2VzIjpbIlNlbGVjdGVkSXRlbXMuc3ZlbHRlIl0sInNvdXJjZXNDb250ZW50IjpbIjxzY3JpcHQ+XG4gICAgaW1wb3J0IHsgZ2V0Q29udGV4dCwgb25Nb3VudCwgc2V0Q29udGV4dCB9IGZyb20gXCJzdmVsdGVcIjtcbiAgICBpbXBvcnQgeyBnZXRfaXRlbXNfZnJvbV91aWRzIH0gZnJvbSBcIi4vdXRpbHMuanNcIjtcbiAgICBpbXBvcnQgU29ydGFibGUgZnJvbSBcInNvcnRhYmxlanNcIjtcbiAgICBpbXBvcnQgX3QgZnJvbSBcIi4uLy4uLy4uL2NvcmUvaTE4bi13cmFwcGVyXCI7XG4gICAgaW1wb3J0IGV2ZW50cyBmcm9tIFwiQHBhdHRlcm5zbGliL3BhdHRlcm5zbGliL3NyYy9jb3JlL2V2ZW50c1wiO1xuICAgIGltcG9ydCBwbG9uZV9yZWdpc3RyeSBmcm9tIFwiQHBsb25lL3JlZ2lzdHJ5XCI7XG5cbiAgICBsZXQgcmVmO1xuICAgIGxldCBpbml0aWFsaXppbmcgPSB0cnVlO1xuICAgIGxldCBSZWdpc3RlcmVkU2VsZWN0ZWRJdGVtO1xuXG4gICAgLy8gZ2V0IHJlYWN0aXZlIGNvbnRleHQgY29uZmlnXG4gICAgY29uc3QgY29uZmlnID0gZ2V0Q29udGV4dChcImNvbmZpZ1wiKTtcbiAgICBjb25zdCBmaWVsZElkID0gJGNvbmZpZy5maWVsZElkO1xuICAgIGNvbnN0IHNlbGVjdGVkSXRlbXNOb2RlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoZmllbGRJZCk7XG5cbiAgICAvLyBnZXQgcmVhY3RpdmUgY29udGV4dCBzdG9yZVxuICAgIGNvbnN0IHNlbGVjdGVkSXRlbXMgPSBnZXRDb250ZXh0KFwic2VsZWN0ZWRJdGVtc1wiKTtcbiAgICBjb25zdCBzZWxlY3RlZFVpZHMgPSBnZXRDb250ZXh0KFwic2VsZWN0ZWRVaWRzXCIpO1xuXG4gICAgLy8gc2hvd0NvbnRlbnRCcm93c2VyIHJlYWN0aXZlIHN0YXRlXG4gICAgY29uc3Qgc2hvd0NvbnRlbnRCcm93c2VyID0gZ2V0Q29udGV4dChcInNob3dDb250ZW50QnJvd3NlclwiKTtcblxuICAgIG9uTW91bnQoYXN5bmMgKCkgPT4ge1xuICAgICAgICBhd2FpdCBpbml0aWFsaXplU2VsZWN0ZWRJdGVtc1N0b3JlKCk7XG4gICAgICAgIGluaXRpYWxpemVTb3J0aW5nKCk7XG4gICAgICAgIGluaXRpYWxpemluZyA9IGZhbHNlO1xuICAgIH0pO1xuXG4gICAgYXN5bmMgZnVuY3Rpb24gZ2V0U2VsZWN0ZWRJdGVtQ29tcG9uZW50KCkge1xuICAgICAgICAvLyBnZXQgc2VsZWN0ZWRJdGVtIGNvbXBvbmVudCBmcm9tIHJlZ2lzdHJ5LlxuICAgICAgICAvLyB0aGUgcmVnaXN0cnkga2V5IGNhbiBiZSBjdXN0b21pemVkIHdpdGggcGF0dGVybl9vcHRpb25zXG4gICAgICAgIC8vIGlmIGFuIGFkZG9uIHJlZ2lzdGVycyBhIGN1c3RvbSBjb21wb25lbnQgdG8gYSBjdXN0b20ga2V5XG4gICAgICAgIGlmICgkY29uZmlnLmNvbXBvbmVudFJlZ2lzdHJ5S2V5cz8uc2VsZWN0ZWRJdGVtKSB7XG4gICAgICAgICAgICBSZWdpc3RlcmVkU2VsZWN0ZWRJdGVtID0gcGxvbmVfcmVnaXN0cnkuZ2V0Q29tcG9uZW50KFxuICAgICAgICAgICAgICAgICRjb25maWcuY29tcG9uZW50UmVnaXN0cnlLZXlzLnNlbGVjdGVkSXRlbSxcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gZmFsbGJhY2sgaWYgbm8gY3VzdG9tIGNvbXBvbmVudCB3YXMgcmVnaXN0ZXJlZFxuICAgICAgICAvLyBvciBubyB2YWxpZCBjb21wb25lbnQgaW4gcmVnaXN0cnlcbiAgICAgICAgaWYgKCFSZWdpc3RlcmVkU2VsZWN0ZWRJdGVtPy5jb21wb25lbnQpIHtcbiAgICAgICAgICAgIFJlZ2lzdGVyZWRTZWxlY3RlZEl0ZW0gPSBwbG9uZV9yZWdpc3RyeS5nZXRDb21wb25lbnQoXG4gICAgICAgICAgICAgICAgXCJwYXQtY29udGVudGJyb3dzZXIuU2VsZWN0ZWRJdGVtXCIsXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gdW5zZWxlY3RJdGVtKHVpZCkge1xuICAgICAgICBzZWxlY3RlZEl0ZW1zLnVwZGF0ZSgobikgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIG4uZmlsdGVyKCh4KSA9PiB4LlVJRCAhPT0gdWlkKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHNlbGVjdGVkVWlkcy51cGRhdGUoKCkgPT4gJHNlbGVjdGVkSXRlbXMubWFwKCh4KSA9PiB4LlVJRCkpO1xuICAgIH1cblxuICAgIGFzeW5jIGZ1bmN0aW9uIGluaXRpYWxpemVTZWxlY3RlZEl0ZW1zU3RvcmUoKSB7XG4gICAgICAgIGNvbnN0IGluaXRpYWxWYWx1ZSA9ICRjb25maWcuc2VsZWN0aW9uLmxlbmd0aFxuICAgICAgICAgICAgPyAkY29uZmlnLnNlbGVjdGlvblxuICAgICAgICAgICAgOiBzZWxlY3RlZEl0ZW1zTm9kZT8udmFsdWVcbiAgICAgICAgICAgICAgPyBzZWxlY3RlZEl0ZW1zTm9kZS52YWx1ZS5zcGxpdCgkY29uZmlnLnNlcGFyYXRvcilcbiAgICAgICAgICAgICAgOiBbXTtcblxuICAgICAgICBpZiAoIWluaXRpYWxWYWx1ZS5sZW5ndGgpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgICRzZWxlY3RlZEl0ZW1zID0gYXdhaXQgZ2V0X2l0ZW1zX2Zyb21fdWlkcyhpbml0aWFsVmFsdWUsICRjb25maWcpO1xuICAgICAgICBzZWxlY3RlZFVpZHMudXBkYXRlKCgpID0+ICRzZWxlY3RlZEl0ZW1zLm1hcCgoeCkgPT4geC5VSUQpKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBpbml0aWFsaXplU29ydGluZygpIHtcbiAgICAgICAgaWYgKCRjb25maWcubWF4aW11bVNlbGVjdGlvblNpemUgIT09IDEgJiYgJHNlbGVjdGVkSXRlbXMubGVuZ3RoID4gMSkge1xuICAgICAgICAgICAgU29ydGFibGUuY3JlYXRlKFxuICAgICAgICAgICAgICAgIHNlbGVjdGVkSXRlbXNOb2RlLnByZXZpb3VzU2libGluZy5xdWVyeVNlbGVjdG9yKFxuICAgICAgICAgICAgICAgICAgICBcIi5jb250ZW50LWJyb3dzZXItc2VsZWN0ZWQtaXRlbXNcIixcbiAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgZHJhZ2dhYmxlOiBcIj4gZGl2XCIsXG4gICAgICAgICAgICAgICAgICAgIGFuaW1hdGlvbjogMjAwLFxuICAgICAgICAgICAgICAgICAgICBvblVwZGF0ZTogKGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBzb3J0ZWRVdWlkcyA9IFtdO1xuICAgICAgICAgICAgICAgICAgICAgICAgZS50YXJnZXQucXVlcnlTZWxlY3RvckFsbChcIi5zZWxlY3RlZC1pdGVtXCIpLmZvckVhY2goKGVsKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc29ydGVkVXVpZHMucHVzaChlbC5kYXRhc2V0W1widXVpZFwiXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldE5vZGVWYWx1ZShzb3J0ZWRVdWlkcyk7XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBzZWxlY3RlZFVpZHNGcm9tU2VsZWN0ZWRJdGVtcygpIHtcbiAgICAgICAgbGV0IGl0ZW1zID0gW107XG4gICAgICAgICRzZWxlY3RlZEl0ZW1zLmZvckVhY2goKGl0ZW0pID0+IHtcbiAgICAgICAgICAgIGl0ZW1zLnB1c2goaXRlbS5VSUQpO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIGl0ZW1zO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHNldE5vZGVWYWx1ZShzZWxlY3RlZFVpZHMpIHtcbiAgICAgICAgY29uc3Qgbm9kZV92YWwgPSBzZWxlY3RlZFVpZHMuam9pbigkY29uZmlnLnNlcGFyYXRvcik7XG4gICAgICAgIHNlbGVjdGVkSXRlbXNOb2RlLnZhbHVlID0gbm9kZV92YWw7XG4gICAgICAgIHNlbGVjdGVkSXRlbXNOb2RlLmRpc3BhdGNoRXZlbnQoZXZlbnRzLmNoYW5nZV9ldmVudCgpKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBMb2FkU2VsZWN0ZWRJdGVtQ29tcG9uZW50KG5vZGUsIHByb3BzKSB7XG4gICAgICAgIGNvbnN0IGNvbXBvbmVudCA9IG5ldyBSZWdpc3RlcmVkU2VsZWN0ZWRJdGVtLmNvbXBvbmVudCh7XG4gICAgICAgICAgICB0YXJnZXQ6IG5vZGUsXG4gICAgICAgICAgICBwcm9wczogcHJvcHMsXG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgICQ6IHtcbiAgICAgICAgJHNlbGVjdGVkSXRlbXM7XG4gICAgICAgIGlmICgkc2VsZWN0ZWRJdGVtcy5sZW5ndGggfHwgIWluaXRpYWxpemluZykge1xuICAgICAgICAgICAgc2V0Tm9kZVZhbHVlKHNlbGVjdGVkVWlkc0Zyb21TZWxlY3RlZEl0ZW1zKCkpO1xuICAgICAgICAgICAgaW5pdGlhbGl6ZVNvcnRpbmcoKTtcbiAgICAgICAgfVxuICAgIH1cbjwvc2NyaXB0PlxuXG48ZGl2XG4gICAgY2xhc3M9XCJjb250ZW50LWJyb3dzZXItc2VsZWN0ZWQtaXRlbXMtd3JhcHBlclwiXG4gICAgc3R5bGU9XCJ3aWR0aDogeyRjb25maWcud2lkdGggfHwgJ2F1dG8nfVwiXG4gICAgYmluZDp0aGlzPXtyZWZ9XG4+XG4gICAgPCEtLSBzdmVsdGUtaWdub3JlIGExMXktY2xpY2stZXZlbnRzLWhhdmUta2V5LWV2ZW50cyAtLT5cbiAgICA8IS0tIHN2ZWx0ZS1pZ25vcmUgYTExeS1uby1zdGF0aWMtZWxlbWVudC1pbnRlcmFjdGlvbnMgLS0+XG4gICAgPGRpdlxuICAgICAgICBjbGFzcz1cImNvbnRlbnQtYnJvd3Nlci1zZWxlY3RlZC1pdGVtc1wiXG4gICAgICAgIG9uOmNsaWNrPXsoKSA9PiAoJHNob3dDb250ZW50QnJvd3NlciA9ICRzZWxlY3RlZEl0ZW1zLmxlbmd0aCA/IGZhbHNlIDogdHJ1ZSl9XG4gICAgPlxuICAgICAgICB7I2lmICRzZWxlY3RlZEl0ZW1zfVxuICAgICAgICAgICAgeyNhd2FpdCBnZXRTZWxlY3RlZEl0ZW1Db21wb25lbnQoKSB0aGVufVxuICAgICAgICAgICAgICAgIHsjZWFjaCAkc2VsZWN0ZWRJdGVtcyBhcyBzZWxJdGVtLCBpIChzZWxJdGVtLlVJRCl9XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgdXNlOkxvYWRTZWxlY3RlZEl0ZW1Db21wb25lbnQ9e3sgaXRlbTogc2VsSXRlbSwgdW5zZWxlY3RJdGVtOiB1bnNlbGVjdEl0ZW0gfX0gLz5cbiAgICAgICAgICAgICAgICB7L2VhY2h9XG4gICAgICAgICAgICB7OmNhdGNoIGVycm9yfVxuICAgICAgICAgICAgICAgIDxwIHN0eWxlPVwiY29sb3I6IHJlZFwiPntlcnJvci5tZXNzYWdlfTwvcD5cbiAgICAgICAgICAgIHsvYXdhaXR9XG4gICAgICAgIHsvaWZ9XG4gICAgICAgIHsjaWYgISRzZWxlY3RlZEl0ZW1zfVxuICAgICAgICAgICAgPHA+e190KFwibG9hZGluZyBzZWxlY3RlZCBpdGVtc1wiKX08L3A+XG4gICAgICAgIHsvaWZ9XG4gICAgPC9kaXY+XG4gICAgPCEtLSBzdmVsdGUtaWdub3JlIGExMXktaW52YWxpZC1hdHRyaWJ1dGUgLS0+XG4gICAgPGFcbiAgICAgICAgY2xhc3M9XCJidG4gYnRuLXByaW1hcnlcIlxuICAgICAgICBocmVmPVwiI1wiXG4gICAgICAgIHN0eWxlPVwiYm9yZGVyLXJhZGl1czowIHZhcigtLWJzLWJvcmRlci1yYWRpdXMpIHZhcigtLWJzLWJvcmRlci1yYWRpdXMpIDBcIlxuICAgICAgICBvbjpjbGlja3xwcmV2ZW50RGVmYXVsdD17KCkgPT4gKCRzaG93Q29udGVudEJyb3dzZXIgPSB0cnVlKX0+e190KFwiU2VsZWN0XCIpfTwvYVxuICAgID5cbjwvZGl2PlxuXG48c3R5bGU+XG4gICAgLmNvbnRlbnQtYnJvd3Nlci1zZWxlY3RlZC1pdGVtcy13cmFwcGVyIHtcbiAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgYWxpZ24taXRlbXM6IHN0YXJ0O1xuICAgIH1cbiAgICAuY29udGVudC1icm93c2VyLXNlbGVjdGVkLWl0ZW1zIHtcbiAgICAgICAgbGlzdC1zdHlsZTogbm9uZTtcbiAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tYnMtYm9keS1iZyk7XG4gICAgICAgIGJvcmRlci1yYWRpdXM6IHZhcigtLWJzLWJvcmRlci1yYWRpdXMpIDAgMCB2YXIoLS1icy1ib3JkZXItcmFkaXVzKTtcbiAgICAgICAgYm9yZGVyOiB2YXIoLS1icy1ib3JkZXItc3R5bGUpIHZhcigtLWJzLWJvcmRlci1jb2xvcikgdmFyKC0tYnMtYm9yZGVyLXdpZHRoKTtcbiAgICAgICAgbWluLWhlaWdodDogMi40cmVtO1xuICAgICAgICBwYWRkaW5nOiAwLjVyZW0gMC41cmVtIDAgMC41cmVtO1xuICAgICAgICBmbGV4OiAxIDEgYXV0bztcbiAgICB9XG48L3N0eWxlPlxuIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQTJKSSxxREFBd0MsQ0FDcEMsT0FBTyxDQUFFLElBQUksQ0FDYixXQUFXLENBQUUsS0FDakIsQ0FDQSw2Q0FBZ0MsQ0FDNUIsVUFBVSxDQUFFLElBQUksQ0FDaEIsZ0JBQWdCLENBQUUsSUFBSSxZQUFZLENBQUMsQ0FDbkMsYUFBYSxDQUFFLElBQUksa0JBQWtCLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksa0JBQWtCLENBQUMsQ0FDbEUsTUFBTSxDQUFFLElBQUksaUJBQWlCLENBQUMsQ0FBQyxJQUFJLGlCQUFpQixDQUFDLENBQUMsSUFBSSxpQkFBaUIsQ0FBQyxDQUM1RSxVQUFVLENBQUUsTUFBTSxDQUNsQixPQUFPLENBQUUsTUFBTSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUMvQixJQUFJLENBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUNkIn0=*/"],sourceRoot:""}]),g.A=t},24433:function(I,g,A){var C=A(71354),l=A.n(C),e=A(76314),t=A.n(e)()(l());t.push([I.id,".content-browser-position-wrapper.svelte-8w273.svelte-8w273.svelte-8w273{position:fixed;top:0;right:0;display:flex;justify-content:end;z-index:1500;width:100%;height:100vh;background-color:rgba(0,0,0,.25)}.btn-xs.svelte-8w273.svelte-8w273.svelte-8w273{--bs-btn-padding-y:0.15rem;--bs-btn-padding-x:0.5rem;--bs-btn-font-size:0.75rem}.content-browser.svelte-8w273.svelte-8w273.svelte-8w273{height:100vh;min-width:450px;background-color:var(--bs-light-bg-subtle);border-left:var(--bs-border-style) var(--bs-border-width) #fff;z-index:1500;display:flex;flex-direction:column}.toolBar.svelte-8w273.svelte-8w273.svelte-8w273{background-color:var(--bs-primary);padding:.325rem .75rem;color:var(--bs-light);width:100%;display:flex;justify-content:start}.toolBar.svelte-8w273 svg{vertical-align:-0.125em}.levelColumns.svelte-8w273.svelte-8w273.svelte-8w273{display:flex;flex-wrap:nowrap;width:100%;overflow-y:hidden;overflow-x:auto;flex-grow:3;border-left:var(--bs-border-style) var(--bs-border-color) var(--bs-border-width);user-select:none}.levelColumn.svelte-8w273.svelte-8w273.svelte-8w273{width:320px;background:rgba(var(--bs-secondary-bg-rgb), 0.55);border-right:var(--bs-border-style) var(--bs-border-width) var(--bs-border-color);display:flex;flex-direction:column;flex-grow:0;flex-shrink:0}.levelColumn.active.svelte-8w273.svelte-8w273.svelte-8w273{background:var(--bs-body-bg);border-left:var(--bs-border-style) var(--bs-border-width) var(--bs-primary);margin-left:-1px}.levelToolbar.svelte-8w273.svelte-8w273.svelte-8w273{width:100%;min-height:2.5rem;display:flex;justify-content:space-between;white-space:nowrap;padding:.375rem;border-bottom:var(--bs-border-style) var(--bs-border-width) var(--bs-border-color)}.levelToolbar.svelte-8w273>.levelActions.svelte-8w273.svelte-8w273{margin-left:auto;display:flex}.levelToolbar.svelte-8w273>button.svelte-8w273.svelte-8w273{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.levelItems.svelte-8w273.svelte-8w273.svelte-8w273{overflow-x:auto}.contentItem.svelte-8w273.svelte-8w273.svelte-8w273{display:flex;align-items:center;justify-content:space-between;font-size:90%;min-height:2rem}.contentItem.svelte-8w273.svelte-8w273.svelte-8w273:focus-visible{outline:none}.contentItem.even.svelte-8w273.svelte-8w273.svelte-8w273{background-color:rgba(var(--bs-secondary-bg-rgb), 0.4)}.contentItem.inPath.svelte-8w273.svelte-8w273.svelte-8w273,.contentItem.selectedItem.svelte-8w273.svelte-8w273.svelte-8w273{background-color:rgba(var(--bs-primary-rgb), 0.15)}.contentItem.svelte-8w273>.svelte-8w273.svelte-8w273{padding:.5rem;white-space:nowrap;max-width:450px;text-overflow:ellipsis;overflow:hidden}.contentItem.svelte-8w273>.browseSub.svelte-8w273.svelte-8w273{flex-shrink:0}.contentItem.svelte-8w273 .plone-icon.svelte-8w273.svelte-8w273{display:inline-block}.contentItem.svelte-8w273 .grid-preview.svelte-8w273>img.svelte-8w273{width:95px;height:95px;object-fit:cover;float:left;margin-right:1rem}.contentItem.svelte-8w273 .id-only.svelte-8w273.svelte-8w273{font-style:italic}.preview.svelte-8w273.svelte-8w273.svelte-8w273{width:320px;flex-shrink:0;min-height:300px}.preview.svelte-8w273 .info.svelte-8w273.svelte-8w273{padding:.5rem;width:100%;word-wrap:anywhere}.preview.svelte-8w273 .info .previewIcon.svelte-8w273.svelte-8w273{margin:0 auto 1rem auto}.preview.svelte-8w273 .info .previewIcon svg.svelte-8w273.svelte-8w273{width:50px !important;height:50px !important}.preview.svelte-8w273 img.svelte-8w273.svelte-8w273{max-width:100%;height:auto;margin-bottom:.5rem}.upload-wrapper.svelte-8w273.svelte-8w273.svelte-8w273{padding:1rem;width:540px;overflow-x:auto;flex-shrink:0}.loadmore.svelte-8w273.svelte-8w273.svelte-8w273{text-align:center;padding:.25rem 0}.select-button-ellipsis.svelte-8w273.svelte-8w273.svelte-8w273{white-space:nowrap;max-width:150px;text-overflow:ellipsis;overflow:hidden}","",{version:3,sources:["webpack://./src/pat/contentbrowser/src/ContentBrowser.svelte"],names:[],mappings:"AAAA,yEAAA,cAAA,CAAA,KAAA,CAAA,OAAA,CAAA,YAAA,CAAA,mBAAA,CAAA,YAAA,CAAA,UAAA,CAAA,YAAA,CAAA,gCAAA,CAAA,+CAAA,0BAAA,CAAA,yBAAA,CAAA,0BAAA,CAAA,wDAAA,YAAA,CAAA,eAAA,CAAA,0CAAA,CAAA,8DAAA,CAAA,YAAA,CAAA,YAAA,CAAA,qBAAA,CAAA,gDAAA,kCAAA,CAAA,sBAAA,CAAA,qBAAA,CAAA,UAAA,CAAA,YAAA,CAAA,qBAAA,CAAA,0BAAA,uBAAA,CAAA,qDAAA,YAAA,CAAA,gBAAA,CAAA,UAAA,CAAA,iBAAA,CAAA,eAAA,CAAA,WAAA,CAAA,gFAAA,CAAA,gBAAA,CAAA,oDAAA,WAAA,CAAA,iDAAA,CAAA,iFAAA,CACmC,YAAA,CAAA,qBAAA,CAAA,WAAA,CAAA,aAAA,CAAA,2DAAA,4BAAA,CAAA,2EAAA,CAAA,gBAAA,CAAA,qDAAA,UAAA,CAAA,iBAAA,CAAA,YAAA,CAAA,6BAAA,CAAA,kBAAA,CAAA,eAAA,CAAA,kFAAA,CACA,mEAAA,gBAAA,CAAA,YAAA,CAAA,4DAAA,kBAAA,CAAA,eAAA,CAAA,sBAAA,CAAA,mDAAA,eAAA,CAAA,oDAAA,YAAA,CAAA,kBAAA,CAAA,6BAAA,CAAA,aAAA,CAAA,eAAA,CAAA,kEAAA,YAAA,CAAA,yDAAA,sDAAA,CAAA,4HAAA,kDAAA,CAAA,qDAAA,aAAA,CAAA,kBAAA,CAAA,eAAA,CAAA,sBAAA,CAAA,eAAA,CAAA,+DAAA,aAAA,CAAA,gEAAA,oBAAA,CAAA,sEAAA,UAAA,CAAA,WAAA,CAAA,gBAAA,CAAA,UAAA,CAAA,iBAAA,CAAA,6DAAA,iBAAA,CAAA,gDAAA,WAAA,CAAA,aAAA,CAAA,gBAAA,CAAA,sDAAA,aAAA,CAAA,UAAA,CAAA,kBAAA,CAAA,mEAAA,uBAAA,CAAA,uEAAA,qBAAA,CAAA,sBAAA,CAAA,oDAAA,cAAA,CAAA,WAAA,CAAA,mBAAA,CAAA,uDAAA,YAAA,CAAA,WAAA,CAAA,eAAA,CAAA,aAAA,CAAA,iDAAA,iBAAA,CAAA,gBAAA,CAAA,+DAAA,kBAAA,CAAA,eAAA,CAAA,sBAAA,CAAA,eAAA",sourcesContent:[".content-browser-position-wrapper.svelte-8w273.svelte-8w273.svelte-8w273{position:fixed;top:0;right:0;display:flex;justify-content:end;z-index:1500;width:100%;height:100vh;background-color:rgba(0, 0, 0, 0.25)}.btn-xs.svelte-8w273.svelte-8w273.svelte-8w273{--bs-btn-padding-y:0.15rem;--bs-btn-padding-x:0.5rem;--bs-btn-font-size:0.75rem}.content-browser.svelte-8w273.svelte-8w273.svelte-8w273{height:100vh;min-width:450px;background-color:var(--bs-light-bg-subtle);border-left:var(--bs-border-style) var(--bs-border-width) #fff;z-index:1500;display:flex;flex-direction:column}.toolBar.svelte-8w273.svelte-8w273.svelte-8w273{background-color:var(--bs-primary);padding:0.325rem 0.75rem;color:var(--bs-light);width:100%;display:flex;justify-content:start}.toolBar.svelte-8w273 svg{vertical-align:-0.125em}.levelColumns.svelte-8w273.svelte-8w273.svelte-8w273{display:flex;flex-wrap:nowrap;width:100%;overflow-y:hidden;overflow-x:auto;flex-grow:3;border-left:var(--bs-border-style) var(--bs-border-color) var(--bs-border-width);user-select:none}.levelColumn.svelte-8w273.svelte-8w273.svelte-8w273{width:320px;background:rgba(var(--bs-secondary-bg-rgb), 0.55);border-right:var(--bs-border-style) var(--bs-border-width)\n            var(--bs-border-color);display:flex;flex-direction:column;flex-grow:0;flex-shrink:0}.levelColumn.active.svelte-8w273.svelte-8w273.svelte-8w273{background:var(--bs-body-bg);border-left:var(--bs-border-style) var(--bs-border-width) var(--bs-primary);margin-left:-1px}.levelToolbar.svelte-8w273.svelte-8w273.svelte-8w273{width:100%;min-height:2.5rem;display:flex;justify-content:space-between;white-space:nowrap;padding:0.375rem;border-bottom:var(--bs-border-style) var(--bs-border-width)\n            var(--bs-border-color)}.levelToolbar.svelte-8w273>.levelActions.svelte-8w273.svelte-8w273{margin-left:auto;display:flex}.levelToolbar.svelte-8w273>button.svelte-8w273.svelte-8w273{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.levelItems.svelte-8w273.svelte-8w273.svelte-8w273{overflow-x:auto}.contentItem.svelte-8w273.svelte-8w273.svelte-8w273{display:flex;align-items:center;justify-content:space-between;font-size:90%;min-height:2rem}.contentItem.svelte-8w273.svelte-8w273.svelte-8w273:focus-visible{outline:none}.contentItem.even.svelte-8w273.svelte-8w273.svelte-8w273{background-color:rgba(var(--bs-secondary-bg-rgb), 0.4)}.contentItem.inPath.svelte-8w273.svelte-8w273.svelte-8w273,.contentItem.selectedItem.svelte-8w273.svelte-8w273.svelte-8w273{background-color:rgba(var(--bs-primary-rgb), 0.15)}.contentItem.svelte-8w273>.svelte-8w273.svelte-8w273{padding:0.5rem;white-space:nowrap;max-width:450px;text-overflow:ellipsis;overflow:hidden}.contentItem.svelte-8w273>.browseSub.svelte-8w273.svelte-8w273{flex-shrink:0}.contentItem.svelte-8w273 .plone-icon.svelte-8w273.svelte-8w273{display:inline-block}.contentItem.svelte-8w273 .grid-preview.svelte-8w273>img.svelte-8w273{width:95px;height:95px;object-fit:cover;float:left;margin-right:1rem}.contentItem.svelte-8w273 .id-only.svelte-8w273.svelte-8w273{font-style:italic}.preview.svelte-8w273.svelte-8w273.svelte-8w273{width:320px;flex-shrink:0;min-height:300px}.preview.svelte-8w273 .info.svelte-8w273.svelte-8w273{padding:0.5rem;width:100%;word-wrap:anywhere}.preview.svelte-8w273 .info .previewIcon.svelte-8w273.svelte-8w273{margin:0 auto 1rem auto}.preview.svelte-8w273 .info .previewIcon svg.svelte-8w273.svelte-8w273{width:50px !important;height:50px !important}.preview.svelte-8w273 img.svelte-8w273.svelte-8w273{max-width:100%;height:auto;margin-bottom:0.5rem}.upload-wrapper.svelte-8w273.svelte-8w273.svelte-8w273{padding:1rem;width:540px;overflow-x:auto;flex-shrink:0}.loadmore.svelte-8w273.svelte-8w273.svelte-8w273{text-align:center;padding:0.25rem 0}.select-button-ellipsis.svelte-8w273.svelte-8w273.svelte-8w273{white-space:nowrap;max-width:150px;text-overflow:ellipsis;overflow:hidden}\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiQ29udGVudEJyb3dzZXIuc3ZlbHRlIiwic291cmNlcyI6WyJDb250ZW50QnJvd3Nlci5zdmVsdGUiXSwic291cmNlc0NvbnRlbnQiOlsiPHNjcmlwdD5cbiAgICBpbXBvcnQgdXRpbHMgZnJvbSBcIkBwYXR0ZXJuc2xpYi9wYXR0ZXJuc2xpYi9zcmMvY29yZS91dGlsc1wiO1xuICAgIGltcG9ydCB7IGdldENvbnRleHQgfSBmcm9tIFwic3ZlbHRlXCI7XG4gICAgaW1wb3J0ICogYXMgYW5pbWF0ZVNjcm9sbCBmcm9tIFwic3ZlbHRlLXNjcm9sbHRvXCI7XG4gICAgaW1wb3J0IHsgZmx5IH0gZnJvbSBcInN2ZWx0ZS90cmFuc2l0aW9uXCI7XG4gICAgaW1wb3J0IF90IGZyb20gXCIuLi8uLi8uLi9jb3JlL2kxOG4td3JhcHBlclwiO1xuICAgIGltcG9ydCBVcGxvYWQgZnJvbSBcIi4uLy4uL3VwbG9hZC91cGxvYWRcIjtcbiAgICBpbXBvcnQgY29udGVudFN0b3JlIGZyb20gXCIuL0NvbnRlbnRTdG9yZVwiO1xuICAgIGltcG9ydCB7XG4gICAgICAgIGNsaWNrT3V0c2lkZSxcbiAgICAgICAgZm9ybWF0RGF0ZSxcbiAgICAgICAgZ2V0X2l0ZW1zX2Zyb21fdWlkcyxcbiAgICAgICAgcmVxdWVzdCxcbiAgICAgICAgcmVzb2x2ZUljb24sXG4gICAgICAgIHVwZGF0ZVJlY2VudGx5VXNlZCxcbiAgICB9IGZyb20gXCIuL3V0aWxzXCI7XG4gICAgaW1wb3J0IEZhdm9yaXRlcyBmcm9tIFwiLi9GYXZvcml0ZXMuc3ZlbHRlXCI7XG4gICAgaW1wb3J0IFJlY2VudGx5VXNlZCBmcm9tIFwiLi9SZWNlbnRseVVzZWQuc3ZlbHRlXCI7XG5cbiAgICBhbmltYXRlU2Nyb2xsLnNldEdsb2JhbE9wdGlvbnMoe1xuICAgICAgICBzY3JvbGxYOiB0cnVlLFxuICAgICAgICBjb250YWluZXI6IFwiLmxldmVsQ29sdW1uc1wiLFxuICAgICAgICBkdXJhdGlvbjogNTAwLFxuICAgIH0pO1xuXG4gICAgLy8gZ2V0IGNvbnRleHQgc3RvcmVzXG4gICAgY29uc3QgY3VycmVudFBhdGggPSBnZXRDb250ZXh0KFwiY3VycmVudFBhdGhcIik7XG4gICAgY29uc3QgY29uZmlnID0gZ2V0Q29udGV4dChcImNvbmZpZ1wiKTtcbiAgICBjb25zdCBwYXRoQ2FjaGUgPSBnZXRDb250ZXh0KFwicGF0aENhY2hlXCIpO1xuICAgIGNvbnN0IHNob3dDb250ZW50QnJvd3NlciA9IGdldENvbnRleHQoXCJzaG93Q29udGVudEJyb3dzZXJcIik7XG4gICAgY29uc3Qgc2VsZWN0ZWRJdGVtcyA9IGdldENvbnRleHQoXCJzZWxlY3RlZEl0ZW1zXCIpO1xuICAgIGNvbnN0IHNlbGVjdGVkVWlkcyA9IGdldENvbnRleHQoXCJzZWxlY3RlZFVpZHNcIik7XG4gICAgY29uc3QgcHJldmlld1VpZHMgPSBnZXRDb250ZXh0KFwicHJldmlld1VpZHNcIik7XG5cbiAgICAvLyBpbml0aWFsaXplIGNvbnRlbnQgYnJvd3NlciBzdG9yZVxuICAgIGNvbnN0IGNvbnRlbnRJdGVtcyA9IGNvbnRlbnRTdG9yZSgkY29uZmlnLCBwYXRoQ2FjaGUpO1xuXG4gICAgbGV0IHNob3dVcGxvYWQgPSBmYWxzZTtcbiAgICBsZXQgc2hvd0xldmVsRmlsdGVyID0gZmFsc2U7XG4gICAgbGV0IHByZXZpZXdJdGVtID0ge307XG4gICAgbGV0IGtleWJvYXJkTmF2SW5pdGlhbGl6ZWQgPSBmYWxzZTtcbiAgICBsZXQgc2hpZnRLZXkgPSBmYWxzZTtcbiAgICBsZXQgc2VhcmNoVGVybSA9IG51bGw7XG4gICAgbGV0IGdyaWRWaWV3ID0gZmFsc2U7XG4gICAgbGV0IGRlZmF1bHRDb25maWdNb2RlID0gJGNvbmZpZy5tb2RlO1xuXG4gICAgbGV0IHZ3ID0gTWF0aC5tYXgoZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudFdpZHRoIHx8IDAsIHdpbmRvdy5pbm5lcldpZHRoIHx8IDApO1xuXG4gICAgZnVuY3Rpb24gdXBkYXRlUHJldmlldyh7IGRhdGEgPSBudWxsLCB1dWlkID0gbnVsbCwgYWN0aW9uID0gXCJzaG93XCIgfSkge1xuICAgICAgICBpZiAoZGF0YSAmJiBhY3Rpb24gPT0gXCJzaG93XCIpIHtcbiAgICAgICAgICAgIHByZXZpZXdJdGVtID0gZGF0YTtcbiAgICAgICAgICAgICRwcmV2aWV3VWlkcyA9IFtkYXRhLlVJRF07XG4gICAgICAgIH0gZWxzZSBpZiAodXVpZCAmJiBhY3Rpb24gPT0gXCJhZGRcIiAmJiAkcHJldmlld1VpZHMuaW5kZXhPZih1dWlkKSA9PT0gLTEpIHtcbiAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAkY29uZmlnLm1heGltdW1TZWxlY3Rpb25TaXplID4gMCAmJlxuICAgICAgICAgICAgICAgICRwcmV2aWV3VWlkcy5sZW5ndGggPj0gJGNvbmZpZy5tYXhpbXVtU2VsZWN0aW9uU2l6ZVxuICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgLy8gcmVzcGVjdCBtYXhpbXVtU2VsZWN0aW9uU2l6ZVxuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgICRwcmV2aWV3VWlkcyA9IFsuLi4kcHJldmlld1VpZHMsIHV1aWRdOyAvLyBOT1RFOiAkcHJldmlld1VpZHMucHVzaCgpIGlzIG5vdCBhIHJlYWN0aXZlIGNoYW5nZVxuICAgICAgICB9IGVsc2UgaWYgKHV1aWQgJiYgYWN0aW9uID09IFwicmVtb3ZlXCIgJiYgJHByZXZpZXdVaWRzLmluZGV4T2YodXVpZCkgIT09IC0xKSB7XG4gICAgICAgICAgICBwcmV2aWV3VWlkcy51cGRhdGUoKG4pID0+IHtcbiAgICAgICAgICAgICAgICBuLnNwbGljZShuLmluZGV4T2YodXVpZCksIDEpO1xuICAgICAgICAgICAgICAgIHJldHVybiBuO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0gZWxzZSBpZiAoYWN0aW9uID09IFwiY2xlYXJcIikge1xuICAgICAgICAgICAgcHJldmlld0l0ZW0gPSB7fTtcbiAgICAgICAgICAgICRwcmV2aWV3VWlkcyA9IFtdO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgYXN5bmMgZnVuY3Rpb24gdXBsb2FkKCkge1xuICAgICAgICB1cGRhdGVQcmV2aWV3KHsgYWN0aW9uOiBcImNsZWFyXCIgfSk7XG4gICAgICAgIHNjcm9sbFRvUmlnaHQoKTtcbiAgICAgICAgc2hvd1VwbG9hZCA9IHRydWU7XG4gICAgICAgIGF3YWl0IHV0aWxzLnRpbWVvdXQoMSk7XG4gICAgICAgIGNvbnN0IHVwbG9hZEVsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi51cGxvYWQtd3JhcHBlclwiKTtcbiAgICAgICAgdXBsb2FkRWwuY2xhc3NMaXN0LmFkZChcInBhdC11cGxvYWRcIik7XG4gICAgICAgIGNvbnN0IHBhdFVwbG9hZCA9IG5ldyBVcGxvYWQodXBsb2FkRWwsIHtcbiAgICAgICAgICAgIGJhc2VVcmw6ICRjb25maWcucm9vdFVybCxcbiAgICAgICAgICAgIGN1cnJlbnRQYXRoOiAkY3VycmVudFBhdGgsXG4gICAgICAgICAgICByZWxhdGl2ZVBhdGg6IFwiQEBmaWxlVXBsb2FkXCIsXG4gICAgICAgICAgICBhbGxvd1BhdGhTZWxlY3Rpb246IGZhbHNlLFxuICAgICAgICAgICAgaGlkZGVuSW5wdXRDb250YWluZXI6IFwiLnVwbG9hZC13cmFwcGVyXCIsXG4gICAgICAgICAgICBzdWNjZXNzOiAoZmlsZXVwbG9hZCwgb2JqKSA9PiB7XG4gICAgICAgICAgICAgICAgJHByZXZpZXdVaWRzLnB1c2gob2JqLlVJRCk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgcXVldWVjb21wbGV0ZTogKGZpbGVVcGxvYWQsIG9iaikgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnRlbnRJdGVtcy5nZXQoeyBwYXRoOiAkY3VycmVudFBhdGgsIHVwZGF0ZUNhY2hlOiB0cnVlIH0pO1xuICAgICAgICAgICAgICAgIHNob3dVcGxvYWQgPSBmYWxzZTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHNob3dQcmV2aWV3KGl0ZW0pIHtcbiAgICAgICAgaWYgKCRjb25maWcubW9kZSA9PSBcImJyb3dzZVwiKSB7XG4gICAgICAgICAgICAkcHJldmlld1VpZHMgPSBbaXRlbS5VSURdO1xuXG4gICAgICAgICAgICBpZiAoaXRlbS5pc19mb2xkZXJpc2gpIHtcbiAgICAgICAgICAgICAgICAvLyBzaG93IGZvbGRlclxuICAgICAgICAgICAgICAgIGN1cnJlbnRQYXRoLnNldChpdGVtLnBhdGgpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyBzaG93IG5vbiBmb2xkZXJpc2ggcHJldmlld1xuICAgICAgICAgICAgICAgIGNvbnN0IHBhdGhQYXJ0cyA9IGl0ZW0ucGF0aC5zcGxpdChcIi9cIik7XG4gICAgICAgICAgICAgICAgY29uc3QgZm9sZGVyUGF0aCA9IHBhdGhQYXJ0cy5zbGljZSgwLCBwYXRoUGFydHMubGVuZ3RoIC0gMSkuam9pbihcIi9cIik7XG4gICAgICAgICAgICAgICAgY3VycmVudFBhdGguc2V0KGZvbGRlclBhdGggfHwgXCIvXCIpO1xuICAgICAgICAgICAgICAgIHVwZGF0ZVByZXZpZXcoeyBkYXRhOiBpdGVtIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdXBkYXRlUHJldmlldyh7IGRhdGE6IGl0ZW0gfSk7XG4gICAgICAgIH1cbiAgICAgICAgc2Nyb2xsVG9SaWdodCgpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGNoYW5nZVBhdGgoaXRlbSwgZSkge1xuICAgICAgICAvLyBhbHdheXMgaGlkZSB1cGxvYWRcbiAgICAgICAgc2hvd1VwbG9hZCA9IGZhbHNlO1xuXG4gICAgICAgIC8vIGNsZWFyIHByZXZpb3VzIHNlbGVjdGlvblxuICAgICAgICB1cGRhdGVQcmV2aWV3KHsgYWN0aW9uOiBcImNsZWFyXCIgfSk7XG5cbiAgICAgICAgaWYgKGl0ZW0gPT09IFwiL1wiIHx8IGl0ZW0gPT09ICRjb25maWcucm9vdFBhdGgpIHtcbiAgICAgICAgICAgIC8vIGNsaWNrZWQgXCJob21lXCIgYnV0dG9uXG4gICAgICAgICAgICBjdXJyZW50UGF0aC5zZXQoJGNvbmZpZy5yb290UGF0aCk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICAvLyBzaG93IGNsaWNrZWQgaXRlbVxuICAgICAgICBzaG93UHJldmlldyhpdGVtKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBjbGlja0l0ZW0oaXRlbSwgZSkge1xuICAgICAgICBpZiAoIWtleWJvYXJkTmF2SW5pdGlhbGl6ZWQpIHtcbiAgICAgICAgICAgIC8vIGlmIHdlJ3ZlIGFscmVhZHkgY2xpY2tlZCBhbiBlbGVtZW50IHdpdGggdGhlIG1vdXNlXG4gICAgICAgICAgICAvLyBkbyBub3Qgc3RhcnQgb3ZlciBrZXlib2FyZG5hdlxuICAgICAgICAgICAga2V5Ym9hcmROYXZJbml0aWFsaXplZCA9IHRydWU7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBjaGVjayBmb3IgbXVsdGlzZWxlY3Rpb25cbiAgICAgICAgY29uc3QgbGV2ZWxXcmFwcGVyID0gZS5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoXCIubGV2ZWxJdGVtc1wiKTtcbiAgICAgICAgbGV0IHByZXZTZWxlY3Rpb24gPSBsZXZlbFdyYXBwZXIucXVlcnlTZWxlY3RvckFsbChcIi5zZWxlY3RlZEl0ZW1cIik7XG5cbiAgICAgICAgaWYgKHByZXZTZWxlY3Rpb24ubGVuZ3RoICYmICRjb25maWcubWF4aW11bVNlbGVjdGlvblNpemUgIT0gMSkge1xuICAgICAgICAgICAgLy8gY2hlY2sgZm9yIHByZXNzZWQgc2hpZnQgb3IgY3RybC9tZXRhIGtleSBmb3IgbXVsdGlzZWxlY3Rpb25cbiAgICAgICAgICAgIGlmIChzaGlmdEtleSB8fCBlPy5zaGlmdEtleSkge1xuICAgICAgICAgICAgICAgIC8vIGl0ZXIgdGhyb3VnaCB0aGUgd3JhcHBlciBjaGlsZHJlbiBhbmQgc2VsZWN0IGFsbFxuICAgICAgICAgICAgICAgIC8vIGluYmV0d2VlbiBjdXJyZW50IHNlbGVjdGlvbiBhbmQgbGFzdCBwcmV2aWV3XG4gICAgICAgICAgICAgICAgbGV0IHNlbGVjdCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgZWwgb2YgbGV2ZWxXcmFwcGVyLmNoaWxkcmVuKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChbaXRlbS5VSUQsICRwcmV2aWV3VWlkc1swXV0uaW5kZXhPZihlbC5kYXRhc2V0LnV1aWQpICE9PSAtMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNlbGVjdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHN0b3Agc2VsZWN0aW5nIGJ1dCBtYWtlIHN1cmUgdGhlIGxhc3QgaXRlbSBpcyBzZWxlY3RlZCB0b29cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1cGRhdGVQcmV2aWV3KHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXVpZDogZWwuZGF0YXNldC51dWlkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY3Rpb246IFwiYWRkXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZWN0ID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBzdGFydCBzZWxlY3RpbmdcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGVjdCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdXBkYXRlUHJldmlldyh7XG4gICAgICAgICAgICAgICAgICAgICAgICB1dWlkOiBlbC5kYXRhc2V0LnV1aWQsXG4gICAgICAgICAgICAgICAgICAgICAgICBhY3Rpb246IHNlbGVjdCA/IFwiYWRkXCIgOiBcInJlbW92ZVwiLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgc2hpZnRLZXkgPSBmYWxzZTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZT8ubWV0YUtleSB8fCBlPy5jdHJsS2V5KSB7XG4gICAgICAgICAgICAgICAgLy8gZGUvc2VsZWN0IG11bHRpcGxlIHNpbmdsZSBpdGVtc1xuICAgICAgICAgICAgICAgIC8vIE5PVEU6IG9ubHkgZm9yIG1vdXNlIGNsaWNrIGV2ZW50XG4gICAgICAgICAgICAgICAgdXBkYXRlUHJldmlldyh7XG4gICAgICAgICAgICAgICAgICAgIHV1aWQ6IGl0ZW0uVUlELFxuICAgICAgICAgICAgICAgICAgICBhY3Rpb246ICRwcmV2aWV3VWlkcy5pbmRleE9mKGl0ZW0uVUlEKSA9PSAtMSA/IFwiYWRkXCIgOiBcInJlbW92ZVwiLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyB1bnNlbGVjdFxuICAgICAgICAgICAgICAgIFsuLi5wcmV2U2VsZWN0aW9uXS5tYXAoKGVsKSA9PiBlbC5jbGFzc0xpc3QucmVtb3ZlKFwic2VsZWN0ZWRJdGVtXCIpKTtcbiAgICAgICAgICAgICAgICBjaGFuZ2VQYXRoKGl0ZW0sIGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY2hhbmdlUGF0aChpdGVtLCBlKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGUuY3VycmVudFRhcmdldC5mb2N1cygpOyAvLyBuZWVkZWQgZm9yIGtleWJvYXJkIG5hdmlnYXRpb25cbiAgICAgICAgZS5jdXJyZW50VGFyZ2V0LmNsYXNzTGlzdC5hZGQoXCJzZWxlY3RlZEl0ZW1cIik7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gaW5pdEtleWJvYXJkTmF2KCkge1xuICAgICAgICAvLyBmb2N1cyBmaXJzdCBlbGVtZW50IHdoZW4gc2hvd2luZyBjb250ZW50YnJvd3NlclxuICAgICAgICBpZiAoa2V5Ym9hcmROYXZJbml0aWFsaXplZCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHBvc3NpYmxlRm9jdXNFbHMgPSBbXG4gICAgICAgICAgICAuLi5kb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLmxldmVsQ29sdW1uIC5pblBhdGhcIiksIC8vIHByZXZpb3VzbHkgc2VsZWN0ZWQgZm9sZGVyXG4gICAgICAgICAgICAuLi5kb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLmxldmVsQ29sdW1uIC5zZWxlY3RlZEl0ZW1cIiksIC8vIHByZXZpb3VzbHkgc2VsZWN0ZWQgaXRlbVxuICAgICAgICBdO1xuICAgICAgICBpZiAoXG4gICAgICAgICAgICAhcG9zc2libGVGb2N1c0Vscy5sZW5ndGggJiZcbiAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubGV2ZWxDb2x1bW4gLmNvbnRlbnRJdGVtXCIpXG4gICAgICAgICkge1xuICAgICAgICAgICAgcG9zc2libGVGb2N1c0Vscy5wdXNoKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubGV2ZWxDb2x1bW4gLmNvbnRlbnRJdGVtXCIpKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocG9zc2libGVGb2N1c0Vscy5sZW5ndGgpIHtcbiAgICAgICAgICAgIGtleWJvYXJkTmF2SW5pdGlhbGl6ZWQgPSB0cnVlO1xuICAgICAgICAgICAgcG9zc2libGVGb2N1c0Vsc1swXS5mb2N1cygpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24ga2V5Ym9hcmROYXZpZ2F0aW9uKGl0ZW0sIGUpIHtcbiAgICAgICAgY29uc3Qgbm9kZSA9IGUuY3VycmVudFRhcmdldDtcbiAgICAgICAgc2hpZnRLZXkgPSBlLnNoaWZ0S2V5O1xuICAgICAgICBpZiAoZS5rZXkgPT0gXCJFc2NhcGVcIikge1xuICAgICAgICAgICAgY2xvc2VCcm93c2VyKCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKFxuICAgICAgICAgICAgZS5rZXkgPT0gXCJBcnJvd0Rvd25cIiAmJlxuICAgICAgICAgICAgbm9kZT8ubmV4dEVsZW1lbnRTaWJsaW5nPy5jbGFzc0xpc3QuY29udGFpbnMoXCJjb250ZW50SXRlbVwiKVxuICAgICAgICApIHtcbiAgICAgICAgICAgIG5vZGUubmV4dEVsZW1lbnRTaWJsaW5nLmNsaWNrKCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKFxuICAgICAgICAgICAgZS5rZXkgPT0gXCJBcnJvd1VwXCIgJiZcbiAgICAgICAgICAgIG5vZGU/LnByZXZpb3VzRWxlbWVudFNpYmxpbmc/LmNsYXNzTGlzdC5jb250YWlucyhcImNvbnRlbnRJdGVtXCIpXG4gICAgICAgICkge1xuICAgICAgICAgICAgbm9kZS5wcmV2aW91c0VsZW1lbnRTaWJsaW5nLmNsaWNrKCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGUua2V5ID09IFwiQXJyb3dSaWdodFwiKSB7XG4gICAgICAgICAgICBjb25zdCBjdXJyQ29sID0gZS50YXJnZXQuY2xvc2VzdChcIi5sZXZlbENvbHVtblwiKTtcbiAgICAgICAgICAgIGNvbnN0IG54dENvbCA9IGN1cnJDb2w/Lm5leHRFbGVtZW50U2libGluZztcbiAgICAgICAgICAgIGlmICghbnh0Q29sIHx8ICFueHRDb2wuY2xhc3NMaXN0LmNvbnRhaW5zKFwibGV2ZWxDb2x1bW5cIikpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBueHRDb2wucXVlcnlTZWxlY3RvcihcIi5jb250ZW50SXRlbVwiKT8uY2xpY2soKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZS5rZXkgPT0gXCJBcnJvd0xlZnRcIikge1xuICAgICAgICAgICAgY29uc3QgY3VyckNvbCA9IGUudGFyZ2V0LmNsb3Nlc3QoXCIubGV2ZWxDb2x1bW5cIik7XG4gICAgICAgICAgICBjb25zdCBwcmV2Q29sID0gY3VyckNvbD8ucHJldmlvdXNFbGVtZW50U2libGluZztcbiAgICAgICAgICAgIGlmICghcHJldkNvbCB8fCAhcHJldkNvbC5jbGFzc0xpc3QuY29udGFpbnMoXCJsZXZlbENvbHVtblwiKSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHByZXZDb2wucXVlcnlTZWxlY3RvcihcIi5pblBhdGhcIikuY2xpY2soKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZS5rZXkgPT0gXCJTcGFjZVwiKSB7XG4gICAgICAgICAgICAvLyBhZGQgaXRlbSB0byBzZWxlY3Rpb24gKGxpa2UgbWV0YUtleSArIGNsaWNrKVxuICAgICAgICAgICAgY2xpY2tJdGVtKGl0ZW0sIGUsIHRydWUpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChlLmtleSA9PSBcIkVudGVyXCIpIHtcbiAgICAgICAgICAgIGlmIChpc1NlbGVjdGFibGUoaXRlbSkpIHtcbiAgICAgICAgICAgICAgICBpZiAoJGNvbmZpZy5tYXhpbXVtU2VsZWN0aW9uU2l6ZSA9PSAxKSB7XG4gICAgICAgICAgICAgICAgICAgIGFkZEl0ZW0oaXRlbSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgYWRkU2VsZWN0ZWRJdGVtcygpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIGFzeW5jIGZ1bmN0aW9uIGFkZEl0ZW0oaXRlbSkge1xuICAgICAgICBpZiAoJGNvbmZpZy5tYXhpbXVtU2VsZWN0aW9uU2l6ZSA9PSAxKSB7XG4gICAgICAgICAgICBzZWxlY3RlZEl0ZW1zLnNldChbaXRlbV0pO1xuICAgICAgICAgICAgc2VsZWN0ZWRVaWRzLnNldChbaXRlbS5VSURdKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHNlbGVjdGVkSXRlbXMudXBkYXRlKChuKSA9PiBbLi4ubiwgaXRlbV0pO1xuICAgICAgICAgICAgc2VsZWN0ZWRVaWRzLnVwZGF0ZSgoKSA9PiAkc2VsZWN0ZWRJdGVtcy5tYXAoKHgpID0+IHguVUlEKSk7XG4gICAgICAgIH1cbiAgICAgICAgdXBkYXRlUmVjZW50bHlVc2VkKGl0ZW0sICRjb25maWcpO1xuICAgICAgICBjbG9zZUJyb3dzZXIoKTtcbiAgICB9XG5cbiAgICBhc3luYyBmdW5jdGlvbiBhZGRTZWxlY3RlZEl0ZW1zKCkge1xuICAgICAgICBjb25zdCBwcmV2aWV3SXRlbXMgPSBhd2FpdCBnZXRfaXRlbXNfZnJvbV91aWRzKCRwcmV2aWV3VWlkcywgJGNvbmZpZyk7XG4gICAgICAgIHNlbGVjdGVkSXRlbXMudXBkYXRlKChuKSA9PiB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGl0IG9mIHByZXZpZXdJdGVtcykge1xuICAgICAgICAgICAgICAgIGlmICgkc2VsZWN0ZWRVaWRzLmluZGV4T2YoaXQuVUlEKSAhPSAtMSkgY29udGludWU7XG4gICAgICAgICAgICAgICAgbi5wdXNoKGl0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBuO1xuICAgICAgICB9KTtcbiAgICAgICAgc2VsZWN0ZWRVaWRzLnVwZGF0ZSgoKSA9PiAkc2VsZWN0ZWRJdGVtcy5tYXAoKHgpID0+IHguVUlEKSk7XG4gICAgICAgIGNsb3NlQnJvd3NlcigpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHNlbGVjdFJlY2VudGx5VXNlZChldmVudCkge1xuICAgICAgICBhZGRJdGVtKGV2ZW50LmRldGFpbC5pdGVtKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBpdGVtSWQoaXRlbSkge1xuICAgICAgICByZXR1cm4gaXRlbS5wYXRoPy5zcGxpdChcIi9cIikucG9wKCkgfHwgXCItIG5vIGlkIC1cIjtcbiAgICB9XG5cbiAgICBhc3luYyBmdW5jdGlvbiBzZWxlY3RGYXZvcml0ZShldmVudCkge1xuICAgICAgICBjb25zdCBwYXRoID0gZXZlbnQuZGV0YWlsLml0ZW0ucGF0aDtcbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCByZXF1ZXN0KHtcbiAgICAgICAgICAgIHZvY2FidWxhcnlVcmw6ICRjb25maWcudm9jYWJ1bGFyeVVybCxcbiAgICAgICAgICAgIGF0dHJpYnV0ZXM6ICRjb25maWcuYXR0cmlidXRlcyxcbiAgICAgICAgICAgIGxldmVsSW5mb1BhdGg6IHBhdGgsXG4gICAgICAgIH0pO1xuICAgICAgICBpZiAoIXJlc3BvbnNlLnRvdGFsKSB7XG4gICAgICAgICAgICBhbGVydChgJHtwYXRofSBub3QgZm91bmQhYCk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgaXRlbSA9IHJlc3BvbnNlLnJlc3VsdHNbMF07XG4gICAgICAgIGlmICghaXRlbS5wYXRoKSB7XG4gICAgICAgICAgICAvLyBmaXggZm9yIHJvb3RcbiAgICAgICAgICAgIGl0ZW0ucGF0aCA9ICRjb25maWcucm9vdFBhdGg7XG4gICAgICAgIH1cbiAgICAgICAgY2hhbmdlUGF0aChpdGVtKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBjbG9zZUJyb3dzZXIoKSB7XG4gICAgICAgIC8vIGhpZGUgbGV2ZWxmaWx0ZXIgYW5kIGNsZWFyIGFsbCBmaWx0ZXJzXG4gICAgICAgIGZpbHRlckxldmVsKFwiXCIpO1xuICAgICAgICAvLyBjbGVhciBzZWFyY2hcbiAgICAgICAgc2VhcmNoVGVybSA9IG51bGw7XG4gICAgICAgICRjb25maWcubW9kZSA9IGRlZmF1bHRDb25maWdNb2RlO1xuICAgICAgICAkc2hvd0NvbnRlbnRCcm93c2VyID0gZmFsc2U7XG4gICAgICAgIGtleWJvYXJkTmF2SW5pdGlhbGl6ZWQgPSBmYWxzZTtcbiAgICAgICAgdXBkYXRlUHJldmlldyh7IGFjdGlvbjogXCJjbGVhclwiIH0pO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGlzU2VsZWN0YWJsZShpdGVtKSB7XG4gICAgICAgIHJldHVybiAkc2VsZWN0ZWRVaWRzLmluZGV4T2YoaXRlbS5VSUQpID09PSAtMTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBzY3JvbGxUb1JpZ2h0KCkge1xuICAgICAgICBjb25zdCBzY3JvbGxDb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmxldmVsQ29sdW1uc1wiKTtcbiAgICAgICAgaWYgKHNjcm9sbENvbnRhaW5lcikge1xuICAgICAgICAgICAgYW5pbWF0ZVNjcm9sbC5zY3JvbGxUbyh7XG4gICAgICAgICAgICAgICAgLy8gZWxlbWVudDogXCIubGV2ZWxDb2x1bW46bGFzdC1jaGlsZFwiLFxuICAgICAgICAgICAgICAgIHg6IHNjcm9sbENvbnRhaW5lci5zY3JvbGxXaWR0aCArIDEwMCxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gaXRlbUluUGF0aChpdGVtKSB7XG4gICAgICAgIGNvbnN0IGl0ZW1fcGF0aCA9IGl0ZW0ucGF0aC5zcGxpdChcIi9cIik7XG4gICAgICAgIGNvbnN0IGN1cnJfcGF0aCA9ICRjdXJyZW50UGF0aC5zcGxpdChcIi9cIik7XG4gICAgICAgIGxldCBpbl9wYXRoID0gdHJ1ZTtcbiAgICAgICAgZm9yIChjb25zdCBpZHggaW4gaXRlbV9wYXRoKSB7XG4gICAgICAgICAgICAvLyBjaGVjayBwYXRoIHBhcnRzIHRvIGJlIGVxdWFsXG4gICAgICAgICAgICBpbl9wYXRoID0gaW5fcGF0aCAmJiBpdGVtX3BhdGhbaWR4XSA9PT0gY3Vycl9wYXRoW2lkeF07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGluX3BhdGg7XG4gICAgfVxuXG4gICAgY29uc3Qgc2VhcmNoSXRlbXNLZXl1cCA9IHV0aWxzLmRlYm91bmNlKGFzeW5jIChlKSA9PiB7XG4gICAgICAgIGF3YWl0IHNlYXJjaEl0ZW1zKGUudGFyZ2V0LnZhbHVlKTtcbiAgICB9LCAzMDApO1xuXG4gICAgYXN5bmMgZnVuY3Rpb24gc2VhcmNoSXRlbXModmFsKSB7XG4gICAgICAgIHNlYXJjaFRlcm0gPSB2YWw7XG4gICAgICAgIGlmIChkZWZhdWx0Q29uZmlnTW9kZSA9PT0gXCJicm93c2VcIikge1xuICAgICAgICAgICAgLy8gc3dpdGNoaW5nIHRvIHNlYXJjaCBtb2RlIGluIGdsb2JhbCBzZWFyY2ggaWYgY29uZmlndXJlZCBhcyBcImJyb3dzZVwiIG1vZGVcbiAgICAgICAgICAgICRjb25maWcubW9kZSA9IHNlYXJjaFRlcm0gIT09IFwiXCIgPyBcInNlYXJjaFwiIDogXCJicm93c2VcIjtcbiAgICAgICAgfVxuICAgICAgICBhd2FpdCBjb250ZW50SXRlbXMuZ2V0KHtcbiAgICAgICAgICAgIHBhdGg6ICRjdXJyZW50UGF0aCxcbiAgICAgICAgICAgIHNlYXJjaFRlcm06IHNlYXJjaFRlcm0sXG4gICAgICAgICAgICBtb2RlOiAkY29uZmlnLm1vZGUsXG4gICAgICAgIH0pO1xuICAgICAgICB1cGRhdGVQcmV2aWV3KHsgYWN0aW9uOiBcImNsZWFyXCIgfSk7XG4gICAgICAgIGlmICghdmFsKSB7XG4gICAgICAgICAgICBzY3JvbGxUb1JpZ2h0KCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zdCBmaWx0ZXJMZXZlbEtleXVwID0gdXRpbHMuZGVib3VuY2UoYXN5bmMgKGUpID0+IHtcbiAgICAgICAgYXdhaXQgZmlsdGVyTGV2ZWwoZS50YXJnZXQudmFsdWUpO1xuICAgIH0sIDMwMCk7XG5cbiAgICBjb25zdCBmaWx0ZXJMZXZlbCA9IGFzeW5jICh2YWwpID0+IHtcbiAgICAgICAgaWYgKHZhbCAhPT0gXCJcIikge1xuICAgICAgICAgICAgdXBkYXRlUHJldmlldyh7IGFjdGlvbjogXCJjbGVhclwiIH0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgc2Nyb2xsVG9SaWdodCgpO1xuICAgICAgICB9XG4gICAgICAgIGF3YWl0IGNvbnRlbnRJdGVtcy5nZXQoeyBwYXRoOiAkY3VycmVudFBhdGgsIHNlYXJjaFRlcm06IHZhbCwgdXBkYXRlQ2FjaGU6IHRydWUgfSk7XG4gICAgfTtcblxuICAgIGZ1bmN0aW9uIGxvYWRNb3JlKG5vZGUpIHtcbiAgICAgICAgY29uc3Qgb2JzZXJ2ZXIgPSBuZXcgSW50ZXJzZWN0aW9uT2JzZXJ2ZXIoXG4gICAgICAgICAgICAoZW50cmllcykgPT4ge1xuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgZW50cnkgb2YgZW50cmllcykge1xuICAgICAgICAgICAgICAgICAgICBpZiAoZW50cnkuaXNJbnRlcnNlY3RpbmcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnRJdGVtcy5nZXQoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvYWRNb3JlUGF0aDogbm9kZS5kYXRhc2V0LmxldmVsUGF0aCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYWdlOiArbm9kZS5kYXRhc2V0LmxldmVsTmV4dFBhZ2UsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VhcmNoVGVybTogbm9kZS5kYXRhc2V0LnNlYXJjaFRlcm0sXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB7IHRocmVzaG9sZDogMCwgcm9vdDogbnVsbCwgbWFyZ2luOiBcIjBweFwiIH0sXG4gICAgICAgICk7XG4gICAgICAgIC8vIGRlZmVyIG9ic2VydmluZ1xuICAgICAgICB3aW5kb3cuc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICBvYnNlcnZlci5vYnNlcnZlKG5vZGUpO1xuICAgICAgICB9LCAzMDApO1xuICAgIH1cblxuICAgICQ6IHtcbiAgICAgICAgaWYgKCRzaG93Q29udGVudEJyb3dzZXIpIHtcbiAgICAgICAgICAgIGNvbnRlbnRJdGVtcy5nZXQoeyBwYXRoOiAkY3VycmVudFBhdGggfSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAkOiB7XG4gICAgICAgICRjb250ZW50SXRlbXM7XG4gICAgICAgIHNjcm9sbFRvUmlnaHQoKTtcbiAgICB9XG5cbiAgICAkOiB7XG4gICAgICAgICRwcmV2aWV3VWlkcztcbiAgICB9XG48L3NjcmlwdD5cblxueyNpZiAkc2hvd0NvbnRlbnRCcm93c2VyfVxuICAgIDxkaXYgY2xhc3M9XCJjb250ZW50LWJyb3dzZXItcG9zaXRpb24td3JhcHBlclwiPlxuICAgICAgICA8bmF2XG4gICAgICAgICAgICBjbGFzcz1cImNvbnRlbnQtYnJvd3NlclwiXG4gICAgICAgICAgICB0cmFuc2l0aW9uOmZseT17eyB4OiAodncgLyAxMDApICogOTQsIG9wYWNpdHk6IDEgfX1cbiAgICAgICAgICAgIG9uOmludHJvZW5kPXsoKSA9PiB7XG4gICAgICAgICAgICAgICAgc2Nyb2xsVG9SaWdodCgpO1xuICAgICAgICAgICAgICAgIGluaXRLZXlib2FyZE5hdigpO1xuICAgICAgICAgICAgfX1cbiAgICAgICAgICAgIHVzZTpjbGlja091dHNpZGVcbiAgICAgICAgICAgIG9uOmNsaWNrX291dHNpZGU9e2Nsb3NlQnJvd3Nlcn1cbiAgICAgICAgPlxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cInRvb2xCYXIgbmF2YmFyXCI+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImlucHV0LWdyb3VwIHctYXV0b1wiPlxuICAgICAgICAgICAgICAgICAgICA8aW5wdXRcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU9XCJ0ZXh0XCJcbiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU9XCJmaWx0ZXJcIlxuICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3M9XCJmb3JtLWNvbnRyb2wgZm9ybS1jb250cm9sLXNtXCJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlPXtzZWFyY2hUZXJtfVxuICAgICAgICAgICAgICAgICAgICAgICAgb246aW5wdXQ9e3NlYXJjaEl0ZW1zS2V5dXB9XG4gICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgIHsjaWYgc2VhcmNoVGVybX1cbiAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzcz1cImJ0biBidG4tbGlnaHQgYnRuLXNtXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlPVwiYnV0dG9uXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbjpjbGlja3xwcmV2ZW50RGVmYXVsdD17KCkgPT4gc2VhcmNoSXRlbXMoXCJcIil9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPjxzdmcgdXNlOnJlc29sdmVJY29uPXt7IGljb25OYW1lOiBcInhcIiB9fSAvPjwvYnV0dG9uXG4gICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgIHsvaWZ9XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgPFJlY2VudGx5VXNlZCBvbjpzZWxlY3RJdGVtPXtzZWxlY3RSZWNlbnRseVVzZWR9IC8+XG4gICAgICAgICAgICAgICAgPEZhdm9yaXRlcyBvbjpzZWxlY3RJdGVtPXtzZWxlY3RGYXZvcml0ZX0gLz5cbiAgICAgICAgICAgICAgICB7I2lmICRjb25maWcudXBsb2FkRW5hYmxlZCAmJiAkY29uZmlnLm1vZGUgPT0gXCJicm93c2VcIn1cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cIm1zLTJcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlPVwiYnV0dG9uXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzcz1cInVwbG9hZCBidG4gYnRuLW91dGxpbmUtbGlnaHQgYnRuLXNtXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YWJpbmRleD1cIjBcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uOmtleWRvd249e3VwbG9hZH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbjpjbGljaz17dXBsb2FkfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgID48c3ZnIHVzZTpyZXNvbHZlSWNvbj17eyBpY29uTmFtZTogXCJ1cGxvYWRcIiB9fSAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtfdChcInVwbG9hZCB0byAke2N1cnJlbnRfcGF0aH1cIiwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50X3BhdGg6ICRjdXJyZW50UGF0aCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KX08L2J1dHRvblxuICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICB7L2lmfVxuICAgICAgICAgICAgICAgIDxidXR0b25cbiAgICAgICAgICAgICAgICAgICAgY2xhc3M9XCJidG4gYnRuLWxpbmsgdGV4dC13aGl0ZSBtcy1hdXRvXCJcbiAgICAgICAgICAgICAgICAgICAgdGFiaW5kZXg9XCIwXCJcbiAgICAgICAgICAgICAgICAgICAgb246Y2xpY2t8cHJldmVudERlZmF1bHQ9eygpID0+IGNsb3NlQnJvd3NlcigpfVxuICAgICAgICAgICAgICAgICAgICA+PHN2ZyB1c2U6cmVzb2x2ZUljb249e3sgaWNvbk5hbWU6IFwieC1jaXJjbGVcIiB9fSAvPjwvYnV0dG9uXG4gICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICB7I2F3YWl0ICRjb250ZW50SXRlbXN9XG4gICAgICAgICAgICAgICAgPHA+e190KFwibG9hZGluZyBjb250ZW50IGl0ZW1zXCIpfTwvcD5cbiAgICAgICAgICAgIHs6dGhlbiBsZXZlbHN9XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImxldmVsQ29sdW1uc1wiPlxuICAgICAgICAgICAgICAgICAgICB7I2VhY2ggbGV2ZWxzIGFzIGxldmVsLCBpIChsZXZlbC5wYXRoKX1cbiAgICAgICAgICAgICAgICAgICAgICAgIHsjaWYgJHByZXZpZXdVaWRzLmxlbmd0aCA8IDIgfHwgISRwcmV2aWV3VWlkcy5pbmNsdWRlcyhsZXZlbC5VSUQpfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3M9XCJsZXZlbENvbHVtbntpICUgMiA9PSAwID8gJyBvZGQnIDogJyBldmVuJ30ge2kgPT09XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldmVscy5sZW5ndGggLSAxXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/ICdhY3RpdmUnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6ICcnfVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluOmZseXxsb2NhbD17eyBkdXJhdGlvbjogNTAwIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwibGV2ZWxUb29sYmFyXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7I2lmIGkgPT0gMCAmJiAkY29uZmlnLm1vZGUgPT0gXCJicm93c2VcIn1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU9XCJidXR0b25cIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzcz1cImJ0biBidG4tbGluayBidG4teHMgcHMtMFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhYmluZGV4PVwiMFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uOmtleWRvd249eygpID0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGFuZ2VQYXRoKCRjb25maWcucm9vdFBhdGgpfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbjpjbGljaz17KCkgPT4gY2hhbmdlUGF0aCgkY29uZmlnLnJvb3RQYXRoKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPjxzdmdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVzZTpyZXNvbHZlSWNvbj17eyBpY29uTmFtZTogXCJob3VzZVwiIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+PC9idXR0b25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7L2lmfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeyNpZiBpID09IGxldmVscy5sZW5ndGggLSAxfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsjaWYgbGV2ZWwuc2VsZWN0YWJsZSAmJiAhbGV2ZWwuc2hvd0ZpbHRlciAmJiAhcHJldmlld0l0ZW0uVUlEfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzcz1cImJ0biBidG4teHMgYnRuLW91dGxpbmUtcHJpbWFyeSBkLWZsZXggYWxpZ24taXRlbXMtY2VudGVyXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlPXtfdChcInNlbGVjdCAke2xldmVsX3BhdGh9XCIsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXZlbF9wYXRoOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXZlbC5UaXRsZSB8fCBpdGVtSWQobGV2ZWwpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaXNhYmxlZD17IWlzU2VsZWN0YWJsZShsZXZlbCl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbjpjbGlja3xwcmV2ZW50RGVmYXVsdD17KCkgPT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhZGRJdGVtKGxldmVsKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID48c3ZnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXNlOnJlc29sdmVJY29uPXt7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGljb25OYW1lOiBcInBsdXNcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwic2VsZWN0LWJ1dHRvbi1lbGxpcHNpc1wiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPntsZXZlbC5UaXRsZSB8fCBpdGVtSWQobGV2ZWwpfTwvc3BhblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPjwvYnV0dG9uXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7L2lmfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJsZXZlbEFjdGlvbnNcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeyNpZiAkY29uZmlnLm1vZGUgIT09IFwic2VhcmNoXCJ9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7I2lmIGxldmVsLnNlYXJjaFRlcm0gfHwgbGV2ZWwuc2hvd0ZpbHRlcn1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZT1cInRleHRcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lPVwibGV2ZWxGaWx0ZXJcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzcz1cImZvcm0tY29udHJvbCBmb3JtLWNvbnRyb2wtc21cIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZT17bGV2ZWwuc2VhcmNoVGVybSB8fCBcIlwifVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbjppbnB1dD17ZmlsdGVyTGV2ZWxLZXl1cH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3M9XCJidG4gYnRuLWxpbmsgYnRuLXhzIGxldmVsLWZpbHRlclwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlPXtfdChcImNsZWFyIGZpbHRlclwiKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb246Y2xpY2t8cHJldmVudERlZmF1bHQ9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbHRlckxldmVsKFwiXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV2ZWwuc2hvd0ZpbHRlciA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHN2Z1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXNlOnJlc29sdmVJY29uPXt7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWNvbk5hbWU6IFwieFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz48L2J1dHRvblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHs6ZWxzZX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzPVwiYnRuIGJ0bi1saW5rIGJ0bi14cyBsZXZlbC1maWx0ZXJcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aXRsZT17X3QoXCJsZXZlbCBmaWx0ZXJcIil9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uOmNsaWNrfHByZXZlbnREZWZhdWx0PXsoKSA9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGxldmVsLnNob3dGaWx0ZXIgPSB0cnVlKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzdmdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVzZTpyZXNvbHZlSWNvbj17e1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGljb25OYW1lOiBcImZpbHRlclwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz48L2J1dHRvblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsvaWZ9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsvaWZ9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsjaWYgIWdyaWRWaWV3fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzPVwiYnRuIGJ0bi1saW5rIGJ0bi14cyBncmlkLXZpZXdcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlPXtfdChcImdyaWQgdmlld1wiKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbjpjbGljaz17KCkgPT4gKGdyaWRWaWV3ID0gdHJ1ZSl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHN2Z1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1c2U6cmVzb2x2ZUljb249e3tcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGljb25OYW1lOiBcImdyaWRcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHs6ZWxzZX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzcz1cImJ0biBidG4tbGluayBidG4teHMgZ3JpZC12aWV3XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aXRsZT17X3QoXCJsaXN0IHZpZXdcIil9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb246Y2xpY2s9eygpID0+IChncmlkVmlldyA9IGZhbHNlKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3ZnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVzZTpyZXNvbHZlSWNvbj17e1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWNvbk5hbWU6IFwibGlzdFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgey9pZn1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsvaWZ9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwibGV2ZWxJdGVtc1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeyNlYWNoIGxldmVsLnJlc3VsdHMgfHwgW10gYXMgaXRlbSwgbn1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8IS0tIHN2ZWx0ZS1pZ25vcmUgbWlzc2luZy1kZWNsYXJhdGlvbiAtLT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzPVwiY29udGVudEl0ZW17biAlIDIgPT0gMFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyAnIG9kZCdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogJyBldmVuJ317aXRlbUluUGF0aChpdGVtKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyAnIGluUGF0aCdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogJyd9eyRwcmV2aWV3VWlkcy5pbmRleE9mKGl0ZW0uVUlEKSAhPVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAtMVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyAnIHNlbGVjdGVkSXRlbSdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogJyd9eyFpc1NlbGVjdGFibGUoaXRlbSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gJyB0ZXh0LWJvZHktdGVydGlhcnknXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6ICcnfVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvbGU9XCJidXR0b25cIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YWJpbmRleD17bn1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YS11dWlkPXtpdGVtLlVJRH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb246a2V5ZG93bnxwcmV2ZW50RGVmYXVsdD17KGUpID0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBrZXlib2FyZE5hdmlnYXRpb24oaXRlbSwgZSl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uOmNsaWNrPXsoZSkgPT4gY2xpY2tJdGVtKGl0ZW0sIGUpfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3M9e2dyaWRWaWV3XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBcImdyaWQtcHJldmlld1wiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBcIml0ZW0tdGl0bGVcIn1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlPVwie2l0ZW0ucGF0aH06IHtpdGVtLlRpdGxlIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXRlbUlkKGl0ZW0pfVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsjaWYgZ3JpZFZpZXcgJiYgaXRlbS5nZXRJY29ufVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbWdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3JjPXtgJHtpdGVtLmdldFVSTH0vQEBpbWFnZXMvaW1hZ2UvdGh1bWJgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbHQ9e2l0ZW0uVGl0bGUgfHwgaXRlbUlkKGl0ZW0pfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7OmVsc2V9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJwbG9uZS1pY29uXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzdmdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVzZTpyZXNvbHZlSWNvbj17e1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGljb25OYW1lOiBgY29udGVudHR5cGUvJHtpdGVtLnBvcnRhbF90eXBlLnRvTG93ZXJDYXNlKCkucmVwbGFjZSgvXFwufCAvZywgXCItXCIpfWAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsvaWZ9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzPXshaXRlbS5UaXRsZSA/IFwiaWQtb25seVwiIDogXCJcIn1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+e2l0ZW0uVGl0bGUgfHwgaXRlbUlkKGl0ZW0pfTwvc3BhblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeyNpZiAkY29uZmlnLm1vZGUgPT0gXCJzZWFyY2hcIn1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnIgLz48c3BhbiBjbGFzcz1cInNtYWxsXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPntpdGVtLnBhdGh9PC9zcGFuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgey9pZn1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsjaWYgaXRlbS5pc19mb2xkZXJpc2ggJiYgJGNvbmZpZy5tb2RlID09IFwiYnJvd3NlXCJ9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiYnJvd3NlU3ViXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHN2Z1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1c2U6cmVzb2x2ZUljb249e3tcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGljb25OYW1lOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiYXJyb3ctcmlnaHQtY2lyY2xlXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7L2lmfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgey9lYWNofVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeyNpZiBsZXZlbC5sb2FkX21vcmV9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzcz1cImxvYWRtb3JlXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YS1sZXZlbC1wYXRoPXtsZXZlbC5wYXRofVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhLXNlYXJjaC10ZXJtPXtzZWFyY2hUZXJtIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXZlbC5zZWFyY2hUZXJtfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhLWxldmVsLW5leHQtcGFnZT17K2xldmVsLnBhZ2UgKyAxfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1c2U6bG9hZE1vcmVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzPVwic3Bpbm5lci1ib3JkZXJcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcm9sZT1cInN0YXR1c1wiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID48L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsvaWZ9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7I2lmIGxldmVsLnRvdGFsID09IDB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImNvbnRlbnRJdGVtXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwPntfdChcIm5vIHJlc3VsdHMgZm91bmRcIil9PC9wPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgey9pZn1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICB7L2lmfVxuICAgICAgICAgICAgICAgICAgICB7L2VhY2h9XG4gICAgICAgICAgICAgICAgICAgIHsjaWYgcHJldmlld0l0ZW0/LlVJRCAmJiAkcHJldmlld1VpZHMubGVuZ3RoID09IDF9XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwicHJldmlld1wiIGluOmZseXxsb2NhbD17eyBkdXJhdGlvbjogNTAwIH19PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJsZXZlbFRvb2xiYXJcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInNlbGVjdExldmVsIG1lLTNcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsjaWYgaXNTZWxlY3RhYmxlKHByZXZpZXdJdGVtKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzPVwiYnRuIGJ0bi14cyBidG4tb3V0bGluZS1wcmltYXJ5IGQtZmxleCBhbGlnbi1pdGVtcy1jZW50ZXJcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aXRsZT17X3QoXCJzZWxlY3QgJHtwcmV2aWV3X3BhdGh9XCIsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByZXZpZXdfcGF0aDogcHJldmlld0l0ZW0uVGl0bGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbjpjbGlja3xwcmV2ZW50RGVmYXVsdD17KCkgPT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFkZEl0ZW0ocHJldmlld0l0ZW0pfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+PHN2Z1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXNlOnJlc29sdmVJY29uPXt7IGljb25OYW1lOiBcInBsdXNcIiB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cInNlbGVjdC1idXR0b24tZWxsaXBzaXNcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPntwcmV2aWV3SXRlbS5UaXRsZX08L3NwYW5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgey9pZn1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImluZm9cIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeyNpZiBwcmV2aWV3SXRlbS5nZXRJY29ufVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInByZXZpZXdJbWFnZVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbWdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3JjPVwie3ByZXZpZXdJdGVtLmdldFVSTH0vQEBpbWFnZXMvaW1hZ2UvcHJldmlld1wiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFsdD17cHJldmlld0l0ZW0uVGl0bGV9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7OmVsc2V9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwicHJldmlld0ljb25cIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3ZnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVzZTpyZXNvbHZlSWNvbj17e1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWNvbk5hbWU6IGBjb250ZW50dHlwZS8ke3ByZXZpZXdJdGVtLnBvcnRhbF90eXBlLnRvTG93ZXJDYXNlKCkucmVwbGFjZSgvXFwufCAvZywgXCItXCIpfWAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7L2lmfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGw+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZHQ+e190KFwiSWRcIil9PC9kdD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkZD57aXRlbUlkKHByZXZpZXdJdGVtKX08L2RkPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGR0PntfdChcIlRpdGxlXCIpfTwvZHQ+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGQ+e3ByZXZpZXdJdGVtLlRpdGxlfTwvZGQ+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7I2lmIHByZXZpZXdJdGVtLkRlc2NyaXB0aW9ufVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkdD57X3QoXCJEZXNjcmlwdGlvblwiKX08L2R0PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkZFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzcz1cInRleHQtdHJ1bmNhdGVcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aXRsZT17cHJldmlld0l0ZW0uRGVzY3JpcHRpb259XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7cHJldmlld0l0ZW0uRGVzY3JpcHRpb259XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kZD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsvaWZ9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7I2lmIHByZXZpZXdJdGVtLmNyZWF0ZWR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGR0PntfdChcImNyZWF0ZWRcIil9PC9kdD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGQ+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0aW1lIGRhdGV0aW1lPXtwcmV2aWV3SXRlbS5jcmVhdGVkfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPntmb3JtYXREYXRlKHByZXZpZXdJdGVtLmNyZWF0ZWQpfTwvdGltZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kZD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsvaWZ9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7I2lmIHByZXZpZXdJdGVtLm1vZGlmaWVkfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkdD57X3QoXCJtb2RpZmllZFwiKX08L2R0PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkZD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRpbWUgZGF0ZXRpbWU9e3ByZXZpZXdJdGVtLm1vZGlmaWVkfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPntmb3JtYXREYXRlKHByZXZpZXdJdGVtLm1vZGlmaWVkKX08L3RpbWVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGQ+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7L2lmfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeyNpZiBwcmV2aWV3SXRlbS5yZXZpZXdfc3RhdGV9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGR0PntfdChcInJldmlld19zdGF0ZVwiKX08L2R0PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkZD57cHJldmlld0l0ZW0ucmV2aWV3X3N0YXRlfTwvZGQ+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7L2lmfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2RsPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIHsvaWZ9XG4gICAgICAgICAgICAgICAgICAgIHsjaWYgJHByZXZpZXdVaWRzLmxlbmd0aCA+IDF9XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwicHJldmlld1wiIGluOmZseXxsb2NhbD17eyBkdXJhdGlvbjogNTAwIH19PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJsZXZlbFRvb2xiYXJcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3M9XCJidG4gYnRuLXhzIGJ0bi1vdXRsaW5lLXByaW1hcnkgZC1mbGV4IGFsaWduLWl0ZW1zLWNlbnRlclwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aXRsZT17X3QoXCJhZGQgc2VsZWN0ZWQgaXRlbXNcIil9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbjpjbGlja3xwcmV2ZW50RGVmYXVsdD17YWRkU2VsZWN0ZWRJdGVtc31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID48c3ZnIHVzZTpyZXNvbHZlSWNvbj17eyBpY29uTmFtZTogXCJwbHVzXCIgfX0gLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwic2VsZWN0LWJ1dHRvbi1lbGxpcHNpc1wiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPntfdChcImFkZCBzZWxlY3RlZCBpdGVtc1wiKX08L3NwYW5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImluZm9cIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHN2Z1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXNlOnJlc29sdmVJY29uPXt7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWNvbk5hbWU6IFwiZmlsZXNcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwiXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID57X3QoXCIke2l0ZW1fY291bnR9IGl0ZW1zIHNlbGVjdGVkXCIsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpdGVtX2NvdW50OiAkcHJldmlld1VpZHMubGVuZ3RoLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSl9PC9zcGFuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICB7L2lmfVxuICAgICAgICAgICAgICAgICAgICB7I2lmIHNob3dVcGxvYWR9XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwidXBsb2FkLXdyYXBwZXJcIj48L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgey9pZn1cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIHs6Y2F0Y2ggZXJyb3J9XG4gICAgICAgICAgICAgICAgPHAgc3R5bGU9XCJjb2xvcjogcmVkXCI+e2Vycm9yLm1lc3NhZ2V9PC9wPlxuICAgICAgICAgICAgey9hd2FpdH1cbiAgICAgICAgPC9uYXY+XG4gICAgPC9kaXY+XG57L2lmfVxuXG48c3R5bGU+XG4gICAgLmNvbnRlbnQtYnJvd3Nlci1wb3NpdGlvbi13cmFwcGVyIHtcbiAgICAgICAgcG9zaXRpb246IGZpeGVkO1xuICAgICAgICB0b3A6IDA7XG4gICAgICAgIHJpZ2h0OiAwO1xuICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IGVuZDtcbiAgICAgICAgei1pbmRleDogMTUwMDtcbiAgICAgICAgd2lkdGg6IDEwMCU7XG4gICAgICAgIGhlaWdodDogMTAwdmg7XG4gICAgICAgIGJhY2tncm91bmQtY29sb3I6IHJnYmEoMCwgMCwgMCwgMC4yNSk7XG4gICAgfVxuICAgIC5idG4teHMge1xuICAgICAgICAtLWJzLWJ0bi1wYWRkaW5nLXk6IDAuMTVyZW07XG4gICAgICAgIC0tYnMtYnRuLXBhZGRpbmcteDogMC41cmVtO1xuICAgICAgICAtLWJzLWJ0bi1mb250LXNpemU6IDAuNzVyZW07XG4gICAgfVxuICAgIC5jb250ZW50LWJyb3dzZXIge1xuICAgICAgICBoZWlnaHQ6IDEwMHZoO1xuICAgICAgICBtaW4td2lkdGg6IDQ1MHB4O1xuICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1icy1saWdodC1iZy1zdWJ0bGUpO1xuICAgICAgICBib3JkZXItbGVmdDogdmFyKC0tYnMtYm9yZGVyLXN0eWxlKSB2YXIoLS1icy1ib3JkZXItd2lkdGgpICNmZmY7XG4gICAgICAgIHotaW5kZXg6IDE1MDA7XG4gICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gICAgfVxuICAgIC50b29sQmFyIHtcbiAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tYnMtcHJpbWFyeSk7XG4gICAgICAgIHBhZGRpbmc6IDAuMzI1cmVtIDAuNzVyZW07XG4gICAgICAgIGNvbG9yOiB2YXIoLS1icy1saWdodCk7XG4gICAgICAgIHdpZHRoOiAxMDAlO1xuICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IHN0YXJ0O1xuICAgIH1cbiAgICAudG9vbEJhciA6Z2xvYmFsKHN2Zykge1xuICAgICAgICB2ZXJ0aWNhbC1hbGlnbjogLTAuMTI1ZW07XG4gICAgfVxuICAgIC5sZXZlbENvbHVtbnMge1xuICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICBmbGV4LXdyYXA6IG5vd3JhcDtcbiAgICAgICAgd2lkdGg6IDEwMCU7XG4gICAgICAgIG92ZXJmbG93LXk6IGhpZGRlbjtcbiAgICAgICAgb3ZlcmZsb3cteDogYXV0bztcbiAgICAgICAgZmxleC1ncm93OiAzO1xuICAgICAgICBib3JkZXItbGVmdDogdmFyKC0tYnMtYm9yZGVyLXN0eWxlKSB2YXIoLS1icy1ib3JkZXItY29sb3IpIHZhcigtLWJzLWJvcmRlci13aWR0aCk7XG4gICAgICAgIHVzZXItc2VsZWN0OiBub25lO1xuICAgIH1cblxuICAgIC5sZXZlbENvbHVtbiB7XG4gICAgICAgIHdpZHRoOiAzMjBweDtcbiAgICAgICAgYmFja2dyb3VuZDogcmdiYSh2YXIoLS1icy1zZWNvbmRhcnktYmctcmdiKSwgMC41NSk7XG4gICAgICAgIGJvcmRlci1yaWdodDogdmFyKC0tYnMtYm9yZGVyLXN0eWxlKSB2YXIoLS1icy1ib3JkZXItd2lkdGgpXG4gICAgICAgICAgICB2YXIoLS1icy1ib3JkZXItY29sb3IpO1xuICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICAgICAgICBmbGV4LWdyb3c6IDA7XG4gICAgICAgIGZsZXgtc2hyaW5rOiAwO1xuICAgIH1cbiAgICAubGV2ZWxDb2x1bW4uYWN0aXZlIHtcbiAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYnMtYm9keS1iZyk7XG4gICAgICAgIGJvcmRlci1sZWZ0OiB2YXIoLS1icy1ib3JkZXItc3R5bGUpIHZhcigtLWJzLWJvcmRlci13aWR0aCkgdmFyKC0tYnMtcHJpbWFyeSk7XG4gICAgICAgIG1hcmdpbi1sZWZ0OiAtMXB4O1xuICAgIH1cbiAgICAubGV2ZWxUb29sYmFyIHtcbiAgICAgICAgd2lkdGg6IDEwMCU7XG4gICAgICAgIG1pbi1oZWlnaHQ6IDIuNXJlbTtcbiAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuO1xuICAgICAgICB3aGl0ZS1zcGFjZTogbm93cmFwO1xuICAgICAgICBwYWRkaW5nOiAwLjM3NXJlbTtcbiAgICAgICAgYm9yZGVyLWJvdHRvbTogdmFyKC0tYnMtYm9yZGVyLXN0eWxlKSB2YXIoLS1icy1ib3JkZXItd2lkdGgpXG4gICAgICAgICAgICB2YXIoLS1icy1ib3JkZXItY29sb3IpO1xuICAgIH1cbiAgICAubGV2ZWxUb29sYmFyID4gLmxldmVsQWN0aW9ucyB7XG4gICAgICAgIG1hcmdpbi1sZWZ0OiBhdXRvO1xuICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgIH1cbiAgICAubGV2ZWxUb29sYmFyID4gYnV0dG9uIHtcbiAgICAgICAgd2hpdGUtc3BhY2U6IG5vd3JhcDtcbiAgICAgICAgb3ZlcmZsb3c6IGhpZGRlbjtcbiAgICAgICAgdGV4dC1vdmVyZmxvdzogZWxsaXBzaXM7XG4gICAgfVxuXG4gICAgLmxldmVsSXRlbXMge1xuICAgICAgICBvdmVyZmxvdy14OiBhdXRvO1xuICAgIH1cbiAgICAuY29udGVudEl0ZW0ge1xuICAgICAgICAvKiBwYWRkaW5nOiAxcmVtIDFyZW07ICovXG4gICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAgICAgIGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjtcbiAgICAgICAgZm9udC1zaXplOiA5MCU7XG4gICAgICAgIG1pbi1oZWlnaHQ6IDJyZW07XG4gICAgfVxuICAgIC5jb250ZW50SXRlbTpmb2N1cy12aXNpYmxlIHtcbiAgICAgICAgb3V0bGluZTogbm9uZTtcbiAgICB9XG4gICAgLmNvbnRlbnRJdGVtLmV2ZW4ge1xuICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2JhKHZhcigtLWJzLXNlY29uZGFyeS1iZy1yZ2IpLCAwLjQpO1xuICAgIH1cbiAgICAuY29udGVudEl0ZW0uaW5QYXRoLFxuICAgIC5jb250ZW50SXRlbS5zZWxlY3RlZEl0ZW0ge1xuICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2JhKHZhcigtLWJzLXByaW1hcnktcmdiKSwgMC4xNSk7XG4gICAgfVxuICAgIC5jb250ZW50SXRlbSA+ICoge1xuICAgICAgICBwYWRkaW5nOiAwLjVyZW07XG4gICAgICAgIHdoaXRlLXNwYWNlOiBub3dyYXA7XG4gICAgICAgIG1heC13aWR0aDogNDUwcHg7XG4gICAgICAgIHRleHQtb3ZlcmZsb3c6IGVsbGlwc2lzO1xuICAgICAgICBvdmVyZmxvdzogaGlkZGVuO1xuICAgIH1cbiAgICAuY29udGVudEl0ZW0gPiAuYnJvd3NlU3ViIHtcbiAgICAgICAgZmxleC1zaHJpbms6IDA7XG4gICAgfVxuICAgIC5jb250ZW50SXRlbSAucGxvbmUtaWNvbiB7XG4gICAgICAgIGRpc3BsYXk6IGlubGluZS1ibG9jaztcbiAgICB9XG4gICAgLmNvbnRlbnRJdGVtIC5ncmlkLXByZXZpZXcgPiBpbWcge1xuICAgICAgICB3aWR0aDogOTVweDtcbiAgICAgICAgaGVpZ2h0OiA5NXB4O1xuICAgICAgICBvYmplY3QtZml0OiBjb3ZlcjtcbiAgICAgICAgZmxvYXQ6IGxlZnQ7XG4gICAgICAgIG1hcmdpbi1yaWdodDogMXJlbTtcbiAgICB9XG4gICAgLmNvbnRlbnRJdGVtIC5pZC1vbmx5IHtcbiAgICAgICAgZm9udC1zdHlsZTogaXRhbGljO1xuICAgIH1cbiAgICAucHJldmlldyB7XG4gICAgICAgIHdpZHRoOiAzMjBweDtcbiAgICAgICAgZmxleC1zaHJpbms6IDA7XG4gICAgICAgIG1pbi1oZWlnaHQ6IDMwMHB4O1xuICAgIH1cbiAgICAucHJldmlldyAuaW5mbyB7XG4gICAgICAgIHBhZGRpbmc6IDAuNXJlbTtcbiAgICAgICAgd2lkdGg6IDEwMCU7XG4gICAgICAgIHdvcmQtd3JhcDogYW55d2hlcmU7XG4gICAgfVxuICAgIC5wcmV2aWV3IC5pbmZvIC5wcmV2aWV3SWNvbiB7XG4gICAgICAgIG1hcmdpbjogMCBhdXRvIDFyZW0gYXV0bztcbiAgICB9XG4gICAgLnByZXZpZXcgLmluZm8gLnByZXZpZXdJY29uIHN2ZyB7XG4gICAgICAgIHdpZHRoOiA1MHB4ICFpbXBvcnRhbnQ7XG4gICAgICAgIGhlaWdodDogNTBweCAhaW1wb3J0YW50O1xuICAgIH1cbiAgICAucHJldmlldyBpbWcge1xuICAgICAgICBtYXgtd2lkdGg6IDEwMCU7XG4gICAgICAgIGhlaWdodDogYXV0bztcbiAgICAgICAgbWFyZ2luLWJvdHRvbTogMC41cmVtO1xuICAgIH1cblxuICAgIC51cGxvYWQtd3JhcHBlciB7XG4gICAgICAgIHBhZGRpbmc6IDFyZW07XG4gICAgICAgIHdpZHRoOiA1NDBweDtcbiAgICAgICAgb3ZlcmZsb3cteDogYXV0bztcbiAgICAgICAgZmxleC1zaHJpbms6IDA7XG4gICAgfVxuICAgIC5sb2FkbW9yZSB7XG4gICAgICAgIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgICAgICAgcGFkZGluZzogMC4yNXJlbSAwO1xuICAgIH1cblxuICAgIC5zZWxlY3QtYnV0dG9uLWVsbGlwc2lzIHtcbiAgICAgICAgd2hpdGUtc3BhY2U6IG5vd3JhcDtcbiAgICAgICAgbWF4LXdpZHRoOiAxNTBweDtcbiAgICAgICAgdGV4dC1vdmVyZmxvdzogZWxsaXBzaXM7XG4gICAgICAgIG92ZXJmbG93OiBoaWRkZW47XG4gICAgfVxuPC9zdHlsZT5cbiJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUF1eEJJLHdFQUFrQyxDQUM5QixRQUFRLENBQUUsS0FBSyxDQUNmLEdBQUcsQ0FBRSxDQUFDLENBQ04sS0FBSyxDQUFFLENBQUMsQ0FDUixPQUFPLENBQUUsSUFBSSxDQUNiLGVBQWUsQ0FBRSxHQUFHLENBQ3BCLE9BQU8sQ0FBRSxJQUFJLENBQ2IsS0FBSyxDQUFFLElBQUksQ0FDWCxNQUFNLENBQUUsS0FBSyxDQUNiLGdCQUFnQixDQUFFLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUN4QyxDQUNBLDhDQUFRLENBQ0osa0JBQWtCLENBQUUsT0FBTyxDQUMzQixrQkFBa0IsQ0FBRSxNQUFNLENBQzFCLGtCQUFrQixDQUFFLE9BQ3hCLENBQ0EsdURBQWlCLENBQ2IsTUFBTSxDQUFFLEtBQUssQ0FDYixTQUFTLENBQUUsS0FBSyxDQUNoQixnQkFBZ0IsQ0FBRSxJQUFJLG9CQUFvQixDQUFDLENBQzNDLFdBQVcsQ0FBRSxJQUFJLGlCQUFpQixDQUFDLENBQUMsSUFBSSxpQkFBaUIsQ0FBQyxDQUFDLElBQUksQ0FDL0QsT0FBTyxDQUFFLElBQUksQ0FDYixPQUFPLENBQUUsSUFBSSxDQUNiLGNBQWMsQ0FBRSxNQUNwQixDQUNBLCtDQUFTLENBQ0wsZ0JBQWdCLENBQUUsSUFBSSxZQUFZLENBQUMsQ0FDbkMsT0FBTyxDQUFFLFFBQVEsQ0FBQyxPQUFPLENBQ3pCLEtBQUssQ0FBRSxJQUFJLFVBQVUsQ0FBQyxDQUN0QixLQUFLLENBQUUsSUFBSSxDQUNYLE9BQU8sQ0FBRSxJQUFJLENBQ2IsZUFBZSxDQUFFLEtBQ3JCLENBQ0EscUJBQVEsQ0FBUyxHQUFLLENBQ2xCLGNBQWMsQ0FBRSxRQUNwQixDQUNBLG9EQUFjLENBQ1YsT0FBTyxDQUFFLElBQUksQ0FDYixTQUFTLENBQUUsTUFBTSxDQUNqQixLQUFLLENBQUUsSUFBSSxDQUNYLFVBQVUsQ0FBRSxNQUFNLENBQ2xCLFVBQVUsQ0FBRSxJQUFJLENBQ2hCLFNBQVMsQ0FBRSxDQUFDLENBQ1osV0FBVyxDQUFFLElBQUksaUJBQWlCLENBQUMsQ0FBQyxJQUFJLGlCQUFpQixDQUFDLENBQUMsSUFBSSxpQkFBaUIsQ0FBQyxDQUNqRixXQUFXLENBQUUsSUFDakIsQ0FFQSxtREFBYSxDQUNULEtBQUssQ0FBRSxLQUFLLENBQ1osVUFBVSxDQUFFLEtBQUssSUFBSSxxQkFBcUIsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQ2xELFlBQVksQ0FBRSxJQUFJLGlCQUFpQixDQUFDLENBQUMsSUFBSSxpQkFBaUIsQ0FBQztBQUNuRSxZQUFZLElBQUksaUJBQWlCLENBQUMsQ0FDMUIsT0FBTyxDQUFFLElBQUksQ0FDYixjQUFjLENBQUUsTUFBTSxDQUN0QixTQUFTLENBQUUsQ0FBQyxDQUNaLFdBQVcsQ0FBRSxDQUNqQixDQUNBLFlBQVksOENBQVEsQ0FDaEIsVUFBVSxDQUFFLElBQUksWUFBWSxDQUFDLENBQzdCLFdBQVcsQ0FBRSxJQUFJLGlCQUFpQixDQUFDLENBQUMsSUFBSSxpQkFBaUIsQ0FBQyxDQUFDLElBQUksWUFBWSxDQUFDLENBQzVFLFdBQVcsQ0FBRSxJQUNqQixDQUNBLG9EQUFjLENBQ1YsS0FBSyxDQUFFLElBQUksQ0FDWCxVQUFVLENBQUUsTUFBTSxDQUNsQixPQUFPLENBQUUsSUFBSSxDQUNiLGVBQWUsQ0FBRSxhQUFhLENBQzlCLFdBQVcsQ0FBRSxNQUFNLENBQ25CLE9BQU8sQ0FBRSxRQUFRLENBQ2pCLGFBQWEsQ0FBRSxJQUFJLGlCQUFpQixDQUFDLENBQUMsSUFBSSxpQkFBaUIsQ0FBQztBQUNwRSxZQUFZLElBQUksaUJBQWlCLENBQzdCLENBQ0EsMEJBQWEsQ0FBRyx1Q0FBYyxDQUMxQixXQUFXLENBQUUsSUFBSSxDQUNqQixPQUFPLENBQUUsSUFDYixDQUNBLDBCQUFhLENBQUcsZ0NBQU8sQ0FDbkIsV0FBVyxDQUFFLE1BQU0sQ0FDbkIsUUFBUSxDQUFFLE1BQU0sQ0FDaEIsYUFBYSxDQUFFLFFBQ25CLENBRUEsa0RBQVksQ0FDUixVQUFVLENBQUUsSUFDaEIsQ0FDQSxtREFBYSxDQUVULE9BQU8sQ0FBRSxJQUFJLENBQ2IsV0FBVyxDQUFFLE1BQU0sQ0FDbkIsZUFBZSxDQUFFLGFBQWEsQ0FDOUIsU0FBUyxDQUFFLEdBQUcsQ0FDZCxVQUFVLENBQUUsSUFDaEIsQ0FDQSxtREFBWSxjQUFlLENBQ3ZCLE9BQU8sQ0FBRSxJQUNiLENBQ0EsWUFBWSw0Q0FBTSxDQUNkLGdCQUFnQixDQUFFLEtBQUssSUFBSSxxQkFBcUIsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUMxRCxDQUNBLFlBQVksOENBQU8sQ0FDbkIsWUFBWSxvREFBYyxDQUN0QixnQkFBZ0IsQ0FBRSxLQUFLLElBQUksZ0JBQWdCLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FDdEQsQ0FDQSx5QkFBWSxDQUFHLDBCQUFFLENBQ2IsT0FBTyxDQUFFLE1BQU0sQ0FDZixXQUFXLENBQUUsTUFBTSxDQUNuQixTQUFTLENBQUUsS0FBSyxDQUNoQixhQUFhLENBQUUsUUFBUSxDQUN2QixRQUFRLENBQUUsTUFDZCxDQUNBLHlCQUFZLENBQUcsb0NBQVcsQ0FDdEIsV0FBVyxDQUFFLENBQ2pCLENBQ0EseUJBQVksQ0FBQyxxQ0FBWSxDQUNyQixPQUFPLENBQUUsWUFDYixDQUNBLHlCQUFZLENBQUMsMEJBQWEsQ0FBRyxnQkFBSSxDQUM3QixLQUFLLENBQUUsSUFBSSxDQUNYLE1BQU0sQ0FBRSxJQUFJLENBQ1osVUFBVSxDQUFFLEtBQUssQ0FDakIsS0FBSyxDQUFFLElBQUksQ0FDWCxZQUFZLENBQUUsSUFDbEIsQ0FDQSx5QkFBWSxDQUFDLGtDQUFTLENBQ2xCLFVBQVUsQ0FBRSxNQUNoQixDQUNBLCtDQUFTLENBQ0wsS0FBSyxDQUFFLEtBQUssQ0FDWixXQUFXLENBQUUsQ0FBQyxDQUNkLFVBQVUsQ0FBRSxLQUNoQixDQUNBLHFCQUFRLENBQUMsK0JBQU0sQ0FDWCxPQUFPLENBQUUsTUFBTSxDQUNmLEtBQUssQ0FBRSxJQUFJLENBQ1gsU0FBUyxDQUFFLFFBQ2YsQ0FDQSxxQkFBUSxDQUFDLEtBQUssQ0FBQyxzQ0FBYSxDQUN4QixNQUFNLENBQUUsQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsSUFDeEIsQ0FDQSxxQkFBUSxDQUFDLEtBQUssQ0FBQyxZQUFZLENBQUMsNkJBQUksQ0FDNUIsS0FBSyxDQUFFLElBQUksQ0FBQyxVQUFVLENBQ3RCLE1BQU0sQ0FBRSxJQUFJLENBQUMsVUFDakIsQ0FDQSxxQkFBUSxDQUFDLDZCQUFJLENBQ1QsU0FBUyxDQUFFLElBQUksQ0FDZixNQUFNLENBQUUsSUFBSSxDQUNaLGFBQWEsQ0FBRSxNQUNuQixDQUVBLHNEQUFnQixDQUNaLE9BQU8sQ0FBRSxJQUFJLENBQ2IsS0FBSyxDQUFFLEtBQUssQ0FDWixVQUFVLENBQUUsSUFBSSxDQUNoQixXQUFXLENBQUUsQ0FDakIsQ0FDQSxnREFBVSxDQUNOLFVBQVUsQ0FBRSxNQUFNLENBQ2xCLE9BQU8sQ0FBRSxPQUFPLENBQUMsQ0FDckIsQ0FFQSw4REFBd0IsQ0FDcEIsV0FBVyxDQUFFLE1BQU0sQ0FDbkIsU0FBUyxDQUFFLEtBQUssQ0FDaEIsYUFBYSxDQUFFLFFBQVEsQ0FDdkIsUUFBUSxDQUFFLE1BQ2QifQ==*/"],sourceRoot:""}]),g.A=t},85083:function(I,g,A){A.r(g),A.d(g,{default:function(){return OI}});var C=A(43467),l=(A(2531),A(23505)),e=A(41949),t=A(8633),c=A(78836),i=A(95669),s=A(61751),n=A(8936),b=A(54603),d=A(3831);function u(I,g){const A=(0,b.T5)([]),C=async g=>{g={...{vocabularyUrl:I.vocabularyUrl,attributes:I.attributes,pageSize:I.pageSize,browseableTypes:I.browseableTypes,searchIndex:I.searchIndex},...g},I.selectableTypes.length&&(g.selectableTypes=I.selectableTypes);try{return await(0,d.Em)(g)}catch{return{error:"Could load data from backend."}}};return A.get=async l=>{let{path:e="",searchTerm:t="",updateCache:c=!1,loadMorePath:i="",page:s=1,mode:n=null}=l;if(null==n&&(n=I.mode),"search"===n)await(async(g,l)=>{let e={searchPath:I.rootPath,page:l};g&&(e.searchTerm="*"+g+"*");let t=await C(e);t.searchTerm=g;const c=l*I.pageSize<t.total;A.update((I=>0==I.length||I[0].searchTerm!=g?(t.load_more=c,t.selectable=!1,t.page=l,[t]):(I[0].load_more=c,I[0].page=l,I[0].results=[...I[0].results,...t.results],I)))})(t,s);else if(i){s>(0,b.Jt)(g)[i].page&&await(async(g,l,e)=>{let t={path:g,page:l};e&&(t.searchTerm="*"+e+"*");let c=await C(t);A.update((A=>(A.forEach((A=>{if(A.path!=g)return A;A.page=l,A.load_more=l*I.pageSize<c.total,A.results=[...A.results,...c.results]})),A)))})(i,s,t)}else e&&await(async(l,e,t)=>{let c=I.rootPath,i=c.replace(/^\/+/,"").split("/"),s=l,n=c;if(!s.startsWith(c))if(1===i.length)s=c+s;else{let I=s.replace(/^\/+/,"").split("/"),g=i.length;for(let A=0;A<i.length;A++)if(i[A]===I[0]){g=A;break}n="/"+i.filter((g=>I.includes(g))).join("/"),s="/"+i.slice(1,g).concat(I).join("/")}let d=[],u=s.split("/")||[];const a=Math.min(u.length,I.maxDepth||999);let o=u.slice(u.length-a,u.length);const G=u.slice(0,u.length-a).join("/");for(;o.length>0;){let I=o.join("/").replace(/^\//,"");if(I=G+(""!=o.pop()?`/${I}`:""),I&&-1===d.indexOf(I)&&d.push(I),I==c)break}const r=(0,b.Jt)(g);let Z=[],m=0;for(var X of d){m++;const A=1==m;let l={};if(!(X in r)||A&&e||A&&t){let t={path:X};if(A&&e&&(t.searchTerm="*"+e+"*"),l=await C(t),l.load_more=I.pageSize<l.total,l.page=1,l.path=X,l.searchTerm=e,l.displayPath=X.replace(new RegExp(`^(${n}|${c})`),"")||"/",""===e){const g=await C({levelInfoPath:X});g.total&&(l.UID=g.results[0].UID,l.Title=g.results[0].Title,l.portal_type=g.results[0].portal_type,l.getIcon=g.results[0].getIcon,l.selectable=!I.selectableTypes.length||-1!=I.selectableTypes.indexOf(g.results[0].portal_type))}X in r&&(l.showFilter=r[X].showFilter||l.showFilter),g.update((I=>(I[X]=l,I)))}else l=r[X];Z=[l,...Z]}A.set(Z)})(e,t,c)},A}function a(I,g,A){const C=I.slice();return C[5]=g[A],C}function o(I){let g,A,l,e,t,c,i,n,b,u,o=(0,s.Ay)("Favorites")+"",r=(0,C.rv_)(I[0].favorites),Z=[];for(let g=0;g<r.length;g+=1)Z[g]=G(a(I,r,g));return{c(){g=(0,C.ND4)("div"),A=(0,C.ND4)("button"),l=(0,C.QQy)("svg"),t=(0,C.xem)(),c=(0,C.Qq7)(o),i=(0,C.xem)(),n=(0,C.ND4)("ul");for(let I=0;I<Z.length;I+=1)Z[I].c();(0,C.CFu)(A,"type","button"),(0,C.CFu)(A,"class","favorites dropdown-toggle btn btn-outline-light btn-sm"),(0,C.CFu)(A,"data-bs-toggle","dropdown"),(0,C.CFu)(A,"aria-haspopup","true"),(0,C.CFu)(A,"aria-expanded","false"),(0,C.CFu)(n,"class","dropdown-menu"),(0,C.CFu)(g,"class","favorites dropdown dropdown-menu-end ms-2")},m(I,s){(0,C.Yry)(I,g,s),(0,C.BCw)(g,A),(0,C.BCw)(A,l),(0,C.BCw)(A,t),(0,C.BCw)(A,c),(0,C.BCw)(g,i),(0,C.BCw)(g,n);for(let I=0;I<Z.length;I+=1)Z[I]&&Z[I].m(n,null);b||(u=(0,C.hGc)(e=d.qz.call(null,l,{iconName:"star-fill"})),b=!0)},p(I,g){if(5&g){let A;for(r=(0,C.rv_)(I[0].favorites),A=0;A<r.length;A+=1){const C=a(I,r,A);Z[A]?Z[A].p(C,g):(Z[A]=G(C),Z[A].c(),Z[A].m(n,null))}for(;A<Z.length;A+=1)Z[A].d(1);Z.length=r.length}},d(I){I&&(0,C.YoD)(g),(0,C.ppq)(Z,I),b=!1,u()}}}function G(I){let g,A,l,e,t,c,i,s=I[5].title+"";function n(){return I[3](I[5])}return{c(){g=(0,C.ND4)("li"),A=(0,C.ND4)("a"),l=(0,C.Qq7)(s),t=(0,C.xem)(),(0,C.CFu)(A,"class","dropdown-item"),(0,C.CFu)(A,"href",e=I[5].path)},m(I,e){(0,C.Yry)(I,g,e),(0,C.BCw)(g,A),(0,C.BCw)(A,l),(0,C.BCw)(g,t),c||(i=(0,C.KTR)(A,"click",(0,C.xZN)(n)),c=!0)},p(g,t){I=g,1&t&&s!==(s=I[5].title+"")&&(0,C.iQh)(l,s),1&t&&e!==(e=I[5].path)&&(0,C.CFu)(A,"href",e)},d(I){I&&(0,C.YoD)(g),c=!1,i()}}}function r(I){let g,A=I[0]?.favorites&&o(I);return{c(){A&&A.c(),g=(0,C.Iex)()},m(I,l){A&&A.m(I,l),(0,C.Yry)(I,g,l)},p(I,[C]){I[0]?.favorites?A?A.p(I,C):(A=o(I),A.c(),A.m(g.parentNode,g)):A&&(A.d(1),A=null)},i:C.lQ1,o:C.lQ1,d(I){I&&(0,C.YoD)(g),A&&A.d(I)}}}function Z(I,g,A){let l;const t=(0,e.SD)("config");(0,C.j0C)(I,t,(I=>A(0,l=I)));const c=(0,e.ur)();function i(I){c("selectItem",{item:I})}return[l,t,i,I=>i(I)]}class m extends C.r7T{constructor(I){super(),(0,C.TsN)(this,I,Z,r,C.jXN,{})}}var X=m;function B(I,g,A){const C=I.slice();return C[6]=g[A],C}function x(I){let g,A,l,e,t,c,i,n,b,u,a=(0,s.Ay)("Recently Used")+"",o=(0,C.rv_)(I[2].reverse()),G=[];for(let g=0;g<o.length;g+=1)G[g]=p(B(I,o,g));return{c(){g=(0,C.ND4)("div"),A=(0,C.ND4)("button"),l=(0,C.QQy)("svg"),t=(0,C.xem)(),c=(0,C.Qq7)(a),i=(0,C.xem)(),n=(0,C.ND4)("ul");for(let I=0;I<G.length;I+=1)G[I].c();(0,C.CFu)(A,"type","button"),(0,C.CFu)(A,"class","recentlyUsed dropdown-toggle btn btn-outline-light btn-sm"),(0,C.CFu)(A,"data-bs-toggle","dropdown"),(0,C.CFu)(A,"aria-haspopup","true"),(0,C.CFu)(A,"aria-expanded","false"),(0,C.CFu)(n,"class","dropdown-menu dropdown-menu-end"),(0,C.CFu)(g,"class","recentlyUsed dropdown ms-2")},m(I,s){(0,C.Yry)(I,g,s),(0,C.BCw)(g,A),(0,C.BCw)(A,l),(0,C.BCw)(A,t),(0,C.BCw)(A,c),(0,C.BCw)(g,i),(0,C.BCw)(g,n);for(let I=0;I<G.length;I+=1)G[I]&&G[I].m(n,null);b||(u=(0,C.hGc)(e=d.qz.call(null,l,{iconName:"grid-fill"})),b=!0)},p(I,g){if(12&g){let A;for(o=(0,C.rv_)(I[2].reverse()),A=0;A<o.length;A+=1){const C=B(I,o,A);G[A]?G[A].p(C,g):(G[A]=p(C),G[A].c(),G[A].m(n,null))}for(;A<G.length;A+=1)G[A].d(1);G.length=o.length}},d(I){I&&(0,C.YoD)(g),(0,C.ppq)(G,I),b=!1,u()}}}function p(I){let g,A,l,e,t,c,i,s,n,b,u=I[6].Title+"";function a(){return I[4](I[6])}return{c(){g=(0,C.ND4)("li"),A=(0,C.ND4)("a"),l=(0,C.QQy)("svg"),t=(0,C.xem)(),c=(0,C.Qq7)(u),s=(0,C.xem)(),(0,C.CFu)(A,"href",i=I[6].getURL||"#"),(0,C.CFu)(A,"class","dropdown-item")},m(i,u){(0,C.Yry)(i,g,u),(0,C.BCw)(g,A),(0,C.BCw)(A,l),(0,C.BCw)(A,t),(0,C.BCw)(A,c),(0,C.BCw)(g,s),n||(b=[(0,C.hGc)(e=d.qz.call(null,l,{iconName:`contenttype/${I[6]?.portal_type.toLowerCase().replace(/\.| /g,"-")}`})),(0,C.KTR)(A,"click",(0,C.xZN)(a))],n=!0)},p(g,A){I=g},d(I){I&&(0,C.YoD)(g),n=!1,(0,C.oOW)(b)}}}function V(I){let g,A=I[0].recentlyUsed&&I[2].length&&x(I);return{c(){A&&A.c(),g=(0,C.Iex)()},m(I,l){A&&A.m(I,l),(0,C.Yry)(I,g,l)},p(I,[C]){I[0].recentlyUsed&&I[2].length?A?A.p(I,C):(A=x(I),A.c(),A.m(g.parentNode,g)):A&&(A.d(1),A=null)},i:C.lQ1,o:C.lQ1,d(I){I&&(0,C.YoD)(g),A&&A.d(I)}}}function W(I,g,A){let l;const t=(0,e.SD)("config");(0,C.j0C)(I,t,(I=>A(0,l=I)));const c=(0,d.gf)(!0,l),i=(0,e.ur)();function s(I){i("selectItem",{item:I})}return[l,t,c,s,I=>s(I)]}class v extends C.r7T{constructor(I){super(),(0,C.TsN)(this,I,W,V,C.jXN,{})}}var w=v,F=A(85072),Q=A.n(F),y=A(97825),N=A.n(y),h=A(57722),Y=A.n(h),R=A(55056),U=A.n(R),D=A(10540),J=A.n(D),S=A(41113),H=A.n(S),L=A(24433),k={};k.styleTagTransform=H(),k.setAttributes=U(),k.insert=Y(),k.domAPI=N(),k.insertStyleElement=J();Q()(L.A,k),L.A&&L.A.locals&&L.A.locals;function f(I,g,A){const C=I.slice();return C[57]=g[A],C[58]=g,C[59]=A,C}function z(I,g,A){const C=I.slice();return C[60]=g[A],C[62]=A,C}function j(I){let g,A,l,e,t,c,s,n,b,u,a,o,G,r,Z,m,B,x,p,V,W,v,F=I[6]&&T(I);n=new w({}),n.$on("selectItem",I[24]),u=new X({}),u.$on("selectItem",I[25]);let Q=I[8].uploadEnabled&&"browse"==I[8].mode&&E(I),y={ctx:I,current:null,token:null,hasCatch:!0,pending:xI,then:K,catch:P,value:56,error:63};return(0,C.vBd)(B=I[1],y),{c(){g=(0,C.ND4)("div"),A=(0,C.ND4)("nav"),l=(0,C.ND4)("div"),e=(0,C.ND4)("div"),t=(0,C.ND4)("input"),c=(0,C.xem)(),F&&F.c(),s=(0,C.xem)(),(0,C.N0i)(n.$$.fragment),b=(0,C.xem)(),(0,C.N0i)(u.$$.fragment),a=(0,C.xem)(),Q&&Q.c(),o=(0,C.xem)(),G=(0,C.ND4)("button"),r=(0,C.QQy)("svg"),m=(0,C.xem)(),y.block.c(),(0,C.CFu)(t,"type","text"),(0,C.CFu)(t,"name","filter"),(0,C.CFu)(t,"class","form-control form-control-sm"),t.value=I[6],(0,C.CFu)(e,"class","input-group w-auto"),(0,C.CFu)(G,"class","btn btn-link text-white ms-auto"),(0,C.CFu)(G,"tabindex","0"),(0,C.CFu)(l,"class","toolBar navbar svelte-8w273"),(0,C.CFu)(A,"class","content-browser svelte-8w273"),(0,C.CFu)(g,"class","content-browser-position-wrapper svelte-8w273")},m(i,X){(0,C.Yry)(i,g,X),(0,C.BCw)(g,A),(0,C.BCw)(A,l),(0,C.BCw)(l,e),(0,C.BCw)(e,t),(0,C.BCw)(e,c),F&&F.m(e,null),(0,C.BCw)(l,s),(0,C.wSR)(n,l,null),(0,C.BCw)(l,b),(0,C.wSR)(u,l,null),(0,C.BCw)(l,a),Q&&Q.m(l,null),(0,C.BCw)(l,o),(0,C.BCw)(l,G),(0,C.BCw)(G,r),(0,C.BCw)(A,m),y.block.m(A,y.anchor=null),y.mount=()=>A,y.anchor=null,V=!0,W||(v=[(0,C.KTR)(t,"input",I[30]),(0,C.hGc)(Z=d.qz.call(null,r,{iconName:"x-circle"})),(0,C.KTR)(G,"click",(0,C.xZN)(I[36])),(0,C.KTR)(A,"introend",I[47]),(0,C.hGc)(x=d.EO.call(null,A)),(0,C.KTR)(A,"click_outside",I[26])],W=!0)},p(g,A){I=g,(!V||64&A[0]&&t.value!==I[6])&&(t.value=I[6]),I[6]?F?F.p(I,A):(F=T(I),F.c(),F.m(e,null)):F&&(F.d(1),F=null),I[8].uploadEnabled&&"browse"==I[8].mode?Q?Q.p(I,A):(Q=E(I),Q.c(),Q.m(l,o)):Q&&(Q.d(1),Q=null),y.ctx=I,2&A[0]&&B!==(B=I[1])&&(0,C.vBd)(B,y)||(0,C._6B)(y,I,A)},i(g){V||((0,C.c7F)(n.$$.fragment,g),(0,C.c7F)(u.$$.fragment,g),g&&(0,C.Dti)((()=>{V&&(p||(p=(0,C.h86)(A,i._J,{x:I[16]/100*94,opacity:1},!0)),p.run(1))})),V=!0)},o(g){(0,C.Tn8)(n.$$.fragment,g),(0,C.Tn8)(u.$$.fragment,g),g&&(p||(p=(0,C.h86)(A,i._J,{x:I[16]/100*94,opacity:1},!1)),p.run(0)),V=!1},d(I){I&&(0,C.YoD)(g),F&&F.d(),(0,C.Hbl)(n),(0,C.Hbl)(u),Q&&Q.d(),y.block.d(),y.token=null,y=null,I&&p&&p.end(),W=!1,(0,C.oOW)(v)}}}function T(I){let g,A,l,e,t;return{c(){g=(0,C.ND4)("button"),A=(0,C.QQy)("svg"),(0,C.CFu)(g,"class","btn btn-light btn-sm"),(0,C.CFu)(g,"type","button")},m(c,i){(0,C.Yry)(c,g,i),(0,C.BCw)(g,A),e||(t=[(0,C.hGc)(l=d.qz.call(null,A,{iconName:"x"})),(0,C.KTR)(g,"click",(0,C.xZN)(I[35]))],e=!0)},p:C.lQ1,d(I){I&&(0,C.YoD)(g),e=!1,(0,C.oOW)(t)}}}function E(I){let g,A,l,e,t,c,i,n,b=(0,s.Ay)("upload to ${current_path}",{current_path:I[2]})+"";return{c(){g=(0,C.ND4)("div"),A=(0,C.ND4)("button"),l=(0,C.QQy)("svg"),t=(0,C.xem)(),c=(0,C.Qq7)(b),(0,C.CFu)(A,"type","button"),(0,C.CFu)(A,"class","upload btn btn-outline-light btn-sm"),(0,C.CFu)(A,"tabindex","0"),(0,C.CFu)(g,"class","ms-2")},m(s,b){(0,C.Yry)(s,g,b),(0,C.BCw)(g,A),(0,C.BCw)(A,l),(0,C.BCw)(A,t),(0,C.BCw)(A,c),i||(n=[(0,C.hGc)(e=d.qz.call(null,l,{iconName:"upload"})),(0,C.KTR)(A,"keydown",I[17]),(0,C.KTR)(A,"click",I[17])],i=!0)},p(I,g){4&g[0]&&b!==(b=(0,s.Ay)("upload to ${current_path}",{current_path:I[2]})+"")&&(0,C.iQh)(c,b)},d(I){I&&(0,C.YoD)(g),i=!1,(0,C.oOW)(n)}}}function P(I){let g,A,l=I[63].message+"";return{c(){g=(0,C.ND4)("p"),A=(0,C.Qq7)(l),(0,C.hgi)(g,"color","red")},m(I,l){(0,C.Yry)(I,g,l),(0,C.BCw)(g,A)},p(I,g){2&g[0]&&l!==(l=I[63].message+"")&&(0,C.iQh)(A,l)},d(I){I&&(0,C.YoD)(g)}}}function K(I){let g,A,l,e,t=[],c=new Map,i=(0,C.rv_)(I[56]);const s=I=>I[57].path;for(let g=0;g<i.length;g+=1){let A=f(I,i,g),C=s(A);c.set(C,t[g]=bI(C,A))}let n=I[5]?.UID&&1==I[0].length&&dI(I),b=I[0].length>1&&XI(I),d=I[4]&&BI(I);return{c(){g=(0,C.ND4)("div");for(let I=0;I<t.length;I+=1)t[I].c();A=(0,C.xem)(),n&&n.c(),l=(0,C.xem)(),b&&b.c(),e=(0,C.xem)(),d&&d.c(),(0,C.CFu)(g,"class","levelColumns svelte-8w273")},m(I,c){(0,C.Yry)(I,g,c);for(let I=0;I<t.length;I+=1)t[I]&&t[I].m(g,null);(0,C.BCw)(g,A),n&&n.m(g,null),(0,C.BCw)(g,l),b&&b.m(g,null),(0,C.BCw)(g,e),d&&d.m(g,null)},p(I,u){678167011&u[0]|6&u[1]&&(i=(0,C.rv_)(I[56]),t=(0,C.l7s)(t,u,s,1,I,i,c,g,C.n_k,bI,A,f)),I[5]?.UID&&1==I[0].length?n?(n.p(I,u),33&u[0]&&(0,C.c7F)(n,1)):(n=dI(I),n.c(),(0,C.c7F)(n,1),n.m(g,l)):n&&(n.d(1),n=null),I[0].length>1?b?(b.p(I,u),1&u[0]&&(0,C.c7F)(b,1)):(b=XI(I),b.c(),(0,C.c7F)(b,1),b.m(g,e)):b&&(b.d(1),b=null),I[4]?d||(d=BI(I),d.c(),d.m(g,null)):d&&(d.d(1),d=null)},d(I){I&&(0,C.YoD)(g);for(let I=0;I<t.length;I+=1)t[I].d();n&&n.d(),b&&b.d(),d&&d.d()}}}function O(I){let g,A,l,e,t,c,s,n,b,d=0==I[59]&&"browse"==I[8].mode&&M(I),u=I[59]==I[56].length-1&&q(I),a=(0,C.rv_)(I[57].results||[]),o=[];for(let g=0;g<a.length;g+=1)o[g]=iI(z(I,a,g));let G=I[57].load_more&&sI(I),r=0==I[57].total&&nI(I);return{c(){g=(0,C.ND4)("div"),A=(0,C.ND4)("div"),d&&d.c(),l=(0,C.xem)(),u&&u.c(),e=(0,C.xem)(),t=(0,C.ND4)("div");for(let I=0;I<o.length;I+=1)o[I].c();c=(0,C.xem)(),G&&G.c(),s=(0,C.xem)(),r&&r.c(),(0,C.CFu)(A,"class","levelToolbar svelte-8w273"),(0,C.CFu)(t,"class","levelItems svelte-8w273"),(0,C.CFu)(g,"class",n="levelColumn"+(I[59]%2==0?" odd":" even")+" "+(I[59]===I[56].length-1?"active":"")+" svelte-8w273")},m(I,i){(0,C.Yry)(I,g,i),(0,C.BCw)(g,A),d&&d.m(A,null),(0,C.BCw)(A,l),u&&u.m(A,null),(0,C.BCw)(g,e),(0,C.BCw)(g,t);for(let I=0;I<o.length;I+=1)o[I]&&o[I].m(t,null);(0,C.BCw)(t,c),G&&G.m(t,null),(0,C.BCw)(t,s),r&&r.m(t,null)},p(I,e){if(0==I[59]&&"browse"==I[8].mode?d?d.p(I,e):(d=M(I),d.c(),d.m(A,l)):d&&(d.d(1),d=null),I[59]==I[56].length-1?u?u.p(I,e):(u=q(I),u.c(),u.m(A,null)):u&&(u.d(1),u=null),673710467&e[0]){let g;for(a=(0,C.rv_)(I[57].results||[]),g=0;g<a.length;g+=1){const A=z(I,a,g);o[g]?o[g].p(A,e):(o[g]=iI(A),o[g].c(),o[g].m(t,c))}for(;g<o.length;g+=1)o[g].d(1);o.length=a.length}I[57].load_more?G?G.p(I,e):(G=sI(I),G.c(),G.m(t,s)):G&&(G.d(1),G=null),0==I[57].total?r||(r=nI(I),r.c(),r.m(t,null)):r&&(r.d(1),r=null),2&e[0]&&n!==(n="levelColumn"+(I[59]%2==0?" odd":" even")+" "+(I[59]===I[56].length-1?"active":"")+" svelte-8w273")&&(0,C.CFu)(g,"class",n)},i(I){I&&(b||(0,C.Dti)((()=>{b=(0,C.b7f)(g,i._J,{duration:500}),b.start()})))},o:C.lQ1,d(I){I&&(0,C.YoD)(g),d&&d.d(),u&&u.d(),(0,C.ppq)(o,I),G&&G.d(),r&&r.d()}}}function M(I){let g,A,l,e,t;return{c(){g=(0,C.ND4)("button"),A=(0,C.QQy)("svg"),(0,C.CFu)(g,"type","button"),(0,C.CFu)(g,"class","btn btn-link btn-xs ps-0 svelte-8w273"),(0,C.CFu)(g,"tabindex","0")},m(c,i){(0,C.Yry)(c,g,i),(0,C.BCw)(g,A),e||(t=[(0,C.hGc)(l=d.qz.call(null,A,{iconName:"house"})),(0,C.KTR)(g,"keydown",I[37]),(0,C.KTR)(g,"click",I[38])],e=!0)},p:C.lQ1,d(I){I&&(0,C.YoD)(g),e=!1,(0,C.oOW)(t)}}}function q(I){let g,A,l,e=I[57].selectable&&!I[57].showFilter&&!I[5].UID&&$(I),t="search"!==I[8].mode&&_(I);function c(I,g){return I[7]?AI:CI}let i=c(I),s=i(I);return{c(){e&&e.c(),g=(0,C.xem)(),A=(0,C.ND4)("div"),t&&t.c(),l=(0,C.xem)(),s.c(),(0,C.CFu)(A,"class","levelActions svelte-8w273")},m(I,c){e&&e.m(I,c),(0,C.Yry)(I,g,c),(0,C.Yry)(I,A,c),t&&t.m(A,null),(0,C.BCw)(A,l),s.m(A,null)},p(I,C){!I[57].selectable||I[57].showFilter||I[5].UID?e&&(e.d(1),e=null):e?e.p(I,C):(e=$(I),e.c(),e.m(g.parentNode,g)),"search"!==I[8].mode?t?t.p(I,C):(t=_(I),t.c(),t.m(A,l)):t&&(t.d(1),t=null),i===(i=c(I))&&s?s.p(I,C):(s.d(1),s=i(I),s&&(s.c(),s.m(A,null)))},d(I){I&&((0,C.YoD)(g),(0,C.YoD)(A)),e&&e.d(I),t&&t.d(),s.d()}}}function $(I){let g,A,l,e,t,c,i,n,b,u,a=(I[57].Title||VI(I[57]))+"";function o(){return I[39](I[57])}return{c(){g=(0,C.ND4)("button"),A=(0,C.QQy)("svg"),e=(0,C.xem)(),t=(0,C.ND4)("span"),c=(0,C.Qq7)(a),(0,C.CFu)(t,"class","select-button-ellipsis svelte-8w273"),(0,C.CFu)(g,"class","btn btn-xs btn-outline-primary d-flex align-items-center svelte-8w273"),(0,C.CFu)(g,"title",i=(0,s.Ay)("select ${level_path}",{level_path:I[57].Title||VI(I[57])})),g.disabled=n=!I[27](I[57])},m(I,i){(0,C.Yry)(I,g,i),(0,C.BCw)(g,A),(0,C.BCw)(g,e),(0,C.BCw)(g,t),(0,C.BCw)(t,c),b||(u=[(0,C.hGc)(l=d.qz.call(null,A,{iconName:"plus"})),(0,C.KTR)(g,"click",(0,C.xZN)(o))],b=!0)},p(A,l){I=A,2&l[0]&&a!==(a=(I[57].Title||VI(I[57]))+"")&&(0,C.iQh)(c,a),2&l[0]&&i!==(i=(0,s.Ay)("select ${level_path}",{level_path:I[57].Title||VI(I[57])}))&&(0,C.CFu)(g,"title",i),2&l[0]&&n!==(n=!I[27](I[57]))&&(g.disabled=n)},d(I){I&&(0,C.YoD)(g),b=!1,(0,C.oOW)(u)}}}function _(I){let g;function A(I,g){return I[57].searchTerm||I[57].showFilter?gI:II}let l=A(I),e=l(I);return{c(){e.c(),g=(0,C.Iex)()},m(I,A){e.m(I,A),(0,C.Yry)(I,g,A)},p(I,C){l===(l=A(I))&&e?e.p(I,C):(e.d(1),e=l(I),e&&(e.c(),e.m(g.parentNode,g)))},d(I){I&&(0,C.YoD)(g),e.d(I)}}}function II(I){let g,A,l,e,t,c;function i(){return I[41](I[57],I[58],I[59])}return{c(){g=(0,C.ND4)("button"),A=(0,C.QQy)("svg"),(0,C.CFu)(g,"class","btn btn-link btn-xs level-filter svelte-8w273"),(0,C.CFu)(g,"title",e=(0,s.Ay)("level filter"))},m(I,e){(0,C.Yry)(I,g,e),(0,C.BCw)(g,A),t||(c=[(0,C.hGc)(l=d.qz.call(null,A,{iconName:"filter"})),(0,C.KTR)(g,"click",(0,C.xZN)(i))],t=!0)},p(g,A){I=g},d(I){I&&(0,C.YoD)(g),t=!1,(0,C.oOW)(c)}}}function gI(I){let g,A,l,e,t,c,i,n,b;function u(){return I[40](I[57],I[58],I[59])}return{c(){g=(0,C.ND4)("input"),l=(0,C.xem)(),e=(0,C.ND4)("button"),t=(0,C.QQy)("svg"),(0,C.CFu)(g,"type","text"),(0,C.CFu)(g,"name","levelFilter"),(0,C.CFu)(g,"class","form-control form-control-sm"),g.value=A=I[57].searchTerm||"",(0,C.CFu)(e,"class","btn btn-link btn-xs level-filter svelte-8w273"),(0,C.CFu)(e,"title",i=(0,s.Ay)("clear filter"))},m(A,i){(0,C.Yry)(A,g,i),(0,C.Yry)(A,l,i),(0,C.Yry)(A,e,i),(0,C.BCw)(e,t),n||(b=[(0,C.KTR)(g,"input",I[32]),(0,C.hGc)(c=d.qz.call(null,t,{iconName:"x"})),(0,C.KTR)(e,"click",(0,C.xZN)(u))],n=!0)},p(C,l){I=C,2&l[0]&&A!==(A=I[57].searchTerm||"")&&g.value!==A&&(g.value=A)},d(I){I&&((0,C.YoD)(g),(0,C.YoD)(l),(0,C.YoD)(e)),n=!1,(0,C.oOW)(b)}}}function AI(I){let g,A,l,e,t,c;return{c(){g=(0,C.ND4)("button"),A=(0,C.QQy)("svg"),(0,C.CFu)(g,"class","btn btn-link btn-xs grid-view svelte-8w273"),(0,C.CFu)(g,"title",e=(0,s.Ay)("list view"))},m(e,i){(0,C.Yry)(e,g,i),(0,C.BCw)(g,A),t||(c=[(0,C.hGc)(l=d.qz.call(null,A,{iconName:"list"})),(0,C.KTR)(g,"click",I[43])],t=!0)},p:C.lQ1,d(I){I&&(0,C.YoD)(g),t=!1,(0,C.oOW)(c)}}}function CI(I){let g,A,l,e,t,c;return{c(){g=(0,C.ND4)("button"),A=(0,C.QQy)("svg"),(0,C.CFu)(g,"class","btn btn-link btn-xs grid-view svelte-8w273"),(0,C.CFu)(g,"title",e=(0,s.Ay)("grid view"))},m(e,i){(0,C.Yry)(e,g,i),(0,C.BCw)(g,A),t||(c=[(0,C.hGc)(l=d.qz.call(null,A,{iconName:"grid"})),(0,C.KTR)(g,"click",I[42])],t=!0)},p:C.lQ1,d(I){I&&(0,C.YoD)(g),t=!1,(0,C.oOW)(c)}}}function lI(I){let g,A,l,e,t;return{c(){g=(0,C.ND4)("span"),A=(0,C.QQy)("svg"),(0,C.CFu)(g,"class","plone-icon svelte-8w273")},m(c,i){(0,C.Yry)(c,g,i),(0,C.BCw)(g,A),e||(t=(0,C.hGc)(l=d.qz.call(null,A,{iconName:`contenttype/${I[60].portal_type.toLowerCase().replace(/\.| /g,"-")}`})),e=!0)},p(g,A){I=g,l&&(0,C.Qk1)(l.update)&&2&A[0]&&l.update.call(null,{iconName:`contenttype/${I[60].portal_type.toLowerCase().replace(/\.| /g,"-")}`})},d(I){I&&(0,C.YoD)(g),e=!1,t()}}}function eI(I){let g,A,l;return{c(){g=(0,C.ND4)("img"),(0,C.mq_)(g.src,A=`${I[60].getURL}/@@images/image/thumb`)||(0,C.CFu)(g,"src",A),(0,C.CFu)(g,"alt",l=I[60].Title||VI(I[60])),(0,C.CFu)(g,"class","svelte-8w273")},m(I,A){(0,C.Yry)(I,g,A)},p(I,e){2&e[0]&&!(0,C.mq_)(g.src,A=`${I[60].getURL}/@@images/image/thumb`)&&(0,C.CFu)(g,"src",A),2&e[0]&&l!==(l=I[60].Title||VI(I[60]))&&(0,C.CFu)(g,"alt",l)},d(I){I&&(0,C.YoD)(g)}}}function tI(I){let g,A,l,e=I[60].path+"";return{c(){g=(0,C.ND4)("br"),A=(0,C.ND4)("span"),l=(0,C.Qq7)(e),(0,C.CFu)(A,"class","small")},m(I,e){(0,C.Yry)(I,g,e),(0,C.Yry)(I,A,e),(0,C.BCw)(A,l)},p(I,g){2&g[0]&&e!==(e=I[60].path+"")&&(0,C.iQh)(l,e)},d(I){I&&((0,C.YoD)(g),(0,C.YoD)(A))}}}function cI(I){let g,A,l,e,t;return{c(){g=(0,C.ND4)("div"),A=(0,C.QQy)("svg"),(0,C.CFu)(g,"class","browseSub svelte-8w273")},m(I,c){(0,C.Yry)(I,g,c),(0,C.BCw)(g,A),e||(t=(0,C.hGc)(l=d.qz.call(null,A,{iconName:"arrow-right-circle"})),e=!0)},d(I){I&&(0,C.YoD)(g),e=!1,t()}}}function iI(I){let g,A,l,e,t,c,i,s,n,b,d,u,a,o,G,r=(I[60].Title||VI(I[60]))+"";function Z(I,g){return I[7]&&I[60].getIcon?eI:lI}let m=Z(I),X=m(I),B="search"==I[8].mode&&tI(I),x=I[60].is_folderish&&"browse"==I[8].mode&&cI();function p(...g){return I[44](I[60],...g)}function V(...g){return I[45](I[60],...g)}return{c(){g=(0,C.ND4)("div"),A=(0,C.ND4)("div"),X.c(),l=(0,C.xem)(),e=(0,C.ND4)("span"),t=(0,C.Qq7)(r),i=(0,C.xem)(),B&&B.c(),b=(0,C.xem)(),x&&x.c(),(0,C.CFu)(e,"class",c=(0,C.oEI)(I[60].Title?"":"id-only")+" svelte-8w273"),(0,C.CFu)(A,"class",s=(0,C.oEI)(I[7]?"grid-preview":"item-title")+" svelte-8w273"),(0,C.CFu)(A,"title",n=I[60].path+": "+(I[60].Title||VI(I[60]))),(0,C.CFu)(g,"class",d="contentItem"+(I[62]%2==0?" odd":" even")+(I[29](I[60])?" inPath":"")+(-1!=I[0].indexOf(I[60].UID)?" selectedItem":"")+(I[27](I[60])?"":" text-body-tertiary")+" svelte-8w273"),(0,C.CFu)(g,"role","button"),(0,C.CFu)(g,"tabindex",u=I[62]),(0,C.CFu)(g,"data-uuid",a=I[60].UID)},m(I,c){(0,C.Yry)(I,g,c),(0,C.BCw)(g,A),X.m(A,null),(0,C.BCw)(A,l),(0,C.BCw)(A,e),(0,C.BCw)(e,t),(0,C.BCw)(A,i),B&&B.m(A,null),(0,C.BCw)(g,b),x&&x.m(g,null),o||(G=[(0,C.KTR)(g,"keydown",(0,C.xZN)(p)),(0,C.KTR)(g,"click",V)],o=!0)},p(i,b){m===(m=Z(I=i))&&X?X.p(I,b):(X.d(1),X=m(I),X&&(X.c(),X.m(A,l))),2&b[0]&&r!==(r=(I[60].Title||VI(I[60]))+"")&&(0,C.iQh)(t,r),2&b[0]&&c!==(c=(0,C.oEI)(I[60].Title?"":"id-only")+" svelte-8w273")&&(0,C.CFu)(e,"class",c),"search"==I[8].mode?B?B.p(I,b):(B=tI(I),B.c(),B.m(A,null)):B&&(B.d(1),B=null),128&b[0]&&s!==(s=(0,C.oEI)(I[7]?"grid-preview":"item-title")+" svelte-8w273")&&(0,C.CFu)(A,"class",s),2&b[0]&&n!==(n=I[60].path+": "+(I[60].Title||VI(I[60])))&&(0,C.CFu)(A,"title",n),I[60].is_folderish&&"browse"==I[8].mode?x||(x=cI(),x.c(),x.m(g,null)):x&&(x.d(1),x=null),3&b[0]&&d!==(d="contentItem"+(I[62]%2==0?" odd":" even")+(I[29](I[60])?" inPath":"")+(-1!=I[0].indexOf(I[60].UID)?" selectedItem":"")+(I[27](I[60])?"":" text-body-tertiary")+" svelte-8w273")&&(0,C.CFu)(g,"class",d),2&b[0]&&a!==(a=I[60].UID)&&(0,C.CFu)(g,"data-uuid",a)},d(I){I&&(0,C.YoD)(g),X.d(),B&&B.d(),x&&x.d(),o=!1,(0,C.oOW)(G)}}}function sI(I){let g,A,l,e,t,c,i,s;return{c(){g=(0,C.ND4)("div"),A=(0,C.ND4)("div"),(0,C.CFu)(A,"class","spinner-border"),(0,C.CFu)(A,"role","status"),(0,C.CFu)(g,"class","loadmore svelte-8w273"),(0,C.CFu)(g,"data-level-path",l=I[57].path),(0,C.CFu)(g,"data-search-term",e=I[6]||I[57].searchTerm),(0,C.CFu)(g,"data-level-next-page",t=+I[57].page+1)},m(l,e){(0,C.Yry)(l,g,e),(0,C.BCw)(g,A),i||(s=(0,C.hGc)(c=I[34].call(null,g)),i=!0)},p(I,A){2&A[0]&&l!==(l=I[57].path)&&(0,C.CFu)(g,"data-level-path",l),66&A[0]&&e!==(e=I[6]||I[57].searchTerm)&&(0,C.CFu)(g,"data-search-term",e),2&A[0]&&t!==(t=+I[57].page+1)&&(0,C.CFu)(g,"data-level-next-page",t)},d(I){I&&(0,C.YoD)(g),i=!1,s()}}}function nI(I){let g,A;return{c(){g=(0,C.ND4)("div"),A=(0,C.ND4)("p"),A.textContent=`${(0,s.Ay)("no results found")}`,(0,C.CFu)(A,"class","svelte-8w273"),(0,C.CFu)(g,"class","contentItem svelte-8w273")},m(I,l){(0,C.Yry)(I,g,l),(0,C.BCw)(g,A)},d(I){I&&(0,C.YoD)(g)}}}function bI(I,g){let A,l,e=g[0].length<2||!g[0].includes(g[57].UID),t=e&&O(g);return{key:I,first:null,c(){A=(0,C.Iex)(),t&&t.c(),l=(0,C.Iex)(),this.first=A},m(I,g){(0,C.Yry)(I,A,g),t&&t.m(I,g),(0,C.Yry)(I,l,g)},p(I,A){g=I,3&A[0]&&(e=g[0].length<2||!g[0].includes(g[57].UID)),e?t?(t.p(g,A),3&A[0]&&(0,C.c7F)(t,1)):(t=O(g),t.c(),(0,C.c7F)(t,1),t.m(l.parentNode,l)):t&&(t.d(1),t=null)},d(I){I&&((0,C.YoD)(A),(0,C.YoD)(l)),t&&t.d(I)}}}function dI(I){let g,A,l,e,t,c,n,b,d,u,a,o,G,r,Z,m,X,B=I[27](I[5]),x=VI(I[5])+"",p=I[5].Title+"",V=B&&uI(I);function W(I,g){return I[5].getIcon?oI:aI}let v=W(I),w=v(I),F=I[5].Description&&GI(I),Q=I[5].created&&rI(I),y=I[5].modified&&ZI(I),N=I[5].review_state&&mI(I);return{c(){g=(0,C.ND4)("div"),A=(0,C.ND4)("div"),l=(0,C.ND4)("div"),V&&V.c(),e=(0,C.xem)(),t=(0,C.ND4)("div"),w.c(),c=(0,C.xem)(),n=(0,C.ND4)("dl"),b=(0,C.ND4)("dt"),b.textContent=`${(0,s.Ay)("Id")}`,d=(0,C.ND4)("dd"),u=(0,C.Qq7)(x),a=(0,C.ND4)("dt"),a.textContent=`${(0,s.Ay)("Title")}`,o=(0,C.ND4)("dd"),G=(0,C.Qq7)(p),F&&F.c(),r=(0,C.Iex)(),Q&&Q.c(),Z=(0,C.Iex)(),y&&y.c(),m=(0,C.Iex)(),N&&N.c(),(0,C.CFu)(l,"class","selectLevel me-3"),(0,C.CFu)(A,"class","levelToolbar svelte-8w273"),(0,C.CFu)(t,"class","info svelte-8w273"),(0,C.CFu)(g,"class","preview svelte-8w273")},m(I,i){(0,C.Yry)(I,g,i),(0,C.BCw)(g,A),(0,C.BCw)(A,l),V&&V.m(l,null),(0,C.BCw)(g,e),(0,C.BCw)(g,t),w.m(t,null),(0,C.BCw)(t,c),(0,C.BCw)(t,n),(0,C.BCw)(n,b),(0,C.BCw)(n,d),(0,C.BCw)(d,u),(0,C.BCw)(n,a),(0,C.BCw)(n,o),(0,C.BCw)(o,G),F&&F.m(n,null),(0,C.BCw)(n,r),Q&&Q.m(n,null),(0,C.BCw)(n,Z),y&&y.m(n,null),(0,C.BCw)(n,m),N&&N.m(n,null)},p(I,g){32&g[0]&&(B=I[27](I[5])),B?V?V.p(I,g):(V=uI(I),V.c(),V.m(l,null)):V&&(V.d(1),V=null),v===(v=W(I))&&w?w.p(I,g):(w.d(1),w=v(I),w&&(w.c(),w.m(t,c))),32&g[0]&&x!==(x=VI(I[5])+"")&&(0,C.iQh)(u,x),32&g[0]&&p!==(p=I[5].Title+"")&&(0,C.iQh)(G,p),I[5].Description?F?F.p(I,g):(F=GI(I),F.c(),F.m(n,r)):F&&(F.d(1),F=null),I[5].created?Q?Q.p(I,g):(Q=rI(I),Q.c(),Q.m(n,Z)):Q&&(Q.d(1),Q=null),I[5].modified?y?y.p(I,g):(y=ZI(I),y.c(),y.m(n,m)):y&&(y.d(1),y=null),I[5].review_state?N?N.p(I,g):(N=mI(I),N.c(),N.m(n,null)):N&&(N.d(1),N=null)},i(I){I&&(X||(0,C.Dti)((()=>{X=(0,C.b7f)(g,i._J,{duration:500}),X.start()})))},o:C.lQ1,d(I){I&&(0,C.YoD)(g),V&&V.d(),w.d(),F&&F.d(),Q&&Q.d(),y&&y.d(),N&&N.d()}}}function uI(I){let g,A,l,e,t,c,i,n,b,u=I[5].Title+"";return{c(){g=(0,C.ND4)("button"),A=(0,C.QQy)("svg"),e=(0,C.xem)(),t=(0,C.ND4)("span"),c=(0,C.Qq7)(u),(0,C.CFu)(A,"class","svelte-8w273"),(0,C.CFu)(t,"class","select-button-ellipsis svelte-8w273"),(0,C.CFu)(g,"class","btn btn-xs btn-outline-primary d-flex align-items-center svelte-8w273"),(0,C.CFu)(g,"title",i=(0,s.Ay)("select ${preview_path}",{preview_path:I[5].Title}))},m(i,s){(0,C.Yry)(i,g,s),(0,C.BCw)(g,A),(0,C.BCw)(g,e),(0,C.BCw)(g,t),(0,C.BCw)(t,c),n||(b=[(0,C.hGc)(l=d.qz.call(null,A,{iconName:"plus"})),(0,C.KTR)(g,"click",(0,C.xZN)(I[46]))],n=!0)},p(I,A){32&A[0]&&u!==(u=I[5].Title+"")&&(0,C.iQh)(c,u),32&A[0]&&i!==(i=(0,s.Ay)("select ${preview_path}",{preview_path:I[5].Title}))&&(0,C.CFu)(g,"title",i)},d(I){I&&(0,C.YoD)(g),n=!1,(0,C.oOW)(b)}}}function aI(I){let g,A,l,e,t;return{c(){g=(0,C.ND4)("div"),A=(0,C.QQy)("svg"),(0,C.CFu)(A,"class","svelte-8w273"),(0,C.CFu)(g,"class","previewIcon svelte-8w273")},m(c,i){(0,C.Yry)(c,g,i),(0,C.BCw)(g,A),e||(t=(0,C.hGc)(l=d.qz.call(null,A,{iconName:`contenttype/${I[5].portal_type.toLowerCase().replace(/\.| /g,"-")}`})),e=!0)},p(I,g){l&&(0,C.Qk1)(l.update)&&32&g[0]&&l.update.call(null,{iconName:`contenttype/${I[5].portal_type.toLowerCase().replace(/\.| /g,"-")}`})},d(I){I&&(0,C.YoD)(g),e=!1,t()}}}function oI(I){let g,A,l,e;return{c(){g=(0,C.ND4)("div"),A=(0,C.ND4)("img"),(0,C.mq_)(A.src,l=I[5].getURL+"/@@images/image/preview")||(0,C.CFu)(A,"src",l),(0,C.CFu)(A,"alt",e=I[5].Title),(0,C.CFu)(A,"class","svelte-8w273"),(0,C.CFu)(g,"class","previewImage")},m(I,l){(0,C.Yry)(I,g,l),(0,C.BCw)(g,A)},p(I,g){32&g[0]&&!(0,C.mq_)(A.src,l=I[5].getURL+"/@@images/image/preview")&&(0,C.CFu)(A,"src",l),32&g[0]&&e!==(e=I[5].Title)&&(0,C.CFu)(A,"alt",e)},d(I){I&&(0,C.YoD)(g)}}}function GI(I){let g,A,l,e,t,c=I[5].Description+"";return{c(){g=(0,C.ND4)("dt"),g.textContent=`${(0,s.Ay)("Description")}`,A=(0,C.ND4)("dd"),l=(0,C.Qq7)(c),e=(0,C.xem)(),(0,C.CFu)(A,"class","text-truncate"),(0,C.CFu)(A,"title",t=I[5].Description)},m(I,t){(0,C.Yry)(I,g,t),(0,C.Yry)(I,A,t),(0,C.BCw)(A,l),(0,C.BCw)(A,e)},p(I,g){32&g[0]&&c!==(c=I[5].Description+"")&&(0,C.iQh)(l,c),32&g[0]&&t!==(t=I[5].Description)&&(0,C.CFu)(A,"title",t)},d(I){I&&((0,C.YoD)(g),(0,C.YoD)(A))}}}function rI(I){let g,A,l,e,t,c,i=(0,d.Yq)(I[5].created)+"";return{c(){g=(0,C.ND4)("dt"),g.textContent=`${(0,s.Ay)("created")}`,A=(0,C.ND4)("dd"),l=(0,C.ND4)("time"),e=(0,C.Qq7)(i),c=(0,C.xem)(),(0,C.CFu)(l,"datetime",t=I[5].created)},m(I,t){(0,C.Yry)(I,g,t),(0,C.Yry)(I,A,t),(0,C.BCw)(A,l),(0,C.BCw)(l,e),(0,C.BCw)(A,c)},p(I,g){32&g[0]&&i!==(i=(0,d.Yq)(I[5].created)+"")&&(0,C.iQh)(e,i),32&g[0]&&t!==(t=I[5].created)&&(0,C.CFu)(l,"datetime",t)},d(I){I&&((0,C.YoD)(g),(0,C.YoD)(A))}}}function ZI(I){let g,A,l,e,t,c,i=(0,d.Yq)(I[5].modified)+"";return{c(){g=(0,C.ND4)("dt"),g.textContent=`${(0,s.Ay)("modified")}`,A=(0,C.ND4)("dd"),l=(0,C.ND4)("time"),e=(0,C.Qq7)(i),c=(0,C.xem)(),(0,C.CFu)(l,"datetime",t=I[5].modified)},m(I,t){(0,C.Yry)(I,g,t),(0,C.Yry)(I,A,t),(0,C.BCw)(A,l),(0,C.BCw)(l,e),(0,C.BCw)(A,c)},p(I,g){32&g[0]&&i!==(i=(0,d.Yq)(I[5].modified)+"")&&(0,C.iQh)(e,i),32&g[0]&&t!==(t=I[5].modified)&&(0,C.CFu)(l,"datetime",t)},d(I){I&&((0,C.YoD)(g),(0,C.YoD)(A))}}}function mI(I){let g,A,l,e=I[5].review_state+"";return{c(){g=(0,C.ND4)("dt"),g.textContent=`${(0,s.Ay)("review_state")}`,A=(0,C.ND4)("dd"),l=(0,C.Qq7)(e)},m(I,e){(0,C.Yry)(I,g,e),(0,C.Yry)(I,A,e),(0,C.BCw)(A,l)},p(I,g){32&g[0]&&e!==(e=I[5].review_state+"")&&(0,C.iQh)(l,e)},d(I){I&&((0,C.YoD)(g),(0,C.YoD)(A))}}}function XI(I){let g,A,l,e,t,c,n,b,u,a,o,G,r,Z,m,X,B,x,p=(0,s.Ay)("${item_count} items selected",{item_count:I[0].length})+"";return{c(){g=(0,C.ND4)("div"),A=(0,C.ND4)("div"),l=(0,C.ND4)("button"),e=(0,C.QQy)("svg"),c=(0,C.xem)(),n=(0,C.ND4)("span"),n.textContent=`${(0,s.Ay)("add selected items")}`,u=(0,C.xem)(),a=(0,C.ND4)("div"),o=(0,C.QQy)("svg"),r=(0,C.xem)(),Z=(0,C.ND4)("span"),m=(0,C.Qq7)(p),(0,C.CFu)(e,"class","svelte-8w273"),(0,C.CFu)(n,"class","select-button-ellipsis svelte-8w273"),(0,C.CFu)(l,"class","btn btn-xs btn-outline-primary d-flex align-items-center svelte-8w273"),(0,C.CFu)(l,"title",b=(0,s.Ay)("add selected items")),(0,C.CFu)(A,"class","levelToolbar svelte-8w273"),(0,C.CFu)(o,"class","svelte-8w273"),(0,C.CFu)(Z,"class",""),(0,C.CFu)(a,"class","info svelte-8w273"),(0,C.CFu)(g,"class","preview svelte-8w273")},m(i,s){(0,C.Yry)(i,g,s),(0,C.BCw)(g,A),(0,C.BCw)(A,l),(0,C.BCw)(l,e),(0,C.BCw)(l,c),(0,C.BCw)(l,n),(0,C.BCw)(g,u),(0,C.BCw)(g,a),(0,C.BCw)(a,o),(0,C.BCw)(a,r),(0,C.BCw)(a,Z),(0,C.BCw)(Z,m),B||(x=[(0,C.hGc)(t=d.qz.call(null,e,{iconName:"plus"})),(0,C.KTR)(l,"click",(0,C.xZN)(I[23])),(0,C.hGc)(G=d.qz.call(null,o,{iconName:"files"}))],B=!0)},p(I,g){1&g[0]&&p!==(p=(0,s.Ay)("${item_count} items selected",{item_count:I[0].length})+"")&&(0,C.iQh)(m,p)},i(I){I&&(X||(0,C.Dti)((()=>{X=(0,C.b7f)(g,i._J,{duration:500}),X.start()})))},o:C.lQ1,d(I){I&&(0,C.YoD)(g),B=!1,(0,C.oOW)(x)}}}function BI(I){let g;return{c(){g=(0,C.ND4)("div"),(0,C.CFu)(g,"class","upload-wrapper svelte-8w273")},m(I,A){(0,C.Yry)(I,g,A)},d(I){I&&(0,C.YoD)(g)}}}function xI(I){let g;return{c(){g=(0,C.ND4)("p"),g.textContent=`${(0,s.Ay)("loading content items")}`},m(I,A){(0,C.Yry)(I,g,A)},p:C.lQ1,d(I){I&&(0,C.YoD)(g)}}}function pI(I){let g,A,l=I[3]&&j(I);return{c(){l&&l.c(),g=(0,C.Iex)()},m(I,e){l&&l.m(I,e),(0,C.Yry)(I,g,e),A=!0},p(I,A){I[3]?l?(l.p(I,A),8&A[0]&&(0,C.c7F)(l,1)):(l=j(I),l.c(),(0,C.c7F)(l,1),l.m(g.parentNode,g)):l&&((0,C.V44)(),(0,C.Tn8)(l,1,1,(()=>{l=null})),(0,C.GYV)())},i(I){A||((0,C.c7F)(l),A=!0)},o(I){(0,C.Tn8)(l),A=!1},d(I){I&&(0,C.YoD)(g),l&&l.d(I)}}}function VI(I){return I.path?.split("/").pop()||"- no id -"}function WI(I,g,A){let l,i,s,b,a,o,G;c.ih({scrollX:!0,container:".levelColumns",duration:500});const r=(0,e.SD)("currentPath");(0,C.j0C)(I,r,(I=>A(2,s=I)));const Z=(0,e.SD)("config");(0,C.j0C)(I,Z,(I=>A(8,a=I)));const m=(0,e.SD)("pathCache"),X=(0,e.SD)("showContentBrowser");(0,C.j0C)(I,X,(I=>A(3,b=I)));const B=(0,e.SD)("selectedItems");(0,C.j0C)(I,B,(I=>A(51,G=I)));const x=(0,e.SD)("selectedUids");(0,C.j0C)(I,x,(I=>A(50,o=I)));const p=(0,e.SD)("previewUids");(0,C.j0C)(I,p,(I=>A(0,l=I)));const V=u(a,m);(0,C.j0C)(I,V,(I=>A(1,i=I)));let W=!1,v={},w=!1,F=!1,Q=null,y=!1,N=a.mode,h=Math.max(document.documentElement.clientWidth||0,window.innerWidth||0);function Y({data:I=null,uuid:g=null,action:e="show"}){if(I&&"show"==e)A(5,v=I),(0,C.vu6)(p,l=[I.UID],l);else if(g&&"add"==e&&-1===l.indexOf(g)){if(a.maximumSelectionSize>0&&l.length>=a.maximumSelectionSize)return;(0,C.vu6)(p,l=[...l,g],l)}else g&&"remove"==e&&-1!==l.indexOf(g)?p.update((I=>(I.splice(I.indexOf(g),1),I))):"clear"==e&&(A(5,v={}),(0,C.vu6)(p,l=[],l))}function R(I,g){A(4,W=!1),Y({action:"clear"}),"/"!==I&&I!==a.rootPath?function(I){if("browse"==a.mode)if((0,C.vu6)(p,l=[I.UID],l),I.is_folderish)r.set(I.path);else{const g=I.path.split("/"),A=g.slice(0,g.length-1).join("/");r.set(A||"/"),Y({data:I})}else Y({data:I});f()}(I):r.set(a.rootPath)}function U(I,g){w||(w=!0);const A=g.currentTarget.closest(".levelItems");let C=A.querySelectorAll(".selectedItem");if(C.length&&1!=a.maximumSelectionSize)if(F||g?.shiftKey){let g=!1;for(const C of A.children){if(-1!==[I.UID,l[0]].indexOf(C.dataset.uuid)){if(g){Y({uuid:C.dataset.uuid,action:"add"}),g=!1;continue}g=!0}Y({uuid:C.dataset.uuid,action:g?"add":"remove"})}F=!1}else g?.metaKey||g?.ctrlKey?Y({uuid:I.UID,action:-1==l.indexOf(I.UID)?"add":"remove"}):([...C].map((I=>I.classList.remove("selectedItem"))),R(I));else R(I);g.currentTarget.focus(),g.currentTarget.classList.add("selectedItem")}function D(){if(w)return;const I=[...document.querySelectorAll(".levelColumn .inPath"),...document.querySelectorAll(".levelColumn .selectedItem")];!I.length&&document.querySelector(".levelColumn .contentItem")&&I.push(document.querySelector(".levelColumn .contentItem")),I.length&&(w=!0,I[0].focus())}function J(I,g){const A=g.currentTarget;if(F=g.shiftKey,"Escape"==g.key&&L(),"ArrowDown"==g.key&&A?.nextElementSibling?.classList.contains("contentItem")&&A.nextElementSibling.click(),"ArrowUp"==g.key&&A?.previousElementSibling?.classList.contains("contentItem")&&A.previousElementSibling.click(),"ArrowRight"==g.key){const I=g.target.closest(".levelColumn"),A=I?.nextElementSibling;if(!A||!A.classList.contains("levelColumn"))return;A.querySelector(".contentItem")?.click()}if("ArrowLeft"==g.key){const I=g.target.closest(".levelColumn"),A=I?.previousElementSibling;if(!A||!A.classList.contains("levelColumn"))return;A.querySelector(".inPath").click()}"Space"==g.key&&U(I,g),"Enter"==g.key&&k(I)&&(1==a.maximumSelectionSize?S(I):H())}async function S(I){1==a.maximumSelectionSize?(B.set([I]),x.set([I.UID])):(B.update((g=>[...g,I])),x.update((()=>G.map((I=>I.UID))))),(0,d.r1)(I,a),L()}async function H(){const I=await(0,d.x6)(l,a);B.update((g=>{for(const A of I)-1==o.indexOf(A.UID)&&g.push(A);return g})),x.update((()=>G.map((I=>I.UID)))),L()}function L(){E(""),A(6,Q=null),(0,C.vu6)(Z,a.mode=N,a),(0,C.vu6)(X,b=!1,b),w=!1,Y({action:"clear"})}function k(I){return-1===o.indexOf(I.UID)}function f(){const I=document.querySelector(".levelColumns");I&&c.VG({x:I.scrollWidth+100})}const z=t.A.debounce((async I=>{await j(I.target.value)}),300);async function j(I){A(6,Q=I),"browse"===N&&(0,C.vu6)(Z,a.mode=""!==Q?"search":"browse",a),await V.get({path:s,searchTerm:Q,mode:a.mode}),Y({action:"clear"}),I||f()}const T=t.A.debounce((async I=>{await E(I.target.value)}),300),E=async I=>{""!==I?Y({action:"clear"}):f(),await V.get({path:s,searchTerm:I,updateCache:!0})};return I.$$.update=()=>{12&I.$$.dirty[0]&&b&&V.get({path:s}),2&I.$$.dirty[0]&&f(),I.$$.dirty[0]},[l,i,s,b,W,v,Q,y,a,r,Z,X,B,x,p,V,h,async function(){Y({action:"clear"}),f(),A(4,W=!0),await t.A.timeout(1);const I=document.querySelector(".upload-wrapper");I.classList.add("pat-upload"),new n.default(I,{baseUrl:a.rootUrl,currentPath:s,relativePath:"@@fileUpload",allowPathSelection:!1,hiddenInputContainer:".upload-wrapper",success:(I,g)=>{l.push(g.UID)},queuecomplete:(I,g)=>{V.get({path:s,updateCache:!0}),A(4,W=!1)}})},R,U,D,J,S,H,function(I){S(I.detail.item)},async function(I){const g=I.detail.item.path,A=await(0,d.Em)({vocabularyUrl:a.vocabularyUrl,attributes:a.attributes,levelInfoPath:g});if(!A.total)return void alert(`${g} not found!`);const C=A.results[0];C.path||(C.path=a.rootPath),R(C)},L,k,f,function(I){const g=I.path.split("/"),A=s.split("/");let C=!0;for(const I in g)C=C&&g[I]===A[I];return C},z,j,T,E,function(I){const g=new IntersectionObserver((g=>{for(const A of g)A.isIntersecting&&V.get({loadMorePath:I.dataset.levelPath,page:+I.dataset.levelNextPage,searchTerm:I.dataset.searchTerm})}),{threshold:0,root:null,margin:"0px"});window.setTimeout((()=>{g.observe(I)}),300)},()=>j(""),()=>L(),()=>R(a.rootPath),()=>R(a.rootPath),I=>S(I),(I,g,A)=>{E(""),(0,C.vu6)(V,g[A].showFilter=!1,i)},(I,g,A)=>(0,C.vu6)(V,g[A].showFilter=!0,i),()=>A(7,y=!0),()=>A(7,y=!1),(I,g)=>J(I,g),(I,g)=>U(I,g),()=>S(v),()=>{f(),D()}]}class vI extends C.r7T{constructor(I){super(),(0,C.TsN)(this,I,WI,pI,C.jXN,{},null,[-1,-1,-1])}}var wI=vI,FI=A(64708),QI=A.n(FI),yI=A(44563),NI=A(58621),hI=A.n(NI),YI=A(19394),RI={};RI.styleTagTransform=H(),RI.setAttributes=U(),RI.insert=Y(),RI.domAPI=N(),RI.insertStyleElement=J();Q()(YI.A,RI),YI.A&&YI.A.locals&&YI.A.locals;function UI(I,g,A){const C=I.slice();return C[22]=g[A],C[24]=A,C}function DI(I){let g,A,l={ctx:I,current:null,token:null,hasCatch:!0,pending:LI,then:SI,catch:JI,error:25};return(0,C.vBd)(A=I[7](),l),{c(){g=(0,C.Iex)(),l.block.c()},m(I,A){(0,C.Yry)(I,g,A),l.block.m(I,l.anchor=A),l.mount=()=>g.parentNode,l.anchor=g},p(g,A){I=g,(0,C._6B)(l,I,A)},d(I){I&&(0,C.YoD)(g),l.block.d(I),l.token=null,l=null}}}function JI(I){let g;return{c(){g=(0,C.ND4)("p"),g.textContent=`${I[25].message}`,(0,C.hgi)(g,"color","red")},m(I,A){(0,C.Yry)(I,g,A)},p:C.lQ1,d(I){I&&(0,C.YoD)(g)}}}function SI(I){let g,A=[],l=new Map,e=(0,C.rv_)(I[0]);const t=I=>I[22].UID;for(let g=0;g<e.length;g+=1){let C=UI(I,e,g),c=t(C);l.set(c,A[g]=HI(c,C))}return{c(){for(let I=0;I<A.length;I+=1)A[I].c();g=(0,C.Iex)()},m(I,l){for(let g=0;g<A.length;g+=1)A[g]&&A[g].m(I,l);(0,C.Yry)(I,g,l)},p(I,c){257&c&&(e=(0,C.rv_)(I[0]),A=(0,C.l7s)(A,c,t,1,I,e,l,g.parentNode,C.n_k,HI,g,UI))},d(I){I&&(0,C.YoD)(g);for(let g=0;g<A.length;g+=1)A[g].d(I)}}}function HI(I,g){let A,l,e,t;return{key:I,first:null,c(){A=(0,C.ND4)("div"),this.first=A},m(I,c){(0,C.Yry)(I,A,c),e||(t=(0,C.hGc)(l=g[9].call(null,A,{item:g[22],unselectItem:g[8]})),e=!0)},p(I,A){g=I,l&&(0,C.Qk1)(l.update)&&1&A&&l.update.call(null,{item:g[22],unselectItem:g[8]})},d(I){I&&(0,C.YoD)(A),e=!1,t()}}}function LI(I){return{c:C.lQ1,m:C.lQ1,p:C.lQ1,d:C.lQ1}}function kI(I){let g;return{c(){g=(0,C.ND4)("p"),g.textContent=`${(0,s.Ay)("loading selected items")}`},m(I,A){(0,C.Yry)(I,g,A)},d(I){I&&(0,C.YoD)(g)}}}function fI(I){let g,A,l,e,t,c,i,n=I[0]&&DI(I),b=!I[0]&&kI();return{c(){g=(0,C.ND4)("div"),A=(0,C.ND4)("div"),n&&n.c(),l=(0,C.xem)(),b&&b.c(),e=(0,C.xem)(),t=(0,C.ND4)("a"),t.textContent=`${(0,s.Ay)("Select")}`,(0,C.CFu)(A,"class","content-browser-selected-items svelte-awokap"),(0,C.CFu)(t,"class","btn btn-primary"),(0,C.CFu)(t,"href","#"),(0,C.hgi)(t,"border-radius","0 var(--bs-border-radius) var(--bs-border-radius) 0"),(0,C.CFu)(g,"class","content-browser-selected-items-wrapper svelte-awokap"),(0,C.hgi)(g,"width",I[2].width||"auto")},m(s,d){(0,C.Yry)(s,g,d),(0,C.BCw)(g,A),n&&n.m(A,null),(0,C.BCw)(A,l),b&&b.m(A,null),(0,C.BCw)(g,e),(0,C.BCw)(g,t),I[13](g),c||(i=[(0,C.KTR)(A,"click",I[11]),(0,C.KTR)(t,"click",(0,C.xZN)(I[12]))],c=!0)},p(I,[e]){I[0]?n?n.p(I,e):(n=DI(I),n.c(),n.m(A,l)):n&&(n.d(1),n=null),I[0]?b&&(b.d(1),b=null):b||(b=kI(),b.c(),b.m(A,null)),4&e&&(0,C.hgi)(g,"width",I[2].width||"auto")},i:C.lQ1,o:C.lQ1,d(A){A&&(0,C.YoD)(g),n&&n.d(),b&&b.d(),I[13](null),c=!1,(0,C.oOW)(i)}}}function zI(I,g,A){let l,t,c,i,s,n=!0;const b=(0,e.SD)("config");(0,C.j0C)(I,b,(I=>A(2,t=I)));const u=t.fieldId,a=document.getElementById(u),o=(0,e.SD)("selectedItems");(0,C.j0C)(I,o,(I=>A(0,l=I)));const G=(0,e.SD)("selectedUids"),r=(0,e.SD)("showContentBrowser");function Z(){1!==t.maximumSelectionSize&&l.length>1&&QI().create(a.previousSibling.querySelector(".content-browser-selected-items"),{draggable:"> div",animation:200,onUpdate:I=>{let g=[];I.target.querySelectorAll(".selected-item").forEach((I=>{g.push(I.dataset.uuid)})),m(g)}})}function m(I){const g=I.join(t.separator);a.value=g,a.dispatchEvent(yI.A.change_event())}(0,C.j0C)(I,r,(I=>A(3,c=I))),(0,e.Rc)((async()=>{await async function(){const I=t.selection.length?t.selection:a?.value?a.value.split(t.separator):[];if(!I.length)return;(0,C.vu6)(o,l=await(0,d.x6)(I,t),l),G.update((()=>l.map((I=>I.UID))))}(),Z(),A(10,n=!1)}));return I.$$.update=()=>{1025&I.$$.dirty&&(!l.length&&n||(m(function(){let I=[];return l.forEach((g=>{I.push(g.UID)})),I}()),Z()))},[l,i,t,c,b,o,r,async function(){t.componentRegistryKeys?.selectedItem&&(s=hI().getComponent(t.componentRegistryKeys.selectedItem)),s?.component||(s=hI().getComponent("pat-contentbrowser.SelectedItem"))},function(I){o.update((g=>g.filter((g=>g.UID!==I)))),G.update((()=>l.map((I=>I.UID))))},function(I,g){new s.component({target:I,props:g})},n,()=>(0,C.vu6)(r,c=!l.length,c),()=>(0,C.vu6)(r,c=!0,c),function(I){C.Dnk[I?"unshift":"push"]((()=>{i=I,A(1,i)}))}]}class jI extends C.r7T{constructor(I){super(),(0,C.TsN)(this,I,zI,fI,C.jXN,{})}}var TI=jI;(0,b.T5)(!1);function EI(I){let g,A,l,e;return g=new wI({}),l=new TI({}),{c(){(0,C.N0i)(g.$$.fragment),A=(0,C.xem)(),(0,C.N0i)(l.$$.fragment)},m(I,t){(0,C.wSR)(g,I,t),(0,C.Yry)(I,A,t),(0,C.wSR)(l,I,t),e=!0},p:C.lQ1,i(I){e||((0,C.c7F)(g.$$.fragment,I),(0,C.c7F)(l.$$.fragment,I),e=!0)},o(I){(0,C.Tn8)(g.$$.fragment,I),(0,C.Tn8)(l.$$.fragment,I),e=!1},d(I){I&&(0,C.YoD)(A),(0,C.Hbl)(g,I),(0,C.Hbl)(l,I)}}}function PI(I,g,A){let t,c,{maxDepth:i}=g,{width:s}=g,{attributes:n}=g,{contextPath:d}=g,{vocabularyUrl:u}=g,{mode:a="browse"}=g,{rootPath:o=""}=g,{rootUrl:G=""}=g,{basePath:r=""}=g,{selectableTypes:Z=[]}=g,{browseableTypes:m=["Folder","LIF","LRF"]}=g,{searchIndex:X="SearchableText"}=g,{maximumSelectionSize:B=-1}=g,{separator:x}=g,{selection:p=[]}=g,{query:V={}}=g,{fieldId:W}=g,{upload:v}=g,{favorites:w}=g,{recentlyUsed:F}=g,{recentlyUsedKey:Q}=g,{recentlyUsedMaxItems:y}=g,{bSize:N=20}=g,{componentRegistryKeys:h={}}=g;const Y=l.A.getLogger("pat-contentbrowser");!function(){let I=(0,b.T5)("");(0,e.o)("currentPath",I)}(),function(){let I=(0,b.T5)({});(0,e.o)("config",I)}(),function(){let I=(0,b.T5)({});(0,e.o)("pathCache",I)}(),function(){let I=(0,b.T5)([]);(0,e.o)("selectedItems",I)}(),function(){let I=(0,b.T5)(!1);(0,e.o)("showContentBrowser",I)}(),function(){let I=(0,b.T5)([]);(0,e.o)("selectedUids",I)}(),function(){let I=(0,b.T5)([]);(0,e.o)("previewUids",I)}();const R=(0,e.SD)("currentPath");if((0,C.j0C)(I,R,(I=>A(27,c=I))),!c)if(r||o)(0,C.vu6)(R,c=0!=r.indexOf(o)?o:r,c),o&&c!=o&&0==c.indexOf(o)&&(0,C.vu6)(R,c=c.replace(o,""),c);else{const I=new URL(u).pathname.split("/");o=d=(0,C.vu6)(R,c=I.slice(0,I.length-1).join("/")||"/",c)}let U=(0,e.SD)("config");return(0,C.j0C)(I,U,(I=>A(26,t=I))),(0,C.vu6)(U,t={mode:a,attributes:n,contextPath:d,vocabularyUrl:u,width:s,maxDepth:i,rootPath:o,rootUrl:G,basePath:r,selectableTypes:Z,browseableTypes:m,searchIndex:X,maximumSelectionSize:B,separator:x,selection:p,query:V,fieldId:W,uploadEnabled:v,favorites:w,recentlyUsed:F,recentlyUsedKey:Q,recentlyUsedMaxItems:y,pageSize:N,componentRegistryKeys:h},t),Y.debug(`Initialized App<${W}> with config`,t),I.$$set=I=>{"maxDepth"in I&&A(4,i=I.maxDepth),"width"in I&&A(5,s=I.width),"attributes"in I&&A(6,n=I.attributes),"contextPath"in I&&A(2,d=I.contextPath),"vocabularyUrl"in I&&A(7,u=I.vocabularyUrl),"mode"in I&&A(8,a=I.mode),"rootPath"in I&&A(3,o=I.rootPath),"rootUrl"in I&&A(9,G=I.rootUrl),"basePath"in I&&A(10,r=I.basePath),"selectableTypes"in I&&A(11,Z=I.selectableTypes),"browseableTypes"in I&&A(12,m=I.browseableTypes),"searchIndex"in I&&A(13,X=I.searchIndex),"maximumSelectionSize"in I&&A(14,B=I.maximumSelectionSize),"separator"in I&&A(15,x=I.separator),"selection"in I&&A(16,p=I.selection),"query"in I&&A(17,V=I.query),"fieldId"in I&&A(18,W=I.fieldId),"upload"in I&&A(19,v=I.upload),"favorites"in I&&A(20,w=I.favorites),"recentlyUsed"in I&&A(21,F=I.recentlyUsed),"recentlyUsedKey"in I&&A(22,Q=I.recentlyUsedKey),"recentlyUsedMaxItems"in I&&A(23,y=I.recentlyUsedMaxItems),"bSize"in I&&A(24,N=I.bSize),"componentRegistryKeys"in I&&A(25,h=I.componentRegistryKeys)},[R,U,d,o,i,s,n,u,a,G,r,Z,m,X,B,x,p,V,W,v,w,F,Q,y,N,h]}class KI extends C.r7T{constructor(I){super(),(0,C.TsN)(this,I,PI,EI,C.jXN,{maxDepth:4,width:5,attributes:6,contextPath:2,vocabularyUrl:7,mode:8,rootPath:3,rootUrl:9,basePath:10,selectableTypes:11,browseableTypes:12,searchIndex:13,maximumSelectionSize:14,separator:15,selection:16,query:17,fieldId:18,upload:19,favorites:20,recentlyUsed:21,recentlyUsedKey:22,recentlyUsedMaxItems:23,bSize:24,componentRegistryKeys:25})}}var OI=KI}}]);
//# sourceMappingURL=85083.d099bbd5b4d1085cc726.min.js.map