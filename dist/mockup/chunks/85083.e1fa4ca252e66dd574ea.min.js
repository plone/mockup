"use strict";(self.webpackChunk_plone_mockup=self.webpackChunk_plone_mockup||[]).push([[85083],{3831:function(e,t,n){n.d(t,{EO:function(){return i},Em:function(){return r},gf:function(){return a},qz:function(){return s},r1:function(){return c},x6:function(){return o}});var l=n(49264);async function r(e){let{method:t="GET",vocabularyUrl:n=null,attributes:l=[],path:r=null,uids:o=null,searchTerm:s=null,searchPath:i=null,levelInfoPath:a=null,selectableTypes:c=[],pageSize:u=100,page:A=1}=e,d={criteria:[]};if(r&&(d={criteria:[{i:"path",o:"plone.app.querystring.operation.string.path",v:`${r}::1`}],sort_on:"getObjPositionInParent",sort_order:"ascending"}),a&&(d={criteria:[{i:"path",o:"plone.app.querystring.operation.string.path",v:`${a}::0`}]}),i&&(d={criteria:[{i:"path",o:"plone.app.querystring.operation.string.path",v:i}]},c.length&&d.criteria.push({i:"portal_type",o:"plone.app.querystring.operation.list.contains",v:c})),o&&(d={criteria:[{i:"UID",o:"plone.app.querystring.operation.list.contains",v:o}]}),s&&d.criteria.push({i:"SearchableText",o:"plone.app.querystring.operation.string.contains",v:`${s}`}),!d.criteria.length)return{results:[],total:0};let p=`${n}${-1!==n.indexOf("?")?"&":"?"}query=${JSON.stringify(d)}&attributes=${JSON.stringify(l)}&batch=${JSON.stringify({page:A,size:u})}`,m=new Headers;m.set("Accept","application/json");const g=await fetch(p,{method:t,headers:m});if(!g.ok)return{results:[],total:0,errors:y.errors};const y=await g.json();if(!i&&!a&&c.length){const e={results:[],total:y.total};for(const t of y.results)(-1!=c.indexOf(t.portal_type)||t.is_folderish)&&e.results.push(t);return e}return y}async function o(e,t){if(!e)return[];const n=await r({vocabularyUrl:t.vocabularyUrl,attributes:t.attributes,uids:e});let l=await(n?.results)||[];return l.sort(((t,n)=>e.indexOf(t.UID)-e.indexOf(n.UID))),l}async function s(e,t){let{iconName:n}=t;const r=await async function(e){return await l.A.resolveIcon(e)}(n);return e.outerHTML=r,{destroy(){}}}function i(e){const t=t=>{e&&!e.contains(t.target)&&e.dispatchEvent(new CustomEvent("click_outside",e))};return document.addEventListener("click",t,!0),{destroy(){document.removeEventListener("click",t,!0)}}}function a(e,t){let n=l.A.storage.get(t.recentlyUsedKey)||[];n=n.slice(n.length-1e3,n.length),e&&t?.selectableTypes.length&&(n=n.filter((e=>-1!=t.selectableTypes.indexOf(e.portal_type))));const r=parseInt(t.recentlyUsedMaxItems,20);return r&&(n=n.slice(n.length-r,n.length)),n}function c(e,t){if(!t.recentlyUsed)return;const n=a(!1,t),r=n.filter((t=>t.UID===e.UID));r.length>0&&n.splice(n.indexOf(r[0]),1),n.push(e),l.A.storage.set(t.recentlyUsedKey,n)}},24433:function(e,t,n){var l=n(71354),r=n.n(l),o=n(76314),s=n.n(o)()(r());s.push([e.id,".content-browser-position-wrapper.svelte-jgy3q8.svelte-jgy3q8.svelte-jgy3q8{position:fixed;top:0;right:0;display:flex;justify-content:end;z-index:1500;width:100%;height:100vh;background-color:rgba(0,0,0,.25)}.btn-xs.svelte-jgy3q8.svelte-jgy3q8.svelte-jgy3q8{--bs-btn-padding-y:0.15rem;--bs-btn-padding-x:0.5rem;--bs-btn-font-size:0.75rem}.content-browser.svelte-jgy3q8.svelte-jgy3q8.svelte-jgy3q8{height:100vh;min-width:550px;background-color:var(--bs-light-bg-subtle);border-left:var(--bs-border-style) var(--bs-border-width) #fff;z-index:1500;display:flex;flex-direction:column}.toolBar.svelte-jgy3q8.svelte-jgy3q8.svelte-jgy3q8{background-color:var(--bs-primary);padding:.325rem .75rem;color:var(--bs-light);width:100%;display:flex;justify-content:start}.toolBar.svelte-jgy3q8 svg{vertical-align:-0.125em}.levelColumns.svelte-jgy3q8.svelte-jgy3q8.svelte-jgy3q8{display:flex;flex-wrap:nowrap;width:100%;overflow:hidden;flex-grow:3;border-left:var(--bs-border-style) var(--bs-border-color) var(--bs-border-width);user-select:none}.levelColumn.svelte-jgy3q8.svelte-jgy3q8.svelte-jgy3q8{width:320px;border-right:var(--bs-border-style) var(--bs-border-width) var(--bs-border-color);display:flex;flex-direction:column}.levelToolbar.svelte-jgy3q8.svelte-jgy3q8.svelte-jgy3q8{width:100%;height:2.5rem;display:flex;justify-content:space-between;padding:.375rem;border-bottom:var(--bs-border-style) var(--bs-border-width) var(--bs-border-color)}.levelToolbar.svelte-jgy3q8>.levelActions.svelte-jgy3q8.svelte-jgy3q8{margin-left:auto}.levelToolbar.svelte-jgy3q8>button.svelte-jgy3q8.svelte-jgy3q8{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.levelItems.svelte-jgy3q8.svelte-jgy3q8.svelte-jgy3q8{overflow-x:auto}.contentItem.svelte-jgy3q8.svelte-jgy3q8.svelte-jgy3q8{display:flex;align-items:center;justify-content:space-between;font-size:90%;min-height:2rem}.contentItem.svelte-jgy3q8.svelte-jgy3q8.svelte-jgy3q8:focus-visible{outline:none}.contentItem.even.svelte-jgy3q8.svelte-jgy3q8.svelte-jgy3q8{background-color:rgba(var(--bs-secondary-bg-rgb), 0.4)}.contentItem.inPath.svelte-jgy3q8.svelte-jgy3q8.svelte-jgy3q8,.contentItem.svelte-jgy3q8.svelte-jgy3q8.svelte-jgy3q8:focus{background-color:rgba(var(--bs-primary-rgb), 0.15)}.contentItem.selectedItem.svelte-jgy3q8.svelte-jgy3q8.svelte-jgy3q8{background-color:var(--bs-primary);color:var(--bs-body-bg)}.contentItem.svelte-jgy3q8>.svelte-jgy3q8.svelte-jgy3q8{padding:.5rem;white-space:nowrap;max-width:450px;text-overflow:ellipsis;overflow:hidden}.contentItem.svelte-jgy3q8>.browseSub.svelte-jgy3q8.svelte-jgy3q8{flex-shrink:0}.contentItem.svelte-jgy3q8 .grid-preview.svelte-jgy3q8>img.svelte-jgy3q8{width:95px;height:95px;object-fit:cover;float:left;margin-right:1rem}.preview.svelte-jgy3q8.svelte-jgy3q8.svelte-jgy3q8{width:320px;min-height:300px;display:flex;flex-direction:column;align-items:center}.preview.svelte-jgy3q8 .info.svelte-jgy3q8.svelte-jgy3q8{padding:.5rem;width:100%;word-wrap:anywhere}.preview.svelte-jgy3q8 .info .previewIcon.svelte-jgy3q8.svelte-jgy3q8{margin:0 auto 1rem auto}.preview.svelte-jgy3q8 .info .previewIcon svg.svelte-jgy3q8.svelte-jgy3q8{width:50px !important;height:50px !important}.preview.svelte-jgy3q8 h4.svelte-jgy3q8.svelte-jgy3q8{font-size:1.2 rem}.preview.svelte-jgy3q8 img.svelte-jgy3q8.svelte-jgy3q8{max-width:100%;max-width:100%;margin-bottom:.5rem}.upload-wrapper.svelte-jgy3q8.svelte-jgy3q8.svelte-jgy3q8{padding:1rem;width:590px;overflow-x:auto}.loadmore.svelte-jgy3q8.svelte-jgy3q8.svelte-jgy3q8{text-align:center;padding:.25rem 0}","",{version:3,sources:["webpack://./src/pat/contentbrowser/src/ContentBrowser.svelte"],names:[],mappings:"AAAA,4EAAA,cAAA,CAAA,KAAA,CAAA,OAAA,CAAA,YAAA,CAAA,mBAAA,CAAA,YAAA,CAAA,UAAA,CAAA,YAAA,CAAA,gCAAA,CAAA,kDAAA,0BAAA,CAAA,yBAAA,CAAA,0BAAA,CAAA,2DAAA,YAAA,CAAA,eAAA,CAAA,0CAAA,CAAA,8DAAA,CAAA,YAAA,CAAA,YAAA,CAAA,qBAAA,CAAA,mDAAA,kCAAA,CAAA,sBAAA,CAAA,qBAAA,CAAA,UAAA,CAAA,YAAA,CAAA,qBAAA,CAAA,2BAAA,uBAAA,CAAA,wDAAA,YAAA,CAAA,gBAAA,CAAA,UAAA,CAAA,eAAA,CAAA,WAAA,CAAA,gFAAA,CAAA,gBAAA,CAAA,uDAAA,WAAA,CAAA,iFAAA,CACmC,YAAA,CAAA,qBAAA,CAAA,wDAAA,UAAA,CAAA,aAAA,CAAA,YAAA,CAAA,6BAAA,CAAA,eAAA,CAAA,kFAAA,CACA,sEAAA,gBAAA,CAAA,+DAAA,kBAAA,CAAA,eAAA,CAAA,sBAAA,CAAA,sDAAA,eAAA,CAAA,uDAAA,YAAA,CAAA,kBAAA,CAAA,6BAAA,CAAA,aAAA,CAAA,eAAA,CAAA,qEAAA,YAAA,CAAA,4DAAA,sDAAA,CAAA,2HAAA,kDAAA,CAAA,oEAAA,kCAAA,CAAA,uBAAA,CAAA,wDAAA,aAAA,CAAA,kBAAA,CAAA,eAAA,CAAA,sBAAA,CAAA,eAAA,CAAA,kEAAA,aAAA,CAAA,yEAAA,UAAA,CAAA,WAAA,CAAA,gBAAA,CAAA,UAAA,CAAA,iBAAA,CAAA,mDAAA,WAAA,CAAA,gBAAA,CAAA,YAAA,CAAA,qBAAA,CAAA,kBAAA,CAAA,yDAAA,aAAA,CAAA,UAAA,CAAA,kBAAA,CAAA,sEAAA,uBAAA,CAAA,0EAAA,qBAAA,CAAA,sBAAA,CAAA,sDAAA,iBAAA,CAAA,uDAAA,cAAA,CAAA,cAAA,CAAA,mBAAA,CAAA,0DAAA,YAAA,CAAA,WAAA,CAAA,eAAA,CAAA,oDAAA,iBAAA,CAAA,gBAAA",sourceRoot:""}]),t.A=s},19394:function(e,t,n){var l=n(71354),r=n.n(l),o=n(76314),s=n.n(o)()(r());s.push([e.id,".content-browser-selected-items-wrapper.svelte-awokap{display:flex;align-items:start}.content-browser-selected-items.svelte-awokap{list-style:none;background-color:var(--bs-body-bg);border-radius:var(--bs-border-radius) 0 0 var(--bs-border-radius);border:var(--bs-border-style) var(--bs-border-color) var(--bs-border-width);min-height:2.4rem;padding:.5rem .5rem 0 .5rem;flex:1 1 auto}","",{version:3,sources:["webpack://./src/pat/contentbrowser/src/SelectedItems.svelte"],names:[],mappings:"AAAA,sDAAA,YAAA,CAAA,iBAAA,CAAA,8CAAA,eAAA,CAAA,kCAAA,CAAA,iEAAA,CAAA,2EAAA,CAAA,iBAAA,CAAA,2BAAA,CAAA,aAAA",sourceRoot:""}]),t.A=s},85083:function(e,t,n){n.r(t),n.d(t,{default:function(){return $e}});var l=n(43467),r=(n(2531),n(23505)),o=n(41949),s=n(8633),i=n(78836),a=n(95669),c=n(61751),u=n(8936),A=n(54603),d=n(3831);function p(e,t){const n=(0,A.T5)([]),l=async t=>(t={...{vocabularyUrl:e.vocabularyUrl,attributes:e.attributes,pageSize:e.pageSize},...t},e.selectableTypes.length&&(t.selectableTypes=e.selectableTypes),await(0,d.Em)(t));return n.get=async r=>{let{path:o="",searchTerm:s="",updateCache:i=!1,loadMorePath:a="",page:c=1}=r;if("search"===e.mode)await(async(t,r)=>{let o={searchPath:e.rootPath,page:r};if(t){if(t.length<2)return;o.searchTerm="*"+t+"*"}let s=await l(o);s.page=r,s.searchTerm=t,n.update((n=>{const l=r*e.pageSize<s.total;return 0==n.length||n[0].searchTerm!=t?(s.more=l,s.selectable=!1,s.gridView=!1,[s]):(n[0].more=l,n[0].page=s.page,n[0].results=[...n[0].results,...s.results],n)}))})(s,c);else if(a){const r=(0,A.Jt)(t);if(!(a in r))return;let o=r[a];c>o.page&&await(async(t,r,o)=>{let s={path:t,page:r};o&&(s.searchTerm="*"+o+"*");let i=await l(s);i.more=r*e.pageSize<i.total,i.page=r,n.update((e=>(e.forEach((e=>{if(e.path!=t)return e;e.page=i.page,e.more=i.more,e.results=[...e.results,...i.results]})),e)))})(a,c,o.searchTerm)}else o&&await(async(r,o,s)=>{let i=e.rootPath,a=i.replace(/^\/+/,"").split("/"),c=r,u=i;if(!c.startsWith(i))if(1===a.length)c=i+c;else{let e=c.replace(/^\/+/,"").split("/"),t=a.length;for(let n=0;n<a.length;n++)if(a[n]===e[0]){t=n;break}u="/"+a.filter((t=>e.includes(t))).join("/"),c="/"+a.slice(1,t).concat(e).join("/")}let d=[],p=c.split("/")||[];const m=Math.min(p.length,e.maxDepth||999);let g=p.slice(p.length-m,p.length);const y=p.slice(0,p.length-m).join("/");for(;g.length>0;){let e=g.join("/").replace(/^\//,"");if(e=y+(""!=g.pop()?`/${e}`:""),e&&-1===d.indexOf(e)&&d.push(e),e==i)break}const v=(0,A.Jt)(t);let h=[],C=0;for(var f of d){C++;const n=1==C;let r={};if(!(f in v)||n&&o||s){let s={path:f};if(n&&o&&(s.searchTerm="*"+o+"*"),r=await l(s),r.more=e.pageSize<r.total,r.searchTerm=o,r.page=1,r.path=f,r.displayPath=f.replace(new RegExp(`^(${u}|${i})`),"")||"/",!o){const n=await l({levelInfoPath:f});n.total&&(r.UID=n.results[0].UID,r.Title=n.results[0].Title,r.portal_type=n.results[0].portal_type,r.getIcon=n.results[0].getIcon,r.selectable=!e.selectableTypes.length||-1!=e.selectableTypes.indexOf(n.results[0].portal_type)),r.gridView=!1,t.update((e=>(e[f]=r,e)))}}else r=v[f];h=[r,...h]}n.set(h)})(o,s,i)},n}function m(e,t,n){const l=e.slice();return l[5]=t[n],l}function g(e){let t,n,r,o,s,i,a,u,A,p,g=(0,c.Ay)("Favorites")+"",v=(0,l.rv_)(e[0].favorites),h=[];for(let t=0;t<v.length;t+=1)h[t]=y(m(e,v,t));return{c(){t=(0,l.ND4)("div"),n=(0,l.ND4)("button"),r=(0,l.QQy)("svg"),s=(0,l.xem)(),i=(0,l.Qq7)(g),a=(0,l.xem)(),u=(0,l.ND4)("ul");for(let e=0;e<h.length;e+=1)h[e].c();(0,l.CFu)(n,"type","button"),(0,l.CFu)(n,"class","favorites dropdown-toggle btn btn-outline-light btn-sm"),(0,l.CFu)(n,"data-bs-toggle","dropdown"),(0,l.CFu)(n,"aria-haspopup","true"),(0,l.CFu)(n,"aria-expanded","false"),(0,l.CFu)(u,"class","dropdown-menu"),(0,l.CFu)(t,"class","favorites dropdown dropdown-menu-end ms-2")},m(e,c){(0,l.Yry)(e,t,c),(0,l.BCw)(t,n),(0,l.BCw)(n,r),(0,l.BCw)(n,s),(0,l.BCw)(n,i),(0,l.BCw)(t,a),(0,l.BCw)(t,u);for(let e=0;e<h.length;e+=1)h[e]&&h[e].m(u,null);A||(p=(0,l.hGc)(o=d.qz.call(null,r,{iconName:"star-fill"})),A=!0)},p(e,t){if(5&t){let n;for(v=(0,l.rv_)(e[0].favorites),n=0;n<v.length;n+=1){const l=m(e,v,n);h[n]?h[n].p(l,t):(h[n]=y(l),h[n].c(),h[n].m(u,null))}for(;n<h.length;n+=1)h[n].d(1);h.length=v.length}},d(e){e&&(0,l.YoD)(t),(0,l.ppq)(h,e),A=!1,p()}}}function y(e){let t,n,r,o,s,i,a,c=e[5].title+"";function u(){return e[3](e[5])}return{c(){t=(0,l.ND4)("li"),n=(0,l.ND4)("a"),r=(0,l.Qq7)(c),s=(0,l.xem)(),(0,l.CFu)(n,"class","dropdown-item"),(0,l.CFu)(n,"href",o=e[5].path)},m(e,o){(0,l.Yry)(e,t,o),(0,l.BCw)(t,n),(0,l.BCw)(n,r),(0,l.BCw)(t,s),i||(a=(0,l.KTR)(n,"click",(0,l.xZN)(u)),i=!0)},p(t,s){e=t,1&s&&c!==(c=e[5].title+"")&&(0,l.iQh)(r,c),1&s&&o!==(o=e[5].path)&&(0,l.CFu)(n,"href",o)},d(e){e&&(0,l.YoD)(t),i=!1,a()}}}function v(e){let t,n=e[0]?.favorites&&g(e);return{c(){n&&n.c(),t=(0,l.Iex)()},m(e,r){n&&n.m(e,r),(0,l.Yry)(e,t,r)},p(e,[l]){e[0]?.favorites?n?n.p(e,l):(n=g(e),n.c(),n.m(t.parentNode,t)):n&&(n.d(1),n=null)},i:l.lQ1,o:l.lQ1,d(e){e&&(0,l.YoD)(t),n&&n.d(e)}}}function h(e,t,n){let r;const s=(0,o.SD)("config");(0,l.j0C)(e,s,(e=>n(0,r=e)));const i=(0,o.ur)();function a(e){i("selectItem",{item:e})}return[r,s,a,e=>a(e)]}class C extends l.r7T{constructor(e){super(),(0,l.TsN)(this,e,h,v,l.jXN,{})}}var f=C;function w(e,t,n){const l=e.slice();return l[6]=t[n],l}function b(e){let t,n,r,o,s,i,a,u,A,p,m=(0,c.Ay)("Recently Used")+"",g=(0,l.rv_)(e[2].reverse()),y=[];for(let t=0;t<g.length;t+=1)y[t]=q(w(e,g,t));return{c(){t=(0,l.ND4)("div"),n=(0,l.ND4)("button"),r=(0,l.QQy)("svg"),s=(0,l.xem)(),i=(0,l.Qq7)(m),a=(0,l.xem)(),u=(0,l.ND4)("ul");for(let e=0;e<y.length;e+=1)y[e].c();(0,l.CFu)(n,"type","button"),(0,l.CFu)(n,"class","recentlyUsed dropdown-toggle btn btn-outline-light btn-sm"),(0,l.CFu)(n,"data-bs-toggle","dropdown"),(0,l.CFu)(n,"aria-haspopup","true"),(0,l.CFu)(n,"aria-expanded","false"),(0,l.CFu)(u,"class","dropdown-menu"),(0,l.CFu)(t,"class","recentlyUsed dropdown ms-2")},m(e,c){(0,l.Yry)(e,t,c),(0,l.BCw)(t,n),(0,l.BCw)(n,r),(0,l.BCw)(n,s),(0,l.BCw)(n,i),(0,l.BCw)(t,a),(0,l.BCw)(t,u);for(let e=0;e<y.length;e+=1)y[e]&&y[e].m(u,null);A||(p=(0,l.hGc)(o=d.qz.call(null,r,{iconName:"grid-fill"})),A=!0)},p(e,t){if(12&t){let n;for(g=(0,l.rv_)(e[2].reverse()),n=0;n<g.length;n+=1){const l=w(e,g,n);y[n]?y[n].p(l,t):(y[n]=q(l),y[n].c(),y[n].m(u,null))}for(;n<y.length;n+=1)y[n].d(1);y.length=g.length}},d(e){e&&(0,l.YoD)(t),(0,l.ppq)(y,e),A=!1,p()}}}function q(e){let t,n,r,o,s,i,a,c,u,A,p=e[6].Title+"";function m(){return e[4](e[6])}return{c(){t=(0,l.ND4)("li"),n=(0,l.ND4)("a"),r=(0,l.QQy)("svg"),s=(0,l.xem)(),i=(0,l.Qq7)(p),c=(0,l.xem)(),(0,l.CFu)(n,"href",a=e[6].getURL||"#"),(0,l.CFu)(n,"class","dropdown-item")},m(a,p){(0,l.Yry)(a,t,p),(0,l.BCw)(t,n),(0,l.BCw)(n,r),(0,l.BCw)(n,s),(0,l.BCw)(n,i),(0,l.BCw)(t,c),u||(A=[(0,l.hGc)(o=d.qz.call(null,r,{iconName:`contenttype/${e[6]?.portal_type.toLowerCase().replace(/\.| /g,"-")}`})),(0,l.KTR)(n,"click",(0,l.xZN)(m))],u=!0)},p(t,n){e=t},d(e){e&&(0,l.YoD)(t),u=!1,(0,l.oOW)(A)}}}function x(e){let t,n=e[0].recentlyUsed&&e[2].length&&b(e);return{c(){n&&n.c(),t=(0,l.Iex)()},m(e,r){n&&n.m(e,r),(0,l.Yry)(e,t,r)},p(e,[l]){e[0].recentlyUsed&&e[2].length?n?n.p(e,l):(n=b(e),n.c(),n.m(t.parentNode,t)):n&&(n.d(1),n=null)},i:l.lQ1,o:l.lQ1,d(e){e&&(0,l.YoD)(t),n&&n.d(e)}}}function D(e,t,n){let r;const s=(0,o.SD)("config");(0,l.j0C)(e,s,(e=>n(0,r=e)));const i=(0,d.gf)(!0,r),a=(0,o.ur)();function c(e){a("selectItem",{item:e})}return[r,s,i,c,e=>c(e)]}class j extends l.r7T{constructor(e){super(),(0,l.TsN)(this,e,D,x,l.jXN,{})}}var B=j,N=n(85072),F=n.n(N),I=n(97825),T=n.n(I),U=n(57722),Y=n.n(U),k=n(55056),S=n.n(k),$=n(10540),Q=n.n($),_=n(41113),P=n.n(_),z=n(24433),R={};R.styleTagTransform=P(),R.setAttributes=S(),R.insert=Y(),R.domAPI=T(),R.insertStyleElement=Q();F()(z.A,R),z.A&&z.A.locals&&z.A.locals;function E(e,t,n){const l=e.slice();return l[48]=t[n],l[49]=t,l[50]=n,l}function K(e,t,n){const l=e.slice();return l[51]=t[n],l[53]=n,l}function O(e){let t,n,r,o,s,i,c,u,A,p,m,g,y,v,h,C,w,b,q,x,D,j,N,F,I;m=new B({}),m.$on("selectItem",e[22]),y=new f({}),y.$on("selectItem",e[23]);let T=e[6].uploadEnabled&&L(e),U={ctx:e,current:null,token:null,hasCatch:!0,pending:pe,then:W,catch:G,value:47,error:54};return(0,l.vBd)(x=e[1],U),{c(){t=(0,l.ND4)("div"),n=(0,l.ND4)("nav"),r=(0,l.ND4)("div"),o=(0,l.ND4)("div"),s=(0,l.ND4)("input"),i=(0,l.xem)(),c=(0,l.ND4)("label"),u=(0,l.QQy)("svg"),p=(0,l.xem)(),(0,l.N0i)(m.$$.fragment),g=(0,l.xem)(),(0,l.N0i)(y.$$.fragment),v=(0,l.xem)(),T&&T.c(),h=(0,l.xem)(),C=(0,l.ND4)("button"),w=(0,l.QQy)("svg"),q=(0,l.xem)(),U.block.c(),(0,l.CFu)(s,"type","text"),(0,l.CFu)(s,"name","filter"),(0,l.CFu)(c,"for","filter"),(0,l.CFu)(o,"class","filter me-3"),(0,l.CFu)(C,"class","btn btn-link text-white ms-auto"),(0,l.CFu)(C,"tabindex","0"),(0,l.CFu)(r,"class","toolBar navbar svelte-jgy3q8"),(0,l.CFu)(n,"class","content-browser svelte-jgy3q8"),(0,l.CFu)(t,"class","content-browser-position-wrapper svelte-jgy3q8")},m(a,f){(0,l.Yry)(a,t,f),(0,l.BCw)(t,n),(0,l.BCw)(n,r),(0,l.BCw)(r,o),(0,l.BCw)(o,s),(0,l.BCw)(o,i),(0,l.BCw)(o,c),(0,l.BCw)(c,u),(0,l.BCw)(r,p),(0,l.wSR)(m,r,null),(0,l.BCw)(r,g),(0,l.wSR)(y,r,null),(0,l.BCw)(r,v),T&&T.m(r,null),(0,l.BCw)(r,h),(0,l.BCw)(r,C),(0,l.BCw)(C,w),(0,l.BCw)(n,q),U.block.m(n,U.anchor=null),U.mount=()=>n,U.anchor=null,N=!0,F||(I=[(0,l.KTR)(s,"input",e[28]),(0,l.hGc)(A=d.qz.call(null,u,{iconName:"search"})),(0,l.hGc)(b=d.qz.call(null,w,{iconName:"x-circle"})),(0,l.KTR)(C,"click",(0,l.xZN)(e[30])),(0,l.KTR)(n,"introend",e[39]),(0,l.hGc)(D=d.EO.call(null,n)),(0,l.KTR)(n,"click_outside",e[24])],F=!0)},p(t,n){(e=t)[6].uploadEnabled?T?T.p(e,n):(T=L(e),T.c(),T.m(r,h)):T&&(T.d(1),T=null),U.ctx=e,2&n[0]&&x!==(x=e[1])&&(0,l.vBd)(x,U)||(0,l._6B)(U,e,n)},i(t){N||((0,l.c7F)(m.$$.fragment,t),(0,l.c7F)(y.$$.fragment,t),t&&(0,l.Dti)((()=>{N&&(j||(j=(0,l.h86)(n,a._J,{x:e[14]/100*94,opacity:1},!0)),j.run(1))})),N=!0)},o(t){(0,l.Tn8)(m.$$.fragment,t),(0,l.Tn8)(y.$$.fragment,t),t&&(j||(j=(0,l.h86)(n,a._J,{x:e[14]/100*94,opacity:1},!1)),j.run(0)),N=!1},d(e){e&&(0,l.YoD)(t),(0,l.Hbl)(m),(0,l.Hbl)(y),T&&T.d(),U.block.d(),U.token=null,U=null,e&&j&&j.end(),F=!1,(0,l.oOW)(I)}}}function L(e){let t,n,r,o,s,i,a,u,A=(0,c.Ay)("upload to ${current_path}",{current_path:e[2]})+"";return{c(){t=(0,l.ND4)("div"),n=(0,l.ND4)("button"),r=(0,l.QQy)("svg"),s=(0,l.xem)(),i=(0,l.Qq7)(A),(0,l.CFu)(n,"type","button"),(0,l.CFu)(n,"class","upload btn btn-outline-light btn-sm"),(0,l.CFu)(n,"tabindex","0"),(0,l.CFu)(t,"class","ms-2")},m(c,A){(0,l.Yry)(c,t,A),(0,l.BCw)(t,n),(0,l.BCw)(n,r),(0,l.BCw)(n,s),(0,l.BCw)(n,i),a||(u=[(0,l.hGc)(o=d.qz.call(null,r,{iconName:"upload"})),(0,l.KTR)(n,"keydown",e[15]),(0,l.KTR)(n,"click",e[15])],a=!0)},p(e,t){4&t[0]&&A!==(A=(0,c.Ay)("upload to ${current_path}",{current_path:e[2]})+"")&&(0,l.iQh)(i,A)},d(e){e&&(0,l.YoD)(t),a=!1,(0,l.oOW)(u)}}}function G(e){let t,n,r=e[54].message+"";return{c(){t=(0,l.ND4)("p"),n=(0,l.Qq7)(r),(0,l.hgi)(t,"color","red")},m(e,r){(0,l.Yry)(e,t,r),(0,l.BCw)(t,n)},p(e,t){2&t[0]&&r!==(r=e[54].message+"")&&(0,l.iQh)(n,r)},d(e){e&&(0,l.YoD)(t)}}}function W(e){let t,n,r,o,s=[],i=new Map,a=(0,l.rv_)(e[47]);const c=e=>e[48].path;for(let t=0;t<a.length;t+=1){let n=E(e,a,t),l=c(n);i.set(l,s[t]=ie(l,n))}let u=e[5]?.UID&&1==e[0].length&&ae(e),A=e[0].length>1&&Ae(e),d=e[4]&&de(e);return{c(){t=(0,l.ND4)("div");for(let e=0;e<s.length;e+=1)s[e].c();n=(0,l.xem)(),u&&u.c(),r=(0,l.xem)(),A&&A.c(),o=(0,l.xem)(),d&&d.c(),(0,l.CFu)(t,"class","levelColumns svelte-jgy3q8")},m(e,i){(0,l.Yry)(e,t,i);for(let e=0;e<s.length;e+=1)s[e]&&s[e].m(t,null);(0,l.BCw)(t,n),u&&u.m(t,null),(0,l.BCw)(t,r),A&&A.m(t,null),(0,l.BCw)(t,o),d&&d.m(t,null)},p(e,p){169541699&p[0]&&(a=(0,l.rv_)(e[47]),s=(0,l.l7s)(s,p,c,1,e,a,i,t,l.n_k,ie,n,E)),e[5]?.UID&&1==e[0].length?u?u.p(e,p):(u=ae(e),u.c(),u.m(t,r)):u&&(u.d(1),u=null),e[0].length>1?A?A.p(e,p):(A=Ae(e),A.c(),A.m(t,o)):A&&(A.d(1),A=null),e[4]?d||(d=de(e),d.c(),d.m(t,null)):d&&(d.d(1),d=null)},d(e){e&&(0,l.YoD)(t);for(let e=0;e<s.length;e+=1)s[e].d();u&&u.d(),A&&A.d(),d&&d.d()}}}function M(e){let t,n,r,o,s;return{c(){t=(0,l.ND4)("button"),n=(0,l.QQy)("svg"),(0,l.CFu)(t,"type","button"),(0,l.CFu)(t,"class","btn btn-link btn-xs ps-0 svelte-jgy3q8"),(0,l.CFu)(t,"tabindex","0")},m(i,a){(0,l.Yry)(i,t,a),(0,l.BCw)(t,n),o||(s=[(0,l.hGc)(r=d.qz.call(null,n,{iconName:"house"})),(0,l.KTR)(t,"keydown",e[31]),(0,l.KTR)(t,"click",e[32])],o=!0)},p:l.lQ1,d(e){e&&(0,l.YoD)(t),o=!1,(0,l.oOW)(s)}}}function J(e){let t,n,r,o,s,i,a=(0,c.Ay)("select ${level_path}",{level_path:e[48].Title})+"";function u(){return e[33](e[48])}return{c(){t=(0,l.ND4)("button"),n=(0,l.Qq7)(a),(0,l.CFu)(t,"class","btn btn-primary btn-xs svelte-jgy3q8"),(0,l.CFu)(t,"title",r=e[48].displayPath),t.disabled=o=!e[25](e[48])},m(e,r){(0,l.Yry)(e,t,r),(0,l.BCw)(t,n),s||(i=(0,l.KTR)(t,"click",(0,l.xZN)(u)),s=!0)},p(s,i){e=s,2&i[0]&&a!==(a=(0,c.Ay)("select ${level_path}",{level_path:e[48].Title})+"")&&(0,l.iQh)(n,a),2&i[0]&&r!==(r=e[48].displayPath)&&(0,l.CFu)(t,"title",r),2&i[0]&&o!==(o=!e[25](e[48]))&&(t.disabled=o)},d(e){e&&(0,l.YoD)(t),s=!1,i()}}}function V(e){let t,n,r,o,s;function i(){return e[35](e[48],e[49],e[50])}return{c(){t=(0,l.ND4)("button"),n=(0,l.QQy)("svg"),(0,l.CFu)(t,"class","btn btn-link btn-xs grid-view svelte-jgy3q8")},m(e,a){(0,l.Yry)(e,t,a),(0,l.BCw)(t,n),o||(s=[(0,l.hGc)(r=d.qz.call(null,n,{iconName:"list"})),(0,l.KTR)(t,"click",i)],o=!0)},p(t,n){e=t},d(e){e&&(0,l.YoD)(t),o=!1,(0,l.oOW)(s)}}}function Z(e){let t,n,r,o,s;function i(){return e[34](e[48],e[49],e[50])}return{c(){t=(0,l.ND4)("button"),n=(0,l.QQy)("svg"),(0,l.CFu)(t,"class","btn btn-link btn-xs grid-view svelte-jgy3q8")},m(e,a){(0,l.Yry)(e,t,a),(0,l.BCw)(t,n),o||(s=[(0,l.hGc)(r=d.qz.call(null,n,{iconName:"grid"})),(0,l.KTR)(t,"click",i)],o=!0)},p(t,n){e=t},d(e){e&&(0,l.YoD)(t),o=!1,(0,l.oOW)(s)}}}function H(e){let t,n,r,o,s,i,a,c,u,A=e[51].Title+"",p="search"==e[6].mode&&ee(e);return{c(){t=(0,l.ND4)("div"),n=(0,l.QQy)("svg"),o=(0,l.xem)(),s=(0,l.Qq7)(A),i=(0,l.xem)(),p&&p.c(),(0,l.CFu)(t,"class","item-title svelte-jgy3q8"),(0,l.CFu)(t,"title",a=e[51].portal_type+": "+e[51].Title)},m(a,A){(0,l.Yry)(a,t,A),(0,l.BCw)(t,n),(0,l.BCw)(t,o),(0,l.BCw)(t,s),(0,l.BCw)(t,i),p&&p.m(t,null),c||(u=(0,l.hGc)(r=d.qz.call(null,n,{iconName:`contenttype/${e[51].portal_type.toLowerCase().replace(/\.| /g,"-")}`})),c=!0)},p(n,o){e=n,r&&(0,l.Qk1)(r.update)&&2&o[0]&&r.update.call(null,{iconName:`contenttype/${e[51].portal_type.toLowerCase().replace(/\.| /g,"-")}`}),2&o[0]&&A!==(A=e[51].Title+"")&&(0,l.iQh)(s,A),"search"==e[6].mode?p?p.p(e,o):(p=ee(e),p.c(),p.m(t,null)):p&&(p.d(1),p=null),2&o[0]&&a!==(a=e[51].portal_type+": "+e[51].Title)&&(0,l.CFu)(t,"title",a)},d(e){e&&(0,l.YoD)(t),p&&p.d(),c=!1,u()}}}function X(e){let t,n,r,o=e[51].Title+"";function s(e,t){return e[51].getIcon?ne:te}let i=s(e),a=i(e);return{c(){t=(0,l.ND4)("div"),a.c(),n=(0,l.xem)(),r=(0,l.Qq7)(o),(0,l.CFu)(t,"class","grid-preview svelte-jgy3q8")},m(e,o){(0,l.Yry)(e,t,o),a.m(t,null),(0,l.BCw)(t,n),(0,l.BCw)(t,r)},p(e,c){i===(i=s(e))&&a?a.p(e,c):(a.d(1),a=i(e),a&&(a.c(),a.m(t,n))),2&c[0]&&o!==(o=e[51].Title+"")&&(0,l.iQh)(r,o)},d(e){e&&(0,l.YoD)(t),a.d()}}}function ee(e){let t,n,r,o=e[51].path+"";return{c(){t=(0,l.ND4)("br"),n=(0,l.ND4)("span"),r=(0,l.Qq7)(o),(0,l.CFu)(n,"class","small")},m(e,o){(0,l.Yry)(e,t,o),(0,l.Yry)(e,n,o),(0,l.BCw)(n,r)},p(e,t){2&t[0]&&o!==(o=e[51].path+"")&&(0,l.iQh)(r,o)},d(e){e&&((0,l.YoD)(t),(0,l.YoD)(n))}}}function te(e){let t,n,r,o;return{c(){t=(0,l.QQy)("svg")},m(s,i){(0,l.Yry)(s,t,i),r||(o=(0,l.hGc)(n=d.qz.call(null,t,{iconName:`contenttype/${e[51].portal_type.toLowerCase().replace(/\.| /g,"-")}`})),r=!0)},p(t,r){e=t,n&&(0,l.Qk1)(n.update)&&2&r[0]&&n.update.call(null,{iconName:`contenttype/${e[51].portal_type.toLowerCase().replace(/\.| /g,"-")}`})},d(e){e&&(0,l.YoD)(t),r=!1,o()}}}function ne(e){let t,n,r;return{c(){t=(0,l.ND4)("img"),(0,l.mq_)(t.src,n=`${e[51].getURL}/@@images/image/thumb`)||(0,l.CFu)(t,"src",n),(0,l.CFu)(t,"alt",r=e[51].Title),(0,l.CFu)(t,"class","svelte-jgy3q8")},m(e,n){(0,l.Yry)(e,t,n)},p(e,o){2&o[0]&&!(0,l.mq_)(t.src,n=`${e[51].getURL}/@@images/image/thumb`)&&(0,l.CFu)(t,"src",n),2&o[0]&&r!==(r=e[51].Title)&&(0,l.CFu)(t,"alt",r)},d(e){e&&(0,l.YoD)(t)}}}function le(e){let t,n,r,o,s;return{c(){t=(0,l.ND4)("div"),n=(0,l.QQy)("svg"),(0,l.CFu)(t,"class","browseSub svelte-jgy3q8")},m(e,i){(0,l.Yry)(e,t,i),(0,l.BCw)(t,n),o||(s=(0,l.hGc)(r=d.qz.call(null,n,{iconName:"arrow-right-circle"})),o=!0)},d(e){e&&(0,l.YoD)(t),o=!1,s()}}}function re(e){let t,n,r,o,s,i,a;function c(e,t){return e[48].gridView?X:H}let u=c(e),A=u(e),d=e[51].is_folderish&&"browse"==e[6].mode&&le();function p(...t){return e[36](e[51],...t)}function m(...t){return e[37](e[51],...t)}return{c(){t=(0,l.ND4)("div"),A.c(),n=(0,l.xem)(),d&&d.c(),(0,l.CFu)(t,"class",r="contentItem"+(e[53]%2==0?" odd":" even")+(e[27](e[51])?" inPath":"")+(-1!=e[0].indexOf(e[51].UID)?" selectedItem":"")+(e[25](e[51])?"":" text-muted")+" svelte-jgy3q8"),(0,l.CFu)(t,"role","button"),(0,l.CFu)(t,"tabindex",o=e[53]),(0,l.CFu)(t,"data-uuid",s=e[51].UID)},m(e,r){(0,l.Yry)(e,t,r),A.m(t,null),(0,l.BCw)(t,n),d&&d.m(t,null),i||(a=[(0,l.KTR)(t,"keydown",(0,l.xZN)(p)),(0,l.KTR)(t,"click",m)],i=!0)},p(o,i){u===(u=c(e=o))&&A?A.p(e,i):(A.d(1),A=u(e),A&&(A.c(),A.m(t,n))),e[51].is_folderish&&"browse"==e[6].mode?d||(d=le(),d.c(),d.m(t,null)):d&&(d.d(1),d=null),3&i[0]&&r!==(r="contentItem"+(e[53]%2==0?" odd":" even")+(e[27](e[51])?" inPath":"")+(-1!=e[0].indexOf(e[51].UID)?" selectedItem":"")+(e[25](e[51])?"":" text-muted")+" svelte-jgy3q8")&&(0,l.CFu)(t,"class",r),2&i[0]&&s!==(s=e[51].UID)&&(0,l.CFu)(t,"data-uuid",s)},d(e){e&&(0,l.YoD)(t),A.d(),d&&d.d(),i=!1,(0,l.oOW)(a)}}}function oe(e){let t,n,r,o,s,i,a;return{c(){t=(0,l.ND4)("div"),n=(0,l.ND4)("div"),(0,l.CFu)(n,"class","spinner-border"),(0,l.CFu)(n,"role","status"),(0,l.CFu)(t,"class","loadmore svelte-jgy3q8"),(0,l.CFu)(t,"data-level-path",r=e[48].path),(0,l.CFu)(t,"data-level-next-page",o=parseInt(e[48].page)+1)},m(r,o){(0,l.Yry)(r,t,o),(0,l.BCw)(t,n),i||(a=(0,l.hGc)(s=e[29].call(null,t)),i=!0)},p(e,n){2&n[0]&&r!==(r=e[48].path)&&(0,l.CFu)(t,"data-level-path",r),2&n[0]&&o!==(o=parseInt(e[48].page)+1)&&(0,l.CFu)(t,"data-level-next-page",o)},d(e){e&&(0,l.YoD)(t),i=!1,a()}}}function se(e){let t,n;return{c(){t=(0,l.ND4)("div"),n=(0,l.ND4)("p"),n.textContent=`${(0,c.Ay)("no results found")}`,(0,l.CFu)(n,"class","svelte-jgy3q8"),(0,l.CFu)(t,"class","contentItem svelte-jgy3q8")},m(e,r){(0,l.Yry)(e,t,r),(0,l.BCw)(t,n)},d(e){e&&(0,l.YoD)(t)}}}function ie(e,t){let n,r,o,s,i,c,u,A,d,p,m,g=0==t[50]&&"browse"==t[6].mode&&M(t),y=t[48].selectable&&J(t);function v(e,t){return e[48].gridView?V:Z}let h=v(t),C=h(t),f=(0,l.rv_)(t[48].results||[]),w=[];for(let e=0;e<f.length;e+=1)w[e]=re(K(t,f,e));let b=t[48].more&&oe(t),q=0==t[48].total&&se();return{key:e,first:null,c(){n=(0,l.ND4)("div"),r=(0,l.ND4)("div"),g&&g.c(),o=(0,l.xem)(),y&&y.c(),s=(0,l.xem)(),i=(0,l.ND4)("div"),C.c(),c=(0,l.xem)(),u=(0,l.ND4)("div");for(let e=0;e<w.length;e+=1)w[e].c();A=(0,l.xem)(),b&&b.c(),d=(0,l.xem)(),q&&q.c(),(0,l.CFu)(i,"class","levelActions svelte-jgy3q8"),(0,l.CFu)(r,"class","levelToolbar svelte-jgy3q8"),(0,l.CFu)(u,"class","levelItems svelte-jgy3q8"),(0,l.CFu)(n,"class",p="levelColumn"+(t[50]%2==0?" odd":" even")+" svelte-jgy3q8"),this.first=n},m(e,t){(0,l.Yry)(e,n,t),(0,l.BCw)(n,r),g&&g.m(r,null),(0,l.BCw)(r,o),y&&y.m(r,null),(0,l.BCw)(r,s),(0,l.BCw)(r,i),C.m(i,null),(0,l.BCw)(n,c),(0,l.BCw)(n,u);for(let e=0;e<w.length;e+=1)w[e]&&w[e].m(u,null);(0,l.BCw)(u,A),b&&b.m(u,null),(0,l.BCw)(u,d),q&&q.m(u,null)},p(e,a){if(0==(t=e)[50]&&"browse"==t[6].mode?g?g.p(t,a):(g=M(t),g.c(),g.m(r,o)):g&&(g.d(1),g=null),t[48].selectable?y?y.p(t,a):(y=J(t),y.c(),y.m(r,s)):y&&(y.d(1),y=null),h===(h=v(t))&&C?C.p(t,a):(C.d(1),C=h(t),C&&(C.c(),C.m(i,null))),168427587&a[0]){let e;for(f=(0,l.rv_)(t[48].results||[]),e=0;e<f.length;e+=1){const n=K(t,f,e);w[e]?w[e].p(n,a):(w[e]=re(n),w[e].c(),w[e].m(u,A))}for(;e<w.length;e+=1)w[e].d(1);w.length=f.length}t[48].more?b?b.p(t,a):(b=oe(t),b.c(),b.m(u,d)):b&&(b.d(1),b=null),0==t[48].total?q||(q=se(),q.c(),q.m(u,null)):q&&(q.d(1),q=null),2&a[0]&&p!==(p="levelColumn"+(t[50]%2==0?" odd":" even")+" svelte-jgy3q8")&&(0,l.CFu)(n,"class",p)},i(e){e&&(m||(0,l.Dti)((()=>{m=(0,l.b7f)(n,a._J,{duration:300}),m.start()})))},o:l.lQ1,d(e){e&&(0,l.YoD)(n),g&&g.d(),y&&y.d(),C.d(),(0,l.ppq)(w,e),b&&b.d(),q&&q.d()}}}function ae(e){let t,n,r,o,s,i,a,u,A,d,p,m,g,y,v,h=(0,c.Ay)("select ${preview_path}",{preview_path:e[5].path.split("/").pop()})+"",C=e[5].Title+"",f=e[5].Description+"";function w(e,t){return e[5].getIcon?ue:ce}let b=w(e),q=b(e);return{c(){t=(0,l.ND4)("div"),n=(0,l.ND4)("div"),r=(0,l.ND4)("button"),o=(0,l.Qq7)(h),i=(0,l.xem)(),a=(0,l.ND4)("div"),q.c(),u=(0,l.xem)(),A=(0,l.ND4)("h4"),d=(0,l.Qq7)(C),p=(0,l.xem)(),m=(0,l.ND4)("p"),g=(0,l.Qq7)(f),(0,l.CFu)(r,"class","btn btn-primary btn-xs svelte-jgy3q8"),r.disabled=s=!e[25](e[5]),(0,l.CFu)(n,"class","levelToolbar svelte-jgy3q8"),(0,l.CFu)(A,"class","svelte-jgy3q8"),(0,l.CFu)(a,"class","info svelte-jgy3q8"),(0,l.CFu)(t,"class","preview svelte-jgy3q8")},m(s,c){(0,l.Yry)(s,t,c),(0,l.BCw)(t,n),(0,l.BCw)(n,r),(0,l.BCw)(r,o),(0,l.BCw)(t,i),(0,l.BCw)(t,a),q.m(a,null),(0,l.BCw)(a,u),(0,l.BCw)(a,A),(0,l.BCw)(A,d),(0,l.BCw)(a,p),(0,l.BCw)(a,m),(0,l.BCw)(m,g),y||(v=(0,l.KTR)(r,"click",(0,l.xZN)(e[38])),y=!0)},p(e,t){32&t[0]&&h!==(h=(0,c.Ay)("select ${preview_path}",{preview_path:e[5].path.split("/").pop()})+"")&&(0,l.iQh)(o,h),32&t[0]&&s!==(s=!e[25](e[5]))&&(r.disabled=s),b===(b=w(e))&&q?q.p(e,t):(q.d(1),q=b(e),q&&(q.c(),q.m(a,u))),32&t[0]&&C!==(C=e[5].Title+"")&&(0,l.iQh)(d,C),32&t[0]&&f!==(f=e[5].Description+"")&&(0,l.iQh)(g,f)},d(e){e&&(0,l.YoD)(t),q.d(),y=!1,v()}}}function ce(e){let t,n,r,o,s;return{c(){t=(0,l.ND4)("div"),n=(0,l.QQy)("svg"),(0,l.CFu)(n,"class","svelte-jgy3q8"),(0,l.CFu)(t,"class","previewIcon svelte-jgy3q8")},m(i,a){(0,l.Yry)(i,t,a),(0,l.BCw)(t,n),o||(s=(0,l.hGc)(r=d.qz.call(null,n,{iconName:`contenttype/${e[5].portal_type.toLowerCase().replace(/\.| /g,"-")}`})),o=!0)},p(e,t){r&&(0,l.Qk1)(r.update)&&32&t[0]&&r.update.call(null,{iconName:`contenttype/${e[5].portal_type.toLowerCase().replace(/\.| /g,"-")}`})},d(e){e&&(0,l.YoD)(t),o=!1,s()}}}function ue(e){let t,n,r,o;return{c(){t=(0,l.ND4)("div"),n=(0,l.ND4)("img"),(0,l.mq_)(n.src,r=e[5].getURL+"/@@images/image/preview")||(0,l.CFu)(n,"src",r),(0,l.CFu)(n,"alt",o=e[5].Title),(0,l.CFu)(n,"class","svelte-jgy3q8"),(0,l.CFu)(t,"class","previewImage")},m(e,r){(0,l.Yry)(e,t,r),(0,l.BCw)(t,n)},p(e,t){32&t[0]&&!(0,l.mq_)(n.src,r=e[5].getURL+"/@@images/image/preview")&&(0,l.CFu)(n,"src",r),32&t[0]&&o!==(o=e[5].Title)&&(0,l.CFu)(n,"alt",o)},d(e){e&&(0,l.YoD)(t)}}}function Ae(e){let t,n,r,o,s,i,a,u,A;return{c(){t=(0,l.ND4)("div"),n=(0,l.ND4)("div"),r=(0,l.ND4)("button"),r.textContent=`${(0,c.Ay)("add selected items")}`,o=(0,l.xem)(),s=(0,l.ND4)("div"),i=(0,l.QQy)("svg"),(0,l.CFu)(r,"class","btn btn-primary btn-xs svelte-jgy3q8"),(0,l.CFu)(n,"class","levelToolbar svelte-jgy3q8"),(0,l.CFu)(i,"class","svelte-jgy3q8"),(0,l.CFu)(s,"class","info svelte-jgy3q8"),(0,l.CFu)(t,"class","preview svelte-jgy3q8")},m(c,p){(0,l.Yry)(c,t,p),(0,l.BCw)(t,n),(0,l.BCw)(n,r),(0,l.BCw)(t,o),(0,l.BCw)(t,s),(0,l.BCw)(s,i),u||(A=[(0,l.KTR)(r,"click",(0,l.xZN)(e[21])),(0,l.hGc)(a=d.qz.call(null,i,{iconName:"files"}))],u=!0)},p:l.lQ1,d(e){e&&(0,l.YoD)(t),u=!1,(0,l.oOW)(A)}}}function de(e){let t;return{c(){t=(0,l.ND4)("div"),(0,l.CFu)(t,"class","upload-wrapper svelte-jgy3q8")},m(e,n){(0,l.Yry)(e,t,n)},d(e){e&&(0,l.YoD)(t)}}}function pe(e){let t;return{c(){t=(0,l.ND4)("p"),t.textContent=`${(0,c.Ay)("loading content items")}`},m(e,n){(0,l.Yry)(e,t,n)},p:l.lQ1,d(e){e&&(0,l.YoD)(t)}}}function me(e){let t,n,r=e[3]&&O(e);return{c(){r&&r.c(),t=(0,l.Iex)()},m(e,o){r&&r.m(e,o),(0,l.Yry)(e,t,o),n=!0},p(e,n){e[3]?r?(r.p(e,n),8&n[0]&&(0,l.c7F)(r,1)):(r=O(e),r.c(),(0,l.c7F)(r,1),r.m(t.parentNode,t)):r&&((0,l.V44)(),(0,l.Tn8)(r,1,1,(()=>{r=null})),(0,l.GYV)())},i(e){n||((0,l.c7F)(r),n=!0)},o(e){(0,l.Tn8)(r),n=!1},d(e){e&&(0,l.YoD)(t),r&&r.d(e)}}}function ge(e,t,n){let r,a,c,A,m,g,y;i.ih({scrollX:!0,container:".levelColumns",duration:500});const v=(0,o.SD)("currentPath");(0,l.j0C)(e,v,(e=>n(2,c=e)));const h=(0,o.SD)("config");(0,l.j0C)(e,h,(e=>n(6,m=e)));const C=(0,o.SD)("pathCache"),f=(0,o.SD)("showContentBrowser");(0,l.j0C)(e,f,(e=>n(3,A=e)));const w=(0,o.SD)("selectedItems");(0,l.j0C)(e,w,(e=>n(43,y=e)));const b=(0,o.SD)("selectedUids");(0,l.j0C)(e,b,(e=>n(42,g=e)));const q=(0,o.SD)("previewUids");(0,l.j0C)(e,q,(e=>n(0,r=e)));const x=p(m,C);(0,l.j0C)(e,x,(e=>n(1,a=e)));let D=!1,j={},B=!1,N=!1,F=Math.max(document.documentElement.clientWidth||0,window.innerWidth||0);function I({data:e=null,uuid:t=null,action:o="show"}){if(e&&"show"==o)n(5,j=e),(0,l.vu6)(q,r=[e.UID],r);else if(t&&"add"==o&&-1===r.indexOf(t)){if(m.maximumSelectionSize>0&&r.length>=m.maximumSelectionSize)return;(0,l.vu6)(q,r=[...r,t],r)}else t&&"remove"==o&&-1!==r.indexOf(t)?q.update((e=>(e.splice(e.indexOf(t),1),e))):"clear"==o&&(n(5,j={}),(0,l.vu6)(q,r=[],r))}function T(e,t){n(4,D=!1),I({action:"clear"}),"/"!==e&&e!==m.rootPath?function(e){if("search"==m.mode)I({data:e});else if(e.is_folderish)(0,l.vu6)(q,r=[e.UID],r),v.set(e.path);else{const t=e.path.split("/"),n=t.slice(0,t.length-1).join("/");v.set(n||m.rootPath),I({data:e})}P()}(e):v.set(m.rootPath)}function U(e,t){B||(B=!0);const n=t.currentTarget.closest(".levelItems"),l=n.querySelectorAll(".selectedItem");if(l.length&&1!=m.maximumSelectionSize)if(N||t?.shiftKey){let t=!1;for(const l of n.children){if(-1!==[e.UID,j.UID].indexOf(l.dataset.uuid)){if(t){I({uuid:l.dataset.uuid,action:"add"}),t=!1;continue}t=!0}I({uuid:l.dataset.uuid,action:t?"add":"remove"})}}else t?.metaKey||t?.ctrlKey?I({uuid:e.UID,action:-1==r.indexOf(e.UID)?"add":"remove"}):([...l].map((e=>e.classList.remove("selectedItem"))),T(e));else T(e);t.currentTarget.focus(),t.currentTarget.classList.add("selectedItem")}function Y(){if(B)return;const e=[...document.querySelectorAll(".levelColumn .inPath"),...document.querySelectorAll(".levelColumn .selectedItem")];!e.length&&document.querySelector(".levelColumn .contentItem")&&e.push(document.querySelector(".levelColumn .contentItem")),e.length&&(B=!0,e[0].focus())}function k(e,t){const n=t.currentTarget;if(N=t.shiftKey,"Escape"==t.key&&Q(),"ArrowDown"==t.key&&n?.nextElementSibling?.classList.contains("contentItem")&&n.nextElementSibling.click(),"ArrowUp"==t.key&&n?.previousElementSibling?.classList.contains("contentItem")&&n.previousElementSibling.click(),"ArrowRight"==t.key){const e=t.target.closest(".levelColumn"),n=e?.nextElementSibling;if(!n||!n.classList.contains("levelColumn"))return;n.querySelector(".contentItem")?.click()}if("ArrowLeft"==t.key){const e=t.target.closest(".levelColumn"),n=e?.previousElementSibling;if(!n||!n.classList.contains("levelColumn"))return;n.querySelector(".inPath").click()}"Space"==t.key&&U(e,t),"Enter"==t.key&&_(e)&&(1==m.maximumSelectionSize?S(e):$())}async function S(e){1==m.maximumSelectionSize?(w.set([e]),b.set([e.UID])):(w.update((t=>[...t,e])),b.update((()=>y.map((e=>e.UID))))),(0,d.r1)(e,m),I({action:"clear"}),(0,l.vu6)(f,A=!1,A),B=!1}async function $(){const e=await(0,d.x6)(r,m);w.update((t=>{for(const n of e)-1==g.indexOf(n.UID)&&t.push(n);return t})),b.update((()=>y.map((e=>e.UID)))),I({action:"clear"}),(0,l.vu6)(f,A=!1,A),B=!1}function Q(){(0,l.vu6)(f,A=!1,A),B=!1,I({action:"clear"})}function _(e){return-1===g.indexOf(e.UID)}function P(){const e=document.querySelector(".levelColumns");e&&i.VG({x:e.scrollWidth+100})}const z=s.A.debounce((e=>{x.get({path:c,searchTerm:e.target.value})}),300);return e.$$.update=()=>{12&e.$$.dirty[0]&&A&&x.get({path:c}),2&e.$$.dirty[0]&&P(),e.$$.dirty[0]},[r,a,c,A,D,j,m,v,h,f,w,b,q,x,F,async function(){I({action:"clear"}),n(4,D=!0),await s.A.timeout(1);const e=document.querySelector(".upload-wrapper");e.classList.add("pat-upload"),new u.default(e,{baseUrl:m.rootUrl,currentPath:c,relativePath:"@@fileUpload",allowPathSelection:!1,hiddenInputContainer:".upload-wrapper",success:(e,t)=>{x.get({path:c,updateCache:!0})}})},T,U,Y,k,S,$,function(e){S(e.detail.item)},async function(e){const t=e.detail.item.path,n=await(0,d.Em)({vocabularyUrl:m.vocabularyUrl,attributes:m.attributes,levelInfoPath:t});if(!n.total)return void alert(`${t} not found!`);const l=n.results[0];l.path||(l.path=m.rootPath),T(l)},Q,_,P,function(e){return"browse"==m.mode&&-1!=c.indexOf(e.path)},z,function(e){const t=new IntersectionObserver((t=>{for(const n of t)if(n.isIntersecting){const t=e.dataset.levelPath,n=parseInt(e.dataset.levelNextPage);x.get({loadMorePath:t,page:n})}}),{threshold:0,root:null,margin:"0px"});window.setTimeout((()=>{t.observe(e)}),500)},()=>Q(),()=>T(m.rootPath),()=>T(m.rootPath),e=>S(e),(e,t,n)=>(0,l.vu6)(x,t[n].gridView=!0,a),(e,t,n)=>(0,l.vu6)(x,t[n].gridView=!1,a),(e,t)=>k(e,t),(e,t)=>U(e,t),()=>S(j),()=>{P(),Y()}]}class ye extends l.r7T{constructor(e){super(),(0,l.TsN)(this,e,ge,me,l.jXN,{},null,[-1,-1])}}var ve=ye,he=n(64708),Ce=n.n(he),fe=n(44563),we=n(58621),be=n.n(we),qe=n(19394),xe={};xe.styleTagTransform=P(),xe.setAttributes=S(),xe.insert=Y(),xe.domAPI=T(),xe.insertStyleElement=Q();F()(qe.A,xe),qe.A&&qe.A.locals&&qe.A.locals;function De(e,t,n){const l=e.slice();return l[21]=t[n],l[23]=n,l}function je(e){let t,n=[],r=new Map,o=(0,l.rv_)(e[0]);const s=e=>e[21].UID;for(let t=0;t<o.length;t+=1){let l=De(e,o,t),i=s(l);r.set(i,n[t]=Be(i,l))}return{c(){for(let e=0;e<n.length;e+=1)n[e].c();t=(0,l.Iex)()},m(e,r){for(let t=0;t<n.length;t+=1)n[t]&&n[t].m(e,r);(0,l.Yry)(e,t,r)},p(e,i){1&i&&(o=(0,l.rv_)(e[0]),n=(0,l.l7s)(n,i,s,1,e,o,r,t.parentNode,l.n_k,Be,t,De))},d(e){e&&(0,l.YoD)(t);for(let t=0;t<n.length;t+=1)n[t].d(e)}}}function Be(e,t){let n,r,o,s;return{key:e,first:null,c(){n=(0,l.ND4)("div"),this.first=n},m(e,i){(0,l.Yry)(e,n,i),o||(s=(0,l.hGc)(r=t[7].call(null,n,{idx:t[23],item:t[21]})),o=!0)},p(e,n){t=e,r&&(0,l.Qk1)(r.update)&&1&n&&r.update.call(null,{idx:t[23],item:t[21]})},d(e){e&&(0,l.YoD)(n),o=!1,s()}}}function Ne(e){let t;return{c(){t=(0,l.ND4)("p"),t.textContent=`${(0,c.Ay)("loading selected items")}`},m(e,n){(0,l.Yry)(e,t,n)},d(e){e&&(0,l.YoD)(t)}}}function Fe(e){let t,n,r,o,s,i,a,u=e[0]&&je(e),A=!e[0]&&Ne();return{c(){t=(0,l.ND4)("div"),n=(0,l.ND4)("div"),u&&u.c(),r=(0,l.xem)(),A&&A.c(),o=(0,l.xem)(),s=(0,l.ND4)("a"),s.textContent=`${(0,c.Ay)("Select")}`,(0,l.CFu)(n,"class","content-browser-selected-items svelte-awokap"),(0,l.CFu)(s,"class","btn btn-primary"),(0,l.CFu)(s,"href","#"),(0,l.hgi)(s,"border-radius","0 var(--bs-border-radius) var(--bs-border-radius) 0"),(0,l.CFu)(t,"class","content-browser-selected-items-wrapper svelte-awokap"),(0,l.hgi)(t,"width",e[2].width||"auto")},m(c,d){(0,l.Yry)(c,t,d),(0,l.BCw)(t,n),u&&u.m(n,null),(0,l.BCw)(n,r),A&&A.m(n,null),(0,l.BCw)(t,o),(0,l.BCw)(t,s),e[11](t),i||(a=[(0,l.KTR)(n,"click",e[9]),(0,l.KTR)(s,"click",(0,l.xZN)(e[10]))],i=!0)},p(e,[o]){e[0]?u?u.p(e,o):(u=je(e),u.c(),u.m(n,r)):u&&(u.d(1),u=null),e[0]?A&&(A.d(1),A=null):A||(A=Ne(),A.c(),A.m(n,null)),4&o&&(0,l.hgi)(t,"width",e[2].width||"auto")},i:l.lQ1,o:l.lQ1,d(n){n&&(0,l.YoD)(t),u&&u.d(),A&&A.d(),e[11](null),i=!1,(0,l.oOW)(a)}}}function Ie(e,t,n){let r,s,i,a,c=!0;const u=(0,o.SD)("config");(0,l.j0C)(e,u,(e=>n(2,s=e)));const A=s.fieldId,p=document.getElementById(A),m=(0,o.SD)("selectedItems");(0,l.j0C)(e,m,(e=>n(0,r=e)));const g=(0,o.SD)("selectedUids"),y=(0,o.SD)("showContentBrowser");(0,l.j0C)(e,y,(e=>n(3,i=e)));const v=be().getComponent(s.componentRegistryKeys?.selectedItem||"pat-contentbrowser.SelectedItem");function h(){1!==s.maximumSelectionSize&&r.length>1&&Ce().create(p.previousSibling.querySelector(".content-browser-selected-items"),{draggable:".selected-item",animation:200,onUpdate:e=>{let t=[];for(const n of e.target.children)t.push(n.dataset.uuid);C(t)}})}function C(e){const t=e.join(s.separator);p.value=t,p.dispatchEvent(fe.A.change_event())}(0,o.Rc)((async()=>{await async function(){const e=s.selection.length?s.selection:p?.value?p.value.split(s.separator):[];if(!e.length)return;(0,l.vu6)(m,r=await(0,d.x6)(e,s),r),g.update((()=>r.map((e=>e.UID))))}(),h(),n(8,c=!1)})),(0,o.o)("unselectItem",(function(e){m.update((t=>(t.splice(e,1),t))),g.update((()=>r.map((e=>e.UID))))}));return e.$$.update=()=>{257&e.$$.dirty&&(!r.length&&c||(C(function(){let e=[];return r.forEach((t=>{e.push(t.UID)})),e}()),h()))},[r,a,s,i,u,m,y,function(e,t){new v.component({target:e,props:t})},c,()=>(0,l.vu6)(y,i=!r.length,i),()=>(0,l.vu6)(y,i=!0,i),function(e){l.Dnk[e?"unshift":"push"]((()=>{a=e,n(1,a)}))}]}class Te extends l.r7T{constructor(e){super(),(0,l.TsN)(this,e,Ie,Fe,l.jXN,{})}}var Ue=Te;(0,A.T5)(!1);function Ye(e){let t,n,r,o;return t=new ve({}),r=new Ue({}),{c(){(0,l.N0i)(t.$$.fragment),n=(0,l.xem)(),(0,l.N0i)(r.$$.fragment)},m(e,s){(0,l.wSR)(t,e,s),(0,l.Yry)(e,n,s),(0,l.wSR)(r,e,s),o=!0},p:l.lQ1,i(e){o||((0,l.c7F)(t.$$.fragment,e),(0,l.c7F)(r.$$.fragment,e),o=!0)},o(e){(0,l.Tn8)(t.$$.fragment,e),(0,l.Tn8)(r.$$.fragment,e),o=!1},d(e){e&&(0,l.YoD)(n),(0,l.Hbl)(t,e),(0,l.Hbl)(r,e)}}}function ke(e,t,n){let s,i,{maxDepth:a}=t,{width:c}=t,{attributes:u}=t,{contextPath:d}=t,{vocabularyUrl:p}=t,{mode:m="browse"}=t,{rootPath:g=""}=t,{rootUrl:y=""}=t,{basePath:v=""}=t,{selectableTypes:h=[]}=t,{maximumSelectionSize:C=-1}=t,{separator:f}=t,{selection:w=[]}=t,{query:b={}}=t,{fieldId:q}=t,{upload:x}=t,{favorites:D}=t,{recentlyUsed:j}=t,{recentlyUsedKey:B}=t,{recentlyUsedMaxItems:N}=t,{bSize:F=20}=t,{componentRegistryKeys:I={}}=t;const T=r.A.getLogger("pat-contentbrowser");!function(){let e=(0,A.T5)("");(0,o.o)("currentPath",e)}(),function(){let e=(0,A.T5)({});(0,o.o)("config",e)}(),function(){let e=(0,A.T5)({});(0,o.o)("pathCache",e)}(),function(){let e=(0,A.T5)([]);(0,o.o)("selectedItems",e)}(),function(){let e=(0,A.T5)(!1);(0,o.o)("showContentBrowser",e)}(),function(){let e=(0,A.T5)([]);(0,o.o)("selectedUids",e)}(),function(){let e=(0,A.T5)([]);(0,o.o)("previewUids",e)}();const U=(0,o.SD)("currentPath");if((0,l.j0C)(e,U,(e=>n(25,i=e))),!i)if(v||g)(0,l.vu6)(U,i=0!=v.indexOf(g)?g:v,i);else{const e=new URL(p).pathname.split("/");g=d=(0,l.vu6)(U,i=e.slice(0,e.length-1).join("/")||"/",i)}let Y=(0,o.SD)("config");return(0,l.j0C)(e,Y,(e=>n(24,s=e))),(0,l.vu6)(Y,s={mode:m,attributes:u,contextPath:d,vocabularyUrl:p,width:c,maxDepth:a,rootPath:g,rootUrl:y,basePath:v,selectableTypes:h,maximumSelectionSize:C,separator:f,selection:w,query:b,fieldId:q,uploadEnabled:x,favorites:D,recentlyUsed:j,recentlyUsedKey:B,recentlyUsedMaxItems:N,pageSize:F,componentRegistryKeys:I},s),T.debug(`Initialized App<${q}> with config ${JSON.stringify(s)}`),e.$$set=e=>{"maxDepth"in e&&n(4,a=e.maxDepth),"width"in e&&n(5,c=e.width),"attributes"in e&&n(6,u=e.attributes),"contextPath"in e&&n(2,d=e.contextPath),"vocabularyUrl"in e&&n(7,p=e.vocabularyUrl),"mode"in e&&n(8,m=e.mode),"rootPath"in e&&n(3,g=e.rootPath),"rootUrl"in e&&n(9,y=e.rootUrl),"basePath"in e&&n(10,v=e.basePath),"selectableTypes"in e&&n(11,h=e.selectableTypes),"maximumSelectionSize"in e&&n(12,C=e.maximumSelectionSize),"separator"in e&&n(13,f=e.separator),"selection"in e&&n(14,w=e.selection),"query"in e&&n(15,b=e.query),"fieldId"in e&&n(16,q=e.fieldId),"upload"in e&&n(17,x=e.upload),"favorites"in e&&n(18,D=e.favorites),"recentlyUsed"in e&&n(19,j=e.recentlyUsed),"recentlyUsedKey"in e&&n(20,B=e.recentlyUsedKey),"recentlyUsedMaxItems"in e&&n(21,N=e.recentlyUsedMaxItems),"bSize"in e&&n(22,F=e.bSize),"componentRegistryKeys"in e&&n(23,I=e.componentRegistryKeys)},[U,Y,d,g,a,c,u,p,m,y,v,h,C,f,w,b,q,x,D,j,B,N,F,I]}class Se extends l.r7T{constructor(e){super(),(0,l.TsN)(this,e,ke,Ye,l.jXN,{maxDepth:4,width:5,attributes:6,contextPath:2,vocabularyUrl:7,mode:8,rootPath:3,rootUrl:9,basePath:10,selectableTypes:11,maximumSelectionSize:12,separator:13,selection:14,query:15,fieldId:16,upload:17,favorites:18,recentlyUsed:19,recentlyUsedKey:20,recentlyUsedMaxItems:21,bSize:22,componentRegistryKeys:23})}}var $e=Se}}]);
//# sourceMappingURL=85083.e1fa4ca252e66dd574ea.min.js.map