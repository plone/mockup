"use strict";(self.webpackChunk_plone_mockup=self.webpackChunk_plone_mockup||[]).push([[51410],{3831:function(e,t,s){s.d(t,{EO:function(){return C},Em:function(){return r},Yq:function(){return u},gf:function(){return I},qz:function(){return g},r1:function(){return o},x6:function(){return A},y8:function(){return a}});var n=s(23505),l=s(49264),i=s(67545);const c=n.A.getLogger("pat-contentbrowser");async function r({method:e="GET",vocabularyUrl:t=null,attributes:s=[],path:n=null,uids:l=null,searchTerm:i=null,searchIndex:r="SearchableText",searchPath:A=null,levelInfoPath:a=null,selectableTypes:g=[],pageSize:C=100,sortOn:I="sortable_title",sortOrder:o="ascending",page:u=1}){let d={criteria:[]};if(n&&(d={criteria:[{i:"path",o:"plone.app.querystring.operation.string.path",v:`${n}::1`}],sort_on:I,sort_order:o}),a&&(d={criteria:[{i:"path",o:"plone.app.querystring.operation.string.path",v:`${a}::0`}]}),A&&(d={criteria:[{i:"path",o:"plone.app.querystring.operation.string.path",v:A}]},g.length&&d.criteria.push({i:"portal_type",o:"plone.app.querystring.operation.list.contains",v:g})),l&&(d={criteria:[{i:"UID",o:"plone.app.querystring.operation.list.contains",v:l}]}),i&&d.criteria.push({i:r,o:"plone.app.querystring.operation.string.contains",v:i}),!d.criteria.length)return{results:[],total:0};const p=JSON.stringify(d),b=JSON.stringify(s),m=C?JSON.stringify({page:u,size:C}):"";let B=encodeURI(`${t}${-1!==t.indexOf("?")?"&":"?"}query=${p}&attributes=${b}`+(m?`&batch=${m}`:""));const x=new Headers;x.set("Accept","application/json");let Q={method:e,headers:x};if("POST"==e&&-1!==B.indexOf("?")){const e=B.split("?");B=e[0];const t=e[1];x.set("Content-Type","application/x-www-form-urlencoded"),c.debug(B,t),Q.body=t}const G=await fetch(B,Q);return G.ok?await G.json():{results:[],total:0,errors:G.errors}}async function A(e,t){if(!e)return[];const s=await r({method:"POST",vocabularyUrl:t.vocabularyUrl,attributes:t.attributes,uids:e,pageSize:null});let n=await(s?.results)||[];return n.sort((t,s)=>e.indexOf(t.UID)-e.indexOf(s.UID)),n}async function a(e){return await l.A.resolveIcon(e)}async function g(e,{iconName:t}){const s=await a(t);return e.outerHTML=s,{destroy(){}}}function C(e){const t=t=>{e&&!e.contains(t.target)&&e.dispatchEvent(new CustomEvent("click_outside",e))};return document.addEventListener("click",t,!0),{destroy(){document.removeEventListener("click",t,!0)}}}function I(e,t){let s=l.A.storage.get(t.recentlyUsedKey)||[];s=s.slice(s.length-1e3,s.length),e&&t?.selectableTypes.length&&(s=s.filter(e=>-1!=t.selectableTypes.indexOf(e.portal_type)));const n=parseInt(t.recentlyUsedMaxItems,20);return n&&(s=s.slice(s.length-n,s.length)),s}function o(e,t){if(!t.recentlyUsed)return;const s=I(!1,t),n=s.filter(t=>t.UID===e.UID);n.length>0&&s.splice(s.indexOf(n[0]),1),s.push(e),l.A.storage.set(t.recentlyUsedKey,s)}function u(e){const t=Date.parse(e),s=new i.A;return new Date(t).toLocaleString(s.currentLanguage.replace("_","-"))}},51410:function(e,t,s){s.r(t),s.d(t,{default:function(){return y}});var n=s(43467),l=(s(2531),s(41949),s(3831)),i=s(85072),c=s.n(i),r=s(97825),A=s.n(r),a=s(57722),g=s.n(a),C=s(55056),I=s.n(C),o=s(10540),u=s.n(o),d=s(41113),p=s.n(d),b=s(95428),m={};m.styleTagTransform=p(),m.setAttributes=I(),m.insert=g(),m.domAPI=A(),m.insertStyleElement=u();c()(b.A,m),b.A&&b.A.locals&&b.A.locals;function B(e){let t,s,l;return{c(){t=(0,n.ND4)("img"),(0,n.mq_)(t.src,s=e[0].getURL+"/@@images/image/mini")||(0,n.CFu)(t,"src",s),(0,n.CFu)(t,"alt",l=e[0].Title),(0,n.CFu)(t,"class","svelte-b5z3s7")},m(e,s){(0,n.Yry)(e,t,s)},p(e,i){1&i&&!(0,n.mq_)(t.src,s=e[0].getURL+"/@@images/image/mini")&&(0,n.CFu)(t,"src",s),1&i&&l!==(l=e[0].Title)&&(0,n.CFu)(t,"alt",l)},d(e){e&&(0,n.YoD)(t)}}}function x(e){let t,s,i,c,r,A,a,g,C,I,o,u,d,p,b,m,x,Q=e[0].Title+"",G=e[0].path+"",y=e[0].getURL&&(e[0].getIcon||"Image"===e[0].portal_type)&&B(e);return{c(){t=(0,n.ND4)("div"),s=(0,n.ND4)("div"),i=(0,n.ND4)("button"),c=(0,n.QQy)("svg"),A=(0,n.xem)(),a=(0,n.ND4)("div"),g=(0,n.ND4)("span"),C=(0,n.Qq7)(Q),I=(0,n.ND4)("br"),o=(0,n.xem)(),u=(0,n.ND4)("span"),d=(0,n.Qq7)(G),p=(0,n.xem)(),y&&y.c(),(0,n.CFu)(i,"class","btn btn-link btn-sm link-secondary svelte-b5z3s7"),(0,n.CFu)(i,"type","button"),(0,n.CFu)(g,"class","item-title"),(0,n.CFu)(u,"class","small"),(0,n.CFu)(s,"class","item-info svelte-b5z3s7"),(0,n.CFu)(t,"class","selected-item border border-secondary-subtle rounded p-2 mb-1 bg-body-tertiary svelte-b5z3s7"),(0,n.CFu)(t,"data-uuid",b=e[0].UID)},m(b,B){(0,n.Yry)(b,t,B),(0,n.BCw)(t,s),(0,n.BCw)(s,i),(0,n.BCw)(i,c),(0,n.BCw)(s,A),(0,n.BCw)(s,a),(0,n.BCw)(a,g),(0,n.BCw)(g,C),(0,n.BCw)(a,I),(0,n.BCw)(a,o),(0,n.BCw)(a,u),(0,n.BCw)(u,d),(0,n.BCw)(t,p),y&&y.m(t,null),m||(x=[(0,n.hGc)(r=l.qz.call(null,c,{iconName:"x-circle"})),(0,n.KTR)(i,"click",(0,n.xZN)(e[2]))],m=!0)},p(e,[s]){1&s&&Q!==(Q=e[0].Title+"")&&(0,n.iQh)(C,Q),1&s&&G!==(G=e[0].path+"")&&(0,n.iQh)(d,G),e[0].getURL&&(e[0].getIcon||"Image"===e[0].portal_type)?y?y.p(e,s):(y=B(e),y.c(),y.m(t,null)):y&&(y.d(1),y=null),1&s&&b!==(b=e[0].UID)&&(0,n.CFu)(t,"data-uuid",b)},i:n.lQ1,o:n.lQ1,d(e){e&&(0,n.YoD)(t),y&&y.d(),m=!1,(0,n.oOW)(x)}}}function Q(e,t,s){let{item:n}=t,{unselectItem:l}=t;return e.$$set=e=>{"item"in e&&s(0,n=e.item),"unselectItem"in e&&s(1,l=e.unselectItem)},[n,l,()=>l(n.UID)]}class G extends n.r7T{constructor(e){super(),(0,n.TsN)(this,e,Q,x,n.jXN,{item:0,unselectItem:1})}}var y=G},95428:function(e,t,s){var n=s(71354),l=s.n(n),i=s(76314),c=s.n(i)()(l());c.push([e.id,".selected-item.svelte-b5z3s7.svelte-b5z3s7{display:flex;flex-wrap:nowrap;align-items:start;justify-content:space-between;cursor:move}.selected-item.svelte-b5z3s7>.svelte-b5z3s7{margin-right:.5rem;display:block}.selected-item.svelte-b5z3s7 button.svelte-b5z3s7{cursor:pointer;padding:0 .375rem .374rem 0}.selected-item.svelte-b5z3s7 .item-info.svelte-b5z3s7{display:flex;align-items:start}.selected-item.svelte-b5z3s7>img.svelte-b5z3s7{object-fit:cover;width:95px;height:95px}","",{version:3,sources:["webpack://./src/pat/contentbrowser/src/SelectedItem.svelte"],names:[],mappings:"AAAA,2CAAA,YAAA,CAAA,gBAAA,CAAA,iBAAA,CAAA,6BAAA,CAAA,WAAA,CAAA,4CAAA,kBAAA,CAAA,aAAA,CAAA,kDAAA,cAAA,CAAA,2BAAA,CAAA,sDAAA,YAAA,CAAA,iBAAA,CAAA,+CAAA,gBAAA,CAAA,UAAA,CAAA,WAAA",sourcesContent:[".selected-item.svelte-b5z3s7.svelte-b5z3s7{display:flex;flex-wrap:nowrap;align-items:start;justify-content:space-between;cursor:move}.selected-item.svelte-b5z3s7>.svelte-b5z3s7{margin-right:0.5rem;display:block}.selected-item.svelte-b5z3s7 button.svelte-b5z3s7{cursor:pointer;padding:0 0.375rem 0.374rem 0}.selected-item.svelte-b5z3s7 .item-info.svelte-b5z3s7{display:flex;align-items:start}.selected-item.svelte-b5z3s7>img.svelte-b5z3s7{object-fit:cover;width:95px;height:95px}\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiU2VsZWN0ZWRJdGVtLnN2ZWx0ZSIsInNvdXJjZXMiOlsiU2VsZWN0ZWRJdGVtLnN2ZWx0ZSJdLCJzb3VyY2VzQ29udGVudCI6WyI8c2NyaXB0PlxuICAgIGltcG9ydCB7IGdldENvbnRleHQgfSBmcm9tIFwic3ZlbHRlXCI7XG4gICAgaW1wb3J0IHsgcmVzb2x2ZUljb24gfSBmcm9tIFwiLi91dGlsc1wiO1xuXG4gICAgLy8gaXRlbSBkYXRhXG4gICAgZXhwb3J0IGxldCBpdGVtO1xuICAgIGV4cG9ydCBsZXQgdW5zZWxlY3RJdGVtO1xuPC9zY3JpcHQ+XG5cbjxkaXYgY2xhc3M9XCJzZWxlY3RlZC1pdGVtIGJvcmRlciBib3JkZXItc2Vjb25kYXJ5LXN1YnRsZSByb3VuZGVkIHAtMiBtYi0xIGJnLWJvZHktdGVydGlhcnlcIiBkYXRhLXV1aWQ9e2l0ZW0uVUlEfT5cbiAgICA8ZGl2IGNsYXNzPVwiaXRlbS1pbmZvXCI+XG4gICAgICAgIDwhLS0gc3ZlbHRlLWlnbm9yZSBhMTF5LW1pc3NpbmctYXR0cmlidXRlIC0tPlxuICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgICBjbGFzcz1cImJ0biBidG4tbGluayBidG4tc20gbGluay1zZWNvbmRhcnlcIlxuICAgICAgICAgICAgdHlwZT1cImJ1dHRvblwiXG4gICAgICAgICAgICBvbjpjbGlja3xwcmV2ZW50RGVmYXVsdD17KCkgPT4gdW5zZWxlY3RJdGVtKGl0ZW0uVUlEKX1cbiAgICAgICAgICAgID48c3ZnIHVzZTpyZXNvbHZlSWNvbj17eyBpY29uTmFtZTogXCJ4LWNpcmNsZVwiIH19IC8+PC9idXR0b25cbiAgICAgICAgPlxuICAgICAgICA8ZGl2PlxuICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJpdGVtLXRpdGxlXCI+e2l0ZW0uVGl0bGV9PC9zcGFuPjxiciAvPlxuICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJzbWFsbFwiPntpdGVtLnBhdGh9PC9zcGFuPlxuICAgICAgICA8L2Rpdj5cbiAgICA8L2Rpdj5cbiAgICB7I2lmIGl0ZW0uZ2V0VVJMICYmIChpdGVtLmdldEljb24gfHwgaXRlbS5wb3J0YWxfdHlwZSA9PT0gXCJJbWFnZVwiKX08aW1nXG4gICAgICAgICAgICBzcmM9XCJ7aXRlbS5nZXRVUkx9L0BAaW1hZ2VzL2ltYWdlL21pbmlcIlxuICAgICAgICAgICAgYWx0PXtpdGVtLlRpdGxlfVxuICAgICAgICAvPnsvaWZ9XG48L2Rpdj5cblxuPHN0eWxlPlxuICAgIC5zZWxlY3RlZC1pdGVtIHtcbiAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgZmxleC13cmFwOiBub3dyYXA7XG4gICAgICAgIGFsaWduLWl0ZW1zOiBzdGFydDtcbiAgICAgICAganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuO1xuICAgICAgICBjdXJzb3I6IG1vdmU7XG4gICAgfVxuICAgIC5zZWxlY3RlZC1pdGVtID4gKiB7XG4gICAgICAgIG1hcmdpbi1yaWdodDogMC41cmVtO1xuICAgICAgICBkaXNwbGF5OiBibG9jaztcbiAgICB9XG4gICAgLnNlbGVjdGVkLWl0ZW0gYnV0dG9uIHtcbiAgICAgICAgY3Vyc29yOiBwb2ludGVyO1xuICAgICAgICBwYWRkaW5nOiAwIDAuMzc1cmVtIDAuMzc0cmVtIDA7XG4gICAgfVxuICAgIC5zZWxlY3RlZC1pdGVtIC5pdGVtLWluZm8ge1xuICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICBhbGlnbi1pdGVtczogc3RhcnQ7XG4gICAgfVxuICAgIC5zZWxlY3RlZC1pdGVtID4gaW1nIHtcbiAgICAgICAgb2JqZWN0LWZpdDogY292ZXI7XG4gICAgICAgIHdpZHRoOiA5NXB4O1xuICAgICAgICBoZWlnaHQ6IDk1cHg7XG4gICAgfVxuPC9zdHlsZT5cbiJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUE4QkksMENBQWUsQ0FDWCxPQUFPLENBQUUsSUFBSSxDQUNiLFNBQVMsQ0FBRSxNQUFNLENBQ2pCLFdBQVcsQ0FBRSxLQUFLLENBQ2xCLGVBQWUsQ0FBRSxhQUFhLENBQzlCLE1BQU0sQ0FBRSxJQUNaLENBQ0EsNEJBQWMsQ0FBRyxjQUFFLENBQ2YsWUFBWSxDQUFFLE1BQU0sQ0FDcEIsT0FBTyxDQUFFLEtBQ2IsQ0FDQSw0QkFBYyxDQUFDLG9CQUFPLENBQ2xCLE1BQU0sQ0FBRSxPQUFPLENBQ2YsT0FBTyxDQUFFLENBQUMsQ0FBQyxRQUFRLENBQUMsUUFBUSxDQUFDLENBQ2pDLENBQ0EsNEJBQWMsQ0FBQyx3QkFBVyxDQUN0QixPQUFPLENBQUUsSUFBSSxDQUNiLFdBQVcsQ0FBRSxLQUNqQixDQUNBLDRCQUFjLENBQUcsaUJBQUksQ0FDakIsVUFBVSxDQUFFLEtBQUssQ0FDakIsS0FBSyxDQUFFLElBQUksQ0FDWCxNQUFNLENBQUUsSUFDWiJ9*/"],sourceRoot:""}]),t.A=c}}]);
//# sourceMappingURL=51410.eb2b1e533cf5638ccb84.min.js.map