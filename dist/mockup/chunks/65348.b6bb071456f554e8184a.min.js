(self.webpackChunk_plone_mockup=self.webpackChunk_plone_mockup||[]).push([[65348],{65348:function(){!function(){"use strict";var e=tinymce.util.Tools.resolve("tinymce.PluginManager");const t=e=>t=>t.options.get(e),n=t("autolink_pattern"),o=t("link_default_target"),r=t("link_default_protocol"),a=t("allow_unsafe_link_target"),s=e=>"string"===(e=>{const t=typeof e;return null===e?"null":"object"===t&&Array.isArray(e)?"array":"object"===t&&(n=o=e,(r=String).prototype.isPrototypeOf(n)||(null===(a=o.constructor)||void 0===a?void 0:a.name)===r.name)?"string":t;var n,o,r,a})(e),l=e=>void 0===e,c=e=>!(e=>null==e)(e),i=Object.hasOwnProperty,d=e=>"\ufeff"===e;var u=tinymce.util.Tools.resolve("tinymce.dom.TextSeeker");const f=e=>/^[(\[{ \u00a0]$/.test(e),g=(e,t,n)=>{for(let o=t-1;o>=0;o--){const t=e.charAt(o);if(!d(t)&&n(t))return o}return-1},k=(e,t)=>{var o;const a=e.schema.getVoidElements(),s=n(e),{dom:c,selection:d}=e;if(null!==c.getParent(d.getNode(),"a[href]"))return null;const k=d.getRng(),p=u(c,(e=>{return c.isBlock(e)||(t=a,n=e.nodeName.toLowerCase(),i.call(t,n))||"false"===c.getContentEditable(e);var t,n})),{container:m,offset:w}=((e,t)=>{let n=e,o=t;for(;1===n.nodeType&&n.childNodes[o];)n=n.childNodes[o],o=3===n.nodeType?n.data.length:n.childNodes.length;return{container:n,offset:o}})(k.endContainer,k.endOffset),h=null!==(o=c.getParent(m,c.isBlock))&&void 0!==o?o:c.getRoot(),y=p.backwards(m,w+t,((e,t)=>{const n=e.data,o=g(n,t,(r=f,e=>!r(e)));var r,a;return-1===o||(a=n[o],/[?!,.;:]/.test(a))?o:o+1}),h);if(!y)return null;let _=y.container;const v=p.backwards(y.container,y.offset,((e,t)=>{_=e;const n=g(e.data,t,f);return-1===n?n:n+1}),h),C=c.createRng();v?C.setStart(v.container,v.offset):C.setStart(_,0),C.setEnd(y.container,y.offset);const b=C.toString().replace(/\uFEFF/g,"").match(s);if(b){let t=b[0];return(A=t).length>=4&&"www."===A.substr(0,4)?t=r(e)+"://"+t:((e,t,n=0,o)=>{const r=e.indexOf(t,n);return-1!==r&&(!!l(o)||r+t.length<=o)})(t,"@")&&!(e=>/^([A-Za-z][A-Za-z\d.+-]*:\/\/)|mailto:/.test(e))(t)&&(t="mailto:"+t),{rng:C,url:t}}var A;return null},p=(e,t)=>{const{dom:n,selection:r}=e,{rng:l,url:c}=t,i=r.getBookmark();r.setRng(l);const d="createlink",u={command:d,ui:!1,value:c};if(!e.dispatch("BeforeExecCommand",u).isDefaultPrevented()){e.getDoc().execCommand(d,!1,c),e.dispatch("ExecCommand",u);const t=o(e);if(s(t)){const o=r.getNode();n.setAttrib(o,"target",t),"_blank"!==t||a(e)||n.setAttrib(o,"rel","noopener")}}r.moveToBookmark(i),e.nodeChanged()},m=e=>{const t=k(e,-1);c(t)&&p(e,t)},w=m;e.add("autolink",(e=>{(e=>{const t=e.options.register;t("autolink_pattern",{processor:"regexp",default:new RegExp("^"+/(?:[A-Za-z][A-Za-z\d.+-]{0,14}:\/\/(?:[-.~*+=!&;:'%@?^${}(),\w]+@)?|www\.|[-;:&=+$,.\w]+@)[A-Za-z\d-]+(?:\.[A-Za-z\d-]+)*(?::\d+)?(?:\/(?:[-.~*+=!;:'%@$(),\/\w]*[-~*+=%@$()\/\w])?)?(?:\?(?:[-.~*+=!&;:'%@?^${}(),\/\w]+))?(?:#(?:[-.~*+=!&;:'%@?^${}(),\/\w]+))?/g.source+"$","i")}),t("link_default_target",{processor:"string"}),t("link_default_protocol",{processor:"string",default:"https"})})(e),(e=>{e.on("keydown",(t=>{13!==t.keyCode||t.isDefaultPrevented()||(e=>{const t=k(e,0);c(t)&&p(e,t)})(e)})),e.on("keyup",(t=>{32===t.keyCode?m(e):(48===t.keyCode&&t.shiftKey||221===t.keyCode)&&w(e)}))})(e)}))}()}}]);
//# sourceMappingURL=65348.b6bb071456f554e8184a.min.js.map