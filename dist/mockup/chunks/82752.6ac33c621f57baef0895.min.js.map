{"version":3,"file":"chunks/82752.6ac33c621f57baef0895.min.js","mappings":"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","sources":["webpack://@plone/mockup/./src/pat/contentbrowser/src/utils.js","webpack://@plone/mockup/./src/pat/contentbrowser/src/ContentBrowser.svelte","webpack://@plone/mockup/./src/pat/contentbrowser/src/ContentStore.js","webpack://@plone/mockup/Favorites.svelte","webpack://@plone/mockup/RecentlyUsed.svelte","webpack://@plone/mockup/./src/pat/contentbrowser/src/ContentBrowser.svelte?e09c","webpack://@plone/mockup/ContentBrowser.svelte","webpack://@plone/mockup/./src/pat/contentbrowser/src/SelectedItems.svelte?e8bf","webpack://@plone/mockup/SelectedItems.svelte","webpack://@plone/mockup/./src/pat/contentbrowser/src/stores.js","webpack://@plone/mockup/App.svelte","webpack://@plone/mockup/./src/pat/contentbrowser/src/SelectedItems.svelte"],"sourcesContent":["import logger from \"@patternslib/patternslib/src/core/logging\";\nimport utils from \"../../../core/utils.js\";\nimport I18n from \"../../../core/i18n.js\";\n\nconst log = logger.getLogger(\"pat-contentbrowser\");\n\nexport async function request({\n    method = \"GET\",\n    vocabularyUrl = null,\n    attributes = [],\n    path = null,\n    uids = null,\n    searchTerm = null,\n    searchIndex = \"SearchableText\",\n    searchPath = null,\n    levelInfoPath = null,\n    selectableTypes = [],\n    browseableTypes = [],\n    pageSize = 100,\n    page = 1,\n}) {\n    let vocabQuery = {\n        criteria: [],\n    };\n    if (path) {\n        // query sublevel of path\n        vocabQuery = {\n            criteria: [\n                {\n                    i: \"path\",\n                    o: \"plone.app.querystring.operation.string.path\",\n                    v: `${path}::1`,\n                },\n            ],\n            sort_on: \"getObjPositionInParent\",\n            sort_order: \"ascending\",\n        };\n        if (selectableTypes.length) {\n            // we need to append browseableTypes here in order to\n            // preserve browsing subitems\n            vocabQuery.criteria.push({\n                i: \"portal_type\",\n                o: \"plone.app.querystring.operation.list.contains\",\n                v: selectableTypes.concat(browseableTypes),\n            })\n        }\n    }\n    if (levelInfoPath) {\n        // query exact path\n        vocabQuery = {\n            criteria: [\n                {\n                    i: \"path\",\n                    o: \"plone.app.querystring.operation.string.path\",\n                    v: `${levelInfoPath}::0`,\n                },\n            ],\n        };\n    }\n    if (searchPath) {\n        // search from searchPath down\n        vocabQuery = {\n            criteria: [\n                {\n                    i: \"path\",\n                    o: \"plone.app.querystring.operation.string.path\",\n                    v: searchPath,\n                },\n            ],\n        };\n        if (selectableTypes.length) {\n            vocabQuery.criteria.push({\n                i: \"portal_type\",\n                o: \"plone.app.querystring.operation.list.contains\",\n                v: selectableTypes,\n            })\n        }\n    }\n    if (uids) {\n        vocabQuery = {\n            criteria: [\n                {\n                    i: \"UID\",\n                    o: \"plone.app.querystring.operation.list.contains\",\n                    v: uids,\n                },\n            ],\n        };\n    }\n    if (searchTerm) {\n        vocabQuery.criteria.push({\n            i: searchIndex,\n            o: \"plone.app.querystring.operation.string.contains\",\n            v: searchTerm,\n\n        })\n    }\n\n    if (!vocabQuery.criteria.length) {\n        return {\n            results: [],\n            total: 0,\n        }\n    };\n    const url_query = JSON.stringify(vocabQuery);\n    const url_parameters = JSON.stringify(attributes);\n    const url_batch = JSON.stringify({\n        page: page,\n        size: pageSize,\n    });\n\n    const url = encodeURI(`${vocabularyUrl}${vocabularyUrl.indexOf(\"?\") !== -1 ? \"&\" : \"?\"}query=${url_query}&attributes=${url_parameters}&batch=${url_batch}`);\n    log.debug(url);\n\n    const headers = new Headers();\n    headers.set(\"Accept\", \"application/json\");\n\n    const response = await fetch(url, {\n        method: method,\n        headers: headers,\n    });\n\n    if (!response.ok) {\n        return {\n            results: [],\n            total: 0,\n            errors: json.errors,\n        };\n    }\n\n    const json = await response.json();\n\n    if (!searchPath && !levelInfoPath && selectableTypes.length) {\n        // we iter through response and filter out non-selectable\n        // types but keep folderish types to maintain browsing\n        // the content structure.\n        const filtered_response = {\n            results: [],\n            total: json.total,\n        }\n        for (const it of json.results) {\n            if (selectableTypes.indexOf(it.portal_type) != -1 || it.is_folderish) {\n                filtered_response.results.push(it);\n            }\n        }\n        return filtered_response;\n    }\n    return json;\n}\n\nexport async function get_items_from_uids(uids, config) {\n    if (!uids) {\n        return [];\n    }\n    const selectedItemsFromUids = await request({\n        vocabularyUrl: config.vocabularyUrl,\n        attributes: config.attributes,\n        uids: uids,\n    });\n    let results = (await selectedItemsFromUids?.results) || [];\n    // resort the results based on the order of uids\n    results.sort((a, b) => {\n        return uids.indexOf(a.UID) - uids.indexOf(b.UID);\n    })\n    return results;\n}\n\n\n/** use Plone resolveIcon to load a SVG icon and replace node with icon code */\nexport async function resolveIcon(node, { iconName }) {\n    async function getIcon(iconName) {\n        const icon = await utils.resolveIcon(iconName)\n        return icon;\n    }\n    const iconCode = await getIcon(iconName);\n    node.outerHTML = iconCode;\n    return {\n        destroy() { },\n    };\n}\n\n/** Dispatch event on click outside of node */\nexport function clickOutside(node) {\n    const handleClick = (event) => {\n        if (node && !node.contains(event.target)) {\n            node.dispatchEvent(new CustomEvent(\"click_outside\", node));\n        }\n    };\n\n    document.addEventListener(\"click\", handleClick, true);\n\n    return {\n        destroy() {\n            document.removeEventListener(\"click\", handleClick, true);\n        },\n    };\n}\n\nexport function recentlyUsedItems(filterItems, config) {\n    let ret = utils.storage.get(config.recentlyUsedKey) || [];\n    // hard-limit to 1000 entries\n    ret = ret.slice(ret.length - 1000, ret.length);\n    if (filterItems && config?.selectableTypes.length) {\n        ret = ret.filter((it) => {\n            return config.selectableTypes.indexOf(it.portal_type) != -1;\n        });\n    }\n    // max is applied AFTER filtering selectable items.\n    const max = parseInt(config.recentlyUsedMaxItems, 20);\n    if (max) {\n        // return the slice from the end, as we want to display newest items first.\n        ret = ret.slice(ret.length - max, ret.length);\n    }\n    return ret;\n}\n\nexport function updateRecentlyUsed(item, config) {\n    if (!config.recentlyUsed) {\n        return;\n    }\n    // add to recently added items\n    const recentlyUsed = recentlyUsedItems(false, config); // do not filter for selectable but get all. append to that list the new item.\n    const alreadyPresent = recentlyUsed.filter((it) => {\n        return it.UID === item.UID;\n    });\n    if (alreadyPresent.length > 0) {\n        recentlyUsed.splice(recentlyUsed.indexOf(alreadyPresent[0]), 1);\n    }\n    recentlyUsed.push(item);\n    utils.storage.set(config.recentlyUsedKey, recentlyUsed);\n}\n\n\nexport function formatDate(dateval) {\n    // fix underscore replacement by /mockup/src/core/i18n.js\n    // the \"wrong\" fix in i18n.js exists for use by select2 and tinymce\n    // this fix should be moved to the mockup modules of tinymce and select\n    // see: https://github.com/plone/mockup/issues/1429\n    const d = Date.parse(dateval);\n    const i18n = new I18n();\n    return new Date(d).toLocaleString(i18n.currentLanguage.replace(\"_\", \"-\"));\n}\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".content-browser-position-wrapper.svelte-8w273.svelte-8w273.svelte-8w273{position:fixed;top:0;right:0;display:flex;justify-content:end;z-index:1500;width:100%;height:100vh;background-color:rgba(0,0,0,.25)}.btn-xs.svelte-8w273.svelte-8w273.svelte-8w273{--bs-btn-padding-y:0.15rem;--bs-btn-padding-x:0.5rem;--bs-btn-font-size:0.75rem}.content-browser.svelte-8w273.svelte-8w273.svelte-8w273{height:100vh;min-width:450px;background-color:var(--bs-light-bg-subtle);border-left:var(--bs-border-style) var(--bs-border-width) #fff;z-index:1500;display:flex;flex-direction:column}.toolBar.svelte-8w273.svelte-8w273.svelte-8w273{background-color:var(--bs-primary);padding:.325rem .75rem;color:var(--bs-light);width:100%;display:flex;justify-content:start}.toolBar.svelte-8w273 svg{vertical-align:-0.125em}.levelColumns.svelte-8w273.svelte-8w273.svelte-8w273{display:flex;flex-wrap:nowrap;width:100%;overflow-y:hidden;overflow-x:auto;flex-grow:3;border-left:var(--bs-border-style) var(--bs-border-color) var(--bs-border-width);user-select:none}.levelColumn.svelte-8w273.svelte-8w273.svelte-8w273{width:320px;background:rgba(var(--bs-secondary-bg-rgb), 0.55);border-right:var(--bs-border-style) var(--bs-border-width) var(--bs-border-color);display:flex;flex-direction:column;flex-grow:0;flex-shrink:0}.levelColumn.active.svelte-8w273.svelte-8w273.svelte-8w273{background:var(--bs-body-bg);border-left:var(--bs-border-style) var(--bs-border-width) var(--bs-primary);margin-left:-1px}.levelToolbar.svelte-8w273.svelte-8w273.svelte-8w273{width:100%;min-height:2.5rem;display:flex;justify-content:space-between;white-space:nowrap;padding:.375rem;border-bottom:var(--bs-border-style) var(--bs-border-width) var(--bs-border-color)}.levelToolbar.svelte-8w273>.levelActions.svelte-8w273.svelte-8w273{margin-left:auto;display:flex}.levelToolbar.svelte-8w273>button.svelte-8w273.svelte-8w273{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.levelItems.svelte-8w273.svelte-8w273.svelte-8w273{overflow-x:auto}.contentItem.svelte-8w273.svelte-8w273.svelte-8w273{display:flex;align-items:center;justify-content:space-between;font-size:90%;min-height:2rem}.contentItem.svelte-8w273.svelte-8w273.svelte-8w273:focus-visible{outline:none}.contentItem.even.svelte-8w273.svelte-8w273.svelte-8w273{background-color:rgba(var(--bs-secondary-bg-rgb), 0.4)}.contentItem.inPath.svelte-8w273.svelte-8w273.svelte-8w273,.contentItem.selectedItem.svelte-8w273.svelte-8w273.svelte-8w273{background-color:rgba(var(--bs-primary-rgb), 0.15)}.contentItem.svelte-8w273>.svelte-8w273.svelte-8w273{padding:.5rem;white-space:nowrap;max-width:450px;text-overflow:ellipsis;overflow:hidden}.contentItem.svelte-8w273>.browseSub.svelte-8w273.svelte-8w273{flex-shrink:0}.contentItem.svelte-8w273 .plone-icon.svelte-8w273.svelte-8w273{display:inline-block}.contentItem.svelte-8w273 .grid-preview.svelte-8w273>img.svelte-8w273{width:95px;height:95px;object-fit:cover;float:left;margin-right:1rem}.contentItem.svelte-8w273 .id-only.svelte-8w273.svelte-8w273{font-style:italic}.preview.svelte-8w273.svelte-8w273.svelte-8w273{width:320px;flex-shrink:0;min-height:300px}.preview.svelte-8w273 .info.svelte-8w273.svelte-8w273{padding:.5rem;width:100%;word-wrap:anywhere}.preview.svelte-8w273 .info .previewIcon.svelte-8w273.svelte-8w273{margin:0 auto 1rem auto}.preview.svelte-8w273 .info .previewIcon svg.svelte-8w273.svelte-8w273{width:50px !important;height:50px !important}.preview.svelte-8w273 img.svelte-8w273.svelte-8w273{max-width:100%;height:auto;margin-bottom:.5rem}.upload-wrapper.svelte-8w273.svelte-8w273.svelte-8w273{padding:1rem;width:540px;overflow-x:auto;flex-shrink:0}.loadmore.svelte-8w273.svelte-8w273.svelte-8w273{text-align:center;padding:.25rem 0}.select-button-ellipsis.svelte-8w273.svelte-8w273.svelte-8w273{white-space:nowrap;max-width:150px;text-overflow:ellipsis;overflow:hidden}\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/pat/contentbrowser/src/ContentBrowser.svelte\"],\"names\":[],\"mappings\":\"AAAA,yEAAA,cAAA,CAAA,KAAA,CAAA,OAAA,CAAA,YAAA,CAAA,mBAAA,CAAA,YAAA,CAAA,UAAA,CAAA,YAAA,CAAA,gCAAA,CAAA,+CAAA,0BAAA,CAAA,yBAAA,CAAA,0BAAA,CAAA,wDAAA,YAAA,CAAA,eAAA,CAAA,0CAAA,CAAA,8DAAA,CAAA,YAAA,CAAA,YAAA,CAAA,qBAAA,CAAA,gDAAA,kCAAA,CAAA,sBAAA,CAAA,qBAAA,CAAA,UAAA,CAAA,YAAA,CAAA,qBAAA,CAAA,0BAAA,uBAAA,CAAA,qDAAA,YAAA,CAAA,gBAAA,CAAA,UAAA,CAAA,iBAAA,CAAA,eAAA,CAAA,WAAA,CAAA,gFAAA,CAAA,gBAAA,CAAA,oDAAA,WAAA,CAAA,iDAAA,CAAA,iFAAA,CACmC,YAAA,CAAA,qBAAA,CAAA,WAAA,CAAA,aAAA,CAAA,2DAAA,4BAAA,CAAA,2EAAA,CAAA,gBAAA,CAAA,qDAAA,UAAA,CAAA,iBAAA,CAAA,YAAA,CAAA,6BAAA,CAAA,kBAAA,CAAA,eAAA,CAAA,kFAAA,CACA,mEAAA,gBAAA,CAAA,YAAA,CAAA,4DAAA,kBAAA,CAAA,eAAA,CAAA,sBAAA,CAAA,mDAAA,eAAA,CAAA,oDAAA,YAAA,CAAA,kBAAA,CAAA,6BAAA,CAAA,aAAA,CAAA,eAAA,CAAA,kEAAA,YAAA,CAAA,yDAAA,sDAAA,CAAA,4HAAA,kDAAA,CAAA,qDAAA,aAAA,CAAA,kBAAA,CAAA,eAAA,CAAA,sBAAA,CAAA,eAAA,CAAA,+DAAA,aAAA,CAAA,gEAAA,oBAAA,CAAA,sEAAA,UAAA,CAAA,WAAA,CAAA,gBAAA,CAAA,UAAA,CAAA,iBAAA,CAAA,6DAAA,iBAAA,CAAA,gDAAA,WAAA,CAAA,aAAA,CAAA,gBAAA,CAAA,sDAAA,aAAA,CAAA,UAAA,CAAA,kBAAA,CAAA,mEAAA,uBAAA,CAAA,uEAAA,qBAAA,CAAA,sBAAA,CAAA,oDAAA,cAAA,CAAA,WAAA,CAAA,mBAAA,CAAA,uDAAA,YAAA,CAAA,WAAA,CAAA,eAAA,CAAA,aAAA,CAAA,iDAAA,iBAAA,CAAA,gBAAA,CAAA,+DAAA,kBAAA,CAAA,eAAA,CAAA,sBAAA,CAAA,eAAA\",\"sourcesContent\":[\".content-browser-position-wrapper.svelte-8w273.svelte-8w273.svelte-8w273{position:fixed;top:0;right:0;display:flex;justify-content:end;z-index:1500;width:100%;height:100vh;background-color:rgba(0, 0, 0, 0.25)}.btn-xs.svelte-8w273.svelte-8w273.svelte-8w273{--bs-btn-padding-y:0.15rem;--bs-btn-padding-x:0.5rem;--bs-btn-font-size:0.75rem}.content-browser.svelte-8w273.svelte-8w273.svelte-8w273{height:100vh;min-width:450px;background-color:var(--bs-light-bg-subtle);border-left:var(--bs-border-style) var(--bs-border-width) #fff;z-index:1500;display:flex;flex-direction:column}.toolBar.svelte-8w273.svelte-8w273.svelte-8w273{background-color:var(--bs-primary);padding:0.325rem 0.75rem;color:var(--bs-light);width:100%;display:flex;justify-content:start}.toolBar.svelte-8w273 svg{vertical-align:-0.125em}.levelColumns.svelte-8w273.svelte-8w273.svelte-8w273{display:flex;flex-wrap:nowrap;width:100%;overflow-y:hidden;overflow-x:auto;flex-grow:3;border-left:var(--bs-border-style) var(--bs-border-color) var(--bs-border-width);user-select:none}.levelColumn.svelte-8w273.svelte-8w273.svelte-8w273{width:320px;background:rgba(var(--bs-secondary-bg-rgb), 0.55);border-right:var(--bs-border-style) var(--bs-border-width)\\n            var(--bs-border-color);display:flex;flex-direction:column;flex-grow:0;flex-shrink:0}.levelColumn.active.svelte-8w273.svelte-8w273.svelte-8w273{background:var(--bs-body-bg);border-left:var(--bs-border-style) var(--bs-border-width) var(--bs-primary);margin-left:-1px}.levelToolbar.svelte-8w273.svelte-8w273.svelte-8w273{width:100%;min-height:2.5rem;display:flex;justify-content:space-between;white-space:nowrap;padding:0.375rem;border-bottom:var(--bs-border-style) var(--bs-border-width)\\n            var(--bs-border-color)}.levelToolbar.svelte-8w273>.levelActions.svelte-8w273.svelte-8w273{margin-left:auto;display:flex}.levelToolbar.svelte-8w273>button.svelte-8w273.svelte-8w273{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.levelItems.svelte-8w273.svelte-8w273.svelte-8w273{overflow-x:auto}.contentItem.svelte-8w273.svelte-8w273.svelte-8w273{display:flex;align-items:center;justify-content:space-between;font-size:90%;min-height:2rem}.contentItem.svelte-8w273.svelte-8w273.svelte-8w273:focus-visible{outline:none}.contentItem.even.svelte-8w273.svelte-8w273.svelte-8w273{background-color:rgba(var(--bs-secondary-bg-rgb), 0.4)}.contentItem.inPath.svelte-8w273.svelte-8w273.svelte-8w273,.contentItem.selectedItem.svelte-8w273.svelte-8w273.svelte-8w273{background-color:rgba(var(--bs-primary-rgb), 0.15)}.contentItem.svelte-8w273>.svelte-8w273.svelte-8w273{padding:0.5rem;white-space:nowrap;max-width:450px;text-overflow:ellipsis;overflow:hidden}.contentItem.svelte-8w273>.browseSub.svelte-8w273.svelte-8w273{flex-shrink:0}.contentItem.svelte-8w273 .plone-icon.svelte-8w273.svelte-8w273{display:inline-block}.contentItem.svelte-8w273 .grid-preview.svelte-8w273>img.svelte-8w273{width:95px;height:95px;object-fit:cover;float:left;margin-right:1rem}.contentItem.svelte-8w273 .id-only.svelte-8w273.svelte-8w273{font-style:italic}.preview.svelte-8w273.svelte-8w273.svelte-8w273{width:320px;flex-shrink:0;min-height:300px}.preview.svelte-8w273 .info.svelte-8w273.svelte-8w273{padding:0.5rem;width:100%;word-wrap:anywhere}.preview.svelte-8w273 .info .previewIcon.svelte-8w273.svelte-8w273{margin:0 auto 1rem auto}.preview.svelte-8w273 .info .previewIcon svg.svelte-8w273.svelte-8w273{width:50px !important;height:50px !important}.preview.svelte-8w273 img.svelte-8w273.svelte-8w273{max-width:100%;height:auto;margin-bottom:0.5rem}.upload-wrapper.svelte-8w273.svelte-8w273.svelte-8w273{padding:1rem;width:540px;overflow-x:auto;flex-shrink:0}.loadmore.svelte-8w273.svelte-8w273.svelte-8w273{text-align:center;padding:0.25rem 0}.select-button-ellipsis.svelte-8w273.svelte-8w273.svelte-8w273{white-space:nowrap;max-width:150px;text-overflow:ellipsis;overflow:hidden}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiQ29udGVudEJyb3dzZXIuc3ZlbHRlIiwic291cmNlcyI6WyJDb250ZW50QnJvd3Nlci5zdmVsdGUiXSwic291cmNlc0NvbnRlbnQiOlsiPHNjcmlwdD5cbiAgICBpbXBvcnQgdXRpbHMgZnJvbSBcIkBwYXR0ZXJuc2xpYi9wYXR0ZXJuc2xpYi9zcmMvY29yZS91dGlsc1wiO1xuICAgIGltcG9ydCB7IGdldENvbnRleHQgfSBmcm9tIFwic3ZlbHRlXCI7XG4gICAgaW1wb3J0ICogYXMgYW5pbWF0ZVNjcm9sbCBmcm9tIFwic3ZlbHRlLXNjcm9sbHRvXCI7XG4gICAgaW1wb3J0IHsgZmx5IH0gZnJvbSBcInN2ZWx0ZS90cmFuc2l0aW9uXCI7XG4gICAgaW1wb3J0IF90IGZyb20gXCIuLi8uLi8uLi9jb3JlL2kxOG4td3JhcHBlclwiO1xuICAgIGltcG9ydCBVcGxvYWQgZnJvbSBcIi4uLy4uL3VwbG9hZC91cGxvYWRcIjtcbiAgICBpbXBvcnQgY29udGVudFN0b3JlIGZyb20gXCIuL0NvbnRlbnRTdG9yZVwiO1xuICAgIGltcG9ydCB7XG4gICAgICAgIGNsaWNrT3V0c2lkZSxcbiAgICAgICAgZm9ybWF0RGF0ZSxcbiAgICAgICAgZ2V0X2l0ZW1zX2Zyb21fdWlkcyxcbiAgICAgICAgcmVxdWVzdCxcbiAgICAgICAgcmVzb2x2ZUljb24sXG4gICAgICAgIHVwZGF0ZVJlY2VudGx5VXNlZCxcbiAgICB9IGZyb20gXCIuL3V0aWxzXCI7XG4gICAgaW1wb3J0IEZhdm9yaXRlcyBmcm9tIFwiLi9GYXZvcml0ZXMuc3ZlbHRlXCI7XG4gICAgaW1wb3J0IFJlY2VudGx5VXNlZCBmcm9tIFwiLi9SZWNlbnRseVVzZWQuc3ZlbHRlXCI7XG5cbiAgICBhbmltYXRlU2Nyb2xsLnNldEdsb2JhbE9wdGlvbnMoe1xuICAgICAgICBzY3JvbGxYOiB0cnVlLFxuICAgICAgICBjb250YWluZXI6IFwiLmxldmVsQ29sdW1uc1wiLFxuICAgICAgICBkdXJhdGlvbjogNTAwLFxuICAgIH0pO1xuXG4gICAgLy8gZ2V0IGNvbnRleHQgc3RvcmVzXG4gICAgY29uc3QgY3VycmVudFBhdGggPSBnZXRDb250ZXh0KFwiY3VycmVudFBhdGhcIik7XG4gICAgY29uc3QgY29uZmlnID0gZ2V0Q29udGV4dChcImNvbmZpZ1wiKTtcbiAgICBjb25zdCBwYXRoQ2FjaGUgPSBnZXRDb250ZXh0KFwicGF0aENhY2hlXCIpO1xuICAgIGNvbnN0IHNob3dDb250ZW50QnJvd3NlciA9IGdldENvbnRleHQoXCJzaG93Q29udGVudEJyb3dzZXJcIik7XG4gICAgY29uc3Qgc2VsZWN0ZWRJdGVtcyA9IGdldENvbnRleHQoXCJzZWxlY3RlZEl0ZW1zXCIpO1xuICAgIGNvbnN0IHNlbGVjdGVkVWlkcyA9IGdldENvbnRleHQoXCJzZWxlY3RlZFVpZHNcIik7XG4gICAgY29uc3QgcHJldmlld1VpZHMgPSBnZXRDb250ZXh0KFwicHJldmlld1VpZHNcIik7XG5cbiAgICAvLyBpbml0aWFsaXplIGNvbnRlbnQgYnJvd3NlciBzdG9yZVxuICAgIGNvbnN0IGNvbnRlbnRJdGVtcyA9IGNvbnRlbnRTdG9yZSgkY29uZmlnLCBwYXRoQ2FjaGUpO1xuXG4gICAgbGV0IHNob3dVcGxvYWQgPSBmYWxzZTtcbiAgICBsZXQgcHJldmlld0l0ZW0gPSB7fTtcbiAgICBsZXQga2V5Ym9hcmROYXZJbml0aWFsaXplZCA9IGZhbHNlO1xuICAgIGxldCBzaGlmdEtleSA9IGZhbHNlO1xuICAgIGxldCBzZWFyY2hUZXJtID0gbnVsbDtcbiAgICBsZXQgZ3JpZFZpZXcgPSAoJGNvbmZpZy5sYXlvdXQgfHwgXCJsaXN0XCIpID09PSBcImdyaWRcIjtcbiAgICBsZXQgZGVmYXVsdENvbmZpZ01vZGUgPSAkY29uZmlnLm1vZGU7XG5cbiAgICBsZXQgdncgPSBNYXRoLm1heChkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50V2lkdGggfHwgMCwgd2luZG93LmlubmVyV2lkdGggfHwgMCk7XG5cbiAgICBmdW5jdGlvbiB1cGRhdGVQcmV2aWV3KHsgZGF0YSA9IG51bGwsIHV1aWQgPSBudWxsLCBhY3Rpb24gPSBcInNob3dcIiB9KSB7XG4gICAgICAgIGlmIChkYXRhICYmIGFjdGlvbiA9PSBcInNob3dcIikge1xuICAgICAgICAgICAgcHJldmlld0l0ZW0gPSBkYXRhO1xuICAgICAgICAgICAgJHByZXZpZXdVaWRzID0gW2RhdGEuVUlEXTtcbiAgICAgICAgfSBlbHNlIGlmICh1dWlkICYmIGFjdGlvbiA9PSBcImFkZFwiICYmICRwcmV2aWV3VWlkcy5pbmRleE9mKHV1aWQpID09PSAtMSkge1xuICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICRjb25maWcubWF4aW11bVNlbGVjdGlvblNpemUgPiAwICYmXG4gICAgICAgICAgICAgICAgJHByZXZpZXdVaWRzLmxlbmd0aCA+PSAkY29uZmlnLm1heGltdW1TZWxlY3Rpb25TaXplXG4gICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAvLyByZXNwZWN0IG1heGltdW1TZWxlY3Rpb25TaXplXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgJHByZXZpZXdVaWRzID0gWy4uLiRwcmV2aWV3VWlkcywgdXVpZF07IC8vIE5PVEU6ICRwcmV2aWV3VWlkcy5wdXNoKCkgaXMgbm90IGEgcmVhY3RpdmUgY2hhbmdlXG4gICAgICAgIH0gZWxzZSBpZiAodXVpZCAmJiBhY3Rpb24gPT0gXCJyZW1vdmVcIiAmJiAkcHJldmlld1VpZHMuaW5kZXhPZih1dWlkKSAhPT0gLTEpIHtcbiAgICAgICAgICAgIHByZXZpZXdVaWRzLnVwZGF0ZSgobikgPT4ge1xuICAgICAgICAgICAgICAgIG4uc3BsaWNlKG4uaW5kZXhPZih1dWlkKSwgMSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG47XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSBlbHNlIGlmIChhY3Rpb24gPT0gXCJjbGVhclwiKSB7XG4gICAgICAgICAgICBwcmV2aWV3SXRlbSA9IHt9O1xuICAgICAgICAgICAgJHByZXZpZXdVaWRzID0gW107XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBhc3luYyBmdW5jdGlvbiB1cGxvYWQoKSB7XG4gICAgICAgIHVwZGF0ZVByZXZpZXcoeyBhY3Rpb246IFwiY2xlYXJcIiB9KTtcbiAgICAgICAgc2Nyb2xsVG9SaWdodCgpO1xuICAgICAgICBzaG93VXBsb2FkID0gdHJ1ZTtcbiAgICAgICAgYXdhaXQgdXRpbHMudGltZW91dCgxKTtcbiAgICAgICAgY29uc3QgdXBsb2FkRWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnVwbG9hZC13cmFwcGVyXCIpO1xuICAgICAgICB1cGxvYWRFbC5jbGFzc0xpc3QuYWRkKFwicGF0LXVwbG9hZFwiKTtcbiAgICAgICAgY29uc3QgcGF0VXBsb2FkID0gbmV3IFVwbG9hZCh1cGxvYWRFbCwge1xuICAgICAgICAgICAgYmFzZVVybDogJGNvbmZpZy5yb290VXJsLFxuICAgICAgICAgICAgY3VycmVudFBhdGg6ICRjdXJyZW50UGF0aCxcbiAgICAgICAgICAgIHJlbGF0aXZlUGF0aDogXCJAQGZpbGVVcGxvYWRcIixcbiAgICAgICAgICAgIGFsbG93UGF0aFNlbGVjdGlvbjogZmFsc2UsXG4gICAgICAgICAgICBoaWRkZW5JbnB1dENvbnRhaW5lcjogXCIudXBsb2FkLXdyYXBwZXJcIixcbiAgICAgICAgICAgIHN1Y2Nlc3M6IChmaWxldXBsb2FkLCBvYmopID0+IHtcbiAgICAgICAgICAgICAgICB1cGRhdGVQcmV2aWV3KHtcbiAgICAgICAgICAgICAgICAgICAgdXVpZDogb2JqLlVJRCxcbiAgICAgICAgICAgICAgICAgICAgYWN0aW9uOiBcImFkZFwiLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHF1ZXVlY29tcGxldGU6IChmaWxlVXBsb2FkLCBvYmopID0+IHtcbiAgICAgICAgICAgICAgICBjb250ZW50SXRlbXMuZ2V0KHsgcGF0aDogJGN1cnJlbnRQYXRoLCB1cGRhdGVDYWNoZTogdHJ1ZSB9KTtcbiAgICAgICAgICAgICAgICBzaG93VXBsb2FkID0gZmFsc2U7XG4gICAgICAgICAgICB9LFxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBzaG93UHJldmlldyhpdGVtKSB7XG4gICAgICAgIGlmICgkY29uZmlnLm1vZGUgPT0gXCJicm93c2VcIikge1xuICAgICAgICAgICAgJHByZXZpZXdVaWRzID0gW2l0ZW0uVUlEXTtcblxuICAgICAgICAgICAgaWYgKGl0ZW0uaXNfZm9sZGVyaXNoKSB7XG4gICAgICAgICAgICAgICAgLy8gc2hvdyBmb2xkZXJcbiAgICAgICAgICAgICAgICBjdXJyZW50UGF0aC5zZXQoaXRlbS5wYXRoKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8gc2hvdyBub24gZm9sZGVyaXNoIHByZXZpZXdcbiAgICAgICAgICAgICAgICBjb25zdCBwYXRoUGFydHMgPSBpdGVtLnBhdGguc3BsaXQoXCIvXCIpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGZvbGRlclBhdGggPSBwYXRoUGFydHMuc2xpY2UoMCwgcGF0aFBhcnRzLmxlbmd0aCAtIDEpLmpvaW4oXCIvXCIpO1xuICAgICAgICAgICAgICAgIGN1cnJlbnRQYXRoLnNldChmb2xkZXJQYXRoIHx8IFwiL1wiKTtcbiAgICAgICAgICAgICAgICB1cGRhdGVQcmV2aWV3KHsgZGF0YTogaXRlbSB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHVwZGF0ZVByZXZpZXcoeyBkYXRhOiBpdGVtIH0pO1xuICAgICAgICB9XG4gICAgICAgIHNjcm9sbFRvUmlnaHQoKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBjaGFuZ2VQYXRoKGl0ZW0sIGUpIHtcbiAgICAgICAgLy8gYWx3YXlzIGhpZGUgdXBsb2FkIHdoZW4gY2hhbmdpbmcgcGF0aFxuICAgICAgICBzaG93VXBsb2FkID0gZmFsc2U7XG5cbiAgICAgICAgLy8gY2xlYXIgcHJldmlvdXMgc2VsZWN0aW9uXG4gICAgICAgIHVwZGF0ZVByZXZpZXcoeyBhY3Rpb246IFwiY2xlYXJcIiB9KTtcblxuICAgICAgICBpZiAoaXRlbSA9PT0gXCIvXCIgfHwgaXRlbSA9PT0gJGNvbmZpZy5yb290UGF0aCkge1xuICAgICAgICAgICAgLy8gY2xpY2tlZCBcImhvbWVcIiBidXR0b25cbiAgICAgICAgICAgIGN1cnJlbnRQYXRoLnNldCgkY29uZmlnLnJvb3RQYXRoKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIHNob3cgY2xpY2tlZCBpdGVtXG4gICAgICAgIHNob3dQcmV2aWV3KGl0ZW0pO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGNsaWNrSXRlbShpdGVtLCBlKSB7XG4gICAgICAgIGlmICgha2V5Ym9hcmROYXZJbml0aWFsaXplZCkge1xuICAgICAgICAgICAgLy8gaWYgd2UndmUgYWxyZWFkeSBjbGlja2VkIGFuIGVsZW1lbnQgd2l0aCB0aGUgbW91c2VcbiAgICAgICAgICAgIC8vIGRvIG5vdCBzdGFydCBvdmVyIGtleWJvYXJkbmF2XG4gICAgICAgICAgICBrZXlib2FyZE5hdkluaXRpYWxpemVkID0gdHJ1ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIGNoZWNrIGZvciBtdWx0aXNlbGVjdGlvblxuICAgICAgICBjb25zdCBsZXZlbFdyYXBwZXIgPSBlLmN1cnJlbnRUYXJnZXQuY2xvc2VzdChcIi5sZXZlbEl0ZW1zXCIpO1xuICAgICAgICBsZXQgcHJldlNlbGVjdGlvbiA9IGxldmVsV3JhcHBlci5xdWVyeVNlbGVjdG9yQWxsKFwiLnNlbGVjdGVkSXRlbVwiKTtcblxuICAgICAgICBpZiAocHJldlNlbGVjdGlvbi5sZW5ndGggJiYgJGNvbmZpZy5tYXhpbXVtU2VsZWN0aW9uU2l6ZSAhPSAxKSB7XG4gICAgICAgICAgICAvLyBjaGVjayBmb3IgcHJlc3NlZCBzaGlmdCBvciBjdHJsL21ldGEga2V5IGZvciBtdWx0aXNlbGVjdGlvblxuICAgICAgICAgICAgaWYgKHNoaWZ0S2V5IHx8IGU/LnNoaWZ0S2V5KSB7XG4gICAgICAgICAgICAgICAgLy8gaXRlciB0aHJvdWdoIHRoZSB3cmFwcGVyIGNoaWxkcmVuIGFuZCBzZWxlY3QgYWxsXG4gICAgICAgICAgICAgICAgLy8gaW5iZXR3ZWVuIGN1cnJlbnQgc2VsZWN0aW9uIGFuZCBsYXN0IHByZXZpZXdcbiAgICAgICAgICAgICAgICBsZXQgc2VsZWN0ID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBlbCBvZiBsZXZlbFdyYXBwZXIuY2hpbGRyZW4pIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKFtpdGVtLlVJRCwgJHByZXZpZXdVaWRzWzBdXS5pbmRleE9mKGVsLmRhdGFzZXQudXVpZCkgIT09IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoc2VsZWN0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gc3RvcCBzZWxlY3RpbmcgYnV0IG1ha2Ugc3VyZSB0aGUgbGFzdCBpdGVtIGlzIHNlbGVjdGVkIHRvb1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVwZGF0ZVByZXZpZXcoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1dWlkOiBlbC5kYXRhc2V0LnV1aWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjdGlvbjogXCJhZGRcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxlY3QgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHN0YXJ0IHNlbGVjdGluZ1xuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZWN0ID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB1cGRhdGVQcmV2aWV3KHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHV1aWQ6IGVsLmRhdGFzZXQudXVpZCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGFjdGlvbjogc2VsZWN0ID8gXCJhZGRcIiA6IFwicmVtb3ZlXCIsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBzaGlmdEtleSA9IGZhbHNlO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChlPy5tZXRhS2V5IHx8IGU/LmN0cmxLZXkpIHtcbiAgICAgICAgICAgICAgICAvLyBkZS9zZWxlY3QgbXVsdGlwbGUgc2luZ2xlIGl0ZW1zXG4gICAgICAgICAgICAgICAgLy8gTk9URTogb25seSBmb3IgbW91c2UgY2xpY2sgZXZlbnRcbiAgICAgICAgICAgICAgICB1cGRhdGVQcmV2aWV3KHtcbiAgICAgICAgICAgICAgICAgICAgdXVpZDogaXRlbS5VSUQsXG4gICAgICAgICAgICAgICAgICAgIGFjdGlvbjogJHByZXZpZXdVaWRzLmluZGV4T2YoaXRlbS5VSUQpID09IC0xID8gXCJhZGRcIiA6IFwicmVtb3ZlXCIsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vIHVuc2VsZWN0XG4gICAgICAgICAgICAgICAgWy4uLnByZXZTZWxlY3Rpb25dLm1hcCgoZWwpID0+IGVsLmNsYXNzTGlzdC5yZW1vdmUoXCJzZWxlY3RlZEl0ZW1cIikpO1xuICAgICAgICAgICAgICAgIGNoYW5nZVBhdGgoaXRlbSwgZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjaGFuZ2VQYXRoKGl0ZW0sIGUpO1xuICAgICAgICB9XG5cbiAgICAgICAgZS5jdXJyZW50VGFyZ2V0LmZvY3VzKCk7IC8vIG5lZWRlZCBmb3Iga2V5Ym9hcmQgbmF2aWdhdGlvblxuICAgICAgICBlLmN1cnJlbnRUYXJnZXQuY2xhc3NMaXN0LmFkZChcInNlbGVjdGVkSXRlbVwiKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBpbml0S2V5Ym9hcmROYXYoKSB7XG4gICAgICAgIC8vIGZvY3VzIGZpcnN0IGVsZW1lbnQgd2hlbiBzaG93aW5nIGNvbnRlbnRicm93c2VyXG4gICAgICAgIGlmIChrZXlib2FyZE5hdkluaXRpYWxpemVkKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcG9zc2libGVGb2N1c0VscyA9IFtcbiAgICAgICAgICAgIC4uLmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIubGV2ZWxDb2x1bW4gLmluUGF0aFwiKSwgLy8gcHJldmlvdXNseSBzZWxlY3RlZCBmb2xkZXJcbiAgICAgICAgICAgIC4uLmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIubGV2ZWxDb2x1bW4gLnNlbGVjdGVkSXRlbVwiKSwgLy8gcHJldmlvdXNseSBzZWxlY3RlZCBpdGVtXG4gICAgICAgIF07XG4gICAgICAgIGlmIChcbiAgICAgICAgICAgICFwb3NzaWJsZUZvY3VzRWxzLmxlbmd0aCAmJlxuICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5sZXZlbENvbHVtbiAuY29udGVudEl0ZW1cIilcbiAgICAgICAgKSB7XG4gICAgICAgICAgICBwb3NzaWJsZUZvY3VzRWxzLnB1c2goZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5sZXZlbENvbHVtbiAuY29udGVudEl0ZW1cIikpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChwb3NzaWJsZUZvY3VzRWxzLmxlbmd0aCkge1xuICAgICAgICAgICAga2V5Ym9hcmROYXZJbml0aWFsaXplZCA9IHRydWU7XG4gICAgICAgICAgICBwb3NzaWJsZUZvY3VzRWxzWzBdLmZvY3VzKCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBrZXlib2FyZE5hdmlnYXRpb24oaXRlbSwgZSkge1xuICAgICAgICBjb25zdCBub2RlID0gZS5jdXJyZW50VGFyZ2V0O1xuICAgICAgICBzaGlmdEtleSA9IGUuc2hpZnRLZXk7XG4gICAgICAgIGlmIChlLmtleSA9PSBcIkVzY2FwZVwiKSB7XG4gICAgICAgICAgICBjbG9zZUJyb3dzZXIoKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoXG4gICAgICAgICAgICBlLmtleSA9PSBcIkFycm93RG93blwiICYmXG4gICAgICAgICAgICBub2RlPy5uZXh0RWxlbWVudFNpYmxpbmc/LmNsYXNzTGlzdC5jb250YWlucyhcImNvbnRlbnRJdGVtXCIpXG4gICAgICAgICkge1xuICAgICAgICAgICAgbm9kZS5uZXh0RWxlbWVudFNpYmxpbmcuY2xpY2soKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoXG4gICAgICAgICAgICBlLmtleSA9PSBcIkFycm93VXBcIiAmJlxuICAgICAgICAgICAgbm9kZT8ucHJldmlvdXNFbGVtZW50U2libGluZz8uY2xhc3NMaXN0LmNvbnRhaW5zKFwiY29udGVudEl0ZW1cIilcbiAgICAgICAgKSB7XG4gICAgICAgICAgICBub2RlLnByZXZpb3VzRWxlbWVudFNpYmxpbmcuY2xpY2soKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZS5rZXkgPT0gXCJBcnJvd1JpZ2h0XCIpIHtcbiAgICAgICAgICAgIGNvbnN0IGN1cnJDb2wgPSBlLnRhcmdldC5jbG9zZXN0KFwiLmxldmVsQ29sdW1uXCIpO1xuICAgICAgICAgICAgY29uc3Qgbnh0Q29sID0gY3VyckNvbD8ubmV4dEVsZW1lbnRTaWJsaW5nO1xuICAgICAgICAgICAgaWYgKCFueHRDb2wgfHwgIW54dENvbC5jbGFzc0xpc3QuY29udGFpbnMoXCJsZXZlbENvbHVtblwiKSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIG54dENvbC5xdWVyeVNlbGVjdG9yKFwiLmNvbnRlbnRJdGVtXCIpPy5jbGljaygpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChlLmtleSA9PSBcIkFycm93TGVmdFwiKSB7XG4gICAgICAgICAgICBjb25zdCBjdXJyQ29sID0gZS50YXJnZXQuY2xvc2VzdChcIi5sZXZlbENvbHVtblwiKTtcbiAgICAgICAgICAgIGNvbnN0IHByZXZDb2wgPSBjdXJyQ29sPy5wcmV2aW91c0VsZW1lbnRTaWJsaW5nO1xuICAgICAgICAgICAgaWYgKCFwcmV2Q29sIHx8ICFwcmV2Q29sLmNsYXNzTGlzdC5jb250YWlucyhcImxldmVsQ29sdW1uXCIpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcHJldkNvbC5xdWVyeVNlbGVjdG9yKFwiLmluUGF0aFwiKS5jbGljaygpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChlLmtleSA9PSBcIlNwYWNlXCIpIHtcbiAgICAgICAgICAgIC8vIGFkZCBpdGVtIHRvIHNlbGVjdGlvbiAobGlrZSBtZXRhS2V5ICsgY2xpY2spXG4gICAgICAgICAgICBjbGlja0l0ZW0oaXRlbSwgZSwgdHJ1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGUua2V5ID09IFwiRW50ZXJcIikge1xuICAgICAgICAgICAgaWYgKGlzU2VsZWN0YWJsZShpdGVtKSkge1xuICAgICAgICAgICAgICAgIGlmICgkY29uZmlnLm1heGltdW1TZWxlY3Rpb25TaXplID09IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgYWRkSXRlbShpdGVtKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBhZGRTZWxlY3RlZEl0ZW1zKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgYXN5bmMgZnVuY3Rpb24gYWRkSXRlbShpdGVtKSB7XG4gICAgICAgIGlmICgkY29uZmlnLm1heGltdW1TZWxlY3Rpb25TaXplID09IDEpIHtcbiAgICAgICAgICAgIHNlbGVjdGVkSXRlbXMuc2V0KFtpdGVtXSk7XG4gICAgICAgICAgICBzZWxlY3RlZFVpZHMuc2V0KFtpdGVtLlVJRF0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgc2VsZWN0ZWRJdGVtcy51cGRhdGUoKG4pID0+IFsuLi5uLCBpdGVtXSk7XG4gICAgICAgICAgICBzZWxlY3RlZFVpZHMudXBkYXRlKCgpID0+ICRzZWxlY3RlZEl0ZW1zLm1hcCgoeCkgPT4geC5VSUQpKTtcbiAgICAgICAgfVxuICAgICAgICB1cGRhdGVSZWNlbnRseVVzZWQoaXRlbSwgJGNvbmZpZyk7XG4gICAgICAgIGNsb3NlQnJvd3NlcigpO1xuICAgIH1cblxuICAgIGFzeW5jIGZ1bmN0aW9uIGFkZFNlbGVjdGVkSXRlbXMoKSB7XG4gICAgICAgIGNvbnN0IHByZXZpZXdJdGVtcyA9IGF3YWl0IGdldF9pdGVtc19mcm9tX3VpZHMoJHByZXZpZXdVaWRzLCAkY29uZmlnKTtcbiAgICAgICAgc2VsZWN0ZWRJdGVtcy51cGRhdGUoKG4pID0+IHtcbiAgICAgICAgICAgIGZvciAoY29uc3QgaXQgb2YgcHJldmlld0l0ZW1zKSB7XG4gICAgICAgICAgICAgICAgaWYgKCRzZWxlY3RlZFVpZHMuaW5kZXhPZihpdC5VSUQpICE9IC0xKSBjb250aW51ZTtcbiAgICAgICAgICAgICAgICBuLnB1c2goaXQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIG47XG4gICAgICAgIH0pO1xuICAgICAgICBzZWxlY3RlZFVpZHMudXBkYXRlKCgpID0+ICRzZWxlY3RlZEl0ZW1zLm1hcCgoeCkgPT4geC5VSUQpKTtcbiAgICAgICAgY2xvc2VCcm93c2VyKCk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gc2VsZWN0UmVjZW50bHlVc2VkKGV2ZW50KSB7XG4gICAgICAgIGFkZEl0ZW0oZXZlbnQuZGV0YWlsLml0ZW0pO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGl0ZW1JZChpdGVtKSB7XG4gICAgICAgIHJldHVybiBpdGVtLnBhdGg/LnNwbGl0KFwiL1wiKS5wb3AoKSB8fCBcIi0gbm8gaWQgLVwiO1xuICAgIH1cblxuICAgIGFzeW5jIGZ1bmN0aW9uIHNlbGVjdEZhdm9yaXRlKGV2ZW50KSB7XG4gICAgICAgIGNvbnN0IHBhdGggPSBldmVudC5kZXRhaWwuaXRlbS5wYXRoO1xuICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHJlcXVlc3Qoe1xuICAgICAgICAgICAgdm9jYWJ1bGFyeVVybDogJGNvbmZpZy52b2NhYnVsYXJ5VXJsLFxuICAgICAgICAgICAgYXR0cmlidXRlczogJGNvbmZpZy5hdHRyaWJ1dGVzLFxuICAgICAgICAgICAgbGV2ZWxJbmZvUGF0aDogcGF0aCxcbiAgICAgICAgfSk7XG4gICAgICAgIGlmICghcmVzcG9uc2UudG90YWwpIHtcbiAgICAgICAgICAgIGFsZXJ0KGAke3BhdGh9IG5vdCBmb3VuZCFgKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBpdGVtID0gcmVzcG9uc2UucmVzdWx0c1swXTtcbiAgICAgICAgaWYgKCFpdGVtLnBhdGgpIHtcbiAgICAgICAgICAgIC8vIGZpeCBmb3Igcm9vdFxuICAgICAgICAgICAgaXRlbS5wYXRoID0gJGNvbmZpZy5yb290UGF0aDtcbiAgICAgICAgfVxuICAgICAgICBjaGFuZ2VQYXRoKGl0ZW0pO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGNsb3NlQnJvd3NlcigpIHtcbiAgICAgICAgLy8gaGlkZSBsZXZlbGZpbHRlciBhbmQgY2xlYXIgYWxsIGZpbHRlcnNcbiAgICAgICAgZmlsdGVyTGV2ZWwoXCJcIik7XG4gICAgICAgIC8vIGNsZWFyIHNlYXJjaFxuICAgICAgICBzZWFyY2hUZXJtID0gbnVsbDtcbiAgICAgICAgJGNvbmZpZy5tb2RlID0gZGVmYXVsdENvbmZpZ01vZGU7XG4gICAgICAgICRzaG93Q29udGVudEJyb3dzZXIgPSBmYWxzZTtcbiAgICAgICAga2V5Ym9hcmROYXZJbml0aWFsaXplZCA9IGZhbHNlO1xuICAgICAgICB1cGRhdGVQcmV2aWV3KHsgYWN0aW9uOiBcImNsZWFyXCIgfSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gaXNTZWxlY3RhYmxlKGl0ZW0pIHtcbiAgICAgICAgcmV0dXJuICRzZWxlY3RlZFVpZHMuaW5kZXhPZihpdGVtLlVJRCkgPT09IC0xO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHNjcm9sbFRvUmlnaHQoKSB7XG4gICAgICAgIGNvbnN0IHNjcm9sbENvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubGV2ZWxDb2x1bW5zXCIpO1xuICAgICAgICBpZiAoc2Nyb2xsQ29udGFpbmVyKSB7XG4gICAgICAgICAgICBhbmltYXRlU2Nyb2xsLnNjcm9sbFRvKHtcbiAgICAgICAgICAgICAgICAvLyBlbGVtZW50OiBcIi5sZXZlbENvbHVtbjpsYXN0LWNoaWxkXCIsXG4gICAgICAgICAgICAgICAgeDogc2Nyb2xsQ29udGFpbmVyLnNjcm9sbFdpZHRoICsgMTAwLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBpdGVtSW5QYXRoKGl0ZW0pIHtcbiAgICAgICAgY29uc3QgaXRlbV9wYXRoID0gaXRlbS5wYXRoLnNwbGl0KFwiL1wiKTtcbiAgICAgICAgY29uc3QgY3Vycl9wYXRoID0gJGN1cnJlbnRQYXRoLnNwbGl0KFwiL1wiKTtcbiAgICAgICAgbGV0IGluX3BhdGggPSB0cnVlO1xuICAgICAgICBmb3IgKGNvbnN0IGlkeCBpbiBpdGVtX3BhdGgpIHtcbiAgICAgICAgICAgIC8vIGNoZWNrIHBhdGggcGFydHMgdG8gYmUgZXF1YWxcbiAgICAgICAgICAgIGluX3BhdGggPSBpbl9wYXRoICYmIGl0ZW1fcGF0aFtpZHhdID09PSBjdXJyX3BhdGhbaWR4XTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gaW5fcGF0aDtcbiAgICB9XG5cbiAgICBjb25zdCBzZWFyY2hJdGVtc0tleXVwID0gdXRpbHMuZGVib3VuY2UoYXN5bmMgKGUpID0+IHtcbiAgICAgICAgYXdhaXQgc2VhcmNoSXRlbXMoZS50YXJnZXQudmFsdWUpO1xuICAgIH0sIDMwMCk7XG5cbiAgICBhc3luYyBmdW5jdGlvbiBzZWFyY2hJdGVtcyh2YWwpIHtcbiAgICAgICAgc2VhcmNoVGVybSA9IHZhbDtcbiAgICAgICAgaWYgKGRlZmF1bHRDb25maWdNb2RlID09PSBcImJyb3dzZVwiKSB7XG4gICAgICAgICAgICAvLyBzd2l0Y2hpbmcgdG8gc2VhcmNoIG1vZGUgaW4gZ2xvYmFsIHNlYXJjaCBpZiBjb25maWd1cmVkIGFzIFwiYnJvd3NlXCIgbW9kZVxuICAgICAgICAgICAgJGNvbmZpZy5tb2RlID0gc2VhcmNoVGVybSAhPT0gXCJcIiA/IFwic2VhcmNoXCIgOiBcImJyb3dzZVwiO1xuICAgICAgICB9XG4gICAgICAgIGF3YWl0IGNvbnRlbnRJdGVtcy5nZXQoe1xuICAgICAgICAgICAgcGF0aDogJGN1cnJlbnRQYXRoLFxuICAgICAgICAgICAgc2VhcmNoVGVybTogc2VhcmNoVGVybSxcbiAgICAgICAgICAgIG1vZGU6ICRjb25maWcubW9kZSxcbiAgICAgICAgfSk7XG4gICAgICAgIHVwZGF0ZVByZXZpZXcoeyBhY3Rpb246IFwiY2xlYXJcIiB9KTtcbiAgICAgICAgaWYgKCF2YWwpIHtcbiAgICAgICAgICAgIHNjcm9sbFRvUmlnaHQoKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGNvbnN0IGZpbHRlckxldmVsS2V5dXAgPSB1dGlscy5kZWJvdW5jZShhc3luYyAoZSkgPT4ge1xuICAgICAgICBhd2FpdCBmaWx0ZXJMZXZlbChlLnRhcmdldC52YWx1ZSk7XG4gICAgfSwgMzAwKTtcblxuICAgIGNvbnN0IGZpbHRlckxldmVsID0gYXN5bmMgKHZhbCkgPT4ge1xuICAgICAgICBpZiAodmFsICE9PSBcIlwiKSB7XG4gICAgICAgICAgICB1cGRhdGVQcmV2aWV3KHsgYWN0aW9uOiBcImNsZWFyXCIgfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBzY3JvbGxUb1JpZ2h0KCk7XG4gICAgICAgIH1cbiAgICAgICAgYXdhaXQgY29udGVudEl0ZW1zLmdldCh7XG4gICAgICAgICAgICBwYXRoOiAkY3VycmVudFBhdGgsXG4gICAgICAgICAgICBzZWFyY2hUZXJtOiB2YWwsXG4gICAgICAgICAgICB1cGRhdGVDYWNoZTogdHJ1ZSxcbiAgICAgICAgfSk7XG4gICAgfTtcblxuICAgIGZ1bmN0aW9uIGxvYWRNb3JlKG5vZGUpIHtcbiAgICAgICAgY29uc3Qgb2JzZXJ2ZXIgPSBuZXcgSW50ZXJzZWN0aW9uT2JzZXJ2ZXIoXG4gICAgICAgICAgICAoZW50cmllcykgPT4ge1xuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgZW50cnkgb2YgZW50cmllcykge1xuICAgICAgICAgICAgICAgICAgICBpZiAoZW50cnkuaXNJbnRlcnNlY3RpbmcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnRJdGVtcy5nZXQoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvYWRNb3JlUGF0aDogbm9kZS5kYXRhc2V0LmxldmVsUGF0aCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYWdlOiArbm9kZS5kYXRhc2V0LmxldmVsTmV4dFBhZ2UsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VhcmNoVGVybTogbm9kZS5kYXRhc2V0LnNlYXJjaFRlcm0sXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB7IHRocmVzaG9sZDogMCwgcm9vdDogbnVsbCwgbWFyZ2luOiBcIjBweFwiIH0sXG4gICAgICAgICk7XG4gICAgICAgIC8vIGRlZmVyIG9ic2VydmluZ1xuICAgICAgICB3aW5kb3cuc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICBvYnNlcnZlci5vYnNlcnZlKG5vZGUpO1xuICAgICAgICB9LCAzMDApO1xuICAgIH1cblxuICAgICQ6IHtcbiAgICAgICAgaWYgKCRzaG93Q29udGVudEJyb3dzZXIpIHtcbiAgICAgICAgICAgIGNvbnRlbnRJdGVtcy5nZXQoeyBwYXRoOiAkY3VycmVudFBhdGggfSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAkOiB7XG4gICAgICAgICRjb250ZW50SXRlbXM7XG4gICAgICAgIHNjcm9sbFRvUmlnaHQoKTtcbiAgICB9XG5cbiAgICAkOiB7XG4gICAgICAgICRwcmV2aWV3VWlkcztcbiAgICB9XG48L3NjcmlwdD5cblxueyNpZiAkc2hvd0NvbnRlbnRCcm93c2VyfVxuICAgIDxkaXYgY2xhc3M9XCJjb250ZW50LWJyb3dzZXItcG9zaXRpb24td3JhcHBlclwiPlxuICAgICAgICA8bmF2XG4gICAgICAgICAgICBjbGFzcz1cImNvbnRlbnQtYnJvd3NlclwiXG4gICAgICAgICAgICB0cmFuc2l0aW9uOmZseT17eyB4OiAodncgLyAxMDApICogOTQsIG9wYWNpdHk6IDEgfX1cbiAgICAgICAgICAgIG9uOmludHJvZW5kPXsoKSA9PiB7XG4gICAgICAgICAgICAgICAgc2Nyb2xsVG9SaWdodCgpO1xuICAgICAgICAgICAgICAgIGluaXRLZXlib2FyZE5hdigpO1xuICAgICAgICAgICAgfX1cbiAgICAgICAgICAgIHVzZTpjbGlja091dHNpZGVcbiAgICAgICAgICAgIG9uOmNsaWNrX291dHNpZGU9e2Nsb3NlQnJvd3Nlcn1cbiAgICAgICAgPlxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cInRvb2xCYXIgbmF2YmFyXCI+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImlucHV0LWdyb3VwIHctYXV0b1wiPlxuICAgICAgICAgICAgICAgICAgICA8aW5wdXRcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU9XCJ0ZXh0XCJcbiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU9XCJmaWx0ZXJcIlxuICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3M9XCJmb3JtLWNvbnRyb2wgZm9ybS1jb250cm9sLXNtXCJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlPXtzZWFyY2hUZXJtfVxuICAgICAgICAgICAgICAgICAgICAgICAgb246aW5wdXQ9e3NlYXJjaEl0ZW1zS2V5dXB9XG4gICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgIHsjaWYgc2VhcmNoVGVybX1cbiAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzcz1cImJ0biBidG4tbGlnaHQgYnRuLXNtXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlPVwiYnV0dG9uXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbjpjbGlja3xwcmV2ZW50RGVmYXVsdD17KCkgPT4gc2VhcmNoSXRlbXMoXCJcIil9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPjxzdmcgdXNlOnJlc29sdmVJY29uPXt7IGljb25OYW1lOiBcInhcIiB9fSAvPjwvYnV0dG9uXG4gICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgIHsvaWZ9XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgPFJlY2VudGx5VXNlZCBvbjpzZWxlY3RJdGVtPXtzZWxlY3RSZWNlbnRseVVzZWR9IC8+XG4gICAgICAgICAgICAgICAgPEZhdm9yaXRlcyBvbjpzZWxlY3RJdGVtPXtzZWxlY3RGYXZvcml0ZX0gLz5cbiAgICAgICAgICAgICAgICB7I2lmICRjb25maWcudXBsb2FkRW5hYmxlZCAmJiAkY29uZmlnLm1vZGUgPT0gXCJicm93c2VcIn1cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cIm1zLTJcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlPVwiYnV0dG9uXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzcz1cInVwbG9hZCBidG4gYnRuLW91dGxpbmUtbGlnaHQgYnRuLXNtXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YWJpbmRleD1cIjBcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uOmtleWRvd249e3VwbG9hZH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbjpjbGljaz17dXBsb2FkfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgID48c3ZnIHVzZTpyZXNvbHZlSWNvbj17eyBpY29uTmFtZTogXCJ1cGxvYWRcIiB9fSAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtfdChcInVwbG9hZCB0byAke2N1cnJlbnRfcGF0aH1cIiwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50X3BhdGg6ICRjdXJyZW50UGF0aCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KX08L2J1dHRvblxuICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICB7L2lmfVxuICAgICAgICAgICAgICAgIDxidXR0b25cbiAgICAgICAgICAgICAgICAgICAgY2xhc3M9XCJidG4gYnRuLWxpbmsgdGV4dC13aGl0ZSBtcy1hdXRvXCJcbiAgICAgICAgICAgICAgICAgICAgdGFiaW5kZXg9XCIwXCJcbiAgICAgICAgICAgICAgICAgICAgb246Y2xpY2t8cHJldmVudERlZmF1bHQ9eygpID0+IGNsb3NlQnJvd3NlcigpfVxuICAgICAgICAgICAgICAgICAgICA+PHN2ZyB1c2U6cmVzb2x2ZUljb249e3sgaWNvbk5hbWU6IFwieC1jaXJjbGVcIiB9fSAvPjwvYnV0dG9uXG4gICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICB7I2F3YWl0ICRjb250ZW50SXRlbXN9XG4gICAgICAgICAgICAgICAgPHA+e190KFwibG9hZGluZyBjb250ZW50IGl0ZW1zXCIpfTwvcD5cbiAgICAgICAgICAgIHs6dGhlbiBsZXZlbHN9XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImxldmVsQ29sdW1uc1wiPlxuICAgICAgICAgICAgICAgICAgICB7I2VhY2ggbGV2ZWxzIGFzIGxldmVsLCBpIChsZXZlbC5wYXRoKX1cbiAgICAgICAgICAgICAgICAgICAgICAgIHsjaWYgJHByZXZpZXdVaWRzLmxlbmd0aCA8IDIgfHwgISRwcmV2aWV3VWlkcy5pbmNsdWRlcyhsZXZlbC5VSUQpfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3M9XCJsZXZlbENvbHVtbntpICUgMiA9PSAwID8gJyBvZGQnIDogJyBldmVuJ30ge2kgPT09XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldmVscy5sZW5ndGggLSAxXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/ICdhY3RpdmUnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6ICcnfVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluOmZseXxsb2NhbD17eyBkdXJhdGlvbjogNTAwIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwibGV2ZWxUb29sYmFyXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7I2lmIGkgPT0gMCAmJiAkY29uZmlnLm1vZGUgPT0gXCJicm93c2VcIn1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU9XCJidXR0b25cIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzcz1cImJ0biBidG4tbGluayBidG4teHMgcHMtMFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhYmluZGV4PVwiMFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uOmtleWRvd249eygpID0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGFuZ2VQYXRoKCRjb25maWcucm9vdFBhdGgpfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbjpjbGljaz17KCkgPT4gY2hhbmdlUGF0aCgkY29uZmlnLnJvb3RQYXRoKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPjxzdmdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVzZTpyZXNvbHZlSWNvbj17eyBpY29uTmFtZTogXCJob3VzZVwiIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+PC9idXR0b25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7L2lmfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeyNpZiBpID09IGxldmVscy5sZW5ndGggLSAxfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsjaWYgbGV2ZWwuc2VsZWN0YWJsZSAmJiAhbGV2ZWwuc2hvd0ZpbHRlciAmJiAhcHJldmlld0l0ZW0uVUlEfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzcz1cImJ0biBidG4teHMgYnRuLW91dGxpbmUtcHJpbWFyeSBkLWZsZXggYWxpZ24taXRlbXMtY2VudGVyXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlPXtfdChcInNlbGVjdCAke2xldmVsX3BhdGh9XCIsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXZlbF9wYXRoOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXZlbC5UaXRsZSB8fCBpdGVtSWQobGV2ZWwpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaXNhYmxlZD17IWlzU2VsZWN0YWJsZShsZXZlbCl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbjpjbGlja3xwcmV2ZW50RGVmYXVsdD17KCkgPT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhZGRJdGVtKGxldmVsKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID48c3ZnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXNlOnJlc29sdmVJY29uPXt7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGljb25OYW1lOiBcInBsdXNcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwic2VsZWN0LWJ1dHRvbi1lbGxpcHNpc1wiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPntsZXZlbC5UaXRsZSB8fCBpdGVtSWQobGV2ZWwpfTwvc3BhblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPjwvYnV0dG9uXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7L2lmfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJsZXZlbEFjdGlvbnNcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeyNpZiAkY29uZmlnLm1vZGUgIT09IFwic2VhcmNoXCJ9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7I2lmIGxldmVsLnNlYXJjaFRlcm0gfHwgbGV2ZWwuc2hvd0ZpbHRlcn1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZT1cInRleHRcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lPVwibGV2ZWxGaWx0ZXJcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzcz1cImZvcm0tY29udHJvbCBmb3JtLWNvbnRyb2wtc21cIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZT17bGV2ZWwuc2VhcmNoVGVybSB8fCBcIlwifVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbjppbnB1dD17ZmlsdGVyTGV2ZWxLZXl1cH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3M9XCJidG4gYnRuLWxpbmsgYnRuLXhzIGxldmVsLWZpbHRlclwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlPXtfdChcImNsZWFyIGZpbHRlclwiKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb246Y2xpY2t8cHJldmVudERlZmF1bHQ9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbHRlckxldmVsKFwiXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV2ZWwuc2hvd0ZpbHRlciA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHN2Z1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXNlOnJlc29sdmVJY29uPXt7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWNvbk5hbWU6IFwieFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz48L2J1dHRvblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHs6ZWxzZX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzPVwiYnRuIGJ0bi1saW5rIGJ0bi14cyBsZXZlbC1maWx0ZXJcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aXRsZT17X3QoXCJsZXZlbCBmaWx0ZXJcIil9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uOmNsaWNrfHByZXZlbnREZWZhdWx0PXsoKSA9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGxldmVsLnNob3dGaWx0ZXIgPSB0cnVlKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzdmdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVzZTpyZXNvbHZlSWNvbj17e1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGljb25OYW1lOiBcImZpbHRlclwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz48L2J1dHRvblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsvaWZ9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsvaWZ9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsjaWYgIWdyaWRWaWV3fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzPVwiYnRuIGJ0bi1saW5rIGJ0bi14cyBncmlkLXZpZXdcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlPXtfdChcImdyaWQgdmlld1wiKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbjpjbGljaz17KCkgPT4gKGdyaWRWaWV3ID0gdHJ1ZSl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHN2Z1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1c2U6cmVzb2x2ZUljb249e3tcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGljb25OYW1lOiBcImdyaWRcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHs6ZWxzZX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzcz1cImJ0biBidG4tbGluayBidG4teHMgZ3JpZC12aWV3XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aXRsZT17X3QoXCJsaXN0IHZpZXdcIil9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb246Y2xpY2s9eygpID0+IChncmlkVmlldyA9IGZhbHNlKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3ZnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVzZTpyZXNvbHZlSWNvbj17e1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWNvbk5hbWU6IFwibGlzdFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgey9pZn1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsvaWZ9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwibGV2ZWxJdGVtc1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeyNlYWNoIGxldmVsLnJlc3VsdHMgfHwgW10gYXMgaXRlbSwgbn1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8IS0tIHN2ZWx0ZS1pZ25vcmUgbWlzc2luZy1kZWNsYXJhdGlvbiAtLT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzPVwiY29udGVudEl0ZW17biAlIDIgPT0gMFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyAnIG9kZCdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogJyBldmVuJ317aXRlbUluUGF0aChpdGVtKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyAnIGluUGF0aCdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogJyd9eyRwcmV2aWV3VWlkcy5pbmRleE9mKGl0ZW0uVUlEKSAhPVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAtMVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyAnIHNlbGVjdGVkSXRlbSdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogJyd9eyFpc1NlbGVjdGFibGUoaXRlbSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gJyB0ZXh0LWJvZHktdGVydGlhcnknXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6ICcnfVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvbGU9XCJidXR0b25cIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YWJpbmRleD17bn1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YS11dWlkPXtpdGVtLlVJRH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb246a2V5ZG93bnxwcmV2ZW50RGVmYXVsdD17KGUpID0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBrZXlib2FyZE5hdmlnYXRpb24oaXRlbSwgZSl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uOmNsaWNrPXsoZSkgPT4gY2xpY2tJdGVtKGl0ZW0sIGUpfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3M9e2dyaWRWaWV3XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBcImdyaWQtcHJldmlld1wiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBcIml0ZW0tdGl0bGVcIn1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlPVwie2l0ZW0ucGF0aH06IHtpdGVtLlRpdGxlIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXRlbUlkKGl0ZW0pfVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsjaWYgZ3JpZFZpZXcgJiYgaXRlbS5nZXRJY29ufVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbWdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3JjPXtgJHtpdGVtLmdldFVSTH0vQEBpbWFnZXMvaW1hZ2UvdGh1bWJgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbHQ9e2l0ZW0uVGl0bGUgfHwgaXRlbUlkKGl0ZW0pfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7OmVsc2V9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJwbG9uZS1pY29uXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzdmdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVzZTpyZXNvbHZlSWNvbj17e1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGljb25OYW1lOiBgY29udGVudHR5cGUvJHtpdGVtLnBvcnRhbF90eXBlLnRvTG93ZXJDYXNlKCkucmVwbGFjZSgvXFwufCAvZywgXCItXCIpfWAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsvaWZ9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzPXshaXRlbS5UaXRsZSA/IFwiaWQtb25seVwiIDogXCJcIn1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+e2l0ZW0uVGl0bGUgfHwgaXRlbUlkKGl0ZW0pfTwvc3BhblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeyNpZiAkY29uZmlnLm1vZGUgPT0gXCJzZWFyY2hcIn1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnIgLz48c3BhbiBjbGFzcz1cInNtYWxsXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPntpdGVtLnBhdGh9PC9zcGFuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgey9pZn1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsjaWYgaXRlbS5pc19mb2xkZXJpc2ggJiYgJGNvbmZpZy5tb2RlID09IFwiYnJvd3NlXCJ9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiYnJvd3NlU3ViXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHN2Z1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1c2U6cmVzb2x2ZUljb249e3tcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGljb25OYW1lOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiYXJyb3ctcmlnaHQtY2lyY2xlXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7L2lmfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgey9lYWNofVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeyNpZiBsZXZlbC5sb2FkX21vcmV9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzcz1cImxvYWRtb3JlXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YS1sZXZlbC1wYXRoPXtsZXZlbC5wYXRofVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhLXNlYXJjaC10ZXJtPXtzZWFyY2hUZXJtIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXZlbC5zZWFyY2hUZXJtfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhLWxldmVsLW5leHQtcGFnZT17K2xldmVsLnBhZ2UgKyAxfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1c2U6bG9hZE1vcmVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzPVwic3Bpbm5lci1ib3JkZXJcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcm9sZT1cInN0YXR1c1wiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID48L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsvaWZ9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7I2lmIGxldmVsLnRvdGFsID09IDB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImNvbnRlbnRJdGVtXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwPntfdChcIm5vIHJlc3VsdHMgZm91bmRcIil9PC9wPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgey9pZn1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICB7L2lmfVxuICAgICAgICAgICAgICAgICAgICB7L2VhY2h9XG4gICAgICAgICAgICAgICAgICAgIHsjaWYgcHJldmlld0l0ZW0/LlVJRCAmJiAkcHJldmlld1VpZHMubGVuZ3RoID09IDF9XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwicHJldmlld1wiIGluOmZseXxsb2NhbD17eyBkdXJhdGlvbjogNTAwIH19PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJsZXZlbFRvb2xiYXJcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInNlbGVjdExldmVsIG1lLTNcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsjaWYgaXNTZWxlY3RhYmxlKHByZXZpZXdJdGVtKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzPVwiYnRuIGJ0bi14cyBidG4tb3V0bGluZS1wcmltYXJ5IGQtZmxleCBhbGlnbi1pdGVtcy1jZW50ZXJcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aXRsZT17X3QoXCJzZWxlY3QgJHtwcmV2aWV3X3BhdGh9XCIsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByZXZpZXdfcGF0aDogcHJldmlld0l0ZW0uVGl0bGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbjpjbGlja3xwcmV2ZW50RGVmYXVsdD17KCkgPT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFkZEl0ZW0ocHJldmlld0l0ZW0pfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+PHN2Z1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXNlOnJlc29sdmVJY29uPXt7IGljb25OYW1lOiBcInBsdXNcIiB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cInNlbGVjdC1idXR0b24tZWxsaXBzaXNcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPntwcmV2aWV3SXRlbS5UaXRsZX08L3NwYW5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgey9pZn1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImluZm9cIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeyNpZiBwcmV2aWV3SXRlbS5nZXRJY29ufVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInByZXZpZXdJbWFnZVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbWdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3JjPVwie3ByZXZpZXdJdGVtLmdldFVSTH0vQEBpbWFnZXMvaW1hZ2UvcHJldmlld1wiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFsdD17cHJldmlld0l0ZW0uVGl0bGV9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7OmVsc2V9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwicHJldmlld0ljb25cIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3ZnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVzZTpyZXNvbHZlSWNvbj17e1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWNvbk5hbWU6IGBjb250ZW50dHlwZS8ke3ByZXZpZXdJdGVtLnBvcnRhbF90eXBlLnRvTG93ZXJDYXNlKCkucmVwbGFjZSgvXFwufCAvZywgXCItXCIpfWAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7L2lmfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGw+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZHQ+e190KFwiSWRcIil9PC9kdD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkZD57aXRlbUlkKHByZXZpZXdJdGVtKX08L2RkPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGR0PntfdChcIlRpdGxlXCIpfTwvZHQ+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGQ+e3ByZXZpZXdJdGVtLlRpdGxlfTwvZGQ+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7I2lmIHByZXZpZXdJdGVtLkRlc2NyaXB0aW9ufVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkdD57X3QoXCJEZXNjcmlwdGlvblwiKX08L2R0PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkZFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzcz1cInRleHQtdHJ1bmNhdGVcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aXRsZT17cHJldmlld0l0ZW0uRGVzY3JpcHRpb259XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7cHJldmlld0l0ZW0uRGVzY3JpcHRpb259XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kZD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsvaWZ9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7I2lmIHByZXZpZXdJdGVtLmNyZWF0ZWR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGR0PntfdChcImNyZWF0ZWRcIil9PC9kdD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGQ+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0aW1lIGRhdGV0aW1lPXtwcmV2aWV3SXRlbS5jcmVhdGVkfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPntmb3JtYXREYXRlKHByZXZpZXdJdGVtLmNyZWF0ZWQpfTwvdGltZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kZD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsvaWZ9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7I2lmIHByZXZpZXdJdGVtLm1vZGlmaWVkfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkdD57X3QoXCJtb2RpZmllZFwiKX08L2R0PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkZD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRpbWUgZGF0ZXRpbWU9e3ByZXZpZXdJdGVtLm1vZGlmaWVkfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPntmb3JtYXREYXRlKHByZXZpZXdJdGVtLm1vZGlmaWVkKX08L3RpbWVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGQ+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7L2lmfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeyNpZiBwcmV2aWV3SXRlbS5yZXZpZXdfc3RhdGV9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGR0PntfdChcInJldmlld19zdGF0ZVwiKX08L2R0PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkZD57cHJldmlld0l0ZW0ucmV2aWV3X3N0YXRlfTwvZGQ+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7L2lmfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2RsPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIHsvaWZ9XG4gICAgICAgICAgICAgICAgICAgIHsjaWYgJHByZXZpZXdVaWRzLmxlbmd0aCA+IDF9XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwicHJldmlld1wiIGluOmZseXxsb2NhbD17eyBkdXJhdGlvbjogNTAwIH19PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJsZXZlbFRvb2xiYXJcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3M9XCJidG4gYnRuLXhzIGJ0bi1vdXRsaW5lLXByaW1hcnkgZC1mbGV4IGFsaWduLWl0ZW1zLWNlbnRlclwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aXRsZT17X3QoXCJhZGQgc2VsZWN0ZWQgaXRlbXNcIil9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbjpjbGlja3xwcmV2ZW50RGVmYXVsdD17YWRkU2VsZWN0ZWRJdGVtc31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID48c3ZnIHVzZTpyZXNvbHZlSWNvbj17eyBpY29uTmFtZTogXCJwbHVzXCIgfX0gLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwic2VsZWN0LWJ1dHRvbi1lbGxpcHNpc1wiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPntfdChcImFkZCBzZWxlY3RlZCBpdGVtc1wiKX08L3NwYW5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImluZm9cIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHN2Z1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXNlOnJlc29sdmVJY29uPXt7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWNvbk5hbWU6IFwiZmlsZXNcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwiXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID57X3QoXCIke2l0ZW1fY291bnR9IGl0ZW1zIHNlbGVjdGVkXCIsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpdGVtX2NvdW50OiAkcHJldmlld1VpZHMubGVuZ3RoLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSl9PC9zcGFuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICB7L2lmfVxuICAgICAgICAgICAgICAgICAgICB7I2lmIHNob3dVcGxvYWR9XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwidXBsb2FkLXdyYXBwZXJcIj48L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgey9pZn1cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIHs6Y2F0Y2ggZXJyb3J9XG4gICAgICAgICAgICAgICAgPHAgc3R5bGU9XCJjb2xvcjogcmVkXCI+e2Vycm9yLm1lc3NhZ2V9PC9wPlxuICAgICAgICAgICAgey9hd2FpdH1cbiAgICAgICAgPC9uYXY+XG4gICAgPC9kaXY+XG57L2lmfVxuXG48c3R5bGU+XG4gICAgLmNvbnRlbnQtYnJvd3Nlci1wb3NpdGlvbi13cmFwcGVyIHtcbiAgICAgICAgcG9zaXRpb246IGZpeGVkO1xuICAgICAgICB0b3A6IDA7XG4gICAgICAgIHJpZ2h0OiAwO1xuICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IGVuZDtcbiAgICAgICAgei1pbmRleDogMTUwMDtcbiAgICAgICAgd2lkdGg6IDEwMCU7XG4gICAgICAgIGhlaWdodDogMTAwdmg7XG4gICAgICAgIGJhY2tncm91bmQtY29sb3I6IHJnYmEoMCwgMCwgMCwgMC4yNSk7XG4gICAgfVxuICAgIC5idG4teHMge1xuICAgICAgICAtLWJzLWJ0bi1wYWRkaW5nLXk6IDAuMTVyZW07XG4gICAgICAgIC0tYnMtYnRuLXBhZGRpbmcteDogMC41cmVtO1xuICAgICAgICAtLWJzLWJ0bi1mb250LXNpemU6IDAuNzVyZW07XG4gICAgfVxuICAgIC5jb250ZW50LWJyb3dzZXIge1xuICAgICAgICBoZWlnaHQ6IDEwMHZoO1xuICAgICAgICBtaW4td2lkdGg6IDQ1MHB4O1xuICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1icy1saWdodC1iZy1zdWJ0bGUpO1xuICAgICAgICBib3JkZXItbGVmdDogdmFyKC0tYnMtYm9yZGVyLXN0eWxlKSB2YXIoLS1icy1ib3JkZXItd2lkdGgpICNmZmY7XG4gICAgICAgIHotaW5kZXg6IDE1MDA7XG4gICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gICAgfVxuICAgIC50b29sQmFyIHtcbiAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tYnMtcHJpbWFyeSk7XG4gICAgICAgIHBhZGRpbmc6IDAuMzI1cmVtIDAuNzVyZW07XG4gICAgICAgIGNvbG9yOiB2YXIoLS1icy1saWdodCk7XG4gICAgICAgIHdpZHRoOiAxMDAlO1xuICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IHN0YXJ0O1xuICAgIH1cbiAgICAudG9vbEJhciA6Z2xvYmFsKHN2Zykge1xuICAgICAgICB2ZXJ0aWNhbC1hbGlnbjogLTAuMTI1ZW07XG4gICAgfVxuICAgIC5sZXZlbENvbHVtbnMge1xuICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICBmbGV4LXdyYXA6IG5vd3JhcDtcbiAgICAgICAgd2lkdGg6IDEwMCU7XG4gICAgICAgIG92ZXJmbG93LXk6IGhpZGRlbjtcbiAgICAgICAgb3ZlcmZsb3cteDogYXV0bztcbiAgICAgICAgZmxleC1ncm93OiAzO1xuICAgICAgICBib3JkZXItbGVmdDogdmFyKC0tYnMtYm9yZGVyLXN0eWxlKSB2YXIoLS1icy1ib3JkZXItY29sb3IpIHZhcigtLWJzLWJvcmRlci13aWR0aCk7XG4gICAgICAgIHVzZXItc2VsZWN0OiBub25lO1xuICAgIH1cblxuICAgIC5sZXZlbENvbHVtbiB7XG4gICAgICAgIHdpZHRoOiAzMjBweDtcbiAgICAgICAgYmFja2dyb3VuZDogcmdiYSh2YXIoLS1icy1zZWNvbmRhcnktYmctcmdiKSwgMC41NSk7XG4gICAgICAgIGJvcmRlci1yaWdodDogdmFyKC0tYnMtYm9yZGVyLXN0eWxlKSB2YXIoLS1icy1ib3JkZXItd2lkdGgpXG4gICAgICAgICAgICB2YXIoLS1icy1ib3JkZXItY29sb3IpO1xuICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICAgICAgICBmbGV4LWdyb3c6IDA7XG4gICAgICAgIGZsZXgtc2hyaW5rOiAwO1xuICAgIH1cbiAgICAubGV2ZWxDb2x1bW4uYWN0aXZlIHtcbiAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYnMtYm9keS1iZyk7XG4gICAgICAgIGJvcmRlci1sZWZ0OiB2YXIoLS1icy1ib3JkZXItc3R5bGUpIHZhcigtLWJzLWJvcmRlci13aWR0aCkgdmFyKC0tYnMtcHJpbWFyeSk7XG4gICAgICAgIG1hcmdpbi1sZWZ0OiAtMXB4O1xuICAgIH1cbiAgICAubGV2ZWxUb29sYmFyIHtcbiAgICAgICAgd2lkdGg6IDEwMCU7XG4gICAgICAgIG1pbi1oZWlnaHQ6IDIuNXJlbTtcbiAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuO1xuICAgICAgICB3aGl0ZS1zcGFjZTogbm93cmFwO1xuICAgICAgICBwYWRkaW5nOiAwLjM3NXJlbTtcbiAgICAgICAgYm9yZGVyLWJvdHRvbTogdmFyKC0tYnMtYm9yZGVyLXN0eWxlKSB2YXIoLS1icy1ib3JkZXItd2lkdGgpXG4gICAgICAgICAgICB2YXIoLS1icy1ib3JkZXItY29sb3IpO1xuICAgIH1cbiAgICAubGV2ZWxUb29sYmFyID4gLmxldmVsQWN0aW9ucyB7XG4gICAgICAgIG1hcmdpbi1sZWZ0OiBhdXRvO1xuICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgIH1cbiAgICAubGV2ZWxUb29sYmFyID4gYnV0dG9uIHtcbiAgICAgICAgd2hpdGUtc3BhY2U6IG5vd3JhcDtcbiAgICAgICAgb3ZlcmZsb3c6IGhpZGRlbjtcbiAgICAgICAgdGV4dC1vdmVyZmxvdzogZWxsaXBzaXM7XG4gICAgfVxuXG4gICAgLmxldmVsSXRlbXMge1xuICAgICAgICBvdmVyZmxvdy14OiBhdXRvO1xuICAgIH1cbiAgICAuY29udGVudEl0ZW0ge1xuICAgICAgICAvKiBwYWRkaW5nOiAxcmVtIDFyZW07ICovXG4gICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAgICAgIGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjtcbiAgICAgICAgZm9udC1zaXplOiA5MCU7XG4gICAgICAgIG1pbi1oZWlnaHQ6IDJyZW07XG4gICAgfVxuICAgIC5jb250ZW50SXRlbTpmb2N1cy12aXNpYmxlIHtcbiAgICAgICAgb3V0bGluZTogbm9uZTtcbiAgICB9XG4gICAgLmNvbnRlbnRJdGVtLmV2ZW4ge1xuICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2JhKHZhcigtLWJzLXNlY29uZGFyeS1iZy1yZ2IpLCAwLjQpO1xuICAgIH1cbiAgICAuY29udGVudEl0ZW0uaW5QYXRoLFxuICAgIC5jb250ZW50SXRlbS5zZWxlY3RlZEl0ZW0ge1xuICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2JhKHZhcigtLWJzLXByaW1hcnktcmdiKSwgMC4xNSk7XG4gICAgfVxuICAgIC5jb250ZW50SXRlbSA+ICoge1xuICAgICAgICBwYWRkaW5nOiAwLjVyZW07XG4gICAgICAgIHdoaXRlLXNwYWNlOiBub3dyYXA7XG4gICAgICAgIG1heC13aWR0aDogNDUwcHg7XG4gICAgICAgIHRleHQtb3ZlcmZsb3c6IGVsbGlwc2lzO1xuICAgICAgICBvdmVyZmxvdzogaGlkZGVuO1xuICAgIH1cbiAgICAuY29udGVudEl0ZW0gPiAuYnJvd3NlU3ViIHtcbiAgICAgICAgZmxleC1zaHJpbms6IDA7XG4gICAgfVxuICAgIC5jb250ZW50SXRlbSAucGxvbmUtaWNvbiB7XG4gICAgICAgIGRpc3BsYXk6IGlubGluZS1ibG9jaztcbiAgICB9XG4gICAgLmNvbnRlbnRJdGVtIC5ncmlkLXByZXZpZXcgPiBpbWcge1xuICAgICAgICB3aWR0aDogOTVweDtcbiAgICAgICAgaGVpZ2h0OiA5NXB4O1xuICAgICAgICBvYmplY3QtZml0OiBjb3ZlcjtcbiAgICAgICAgZmxvYXQ6IGxlZnQ7XG4gICAgICAgIG1hcmdpbi1yaWdodDogMXJlbTtcbiAgICB9XG4gICAgLmNvbnRlbnRJdGVtIC5pZC1vbmx5IHtcbiAgICAgICAgZm9udC1zdHlsZTogaXRhbGljO1xuICAgIH1cbiAgICAucHJldmlldyB7XG4gICAgICAgIHdpZHRoOiAzMjBweDtcbiAgICAgICAgZmxleC1zaHJpbms6IDA7XG4gICAgICAgIG1pbi1oZWlnaHQ6IDMwMHB4O1xuICAgIH1cbiAgICAucHJldmlldyAuaW5mbyB7XG4gICAgICAgIHBhZGRpbmc6IDAuNXJlbTtcbiAgICAgICAgd2lkdGg6IDEwMCU7XG4gICAgICAgIHdvcmQtd3JhcDogYW55d2hlcmU7XG4gICAgfVxuICAgIC5wcmV2aWV3IC5pbmZvIC5wcmV2aWV3SWNvbiB7XG4gICAgICAgIG1hcmdpbjogMCBhdXRvIDFyZW0gYXV0bztcbiAgICB9XG4gICAgLnByZXZpZXcgLmluZm8gLnByZXZpZXdJY29uIHN2ZyB7XG4gICAgICAgIHdpZHRoOiA1MHB4ICFpbXBvcnRhbnQ7XG4gICAgICAgIGhlaWdodDogNTBweCAhaW1wb3J0YW50O1xuICAgIH1cbiAgICAucHJldmlldyBpbWcge1xuICAgICAgICBtYXgtd2lkdGg6IDEwMCU7XG4gICAgICAgIGhlaWdodDogYXV0bztcbiAgICAgICAgbWFyZ2luLWJvdHRvbTogMC41cmVtO1xuICAgIH1cblxuICAgIC51cGxvYWQtd3JhcHBlciB7XG4gICAgICAgIHBhZGRpbmc6IDFyZW07XG4gICAgICAgIHdpZHRoOiA1NDBweDtcbiAgICAgICAgb3ZlcmZsb3cteDogYXV0bztcbiAgICAgICAgZmxleC1zaHJpbms6IDA7XG4gICAgfVxuICAgIC5sb2FkbW9yZSB7XG4gICAgICAgIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgICAgICAgcGFkZGluZzogMC4yNXJlbSAwO1xuICAgIH1cblxuICAgIC5zZWxlY3QtYnV0dG9uLWVsbGlwc2lzIHtcbiAgICAgICAgd2hpdGUtc3BhY2U6IG5vd3JhcDtcbiAgICAgICAgbWF4LXdpZHRoOiAxNTBweDtcbiAgICAgICAgdGV4dC1vdmVyZmxvdzogZWxsaXBzaXM7XG4gICAgICAgIG92ZXJmbG93OiBoaWRkZW47XG4gICAgfVxuPC9zdHlsZT5cbiJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUE2eEJJLHdF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*/\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","import { writable, get } from \"svelte/store\";\nimport { request } from \"./utils.js\";\n\nexport default function (config, pathCache) {\n    const store = writable([]);\n\n    const load = async (query) => {\n        let defaults = {\n            vocabularyUrl: config.vocabularyUrl,\n            attributes: config.attributes,\n            pageSize: config.pageSize,\n            browseableTypes: config.browseableTypes,\n            searchIndex: config.searchIndex,\n        };\n        query = {\n            ...defaults,\n            ...query,\n        }\n        if (config.selectableTypes.length) {\n            query[\"selectableTypes\"] = config.selectableTypes;\n        }\n        try {\n            return await request(query);\n        }\n        catch {\n            return {\n                \"error\": \"Could load data from backend.\"\n            };\n        }\n    }\n\n    const browse = async (path, searchTerm, updateCache) => {\n\n        let rootPath = config.rootPath;\n        let rootPathParts = rootPath.replace(/^\\/+/, '').split(\"/\");\n        let physicalPath = path;\n        let hideRootPath = rootPath;\n\n        if (!physicalPath.startsWith(rootPath)) {\n            // The path from the returned items from \"vocabularyUrl\" are starting\n            // relative from the Plone Site. So we need to generate the phyiscalPath here.\n            // NOTE: We also have to merge the rootPath and the clicked path correctly for example:\n            // rootPath: /path/to/plonesite/media, clicked path: /media/subfolder\n            // has to become:\n            // /path/to/plonesite/media/subfolder\n            let pathParts = physicalPath.replace(/^\\/+/, '').split(\"/\");\n            let overlapIdx = 0;\n            for (overlapIdx; overlapIdx < rootPathParts.length; overlapIdx++) {\n                if (rootPathParts[overlapIdx] === pathParts[0]) {\n                    break;\n                }\n            }\n            hideRootPath = \"/\" + (rootPathParts.filter(it => !pathParts.includes(it))).join(\"/\");\n            physicalPath = \"/\" + (rootPathParts.slice(0, overlapIdx).concat(pathParts)).join(\"/\");\n        }\n\n        let paths = [];\n        let parts = physicalPath.split(\"/\") || [];\n        const maxDepth = Math.min(parts.length, config.maxDepth || 999);\n\n        let partsToShow = parts.slice(parts.length - maxDepth, parts.length);\n        let partsToHide = parts.slice(0, parts.length - maxDepth);\n        const pathPrefix = partsToHide.join(\"/\");\n\n        while (partsToShow.length > 0) {\n            let sub_path = partsToShow.join(\"/\").replace(/^\\//, \"\");\n            const poped = partsToShow.pop();\n            sub_path = pathPrefix + ((poped != \"\") ? `/${sub_path}` : \"\");\n            if (sub_path && paths.indexOf(sub_path) === -1) paths.push(sub_path);\n            if (sub_path == rootPath) {\n                // respect rootPath\n                break;\n            }\n        }\n\n        const pC = get(pathCache);\n        let levels = [];\n        let pathCounter = 0;\n\n        for (var p of paths) {\n            pathCounter++;\n            const isFirstPath = pathCounter == 1;\n            let level = {};\n            if (\n                !(p in pC) ||  // new path not found in cache\n                (isFirstPath && searchTerm) ||  // filtering the level\n                (isFirstPath && updateCache)  // manual cache update request\n            ) {\n                let query = {\n                    path: p,\n                };\n\n                if (isFirstPath && searchTerm) {\n                    query[\"searchTerm\"] = \"*\" + searchTerm + \"*\";\n                }\n\n                level = await load(query);\n\n                // check if there is more than the current batch\n                level.load_more = config.pageSize < level.total;\n                level.page = 1;\n                level.path = p;\n                level.searchTerm = searchTerm;\n                level.displayPath = p.replace(new RegExp(`^(${hideRootPath}|${rootPath})`), \"\") || \"/\"\n\n                if(searchTerm === \"\") {\n                    // get level info\n                    const levelInfo = await load({\n                        levelInfoPath: p,\n                    });\n                    if (levelInfo.total) {\n                        level.UID = levelInfo.results[0].UID;\n                        level.Title = levelInfo.results[0].Title;\n                        level.portal_type = levelInfo.results[0].portal_type;\n                        level.getIcon = levelInfo.results[0].getIcon;\n                        // check if level is selectable (config.selectableTypes)\n                        level.selectable = (!config.selectableTypes.length || config.selectableTypes.indexOf(levelInfo.results[0].portal_type) != -1);\n                    }\n                }\n\n                // persist showFilter value from previously cached path\n                if (p in pC) {\n                    level.showFilter = pC[p].showFilter || level.showFilter;\n                }\n\n                pathCache.update((n) => {\n                    n[p] = level;\n                    return n;\n                });\n            } else {\n                level = pC[p];\n            }\n            levels = [level, ...levels];\n        }\n        store.set(levels);\n    }\n\n    const search = async (searchTerm, page) => {\n        let query = {\n            searchPath: config.rootPath,\n            page: page,\n        };\n        if (searchTerm) {\n            query[\"searchTerm\"] = \"*\" + searchTerm + \"*\";\n        }\n\n        let level = await load(query);\n        level.searchTerm = searchTerm\n        const has_more = (page * config.pageSize) < level.total;\n\n        store.update((levels) => {\n\n            // first time or new search\n            if (levels.length == 0 || levels[0].searchTerm != searchTerm) {\n                level.load_more = has_more;\n                level.selectable = false;\n                level.page = page\n                return [level,];\n            }\n\n            // has more ?\n            levels[0].load_more = has_more;\n            levels[0].page = page;\n\n            // append new batch\n            levels[0].results = [\n                ...levels[0].results,\n                ...level.results,\n            ];\n            return levels;\n        });\n    }\n\n    const nextBatch = async (p, page, searchTerm) => {\n        let query = {\n            path: p,\n            page: page,\n        };\n\n        if (searchTerm) {\n            query[\"searchTerm\"] = \"*\" + searchTerm + \"*\";\n        }\n\n        let level = await load(query);\n\n        store.update((levels) => {\n            levels.forEach((l) => {\n                if (l.path != p) {\n                    return l;\n                }\n                l.page = page;\n                l.load_more = (page * config.pageSize) < level.total;\n                l.results = [\n                    ...l.results,\n                    ...level.results,\n                ]\n            });\n            return levels;\n        });\n    }\n\n    store.get = async ({\n        path = \"\",\n        searchTerm = \"\",\n        updateCache = false,\n        loadMorePath = \"\",\n        page = 1,\n        mode = null,\n    }) => {\n        if (mode == null) {\n            mode = config.mode;\n        }\n        if (mode === \"search\") {\n            await search(searchTerm, page);\n        } else if (loadMorePath) {\n            const pC = get(pathCache);\n            // get path from previously loaded cache\n            let level = pC[loadMorePath];\n            if (page > level.page) {\n                await nextBatch(loadMorePath, page, searchTerm);\n            }\n        } else if (path) {\n            await browse(path, searchTerm, updateCache);\n        }\n\n    };\n\n    return store;\n}\n","<script>\n    import { resolveIcon } from \"./utils\";\n    import _t from \"../../../core/i18n-wrapper\";\n    import { createEventDispatcher, getContext } from \"svelte\";\n\n    const config = getContext(\"config\");\n    const dispatch = createEventDispatcher();\n\n    function select(item) {\n        dispatch(\"selectItem\", {\n            item: item,\n        });\n    }\n</script>\n\n{#if $config?.favorites}\n<div class=\"favorites dropdown dropdown-menu-end ms-2\">\n    <button\n        type=\"button\"\n        class=\"favorites dropdown-toggle btn btn-outline-light btn-sm\"\n        data-bs-toggle=\"dropdown\"\n        aria-haspopup=\"true\"\n        aria-expanded=\"false\"\n    >\n        <svg use:resolveIcon={{ iconName: \"star-fill\" }} />\n        {_t(\"Favorites\")}\n    </button>\n    <ul class=\"dropdown-menu\">\n        {#each $config.favorites as favorite}\n        <li>\n            <a class=\"dropdown-item\" href=\"{favorite.path}\" on:click|preventDefault={() => select(favorite)}>{favorite.title}</a>\n        </li>\n        {/each}\n    </ul>\n</div>\n{/if}\n","<script>\n    import { resolveIcon, recentlyUsedItems } from \"./utils\";\n    import _t from \"../../../core/i18n-wrapper\";\n    import { createEventDispatcher, getContext } from \"svelte\";\n\n    const config = getContext(\"config\");\n    const items = recentlyUsedItems(true, $config);\n    const dispatch = createEventDispatcher();\n\n    function select(item) {\n        dispatch(\"selectItem\", {\n            item: item,\n        });\n    }\n</script>\n\n{#if $config.recentlyUsed && items.length}\n    <div class=\"recentlyUsed dropdown ms-2\">\n        <button\n            type=\"button\"\n            class=\"recentlyUsed dropdown-toggle btn btn-outline-light btn-sm\"\n            data-bs-toggle=\"dropdown\"\n            aria-haspopup=\"true\"\n            aria-expanded=\"false\"\n        >\n            <svg use:resolveIcon={{ iconName: \"grid-fill\" }} />\n            {_t(\"Recently Used\")}\n        </button>\n        <ul class=\"dropdown-menu dropdown-menu-end\">\n            {#each items.reverse() as recentlyUsed}\n                <li>\n                    <a\n                        href={recentlyUsed.getURL ||\"#\"}\n                        on:click|preventDefault={() => select(recentlyUsed)}\n                        class=\"dropdown-item\"\n                    >\n                        <svg\n                            use:resolveIcon={{\n                                iconName: `contenttype/${recentlyUsed?.portal_type.toLowerCase().replace(/\\.| /g, \"-\")}`,\n                            }}\n                        />\n                        {recentlyUsed.Title}\n                    </a>\n                </li>\n            {/each}\n        </ul>\n    </div>\n{/if}\n","\n      import API from \"!../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"../../../../node_modules/@patternslib/dev/webpack/style-inserter.js\";\n      import setAttributes from \"!../../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../node_modules/css-loader/dist/cjs.js!../../../../node_modules/sass-loader/dist/cjs.js!../../../../node_modules/svelte-loader/index.js?cssPath=/home/runner/work/mockup/mockup/src/pat/contentbrowser/src/ContentBrowser.svelte.2.css!./ContentBrowser.svelte\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\noptions.insert = insertFn;\noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../node_modules/css-loader/dist/cjs.js!../../../../node_modules/sass-loader/dist/cjs.js!../../../../node_modules/svelte-loader/index.js?cssPath=/home/runner/work/mockup/mockup/src/pat/contentbrowser/src/ContentBrowser.svelte.2.css!./ContentBrowser.svelte\";\n       export default content && content.locals ? content.locals : undefined;\n","<script>\n    import utils from \"@patternslib/patternslib/src/core/utils\";\n    import { getContext } from \"svelte\";\n    import * as animateScroll from \"svelte-scrollto\";\n    import { fly } from \"svelte/transition\";\n    import _t from \"../../../core/i18n-wrapper\";\n    import Upload from \"../../upload/upload\";\n    import contentStore from \"./ContentStore\";\n    import {\n        clickOutside,\n        formatDate,\n        get_items_from_uids,\n        request,\n        resolveIcon,\n        updateRecentlyUsed,\n    } from \"./utils\";\n    import Favorites from \"./Favorites.svelte\";\n    import RecentlyUsed from \"./RecentlyUsed.svelte\";\n\n    animateScroll.setGlobalOptions({\n        scrollX: true,\n        container: \".levelColumns\",\n        duration: 500,\n    });\n\n    // get context stores\n    const currentPath = getContext(\"currentPath\");\n    const config = getContext(\"config\");\n    const pathCache = getContext(\"pathCache\");\n    const showContentBrowser = getContext(\"showContentBrowser\");\n    const selectedItems = getContext(\"selectedItems\");\n    const selectedUids = getContext(\"selectedUids\");\n    const previewUids = getContext(\"previewUids\");\n\n    // initialize content browser store\n    const contentItems = contentStore($config, pathCache);\n\n    let showUpload = false;\n    let previewItem = {};\n    let keyboardNavInitialized = false;\n    let shiftKey = false;\n    let searchTerm = null;\n    let gridView = ($config.layout || \"list\") === \"grid\";\n    let defaultConfigMode = $config.mode;\n\n    let vw = Math.max(document.documentElement.clientWidth || 0, window.innerWidth || 0);\n\n    function updatePreview({ data = null, uuid = null, action = \"show\" }) {\n        if (data && action == \"show\") {\n            previewItem = data;\n            $previewUids = [data.UID];\n        } else if (uuid && action == \"add\" && $previewUids.indexOf(uuid) === -1) {\n            if (\n                $config.maximumSelectionSize > 0 &&\n                $previewUids.length >= $config.maximumSelectionSize\n            ) {\n                // respect maximumSelectionSize\n                return;\n            }\n            $previewUids = [...$previewUids, uuid]; // NOTE: $previewUids.push() is not a reactive change\n        } else if (uuid && action == \"remove\" && $previewUids.indexOf(uuid) !== -1) {\n            previewUids.update((n) => {\n                n.splice(n.indexOf(uuid), 1);\n                return n;\n            });\n        } else if (action == \"clear\") {\n            previewItem = {};\n            $previewUids = [];\n        }\n    }\n\n    async function upload() {\n        updatePreview({ action: \"clear\" });\n        scrollToRight();\n        showUpload = true;\n        await utils.timeout(1);\n        const uploadEl = document.querySelector(\".upload-wrapper\");\n        uploadEl.classList.add(\"pat-upload\");\n        const patUpload = new Upload(uploadEl, {\n            baseUrl: $config.rootUrl,\n            currentPath: $currentPath,\n            relativePath: \"@@fileUpload\",\n            allowPathSelection: false,\n            hiddenInputContainer: \".upload-wrapper\",\n            success: (fileupload, obj) => {\n                updatePreview({\n                    uuid: obj.UID,\n                    action: \"add\",\n                });\n            },\n            queuecomplete: (fileUpload, obj) => {\n                contentItems.get({ path: $currentPath, updateCache: true });\n                showUpload = false;\n            },\n        });\n    }\n\n    function showPreview(item) {\n        if ($config.mode == \"browse\") {\n            $previewUids = [item.UID];\n\n            if (item.is_folderish) {\n                // show folder\n                currentPath.set(item.path);\n            } else {\n                // show non folderish preview\n                const pathParts = item.path.split(\"/\");\n                const folderPath = pathParts.slice(0, pathParts.length - 1).join(\"/\");\n                currentPath.set(folderPath || \"/\");\n                updatePreview({ data: item });\n            }\n        } else {\n            updatePreview({ data: item });\n        }\n        scrollToRight();\n    }\n\n    function changePath(item, e) {\n        // always hide upload when changing path\n        showUpload = false;\n\n        // clear previous selection\n        updatePreview({ action: \"clear\" });\n\n        if (item === \"/\" || item === $config.rootPath) {\n            // clicked \"home\" button\n            currentPath.set($config.rootPath);\n            return;\n        }\n\n        // show clicked item\n        showPreview(item);\n    }\n\n    function clickItem(item, e) {\n        if (!keyboardNavInitialized) {\n            // if we've already clicked an element with the mouse\n            // do not start over keyboardnav\n            keyboardNavInitialized = true;\n        }\n\n        // check for multiselection\n        const levelWrapper = e.currentTarget.closest(\".levelItems\");\n        let prevSelection = levelWrapper.querySelectorAll(\".selectedItem\");\n\n        if (prevSelection.length && $config.maximumSelectionSize != 1) {\n            // check for pressed shift or ctrl/meta key for multiselection\n            if (shiftKey || e?.shiftKey) {\n                // iter through the wrapper children and select all\n                // inbetween current selection and last preview\n                let select = false;\n                for (const el of levelWrapper.children) {\n                    if ([item.UID, $previewUids[0]].indexOf(el.dataset.uuid) !== -1) {\n                        if (select) {\n                            // stop selecting but make sure the last item is selected too\n                            updatePreview({\n                                uuid: el.dataset.uuid,\n                                action: \"add\",\n                            });\n                            select = false;\n                            continue;\n                        }\n                        // start selecting\n                        select = true;\n                    }\n                    updatePreview({\n                        uuid: el.dataset.uuid,\n                        action: select ? \"add\" : \"remove\",\n                    });\n                }\n                shiftKey = false;\n            } else if (e?.metaKey || e?.ctrlKey) {\n                // de/select multiple single items\n                // NOTE: only for mouse click event\n                updatePreview({\n                    uuid: item.UID,\n                    action: $previewUids.indexOf(item.UID) == -1 ? \"add\" : \"remove\",\n                });\n            } else {\n                // unselect\n                [...prevSelection].map((el) => el.classList.remove(\"selectedItem\"));\n                changePath(item, e);\n            }\n        } else {\n            changePath(item, e);\n        }\n\n        e.currentTarget.focus(); // needed for keyboard navigation\n        e.currentTarget.classList.add(\"selectedItem\");\n    }\n\n    function initKeyboardNav() {\n        // focus first element when showing contentbrowser\n        if (keyboardNavInitialized) {\n            return;\n        }\n        const possibleFocusEls = [\n            ...document.querySelectorAll(\".levelColumn .inPath\"), // previously selected folder\n            ...document.querySelectorAll(\".levelColumn .selectedItem\"), // previously selected item\n        ];\n        if (\n            !possibleFocusEls.length &&\n            document.querySelector(\".levelColumn .contentItem\")\n        ) {\n            possibleFocusEls.push(document.querySelector(\".levelColumn .contentItem\"));\n        }\n        if (possibleFocusEls.length) {\n            keyboardNavInitialized = true;\n            possibleFocusEls[0].focus();\n        }\n    }\n\n    function keyboardNavigation(item, e) {\n        const node = e.currentTarget;\n        shiftKey = e.shiftKey;\n        if (e.key == \"Escape\") {\n            closeBrowser();\n        }\n        if (\n            e.key == \"ArrowDown\" &&\n            node?.nextElementSibling?.classList.contains(\"contentItem\")\n        ) {\n            node.nextElementSibling.click();\n        }\n        if (\n            e.key == \"ArrowUp\" &&\n            node?.previousElementSibling?.classList.contains(\"contentItem\")\n        ) {\n            node.previousElementSibling.click();\n        }\n        if (e.key == \"ArrowRight\") {\n            const currCol = e.target.closest(\".levelColumn\");\n            const nxtCol = currCol?.nextElementSibling;\n            if (!nxtCol || !nxtCol.classList.contains(\"levelColumn\")) {\n                return;\n            }\n            nxtCol.querySelector(\".contentItem\")?.click();\n        }\n        if (e.key == \"ArrowLeft\") {\n            const currCol = e.target.closest(\".levelColumn\");\n            const prevCol = currCol?.previousElementSibling;\n            if (!prevCol || !prevCol.classList.contains(\"levelColumn\")) {\n                return;\n            }\n            prevCol.querySelector(\".inPath\").click();\n        }\n        if (e.key == \"Space\") {\n            // add item to selection (like metaKey + click)\n            clickItem(item, e, true);\n        }\n        if (e.key == \"Enter\") {\n            if (isSelectable(item)) {\n                if ($config.maximumSelectionSize == 1) {\n                    addItem(item);\n                } else {\n                    addSelectedItems();\n                }\n            }\n        }\n    }\n\n    async function addItem(item) {\n        if ($config.maximumSelectionSize == 1) {\n            selectedItems.set([item]);\n            selectedUids.set([item.UID]);\n        } else {\n            selectedItems.update((n) => [...n, item]);\n            selectedUids.update(() => $selectedItems.map((x) => x.UID));\n        }\n        updateRecentlyUsed(item, $config);\n        closeBrowser();\n    }\n\n    async function addSelectedItems() {\n        const previewItems = await get_items_from_uids($previewUids, $config);\n        selectedItems.update((n) => {\n            for (const it of previewItems) {\n                if ($selectedUids.indexOf(it.UID) != -1) continue;\n                n.push(it);\n            }\n            return n;\n        });\n        selectedUids.update(() => $selectedItems.map((x) => x.UID));\n        closeBrowser();\n    }\n\n    function selectRecentlyUsed(event) {\n        addItem(event.detail.item);\n    }\n\n    function itemId(item) {\n        return item.path?.split(\"/\").pop() || \"- no id -\";\n    }\n\n    async function selectFavorite(event) {\n        const path = event.detail.item.path;\n        const response = await request({\n            vocabularyUrl: $config.vocabularyUrl,\n            attributes: $config.attributes,\n            levelInfoPath: path,\n        });\n        if (!response.total) {\n            alert(`${path} not found!`);\n            return;\n        }\n        const item = response.results[0];\n        if (!item.path) {\n            // fix for root\n            item.path = $config.rootPath;\n        }\n        changePath(item);\n    }\n\n    function closeBrowser() {\n        // hide levelfilter and clear all filters\n        filterLevel(\"\");\n        // clear search\n        searchTerm = null;\n        $config.mode = defaultConfigMode;\n        $showContentBrowser = false;\n        keyboardNavInitialized = false;\n        updatePreview({ action: \"clear\" });\n    }\n\n    function isSelectable(item) {\n        return $selectedUids.indexOf(item.UID) === -1;\n    }\n\n    function scrollToRight() {\n        const scrollContainer = document.querySelector(\".levelColumns\");\n        if (scrollContainer) {\n            animateScroll.scrollTo({\n                // element: \".levelColumn:last-child\",\n                x: scrollContainer.scrollWidth + 100,\n            });\n        }\n    }\n\n    function itemInPath(item) {\n        const item_path = item.path.split(\"/\");\n        const curr_path = $currentPath.split(\"/\");\n        let in_path = true;\n        for (const idx in item_path) {\n            // check path parts to be equal\n            in_path = in_path && item_path[idx] === curr_path[idx];\n        }\n        return in_path;\n    }\n\n    const searchItemsKeyup = utils.debounce(async (e) => {\n        await searchItems(e.target.value);\n    }, 300);\n\n    async function searchItems(val) {\n        searchTerm = val;\n        if (defaultConfigMode === \"browse\") {\n            // switching to search mode in global search if configured as \"browse\" mode\n            $config.mode = searchTerm !== \"\" ? \"search\" : \"browse\";\n        }\n        await contentItems.get({\n            path: $currentPath,\n            searchTerm: searchTerm,\n            mode: $config.mode,\n        });\n        updatePreview({ action: \"clear\" });\n        if (!val) {\n            scrollToRight();\n        }\n    }\n\n    const filterLevelKeyup = utils.debounce(async (e) => {\n        await filterLevel(e.target.value);\n    }, 300);\n\n    const filterLevel = async (val) => {\n        if (val !== \"\") {\n            updatePreview({ action: \"clear\" });\n        } else {\n            scrollToRight();\n        }\n        await contentItems.get({\n            path: $currentPath,\n            searchTerm: val,\n            updateCache: true,\n        });\n    };\n\n    function loadMore(node) {\n        const observer = new IntersectionObserver(\n            (entries) => {\n                for (const entry of entries) {\n                    if (entry.isIntersecting) {\n                        contentItems.get({\n                            loadMorePath: node.dataset.levelPath,\n                            page: +node.dataset.levelNextPage,\n                            searchTerm: node.dataset.searchTerm,\n                        });\n                    }\n                }\n            },\n            { threshold: 0, root: null, margin: \"0px\" },\n        );\n        // defer observing\n        window.setTimeout(() => {\n            observer.observe(node);\n        }, 300);\n    }\n\n    $: {\n        if ($showContentBrowser) {\n            contentItems.get({ path: $currentPath });\n        }\n    }\n\n    $: {\n        $contentItems;\n        scrollToRight();\n    }\n\n    $: {\n        $previewUids;\n    }\n</script>\n\n{#if $showContentBrowser}\n    <div class=\"content-browser-position-wrapper\">\n        <nav\n            class=\"content-browser\"\n            transition:fly={{ x: (vw / 100) * 94, opacity: 1 }}\n            on:introend={() => {\n                scrollToRight();\n                initKeyboardNav();\n            }}\n            use:clickOutside\n            on:click_outside={closeBrowser}\n        >\n            <div class=\"toolBar navbar\">\n                <div class=\"input-group w-auto\">\n                    <input\n                        type=\"text\"\n                        name=\"filter\"\n                        class=\"form-control form-control-sm\"\n                        value={searchTerm}\n                        on:input={searchItemsKeyup}\n                    />\n                    {#if searchTerm}\n                        <button\n                            class=\"btn btn-light btn-sm\"\n                            type=\"button\"\n                            on:click|preventDefault={() => searchItems(\"\")}\n                            ><svg use:resolveIcon={{ iconName: \"x\" }} /></button\n                        >\n                    {/if}\n                </div>\n                <RecentlyUsed on:selectItem={selectRecentlyUsed} />\n                <Favorites on:selectItem={selectFavorite} />\n                {#if $config.uploadEnabled && $config.mode == \"browse\"}\n                    <div class=\"ms-2\">\n                        <button\n                            type=\"button\"\n                            class=\"upload btn btn-outline-light btn-sm\"\n                            tabindex=\"0\"\n                            on:keydown={upload}\n                            on:click={upload}\n                            ><svg use:resolveIcon={{ iconName: \"upload\" }} />\n                            {_t(\"upload to ${current_path}\", {\n                                current_path: $currentPath,\n                            })}</button\n                        >\n                    </div>\n                {/if}\n                <button\n                    class=\"btn btn-link text-white ms-auto\"\n                    tabindex=\"0\"\n                    on:click|preventDefault={() => closeBrowser()}\n                    ><svg use:resolveIcon={{ iconName: \"x-circle\" }} /></button\n                >\n            </div>\n            {#await $contentItems}\n                <p>{_t(\"loading content items\")}</p>\n            {:then levels}\n                <div class=\"levelColumns\">\n                    {#each levels as level, i (level.path)}\n                        {#if $previewUids.length < 2 || !$previewUids.includes(level.UID)}\n                            <div\n                                class=\"levelColumn{i % 2 == 0 ? ' odd' : ' even'} {i ===\n                                levels.length - 1\n                                    ? 'active'\n                                    : ''}\"\n                                in:fly|local={{ duration: 500 }}\n                            >\n                                <div class=\"levelToolbar\">\n                                    {#if i == 0 && $config.mode == \"browse\"}\n                                        <button\n                                            type=\"button\"\n                                            class=\"btn btn-link btn-xs ps-0\"\n                                            tabindex=\"0\"\n                                            on:keydown={() =>\n                                                changePath($config.rootPath)}\n                                            on:click={() => changePath($config.rootPath)}\n                                            ><svg\n                                                use:resolveIcon={{ iconName: \"house\" }}\n                                            /></button\n                                        >\n                                    {/if}\n                                    {#if i == levels.length - 1}\n                                        {#if level.selectable && !level.showFilter && !previewItem.UID}\n                                            <button\n                                                class=\"btn btn-xs btn-outline-primary d-flex align-items-center\"\n                                                title={_t(\"select ${level_path}\", {\n                                                    level_path:\n                                                        level.Title || itemId(level),\n                                                })}\n                                                disabled={!isSelectable(level)}\n                                                on:click|preventDefault={() =>\n                                                    addItem(level)}\n                                                ><svg\n                                                    use:resolveIcon={{\n                                                        iconName: \"plus\",\n                                                    }}\n                                                />\n                                                <span class=\"select-button-ellipsis\"\n                                                    >{level.Title || itemId(level)}</span\n                                                ></button\n                                            >\n                                        {/if}\n                                        <div class=\"levelActions\">\n                                            {#if $config.mode !== \"search\"}\n                                                {#if level.searchTerm || level.showFilter}\n                                                    <input\n                                                        type=\"text\"\n                                                        name=\"levelFilter\"\n                                                        class=\"form-control form-control-sm\"\n                                                        value={level.searchTerm || \"\"}\n                                                        on:input={filterLevelKeyup}\n                                                    />\n                                                    <button\n                                                        class=\"btn btn-link btn-xs level-filter\"\n                                                        title={_t(\"clear filter\")}\n                                                        on:click|preventDefault={() => {\n                                                            filterLevel(\"\");\n                                                            level.showFilter = false;\n                                                        }}\n                                                    >\n                                                        <svg\n                                                            use:resolveIcon={{\n                                                                iconName: \"x\",\n                                                            }}\n                                                        /></button\n                                                    >\n                                                {:else}\n                                                    <button\n                                                        class=\"btn btn-link btn-xs level-filter\"\n                                                        title={_t(\"level filter\")}\n                                                        on:click|preventDefault={() =>\n                                                            (level.showFilter = true)}\n                                                    >\n                                                        <svg\n                                                            use:resolveIcon={{\n                                                                iconName: \"filter\",\n                                                            }}\n                                                        /></button\n                                                    >\n                                                {/if}\n                                            {/if}\n                                            {#if !gridView}\n                                                <button\n                                                    class=\"btn btn-link btn-xs grid-view\"\n                                                    title={_t(\"grid view\")}\n                                                    on:click={() => (gridView = true)}\n                                                >\n                                                    <svg\n                                                        use:resolveIcon={{\n                                                            iconName: \"grid\",\n                                                        }}\n                                                    />\n                                                </button>\n                                            {:else}\n                                                <button\n                                                    class=\"btn btn-link btn-xs grid-view\"\n                                                    title={_t(\"list view\")}\n                                                    on:click={() => (gridView = false)}\n                                                >\n                                                    <svg\n                                                        use:resolveIcon={{\n                                                            iconName: \"list\",\n                                                        }}\n                                                    />\n                                                </button>\n                                            {/if}\n                                        </div>\n                                    {/if}\n                                </div>\n                                <div class=\"levelItems\">\n                                    {#each level.results || [] as item, n}\n                                        <!-- svelte-ignore missing-declaration -->\n                                        <div\n                                            class=\"contentItem{n % 2 == 0\n                                                ? ' odd'\n                                                : ' even'}{itemInPath(item)\n                                                ? ' inPath'\n                                                : ''}{$previewUids.indexOf(item.UID) !=\n                                            -1\n                                                ? ' selectedItem'\n                                                : ''}{!isSelectable(item)\n                                                ? ' text-body-tertiary'\n                                                : ''}\"\n                                            role=\"button\"\n                                            tabindex={n}\n                                            data-uuid={item.UID}\n                                            on:keydown|preventDefault={(e) =>\n                                                keyboardNavigation(item, e)}\n                                            on:click={(e) => clickItem(item, e)}\n                                        >\n                                            <div\n                                                class={gridView\n                                                    ? \"grid-preview\"\n                                                    : \"item-title\"}\n                                                title=\"{item.path}: {item.Title ||\n                                                    itemId(item)}\"\n                                            >\n                                                {#if gridView && item.getIcon}\n                                                    <img\n                                                        src={`${item.getURL}/@@images/image/thumb`}\n                                                        alt={item.Title || itemId(item)}\n                                                    />\n                                                {:else}\n                                                    <span class=\"plone-icon\">\n                                                        <svg\n                                                            use:resolveIcon={{\n                                                                iconName: `contenttype/${item.portal_type.toLowerCase().replace(/\\.| /g, \"-\")}`,\n                                                            }}\n                                                        />\n                                                    </span>\n                                                {/if}\n                                                <span\n                                                    class={!item.Title ? \"id-only\" : \"\"}\n                                                    >{item.Title || itemId(item)}</span\n                                                >\n                                                {#if $config.mode == \"search\"}\n                                                    <br /><span class=\"small\"\n                                                        >{item.path}</span\n                                                    >\n                                                {/if}\n                                            </div>\n                                            {#if item.is_folderish && $config.mode == \"browse\"}\n                                                <div class=\"browseSub\">\n                                                    <svg\n                                                        use:resolveIcon={{\n                                                            iconName:\n                                                                \"arrow-right-circle\",\n                                                        }}\n                                                    />\n                                                </div>\n                                            {/if}\n                                        </div>\n                                    {/each}\n                                    {#if level.load_more}\n                                        <div\n                                            class=\"loadmore\"\n                                            data-level-path={level.path}\n                                            data-search-term={searchTerm ||\n                                                level.searchTerm}\n                                            data-level-next-page={+level.page + 1}\n                                            use:loadMore\n                                        >\n                                            <div\n                                                class=\"spinner-border\"\n                                                role=\"status\"\n                                            ></div>\n                                        </div>\n                                    {/if}\n                                    {#if level.total == 0}\n                                        <div class=\"contentItem\">\n                                            <p>{_t(\"no results found\")}</p>\n                                        </div>\n                                    {/if}\n                                </div>\n                            </div>\n                        {/if}\n                    {/each}\n                    {#if previewItem?.UID && $previewUids.length == 1}\n                        <div class=\"preview\" in:fly|local={{ duration: 500 }}>\n                            <div class=\"levelToolbar\">\n                                <div class=\"selectLevel me-3\">\n                                    {#if isSelectable(previewItem)}\n                                        <button\n                                            class=\"btn btn-xs btn-outline-primary d-flex align-items-center\"\n                                            title={_t(\"select ${preview_path}\", {\n                                                preview_path: previewItem.Title,\n                                            })}\n                                            on:click|preventDefault={() =>\n                                                addItem(previewItem)}\n                                            ><svg\n                                                use:resolveIcon={{ iconName: \"plus\" }}\n                                            />\n                                            <span class=\"select-button-ellipsis\"\n                                                >{previewItem.Title}</span\n                                            >\n                                        </button>\n                                    {/if}\n                                </div>\n                            </div>\n                            <div class=\"info\">\n                                {#if previewItem.getIcon}\n                                    <div class=\"previewImage\">\n                                        <img\n                                            src=\"{previewItem.getURL}/@@images/image/preview\"\n                                            alt={previewItem.Title}\n                                        />\n                                    </div>\n                                {:else}\n                                    <div class=\"previewIcon\">\n                                        <svg\n                                            use:resolveIcon={{\n                                                iconName: `contenttype/${previewItem.portal_type.toLowerCase().replace(/\\.| /g, \"-\")}`,\n                                            }}\n                                        />\n                                    </div>\n                                {/if}\n                                <dl>\n                                    <dt>{_t(\"Id\")}</dt>\n                                    <dd>{itemId(previewItem)}</dd>\n                                    <dt>{_t(\"Title\")}</dt>\n                                    <dd>{previewItem.Title}</dd>\n                                    {#if previewItem.Description}\n                                        <dt>{_t(\"Description\")}</dt>\n                                        <dd\n                                            class=\"text-truncate\"\n                                            title={previewItem.Description}\n                                        >\n                                            {previewItem.Description}\n                                        </dd>\n                                    {/if}\n                                    {#if previewItem.created}\n                                        <dt>{_t(\"created\")}</dt>\n                                        <dd>\n                                            <time datetime={previewItem.created}\n                                                >{formatDate(previewItem.created)}</time\n                                            >\n                                        </dd>\n                                    {/if}\n                                    {#if previewItem.modified}\n                                        <dt>{_t(\"modified\")}</dt>\n                                        <dd>\n                                            <time datetime={previewItem.modified}\n                                                >{formatDate(previewItem.modified)}</time\n                                            >\n                                        </dd>\n                                    {/if}\n                                    {#if previewItem.review_state}\n                                        <dt>{_t(\"review_state\")}</dt>\n                                        <dd>{previewItem.review_state}</dd>\n                                    {/if}\n                                </dl>\n                            </div>\n                        </div>\n                    {/if}\n                    {#if $previewUids.length > 1}\n                        <div class=\"preview\" in:fly|local={{ duration: 500 }}>\n                            <div class=\"levelToolbar\">\n                                <button\n                                    class=\"btn btn-xs btn-outline-primary d-flex align-items-center\"\n                                    title={_t(\"add selected items\")}\n                                    on:click|preventDefault={addSelectedItems}\n                                    ><svg use:resolveIcon={{ iconName: \"plus\" }} />\n                                    <span class=\"select-button-ellipsis\"\n                                        >{_t(\"add selected items\")}</span\n                                    >\n                                </button>\n                            </div>\n                            <div class=\"info\">\n                                <svg\n                                    use:resolveIcon={{\n                                        iconName: \"files\",\n                                    }}\n                                />\n                                <span class=\"\"\n                                    >{_t(\"${item_count} items selected\", {\n                                        item_count: $previewUids.length,\n                                    })}</span\n                                >\n                            </div>\n                        </div>\n                    {/if}\n                    {#if showUpload}\n                        <div class=\"upload-wrapper\"></div>\n                    {/if}\n                </div>\n            {:catch error}\n                <p style=\"color: red\">{error.message}</p>\n            {/await}\n        </nav>\n    </div>\n{/if}\n\n<style>\n    .content-browser-position-wrapper {\n        position: fixed;\n        top: 0;\n        right: 0;\n        display: flex;\n        justify-content: end;\n        z-index: 1500;\n        width: 100%;\n        height: 100vh;\n        background-color: rgba(0, 0, 0, 0.25);\n    }\n    .btn-xs {\n        --bs-btn-padding-y: 0.15rem;\n        --bs-btn-padding-x: 0.5rem;\n        --bs-btn-font-size: 0.75rem;\n    }\n    .content-browser {\n        height: 100vh;\n        min-width: 450px;\n        background-color: var(--bs-light-bg-subtle);\n        border-left: var(--bs-border-style) var(--bs-border-width) #fff;\n        z-index: 1500;\n        display: flex;\n        flex-direction: column;\n    }\n    .toolBar {\n        background-color: var(--bs-primary);\n        padding: 0.325rem 0.75rem;\n        color: var(--bs-light);\n        width: 100%;\n        display: flex;\n        justify-content: start;\n    }\n    .toolBar :global(svg) {\n        vertical-align: -0.125em;\n    }\n    .levelColumns {\n        display: flex;\n        flex-wrap: nowrap;\n        width: 100%;\n        overflow-y: hidden;\n        overflow-x: auto;\n        flex-grow: 3;\n        border-left: var(--bs-border-style) var(--bs-border-color) var(--bs-border-width);\n        user-select: none;\n    }\n\n    .levelColumn {\n        width: 320px;\n        background: rgba(var(--bs-secondary-bg-rgb), 0.55);\n        border-right: var(--bs-border-style) var(--bs-border-width)\n            var(--bs-border-color);\n        display: flex;\n        flex-direction: column;\n        flex-grow: 0;\n        flex-shrink: 0;\n    }\n    .levelColumn.active {\n        background: var(--bs-body-bg);\n        border-left: var(--bs-border-style) var(--bs-border-width) var(--bs-primary);\n        margin-left: -1px;\n    }\n    .levelToolbar {\n        width: 100%;\n        min-height: 2.5rem;\n        display: flex;\n        justify-content: space-between;\n        white-space: nowrap;\n        padding: 0.375rem;\n        border-bottom: var(--bs-border-style) var(--bs-border-width)\n            var(--bs-border-color);\n    }\n    .levelToolbar > .levelActions {\n        margin-left: auto;\n        display: flex;\n    }\n    .levelToolbar > button {\n        white-space: nowrap;\n        overflow: hidden;\n        text-overflow: ellipsis;\n    }\n\n    .levelItems {\n        overflow-x: auto;\n    }\n    .contentItem {\n        /* padding: 1rem 1rem; */\n        display: flex;\n        align-items: center;\n        justify-content: space-between;\n        font-size: 90%;\n        min-height: 2rem;\n    }\n    .contentItem:focus-visible {\n        outline: none;\n    }\n    .contentItem.even {\n        background-color: rgba(var(--bs-secondary-bg-rgb), 0.4);\n    }\n    .contentItem.inPath,\n    .contentItem.selectedItem {\n        background-color: rgba(var(--bs-primary-rgb), 0.15);\n    }\n    .contentItem > * {\n        padding: 0.5rem;\n        white-space: nowrap;\n        max-width: 450px;\n        text-overflow: ellipsis;\n        overflow: hidden;\n    }\n    .contentItem > .browseSub {\n        flex-shrink: 0;\n    }\n    .contentItem .plone-icon {\n        display: inline-block;\n    }\n    .contentItem .grid-preview > img {\n        width: 95px;\n        height: 95px;\n        object-fit: cover;\n        float: left;\n        margin-right: 1rem;\n    }\n    .contentItem .id-only {\n        font-style: italic;\n    }\n    .preview {\n        width: 320px;\n        flex-shrink: 0;\n        min-height: 300px;\n    }\n    .preview .info {\n        padding: 0.5rem;\n        width: 100%;\n        word-wrap: anywhere;\n    }\n    .preview .info .previewIcon {\n        margin: 0 auto 1rem auto;\n    }\n    .preview .info .previewIcon svg {\n        width: 50px !important;\n        height: 50px !important;\n    }\n    .preview img {\n        max-width: 100%;\n        height: auto;\n        margin-bottom: 0.5rem;\n    }\n\n    .upload-wrapper {\n        padding: 1rem;\n        width: 540px;\n        overflow-x: auto;\n        flex-shrink: 0;\n    }\n    .loadmore {\n        text-align: center;\n        padding: 0.25rem 0;\n    }\n\n    .select-button-ellipsis {\n        white-space: nowrap;\n        max-width: 150px;\n        text-overflow: ellipsis;\n        overflow: hidden;\n    }\n</style>\n","\n      import API from \"!../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"../../../../node_modules/@patternslib/dev/webpack/style-inserter.js\";\n      import setAttributes from \"!../../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../node_modules/css-loader/dist/cjs.js!../../../../node_modules/sass-loader/dist/cjs.js!../../../../node_modules/svelte-loader/index.js?cssPath=/home/runner/work/mockup/mockup/src/pat/contentbrowser/src/SelectedItems.svelte.1.css!./SelectedItems.svelte\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\noptions.insert = insertFn;\noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../node_modules/css-loader/dist/cjs.js!../../../../node_modules/sass-loader/dist/cjs.js!../../../../node_modules/svelte-loader/index.js?cssPath=/home/runner/work/mockup/mockup/src/pat/contentbrowser/src/SelectedItems.svelte.1.css!./SelectedItems.svelte\";\n       export default content && content.locals ? content.locals : undefined;\n","<script>\n    import { getContext, onMount, setContext } from \"svelte\";\n    import { get_items_from_uids } from \"./utils.js\";\n    import Sortable from \"sortablejs\";\n    import _t from \"../../../core/i18n-wrapper\";\n    import events from \"@patternslib/patternslib/src/core/events\";\n    import plone_registry from \"@plone/registry\";\n\n    let ref;\n    let initializing = true;\n    let RegisteredSelectedItem;\n\n    // get reactive context config\n    const config = getContext(\"config\");\n    const fieldId = $config.fieldId;\n    const selectedItemsNode = document.getElementById(fieldId);\n\n    // get reactive context store\n    const selectedItems = getContext(\"selectedItems\");\n    const selectedUids = getContext(\"selectedUids\");\n\n    // showContentBrowser reactive state\n    const showContentBrowser = getContext(\"showContentBrowser\");\n\n    onMount(async () => {\n        await initializeSelectedItemsStore();\n        initializeSorting();\n        initializing = false;\n    });\n\n    async function getSelectedItemComponent() {\n        // get selectedItem component from registry.\n        // the registry key can be customized with pattern_options\n        // if an addon registers a custom component to a custom key\n        if ($config.componentRegistryKeys?.selectedItem) {\n            RegisteredSelectedItem = plone_registry.getComponent(\n                $config.componentRegistryKeys.selectedItem,\n            );\n        }\n        // fallback if no custom component was registered\n        // or no valid component in registry\n        if (!RegisteredSelectedItem?.component) {\n            RegisteredSelectedItem = plone_registry.getComponent(\n                \"pat-contentbrowser.SelectedItem\",\n            );\n        }\n    }\n\n    function unselectItem(uid) {\n        selectedItems.update((n) => {\n            return n.filter((x) => x.UID !== uid);\n        });\n        selectedUids.update(() => $selectedItems.map((x) => x.UID));\n    }\n\n    async function initializeSelectedItemsStore() {\n        const initialValue = $config.selection.length\n            ? $config.selection\n            : selectedItemsNode?.value\n              ? selectedItemsNode.value.split($config.separator)\n              : [];\n\n        if (!initialValue.length) {\n            return;\n        }\n\n        $selectedItems = await get_items_from_uids(initialValue, $config);\n        selectedUids.update(() => $selectedItems.map((x) => x.UID));\n    }\n\n    function initializeSorting() {\n        if ($config.maximumSelectionSize !== 1 && $selectedItems.length > 1) {\n            Sortable.create(\n                selectedItemsNode.previousSibling.querySelector(\n                    \".content-browser-selected-items\",\n                ),\n                {\n                    draggable: \"> div\",\n                    animation: 200,\n                    onUpdate: (e) => {\n                        let sortedUuids = [];\n                        e.target.querySelectorAll(\".selected-item\").forEach((el) => {\n                            sortedUuids.push(el.dataset[\"uuid\"]);\n                        });\n                        setNodeValue(sortedUuids);\n                    },\n                },\n            );\n        }\n    }\n\n    function selectedUidsFromSelectedItems() {\n        let items = [];\n        $selectedItems.forEach((item) => {\n            items.push(item.UID);\n        });\n        return items;\n    }\n\n    function setNodeValue(selectedUids) {\n        const node_val = selectedUids.join($config.separator);\n        selectedItemsNode.value = node_val;\n        selectedItemsNode.dispatchEvent(events.change_event());\n    }\n\n    function LoadSelectedItemComponent(node, props) {\n        const component = new RegisteredSelectedItem.component({\n            target: node,\n            props: props,\n        });\n    }\n\n    $: {\n        $selectedItems;\n        if ($selectedItems.length || !initializing) {\n            setNodeValue(selectedUidsFromSelectedItems());\n            initializeSorting();\n        }\n    }\n</script>\n\n<div\n    class=\"content-browser-selected-items-wrapper\"\n    style=\"width: {$config.width || 'auto'}\"\n    bind:this={ref}\n>\n    <!-- svelte-ignore a11y-click-events-have-key-events -->\n    <!-- svelte-ignore a11y-no-static-element-interactions -->\n    <div\n        class=\"content-browser-selected-items\"\n        on:click={() => ($showContentBrowser = $selectedItems.length ? false : true)}\n    >\n        {#if $selectedItems}\n            {#await getSelectedItemComponent() then}\n                {#each $selectedItems as selItem, i (selItem.UID)}\n                    <div use:LoadSelectedItemComponent={{ item: selItem, unselectItem: unselectItem }} />\n                {/each}\n            {:catch error}\n                <p style=\"color: red\">{error.message}</p>\n            {/await}\n        {/if}\n        {#if !$selectedItems}\n            <p>{_t(\"loading selected items\")}</p>\n        {/if}\n    </div>\n    <!-- svelte-ignore a11y-invalid-attribute -->\n    <a\n        class=\"btn btn-primary\"\n        href=\"#\"\n        style=\"border-radius:0 var(--bs-border-radius) var(--bs-border-radius) 0\"\n        on:click|preventDefault={() => ($showContentBrowser = true)}>{_t(\"Select\")}</a\n    >\n</div>\n\n<style>\n    .content-browser-selected-items-wrapper {\n        display: flex;\n        align-items: start;\n    }\n    .content-browser-selected-items {\n        list-style: none;\n        background-color: var(--bs-body-bg);\n        border-radius: var(--bs-border-radius) 0 0 var(--bs-border-radius);\n        border: var(--bs-border-style) var(--bs-border-color) var(--bs-border-width);\n        min-height: 2.4rem;\n        padding: 0.5rem 0.5rem 0 0.5rem;\n        flex: 1 1 auto;\n    }\n</style>\n","import { setContext } from 'svelte';\nimport { writable } from 'svelte/store';\n\nexport const gridView = writable(false);\n\nexport function setCurrentPath() {\n    let currentPath = writable('');\n    setContext('currentPath', currentPath);\n}\n\nexport function setPathCache() {\n    let pathCache = writable({});\n    setContext('pathCache', pathCache);\n}\n\n// reactive context stores\nexport function setSelectedItems() {\n    let selItems = writable([]);\n    setContext('selectedItems', selItems);\n}\n\nexport function setConfig() {\n    let config = writable({});\n    setContext('config', config);\n}\n\nexport function setShowContentBrowser() {\n    let showContentBrowser = writable(false);\n    setContext('showContentBrowser', showContentBrowser);\n}\n\nexport function setSelectedUids() {\n    let selUids = writable([]);\n    setContext(\"selectedUids\", selUids);\n}\n\nexport function setPreviewUids() {\n    let prevUids = writable([]);\n    setContext(\"previewUids\", prevUids);\n}\n","<script>\n    import logger from \"@patternslib/patternslib/src/core/logging\";\n    import { getContext } from \"svelte\";\n    import ContentBrowser from \"./ContentBrowser.svelte\";\n    import SelectedItems from \"./SelectedItems.svelte\";\n    import {\n        setConfig,\n        setCurrentPath,\n        setPathCache,\n        setSelectedItems,\n        setSelectedUids,\n        setPreviewUids,\n        setShowContentBrowser,\n    } from \"./stores\";\n\n    export let maxDepth;\n    export let width;\n    export let attributes;\n    export let contextPath;\n    export let vocabularyUrl;\n    export let mode = \"browse\";\n    export let layout = \"list\";\n    export let rootPath = \"\";\n    export let rootUrl = \"\";\n    export let basePath = \"\";\n    export let selectableTypes = [];\n    export let browseableTypes = [\"Folder\", \"LIF\", \"LRF\"];\n    export let searchIndex = \"SearchableText\";\n    export let maximumSelectionSize = -1;\n    export let separator;\n    export let selection = [];\n    export let query = {};\n    export let fieldId;\n    export let upload;\n    export let favorites;\n    export let recentlyUsed;\n    export let recentlyUsedKey;\n    export let recentlyUsedMaxItems;\n    export let bSize = 20;\n    export let componentRegistryKeys = {};\n\n    const log = logger.getLogger(\"pat-contentbrowser\");\n\n    // initialize context stores\n    setCurrentPath();\n    setConfig();\n    setPathCache();\n    setSelectedItems();\n    setShowContentBrowser();\n    setSelectedUids();\n    setPreviewUids();\n\n    // initially set current path\n    const currentPath = getContext(\"currentPath\");\n\n    if (!$currentPath) {\n        if (basePath || rootPath) {\n            // if root path is not above base path we start at rootPath\n            $currentPath = basePath.indexOf(rootPath) != 0 ? rootPath : basePath;\n            if (\n                rootPath &&\n                $currentPath != rootPath &&\n                $currentPath.indexOf(rootPath) == 0\n            ) {\n                // remove rootPath from $currentPath\n                $currentPath = $currentPath.replace(rootPath, \"\");\n            }\n        } else {\n            // no path available. try to determine path from vocabularyUrl\n            const vocabPath = new URL(vocabularyUrl).pathname.split(\"/\");\n            rootPath =\n                contextPath =\n                $currentPath =\n                    vocabPath.slice(0, vocabPath.length - 1).join(\"/\") || \"/\";\n        }\n    }\n\n    let config = getContext(\"config\");\n    $config = {\n        mode: mode,\n        layout: layout,\n        attributes: attributes,\n        contextPath: contextPath,\n        vocabularyUrl: vocabularyUrl,\n        width: width,\n        maxDepth: maxDepth,\n        rootPath: rootPath,\n        rootUrl: rootUrl,\n        basePath: basePath,\n        selectableTypes: selectableTypes,\n        browseableTypes: browseableTypes,\n        searchIndex: searchIndex,\n        maximumSelectionSize: maximumSelectionSize,\n        separator: separator,\n        selection: selection,\n        query: query,\n        fieldId: fieldId,\n        uploadEnabled: upload,\n        favorites: favorites,\n        recentlyUsed: recentlyUsed,\n        recentlyUsedKey: recentlyUsedKey,\n        recentlyUsedMaxItems: recentlyUsedMaxItems,\n        pageSize: bSize,\n        componentRegistryKeys: componentRegistryKeys,\n    };\n\n    log.debug(`Initialized App<${fieldId}> with config`, $config);\n</script>\n\n<ContentBrowser />\n<SelectedItems />\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".content-browser-selected-items-wrapper.svelte-awokap{display:flex;align-items:start}.content-browser-selected-items.svelte-awokap{list-style:none;background-color:var(--bs-body-bg);border-radius:var(--bs-border-radius) 0 0 var(--bs-border-radius);border:var(--bs-border-style) var(--bs-border-color) var(--bs-border-width);min-height:2.4rem;padding:.5rem .5rem 0 .5rem;flex:1 1 auto}\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/pat/contentbrowser/src/SelectedItems.svelte\"],\"names\":[],\"mappings\":\"AAAA,sDAAA,YAAA,CAAA,iBAAA,CAAA,8CAAA,eAAA,CAAA,kCAAA,CAAA,iEAAA,CAAA,2EAAA,CAAA,iBAAA,CAAA,2BAAA,CAAA,aAAA\",\"sourcesContent\":[\".content-browser-selected-items-wrapper.svelte-awokap{display:flex;align-items:start}.content-browser-selected-items.svelte-awokap{list-style:none;background-color:var(--bs-body-bg);border-radius:var(--bs-border-radius) 0 0 var(--bs-border-radius);border:var(--bs-border-style) var(--bs-border-color) var(--bs-border-width);min-height:2.4rem;padding:0.5rem 0.5rem 0 0.5rem;flex:1 1 auto}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiU2VsZWN0ZWRJdGVtcy5zdmVsdGUiLCJzb3VyY2VzIjpbIlNlbGVjdGVkSXRlbXMuc3ZlbHRlIl0sInNvdXJjZXNDb250ZW50IjpbIjxzY3JpcHQ+XG4gICAgaW1wb3J0IHsgZ2V0Q29udGV4dCwgb25Nb3VudCwgc2V0Q29udGV4dCB9IGZyb20gXCJzdmVsdGVcIjtcbiAgICBpbXBvcnQgeyBnZXRfaXRlbXNfZnJvbV91aWRzIH0gZnJvbSBcIi4vdXRpbHMuanNcIjtcbiAgICBpbXBvcnQgU29ydGFibGUgZnJvbSBcInNvcnRhYmxlanNcIjtcbiAgICBpbXBvcnQgX3QgZnJvbSBcIi4uLy4uLy4uL2NvcmUvaTE4bi13cmFwcGVyXCI7XG4gICAgaW1wb3J0IGV2ZW50cyBmcm9tIFwiQHBhdHRlcm5zbGliL3BhdHRlcm5zbGliL3NyYy9jb3JlL2V2ZW50c1wiO1xuICAgIGltcG9ydCBwbG9uZV9yZWdpc3RyeSBmcm9tIFwiQHBsb25lL3JlZ2lzdHJ5XCI7XG5cbiAgICBsZXQgcmVmO1xuICAgIGxldCBpbml0aWFsaXppbmcgPSB0cnVlO1xuICAgIGxldCBSZWdpc3RlcmVkU2VsZWN0ZWRJdGVtO1xuXG4gICAgLy8gZ2V0IHJlYWN0aXZlIGNvbnRleHQgY29uZmlnXG4gICAgY29uc3QgY29uZmlnID0gZ2V0Q29udGV4dChcImNvbmZpZ1wiKTtcbiAgICBjb25zdCBmaWVsZElkID0gJGNvbmZpZy5maWVsZElkO1xuICAgIGNvbnN0IHNlbGVjdGVkSXRlbXNOb2RlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoZmllbGRJZCk7XG5cbiAgICAvLyBnZXQgcmVhY3RpdmUgY29udGV4dCBzdG9yZVxuICAgIGNvbnN0IHNlbGVjdGVkSXRlbXMgPSBnZXRDb250ZXh0KFwic2VsZWN0ZWRJdGVtc1wiKTtcbiAgICBjb25zdCBzZWxlY3RlZFVpZHMgPSBnZXRDb250ZXh0KFwic2VsZWN0ZWRVaWRzXCIpO1xuXG4gICAgLy8gc2hvd0NvbnRlbnRCcm93c2VyIHJlYWN0aXZlIHN0YXRlXG4gICAgY29uc3Qgc2hvd0NvbnRlbnRCcm93c2VyID0gZ2V0Q29udGV4dChcInNob3dDb250ZW50QnJvd3NlclwiKTtcblxuICAgIG9uTW91bnQoYXN5bmMgKCkgPT4ge1xuICAgICAgICBhd2FpdCBpbml0aWFsaXplU2VsZWN0ZWRJdGVtc1N0b3JlKCk7XG4gICAgICAgIGluaXRpYWxpemVTb3J0aW5nKCk7XG4gICAgICAgIGluaXRpYWxpemluZyA9IGZhbHNlO1xuICAgIH0pO1xuXG4gICAgYXN5bmMgZnVuY3Rpb24gZ2V0U2VsZWN0ZWRJdGVtQ29tcG9uZW50KCkge1xuICAgICAgICAvLyBnZXQgc2VsZWN0ZWRJdGVtIGNvbXBvbmVudCBmcm9tIHJlZ2lzdHJ5LlxuICAgICAgICAvLyB0aGUgcmVnaXN0cnkga2V5IGNhbiBiZSBjdXN0b21pemVkIHdpdGggcGF0dGVybl9vcHRpb25zXG4gICAgICAgIC8vIGlmIGFuIGFkZG9uIHJlZ2lzdGVycyBhIGN1c3RvbSBjb21wb25lbnQgdG8gYSBjdXN0b20ga2V5XG4gICAgICAgIGlmICgkY29uZmlnLmNvbXBvbmVudFJlZ2lzdHJ5S2V5cz8uc2VsZWN0ZWRJdGVtKSB7XG4gICAgICAgICAgICBSZWdpc3RlcmVkU2VsZWN0ZWRJdGVtID0gcGxvbmVfcmVnaXN0cnkuZ2V0Q29tcG9uZW50KFxuICAgICAgICAgICAgICAgICRjb25maWcuY29tcG9uZW50UmVnaXN0cnlLZXlzLnNlbGVjdGVkSXRlbSxcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gZmFsbGJhY2sgaWYgbm8gY3VzdG9tIGNvbXBvbmVudCB3YXMgcmVnaXN0ZXJlZFxuICAgICAgICAvLyBvciBubyB2YWxpZCBjb21wb25lbnQgaW4gcmVnaXN0cnlcbiAgICAgICAgaWYgKCFSZWdpc3RlcmVkU2VsZWN0ZWRJdGVtPy5jb21wb25lbnQpIHtcbiAgICAgICAgICAgIFJlZ2lzdGVyZWRTZWxlY3RlZEl0ZW0gPSBwbG9uZV9yZWdpc3RyeS5nZXRDb21wb25lbnQoXG4gICAgICAgICAgICAgICAgXCJwYXQtY29udGVudGJyb3dzZXIuU2VsZWN0ZWRJdGVtXCIsXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gdW5zZWxlY3RJdGVtKHVpZCkge1xuICAgICAgICBzZWxlY3RlZEl0ZW1zLnVwZGF0ZSgobikgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIG4uZmlsdGVyKCh4KSA9PiB4LlVJRCAhPT0gdWlkKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHNlbGVjdGVkVWlkcy51cGRhdGUoKCkgPT4gJHNlbGVjdGVkSXRlbXMubWFwKCh4KSA9PiB4LlVJRCkpO1xuICAgIH1cblxuICAgIGFzeW5jIGZ1bmN0aW9uIGluaXRpYWxpemVTZWxlY3RlZEl0ZW1zU3RvcmUoKSB7XG4gICAgICAgIGNvbnN0IGluaXRpYWxWYWx1ZSA9ICRjb25maWcuc2VsZWN0aW9uLmxlbmd0aFxuICAgICAgICAgICAgPyAkY29uZmlnLnNlbGVjdGlvblxuICAgICAgICAgICAgOiBzZWxlY3RlZEl0ZW1zTm9kZT8udmFsdWVcbiAgICAgICAgICAgICAgPyBzZWxlY3RlZEl0ZW1zTm9kZS52YWx1ZS5zcGxpdCgkY29uZmlnLnNlcGFyYXRvcilcbiAgICAgICAgICAgICAgOiBbXTtcblxuICAgICAgICBpZiAoIWluaXRpYWxWYWx1ZS5sZW5ndGgpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgICRzZWxlY3RlZEl0ZW1zID0gYXdhaXQgZ2V0X2l0ZW1zX2Zyb21fdWlkcyhpbml0aWFsVmFsdWUsICRjb25maWcpO1xuICAgICAgICBzZWxlY3RlZFVpZHMudXBkYXRlKCgpID0+ICRzZWxlY3RlZEl0ZW1zLm1hcCgoeCkgPT4geC5VSUQpKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBpbml0aWFsaXplU29ydGluZygpIHtcbiAgICAgICAgaWYgKCRjb25maWcubWF4aW11bVNlbGVjdGlvblNpemUgIT09IDEgJiYgJHNlbGVjdGVkSXRlbXMubGVuZ3RoID4gMSkge1xuICAgICAgICAgICAgU29ydGFibGUuY3JlYXRlKFxuICAgICAgICAgICAgICAgIHNlbGVjdGVkSXRlbXNOb2RlLnByZXZpb3VzU2libGluZy5xdWVyeVNlbGVjdG9yKFxuICAgICAgICAgICAgICAgICAgICBcIi5jb250ZW50LWJyb3dzZXItc2VsZWN0ZWQtaXRlbXNcIixcbiAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgZHJhZ2dhYmxlOiBcIj4gZGl2XCIsXG4gICAgICAgICAgICAgICAgICAgIGFuaW1hdGlvbjogMjAwLFxuICAgICAgICAgICAgICAgICAgICBvblVwZGF0ZTogKGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBzb3J0ZWRVdWlkcyA9IFtdO1xuICAgICAgICAgICAgICAgICAgICAgICAgZS50YXJnZXQucXVlcnlTZWxlY3RvckFsbChcIi5zZWxlY3RlZC1pdGVtXCIpLmZvckVhY2goKGVsKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc29ydGVkVXVpZHMucHVzaChlbC5kYXRhc2V0W1widXVpZFwiXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldE5vZGVWYWx1ZShzb3J0ZWRVdWlkcyk7XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBzZWxlY3RlZFVpZHNGcm9tU2VsZWN0ZWRJdGVtcygpIHtcbiAgICAgICAgbGV0IGl0ZW1zID0gW107XG4gICAgICAgICRzZWxlY3RlZEl0ZW1zLmZvckVhY2goKGl0ZW0pID0+IHtcbiAgICAgICAgICAgIGl0ZW1zLnB1c2goaXRlbS5VSUQpO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIGl0ZW1zO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHNldE5vZGVWYWx1ZShzZWxlY3RlZFVpZHMpIHtcbiAgICAgICAgY29uc3Qgbm9kZV92YWwgPSBzZWxlY3RlZFVpZHMuam9pbigkY29uZmlnLnNlcGFyYXRvcik7XG4gICAgICAgIHNlbGVjdGVkSXRlbXNOb2RlLnZhbHVlID0gbm9kZV92YWw7XG4gICAgICAgIHNlbGVjdGVkSXRlbXNOb2RlLmRpc3BhdGNoRXZlbnQoZXZlbnRzLmNoYW5nZV9ldmVudCgpKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBMb2FkU2VsZWN0ZWRJdGVtQ29tcG9uZW50KG5vZGUsIHByb3BzKSB7XG4gICAgICAgIGNvbnN0IGNvbXBvbmVudCA9IG5ldyBSZWdpc3RlcmVkU2VsZWN0ZWRJdGVtLmNvbXBvbmVudCh7XG4gICAgICAgICAgICB0YXJnZXQ6IG5vZGUsXG4gICAgICAgICAgICBwcm9wczogcHJvcHMsXG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgICQ6IHtcbiAgICAgICAgJHNlbGVjdGVkSXRlbXM7XG4gICAgICAgIGlmICgkc2VsZWN0ZWRJdGVtcy5sZW5ndGggfHwgIWluaXRpYWxpemluZykge1xuICAgICAgICAgICAgc2V0Tm9kZVZhbHVlKHNlbGVjdGVkVWlkc0Zyb21TZWxlY3RlZEl0ZW1zKCkpO1xuICAgICAgICAgICAgaW5pdGlhbGl6ZVNvcnRpbmcoKTtcbiAgICAgICAgfVxuICAgIH1cbjwvc2NyaXB0PlxuXG48ZGl2XG4gICAgY2xhc3M9XCJjb250ZW50LWJyb3dzZXItc2VsZWN0ZWQtaXRlbXMtd3JhcHBlclwiXG4gICAgc3R5bGU9XCJ3aWR0aDogeyRjb25maWcud2lkdGggfHwgJ2F1dG8nfVwiXG4gICAgYmluZDp0aGlzPXtyZWZ9XG4+XG4gICAgPCEtLSBzdmVsdGUtaWdub3JlIGExMXktY2xpY2stZXZlbnRzLWhhdmUta2V5LWV2ZW50cyAtLT5cbiAgICA8IS0tIHN2ZWx0ZS1pZ25vcmUgYTExeS1uby1zdGF0aWMtZWxlbWVudC1pbnRlcmFjdGlvbnMgLS0+XG4gICAgPGRpdlxuICAgICAgICBjbGFzcz1cImNvbnRlbnQtYnJvd3Nlci1zZWxlY3RlZC1pdGVtc1wiXG4gICAgICAgIG9uOmNsaWNrPXsoKSA9PiAoJHNob3dDb250ZW50QnJvd3NlciA9ICRzZWxlY3RlZEl0ZW1zLmxlbmd0aCA/IGZhbHNlIDogdHJ1ZSl9XG4gICAgPlxuICAgICAgICB7I2lmICRzZWxlY3RlZEl0ZW1zfVxuICAgICAgICAgICAgeyNhd2FpdCBnZXRTZWxlY3RlZEl0ZW1Db21wb25lbnQoKSB0aGVufVxuICAgICAgICAgICAgICAgIHsjZWFjaCAkc2VsZWN0ZWRJdGVtcyBhcyBzZWxJdGVtLCBpIChzZWxJdGVtLlVJRCl9XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgdXNlOkxvYWRTZWxlY3RlZEl0ZW1Db21wb25lbnQ9e3sgaXRlbTogc2VsSXRlbSwgdW5zZWxlY3RJdGVtOiB1bnNlbGVjdEl0ZW0gfX0gLz5cbiAgICAgICAgICAgICAgICB7L2VhY2h9XG4gICAgICAgICAgICB7OmNhdGNoIGVycm9yfVxuICAgICAgICAgICAgICAgIDxwIHN0eWxlPVwiY29sb3I6IHJlZFwiPntlcnJvci5tZXNzYWdlfTwvcD5cbiAgICAgICAgICAgIHsvYXdhaXR9XG4gICAgICAgIHsvaWZ9XG4gICAgICAgIHsjaWYgISRzZWxlY3RlZEl0ZW1zfVxuICAgICAgICAgICAgPHA+e190KFwibG9hZGluZyBzZWxlY3RlZCBpdGVtc1wiKX08L3A+XG4gICAgICAgIHsvaWZ9XG4gICAgPC9kaXY+XG4gICAgPCEtLSBzdmVsdGUtaWdub3JlIGExMXktaW52YWxpZC1hdHRyaWJ1dGUgLS0+XG4gICAgPGFcbiAgICAgICAgY2xhc3M9XCJidG4gYnRuLXByaW1hcnlcIlxuICAgICAgICBocmVmPVwiI1wiXG4gICAgICAgIHN0eWxlPVwiYm9yZGVyLXJhZGl1czowIHZhcigtLWJzLWJvcmRlci1yYWRpdXMpIHZhcigtLWJzLWJvcmRlci1yYWRpdXMpIDBcIlxuICAgICAgICBvbjpjbGlja3xwcmV2ZW50RGVmYXVsdD17KCkgPT4gKCRzaG93Q29udGVudEJyb3dzZXIgPSB0cnVlKX0+e190KFwiU2VsZWN0XCIpfTwvYVxuICAgID5cbjwvZGl2PlxuXG48c3R5bGU+XG4gICAgLmNvbnRlbnQtYnJvd3Nlci1zZWxlY3RlZC1pdGVtcy13cmFwcGVyIHtcbiAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgYWxpZ24taXRlbXM6IHN0YXJ0O1xuICAgIH1cbiAgICAuY29udGVudC1icm93c2VyLXNlbGVjdGVkLWl0ZW1zIHtcbiAgICAgICAgbGlzdC1zdHlsZTogbm9uZTtcbiAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tYnMtYm9keS1iZyk7XG4gICAgICAgIGJvcmRlci1yYWRpdXM6IHZhcigtLWJzLWJvcmRlci1yYWRpdXMpIDAgMCB2YXIoLS1icy1ib3JkZXItcmFkaXVzKTtcbiAgICAgICAgYm9yZGVyOiB2YXIoLS1icy1ib3JkZXItc3R5bGUpIHZhcigtLWJzLWJvcmRlci1jb2xvcikgdmFyKC0tYnMtYm9yZGVyLXdpZHRoKTtcbiAgICAgICAgbWluLWhlaWdodDogMi40cmVtO1xuICAgICAgICBwYWRkaW5nOiAwLjVyZW0gMC41cmVtIDAgMC41cmVtO1xuICAgICAgICBmbGV4OiAxIDEgYXV0bztcbiAgICB9XG48L3N0eWxlPlxuIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQTJKSSxxREFBd0MsQ0FDcEMsT0FBTyxDQUFFLElBQUksQ0FDYixXQUFXLENBQUUsS0FDakIsQ0FDQSw2Q0FBZ0MsQ0FDNUIsVUFBVSxDQUFFLElBQUksQ0FDaEIsZ0JBQWdCLENBQUUsSUFBSSxZQUFZLENBQUMsQ0FDbkMsYUFBYSxDQUFFLElBQUksa0JBQWtCLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksa0JBQWtCLENBQUMsQ0FDbEUsTUFBTSxDQUFFLElBQUksaUJBQWlCLENBQUMsQ0FBQyxJQUFJLGlCQUFpQixDQUFDLENBQUMsSUFBSSxpQkFBaUIsQ0FBQyxDQUM1RSxVQUFVLENBQUUsTUFBTSxDQUNsQixPQUFPLENBQUUsTUFBTSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUMvQixJQUFJLENBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUNkIn0=*/\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n"],"names":["log","logger","getLogger","async","request","method","vocabularyUrl","attributes","path","uids","searchTerm","searchIndex","searchPath","levelInfoPath","selectableTypes","browseableTypes","pageSize","page","vocabQuery","criteria","i","o","v","sort_on","sort_order","length","push","concat","results","total","url_query","JSON","stringify","url_parameters","url_batch","size","url","encodeURI","indexOf","debug","headers","Headers","set","response","fetch","ok","errors","json","filtered_response","it","portal_type","is_folderish","get_items_from_uids","config","selectedItemsFromUids","sort","a","b","UID","resolveIcon","node","iconName","iconCode","utils","getIcon","outerHTML","destroy","clickOutside","handleClick","event","contains","target","dispatchEvent","CustomEvent","document","addEventListener","removeEventListener","recentlyUsedItems","filterItems","ret","storage","get","recentlyUsedKey","slice","filter","max","parseInt","recentlyUsedMaxItems","updateRecentlyUsed","item","recentlyUsed","alreadyPresent","splice","formatDate","dateval","d","Date","parse","i18n","I18n","toLocaleString","currentLanguage","replace","___CSS_LOADER_EXPORT___","module","id","pathCache","store","writable","load","query","updateCache","loadMorePath","mode","rootPath","level","has_more","update","levels","load_more","selectable","search","p","forEach","l","nextBatch","rootPathParts","split","physicalPath","hideRootPath","startsWith","pathParts","overlapIdx","includes","join","paths","parts","maxDepth","Math","min","partsToShow","pathPrefix","sub_path","pop","pC","pathCounter","isFirstPath","displayPath","RegExp","levelInfo","Title","showFilter","n","browse","favorites","title","dispatch","select","favorite","reverse","getURL","toLowerCase","items","$config","options","styleTagTransform","setAttributes","insert","domAPI","insertStyleElement","locals","uploadEnabled","x","opacity","current_path","message","duration","itemId","level_path","Description","created","modified","review_state","preview_path","item_count","scrollX","container","currentPath","showContentBrowser","selectedItems","selectedUids","previewUids","contentItems","showUpload","previewItem","keyboardNavInitialized","shiftKey","gridView","layout","defaultConfigMode","vw","documentElement","clientWidth","window","innerWidth","updatePreview","data","uuid","action","$previewUids","maximumSelectionSize","changePath","e","folderPath","scrollToRight","showPreview","clickItem","levelWrapper","currentTarget","closest","prevSelection","querySelectorAll","el","children","dataset","metaKey","ctrlKey","map","classList","remove","focus","add","initKeyboardNav","possibleFocusEls","querySelector","keyboardNavigation","key","closeBrowser","nextElementSibling","click","previousElementSibling","currCol","nxtCol","prevCol","isSelectable","addItem","addSelectedItems","$selectedItems","previewItems","$selectedUids","filterLevel","$showContentBrowser","scrollContainer","scrollWidth","searchItemsKeyup","debounce","searchItems","value","val","$currentPath","filterLevelKeyup","timeout","uploadEl","baseUrl","rootUrl","relativePath","allowPathSelection","hiddenInputContainer","success","fileupload","obj","queuecomplete","fileUpload","detail","alert","item_path","curr_path","in_path","idx","observer","IntersectionObserver","entries","entry","isIntersecting","levelPath","levelNextPage","threshold","root","margin","setTimeout","observe","unselectItem","width","ref","RegisteredSelectedItem","initializing","fieldId","selectedItemsNode","getElementById","initializeSorting","previousSibling","draggable","animation","onUpdate","sortedUuids","setNodeValue","node_val","separator","events","change_event","initialValue","selection","initializeSelectedItemsStore","selectedUidsFromSelectedItems","componentRegistryKeys","selectedItem","component","uid","props","contextPath","basePath","upload","bSize","setContext","setCurrentPath","setConfig","setPathCache","selItems","setSelectedItems","setShowContentBrowser","selUids","setSelectedUids","prevUids","setPreviewUids","vocabPath","URL","pathname"],"sourceRoot":""}