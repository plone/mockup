(self.webpackChunk_plone_mockup=self.webpackChunk_plone_mockup||[]).push([[88465],{72236:function(t,e,n){"use strict";var i=n(33077),a=n(33541),s=n(44563),r=n(59329);const o=new a.A("code-editor");o.addArgument("language",null),o.addArgument("linenumbers",!1),o.addArgument("theme","dark"),o.addArgument("tab","    "),o.addArgument("indent-on","{$"),o.addArgument("spellcheck",!1),o.addArgument("catch-tab",!0),o.addArgument("preserve-ident",!0),o.addArgument("add-closing",!0),o.addArgument("history",!0);const l={atom:"xml",html:"xml",plist:"xml",rss:"xml",svg:"xml",wsf:"xml",xhtml:"xml",xjb:"xml",xsd:"xml",xsl:"xml"};class c extends i.m{static name="code-editor";static trigger=".pat-code-editor";static parser=(()=>o)();async init(){const t=(await n.e(19983).then(n.bind(n,19983))).CodeJar,e=(await n.e(45981).then(n.t.bind(n,45981,23))).default;let i,a=this.el;i="light"===this.options.theme?"stackoverflow-light":"dark"===this.options.theme||"okaidia"===this.options.theme?"stackoverflow-dark":this.options.theme,await n(21132)(`./${i}.css`),window.__patternslib_import_styles&&await n.e(3027).then(n.bind(n,3027));const r=t=>{t.textContent=t.textContent,e.highlightElement(t)};let o=r;if(this.options.linenumbers){o=(0,(await n.e(13190).then(n.bind(n,90809))).withLineNumbers)(r,{class:`codejar-linenumbers ${i}`})}let c=[...a.classList].filter((t=>t.startsWith("language-")))[0];c=c?c.replace("language-",""):this.options.language,c=c||"plaintext";const d=(await n(32908)(`./${l[c]||c}`)).default;if(e.registerLanguage(c,d),["textarea","input"].includes(this.el.nodeName.toLowerCase())){const t=document.createElement("pre");t.innerHTML="<code contenteditable></code>",a=t.querySelector("code"),a.textContent=this.el.value,this.el.parentNode.insertBefore(t,this.el),this.el.setAttribute("hidden","")}a.classList.add("code-editor",`theme-${this.options.theme}`,`language-${c}`);const u={tab:this.options.tab.replace(/'/g,"").replace(/"/g,"").replace(/\\t/g,"\t"),indentOn:new RegExp(this.options.indentOn),spellcheck:this.options.spellcheck,catchTab:this.options.catchTab,preserveIdent:this.options.preserveIdent,addClosing:this.options.addClosing,history:this.options.history};this.codeeditor=t(a,o,u),a!==this.el&&this.codeeditor.onUpdate((t=>{this.el.value=t.trim(),this.el.dispatchEvent(s.A.input_event())}))}}r.A.register(c)},71553:function(t,e,n){"use strict";n.d(e,{A:function(){return u}});var i=n(35686),a=n.n(i),s=n(59329),r=n(23505),o={getOptions(t,e,n){n=n||{},0===t.length||a().nodeName(t[0],"body")||(n=this.getOptions(t.parent(),e,n));let i={};if(0!==t.length&&(i=t.data("pat-"+e),i&&"string"==typeof i)){const t={};a().each(i.split(";"),(function(e,n){(n=n.split(":")).reverse();let i=n.pop();i=i.replace(/^\s+|\s+$/g,""),n.reverse();let a=n.join(":");a=a.replace(/^\s+|\s+$/g,""),t[i]=a})),i=t}return a().extend(!0,{},n,i)}};const l=r.A.getLogger("Patternslib Base"),c=function(t,e,n){t.jquery||(t=a()(t));const i=this.prototype.name,l=r.A.getLogger(`pat.${i}`);let c=t.data(`pattern-${i}`);if(void 0===c&&s.A.patterns[i])try{t.data(`pattern-${i}`,"initializing"),e="mockup"===this.prototype.parser?o.getOptions(t,i,e):e,c=new s.A.patterns[i](t,e,n)}catch(t){l.error(`Failed while initializing ${i} pattern.`,t)}return c},d=async function(t,e,n){t?.jquery&&0===t.length||!t?l.warn("No element given to pattern."):(t.jquery||(t=a()(t)),this.$el=t,this.el=t[0],this.options=a().extend(!0,{},this.defaults||{},e||{}),this.emit("pre-init"),await this.init(t,e,n),this.$el.data(`pattern-${this.name}`,this),this.el[`pattern-${this.name}`]=this,this.emit("init"))};d.prototype={constructor:d,on(t,e){this.$el.on(`${t}.${this.name}.patterns`,e)},one(t,e){this.$el.one(`${t}.${this.name}.patterns`,e)},emit(t,e){void 0===e&&(e=[]),this.$el.trigger(`${t}.${this.name}.patterns`,e)}},d.extend=function(t){const e=this;let n;if(!t)throw new Error("Pattern configuration properties required when calling Base.extend");n=Object.hasOwnProperty.call(t,"constructor")?t.constructor:function(){e.apply(this,arguments)},n.extend=d.extend,n.init=c,n.jquery_plugin=!0,n.trigger=t.trigger,n.parser=t?.parser||null;var i=function(){this.constructor=n};return i.prototype=e.prototype,n.prototype=new i,a().extend(!0,n.prototype,t),n.__super__=e.prototype,t.name?t.trigger?!1!==t.autoregister&&s.A.register(n,t.name):l.warn(`The pattern ${t.name} does not have a trigger attribute, it will not be registered.`):l.warn("This pattern without a name attribute will not be registered!"),n};var u=d},33077:function(t,e,n){"use strict";n.d(e,{m:function(){return s}});var i=n(44563);const a=n(23505).A.getLogger("basepattern");class s{static name;static trigger;static parser;parser_group_options=!0;parser_multiple=void 0;parser_inherit=!0;constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.name=this.constructor.name,this.trigger=this.constructor.trigger,this.parser=this.constructor.parser,t?(t.jquery&&(t=t[0]),this.el=t,this.el.dispatchEvent(new Event(`pre-init.${this.name}.patterns`,{bubbles:!0,cancelable:!0})),window.setTimeout((async()=>{if(void 0!==this.el[`pattern-${this.name}`])return a.debug(`Not reinstatiating the pattern ${this.name}.`,this.el),void this.el.dispatchEvent(new Event(`not-init.${this.name}.patterns`,{bubbles:!0,cancelable:!1}));this.options=this.parser?.parse(this.el,e,this.parser_multiple,this.parser_inherit,this.parser_group_options)??e,this.el[`pattern-${this.name}`]=this,await this.init(),this.el.dispatchEvent(new Event(`init.${this.name}.patterns`,{bubbles:!0,cancelable:!0}))}),0)):a.warn(`No element given to pattern ${this.name}.`)}async init(){}one(t,e){i.A.add_event_listener(this.el,`${t}.${this.name}.patterns`,`basepattern-one--${t}.${this.name}.patterns`,e,{once:!0})}destroy(){delete this.el[`pattern-${this.name}`]}}},62800:function(t,e,n){"use strict";const i=n(23505).A.getLogger("core dom"),a="__patternslib__data_prefix__",s="__patternslib__style__display";function r(t,e){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=window.getComputedStyle(t).getPropertyValue(e);return(n||i)&&(a=parseFloat(a)||0),n&&!i&&(a=parseInt(Math.round(a),10)),a}const o=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document.body;e===window&&(e=document.body);const n=Math.abs(t.getBoundingClientRect().left+e.scrollLeft-e.getBoundingClientRect().left-d.get_css_value(e,"border-left-width",!0));return{top:Math.abs(t.getBoundingClientRect().top+e.scrollTop-e.getBoundingClientRect().top-d.get_css_value(e,"border-top-width",!0)),left:n}},l=(t,e,n)=>t[`${a}${e}`]||n,c=(t,e,n)=>{t[`${a}${e}`]=n},d={toNodeArray:t=>(t.jquery||t instanceof NodeList?t=[...t]:t instanceof Array==!1&&(t=[t]),t),querySelectorAllAndMe:(t,e)=>{if(!t)return[];const n=[...t.querySelectorAll(e)];return t.matches(e)&&n.unshift(t),n},wrap:(t,e)=>{t.parentNode.insertBefore(e,t),e.appendChild(t)},hide:t=>{"none"!==t.style.display&&(t.style.display&&(t[s]=t.style.display),t.style.display="none")},show:t=>{const e=t[s]||null;t.style.display=e,delete t[s]},find_parents:(t,e)=>{const n=[];let i=t;for(;i;)i=i.parentNode?.closest?.(e),i&&n.push(i);return n},find_scoped:(t,e)=>(0===e.indexOf("#")?document:t).querySelectorAll(e),get_parents:t=>{const e=[];let n=t?.parentNode;for(;n;)e.push(n),n=n?.parentNode,n=n instanceof HTMLElement?n:null;return e},acquire_attribute:function(t,e){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=t;const s=[];for(;a;){const t=a.getAttribute(e);if(t||n&&""===t){if(!i)return t;s.push(t)}a=a.parentElement}if(i)return s},is_visible:t=>t.offsetWidth>0&&t.offsetHeight>0,is_input:t=>/^(?:input|select|textarea|button)$/i.test(t.nodeName),create_from_string:t=>document.createRange().createContextualFragment(t.trim()),get_css_value:r,find_scroll_container:function(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:document.body;for(;t&&t!==document.body;){if(!e||"y"===e){let e=r(t,"overflow-y");if(["auto","scroll"].includes(e))return t}if(!e||"x"===e){let e=r(t,"overflow-x");if(["auto","scroll"].includes(e))return t}t=t.parentElement}return n},get_scroll_x:t=>void 0!==t.scrollLeft?t.scrollLeft:t.scrollX,get_scroll_y:t=>void 0!==t.scrollTop?t.scrollTop:t.scrollY,get_relative_position:o,scroll_to_element:function(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"top";const a=o(t,e),s={behavior:"auto"};"top"!==i&&"both"!==i||(s.top=a.top-n),"left"!==i&&"both"!==i||(s.left=a.left-n),e.scrollTo(s)},scroll_to_top:function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document.body,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;t.scrollTo({top:0-e,behavior:"auto"})},scroll_to_bottom:function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document.body,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=(t===window?document.body:t).scrollHeight;t.scrollTo({top:n-e,behavior:"auto"})},get_data:l,set_data:c,delete_data:(t,e)=>{delete t[`${a}${e}`]},template:function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return i.warn("Using dom.template is not recommended due to a problem with Content-Security-Policy."),new Function("return `"+t+"`;").call(e)},get_visible_ratio:(t,e)=>{if(!t)return 0;const n=t.getBoundingClientRect(),i=e!==window?e.getBoundingClientRect():{top:0,bottom:window.innerHeight};let a=0;if(n.top<i.bottom&&n.bottom>i.top){const t=n.bottom-n.top;a=(Math.min(n.bottom,i.bottom)-Math.max(n.top,i.top))/t}return a},escape_css_id:t=>`#${CSS.escape(t.split("#")[1])}`,element_uuid:t=>{if(!l(t,"uuid",!1)){let e;if(window.crypto.randomUUID)e=window.crypto.randomUUID();else{const t=new Uint32Array(4);e=window.crypto.getRandomValues(t).join("")}c(t,"uuid",e)}return l(t,"uuid")},find_form:t=>t.closest(".pat-subform")||t.form||t.querySelector("input, select, textarea, button")?.form||t.closest("form")};e.A=d},44563:function(t,e,n){"use strict";var i=n(8633);const a=new Map,s=(t,e)=>{const n=t?[t]:a.keys();for(const t of n){if(!t?.removeEventListener)return;const n=a.get(t);if(!n)return;let s;s=e?[...n.entries()].filter((t=>i.A.regexp_from_wildcard(e).test(t[0]))):n.entries();for(const e of s||[])t.removeEventListener(e[1][0],e[1][1],e[1][2]),a.get(t).delete(e[0]),a.get(t).size||a.delete(t)}};e.A={add_event_listener:function(t,e,n,i){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};if(!t?.addEventListener)return;s(t,n),a.has(t)||a.set(t,new Map);let o=i;!0===r?.once&&(o=e=>{a.get(t)?.delete(n),i(e)}),a.get(t).set(n,[e,o,r.capture?r:void 0]),t.addEventListener(e,o,r)},remove_event_listener:s,await_event:(t,e)=>new Promise((n=>t.addEventListener(e,n,{once:!0}))),await_pattern_init:t=>new Promise(((e,n)=>{t.one("init",(n=>{n.target===t.el&&(s(t.el,`basepattern-one--not-init.${t.name}.patterns`),e())})),t.one("not-init",(e=>{e.target===t.el&&(s(t.el,`basepattern-one--init.${t.name}.patterns`),n())}))})).catch((()=>{throw new Error(`Pattern "${t.name}" not initialized.`)})),generic_event:t=>new Event(t,{bubbles:!0,cancelable:!0}),blur_event:()=>new Event("blur",{bubbles:!1,cancelable:!1}),click_event:()=>new Event("click",{bubbles:!0,cancelable:!0}),change_event:()=>new Event("change",{bubbles:!0,cancelable:!1}),focus_event:()=>new Event("focus",{bubbles:!1,cancelable:!1}),input_event:()=>new Event("input",{bubbles:!0,cancelable:!1}),mousedown_event:()=>new Event("mousedown",{bubbles:!0,cancelable:!0}),mouseup_event:()=>new Event("mouseup",{bubbles:!0,cancelable:!0}),scroll_event:()=>new Event("scroll",{bubbles:!0,cancelable:!1}),submit_event:function(){let{submitter:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{submitter:void 0};const e=new Event("submit",{bubbles:!0,cancelable:!0});return e.submitter=t,e},dragstart_event:()=>new Event("dragstart",{bubbles:!0,cancelable:!0}),dragend_event:()=>new Event("dragend",{bubbles:!0,cancelable:!0})}},64714:function(t,e,n){"use strict";var i=n(35686),a=n.n(i),s={init:function(t){var e={time:3,initialTime:8,exceptionAreas:[]};return this.each((function(){var n=a()(this);n.data("timeout")||(t&&a().extend(e,t),n.data("timeout",{lastEvent:new Date,trueTime:e.time,time:e.initialTime,untouched:!0,inExceptionArea:!1}),n.on("mouseover.timeout",s.mouseMoved),n.on("mouseenter.timeout",s.mouseMoved),a()(e.exceptionAreas).each((function(){n.find(this).live("mouseover.timeout",{parent:n},s.enteredException).live("mouseleave.timeout",{parent:n},s.leftException)})),e.initialTime>0?n.timeout("startTimer"):n.addClass("timeout"))}))},enteredException:function(t){var e=t.data.parent.data("timeout");e.inExceptionArea=!0,t.data.parent.data("timeout",e),t.data.parent.trigger("mouseover")},leftException:function(t){var e=t.data.parent.data("timeout");e.inExceptionArea=!1,t.data.parent.data("timeout",e)},destroy:function(){return this.each((function(){var t=a()(this),e=t.data("timeout");a()(window).off(".timeout"),e.timeout.remove(),t.removeData("timeout")}))},mouseMoved:function(){var t=a()(this),e=t.data("timeout");t.hasClass("timeout")?(t.removeClass("timeout"),t.timeout("startTimer")):e.untouched&&(e.untouched=!1,e.time=e.trueTime),e.lastEvent=new Date,t.data("timeout",e)},startTimer:function(){var t=a()(this),e=t.data("timeout"),n=function(){var e=t.data("timeout");if(e&&e.lastEvent)if(e.inExceptionArea)setTimeout(n,Math.floor(1e3*e.time));else{var i=new Date,a=Math.floor(1e3*e.time)-(i-e.lastEvent);a>0?setTimeout(n,a+100):t.addClass("timeout")}};setTimeout(n,Math.floor(1e3*e.time))}};a().fn.timeout=function(t){return s[t]?s[t].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof t&&t?void a().error("Method "+t+" does not exist on jQuery.timeout"):s.init.apply(this,arguments)},a().extend(a().expr[":"],{scrollable:function(t){return"scroll"===a()(t).css("overflow")||"scroll"===a()(t).css("overflowX")||"scroll"===a()(t).css("overflowY")||(t.clientHeight<t.scrollHeight&&(-1!==a().inArray(a()(t).css("overflowY"),["scroll","auto"])||-1!==a().inArray(a()(t).css("overflow"),["scroll","auto"]))||t.clientWidth<t.scrollWidth&&(-1!==a().inArray(a()(t).css("overflowX"),["scroll","auto"])||-1!==a().inArray(a()(t).css("overflow"),["scroll","auto"])))}}),a().fn.makeVisibleInScroll=function(t){var e=null;return"string"==typeof t?e=a()("#"+t):t&&(e=a()(t)),this.each((function(){var t,n=a()(this);t=e||((t=n.parents(":scrollable")).length>0?a()(t[0]):a()(window));var i=n.position().top,s=n.height()+i,r=t.scrollTop(),o=t.height()+r;i<r?t.scrollTop(i):s>o-t.height()/2&&t.scrollTop(i-(t.height()-n.height())/2)}))},a().fn.safeOffset=function(){var t,e=this[0],n={top:0,left:0};return e&&e.nodeType?(t=(e.ownerDocument||document).documentElement,a().contains(t,e)?a().fn.offset.apply(this,arguments):n):n},a().fn.setPositionAbsolute=function(t,e,n){return this.each((function(){var i=a()(this),s=a()(this).width(),r=t.safeOffset(),o=t.width(),l=t.height(),c=r.left+o-s+n,d=r.top+l+e;i.css({"z-index":1,position:"absolute",marginLeft:0,marginTop:0,left:c+"px",top:d+"px",width:s}),i.remove().appendTo("body").show()}))},a().fn.positionAncestor=function(t){var e=0,n=0;return this.each((function(){var i=a()(this).closest(t);if(i.length&&"static"!==i.css("position")){var s=a()(this),r=s.safeOffset().left-parseInt(s.css("marginLeft"),10),o=s.safeOffset().top-parseInt(s.css("marginTop"),10),l=i.safeOffset().left+parseInt(i.css("borderLeftWidth"),10),c=i.safeOffset().top+parseInt(i.css("borderTopWidth"),10);return e=r-l,n=o-c,!1}})),{left:e,top:n}},a().fn.findInclusive=function(t){return this.find("*").addBack().filter(t)},a().fn.slideIn=function(t,e,n){return this.animate({width:"show"},t,e,n)},a().fn.slideOut=function(t,e,n){return this.animate({width:"hide"},t,e,n)},a().expr[":"].Contains=function(t,e,n){return a()(t).text().toUpperCase().indexOf(n[3].toUpperCase())>=0},a().fn.scopedFind=function(t){return 0===t.indexOf("#")?a()(t):this.find(t)}},23505:function(t,e){"use strict";var n,i;Function.prototype.bind||(Function.prototype.bind=function(t){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var e=Array.prototype.slice.call(arguments,1),n=this,i=function(){},a=function(){return n.apply(this instanceof i&&t?this:t,e.concat(Array.prototype.slice.call(arguments)))};return i.prototype=this.prototype,a.prototype=new i,a});var a={DEBUG:10,INFO:20,WARN:30,ERROR:40,FATAL:50};function s(){}function r(t,e){this._loggers={},this.name=t||"",this._parent=e||null,e||(this._enabled=!0,this._level=a.WARN)}function o(t){i=t}s.prototype={output:function(t,e,n){t&&n.unshift(t+":"),e<=a.DEBUG?(n.unshift("[DEBUG]"),console.log.apply(console,n)):e<=a.INFO?console.info.apply(console,n):e<=a.WARN?console.warn.apply(console,n):console.error.apply(console,n)}},r.prototype={getLogger:function(t){for(var e=t.split("."),n=this,i=this.name?[this.name]:[];e.length;){var a=e.shift();i.push(a),a in n._loggers||(n._loggers[a]=new r(i.join("."),n)),n=n._loggers[a]}return n},_getFlag:function(t){var e=this;for(t="_"+t;null!==e;){if(void 0!==e[t])return e[t];e=e._parent}return null},setEnabled:function(t){this._enabled=!!t},isEnabled:function(){this._getFlag("enabled")},setLevel:function(t){"number"==typeof t?this._level=t:"string"==typeof t&&(t=t.toUpperCase())in a&&(this._level=a[t])},getLevel:function(){return this._getFlag("level")},log:function(t,e){!e.length||!this._getFlag("enabled")||t<this._getFlag("level")||(e=Array.prototype.slice.call(e),i.output(this.name,t,e))},debug:function(){this.log(a.DEBUG,arguments)},info:function(){this.log(a.INFO,arguments)},warn:function(){this.log(a.WARN,arguments)},error:function(){this.log(a.ERROR,arguments)},fatal:function(){this.log(a.FATAL,arguments)}},o(new s),n=new r;for(var l,c=/loglevel(|-[^=]+)=([^&]+)/g;null!==(l=c.exec(window.location.search));){(""===l[1]?n:n.getLogger(l[1].slice(1))).setLevel(l[2].toUpperCase())}var d={Level:a,getLogger:n.getLogger.bind(n),setEnabled:n.setEnabled.bind(n),isEnabled:n.isEnabled.bind(n),setLevel:n.setLevel.bind(n),getLevel:n.getLevel.bind(n),debug:n.debug.bind(n),info:n.info.bind(n),warn:n.warn.bind(n),error:n.error.bind(n),fatal:n.fatal.bind(n),getWriter:function(){return i},setWriter:o};e.A=d},33541:function(t,e,n){"use strict";var i=n(35686),a=n.n(i),s=n(8633),r=n(23505);class o{constructor(t){this.order=[],this.parameters={},this.attribute="data-pat-"+t,this.enum_values={},this.enum_conflicts=[],this.groups={},this.possible_groups={},this.log=r.A.getLogger(t+".parser"),this.group_pattern=/([a-z][a-z0-9]*)-([A-Z][a-z0-0\-]*)/i,this.json_param_pattern=/^\s*\[?\s*{/i,this.named_param_pattern=/^\s*([a-z][a-z0-9\-]*)\s*:(.*)/is,this.token_pattern=/((["']).*?(?!\\)\2)|\s*(\S+)\s*/g}_camelCase(t){return t.replace(/\-([a-z])/g,((t,e)=>e.toUpperCase()))}addAlias(t,e){if(!this.parameters[e])throw`Attempted to add an alias "${t}" for a non-existing parser argument "${e}".`;this.parameters[e].alias=t}addGroupToSpec(t){const e=t.name.match(this.group_pattern);if(e){const n=e[1],i=e[2];if(n in this.possible_groups){const t=this.possible_groups[n],e=t.name.match(this.group_pattern)[2];t.group=n,t.dest=e,this.groups[n]=new o,this.groups[n].addArgument(e,t.value,t.choices,t.multiple),delete this.possible_groups[n]}n in this.groups?(this.groups[n].addArgument(i,t.value,t.choices,t.multiple),t.group=n,t.dest=i):(this.possible_groups[n]=t,t.dest=this._camelCase(t.name))}return t}addJSONArgument(t,e){this.order.push(t),this.parameters[t]=this.addGroupToSpec({name:t,value:e,dest:t,group:null,type:"json"})}addArgument(t,e,n,i){const a={name:t,value:i&&!Array.isArray(e)?[e]:e,multiple:i,dest:t,group:null};if(n&&Array.isArray(n)&&n.length){a.choices=n,a.type=this._typeof(n[0]);for(const e of n)-1===this.enum_conflicts.indexOf(e)&&(e in this.enum_values?(this.enum_conflicts.push(e),delete this.enum_values[e]):this.enum_values[e]=t)}else"string"==typeof a.value&&"$"===a.value.slice(0,1)?a.type=this.parameters[a.value.slice(1)].type:a.type=this._typeof(i?a.value[0]:a.value);this.order.push(t),this.parameters[t]=this.addGroupToSpec(a)}_typeof(t){return null===t?"null":typeof t}_coerce(t,e){const n=this.parameters[t];if(typeof e!==n.type)try{switch(n.type){case"json":e=JSON.parse(e);break;case"boolean":if("string"==typeof e){e=e.toLowerCase();const t=parseInt(e,10);e=isNaN(t)?"true"===e||"y"===e||"yes"===e||"y"===e||"on"===e:!!t}else{if("number"!=typeof e)throw`Cannot convert value for ${t} to boolean.`;e=!!e}break;case"number":if("string"==typeof e){if(e=parseInt(e,10),isNaN(e))throw`Cannot convert value for ${t} to number.`}else{if("boolean"!=typeof e)throw`Cannot convert value for ${t} to number.`;e+=0}break;case"string":e=e.toString();break;case"null":case"undefined":break;default:throw`Do not know how to convert value for ${t} of type ${typeof e} to ${n.type}.`}}catch(t){return this.log.warn(t),null}return n.choices&&-1===n.choices.indexOf(e)?(this.log.warn(`Illegal value for ${t}: ${e}.`),null):e}_set(t,e,n){if(!(e in this.parameters))return void this.log.debug(`Ignoring value for unknown argument: ${e}.`);let i;if(this.parameters[e].multiple){i="string"==typeof n?n.split(/,+/):n,n=[];for(const t of i){const i=this._coerce(e,t.trim());null!==i&&n.push(i)}}else if(null===(n=this._coerce(e,n)))return;t[e]=n}_split(t){const e=[];return t.replace(this.token_pattern,((t,n,i,a)=>{n?e.push(n):a&&e.push(a)})),e}_parseExtendedNotation(t){const e={},n=t.replace(/;;/g,"\0x1f").replace(/&amp;/g,"&amp\0x1f").split(/;/).map((t=>t.replace(new RegExp("\0x1f","g"),";")));for(const i of n){if(!i)continue;const n=i.match(this.named_param_pattern);if(!n){this.log.warn(`Invalid parameter: ${i}: ${t}.`);continue}const a=n[1],s=n[2].trim(),r=Object.values(this.parameters).filter((t=>t.alias===a));if(1===r.length)this._set(e,r[0].name,s);else if(a in this.parameters)this._set(e,a,s);else{if(!(a in this.groups)){this.log.warn(`Unknown named parameter: ${n[1]}.`);continue}{const t=this.groups[a]._parseShorthandNotation(s);for(const n in t)this._set(e,a+"-"+n,t[n])}}}return e}_parseShorthandNotation(t){const e=this._split(t),n={};let i=0;for(;e.length;){const t=e.shift().trim();let a,s,r=!0;if("no-"===t.slice(0,3)?(a=!1,s=t.slice(3)):(a=!0,s=t),s in this.parameters&&"boolean"===this.parameters[s].type)r=!1,this._set(n,s,a);else if(s in this.enum_values)r=!1,this._set(n,this.enum_values[s],s);else{if(!r){e.unshift(t);break}this._set(n,this.order[i],t)}if(i++,i>=this.order.length)break}return e.length&&this.log.warn(`Ignore extra arguments: ${e.join(" ")}.`),n}_parse(t){if(!t)return{};if(t.match(this.json_param_pattern))try{return JSON.parse(t)}catch(e){this.log.warn(`Invalid JSON argument found: ${t}.`)}if(t.match(this.named_param_pattern))return this._parseExtendedNotation(t);const e=t.indexOf(";");if(-1===e)return this._parseShorthandNotation(t);const n=this._parseShorthandNotation(t.slice(0,e)),i=this._parseExtendedNotation(t.slice(e+1));for(const t in i)n[t]=i[t];return n}_defaults(t){const e={};for(const n in this.parameters)if("function"==typeof this.parameters[n].value)try{e[n]=this.parameters[n].value(t,n),this.parameters[n].type=typeof e[n]}catch(t){this.log.error(`Default function for ${n} failed.`)}else e[n]=this.parameters[n].value;return e}_cleanupOptions(t){let e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];for(const e of Object.keys(t)){const n=this.parameters[e];void 0!==n&&(t[e]===n.value&&"string"==typeof n.value&&"$"===n.value.slice(0,1)&&(t[e]=t[n.value.slice(1)]))}if(e)for(const e of Object.keys(t)){const n=this.parameters[e];let i;void 0!==n&&(n.group?("object"!=typeof t[n.group]&&(t[n.group]={}),i=t[n.group]):i=t,n.dest!==e&&(i[n.dest]=t[e],delete t[e]))}return t}parse(t,e,n){let i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],r=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];t.jquery||(t=a()(t)),"boolean"==typeof e&&void 0===n&&(n=e,e={});const o=i?[[this._defaults(t)]]:[[{}]];let l,c=1;l=!i||t.hasClass("pat-modal")&&"data-pat-inject"===this.attribute?t:t.parents(`[${this.attribute}]`).addBack();for(const t of l){let e;const n=(a()(t).attr(this.attribute)||"").trim();if(!n)continue;const i=this._parse.bind(this);e=n.match(/&&/)?n.split(/\s*&&\s*/).map(i):i(n),Array.isArray(e)||(e=[e]),c=Math.max(e.length,c),o.push(e)}"object"==typeof e&&(Array.isArray(e)?(o.push(e),c=Math.max(e.length,c)):o.push([e])),n||(c=1);const d=s.A.removeDuplicateObjects(s.A.mergeStack(o,c)).map((t=>this._cleanupOptions(t,r)));return n?d:d[0]}}o.prototype.add_argument=o.prototype.addArgument,e.A=o},89476:function(){!function(){let t=null;const e='button, input[type="button"], input[type="submit"], input[type="image"]';document.addEventListener("click",(function(n){n.target.closest&&(t=n.target.closest(e))}),!0),document.addEventListener("submit",(function(n){if("submitter"in n)return;const i=[document.activeElement,t];t=null;for(const t of i)if(t&&t.form&&t.matches(e))return void(n.submitter=t);n.submitter=n.target.querySelector(e)}),!0)}()},59329:function(t,e,n){"use strict";var i=n(35686),a=n.n(i),s=n(62800),r=n(23505),o=n(8633);const l=r.A.getLogger("registry"),c=/patterns-disable=([^&]+)/g,d=/patterns-dont-catch/g,u={};let p,h=!1;for(;null!==(p=c.exec(window.location.search));)u[p[1]]=!0,l.info("Pattern disabled via url config:",p[1]);for(;null!==(p=d.exec(window.location.search));)h=!0,l.info("I will not catch init exceptions");void 0===window.__patternslib_registry&&(window.__patternslib_registry={});const g=window.__patternslib_registry;void 0===window.__patternslib_registry_initialized&&(window.__patternslib_registry_initialized=!1);const m={patterns:g,init(){a()(document).ready((function(){window.__patternslib_registry_initialized||(window.__patternslib_registry_initialized=!0,l.debug("Loaded: "+Object.keys(m.patterns).sort().join(", ")),m.scan(document.body),l.debug("Finished initial scan."))}))},clear(){for(const t in m.patterns)delete m.patterns[t]},transformPattern(t,e){if(u[t])return void l.debug(`Skipping disabled pattern: ${t}.`);const n=m.patterns[t],i=n.transform||n.prototype?.transform;if(i)try{i(a()(e))}catch(e){if(h)throw e;l.error(`Transform error for pattern ${t}.`,e)}},initPattern(t,e,n){const i=a()(e),s=m.patterns[t],o=r.A.getLogger(`pat.${t}`);if(e.matches(s.trigger)){o.debug("Initialising.",e);try{s.init?s.init(i,null,n):new s(i,null,n),o.debug("done.")}catch(t){if(h)throw t;o.error("Caught error:",t)}}},orderPatterns(t){return t.includes("validation")&&(t.splice(t.indexOf("validation"),1),t.unshift("validation")),t.includes("clone-code")&&(t.splice(t.indexOf("clone-code"),1),t.unshift("clone-code")),t},scan(t,e,n){if(!t)return;if("string"==typeof t)t=document.querySelector(t);else{if(t instanceof Text)return;t.jquery&&(t=t[0])}const i=[];e=this.orderPatterns(e||Object.keys(m.patterns));for(const n of e){this.transformPattern(n,t);const e=m.patterns[n];e.trigger&&i.unshift(e.trigger)}let a=s.A.querySelectorAllAndMe(t,i.map((t=>t.trim().replace(/,$/,""))).join(","));a=a.filter((t=>!(t.matches(".disable-patterns")||t?.parentNode?.closest?.(".disable-patterns")||t?.parentNode?.closest?.("pre")||t?.parentNode?.closest?.("template")||t.matches(".cant-touch-this")||t?.parentNode?.closest?.(".cant-touch-this"))));for(const t of a.reverse())for(const i of e)this.initPattern(i,t,n);document.body.classList.add("patterns-loaded")},register(t,e){if(!(e=e||t.name))return l.error("Pattern lacks a name.",t),!1;if(m.patterns[e])return l.debug(`Already have a pattern called ${e}.`),!1;if(m.patterns[e]=t,t.jquery_plugin){const n=("pat-"+e).replace(/-([a-zA-Z])/g,(function(t,e){return e.toUpperCase()}));a().fn[n]=o.A.jqueryPlugin(t),a().fn[n.replace(/^pat/,"pattern")]=a().fn[n]}return l.debug(`Registered pattern ${e}`,t),window.__patternslib_registry_initialized&&(m.scan(document.body,[e]),l.debug(`Re-scanned dom with newly registered pattern ${e}.`)),!0}};e.A=m},8633:function(t,e,n){"use strict";var i=n(35686),a=n.n(i),s=n(62800);a().fn.safeClone=function(){return this.clone()},Array.prototype.forEach||(Array.prototype.forEach=function(t,e){var n,i;if(null===this)throw new TypeError(" this is null or not defined");var a=Object(this),s=a.length>>>0;if("function"!=typeof t)throw new TypeError(t+" is not a function");for(arguments.length>1&&(n=e),i=0;i<s;){var r;i in a&&(r=a[i],t.call(n,r,i,a)),i++}});var r=function(t,e,n){return this.each((function(){var i,s=a()(this);if(i=t.init(s,n),e){if(void 0===i[e])return a().error("Method "+e+" does not exist on jQuery."+t.name),!1;if("_"===e.charAt(0))return a().error("Method "+e+" is private on jQuery."+t.name),!1;i[e].apply(i,[n])}})),this},o=function(t,e,n){var i=this;if(e){if(t[e])return t[e].apply(i,[i].concat([n]));a().error("Method "+e+" does not exist on jQuery."+t.name)}else t.init.apply(i,[i].concat([n]));return i};function l(t){var e=typeof t;return"function"===e||"object"===e&&!!t}function c(t){let e=t.replace(/[\-\[\]{}()+?.,\\\^$|#\s]/g,"\\$&");return e=e.replace(/[*]/g,".*"),e=new RegExp(`^${e}$`),e}function d(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;t instanceof a()&&(t=t[0]);const i=t.getBoundingClientRect();return![i.top,i.bottom,i.left,i.right].every((t=>0===t))&&(e?i.top<=0+n&&i.bottom>=0+n:i.top>=0&&i.left>=0&&i.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&i.right<=(window.innerWidth||document.documentElement.clientWidth))}var u={jqueryPlugin:function(t){return function(e,n){return 0===this.length?this:("object"==typeof e&&(n=e,e=void 0),"function"==typeof t?r.call(this,t,e,n):o.call(this,t,e,n))}},escapeRegExp:function(t){return t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},isObject:l,extend:function(t){if(!l(t))return t;for(var e,n,i=1,a=arguments.length;i<a;i++)for(n in e=arguments[i])hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t},findLabel:function(t){for(var e,n=t.parentNode;n&&11!==n.nodeType;n=n.parentNode)if("LABEL"===n.tagName)return n;return t.id&&(e=a()('label[for="'+t.id+'"]')),e&&0===e.length&&t.form&&(e=a()('label[for="'+t.name+'"]',t.form)),e&&e.length?e[0]:null},regexp_from_wildcard:c,removeWildcardClass:function(t,e){if(t=u.ensureArray(t),-1===e.indexOf("*"))for(const n of t)n.classList.remove(e);else{const n=c(e);for(const e of t){const t=(e.getAttribute("class")||"").split(/\s+/);if(!t.length)continue;const i=t.filter((t=>!n.test(t)));i.length?e.setAttribute("class",i.join(" ")):e.removeAttribute("class")}}},hideOrShow:(t,e,n,i)=>{t=s.A.toNodeArray(t);const r={none:{hide:"hide",show:"show"},fade:{hide:"fadeOut",show:"fadeIn"},slide:{hide:"slideUp",show:"slideDown"}},o="css"===n.transition||"none"===n.transition?null:n.effect.duration,l=t=>{t.classList.remove("in-progress"),t.classList.add(e?"visible":"hidden"),a()(t).trigger("pat-update",{pattern:i,action:"attribute-changed",dom:t,transition:"complete"})};for(const c of t)if(c.classList.remove("visible"),c.classList.remove("hidden"),c.classList.remove("in-progress"),o){const t=r[n.transition];c.classList.add("in-progress"),a()(c).trigger("pat-update",{pattern:i,action:"attribute-changed",dom:c,transition:"start"}),a()(c)[e?t.show:t.hide]({duration:o,easing:n.effect.easing,complete:()=>l(c)})}else"css"!==n.transition&&s.A[e?"show":"hide"](c),l(c)},addURLQueryParameter:function(t,e,n){var i=new RegExp("(\\?|\\&)"+e+"=.*?(?=(&|$))"),a=t.toString().split("#"),s=a[0],r=a[1],o=s;return o=i.test(s)?s.replace(i,"$1"+e+"="+n):/\?.+$/.test(s)?s+"&"+e+"="+n:s+"?"+e+"="+n,r&&(o+="#"+r),o},removeDuplicateObjects:function(t){const e=function(t,e){return this[t]===e};return t.reduce((function(t,n){let i=!1;for(const a of t)i=Object.keys(a).length===Object.keys(n).length&&0===Object.entries(a).filter((t=>!e.bind(n)(t[0],t[1]))).length;return i||t.push(n),t}),[])},mergeStack:function(t,e){const n=[];for(let t=0;t<e;t++)n.push({});for(const i of t){const t=i.length-1;for(let s=0;s<e;s++)n[s]=a().extend(n[s]||{},i[s>t?t:s])}return n},isElementInViewport:d,hasValue:function(t){return"INPUT"===t.tagName?"checkbox"===t.type||"radio"===t.type?t.checked:""!==t.value:"SELECT"===t.tagName?-1!==t.selectedIndex:"TEXTAREA"===t.tagName&&""!==t.value},parseTime:function(t){var e=/^(\d+(?:\.\d+)?)\s*(\w*)/.exec(t);if(!e)throw new Error("Invalid time");var n=parseFloat(e[1]);switch(e[2]){case"s":return Math.round(1e3*n);case"m":return Math.round(1e3*n*60);default:return Math.round(n)}},parseLength:function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const n=/^(\d+(?:\.\d+)?)\s*(\%?\w*)/.exec(t);if(!n)throw new Error("Invalid length");const i=parseFloat(n[1]);switch(n[2]){case"px":default:return Math.round(i);case"%":return e?e/100*Math.round(i):0;case"vw":return Math.round(i*window.innerWidth/100);case"vh":return Math.round(i*window.innerHeight/100);case"vmin":return Math.round(i*Math.min(window.innerWidth,window.innerHeight)/100);case"vmax":return Math.round(i*Math.max(window.innerWidth,window.innerHeight)/100)}},findRelatives:function(t){var e=a()(t),n=a()(t),i=a()();if(n=(n=n.add(e.closest("label"))).add(e.closest("fieldset")),t.id&&(i=a()("label[for='"+t.id+"']")),!i.length){var s=e.closest("form");s.length||(s=a()(document.body)),i=s.find("label[for='"+t.name+"']")}return n=n.add(i)},get_bounds:function(t){const e=t.getBoundingClientRect();return{x:parseInt(Math.round(e.x),10)||0,y:parseInt(Math.round(e.y),10)||0,top:parseInt(Math.round(e.top),10)||0,bottom:parseInt(Math.round(e.bottom),10)||0,left:parseInt(Math.round(e.left),10)||0,right:parseInt(Math.round(e.right),10)||0,width:parseInt(Math.round(e.width),10)||0,height:parseInt(Math.round(e.height),10)||0}},checkInputSupport:function(t,e){let n=!1;const i=document.createElement("input");return i.setAttribute("type",t),n=i.type==t,void 0!==e&&(i.setAttribute("value",e),n=i.value!==e),n},checkCSSFeature:function(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"div";n=document.createElement(n);let i=void 0!==n.style[t];return i&&void 0!==e&&(n.style[t]=e,i=n.style[t]===e),i},animation_frame:()=>new Promise(window.requestAnimationFrame),timeout:t=>new Promise((e=>setTimeout(e,t))),debounce:function(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{timer:null},i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];return n.last_run=0,function(){const a=arguments;!i&&n.timer&&Date.now()-n.last_run<=e||(clearTimeout(n.timer),n.last_run=Date.now(),n.timer=setTimeout((()=>{t.apply(this,a)}),e))}},isIE:()=>!!document.documentMode,jqToNode:t=>(t.jquery&&(t=t[0]),t),ensureArray:(t,e)=>!!(NodeList.prototype.isPrototypeOf(t)||Array.isArray(t)||t.jquery)?e?[...t]:t:[t],localized_isodate:t=>{const e=t.getDate().toString().padStart(2,"0"),n=(t.getMonth()+1).toString().padStart(2,"0");return`${t.getFullYear().toString()}-${n}-${e}`},escape_html:t=>{if(!t)return"";const e=document.createElement("div");return e.appendChild(document.createTextNode(t)),e.innerHTML.replace(/"/g,"&quot;")},unescape_html:t=>{if(!t)return"";return(new DOMParser).parseFromString(t,"text/html").documentElement.textContent.replace(/&quot;/g,'"')},is_iso_date_time:function(t){return(arguments.length>1&&void 0!==arguments[1]&&arguments[1]?/^\d{4}-[01]\d-[0-3]\d(T[0-2]\d:[0-5]\d)?$/:/^\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d$/).test(t)},is_iso_date:t=>/^\d{4}-[01]\d-[0-3]\d$/.test(t),date_diff:(t,e)=>{const n=Date.UTC(t.getFullYear(),t.getMonth(),t.getDate()),i=Date.UTC(e.getFullYear(),e.getMonth(),e.getDate());return Math.floor((n-i)/864e5)},threshold_list:function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=[];for(let n=1;n<=t;n++)e.push(n/t);return e.push(0),e.sort()},is_option_truthy:t=>![void 0,null,"none",!1,"false",""].includes(t),elementInViewport:t=>(console.warn("Deprecated. Use utils.isElementInViewport"),d(t))};e.A=u},75171:function(t,e,n){"use strict";var i=n(71553),a=n(33541),s=n(62800),r=n(44563),o=n(8633);n(64714);const l=new a.A("checklist");l.addArgument("select",".select-all"),l.addArgument("deselect",".deselect-all"),l.addArgument("toggle",".toggle-all");i.A.extend({name:"checklist",trigger:".pat-checklist",jquery_plugin:!0,all_selects:[],all_deselects:[],all_toggles:[],all_checkboxes:[],all_radios:[],init(){this.options=l.parse(this.el,this.options,!1),this.$el.on("patterns-injected",this._init.bind(this)),this.change_handler=o.A.debounce((()=>{this.change_buttons_and_toggles(),this.change_checked()}),50),this._init()},_init(){this.all_checkboxes=this.el.querySelectorAll("input[type=checkbox]"),this.all_radios=this.el.querySelectorAll("input[type=radio]"),this.all_selects=s.A.find_scoped(this.el,this.options.select);for(const t of this.all_selects)r.A.add_event_listener(t,"click","pat-checklist--select-all--click",this.select_all.bind(this));this.all_deselects=s.A.find_scoped(this.el,this.options.deselect);for(const t of this.all_deselects)r.A.add_event_listener(t,"click","pat-checklist--deselect-all--click",this.deselect_all.bind(this));this.all_toggles=s.A.find_scoped(this.el,this.options.toggle);for(const t of this.all_toggles)r.A.add_event_listener(t,"click","pat-checklist--toggle-all--click",this.toggle_all.bind(this));this.change_buttons_and_toggles(),this.change_checked(),r.A.add_event_listener(this.el,"change","pat-checklist--change-handler--change",this.change_handler.bind(this))},destroy(){for(const t of this.all_selects)r.A.remove_event_listener(t,"pat-checklist--select-all--click");for(const t of this.all_deselects)r.A.remove_event_listener(t,"pat-checklist--deselect-all--click");for(const t of this.all_toggles)r.A.remove_event_listener(t,"pat-checklist--toggle-all--click");r.A.remove_event_listener(this.el,"pat-checklist--change-handler--change"),this.$el.off("patterns_injected")},find_siblings(t,e){let n,i=t.parentNode;for(;i;){if(n=i.querySelectorAll(`${e}:not(${this.options.toggle})`),n.length||i===this.el)return n;i=i.parentNode}},find_checkboxes(t,e){let n=[];return n=0===this.options.select.indexOf("#")?this.el.querySelectorAll(e):this.find_siblings(t,e),n},change_buttons_and_toggles(){let t;for(const e of this.all_selects)t=this.find_checkboxes(e,"input[type=checkbox]"),e.disabled=[...t].map((t=>t.matches(":checked"))).every((t=>!0===t));for(const e of this.all_deselects)t=this.find_checkboxes(e,"input[type=checkbox]"),e.disabled=[...t].map((t=>t.matches(":checked"))).every((t=>!1===t));for(const e of this.all_toggles)t=this.find_checkboxes(e,"input[type=checkbox]"),e.checked=[...t].map((t=>t.matches(":checked"))).every((t=>!0===t))},select_all(t){t.preventDefault();const e=this.find_checkboxes(t.target,"input[type=checkbox]:not(:checked)");for(const t of e)t.checked=!0,t.dispatchEvent(r.A.change_event())},deselect_all(t){t.preventDefault();const e=this.find_checkboxes(t.target,"input[type=checkbox]:checked");for(const t of e)t.checked=!1,t.dispatchEvent(r.A.change_event())},toggle_all(t){t.preventDefault();const e=t.target.checked,n=this.find_checkboxes(t.target,"input[type=checkbox]");for(const t of n)t.checked=e,t.dispatchEvent(r.A.change_event())},change_checked(){for(const t of[...this.all_checkboxes,...this.all_radios])for(const e of t.labels)e.classList.remove("checked","unchecked"),e.classList.add(t.checked?"checked":"unchecked");for(const t of s.A.querySelectorAllAndMe(this.el,"fieldset"))t.querySelectorAll(`input[type=checkbox]:checked:not(${this.options.toggle}), input[type=radio]:checked`).length?(t.classList.remove("unchecked"),t.classList.add("checked")):(t.classList.remove("checked"),t.classList.add("unchecked"))}})},94055:function(t,e,n){"use strict";n.r(e),n.d(e,{parser:function(){return p}});var i=n(35686),a=n.n(i),s=n(71553),r=n(23505),o=n(33541),l=n(62800),c=n(44563),d=n(8633);const u=r.A.getLogger("date-picker"),p=new o.A("date-picker");p.addArgument("behavior","styled",["native","styled"]),p.addArgument("week-numbers",[],["show","hide"]),p.addArgument("i18n"),p.addArgument("first-day",0),p.addArgument("after"),p.addArgument("offset-days",0),p.add_argument("output-format",null),p.add_argument("locale",null),p.addAlias("behaviour","behavior"),e.default=s.A.extend({name:"date-picker",trigger:".pat-date-picker",parser:p,format:"YYYY-MM-DD",async init(){const t=this.el,e=this.el.disabled;if(this.options=a().extend(p.parse(t),this.options),!e&&this.options.after){const t=document.querySelectorAll(this.options.after);for(const e of t)e.addEventListener("change",(t=>{let e=t.target.value;if(e=e?new Date(e):null,!e)return;let n=this.el.value;if(n=n?new Date(n):null,!n||n<e){const t=this.options.offsetDays||0;e.setDate(e.getDate()+t),this.el.value=e.toISOString().substring(0,10),this.dispatch_change_event()}}))}let i;if("styled"===this.options.behavior){l.A.hide(t),i=document.createElement("time"),i.setAttribute("class","output-field"),i.setAttribute("datetime",t.value),e&&i.classList.add("disabled"),t.insertAdjacentElement("beforebegin",i);const s=i.closest("label");let r;if(s&&c.A.add_event_listener(s,"click","pat-date-picker--label",(t=>{t.preventDefault()})),this.options.outputFormat){const t=(await Promise.resolve().then(n.bind(n,90101))).default,e={format:this.format};this.options.outputFormat&&(e["output-format"]=this.options.outputFormat),this.options.locale&&(e.locale=this.options.locale),r=new t(i,e)}else this.el.value&&(i.textContent=t.value);const o=()=>{this.add_clear_button(i),!this.el.value&&this.el.placeholder&&(i.innerHTML=`<span class="placeholder">${this.el.placeholder}</span>`)};if(r?a()(i).on("init.display-time.patterns",(()=>{o()})):o(),this.el.addEventListener("change",(()=>{i.setAttribute("datetime",this.el.value),r&&this.el.value?r.format():i.textContent=this.el.value,o()})),e)return}else{if(e)return;if(d.A.checkInputSupport("date","invalid date"))return;"date"===t.getAttribute("type")&&t.setAttribute("type","text")}window.__patternslib_import_styles&&n.e(69498).then(n.bind(n,69498));const s=(await n.e(95463).then(n.t.bind(n,95463,23))).default,r={field:t,trigger:i||t,format:this.format,firstDay:this.options.firstDay,showWeekNumber:"show"===this.options.weekNumbers,onSelect:()=>this.dispatch_change_event(),onClose:()=>{"styled"!==this.options.behavior||this.el.value||t.dispatchEvent(c.A.blur_event())}};if(t.getAttribute("min")&&(r.minDate=new Date(t.getAttribute("min"))),t.getAttribute("max")&&(r.maxDate=new Date(t.getAttribute("max"))),this.options.i18n)try{const t=await fetch(this.options.i18n);r.i18n=await t.json()}catch{u.error(`date-picker could not load i18n for ${this.options.i18n}`)}this.pikaday=new s(r)},add_clear_button(t){if(!this.el.disabled&&!this.el.required&&this.el.value){const e=document.createElement("span");e.setAttribute("class","cancel-button"),e.addEventListener("click",(t=>{t.stopPropagation(),this.el.value=null,this.dispatch_change_event()})),t.appendChild(e)}},dispatch_change_event(){const t=new Event("change",{bubbles:!0,cancelable:!0});t.firedBy=this.pikaday,this.el.dispatchEvent(t),a()(this.el).trigger("input-change"),a()(this.el.form).trigger("input-change")}})},25259:function(t,e,n){"use strict";var i=n(71553),a=n(33541),s=n(8633),r=n(62800);const o=new a.A("datetime-picker");o.addArgument("format","YYYY-MM-DD"),o.addArgument("week-numbers",[],["show","hide"]),o.addArgument("i18n"),o.addArgument("today","Today"),o.addArgument("clear","Clear"),o.addArgument("first-day",0);i.A.extend({name:"datetime-picker",trigger:".pat-datetime-picker",parser:o,el_date:null,el_time:null,async init(){const t=this.el;if(this.options=o.parse(this.el,this.options),s.A.checkInputSupport("datetime-local","invalid date"))return;window.__patternslib_import_styles&&n.e(61016).then(n.bind(n,61016));const e=(await Promise.resolve().then(n.bind(n,94055))).default,i=this.el.value.split("T"),a=i[0]||"",l=i[1]||"",c=document.createElement("div");c.setAttribute("class","pat-datetime-picker__wrapper"),r.A.hide(t);const d=`\n            <button type="button" class="_btn _now" title="${this.options.today}">\n                <span class="_icon"/>\n                <span class="_text">${this.options.today}</span>\n            </button>`,u=`\n            <button type="button" class="_btn _clear" title="${this.options.clear}">\n                <span class="_icon"/>\n                <span class="_text">${this.options.clear}</span>\n            </button>`;c.innerHTML=`\n            <input type="date" placeholder="YYYY-MM-DD" value="${a}" />\n            <input type="time" placeholder="hh:mm" value="${l}" />\n            ${this.options.today?d:""}\n            ${this.options.clear?u:""}\n        `,this.el_time=c.querySelector("input[type=time]"),this.el_time.addEventListener("change",(()=>this.update())),this.el_date=c.querySelector("input[type=date]"),this.el_date.addEventListener("change",(()=>{this.el_time.value||(this.el_time.value=this.isotime()),this.update()}));const p={behavior:"native",format:this.options.format,weekNumbers:this.options.weekNumbers,firstDay:this.options.firstDay};if(await e.init(this.el_date,p),this.options.today){c.querySelector("._btn._now").addEventListener("click",(t=>{t.preventDefault(),this.el_date.value=this.isodate(),this.el_time.value=this.isotime(),this.update()}))}if(this.options.clear){c.querySelector("._btn._clear").addEventListener("click",(t=>{t.preventDefault(),this.el_date.value="",this.el_time.value="",this.update()}))}t.parentNode.insertBefore(c,t)},update(){this.el_date.value&&this.el_time.value?this.el.value=`${this.el_date.value}T${this.el_time.value}`:this.el.value="",this.el.dispatchEvent(new Event("change",{bubbles:!0,cancelable:!0}))},isodate(){return(new Date).toISOString().substr(0,10)},isotime(){return(new Date).toTimeString().substr(0,5)}})},9979:function(t,e,n){"use strict";var i=n(35686),a=n.n(i),s=n(71553),r=n(8633),o=n(23505),l=n(33541);const c=o.A.getLogger("depends"),d=new l.A("depends");d.addArgument("condition"),d.addArgument("action","show",["show","enable","both"]),d.addArgument("transition","none",["none","css","fade","slide"]),d.addArgument("effect-duration","fast"),d.addArgument("effect-easing","swing");s.A.extend({name:"depends",trigger:".pat-depends",jquery_plugin:!0,async init(t,e){const i=(await n.e(99093).then(n.bind(n,99093))).default,s=this.$el[0],o=d.parse(this.$el,e);let l;this.$modal=this.$el.parents(".pat-modal");try{l=new i(this.$el,o.condition)}catch(t){return void c.error("Invalid condition: "+t.message,s)}let u=l.evaluate();switch(o.action){case"show":r.A.hideOrShow(t,u,o,this.name),this.updateModal();break;case"enable":u?this.enable():this.disable();break;case"both":u?(r.A.hideOrShow(t,u,o,this.name),this.updateModal(),this.enable()):(r.A.hideOrShow(t,u,o,this.name),this.updateModal(),this.disable())}const p={handler:l,options:o,dependent:s};for(let t of l.getAllInputs()){if(t.form){let e=a()(t.form),n=e.data("patDepends.dependents");n?-1===n.indexOf(p)&&n.push(p):(n=[p],e.on("reset.pat-depends",(()=>this.onReset))),e.data("patDepends.dependents",n)}a()(t).on("change.pat-depends",null,p,this.onChange.bind(this)),a()(t).on("keyup.pat-depends",null,p,this.onChange.bind(this))}},async onReset(t){const e=a()(t.target).data("patDepends.dependents");await r.A.timeout(50);for(let n of e)t.data=n,this.onChange(t)},updateModal(){this.$modal.length&&a()(document).trigger("pat-update",{pattern:"depends"})},enable(){this.$el.is(":input")?this.$el[0].disabled=null:this.$el.is("a")&&this.$el.off("click.patternDepends"),this.$el.removeClass("disabled"),this.$el.trigger("pat-update",{pattern:"depends",action:"attribute-changed",dom:this.$el[0],enabled:!0})},disable(){this.$el.is(":input")?this.$el[0].disabled="disabled":this.$el.is("a")&&this.$el.on("click.patternDepends",(t=>t.preventDefault())),this.$el.addClass("disabled"),this.$el.trigger("pat-update",{pattern:"depends",action:"attribute-changed",dom:this.$el[0],enabled:!1})},onChange(t){const e=t.data.handler,n=t.data.options,i=t.data.dependent,s=a()(i),o=e.evaluate();switch(n.action){case"show":r.A.hideOrShow(s,o,n,this.name),this.updateModal();break;case"enable":o?this.enable():this.disable();break;case"both":r.A.hideOrShow(s,o,n,this.name),this.updateModal(),o?this.enable():this.disable()}}})},90101:function(t,e,n){"use strict";n.r(e),n.d(e,{parser:function(){return d}});var i=n(71553),a=n(33541),s=n(62800),r=n(23505),o=n(8633);let l;const c=r.A.getLogger("pat-display-time"),d=new a.A("display-time");d.add_argument("format",""),d.add_argument("locale",null),d.add_argument("strict",!1),d.add_argument("from-now",!1),d.add_argument("no-suffix",!1),d.add_argument("output-format",null),e.default=i.A.extend({name:"display-time",trigger:".pat-display-time",async init(){l=(await n.e(38761).then(n.t.bind(n,38761,23))).default,this.options=d.parse(this.el,this.options);let t=this.options.locale||s.A.acquire_attribute(this.el,"lang")||"en";t=t.substr(0,2).toLowerCase();try{await n(89595)(`./${t}.js`),l.locale(t),this.lang=t}catch{l.locale("en"),this.lang="en"}c.debug(`Moment.js language used: ${t}.`),this.format()},format(){const t=this.el.getAttribute("datetime");let e="";if(t){const n=l(t,this.options.format,this.options.strict);if(e=n,!0===this.options.fromNow)if(o.A.is_iso_date(t)){const t=new Intl.RelativeTimeFormat(this.lang,{numeric:"auto"}),i=o.A.date_diff(n.toDate(),new Date);e=n.calendar(null,{lastWeek:`[${t.format(i,"day")}]`,lastDay:`[${t.format(-1,"day")}]`,sameDay:`[${t.format(0,"day")}]`,nextDay:`[${t.format(1,"day")}]`,nextWeek:"dddd",sameElse:()=>`[${t.format(i,"day")}]`})}else e=n.fromNow(this.options.noSuffix);else this.options.outputFormat&&(e=n.format(this.options.outputFormat))}this.el.textContent=e}})},40865:function(t,e,n){"use strict";n(64714),n(89476);var i=n(35686),a=n.n(i),s=n(23505),r=n(33541),o=n(59329);const l=s.A.getLogger("pat.ajax"),c=new r.A("ajax");c.addArgument("accept","text/html"),c.addArgument("url",(function(t){const e=t[0];return(("A"===e.tagName?e.getAttribute("href"):"FORM"===e.tagName?e.getAttribute("action"):"")||"").split("#")[0]})),c.addArgument("browser-cache","no-cache",["cache","no-cache"]);const d={get:function(t){return void 0!==this[t]?this[t]:0},inc:function(t){return this[t]=this.get(t)+1,this.get(t)}},u={name:"ajax",trigger:".pat-ajax",parser:c,init(t){return t.off(".pat-ajax"),t.filter("a").on("click.pat-ajax",u.onTriggerEvents),t.filter("form").on("submit.pat-ajax",u.onTriggerEvents).on("click.pat-ajax","[type=submit]",u.onClickSubmit),t.filter(":not(form,a)").each((function(){l.warn("Unsupported element:",this)})),t},destroy(t){t.off(".pat-ajax")},onClickSubmit(t){const e=t.submitter||t.target,n=e.form,i={};e.name&&(i[e.name]=e.value),a()(n).data("pat-ajax.clicked-data",i)},onTriggerEvents(t){t&&t.preventDefault(),u.request(a()(this))},request(t,e){return t.each((function(){u._request(a()(this),e)}))},_request(t,e){const n=u.parser.parse(t,e),i=d.inc(n.url),s=t.data("pat-ajax.clicked-data"),r=s?a().param(s):"",o={context:t,data:[t.serialize(),r].filter(Boolean).join("&"),headers:{},url:n.url,method:t.attr("method")?t.attr("method"):"GET",cache:"cache"===n.browserCache};if(n.accept&&(o.headers.Accept=n.accept),t.is("form")&&t.attr("method")&&"POST"==t.attr("method").toUpperCase()){const e=new FormData(t[0]);for(const t in s)e.append(t,s[t]);o.method="POST",o.data=e,o.cache=!1,o.contentType=!1,o.processData=!1,o.type="POST"}t.removeData("pat-ajax.clicked-data"),l.debug("request:",o,t[0]);const c=a().ajax(o);c&&c.done((function(e,a,s){l.debug("success: jqxhr:",s),i===d.get(n.url)&&t.trigger({type:"pat-ajax-success",jqxhr:s})})).fail((function(e,i,a){l.error("load error for "+n.url+":",a,e),t.trigger({type:"pat-ajax-error",jqxhr:e})}))}};o.A.register(u);var p=u,h=n(62800),g=n(44563),m=n(8633);const f=s.A.getLogger("pat.inject"),b=new r.A("inject");b.addArgument("default-selector"),b.addArgument("target"),b.addArgument("data-type","html"),b.addArgument("next-href"),b.addArgument("source"),b.addArgument("trigger","default",["default","autoload","autoload-visible","idle"]),b.addArgument("delay"),b.addArgument("browser-cache","no-cache",["cache","no-cache"]),b.addArgument("confirm","class",["never","always","form-data","class"]),b.addArgument("confirm-message","Are you sure you want to leave this page?"),b.addArgument("loading-class","injecting"),b.addArgument("executing-class","executing"),b.addArgument("executed-class","executed"),b.addArgument("class"),b.addArgument("history","none",["none","record"]),b.addArgument("push-marker"),b.addArgument("scroll"),b.addArgument("url");const v={name:"inject",trigger:"a.pat-inject, form.pat-inject, .pat-subform.pat-inject",parser:b,async init(t,e){await m.A.timeout(1);const n=this.extractConfig(t,e);if(n.some((t=>"record"===t.history))&&!("pushState"in history))return f.warn("HTML5 pushState is missing, aborting"),t;if(t.data("pat-inject",n),n[0].nextHref&&0===n[0].nextHref.indexOf("#")&&t.is("a")&&a()(n[0].nextHref).length>0)return f.debug("Skipping as next href is anchor, which already exists",n[0].nextHref),t.attr({href:(window.location.href.split("#")[0]||"")+n[0].nextHref});if(n[0].pushMarker&&a()("body").on("push",((e,i)=>{f.debug("received push message: "+i),i==n[0].pushMarker&&(f.debug("re-injecting "+i),this.onTrigger({currentTarget:t[0]}))})),n[0].idleTrigger)this._initIdleTrigger(t,n[0].idleTrigger);else switch(n[0].trigger){case"default":n.forEach((t=>{t.delay&&(t.processDelay=t.delay)})),"FORM"===t[0]?.tagName?(f.debug("Initializing form with injection on",t[0]),g.A.add_event_listener(t[0],"submit","pat-inject--form-submit",(t=>{t.submitter?.matches("[type=submit], button:not([type=button]), [type=image]")&&p.onClickSubmit(t),this.onTrigger(t)}))):t.is(".pat-subform")?f.debug("Initializing subform with injection"):t.on("click.pat-inject",this.onTrigger.bind(this));break;case"autoload":if(n[0].delay){const e=Math.random().toString(36);t.attr("data-pat-inject-uid",e);const i=e=>0!=a()("[data-pat-inject-uid='"+e+"']").length&&(t.data("pat-inject-autoloaded",!0),this.onTrigger({currentTarget:t[0]}),!0);window.setTimeout(i.bind(null,e),n[0].delay)}else this.onTrigger({currentTarget:t[0]});break;case"autoload-visible":this._initAutoloadVisible(t,n);break;case"idle":this._initIdleTrigger(t,n[0].delay)}return f.debug("initialised:",t),t},destroy(t){return t.off(".pat-inject"),t.data("pat-inject",null),t},onTrigger(t){t.preventDefault&&t.preventDefault();const e=a()(t.currentTarget);let n=e.data("pat-inject");if("FORM"===e[0].tagName&&"submit"===t.type){if(e[0].matches(":invalid"))return void f.debug("Form is invalid, aborting");const i=t.submitter,s=i?.getAttribute("formaction");if(s){const t={url:s},e=i.closest("[data-pat-inject]");n=this.extractConfig(a()(e),t)}for(const t of n)t.params=a().param(e.serializeArray())}e.trigger("patterns-inject-triggered"),this.execute(n,e)},submitSubform(t){const e=t.parents("form"),n=t.data("pat-inject");a()(n).each(((e,n)=>{n.params=a().param(t.serializeArray())}));try{e.trigger("patterns-inject-triggered")}catch(t){f.error("patterns-inject-triggered",t)}this.execute(n,e)},extractConfig(t,e){e=a().extend({},e);const n=b.parse(t,e,!0);return n.forEach((n=>{n.$context=t,n.url=e.url||n.url||t.attr("href")||t.attr("action")||t.parents("form").attr("action")||"";const i=n.url.split("#");if(n.url=i[0],i.length>2&&f.warn("Ignoring additional source ids:",i.slice(2)),n.defaultSelector||(n.defaultSelector=i[1]&&"#"+i[1]||"body"),n.delay)try{n.delay=m.A.parseTime(n.delay)}catch(t){f.warn("Invalid delay value: ",n.delay),n.delay=null}n.processDelay=0})),n},elementIsDirty(t){const e=a().map(t.find(":input:not(select)"),(t=>{const e=a()(t).val();return Boolean(e)&&e!==a()(t).attr("placeholder")}));return-1!==a().inArray(!0,e)},askForConfirmation(t){let e,n=!1;for(const i of t){let t=!1;"always"==i.confirm?t=!0:"form-data"===i.confirm&&i.target&&"none"!==i.target?t=this.elementIsDirty(i.$target):"class"===i.confirm&&i.target&&"none"!==i.target&&(t=i.$target.hasClass("is-dirty")),t&&(n=!0,e=i.confirmMessage)}return!(n&&!window.confirm(e))},ensureTarget(t){if("none"===t.target)return!0;if(t.$target=t.$target||("self"===t.target?t.$context:a()(t.target)),0===t.$target.length){if(!t.target)return f.error("Need target selector",t),!1;t.$target=this.createTarget(t.target),t.$injected=t.$target}return!0},verifySingleConfig(t,e){return e.url!==t?(f.error("Unsupported different urls for multi-inject"),!1):(e.source=e.source||e.defaultSelector,e.target=e.target||e.defaultSelector,!!this.extractModifiers(e)&&(!!this.ensureTarget(e)&&(this.listenForFormReset(e),!0)))},verifyConfig(t){return t.every((e=>this.verifySingleConfig(t[0].url,e)))},listenForFormReset(t){if("none"===t.target)return;const e=t.$target.parents("form");0!==e.length&&void 0===t.$target.data("initial-value")&&(t.$target.data("initial-value",t.$target.html()),e.on("reset",(()=>{t.$target.html(t.$target.data("initial-value"))})))},extractModifiers(t){const e=/^(.*?)(::element)?$/.exec(t.source),n=/^(.*?)(::element)?(::after|::before)?$/.exec(t.target);t.source=e[1],t.sourceMod=e[2]?"element":"content",t.target=n[1];const i=n[2]?"element":"content",a=(n[3]||"::").slice(2);return t.loadingClass&&(t.loadingClass+=" "+t.loadingClass+"-"+i,a&&t.loadingClass&&(t.loadingClass+=" "+t.loadingClass+"-"+a)),t.action=i+a,!0},createTarget(t){if("#"!==t.slice(0,1))return f.error("only id supported for non-existing target"),null;const e=a()("<div />").attr({id:t.slice(1)});return a()("body").append(e),e},_performInjection(t,e,n,i,s,r){let o;"content"===i.sourceMod&&(n=n.contents()),o=n.safeClone(),o.findInclusive("img").on("load",(t=>{a()(t.currentTarget).trigger("pat-inject-content-loaded")}));const l=i.$injected||o;this._inject(s,o,a()(t),i)&&(this._update_history(i,s,r),this._afterInjection(e,l,i))},_update_history(t,e,n){const i=t.url.indexOf("?")>-1?"&":"?";"record"===t.history&&"pushState"in history&&(t.params?history.pushState({url:t.url+i+t.params},"",t.url+i+t.params):history.pushState({url:t.url},"",t.url),n&&this._inject(e,n,a()("title"),{action:"element"}))},_afterInjection(t,e,n){if(e.filter(((t,e)=>3!==e.nodeType)).data("pat-injected",{origin:n.url}),1===e.length&&3==e[0].nodeType?e.parent().trigger("patterns-injected",[n,t[0],e[0]]):e.each(((e,i)=>{3!==i.nodeType&&a()(i).addClass(n.class).trigger("patterns-injected",[n,t[0],i])})),n.scroll&&"none"!==n.scroll){const t=["top","target"].includes(n.scroll)?n.$target[0]:e.findInclusive(n.scroll)[0],i=h.A.find_scroll_container(t,null,window);"top"===n.scroll?h.A.scroll_to_top(i):t&&h.A.scroll_to_element(t,i)}t[0].dispatchEvent(new Event("pat-inject-success",{bubbles:!0,cancelable:!0}))},async _onInjectSuccess(t,e,n){let i=n?.jqxhr?.responseText;if(!i)return void f.warn("No response content, aborting",n);"none"===e[0].source&&(i="");const a=await this.callTypeHandler(e[0].dataType,"sources",t,[e,i,n]);let s;a&&a[a.length-1]&&a[a.length-1][0]&&"TITLE"==a[a.length-1][0].nodeName&&(s=a[a.length-1]),e.forEach(((e,i)=>{const r=()=>{"none"!==e.target&&e.$target.each(((r,o)=>{this._performInjection(o,t,a[i],e,n.target,s)}))};e.processDelay?setTimeout((()=>r()),e.processDelay):r()})),e[0].nextHref&&t.is("a")&&(t.attr({href:e[0].nextHref.replace(/&amp;/g,"&")}),this.destroy(t)),t.off("pat-ajax-success.pat-inject"),t.off("pat-ajax-error.pat-inject")},async _onInjectError(t,e,n){let i="";const s=n.jqxhr.status,r=new Date;let l,c;s%100==4?i="Sorry! We couldn't find the page to load. Please make a screenshot and send it to support. Thank you!":s%100==5?i="I am very sorry! There was an error at the server. Please make a screenshot and contact support. Thank you!":0==s&&(i="It seems, the server is down. Please make a screenshot and contact support. Thank you!");if(null===new URLSearchParams(window.location.search).get("pat-inject-errorhandler.off")){const t=document?.querySelector(`meta[name^=pat-inject-status-${s}]`)?.getAttribute("content",!1);if(c=t?.split("#")[1],c=c?`#${c}`:null,c&&(l=document.createElement("html"),l.innerHTML=n.jqxhr.responseText,l=l.querySelector(c)),!l&&t)try{const e=await fetch(t,{method:"GET"});l=document.createElement("html"),l.innerHTML=await e.text(),l=l.querySelector(c||"body")}catch{}}if(e.forEach((e=>{"$injected"in e&&e.$injected.remove(),e.$target.removeClass(e.loadingClass),t.removeClass(e.executingClass)})),t.off("pat-ajax-success.pat-inject"),t.off("pat-ajax-error.pat-inject"),l){const t=document.querySelector(c||"body");t.innerHTML=l.innerHTML,o.A.scan(t)}else{const t=`${i} Status is ${s} ${n.jqxhr.statusText}, time was ${r}. You can click to close this.`;a()("body").attr("data-error-message",t),a()("body").on("click",(()=>{a()("body").removeAttr("data-error-message"),window.location.href=window.location.href}))}},execute(t,e){if(t=t.map((t=>a().extend({},t))),!this.verifyConfig(t))return;if(!this.askForConfirmation(t))return;if(e.data("pat-inject-triggered"))return;e.data("pat-inject-triggered",!0);for(const n of t)n?.executingClass&&e[0].classList.add(n.executingClass),n?.loadingClass&&"none"!==n?.target&&n.$target.addClass(n.loadingClass);e.on("pat-ajax-success.pat-inject",(async i=>{this._onInjectSuccess(e,t,i),await m.A.timeout(1),g.A.remove_event_listener(e[0],"pat-inject--close-panel"),n&&(n=!1,e[0].dispatchEvent(new Event("close-panel",{bubbles:!0,cancelable:!0})))})),e.on("pat-ajax-error.pat-inject",this._onInjectError.bind(this,e,t)),e.on("pat-ajax-success.pat-inject pat-ajax-error.pat-inject",(()=>e.removeData("pat-inject-triggered")));let n=!1;g.A.add_event_listener(e[0],"close-panel","pat-inject--close-panel",(t=>{t.stopPropagation(),t.stopImmediatePropagation(),n=!0})),t[0].url.length?p.request(e,{url:t[0].url,"browser-cache":t[0].browserCache}):e.trigger({type:"pat-ajax-success",jqxhr:{responseText:a()("body").html()}})},_inject(t,e,n,i){const s={contentbefore:"prepend",contentafter:"append",elementbefore:"before",elementafter:"after"}[i.action];return"none"===i.source?(n.replaceWith(""),!0):0===e.length?(f.warn("Aborting injection, source not found:",e),a()(t).trigger("pat-inject-missingSource",{url:i.url,selector:i.source}),!1):"none"===i.target||(0===n.length?(f.warn("Aborting injection, target not found:",n),a()(t).trigger("pat-inject-missingTarget",{selector:i.target}),!1):("content"===i.action?n.empty().append(e):"element"===i.action?n.replaceWith(e):n[s](e),!0))},_sourcesFromHtml(t,e,n){const i=this._parseRawHtml(t,e);return n.map((t=>{if("body"===t&&(t="#__original_body"),"none"===t)return a()("\x3c!-- --\x3e");const n=i.find(t);return 0===n.length&&"title"!=t&&f.warn("No source elements for selector:",t,i),n.find('a[href^="#"]').each(((t,i)=>{const a=i.getAttribute("href");-1===a.indexOf("#{1}")&&(1===a.length?i.href=e:n.find(a).length||(i.href=e+a))})),n}))},_rebaseAttrs:{a:"href",form:"action",img:"data-pat-inject-rebase-src",object:"data",source:"data-pat-inject-rebase-src",video:"data-pat-inject-rebase-src"},_rebaseOptions:{calendar:["url","event-sources"],collapsible:["load-content"],"date-picker":["i18n"],"datetime-picker":["i18n"],inject:["url"]},_rebaseURL(t,e){return-1!==e.indexOf("://")||"/"===e[0]||0===e.indexOf("data:")?e:(t=new URL(t,window.location).href).slice(0,t.lastIndexOf("/")+1)+e},_rebaseHTML(t,e){if(""===e)return"";const n=document.createElement("div");n.innerHTML=e.replace(/(\s)(src\s*)=/gi,'$1src="" data-pat-inject-rebase-$2=').trim();const i=Object.keys(this._rebaseAttrs).join(",");for(const e of n.querySelectorAll(i)){const n=this._rebaseAttrs[e.tagName.toLowerCase()];let i=e.getAttribute(n);i&&"@@"!==i.slice(0,2)&&"#"!==i[0]&&"mailto:"!==i.slice(0,7)&&"tel:"!==i.slice(0,4)&&"fax:"!==i.slice(0,4)&&"callto:"!==i.slice(0,7)&&"ts3server:"!==i.slice(0,10)&&"teams:"!==i.slice(0,6)&&"javascript:"!==i.slice(0,11)&&(i=this._rebaseURL(t,i),e.setAttribute(n,i))}for(const[e,i]of Object.entries(this._rebaseOptions))for(const a of n.querySelectorAll(`[data-pat-${e}]`)){const n=o.A.patterns?.[e],s=n?.parser;if(!s)continue;const r=s.parse(a,{},!0,!1,!1);let l=!1;for(const e of r)for(const n of i){const i=e[n];i&&(l=!0,Array.isArray(i)?e[n]=i.map((e=>this._rebaseURL(t,e))):e[n]=this._rebaseURL(t,i))}l&&a.setAttribute(`data-pat-${e}`,JSON.stringify(1===r.length?r[0]:r))}return n.innerHTML.replace(/src="" data-pat-inject-rebase-/g,"").trim()},_parseRawHtml(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";const n=t.match(/\<title\>(.*)\<\/title\>/);let i=t.replace(/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,"").replace(/<head\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/head>/gi,"").replace(/<body([^>]*?)>/gi,'<div id="__original_body">').replace(/<\/body([^>]*?)>/gi,"</div>");n&&2==n.length&&(i=n[0]+i);try{i=this._rebaseHTML(e,i)}catch(t){f.error("Error rebasing urls",t)}const s=a()("<div/>").html(i);return 0===s.children().length&&f.warn("Parsing html resulted in empty jquery object:",i),s},_initAutoloadVisible(t,e){if(t.data("pat-inject-autoloaded"))return!1;const n=t[0],i=e[0].delay||200;f.debug(`Delay time: ${i}`);const a=e=>t.data("pat-inject-autoloaded")?(f.debug(`autoload-visible trigger skipped ${n}`),!1):(t.data("pat-inject-autoloaded",!0),this.onTrigger({currentTarget:n}),e&&e.preventDefault(),f.debug(`autoload-visible trigger run ${n}`),!0);let s=null;const r=new IntersectionObserver((t=>{for(const e of t)e.isIntersecting?(s=window.setTimeout((()=>{r.disconnect(),a()}),i),f.debug(`autoload-visible intersecting ${n}`)):(window.clearTimeout(s),f.debug(`autoload-visible not intersecting ${n}`))}),{threshold:0,root:null,margin:"0px"});r.observe(n)},_initIdleTrigger(t,e){const n=parseInt(e,10);let i;const a=()=>{this.onTrigger({currentTarget:t[0]}),r(),clearTimeout(i)},s=m.A.debounce((()=>{document.body.contains(t[0])?(clearTimeout(i),i=setTimeout(a,n)):r()}),n),r=()=>{["scroll","resize"].forEach((t=>window.removeEventListener(t,s))),["click","keypress","keyup","mousemove","touchstart","touchend"].forEach((t=>document.removeEventListener(t,s)))};s(),["scroll","resize"].forEach((t=>window.addEventListener(t,s))),["click","keypress","keyup","mousemove","touchstart","touchend"].forEach((t=>document.addEventListener(t,s)))},registerTypeHandler(t,e){this.handlers[t]=e},async callTypeHandler(t,e,n,i){return t=t||"html",this.handlers[t]&&a().isFunction(this.handlers[t][e])?await this.handlers[t][e].bind(this)(...i):null},handlers:{html:{sources(t,e){const n=t.map((t=>t.source));return n.push("title"),this._sourcesFromHtml(e,t[0].url,n)}}}};if(a()(document).on("patterns-injected.inject",(async(t,e,n,i)=>{e&&e.skipPatInjectHandler||(e&&(e.$target.removeClass(e.loadingClass),a()(n).removeClass(e.executingClass).addClass(e.executedClass)),3!==i.nodeType&&8!==i.nodeType&&(o.A.scan(i,null,{type:"injection",element:n}),a()(i).trigger("patterns-injected-scanned"),await m.A.timeout(10),i.dispatchEvent(new CustomEvent("patterns-injected-delayed",{bubbles:!0,cancelable:!0,detail:{injected:i}}))))})),a()(window).on("popstate",(t=>{if(t.originalEvent.state||!("replaceState"in history))window.location.reload();else try{history.replaceState("anchor","",document.location.href)}catch(t){f.debug(t)}})),"replaceState"in history)try{history.replaceState("pageload","",document.location.href)}catch(t){f.debug(t)}o.A.register(v)},94232:function(t,e,n){"use strict";n.d(e,{Ay:function(){return g},K3:function(){return p}});var i=n(35686),a=n.n(i),s=n(33077),r=n(23505),o=n(33541),l=n(44563),c=n(59329),d=n(8633);n(71553).A.extend({name:"close-panel",trigger:".close-panel",init(){const t=this.el.closest("dialog");t&&l.A.add_event_listener(t,"close-panel","close-panel--dialog",(()=>{t.close()})),this.el.addEventListener("click",(async t=>{await d.A.timeout(0),t.target.matches(":not([formnovalidate])")&&t.target.matches("[type=submit], button:not([type=button])")&&!1===this.el.closest("form")?.checkValidity()||this.el.dispatchEvent(new Event("close-panel",{bubbles:!0,cancelable:!0}))}))}});const u=r.A.getLogger("pat-tooltip"),p=new o.A("tooltip");p.addArgument("position-list",[],["tl","tm","tr","rt","rm","rb","br","bm","bl","lb","lm","lt"],!0),p.addArgument("position-policy","auto",["auto","force"]),p.addArgument("trigger","click",["click","hover","none"]),p.addArgument("source","title",["ajax","content","title"]),p.addArgument("ajax-data-type","html",["html","markdown"]),p.addArgument("closing","auto",["auto","sticky","close-button"]),p.addArgument("delay"),p.addArgument("mark-inactive",!0),p.addArgument("class"),p.addArgument("target","body"),p.addArgument("arrow-padding",null),p.addArgument("url",null);class h extends s.m{static name="tooltip";static trigger=".pat-tooltip, .pat-tooltip-ng";static parser=(()=>p)();tippy=null;active_class="tooltip-active-hover";inactive_class="tooltip-inactive";async init(){const t=this.el;window.__patternslib_import_styles&&n.e(41615).then(n.bind(n,41615));const e=(await n.e(56805).then(n.t.bind(n,56805,23))).default;this.tippy_options=this.parseOptionsForTippy(this.options);const i={animation:!1,arrow:!0,hideOnClick:"close-button"!==this.options.closing,ignoreAttributes:!0,interactive:!0,onHide:this._onHide.bind(this),onShow:this._onShow.bind(this),trigger:"click"};e.setDefaultProps(i),this.tippy=new e(t,this.tippy_options),"title"===this.options.source&&t.removeAttribute("title"),"click"===this.options.trigger&&"ajax"===this.options.source&&l.A.add_event_listener(t,"click","pat-tooltip--click-prevent-default",(t=>{t.preventDefault(),t.stopPropagation()})),"click"===this.options.trigger&&(this.active_class="tooltip-active-click"),this.options.markInactive&&t.classList.add(this.inactive_class)}show(){this.tippy.show()}async hide(){await d.A.timeout(1),this.tippy.hide()}destroy(){super.destroy(),this.tippy.destroy()}parseOptionsForTippy(t){const e=t=>{return`${n=t[0],{t:"bottom",r:"left",b:"top",l:"right"}[n]}${e=t[1],{l:"-start",r:"-end",m:"",t:"-start",b:"-end"}[e]}`;var e,n},n={popperOptions:{modifiers:[]}};null!==t.arrowPadding&&n.popperOptions.modifiers.push({name:"arrow",options:{padding:parseInt(t.arrowPadding,10)}});const i={position:()=>{if(!t.position?.list?.length)return;n.placement=e(t.position.list[0]);const i={name:"flip",enabled:!0};if("force"===t.position.policy)i.enabled=!1;else if(t.position.length>1){const n=t.position.list.slice(1).map(e);i.fallbackPlacements=n}n.popperOptions.modifiers.push(i)},trigger(){"hover"===t.trigger?n.trigger="mouseenter focus":"none"===t.trigger&&(n.trigger="manual",n.hideOnClick=!1)},source:()=>{let e;"title"===t.source?e=this.el.getAttribute("title"):"content"===t.source?(e=this.el.innerHTML,n.allowHTML=!0):"ajax"===t.source&&(e=document.createElement("progress"),n.allowHTML=!0),n.content=e},delay(){t.delay&&(n.delay=[d.A.parseTime(t.delay),0])},target:()=>{t.target&&("parent"===t.target?n.appendTo="parent":"body"===t.target?n.appendTo=document.body:n.appendTo=document.querySelector(t.target))}};for(let e in t){switch(e){case"ajax-data-type":e="ajaxDataType";break;case"mark-inactive":e="markInactive"}i[e]&&i[e](e)}return n}_initialize_content(){c.A.scan(this.tippy.popper)}async _onShow(){const t=[];if(this.options.class&&t.push(...this.options.class.split(" ")),t.push("tooltip-container"),"close-button"===this.options.closing){for(const t of this.tippy.popper.querySelectorAll(".pat-tooltip--close-button"))t.remove();const t=document.createElement("button");t.setAttribute("class","close-panel pat-tooltip--close-button");const e=this.tippy.popper.querySelector(".tippy-content");e.parentNode.insertBefore(t,e)}l.A.add_event_listener(this.tippy.popper,"close-panel","pat-tooltip--close-panel",(()=>this.hide())),this.tippy.popper.classList.add(...t),this.options.markInactive&&(this.el.classList.remove(this.inactive_class),this.el.classList.add(this.active_class)),"auto"!==this.options.closing&&"hover"===this.options.trigger&&this.tippy.setProps({trigger:"click"}),"ajax"===this.options.source&&await this._get_content(),a()(this.tippy.popper).trigger("patterns-injected",[{skipPatInjectHandler:!0},this.el,this.tippy.popper]),this._initialize_content()}_onHide(){this.options.markInactive&&(this.el.classList.remove(this.active_class),this.el.classList.add(this.inactive_class)),"auto"!==this.options.closing&&"hover"===this.options.trigger&&this.tippy.setProps({trigger:"mouseenter focus"}),"ajax"===this.options.source&&this.tippy.setContent(document.createElement("progress"))}async _get_content(){let t,e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.options.url;if(({url:n,selector:t}=this.get_url_parts(n||this.el.getAttribute("href"))),n){const i=this.data_type_handlers[this.options.ajaxDataType];try{const a=await fetch(n,{headers:{Accept:"text/html,application/xhtml+xml,application/xml"}}),s=await a.text();e=await i(s,n,t)}catch(t){u.error("Error on ajax request. ${e}")}}else t&&(e=document.querySelector(t),e=e?.innerHTML||void 0);e&&(this.tippy.setContent(e),await d.A.timeout(1),this.tippy.popperInstance.forceUpdate())}async get_content(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.options.url;await this._get_content(t),this._initialize_content()}get_url_parts(t){let e,n,i;return t?([e,n]=t.split("#"),n&&(n=`#${n}`,[n,i]=n.split("?")),i&&(e=`${e}?${i}`),{url:e,selector:n}):{url:e,selector:n}}static data_type_handlers={html(t,e,n){let i=document.createElement("div");return i.innerHTML=t,n&&(i=i.querySelector(n)),i?.innerHTML||""},async markdown(t,e,n){const i=c.A.patterns.markdown;if(!i)return t;const s=new i(a()("<div/>"));await l.A.await_pattern_init(s);const r={url:e};n&&(r.source=n);return(await s.renderForInjection(r,t))[0]}};static register_type_handler(t,e){h.data_type_handlers[t]=e}constructor(){super(...arguments),this.register_type_handler=this.constructor.register_type_handler,this.data_type_handlers=this.constructor.data_type_handlers}}c.A.register(h);var g=h},1555:function(t,e,n){"use strict";n.d(e,{zJ:function(){return f}});n(89476);var i=n(35686),a=n.n(i),s=n(33077),r=n(33541),o=n(62800),l=n(44563),c=n(23505),d=n(8633),u=n(59329);const p=c.A.getLogger("pat-validation"),h=new r.A("validation");h.addArgument("disable-selector","[type=submit], button:not([type=button])"),h.addArgument("message-date",""),h.addArgument("message-datetime",""),h.addArgument("message-email",""),h.addArgument("message-max",""),h.addArgument("message-min",""),h.addArgument("message-number",""),h.addArgument("message-required",""),h.addArgument("message-equality","is not equal to %{attribute}."),h.addArgument("not-after",null),h.addArgument("not-before",null),h.addArgument("equality",null),h.addArgument("delay",100),h.addAlias("message-integer","message-number"),h.addArgument("error-template");const g="__patternslib__input__error__el",m="__patternslib__input__error__msg";class f extends s.m{static name="validation";static trigger="form.pat-validation";static parser=(()=>h)();init(){l.A.add_event_listener(this.el,"submit","pat-validation--submit--validator",(t=>{for(const e of this.inputs)p.debug("Checking input for submit",e,t),this.check_input({input:e,event:t})}),{capture:!0}),this.initialize_inputs(),a()(this.el).on("pat-update",(()=>{this.initialize_inputs()})),this.el.setAttribute("novalidate","")}initialize_inputs(){this.inputs=[...this.el.querySelectorAll("input[name], select[name], textarea[name]")],this.disabled_elements=[...this.el.querySelectorAll(this.options.disableSelector)];for(const[t,e]of this.inputs.entries()){const n=d.A.debounce((t=>{p.debug("Checking input for event",e,t),this.check_input({input:e,event:t})}),this.options.delay);l.A.add_event_listener(e,"input",`pat-validation--input-${e.name}--${t}--validator`,(t=>n(t))),l.A.add_event_listener(e,"change",`pat-validation--change-${e.name}--${t}--validator`,(t=>n(t))),l.A.add_event_listener(e,"blur",`pat-validation--blur-${e.name}--${t}--validator`,(t=>n(t)))}}check_input(t){let{input:e,event:n,stop:i=!1}=t;if(e.disabled)return;this.set_validity({input:e,msg:""});const a=e.validity;if(n?.submitter?.hasAttribute("formnovalidate"))return;p.debug(`\n            validity_state.badInput ${a.badInput}\n            validity_state.customError ${a.customError}\n            validity_state.patternMismatch ${a.patternMismatch}\n            validity_state.rangeOverflow ${a.rangeOverflow}\n            validity_state.rangeUnderflow ${a.rangeUnderflow}\n            validity_state.stepMismatch ${a.stepMismatch}\n            validity_state.tooLong ${a.tooLong}\n            validity_state.tooShort ${a.tooShort}\n            validity_state.typeMismatch ${a.typeMismatch}\n            validity_state.valid ${a.valid}\n            validity_state.valueMissing ${a.valueMissing}\n        `);const s=h.parse(e);if(a.valid){if(s.equality&&this.el.querySelector(`[name=${s.equality}]`)?.value!==e.value){const t=s.message.equality||"The value is not equal to %{attribute}";this.set_validity({input:e,msg:t,attribute:s.equality})}else if(s.not.after||s.not.before){const t=s.message.date||s.message.datetime,n="The date must be after %{attribute}",a="The date must be before %{attribute}";let r,o,l,c;if(s.not.after&&(d.A.is_iso_date_time(s.not.after,!0)?r=new Date(s.not.after):(o=document.querySelector(s.not.after),r=o?.value?new Date(o?.value):void 0),r=isNaN(r)?null:r),s.not.before&&(d.A.is_iso_date_time(s.not.before,!0)?l=new Date(s.not.before):(c=document.querySelector(s.not.before),l=c?.value?new Date(c?.value):void 0),l=isNaN(l)?null:l),e.value&&d.A.is_iso_date_time(e.value,!0)&&!isNaN(new Date(e.value))){const i=new Date(e.value);if(r&&i>r){let n;!o&&s.not.after?n=s.not.after:(n=o?.labels?.[0]?.textContent.replace(/\s\s+/g," "),n=n||o.name),this.set_validity({input:e,msg:t||a,attribute:n.trim()})}else if(l&&i<l){let i;!c&&s.not.before?i=s.not.before:(i=c?.labels?.[0]?.textContent.replace(/\s\s+/g," "),i=i||c.name),this.set_validity({input:e,msg:t||n,attribute:i.trim()})}}!i&&o&&(p.debug("Check `not-after` input.",o),this.check_input({input:o,stop:!0})),!i&&c&&(p.debug("Check `no-before` input.",o),this.check_input({input:c,stop:!0}))}if(!a.customError)return void this.remove_error(e,!0)}else a.valueMissing&&s.message.required?this.set_validity({input:e,msg:s.message.required}):a.rangeUnderflow&&s.message.min?this.set_validity({input:e,msg:s.message.min,min:e.getAttribute("min")}):a.rangeOverflow&&s.message.max?this.set_validity({input:e,msg:s.message.max,max:e.getAttribute("max")}):(a.badInput||a.stepMismatch)&&"number"===e.type&&s.message.number?this.set_validity({input:e,msg:s.message.number}):a.typeMismatch&&"email"===e.type&&s.message.email?this.set_validity({input:e,msg:s.message.email}):a.rangeUnderflow&&"date"===e.type&&s.message.date||a.rangeOverflow&&"date"===e.type&&s.message.date?this.set_validity({input:e,msg:s.message.date}):(a.rangeUnderflow&&"datetime"===e.type&&s.message.datetime||a.rangeOverflow&&"datetime"===e.type&&s.message.datetime)&&this.set_validity({input:e,msg:s.message.datetime});"submit"===n?.type&&(n.preventDefault(),n.stopPropagation(),n.stopImmediatePropagation()),this.set_error_message(e)}set_validity(t){let{input:e,msg:n,attribute:i=null,min:a=null,max:s=null}=t;i&&(n=n.replace(/%{attribute}/g,i)),a&&(n=n.replace(/%{count}/g,a)),s&&(n=n.replace(/%{count}/g,s)),n=n.replace(/%{value}/g,JSON.stringify(e.value)),e.setCustomValidity(n),e[m]=n}remove_error(t){let e=[t];arguments.length>1&&void 0!==arguments[1]&&arguments[1]&&(e=this.inputs.filter((e=>e.name===t.name)));for(const t of e){const e=t[g];t[g]=null,e?.remove()}if(this.el.checkValidity())for(const t of this.disabled_elements)t.disabled&&(t.removeAttribute("disabled"),t.classList.remove("disabled"))}set_error_message(t){this.remove_error(t);const e=this.inputs.filter((e=>e.name===t.name));if(e.length>1&&e.some((t=>!!t[g])))return;const n=t.validationMessage||t[m],i=o.A.create_from_string(this.error_template(n)).firstChild;let a;"radio"!==t.type&&"checkbox"!==t.type||(a=t.closest("fieldset.pat-checklist")),a?a.append(i):t.after(i),t[g]=i;let s=!1;for(const t of this.disabled_elements)t.disabled||t.formNoValidate||(s=!0,t.setAttribute("disabled","disabled"),t.classList.add("disabled"),p.debug("Disable element",t));if(s){p.debug("Checking whole form after element was disabled.");for(const e of this.inputs.filter((e=>e!==t)))this.check_input({input:e,stop:!0})}}error_template(t){return`<em class="validation warning message">${t}</em>`}}u.A.register(f)}}]);
//# sourceMappingURL=88465.d3e00608dfbc1d4eccd9.min.js.map