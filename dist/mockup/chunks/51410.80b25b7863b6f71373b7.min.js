"use strict";(self.webpackChunk_plone_mockup=self.webpackChunk_plone_mockup||[]).push([[51410],{3831:function(e,t,n){n.d(t,{EO:function(){return a},Em:function(){return r},gf:function(){return o},qz:function(){return l},r1:function(){return c},x6:function(){return i}});var s=n(49264);async function r(e){let{method:t="GET",vocabularyUrl:n=null,attributes:s=[],path:r=null,uids:i=null,searchTerm:l=null,searchPath:a=null,levelInfoPath:o=null,selectableTypes:c=[],pageSize:u=100,page:A=1}=e,p={criteria:[]};if(r&&(p={criteria:[{i:"path",o:"plone.app.querystring.operation.string.path",v:`${r}::1`}],sort_on:"getObjPositionInParent",sort_order:"ascending"}),o&&(p={criteria:[{i:"path",o:"plone.app.querystring.operation.string.path",v:`${o}::0`}]}),a&&(p={criteria:[{i:"path",o:"plone.app.querystring.operation.string.path",v:a}]},c&&p.criteria.push({i:"portal_type",o:"plone.app.querystring.operation.list.contains",v:c})),i&&(p={criteria:[{i:"UID",o:"plone.app.querystring.operation.list.contains",v:i}]}),l&&p.criteria.push({i:"SearchableText",o:"plone.app.querystring.operation.string.contains",v:`${l}`}),!p.criteria.length)return{results:[],total:0};let d=`${n}&query=${JSON.stringify(p)}&attributes=${JSON.stringify(s)}&batch=${JSON.stringify({page:A,size:u})}`,m=new Headers;m.set("Accept","application/json");const g=await fetch(d,{method:t,headers:m}),f=await g.json();if(g.ok){if(!a&&!o&&c.length){const e={results:[],total:f.total};for(const t of f.results)(-1!=c.indexOf(t.portal_type)||t.is_folderish)&&e.results.push(t);return e}return f}return{results:[],total:0,errors:f.errors}}async function i(e,t){if(!e)return[];const n=await r({vocabularyUrl:t.vocabularyUrl,attributes:t.attributes,uids:e});let s=await(n?.results)||[];return s.sort(((t,n)=>e.indexOf(t.UID)-e.indexOf(n.UID))),s}async function l(e,t){let{iconName:n}=t;const r=await async function(e){return await s.A.resolveIcon(e)}(n);return e.outerHTML=r,{destroy(){}}}function a(e){const t=t=>{e&&!e.contains(t.target)&&e.dispatchEvent(new CustomEvent("click_outside",e))};return document.addEventListener("click",t,!0),{destroy(){document.removeEventListener("click",t,!0)}}}function o(e,t){let n=s.A.storage.get(t.recentlyUsedKey)||[];n=n.slice(n.length-1e3,n.length),e&&t?.selectableTypes.length&&(n=n.filter((e=>-1!=t.selectableTypes.indexOf(e.portal_type))));const r=parseInt(t.recentlyUsedMaxItems,10);return r&&(n=n.slice(n.length-r,n.length)),n}function c(e,t){if(!t.recentlyUsed)return;const n=o(!1,t),r=n.filter((t=>t.UID===e.UID));r.length>0&&n.splice(n.indexOf(r[0]),1),n.push(e),s.A.storage.set(t.recentlyUsedKey,n)}},95428:function(e,t,n){var s=n(71354),r=n.n(s),i=n(76314),l=n.n(i)()(r());l.push([e.id,".selected-item.svelte-b5z3s7.svelte-b5z3s7{display:flex;flex-wrap:nowrap;align-items:start;justify-content:space-between;cursor:move}.selected-item.svelte-b5z3s7>.svelte-b5z3s7{margin-right:.5rem;display:block}.selected-item.svelte-b5z3s7 button.svelte-b5z3s7{cursor:pointer;padding:0 .375rem .374rem 0}.selected-item.svelte-b5z3s7 .item-info.svelte-b5z3s7{display:flex;align-items:start}.selected-item.svelte-b5z3s7>img.svelte-b5z3s7{object-fit:cover;width:95px;height:95px}","",{version:3,sources:["webpack://./src/pat/contentbrowser/src/SelectedItem.svelte"],names:[],mappings:"AAAA,2CAAA,YAAA,CAAA,gBAAA,CAAA,iBAAA,CAAA,6BAAA,CAAA,WAAA,CAAA,4CAAA,kBAAA,CAAA,aAAA,CAAA,kDAAA,cAAA,CAAA,2BAAA,CAAA,sDAAA,YAAA,CAAA,iBAAA,CAAA,+CAAA,gBAAA,CAAA,UAAA,CAAA,WAAA",sourceRoot:""}]),t.A=l},51410:function(e,t,n){n.r(t),n.d(t,{default:function(){return D}});var s=n(43467),r=(n(2531),n(41949)),i=n(3831),l=n(85072),a=n.n(l),o=n(97825),c=n.n(o),u=n(57722),A=n.n(u),p=n(55056),d=n.n(p),m=n(10540),g=n.n(m),f=n(41113),b=n.n(f),y=n(95428),h={};h.styleTagTransform=b(),h.setAttributes=d(),h.insert=A(),h.domAPI=c(),h.insertStyleElement=g();a()(y.A,h),y.A&&y.A.locals&&y.A.locals;function C(e){let t,n,r;return{c(){t=(0,s.ND4)("img"),(0,s.mq_)(t.src,n=e[1].getURL+"/@@images/image/mini")||(0,s.CFu)(t,"src",n),(0,s.CFu)(t,"alt",r=e[1].Title),(0,s.CFu)(t,"class","svelte-b5z3s7")},m(e,n){(0,s.Yry)(e,t,n)},p(e,i){2&i&&!(0,s.mq_)(t.src,n=e[1].getURL+"/@@images/image/mini")&&(0,s.CFu)(t,"src",n),2&i&&r!==(r=e[1].Title)&&(0,s.CFu)(t,"alt",r)},d(e){e&&(0,s.YoD)(t)}}}function v(e){let t,n,r,l,a,o,c,u,A,p,d,m,g,f,b,y,h,v=e[1].Title+"",w=e[1].path+"",x=e[1].getURL&&(e[1].getIcon||"Image"===e[1].portal_type)&&C(e);return{c(){t=(0,s.ND4)("div"),n=(0,s.ND4)("div"),r=(0,s.ND4)("button"),l=(0,s.QQy)("svg"),o=(0,s.xem)(),c=(0,s.ND4)("div"),u=(0,s.ND4)("span"),A=(0,s.Qq7)(v),p=(0,s.ND4)("br"),d=(0,s.xem)(),m=(0,s.ND4)("span"),g=(0,s.Qq7)(w),f=(0,s.xem)(),x&&x.c(),(0,s.CFu)(r,"class","btn btn-link btn-sm link-secondary svelte-b5z3s7"),(0,s.CFu)(u,"class","item-title"),(0,s.CFu)(m,"class","small"),(0,s.CFu)(n,"class","item-info svelte-b5z3s7"),(0,s.CFu)(t,"class","selected-item border border-secondary-subtle rounded p-2 mb-1 bg-body-tertiary svelte-b5z3s7"),(0,s.CFu)(t,"data-uuid",b=e[1].UID)},m(b,C){(0,s.Yry)(b,t,C),(0,s.BCw)(t,n),(0,s.BCw)(n,r),(0,s.BCw)(r,l),(0,s.BCw)(n,o),(0,s.BCw)(n,c),(0,s.BCw)(c,u),(0,s.BCw)(u,A),(0,s.BCw)(c,p),(0,s.BCw)(c,d),(0,s.BCw)(c,m),(0,s.BCw)(m,g),(0,s.BCw)(t,f),x&&x.m(t,null),y||(h=[(0,s.hGc)(a=i.qz.call(null,l,{iconName:"x-circle"})),(0,s.KTR)(r,"click",e[3])],y=!0)},p(e,[n]){2&n&&v!==(v=e[1].Title+"")&&(0,s.iQh)(A,v),2&n&&w!==(w=e[1].path+"")&&(0,s.iQh)(g,w),e[1].getURL&&(e[1].getIcon||"Image"===e[1].portal_type)?x?x.p(e,n):(x=C(e),x.c(),x.m(t,null)):x&&(x.d(1),x=null),2&n&&b!==(b=e[1].UID)&&(0,s.CFu)(t,"data-uuid",b)},i:s.lQ1,o:s.lQ1,d(e){e&&(0,s.YoD)(t),x&&x.d(),y=!1,(0,s.oOW)(h)}}}function w(e,t,n){let{idx:s}=t,{item:i}=t;const l=(0,r.SD)("unselectItem");return e.$$set=e=>{"idx"in e&&n(0,s=e.idx),"item"in e&&n(1,i=e.item)},[s,i,l,()=>l(s)]}class x extends s.r7T{constructor(e){super(),(0,s.TsN)(this,e,w,v,s.jXN,{idx:0,item:1})}}var D=x}}]);
//# sourceMappingURL=51410.80b25b7863b6f71373b7.min.js.map