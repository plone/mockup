(self.webpackChunk_plone_mockup=self.webpackChunk_plone_mockup||[]).push([[41402],{41402:function(){!function(){"use strict";var e=tinymce.util.Tools.resolve("tinymce.PluginManager");const t=e=>t=>typeof t===e,o=t("boolean"),n=t("function"),r=()=>!1;class i{constructor(e,t){this.tag=e,this.value=t}static some(e){return new i(!0,e)}static none(){return i.singletonNone}fold(e,t){return this.tag?t(this.value):e()}isSome(){return this.tag}isNone(){return!this.tag}map(e){return this.tag?i.some(e(this.value)):i.none()}bind(e){return this.tag?e(this.value):i.none()}exists(e){return this.tag&&e(this.value)}forall(e){return!this.tag||e(this.value)}filter(e){return!this.tag||e(this.value)?this:i.none()}getOr(e){return this.tag?this.value:e}or(e){return this.tag?this:e}getOrThunk(e){return this.tag?this.value:e()}orThunk(e){return this.tag?this:e()}getOrDie(e){if(this.tag)return this.value;throw new Error(null!=e?e:"Called getOrDie on None")}static from(e){return null==e?i.none():i.some(e)}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(e){this.tag&&e(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}i.singletonNone=new i(!1);let s=0;var a=tinymce.util.Tools.resolve("tinymce.util.Delay");const l=e=>t=>t.options.get(e),c=l("quickbars_selection_toolbar"),u=l("quickbars_insert_toolbar"),d=l("quickbars_image_toolbar"),m=e=>{if(null==e)throw new Error("Node cannot be null or undefined");return{dom:e}},g=(e,t)=>{const o=e.dom;if(1!==o.nodeType)return!1;{const e=o;if(void 0!==e.matches)return e.matches(t);if(void 0!==e.msMatchesSelector)return e.msMatchesSelector(t);if(void 0!==e.webkitMatchesSelector)return e.webkitMatchesSelector(t);if(void 0!==e.mozMatchesSelector)return e.mozMatchesSelector(t);throw new Error("Browser lacks native selectors")}};var h=(e,t,o,r,s)=>e(o,r)?i.some(o):n(s)&&s(o)?i.none():t(o,r,s);const p=(e,t,o)=>{let s=e.dom;const a=n(o)?o:r;for(;s.parentNode;){s=s.parentNode;const e=m(s);if(t(e))return i.some(e);if(a(e))break}return i.none()},b=(e,t,o)=>p(e,e=>g(e,t),o);e.add("quickbars",e=>{(e=>{const t=e.options.register,n=e=>t=>{const n=o(t)||(e=>"string"===(e=>{const t=typeof e;return null===e?"null":"object"===t&&Array.isArray(e)?"array":"object"===t&&(o=n=e,(r=String).prototype.isPrototypeOf(o)||(null===(i=n.constructor)||void 0===i?void 0:i.name)===r.name)?"string":t;var o,n,r,i})(e))(t);return n?o(t)?{value:t?e:"",valid:n}:{value:t.trim(),valid:n}:{valid:!1,message:"Must be a boolean or string."}},r="bold italic | quicklink h2 h3 blockquote";t("quickbars_selection_toolbar",{processor:n(r),default:r});const i="quickimage quicktable";t("quickbars_insert_toolbar",{processor:n(i),default:i});const s="alignleft aligncenter alignright";t("quickbars_image_toolbar",{processor:n(s),default:s})})(e),(e=>{e.on("PreInit",()=>{e.queryCommandSupported("QuickbarInsertImage")||e.addCommand("QuickbarInsertImage",()=>{(e=>new Promise(t=>{let o=!1;const n=document.createElement("input");n.type="file",n.accept="image/*",n.style.position="fixed",n.style.left="0",n.style.top="0",n.style.opacity="0.001",document.body.appendChild(n);const r=e=>{var r;o||(null===(r=n.parentNode)||void 0===r||r.removeChild(n),o=!0,t(e))},i=e=>{r(Array.prototype.slice.call(e.target.files))};n.addEventListener("input",i),n.addEventListener("change",i);const s=t=>{const n=()=>{r([])};o||("focusin"===t.type?a.setEditorTimeout(e,n,1e3):n()),e.off("focusin remove",s)};e.on("focusin remove",s),n.click()}))(e).then(t=>{if(t.length>0){const o=t[0];(e=>new Promise(t=>{const o=new FileReader;o.onloadend=()=>{t(o.result.split(",")[1])},o.readAsDataURL(e)}))(o).then(t=>{((e,t,o)=>{const n=e.editorUpload.blobCache,r=n.create((()=>{const e=(new Date).getTime(),t=Math.floor(window.crypto.getRandomValues(new Uint32Array(1))[0]/4294967295*1e9);return s++,"mceu_"+t+s+String(e)})(),o,t);n.add(r),e.insertContent(e.dom.createHTML("img",{src:r.blobUri()}))})(e,t,o)})}})})})})(e),(e=>{e.ui.registry.addButton("quickimage",{icon:"image",tooltip:"Insert image",onAction:()=>e.execCommand("QuickbarInsertImage")}),e.ui.registry.addButton("quicktable",{icon:"table",tooltip:"Insert table",onAction:()=>{(e=>{e.execCommand("mceInsertTable",!1,{rows:2,columns:2})})(e)}})})(e),(e=>{const t=u(e);t.length>0&&e.ui.registry.addContextToolbar("quickblock",{predicate:t=>{const o=m(t),n=e.schema.getTextBlockElements(),i=t=>t.dom===e.getBody();return!(e=>{const t=e.dom;return!(!t||!t.hasAttribute)&&t.hasAttribute("data-mce-bogus")})(o)&&((e,t,o)=>h((e,t)=>g(e,t),b,e,'table,[data-mce-bogus="all"]',o))(o,0,i).fold(()=>((e,t,o)=>((e,t,o)=>h((e,t)=>t(e),p,e,t,o))(e,t,o).isSome())(o,t=>t.dom.nodeName.toLowerCase()in n&&e.dom.isEmpty(t.dom),i),r)},items:t,position:"line",scope:"editor"})})(e),(e=>{const t=t=>e.dom.isEditable(t),o=e=>{const o="FIGURE"===e.nodeName&&/image/i.test(e.className),n="IMG"===e.nodeName||o,r=(e=>void 0!==e.dom.classList)(i=m(e))&&i.dom.classList.contains("mce-pagebreak");var i;return n&&t(e.parentElement)&&!r},n=d(e);n.length>0&&e.ui.registry.addContextToolbar("imageselection",{predicate:o,items:n,position:"node"});const r=c(e);r.length>0&&e.ui.registry.addContextToolbar("textselection",{predicate:n=>!o(n)&&!e.selection.isCollapsed()&&t(n),items:r,position:"selection",scope:"editor"})})(e)})}()}}]);
//# sourceMappingURL=41402.4f6b0ef0a496a05df46b.min.js.map