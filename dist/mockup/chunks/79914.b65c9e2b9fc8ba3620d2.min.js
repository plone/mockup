(self.webpackChunk_plone_mockup=self.webpackChunk_plone_mockup||[]).push([[79914],{79914:function(){!function(){"use strict";var e=tinymce.util.Tools.resolve("tinymce.PluginManager");const t=(n="string",e=>(e=>{const t=typeof e;return null===e?"null":"object"===t&&Array.isArray(e)?"array":"object"===t&&(n=o=e,(r=String).prototype.isPrototypeOf(n)||o.constructor?.name===r.name)?"string":t;var n,o,r})(e)===n);var n;const o=(r=void 0,e=>r===e);var r;const a=e=>!(e=>null==e)(e),s=Object.hasOwnProperty,l=e=>"\ufeff"===e,c=e=>t=>t.options.get(e),i=c("autolink_pattern"),d=c("link_default_target"),u=c("link_default_protocol"),f=c("allow_unsafe_link_target");var g=tinymce.util.Tools.resolve("tinymce.dom.TextSeeker");const k=e=>3===e.nodeType,p=e=>1===e.nodeType,m=e=>/^[(\[{ \u00a0]$/.test(e),h=(e,t,n)=>{for(let o=t-1;o>=0;o--){const t=e.charAt(o);if(!l(t)&&n(t))return o}return-1},w=(e,t)=>{const n=e.schema.getVoidElements(),r=i(e),{dom:a,selection:l}=e;if(null!==a.getParent(l.getNode(),"a[href]")||e.mode.isReadOnly())return null;const c=l.getRng(),d=g(a,e=>{return a.isBlock(e)||(t=n,o=e.nodeName.toLowerCase(),s.call(t,o))||"false"===a.getContentEditable(e)||null!==a.getParent(e,"a[href]");var t,o}),{container:f,offset:w}=((e,t)=>{let n=e,o=t;for(;p(n)&&n.childNodes[o];)n=n.childNodes[o],o=k(n)?n.data.length:n.childNodes.length;return{container:n,offset:o}})(c.endContainer,c.endOffset),y=a.getParent(f,a.isBlock)??a.getRoot(),_=d.backwards(f,w+t,(e,t)=>{const n=e.data,o=h(n,t,(r=m,e=>!r(e)));var r,a;return-1===o||(a=n[o],/[?!,.;:]/.test(a))?o:o+1},y);if(!_)return null;let v=_.container;const C=d.backwards(_.container,_.offset,(e,t)=>{v=e;const n=h(e.data,t,m);return-1===n?n:n+1},y),b=a.createRng();C?b.setStart(C.container,C.offset):b.setStart(v,0),b.setEnd(_.container,_.offset);const A=b.toString().replace(/\uFEFF/g,"").match(r);if(A){let t=A[0];if(((e,t,n)=>""===t||e.length>=t.length&&e.substr(n,n+t.length)===t)(t,"www.",0)){t=u(e)+"://"+t}else((e,t,n=0,r)=>{const a=e.indexOf(t,n);return-1!==a&&(!!o(r)||a+t.length<=r)})(t,"@")&&!(e=>/^([A-Za-z][A-Za-z\d.+-]*:\/\/)|mailto:/.test(e))(t)&&(t="mailto:"+t);return{rng:b,url:t}}return null},y=(e,n)=>{const{dom:o,selection:r}=e,{rng:a,url:s}=n,l=r.getBookmark();r.setRng(a);const c="createlink",i={command:c,ui:!1,value:s};if(!e.dispatch("BeforeExecCommand",i).isDefaultPrevented()){e.getDoc().execCommand(c,!1,s),e.dispatch("ExecCommand",i);const n=d(e);if(t(n)){const t=r.getNode();o.setAttrib(t,"target",n),"_blank"!==n||f(e)||o.setAttrib(t,"rel","noopener")}}r.moveToBookmark(l),e.nodeChanged()},_=e=>{const t=w(e,-1);a(t)&&y(e,t)},v=_,C=e=>{e.on("keydown",t=>{13!==t.keyCode||t.isDefaultPrevented()||(e=>{const t=w(e,0);a(t)&&y(e,t)})(e)}),e.on("keyup",t=>{32===t.keyCode?_(e):(48===t.keyCode&&t.shiftKey||221===t.keyCode)&&v(e)})};e.add("autolink",e=>{(e=>{const t=e.options.register;t("autolink_pattern",{processor:"regexp",default:new RegExp("^"+/(?:[A-Za-z][A-Za-z\d.+-]{0,14}:\/\/(?:[-.~*+=!&;:'%@?^${}(),\w]+@)?|www\.|[-;:&=+$,.\w]+@)[A-Za-z\d-]+(?:\.[A-Za-z\d-]+)*(?::\d+)?(?:\/(?:[-.~*+=!;:'%@$(),\/\w]*[-~*+=%@$()\/\w])?)?(?:\?(?:[-.~*+=!&;:'%@?^${}(),\/\w]+))?(?:#(?:[-.~*+=!&;:'%@?^${}(),\/\w]+))?/g.source+"$","i")}),t("link_default_target",{processor:"string"}),t("link_default_protocol",{processor:"string",default:"https"})})(e),C(e)})}()}}]);
//# sourceMappingURL=79914.b65c9e2b9fc8ba3620d2.min.js.map