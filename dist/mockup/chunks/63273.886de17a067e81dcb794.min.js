(self.webpackChunk_plone_mockup=self.webpackChunk_plone_mockup||[]).push([[63273],{63273:function(){!function(){"use strict";var e=tinymce.util.Tools.resolve("tinymce.PluginManager");const t=e=>t=>typeof t===e,o=(e=>t=>(e=>{const t=typeof e;return null===e?"null":"object"===t&&Array.isArray(e)?"array":"object"===t&&(o=r=e,n=(s=String).prototype,n.isPrototypeOf(o)||r.constructor?.name===s.name)?"string":t;var o,n;var r,s})(t)===e)("string"),n=t("boolean"),r=e=>null==e,s=e=>!r(e),a=t("function"),i=t("number"),c=e=>()=>e,d=(e,t)=>e===t,l=c(!1);class m{tag;value;static singletonNone=new m(!1);constructor(e,t){this.tag=e,this.value=t}static some(e){return new m(!0,e)}static none(){return m.singletonNone}fold(e,t){return this.tag?t(this.value):e()}isSome(){return this.tag}isNone(){return!this.tag}map(e){return this.tag?m.some(e(this.value)):m.none()}bind(e){return this.tag?e(this.value):m.none()}exists(e){return this.tag&&e(this.value)}forall(e){return!this.tag||e(this.value)}filter(e){return!this.tag||e(this.value)?this:m.none()}getOr(e){return this.tag?this.value:e}or(e){return this.tag?this:e}getOrThunk(e){return this.tag?this.value:e()}orThunk(e){return this.tag?this:e()}getOrDie(e){if(this.tag)return this.value;throw new Error(e??"Called getOrDie on None")}static from(e){return s(e)?m.some(e):m.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(e){this.tag&&e(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}const u=Array.prototype.indexOf,p=(e,t)=>{return o=e,n=t,u.call(o,n)>-1;var o,n},g=(e,t)=>{const o=e.length,n=new Array(o);for(let r=0;r<o;r++){const o=e[r];n[r]=t(o,r)}return n},h=(e,t)=>{for(let o=0,n=e.length;o<n;o++){t(e[o],o)}},f=Object.keys;let y=0;const v=e=>{const t=(new Date).getTime(),o=Math.floor(window.crypto.getRandomValues(new Uint32Array(1))[0]/4294967295*1e9);return y++,e+"_"+o+y+String(t)},b=(w=/^\s+|\s+$/g,e=>e.replace(w,""));var w;const N=(e,t)=>({element:e,offset:t}),T=e=>{if(null==e)throw new Error("Node cannot be null or undefined");return{dom:e}},A={fromHtml:(e,t)=>{const o=(t||document).createElement("div");if(o.innerHTML=e,!o.hasChildNodes()||o.childNodes.length>1){const t="HTML does not have a single root node";throw console.error(t,e),new Error(t)}return T(o.childNodes[0])},fromTag:(e,t)=>{const o=(t||document).createElement(e);return T(o)},fromText:(e,t)=>{const o=(t||document).createTextNode(e);return T(o)},fromDom:T,fromPoint:(e,t,o)=>m.from(e.dom.elementFromPoint(t,o)).map(T)},C=(e,t)=>{const o=e.dom;if(1!==o.nodeType)return!1;{const e=o;if(void 0!==e.matches)return e.matches(t);if(void 0!==e.msMatchesSelector)return e.msMatchesSelector(t);if(void 0!==e.webkitMatchesSelector)return e.webkitMatchesSelector(t);if(void 0!==e.mozMatchesSelector)return e.mozMatchesSelector(t);throw new Error("Browser lacks native selectors")}},S=e=>1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType||0===e.childElementCount,x=(e,t)=>e.dom===t.dom,D=C,E=e=>e.dom.nodeName.toLowerCase(),k=e=>e.dom.nodeType,O=e=>t=>k(t)===e,M=e=>8===k(e)||"#comment"===E(e),P=O(1),R=O(3),B=O(9),L=O(11),$=e=>{return B(e)?e:(t=e,A.fromDom(t.dom.ownerDocument));var t},V=e=>m.from(e.dom.parentNode).map(A.fromDom),I=(e,t)=>{const o=a(t)?t:l;let n=e.dom;const r=[];for(;null!==n.parentNode&&void 0!==n.parentNode;){const e=n.parentNode,t=A.fromDom(e);if(r.push(t),!0===o(t))break;n=e}return r},j=e=>m.from(e.dom.previousSibling).map(A.fromDom),q=e=>m.from(e.dom.nextSibling).map(A.fromDom),_=e=>g(e.dom.childNodes,A.fromDom),H=e=>((e,t)=>{const o=e.dom.childNodes;return m.from(o[t]).map(A.fromDom)})(e,0),z=e=>{const t=(e=>A.fromDom(e.dom.getRootNode()))(e);return L(o=t)&&s(o.dom.host)?m.some(t):m.none();var o},F=e=>A.fromDom(e.dom.host),K=(e,t)=>{V(e).each(o=>{o.dom.insertBefore(t.dom,e.dom)})},U=(e,t)=>{q(e).fold(()=>{V(e).each(e=>{G(e,t)})},e=>{K(e,t)})},Y=(e,t)=>{H(e).fold(()=>{G(e,t)},o=>{e.dom.insertBefore(t.dom,o.dom)})},G=(e,t)=>{e.dom.appendChild(t.dom)},J=(e,t)=>{K(e,t),G(t,e)},Q=(e,t)=>{h(t,(o,n)=>{const r=0===n?e:t[n-1];U(r,o)})},W=(e,t)=>{h(t,t=>{G(e,t)})},X=(e,t,r)=>{if(!(o(r)||n(r)||i(r)))throw console.error("Invalid call to Attribute.set. Key ",t,":: Value ",r,":: Element ",e),new Error("Attribute value was not simple");e.setAttribute(t,r+"")},Z=(e,t,o)=>{X(e.dom,t,o)},ee=(e,t)=>{const o=e.dom;((e,t)=>{const o=f(e);for(let n=0,r=o.length;n<r;n++){const r=o[n];t(e[r],r)}})(t,(e,t)=>{X(o,t,e)})},te=(e,t)=>{const o=e.dom.getAttribute(t);return null===o?void 0:o},oe=(e,t)=>m.from(te(e,t)),ne=(e,t)=>{e.dom.removeAttribute(t)},re=e=>{return t=e.dom.attributes,o=(e,t)=>(e[t.name]=t.value,e),n={},h(t,(e,t)=>{n=o(n,e,t)}),n;var t,o,n},se=e=>{const t=e.dom;null!==t.parentNode&&t.parentNode.removeChild(t)},ae=e=>{const t=_(e);t.length>0&&Q(e,t),se(e)},ie=e=>void 0!==e.style&&a(e.style.getPropertyValue),ce=e=>{const t=R(e)?e.dom.parentNode:e.dom;if(null==t||null===t.ownerDocument)return!1;const o=t.ownerDocument;return z(A.fromDom(t)).fold(()=>o.body.contains(t),(n=ce,r=F,e=>n(r(e))));var n,r},de=(e,t,n)=>{((e,t,n)=>{if(!o(n))throw console.error("Invalid call to CSS.set. Property ",t,":: Value ",n,":: Element ",e),new Error("CSS value must be a string: "+n);ie(e)&&e.style.setProperty(t,n)})(e.dom,t,n)},le=(e,t)=>{const o=e.dom,n=window.getComputedStyle(o).getPropertyValue(t);return""!==n||ce(e)?n:me(o,t)},me=(e,t)=>ie(e)?e.style.getPropertyValue(t):"",ue=(e,t)=>{const o=e.dom,n=me(o,t);return m.from(n).filter(e=>e.length>0)},pe=(e,t)=>{((e,t)=>{ie(e)&&e.style.removeProperty(t)})(e.dom,t),((e,t,o=d)=>e.exists(e=>o(e,t)))(oe(e,"style").map(b),"")&&ne(e,"style")},ge=((e,t)=>{const o=t=>e(t)?m.from(t.dom.nodeValue):m.none();return{get:n=>{if(!e(n))throw new Error("Can only get "+t+" value of a "+t+" node");return o(n).getOr("")},getOption:o,set:(o,n)=>{if(!e(o))throw new Error("Can only set raw "+t+" value of a "+t+" node");o.dom.nodeValue=n}}})(R,"text"),he=e=>ge.get(e),fe=(e,t)=>ge.set(e,t);const ye=(e,t,o)=>{let n=e.dom;const r=a(o)?o:l;for(;n.parentNode;){n=n.parentNode;const e=A.fromDom(n);if(t(e))return m.some(e);if(r(e))break}return m.none()},ve=(e,t,o)=>ye(e,e=>C(e,t),o),be=(e,t)=>((e,t)=>{const o=void 0===t?document:t.dom;return S(o)?m.none():m.from(o.querySelector(e)).map(A.fromDom)})(t,e),we=(e,t,o)=>((e,t,o,n,r)=>e(o,n)?m.some(o):a(r)&&r(o)?m.none():t(o,n,r))((e,t)=>C(e,t),ve,e,t,o),Ne=(e,t)=>{let o=[];return h(_(e),e=>{t(e)&&(o=o.concat([e])),o=o.concat(Ne(e,t))}),o},Te=(e,t)=>((e,t)=>{const o=void 0===t?document:t.dom;return S(o)?[]:g(o.querySelectorAll(e),A.fromDom)})(t,e);var Ae=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","li","table","thead","tbody","tfoot","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"];const Ce=(e,t,o)=>e.property().isText(t)&&0===e.property().getText(t).trim().length||e.property().isComment(t)?o(t).bind(t=>Ce(e,t,o).orThunk(()=>m.some(t))):m.none(),Se=(e,t)=>{if(e.property().isText(t))return e.property().getText(t).length;return e.property().children(t).length},xe=(e,t)=>{const o=Ce(e,t,e.query().prevSibling).getOr(t);if(e.property().isText(o))return N(o,Se(e,o));const n=e.property().children(o);return n.length>0?xe(e,n[n.length-1]):N(o,Se(e,o))},De=xe,Ee={up:c({selector:ve,closest:we,predicate:ye,all:I}),down:c({selector:Te,predicate:Ne}),styles:c({get:le,getRaw:ue,set:de,remove:pe}),attrs:c({get:te,set:Z,remove:ne,copyTo:(e,t)=>{const o=re(e);ee(t,o)}}),insert:c({before:K,after:U,afterAll:Q,append:G,appendAll:W,prepend:Y,wrap:J}),remove:c({unwrap:ae,remove:se}),create:c({nu:A.fromTag,clone:e=>A.fromDom(e.dom.cloneNode(!1)),text:A.fromText}),query:c({comparePosition:(e,t)=>e.dom.compareDocumentPosition(t.dom),prevSibling:j,nextSibling:q}),property:c({children:_,name:E,parent:V,document:e=>$(e).dom,isText:R,isComment:M,isElement:P,isSpecial:e=>{const t=E(e);return p(["script","noscript","iframe","noframes","noembed","title","style","textarea","xmp"],t)},getLanguage:e=>P(e)?oe(e,"lang"):m.none(),getText:he,setText:fe,isBoundary:e=>!!P(e)&&("body"===E(e)||p(Ae,E(e))),isEmptyTag:e=>!!P(e)&&p(["br","img","hr","input"],E(e)),isNonEditable:e=>P(e)&&"false"===te(e,"contenteditable")}),eq:x,is:D},ke=(e=>t=>t.options.get(e))("disabled"),Oe="details",Me="mce-accordion",Pe="mce-accordion-summary",Re="mce-accordion-body",Be="div",Le="data-mce-accordion-open";var $e=tinymce.util.Tools.resolve("tinymce.util.Tools");const Ve=e=>"SUMMARY"===e?.nodeName,Ie=e=>"DETAILS"===e?.nodeName,je=e=>e.hasAttribute("open"),qe=e=>{const t=e.selection.getNode();return Ve(t)||Boolean(e.dom.getParent(t,Ve))},_e=e=>!qe(e)&&e.dom.isEditable(e.selection.getNode())&&!e.mode.isReadOnly(),He=e=>m.from(e.dom.getParent(e.selection.getNode(),Ie)),ze=e=>(e.innerHTML='<br data-mce-bogus="1" />',e),Fe=e=>ze(e.dom.create("p")),Ke=(e,t)=>{if(!Ve(t?.firstChild)){const o=(e=>ze(e.dom.create("summary")))(e);t.prepend(o),e.selection.setCursorLocation(o,0)}},Ue=e=>t=>{((e,t)=>{if(Ve(t?.lastChild)){const o=Fe(e);t.appendChild(o),e.selection.setCursorLocation(o,0)}})(e,t),Ke(e,t)},Ye=e=>{if(!_e(e))return;const t=A.fromDom(e.getBody()),o=v("acc"),n=e.dom.encode(e.selection.getRng().toString()||e.translate("Accordion summary...")),r=e.dom.encode(e.translate("Accordion body...")),s=`<summary class="${Pe}">${n}</summary>`,a=`<${Be} class="${Re}"><p>${r}</p></${Be}>`;e.undoManager.transact(()=>{e.insertContent([`<details data-mce-id="${o}" class="${Me}" open="open">`,s,a,"</details>"].join("")),be(t,`[data-mce-id="${o}"]`).each(t=>{ne(t,"data-mce-id"),be(t,"summary").each(t=>{const o=e.dom.createRng(),n=De(Ee,t);o.setStart(n.element.dom,n.offset),o.setEnd(n.element.dom,n.offset),e.selection.setRng(o)})})})},Ge=(e,t,o)=>{const n=o??!je(t);return e||t.setAttribute(Le,n?"open":"closed"),n?t.setAttribute("open","open"):t.removeAttribute("open"),n},Je=e=>{e.mode.isReadOnly()||He(e).each(t=>{const{nextSibling:o}=t;o?(e.selection.select(o,!0),e.selection.collapse(!0)):((e,t)=>{const o=Fe(e);t.insertAdjacentElement("afterend",o),e.selection.setCursorLocation(o,0)})(e,t),t.remove()})},Qe=e=>{e.addCommand("InsertAccordion",()=>Ye(e)),e.addCommand("ToggleAccordion",(t,o)=>((e,t)=>{ke(e)||He(e).each(o=>{((e,t,o)=>{e.dispatch("ToggledAccordion",{element:t,state:o})})(e,o,Ge(e.readonly,o,t))})})(e,o)),e.addCommand("ToggleAllAccordions",(t,o)=>((e,t)=>{const o=Array.from(e.getBody().querySelectorAll("details"));0!==o.length&&(h(o,o=>Ge(e.readonly,o,t??!je(o))),((e,t,o)=>{e.dispatch("ToggledAllAccordions",{elements:t,state:o})})(e,o,t))})(e,o)),e.addCommand("RemoveAccordion",()=>Je(e))};var We=tinymce.util.Tools.resolve("tinymce.html.Node");const Xe=e=>{Ze(e,"open")&&et(e,"open","open")},Ze=(e,t)=>void 0!==e.attr(t),et=(e,t,o)=>{e.attr(t,o)},tt=e=>e.attr("class")?.split(" ")??[],ot=(e,t)=>{const o=new Set([...tt(e),...t]),n=Array.from(o);n.length>0&&e.attr("class",n.join(" "))},nt=(e,t)=>{const o=((e,t)=>{const o=[];for(let n=0,r=e.length;n<r;n++){const r=e[n];t(r,n)&&o.push(r)}return o})(tt(e),e=>!t.has(e));e.attr("class",o.length>0?o.join(" "):null)},rt=e=>e.name===Oe&&p(tt(e),Me),st=e=>e.name===Be&&p(tt(e),Re),at=e=>{const t=e.children();let o,n;const s=[];for(let e=0;e<t.length;e++){const a=t[e];"summary"===a.name&&r(o)?o=a:st(a)&&r(n)?n=a:s.push(a)}return{summaryNode:o,wrapperNode:n,otherNodes:s}},it=e=>{const t=new We("br",1);t.attr("data-mce-bogus","1"),e.empty(),e.append(t)};var ct=tinymce.util.Tools.resolve("tinymce.util.VK");const dt=e=>{e.on("keydown",t=>{(!t.shiftKey&&t.keyCode===ct.ENTER&&qe(e)||(e=>{const t=e.selection.getRng();return Ie(t.startContainer)&&t.collapsed&&0===t.startOffset})(e))&&(t.preventDefault(),e.execCommand("ToggleAccordion"))})},lt=e=>{dt(e),e.on("ExecCommand",t=>{const o=t.command.toLowerCase();"delete"!==o&&"forwarddelete"!==o||!(e=>He(e).isSome())(e)||(e=>{$e.each($e.grep(e.dom.select("details",e.getBody())),Ue(e))})(e)})};var mt=tinymce.util.Tools.resolve("tinymce.Env");const ut=e=>t=>{const o=()=>t.setEnabled(_e(e));return e.on("NodeChange",o),()=>e.off("NodeChange",o)};e.add("accordion",e=>{(e=>{const t=()=>e.execCommand("InsertAccordion");e.ui.registry.addButton("accordion",{icon:"accordion",tooltip:"Insert accordion",onSetup:ut(e),onAction:t}),e.ui.registry.addMenuItem("accordion",{icon:"accordion",text:"Accordion",onSetup:ut(e),onAction:t}),e.ui.registry.addToggleButton("accordiontoggle",{icon:"accordion-toggle",tooltip:"Toggle accordion",onAction:()=>e.execCommand("ToggleAccordion"),context:"any"}),e.ui.registry.addToggleButton("accordionremove",{icon:"remove",tooltip:"Delete accordion",onAction:()=>e.execCommand("RemoveAccordion")}),e.ui.registry.addContextToolbar("accordion",{predicate:t=>e.dom.is(t,"details")&&e.getBody().contains(t)&&e.dom.isEditable(t.parentNode),items:"accordiontoggle accordionremove",scope:"node",position:"node"})})(e),Qe(e),lt(e),(e=>{e.on("PreInit",()=>{const{serializer:t,parser:o}=e;o.addNodeFilter(Oe,e=>{for(let t=0;t<e.length;t++){const o=e[t];if(Xe(o),rt(o)){const e=o;e.attr(Le,"open"===e.attr("open")?"open":"closed");const{summaryNode:t,wrapperNode:n,otherNodes:a}=at(e),i=s(t),c=i?t:new We("summary",1);r(c.firstChild)&&it(c),ot(c,[Pe]),i||(s(e.firstChild)?e.insert(c,e.firstChild,!0):e.append(c));const d=s(n),l=d?n:new We(Be,1);if(l.attr("data-mce-bogus","1"),ot(l,[Re]),a.length>0)for(let e=0;e<a.length;e++){const t=a[e];l.append(t)}if(r(l.firstChild)){const e=new We("p",1);it(e),l.append(e)}d||e.append(l)}}}),t.addNodeFilter(Oe,e=>{const t=new Set([Pe]);for(let o=0;o<e.length;o++){const n=e[o];if(rt(n)){const e=n;e.attr("open","open"===e.attr(Le)?"open":null),e.attr(Le,null);const{summaryNode:o,wrapperNode:r}=at(e);s(o)&&nt(o,t),s(r)&&r.unwrap()}}})})})(e),(e=>{mt.browser.isSafari()&&e.on("click",t=>{if(Ve(t.target)){const o=t.target,n=e.selection.getRng();n.collapsed&&n.startContainer===o.parentNode&&0===n.startOffset&&e.selection.setCursorLocation(o,0)}})})(e)})}()}}]);
//# sourceMappingURL=63273.886de17a067e81dcb794.min.js.map