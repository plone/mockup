{"version":3,"file":"chunks/82752.5597cb23285a9405f848.min.js","mappings":"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","sources":["webpack://@plone/mockup/./src/pat/contentbrowser/src/utils.js","webpack://@plone/mockup/./src/pat/contentbrowser/src/ContentBrowser.svelte","webpack://@plone/mockup/./src/pat/contentbrowser/src/SelectedItems.svelte","webpack://@plone/mockup/./src/pat/contentbrowser/src/ContentStore.js","webpack://@plone/mockup/Favorites.svelte","webpack://@plone/mockup/RecentlyUsed.svelte","webpack://@plone/mockup/./src/pat/contentbrowser/src/ContentBrowser.svelte?e09c","webpack://@plone/mockup/ContentBrowser.svelte","webpack://@plone/mockup/./src/pat/contentbrowser/src/SelectedItems.svelte?e8bf","webpack://@plone/mockup/SelectedItems.svelte","webpack://@plone/mockup/./src/pat/contentbrowser/src/stores.js","webpack://@plone/mockup/App.svelte"],"sourcesContent":["import utils from \"../../../core/utils.js\";\n\nexport async function request({\n    method = \"GET\",\n    vocabularyUrl = null,\n    attributes = [],\n    path = null,\n    uids = null,\n    searchTerm = null,\n    searchPath = null,\n    levelInfoPath = null,\n    selectableTypes = [],\n    pageSize = 100,\n    page = 1,\n}) {\n    let vocabQuery = {\n        criteria: [],\n    };\n    if (path) {\n        // query sublevel of path\n        vocabQuery = {\n            criteria: [\n                {\n                    i: \"path\",\n                    o: \"plone.app.querystring.operation.string.path\",\n                    v: `${path}::1`,\n                },\n            ],\n            sort_on: \"getObjPositionInParent\",\n            sort_order: \"ascending\",\n        };\n    }\n    if (levelInfoPath) {\n        // query exact path\n        vocabQuery = {\n            criteria: [\n                {\n                    i: \"path\",\n                    o: \"plone.app.querystring.operation.string.path\",\n                    v: `${levelInfoPath}::0`,\n                },\n            ],\n        };\n    }\n    if (searchPath) {\n        // search from searchPath down\n        vocabQuery = {\n            criteria: [\n                {\n                    i: \"path\",\n                    o: \"plone.app.querystring.operation.string.path\",\n                    v: searchPath,\n                },\n            ],\n        };\n        if (selectableTypes.length) {\n            vocabQuery.criteria.push({\n                i: \"portal_type\",\n                o: \"plone.app.querystring.operation.list.contains\",\n                v: selectableTypes,\n            })\n        }\n    }\n    if (uids) {\n        vocabQuery = {\n            criteria: [\n                {\n                    i: \"UID\",\n                    o: \"plone.app.querystring.operation.list.contains\",\n                    v: uids,\n                },\n            ],\n        };\n    }\n    if (searchTerm) {\n        vocabQuery.criteria.push({\n            i: \"SearchableText\",\n            o: \"plone.app.querystring.operation.string.contains\",\n            v: `${searchTerm}`,\n\n        })\n    }\n\n    if (!vocabQuery.criteria.length) {\n        return {\n            results: [],\n            total: 0,\n        }\n    };\n\n    let url = `${vocabularyUrl}${vocabularyUrl.indexOf(\"?\") !== -1 ? \"&\" : \"?\"}query=${JSON.stringify(\n        vocabQuery\n    )}&attributes=${JSON.stringify(attributes)}&batch=${JSON.stringify({\n        page: page,\n        size: pageSize,\n    })}`;\n\n    let headers = new Headers();\n    headers.set(\"Accept\", \"application/json\");\n\n    const response = await fetch(url, {\n        method: method,\n        headers: headers,\n    });\n\n    if (!response.ok) {\n        return {\n            results: [],\n            total: 0,\n            errors: json.errors,\n        };\n    }\n\n    const json = await response.json();\n\n    if (!searchPath && !levelInfoPath && selectableTypes.length) {\n        // we iter through response and filter out non-selectable\n        // types but keep folderish types to maintain browsing\n        // the content structure.\n        const filtered_response = {\n            results: [],\n            total: json.total,\n        }\n        for (const it of json.results) {\n            if (selectableTypes.indexOf(it.portal_type) != -1 || it.is_folderish) {\n                filtered_response.results.push(it);\n            }\n        }\n        return filtered_response;\n    }\n    return json;\n}\n\nexport async function get_items_from_uids(uids, config) {\n    if (!uids) {\n        return [];\n    }\n    const selectedItemsFromUids = await request({\n        vocabularyUrl: config.vocabularyUrl,\n        attributes: config.attributes,\n        uids: uids,\n    });\n    let results = (await selectedItemsFromUids?.results) || [];\n    // resort the results based on the order of uids\n    results.sort((a, b) => {\n        return uids.indexOf(a.UID) - uids.indexOf(b.UID);\n    })\n    return results;\n}\n\n\n/** use Plone resolveIcon to load a SVG icon and replace node with icon code */\nexport async function resolveIcon(node, { iconName }) {\n    async function getIcon(iconName) {\n        const icon = await utils.resolveIcon(iconName)\n        return icon;\n    }\n    const iconCode = await getIcon(iconName);\n    node.outerHTML = iconCode;\n    return {\n        destroy() { },\n    };\n}\n\n/** Dispatch event on click outside of node */\nexport function clickOutside(node) {\n    const handleClick = (event) => {\n        if (node && !node.contains(event.target)) {\n            node.dispatchEvent(new CustomEvent(\"click_outside\", node));\n        }\n    };\n\n    document.addEventListener(\"click\", handleClick, true);\n\n    return {\n        destroy() {\n            document.removeEventListener(\"click\", handleClick, true);\n        },\n    };\n}\n\nexport function recentlyUsedItems(filterItems, config) {\n    let ret = utils.storage.get(config.recentlyUsedKey) || [];\n    // hard-limit to 1000 entries\n    ret = ret.slice(ret.length - 1000, ret.length);\n    if (filterItems && config?.selectableTypes.length) {\n        ret = ret.filter((it) => {\n            return config.selectableTypes.indexOf(it.portal_type) != -1;\n        });\n    }\n    // max is applied AFTER filtering selectable items.\n    const max = parseInt(config.recentlyUsedMaxItems, 20);\n    if (max) {\n        // return the slice from the end, as we want to display newest items first.\n        ret = ret.slice(ret.length - max, ret.length);\n    }\n    return ret;\n}\n\nexport function updateRecentlyUsed(item, config) {\n    if (!config.recentlyUsed) {\n        return;\n    }\n    // add to recently added items\n    const recentlyUsed = recentlyUsedItems(false, config); // do not filter for selectable but get all. append to that list the new item.\n    const alreadyPresent = recentlyUsed.filter((it) => {\n        return it.UID === item.UID;\n    });\n    if (alreadyPresent.length > 0) {\n        recentlyUsed.splice(recentlyUsed.indexOf(alreadyPresent[0]), 1);\n    }\n    recentlyUsed.push(item);\n    utils.storage.set(config.recentlyUsedKey, recentlyUsed);\n}\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".content-browser-position-wrapper.svelte-1nqf38l.svelte-1nqf38l.svelte-1nqf38l{position:fixed;top:0;right:0;display:flex;justify-content:end;z-index:1500;width:100%;height:100vh;background-color:rgba(0,0,0,.25)}.btn-xs.svelte-1nqf38l.svelte-1nqf38l.svelte-1nqf38l{--bs-btn-padding-y:0.15rem;--bs-btn-padding-x:0.5rem;--bs-btn-font-size:0.75rem}.content-browser.svelte-1nqf38l.svelte-1nqf38l.svelte-1nqf38l{height:100vh;min-width:550px;background-color:var(--bs-light-bg-subtle);border-left:var(--bs-border-style) var(--bs-border-width) #fff;z-index:1500;display:flex;flex-direction:column}.toolBar.svelte-1nqf38l.svelte-1nqf38l.svelte-1nqf38l{background-color:var(--bs-primary);padding:.325rem .75rem;color:var(--bs-light);width:100%;display:flex;justify-content:start}.toolBar.svelte-1nqf38l svg{vertical-align:-0.125em}.levelColumns.svelte-1nqf38l.svelte-1nqf38l.svelte-1nqf38l{display:flex;flex-wrap:nowrap;width:100%;overflow-y:hidden;overflow-x:auto;flex-grow:3;border-left:var(--bs-border-style) var(--bs-border-color) var(--bs-border-width);user-select:none}.levelColumn.svelte-1nqf38l.svelte-1nqf38l.svelte-1nqf38l{width:320px;border-right:var(--bs-border-style) var(--bs-border-width) var(--bs-border-color);display:flex;flex-direction:column;flex-grow:0;flex-shrink:0}.levelToolbar.svelte-1nqf38l.svelte-1nqf38l.svelte-1nqf38l{width:100%;height:2.5rem;display:flex;justify-content:space-between;padding:.375rem;border-bottom:var(--bs-border-style) var(--bs-border-width) var(--bs-border-color)}.levelToolbar.svelte-1nqf38l>.levelActions.svelte-1nqf38l.svelte-1nqf38l{margin-left:auto}.levelToolbar.svelte-1nqf38l>button.svelte-1nqf38l.svelte-1nqf38l{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.levelItems.svelte-1nqf38l.svelte-1nqf38l.svelte-1nqf38l{overflow-x:auto}.contentItem.svelte-1nqf38l.svelte-1nqf38l.svelte-1nqf38l{display:flex;align-items:center;justify-content:space-between;font-size:90%;min-height:2rem}.contentItem.svelte-1nqf38l.svelte-1nqf38l.svelte-1nqf38l:focus-visible{outline:none}.contentItem.even.svelte-1nqf38l.svelte-1nqf38l.svelte-1nqf38l{background-color:rgba(var(--bs-secondary-bg-rgb), 0.4)}.contentItem.inPath.svelte-1nqf38l.svelte-1nqf38l.svelte-1nqf38l,.contentItem.svelte-1nqf38l.svelte-1nqf38l.svelte-1nqf38l:focus{background-color:rgba(var(--bs-primary-rgb), 0.15)}.contentItem.selectedItem.svelte-1nqf38l.svelte-1nqf38l.svelte-1nqf38l{background-color:var(--bs-primary);color:var(--bs-body-bg)}.contentItem.svelte-1nqf38l>.svelte-1nqf38l.svelte-1nqf38l{padding:.5rem;white-space:nowrap;max-width:450px;text-overflow:ellipsis;overflow:hidden}.contentItem.svelte-1nqf38l>.browseSub.svelte-1nqf38l.svelte-1nqf38l{flex-shrink:0}.contentItem.svelte-1nqf38l .grid-preview.svelte-1nqf38l>img.svelte-1nqf38l{width:95px;height:95px;object-fit:cover;float:left;margin-right:1rem}.preview.svelte-1nqf38l.svelte-1nqf38l.svelte-1nqf38l{width:320px;min-height:300px;display:flex;flex-direction:column;align-items:center}.preview.svelte-1nqf38l .info.svelte-1nqf38l.svelte-1nqf38l{padding:.5rem;width:100%;word-wrap:anywhere}.preview.svelte-1nqf38l .info .previewIcon.svelte-1nqf38l.svelte-1nqf38l{margin:0 auto 1rem auto}.preview.svelte-1nqf38l .info .previewIcon svg.svelte-1nqf38l.svelte-1nqf38l{width:50px !important;height:50px !important}.preview.svelte-1nqf38l h4.svelte-1nqf38l.svelte-1nqf38l{font-size:1.2 rem}.preview.svelte-1nqf38l img.svelte-1nqf38l.svelte-1nqf38l{max-width:100%;max-width:100%;margin-bottom:.5rem}.upload-wrapper.svelte-1nqf38l.svelte-1nqf38l.svelte-1nqf38l{padding:1rem;width:590px;overflow-x:auto}.loadmore.svelte-1nqf38l.svelte-1nqf38l.svelte-1nqf38l{text-align:center;padding:.25rem 0}\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/pat/contentbrowser/src/ContentBrowser.svelte\"],\"names\":[],\"mappings\":\"AAAA,+EAAA,cAAA,CAAA,KAAA,CAAA,OAAA,CAAA,YAAA,CAAA,mBAAA,CAAA,YAAA,CAAA,UAAA,CAAA,YAAA,CAAA,gCAAA,CAAA,qDAAA,0BAAA,CAAA,yBAAA,CAAA,0BAAA,CAAA,8DAAA,YAAA,CAAA,eAAA,CAAA,0CAAA,CAAA,8DAAA,CAAA,YAAA,CAAA,YAAA,CAAA,qBAAA,CAAA,sDAAA,kCAAA,CAAA,sBAAA,CAAA,qBAAA,CAAA,UAAA,CAAA,YAAA,CAAA,qBAAA,CAAA,4BAAA,uBAAA,CAAA,2DAAA,YAAA,CAAA,gBAAA,CAAA,UAAA,CAAA,iBAAA,CAAA,eAAA,CAAA,WAAA,CAAA,gFAAA,CAAA,gBAAA,CAAA,0DAAA,WAAA,CAAA,iFAAA,CACmC,YAAA,CAAA,qBAAA,CAAA,WAAA,CAAA,aAAA,CAAA,2DAAA,UAAA,CAAA,aAAA,CAAA,YAAA,CAAA,6BAAA,CAAA,eAAA,CAAA,kFAAA,CACA,yEAAA,gBAAA,CAAA,kEAAA,kBAAA,CAAA,eAAA,CAAA,sBAAA,CAAA,yDAAA,eAAA,CAAA,0DAAA,YAAA,CAAA,kBAAA,CAAA,6BAAA,CAAA,aAAA,CAAA,eAAA,CAAA,wEAAA,YAAA,CAAA,+DAAA,sDAAA,CAAA,iIAAA,kDAAA,CAAA,uEAAA,kCAAA,CAAA,uBAAA,CAAA,2DAAA,aAAA,CAAA,kBAAA,CAAA,eAAA,CAAA,sBAAA,CAAA,eAAA,CAAA,qEAAA,aAAA,CAAA,4EAAA,UAAA,CAAA,WAAA,CAAA,gBAAA,CAAA,UAAA,CAAA,iBAAA,CAAA,sDAAA,WAAA,CAAA,gBAAA,CAAA,YAAA,CAAA,qBAAA,CAAA,kBAAA,CAAA,4DAAA,aAAA,CAAA,UAAA,CAAA,kBAAA,CAAA,yEAAA,uBAAA,CAAA,6EAAA,qBAAA,CAAA,sBAAA,CAAA,yDAAA,iBAAA,CAAA,0DAAA,cAAA,CAAA,cAAA,CAAA,mBAAA,CAAA,6DAAA,YAAA,CAAA,WAAA,CAAA,eAAA,CAAA,uDAAA,iBAAA,CAAA,gBAAA\",\"sourcesContent\":[\".content-browser-position-wrapper.svelte-1nqf38l.svelte-1nqf38l.svelte-1nqf38l{position:fixed;top:0;right:0;display:flex;justify-content:end;z-index:1500;width:100%;height:100vh;background-color:rgba(0, 0, 0, 0.25)}.btn-xs.svelte-1nqf38l.svelte-1nqf38l.svelte-1nqf38l{--bs-btn-padding-y:0.15rem;--bs-btn-padding-x:0.5rem;--bs-btn-font-size:0.75rem}.content-browser.svelte-1nqf38l.svelte-1nqf38l.svelte-1nqf38l{height:100vh;min-width:550px;background-color:var(--bs-light-bg-subtle);border-left:var(--bs-border-style) var(--bs-border-width) #fff;z-index:1500;display:flex;flex-direction:column}.toolBar.svelte-1nqf38l.svelte-1nqf38l.svelte-1nqf38l{background-color:var(--bs-primary);padding:0.325rem 0.75rem;color:var(--bs-light);width:100%;display:flex;justify-content:start}.toolBar.svelte-1nqf38l svg{vertical-align:-0.125em}.levelColumns.svelte-1nqf38l.svelte-1nqf38l.svelte-1nqf38l{display:flex;flex-wrap:nowrap;width:100%;overflow-y:hidden;overflow-x:auto;flex-grow:3;border-left:var(--bs-border-style) var(--bs-border-color) var(--bs-border-width);user-select:none}.levelColumn.svelte-1nqf38l.svelte-1nqf38l.svelte-1nqf38l{width:320px;border-right:var(--bs-border-style) var(--bs-border-width)\\n            var(--bs-border-color);display:flex;flex-direction:column;flex-grow:0;flex-shrink:0}.levelToolbar.svelte-1nqf38l.svelte-1nqf38l.svelte-1nqf38l{width:100%;height:2.5rem;display:flex;justify-content:space-between;padding:0.375rem;border-bottom:var(--bs-border-style) var(--bs-border-width)\\n            var(--bs-border-color)}.levelToolbar.svelte-1nqf38l>.levelActions.svelte-1nqf38l.svelte-1nqf38l{margin-left:auto}.levelToolbar.svelte-1nqf38l>button.svelte-1nqf38l.svelte-1nqf38l{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.levelItems.svelte-1nqf38l.svelte-1nqf38l.svelte-1nqf38l{overflow-x:auto}.contentItem.svelte-1nqf38l.svelte-1nqf38l.svelte-1nqf38l{display:flex;align-items:center;justify-content:space-between;font-size:90%;min-height:2rem}.contentItem.svelte-1nqf38l.svelte-1nqf38l.svelte-1nqf38l:focus-visible{outline:none}.contentItem.even.svelte-1nqf38l.svelte-1nqf38l.svelte-1nqf38l{background-color:rgba(var(--bs-secondary-bg-rgb), .4)}.contentItem.inPath.svelte-1nqf38l.svelte-1nqf38l.svelte-1nqf38l,.contentItem.svelte-1nqf38l.svelte-1nqf38l.svelte-1nqf38l:focus{background-color:rgba(var(--bs-primary-rgb), 0.15)}.contentItem.selectedItem.svelte-1nqf38l.svelte-1nqf38l.svelte-1nqf38l{background-color:var(--bs-primary);color:var(--bs-body-bg)}.contentItem.svelte-1nqf38l>.svelte-1nqf38l.svelte-1nqf38l{padding:0.5rem;white-space:nowrap;max-width:450px;text-overflow:ellipsis;overflow:hidden}.contentItem.svelte-1nqf38l>.browseSub.svelte-1nqf38l.svelte-1nqf38l{flex-shrink:0}.contentItem.svelte-1nqf38l .grid-preview.svelte-1nqf38l>img.svelte-1nqf38l{width:95px;height:95px;object-fit:cover;float:left;margin-right:1rem}.preview.svelte-1nqf38l.svelte-1nqf38l.svelte-1nqf38l{width:320px;min-height:300px;display:flex;flex-direction:column;align-items:center}.preview.svelte-1nqf38l .info.svelte-1nqf38l.svelte-1nqf38l{padding:0.5rem;width:100%;word-wrap:anywhere}.preview.svelte-1nqf38l .info .previewIcon.svelte-1nqf38l.svelte-1nqf38l{margin:0 auto 1rem auto}.preview.svelte-1nqf38l .info .previewIcon svg.svelte-1nqf38l.svelte-1nqf38l{width:50px !important;height:50px !important}.preview.svelte-1nqf38l h4.svelte-1nqf38l.svelte-1nqf38l{font-size:1.2 rem}.preview.svelte-1nqf38l img.svelte-1nqf38l.svelte-1nqf38l{max-width:100%;max-width:100%;margin-bottom:0.5rem}.upload-wrapper.svelte-1nqf38l.svelte-1nqf38l.svelte-1nqf38l{padding:1rem;width:590px;overflow-x:auto}.loadmore.svelte-1nqf38l.svelte-1nqf38l.svelte-1nqf38l{text-align:center;padding:0.25rem 0}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiQ29udGVudEJyb3dzZXIuc3ZlbHRlIiwic291cmNlcyI6WyJDb250ZW50QnJvd3Nlci5zdmVsdGUiXSwic291cmNlc0NvbnRlbnQiOlsiPHNjcmlwdD5cbiAgICBpbXBvcnQgdXRpbHMgZnJvbSBcIkBwYXR0ZXJuc2xpYi9wYXR0ZXJuc2xpYi9zcmMvY29yZS91dGlsc1wiO1xuICAgIGltcG9ydCB7IGdldENvbnRleHQgfSBmcm9tIFwic3ZlbHRlXCI7XG4gICAgaW1wb3J0ICogYXMgYW5pbWF0ZVNjcm9sbCBmcm9tIFwic3ZlbHRlLXNjcm9sbHRvXCI7XG4gICAgaW1wb3J0IHsgZmx5IH0gZnJvbSBcInN2ZWx0ZS90cmFuc2l0aW9uXCI7XG4gICAgaW1wb3J0IF90IGZyb20gXCIuLi8uLi8uLi9jb3JlL2kxOG4td3JhcHBlclwiO1xuICAgIGltcG9ydCBVcGxvYWQgZnJvbSBcIi4uLy4uL3VwbG9hZC91cGxvYWRcIjtcbiAgICBpbXBvcnQgY29udGVudFN0b3JlIGZyb20gXCIuL0NvbnRlbnRTdG9yZVwiO1xuICAgIGltcG9ydCB7XG4gICAgICAgIGNsaWNrT3V0c2lkZSxcbiAgICAgICAgZ2V0X2l0ZW1zX2Zyb21fdWlkcyxcbiAgICAgICAgcmVxdWVzdCxcbiAgICAgICAgcmVzb2x2ZUljb24sXG4gICAgICAgIHVwZGF0ZVJlY2VudGx5VXNlZCxcbiAgICB9IGZyb20gXCIuL3V0aWxzXCI7XG4gICAgaW1wb3J0IEZhdm9yaXRlcyBmcm9tIFwiLi9GYXZvcml0ZXMuc3ZlbHRlXCI7XG4gICAgaW1wb3J0IFJlY2VudGx5VXNlZCBmcm9tIFwiLi9SZWNlbnRseVVzZWQuc3ZlbHRlXCI7XG5cbiAgICBhbmltYXRlU2Nyb2xsLnNldEdsb2JhbE9wdGlvbnMoe1xuICAgICAgICBzY3JvbGxYOiB0cnVlLFxuICAgICAgICBjb250YWluZXI6IFwiLmxldmVsQ29sdW1uc1wiLFxuICAgICAgICBkdXJhdGlvbjogNTAwLFxuICAgIH0pO1xuXG4gICAgLy8gZ2V0IGNvbnRleHQgc3RvcmVzXG4gICAgY29uc3QgY3VycmVudFBhdGggPSBnZXRDb250ZXh0KFwiY3VycmVudFBhdGhcIik7XG4gICAgY29uc3QgY29uZmlnID0gZ2V0Q29udGV4dChcImNvbmZpZ1wiKTtcbiAgICBjb25zdCBwYXRoQ2FjaGUgPSBnZXRDb250ZXh0KFwicGF0aENhY2hlXCIpO1xuICAgIGNvbnN0IHNob3dDb250ZW50QnJvd3NlciA9IGdldENvbnRleHQoXCJzaG93Q29udGVudEJyb3dzZXJcIik7XG4gICAgY29uc3Qgc2VsZWN0ZWRJdGVtcyA9IGdldENvbnRleHQoXCJzZWxlY3RlZEl0ZW1zXCIpO1xuICAgIGNvbnN0IHNlbGVjdGVkVWlkcyA9IGdldENvbnRleHQoXCJzZWxlY3RlZFVpZHNcIik7XG4gICAgY29uc3QgcHJldmlld1VpZHMgPSBnZXRDb250ZXh0KFwicHJldmlld1VpZHNcIik7XG5cbiAgICAvLyBpbml0aWFsaXplIGNvbnRlbnQgYnJvd3NlciBzdG9yZVxuICAgIGNvbnN0IGNvbnRlbnRJdGVtcyA9IGNvbnRlbnRTdG9yZSgkY29uZmlnLCBwYXRoQ2FjaGUpO1xuXG4gICAgbGV0IHNob3dVcGxvYWQgPSBmYWxzZTtcbiAgICBsZXQgcHJldmlld0l0ZW0gPSB7fTtcbiAgICBsZXQga2V5Ym9hcmROYXZJbml0aWFsaXplZCA9IGZhbHNlO1xuICAgIGxldCBzaGlmdEtleSA9IGZhbHNlO1xuXG4gICAgbGV0IHZ3ID0gTWF0aC5tYXgoZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudFdpZHRoIHx8IDAsIHdpbmRvdy5pbm5lcldpZHRoIHx8IDApO1xuXG4gICAgZnVuY3Rpb24gdXBkYXRlUHJldmlldyh7IGRhdGEgPSBudWxsLCB1dWlkID0gbnVsbCwgYWN0aW9uID0gXCJzaG93XCIgfSkge1xuICAgICAgICBpZiAoZGF0YSAmJiBhY3Rpb24gPT0gXCJzaG93XCIpIHtcbiAgICAgICAgICAgIHByZXZpZXdJdGVtID0gZGF0YTtcbiAgICAgICAgICAgICRwcmV2aWV3VWlkcyA9IFtkYXRhLlVJRF07XG4gICAgICAgIH0gZWxzZSBpZiAodXVpZCAmJiBhY3Rpb24gPT0gXCJhZGRcIiAmJiAkcHJldmlld1VpZHMuaW5kZXhPZih1dWlkKSA9PT0gLTEpIHtcbiAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAkY29uZmlnLm1heGltdW1TZWxlY3Rpb25TaXplID4gMCAmJlxuICAgICAgICAgICAgICAgICRwcmV2aWV3VWlkcy5sZW5ndGggPj0gJGNvbmZpZy5tYXhpbXVtU2VsZWN0aW9uU2l6ZVxuICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgLy8gcmVzcGVjdCBtYXhpbXVtU2VsZWN0aW9uU2l6ZVxuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgICRwcmV2aWV3VWlkcyA9IFsuLi4kcHJldmlld1VpZHMsIHV1aWRdOyAvLyBOT1RFOiAkcHJldmlld1VpZHMucHVzaCgpIGlzIG5vdCBhIHJlYWN0aXZlIGNoYW5nZVxuICAgICAgICB9IGVsc2UgaWYgKHV1aWQgJiYgYWN0aW9uID09IFwicmVtb3ZlXCIgJiYgJHByZXZpZXdVaWRzLmluZGV4T2YodXVpZCkgIT09IC0xKSB7XG4gICAgICAgICAgICBwcmV2aWV3VWlkcy51cGRhdGUoKG4pID0+IHtcbiAgICAgICAgICAgICAgICBuLnNwbGljZShuLmluZGV4T2YodXVpZCksIDEpO1xuICAgICAgICAgICAgICAgIHJldHVybiBuO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0gZWxzZSBpZiAoYWN0aW9uID09IFwiY2xlYXJcIikge1xuICAgICAgICAgICAgcHJldmlld0l0ZW0gPSB7fTtcbiAgICAgICAgICAgICRwcmV2aWV3VWlkcyA9IFtdO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgYXN5bmMgZnVuY3Rpb24gdXBsb2FkKCkge1xuICAgICAgICB1cGRhdGVQcmV2aWV3KHsgYWN0aW9uOiBcImNsZWFyXCIgfSk7XG4gICAgICAgIHNob3dVcGxvYWQgPSB0cnVlO1xuICAgICAgICBhd2FpdCB1dGlscy50aW1lb3V0KDEpO1xuICAgICAgICBjb25zdCB1cGxvYWRFbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIudXBsb2FkLXdyYXBwZXJcIik7XG4gICAgICAgIHVwbG9hZEVsLmNsYXNzTGlzdC5hZGQoXCJwYXQtdXBsb2FkXCIpO1xuICAgICAgICBjb25zdCBwYXRVcGxvYWQgPSBuZXcgVXBsb2FkKHVwbG9hZEVsLCB7XG4gICAgICAgICAgICBiYXNlVXJsOiAkY29uZmlnLnJvb3RVcmwsXG4gICAgICAgICAgICBjdXJyZW50UGF0aDogJGN1cnJlbnRQYXRoLFxuICAgICAgICAgICAgcmVsYXRpdmVQYXRoOiBcIkBAZmlsZVVwbG9hZFwiLFxuICAgICAgICAgICAgYWxsb3dQYXRoU2VsZWN0aW9uOiBmYWxzZSxcbiAgICAgICAgICAgIGhpZGRlbklucHV0Q29udGFpbmVyOiBcIi51cGxvYWQtd3JhcHBlclwiLFxuICAgICAgICAgICAgc3VjY2VzczogKGZpbGVVcGxvYWQsIG9iaikgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnRlbnRJdGVtcy5nZXQoeyBwYXRoOiAkY3VycmVudFBhdGgsIHVwZGF0ZUNhY2hlOiB0cnVlIH0pO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gc2hvd1ByZXZpZXcoaXRlbSkge1xuICAgICAgICBpZiAoJGNvbmZpZy5tb2RlID09IFwic2VhcmNoXCIpIHtcbiAgICAgICAgICAgIC8vIG9uZSBsZXZlbCBzZWFyY2ggbW9kZVxuICAgICAgICAgICAgdXBkYXRlUHJldmlldyh7IGRhdGE6IGl0ZW0gfSk7XG4gICAgICAgIH0gZWxzZSBpZiAoaXRlbS5pc19mb2xkZXJpc2gpIHtcbiAgICAgICAgICAgICRwcmV2aWV3VWlkcyA9IFtpdGVtLlVJRF07XG4gICAgICAgICAgICBjdXJyZW50UGF0aC5zZXQoaXRlbS5wYXRoKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IHBhdGhQYXJ0cyA9IGl0ZW0ucGF0aC5zcGxpdChcIi9cIik7XG4gICAgICAgICAgICBjb25zdCBmb2xkZXJQYXRoID0gcGF0aFBhcnRzLnNsaWNlKDAsIHBhdGhQYXJ0cy5sZW5ndGggLSAxKS5qb2luKFwiL1wiKTtcbiAgICAgICAgICAgIGN1cnJlbnRQYXRoLnNldChmb2xkZXJQYXRoIHx8ICRjb25maWcucm9vdFBhdGgpO1xuICAgICAgICAgICAgdXBkYXRlUHJldmlldyh7IGRhdGE6IGl0ZW0gfSk7XG4gICAgICAgIH1cbiAgICAgICAgc2Nyb2xsVG9SaWdodCgpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGNoYW5nZVBhdGgoaXRlbSwgZSkge1xuICAgICAgICAvLyBhbHdheXMgaGlkZSB1cGxvYWQgd2hlbiBjaGFuZ2luZyBwYXRoXG4gICAgICAgIHNob3dVcGxvYWQgPSBmYWxzZTtcblxuICAgICAgICAvLyBjbGVhciBwcmV2aW91cyBzZWxlY3Rpb25cbiAgICAgICAgdXBkYXRlUHJldmlldyh7IGFjdGlvbjogXCJjbGVhclwiIH0pO1xuXG4gICAgICAgIGlmIChpdGVtID09PSBcIi9cIiB8fCBpdGVtID09PSAkY29uZmlnLnJvb3RQYXRoKSB7XG4gICAgICAgICAgICAvLyBjbGlja2VkIFwiaG9tZVwiIGJ1dHRvblxuICAgICAgICAgICAgY3VycmVudFBhdGguc2V0KCRjb25maWcucm9vdFBhdGgpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gc2hvdyBjbGlja2VkIGl0ZW1cbiAgICAgICAgc2hvd1ByZXZpZXcoaXRlbSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gY2xpY2tJdGVtKGl0ZW0sIGUpIHtcbiAgICAgICAgaWYgKCFrZXlib2FyZE5hdkluaXRpYWxpemVkKSB7XG4gICAgICAgICAgICAvLyBpZiB3ZSd2ZSBhbHJlYWR5IGNsaWNrZWQgYW4gZWxlbWVudCB3aXRoIHRoZSBtb3VzZVxuICAgICAgICAgICAgLy8gZG8gbm90IHN0YXJ0IG92ZXIga2V5Ym9hcmRuYXZcbiAgICAgICAgICAgIGtleWJvYXJkTmF2SW5pdGlhbGl6ZWQgPSB0cnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gY2hlY2sgZm9yIG11bHRpc2VsZWN0aW9uXG4gICAgICAgIGNvbnN0IGxldmVsV3JhcHBlciA9IGUuY3VycmVudFRhcmdldC5jbG9zZXN0KFwiLmxldmVsSXRlbXNcIik7XG4gICAgICAgIGNvbnN0IHByZXZTZWxlY3Rpb24gPSBsZXZlbFdyYXBwZXIucXVlcnlTZWxlY3RvckFsbChcIi5zZWxlY3RlZEl0ZW1cIik7XG5cbiAgICAgICAgaWYgKHByZXZTZWxlY3Rpb24ubGVuZ3RoICYmICRjb25maWcubWF4aW11bVNlbGVjdGlvblNpemUgIT0gMSkge1xuICAgICAgICAgICAgLy8gY2hlY2sgZm9yIHByZXNzZWQgc2hpZnQgb3IgY3RybC9tZXRhIGtleSBmb3IgbXVsdGlzZWxlY3Rpb25cblxuICAgICAgICAgICAgaWYgKHNoaWZ0S2V5IHx8IGU/LnNoaWZ0S2V5KSB7XG4gICAgICAgICAgICAgICAgLy8gaXRlciB0aHJvdWdoIHRoZSB3cmFwcGVyIGNoaWxkcmVuIGFuZCBzZWxlY3QgYWxsXG4gICAgICAgICAgICAgICAgLy8gaW5iZXR3ZWVuIGN1cnJlbnQgc2VsZWN0aW9uIGFuZCBsYXN0IHByZXZpZXdcbiAgICAgICAgICAgICAgICBsZXQgc2VsZWN0ID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBlbCBvZiBsZXZlbFdyYXBwZXIuY2hpbGRyZW4pIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKFtpdGVtLlVJRCwgcHJldmlld0l0ZW0uVUlEXS5pbmRleE9mKGVsLmRhdGFzZXQudXVpZCkgIT09IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoc2VsZWN0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gc3RvcCBzZWxlY3RpbmcgYnV0IG1ha2Ugc3VyZSB0aGUgbGFzdCBpdGVtIGlzIHNlbGVjdGVkIHRvb1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVwZGF0ZVByZXZpZXcoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1dWlkOiBlbC5kYXRhc2V0LnV1aWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjdGlvbjogXCJhZGRcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxlY3QgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHN0YXJ0IHNlbGVjdGluZ1xuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZWN0ID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB1cGRhdGVQcmV2aWV3KHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHV1aWQ6IGVsLmRhdGFzZXQudXVpZCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGFjdGlvbjogc2VsZWN0ID8gXCJhZGRcIiA6IFwicmVtb3ZlXCIsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZT8ubWV0YUtleSB8fCBlPy5jdHJsS2V5KSB7XG4gICAgICAgICAgICAgICAgLy8gZGUvc2VsZWN0IG11bHRpcGxlIHNpbmdsZSBpdGVtc1xuICAgICAgICAgICAgICAgIC8vIE5PVEU6IG9ubHkgZm9yIG1vdXNlIGNsaWNrIGV2ZW50XG4gICAgICAgICAgICAgICAgdXBkYXRlUHJldmlldyh7XG4gICAgICAgICAgICAgICAgICAgIHV1aWQ6IGl0ZW0uVUlELFxuICAgICAgICAgICAgICAgICAgICBhY3Rpb246ICRwcmV2aWV3VWlkcy5pbmRleE9mKGl0ZW0uVUlEKSA9PSAtMSA/IFwiYWRkXCIgOiBcInJlbW92ZVwiLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyB1bnNlbGVjdFxuICAgICAgICAgICAgICAgIFsuLi5wcmV2U2VsZWN0aW9uXS5tYXAoKGVsKSA9PiBlbC5jbGFzc0xpc3QucmVtb3ZlKFwic2VsZWN0ZWRJdGVtXCIpKTtcbiAgICAgICAgICAgICAgICBjaGFuZ2VQYXRoKGl0ZW0sIGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY2hhbmdlUGF0aChpdGVtLCBlKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGUuY3VycmVudFRhcmdldC5mb2N1cygpOyAvLyBuZWVkZWQgZm9yIGtleWJvYXJkIG5hdmlnYXRpb25cbiAgICAgICAgZS5jdXJyZW50VGFyZ2V0LmNsYXNzTGlzdC5hZGQoXCJzZWxlY3RlZEl0ZW1cIik7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gaW5pdEtleWJvYXJkTmF2KCkge1xuICAgICAgICAvLyBmb2N1cyBmaXJzdCBlbGVtZW50IHdoZW4gc2hvd2luZyBjb250ZW50YnJvd3NlclxuICAgICAgICBpZiAoa2V5Ym9hcmROYXZJbml0aWFsaXplZCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHBvc3NpYmxlRm9jdXNFbHMgPSBbXG4gICAgICAgICAgICAuLi5kb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLmxldmVsQ29sdW1uIC5pblBhdGhcIiksIC8vIHByZXZpb3VzbHkgc2VsZWN0ZWQgZm9sZGVyXG4gICAgICAgICAgICAuLi5kb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLmxldmVsQ29sdW1uIC5zZWxlY3RlZEl0ZW1cIiksIC8vIHByZXZpb3VzbHkgc2VsZWN0ZWQgaXRlbVxuICAgICAgICBdO1xuICAgICAgICBpZighcG9zc2libGVGb2N1c0Vscy5sZW5ndGggJiYgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5sZXZlbENvbHVtbiAuY29udGVudEl0ZW1cIikpIHtcbiAgICAgICAgICAgIHBvc3NpYmxlRm9jdXNFbHMucHVzaChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmxldmVsQ29sdW1uIC5jb250ZW50SXRlbVwiKSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHBvc3NpYmxlRm9jdXNFbHMubGVuZ3RoKSB7XG4gICAgICAgICAgICBrZXlib2FyZE5hdkluaXRpYWxpemVkID0gdHJ1ZTtcbiAgICAgICAgICAgIHBvc3NpYmxlRm9jdXNFbHNbMF0uZm9jdXMoKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGtleWJvYXJkTmF2aWdhdGlvbihpdGVtLCBlKSB7XG4gICAgICAgIGNvbnN0IG5vZGUgPSBlLmN1cnJlbnRUYXJnZXQ7XG4gICAgICAgIHNoaWZ0S2V5ID0gZS5zaGlmdEtleTtcbiAgICAgICAgaWYgKGUua2V5ID09IFwiRXNjYXBlXCIpIHtcbiAgICAgICAgICAgIGNhbmNlbFNlbGVjdGlvbigpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChcbiAgICAgICAgICAgIGUua2V5ID09IFwiQXJyb3dEb3duXCIgJiZcbiAgICAgICAgICAgIG5vZGU/Lm5leHRFbGVtZW50U2libGluZz8uY2xhc3NMaXN0LmNvbnRhaW5zKFwiY29udGVudEl0ZW1cIilcbiAgICAgICAgKSB7XG4gICAgICAgICAgICBub2RlLm5leHRFbGVtZW50U2libGluZy5jbGljaygpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChcbiAgICAgICAgICAgIGUua2V5ID09IFwiQXJyb3dVcFwiICYmXG4gICAgICAgICAgICBub2RlPy5wcmV2aW91c0VsZW1lbnRTaWJsaW5nPy5jbGFzc0xpc3QuY29udGFpbnMoXCJjb250ZW50SXRlbVwiKVxuICAgICAgICApIHtcbiAgICAgICAgICAgIG5vZGUucHJldmlvdXNFbGVtZW50U2libGluZy5jbGljaygpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChlLmtleSA9PSBcIkFycm93UmlnaHRcIikge1xuICAgICAgICAgICAgY29uc3QgY3VyckNvbCA9IGUudGFyZ2V0LmNsb3Nlc3QoXCIubGV2ZWxDb2x1bW5cIik7XG4gICAgICAgICAgICBjb25zdCBueHRDb2wgPSBjdXJyQ29sPy5uZXh0RWxlbWVudFNpYmxpbmc7XG4gICAgICAgICAgICBpZiAoIW54dENvbCB8fCAhbnh0Q29sLmNsYXNzTGlzdC5jb250YWlucyhcImxldmVsQ29sdW1uXCIpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbnh0Q29sLnF1ZXJ5U2VsZWN0b3IoXCIuY29udGVudEl0ZW1cIik/LmNsaWNrKCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGUua2V5ID09IFwiQXJyb3dMZWZ0XCIpIHtcbiAgICAgICAgICAgIGNvbnN0IGN1cnJDb2wgPSBlLnRhcmdldC5jbG9zZXN0KFwiLmxldmVsQ29sdW1uXCIpO1xuICAgICAgICAgICAgY29uc3QgcHJldkNvbCA9IGN1cnJDb2w/LnByZXZpb3VzRWxlbWVudFNpYmxpbmc7XG4gICAgICAgICAgICBpZiAoIXByZXZDb2wgfHwgIXByZXZDb2wuY2xhc3NMaXN0LmNvbnRhaW5zKFwibGV2ZWxDb2x1bW5cIikpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBwcmV2Q29sLnF1ZXJ5U2VsZWN0b3IoXCIuaW5QYXRoXCIpLmNsaWNrKCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGUua2V5ID09IFwiU3BhY2VcIikge1xuICAgICAgICAgICAgLy8gYWRkIGl0ZW0gdG8gc2VsZWN0aW9uIChsaWtlIG1ldGFLZXkgKyBjbGljaylcbiAgICAgICAgICAgIGNsaWNrSXRlbShpdGVtLCBlLCB0cnVlKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZS5rZXkgPT0gXCJFbnRlclwiKSB7XG4gICAgICAgICAgICBpZiAoaXNTZWxlY3RhYmxlKGl0ZW0pKSB7XG4gICAgICAgICAgICAgICAgaWYgKCRjb25maWcubWF4aW11bVNlbGVjdGlvblNpemUgPT0gMSkge1xuICAgICAgICAgICAgICAgICAgICBhZGRJdGVtKGl0ZW0pO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGFkZFNlbGVjdGVkSXRlbXMoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBhc3luYyBmdW5jdGlvbiBhZGRJdGVtKGl0ZW0pIHtcbiAgICAgICAgaWYgKCRjb25maWcubWF4aW11bVNlbGVjdGlvblNpemUgPT0gMSkge1xuICAgICAgICAgICAgc2VsZWN0ZWRJdGVtcy5zZXQoW2l0ZW1dKTtcbiAgICAgICAgICAgIHNlbGVjdGVkVWlkcy5zZXQoW2l0ZW0uVUlEXSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBzZWxlY3RlZEl0ZW1zLnVwZGF0ZSgobikgPT4gWy4uLm4sIGl0ZW1dKTtcbiAgICAgICAgICAgIHNlbGVjdGVkVWlkcy51cGRhdGUoKCkgPT4gJHNlbGVjdGVkSXRlbXMubWFwKCh4KSA9PiB4LlVJRCkpO1xuICAgICAgICB9XG4gICAgICAgIHVwZGF0ZVJlY2VudGx5VXNlZChpdGVtLCAkY29uZmlnKTtcbiAgICAgICAgdXBkYXRlUHJldmlldyh7IGFjdGlvbjogXCJjbGVhclwiIH0pO1xuICAgICAgICAkc2hvd0NvbnRlbnRCcm93c2VyID0gZmFsc2U7XG4gICAgICAgIGtleWJvYXJkTmF2SW5pdGlhbGl6ZWQgPSBmYWxzZTtcbiAgICB9XG5cbiAgICBhc3luYyBmdW5jdGlvbiBhZGRTZWxlY3RlZEl0ZW1zKCkge1xuICAgICAgICBjb25zdCBwcmV2aWV3SXRlbXMgPSBhd2FpdCBnZXRfaXRlbXNfZnJvbV91aWRzKCRwcmV2aWV3VWlkcywgJGNvbmZpZyk7XG4gICAgICAgIHNlbGVjdGVkSXRlbXMudXBkYXRlKChuKSA9PiB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGl0IG9mIHByZXZpZXdJdGVtcykge1xuICAgICAgICAgICAgICAgIGlmICgkc2VsZWN0ZWRVaWRzLmluZGV4T2YoaXQuVUlEKSAhPSAtMSkgY29udGludWU7XG4gICAgICAgICAgICAgICAgbi5wdXNoKGl0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBuO1xuICAgICAgICB9KTtcbiAgICAgICAgc2VsZWN0ZWRVaWRzLnVwZGF0ZSgoKSA9PiAkc2VsZWN0ZWRJdGVtcy5tYXAoKHgpID0+IHguVUlEKSk7XG4gICAgICAgIHVwZGF0ZVByZXZpZXcoeyBhY3Rpb246IFwiY2xlYXJcIiB9KTtcbiAgICAgICAgJHNob3dDb250ZW50QnJvd3NlciA9IGZhbHNlO1xuICAgICAgICBrZXlib2FyZE5hdkluaXRpYWxpemVkID0gZmFsc2U7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gc2VsZWN0UmVjZW50bHlVc2VkKGV2ZW50KSB7XG4gICAgICAgIGFkZEl0ZW0oZXZlbnQuZGV0YWlsLml0ZW0pO1xuICAgIH1cblxuICAgIGFzeW5jIGZ1bmN0aW9uIHNlbGVjdEZhdm9yaXRlKGV2ZW50KSB7XG4gICAgICAgIGNvbnN0IHBhdGggPSBldmVudC5kZXRhaWwuaXRlbS5wYXRoO1xuICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHJlcXVlc3Qoe1xuICAgICAgICAgICAgdm9jYWJ1bGFyeVVybDogJGNvbmZpZy52b2NhYnVsYXJ5VXJsLFxuICAgICAgICAgICAgYXR0cmlidXRlczogJGNvbmZpZy5hdHRyaWJ1dGVzLFxuICAgICAgICAgICAgbGV2ZWxJbmZvUGF0aDogcGF0aCxcbiAgICAgICAgfSk7XG4gICAgICAgIGlmICghcmVzcG9uc2UudG90YWwpIHtcbiAgICAgICAgICAgIGFsZXJ0KGAke3BhdGh9IG5vdCBmb3VuZCFgKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBpdGVtID0gcmVzcG9uc2UucmVzdWx0c1swXTtcbiAgICAgICAgaWYgKCFpdGVtLnBhdGgpIHtcbiAgICAgICAgICAgIC8vIGZpeCBmb3Igcm9vdFxuICAgICAgICAgICAgaXRlbS5wYXRoID0gJGNvbmZpZy5yb290UGF0aDtcbiAgICAgICAgfVxuICAgICAgICBjaGFuZ2VQYXRoKGl0ZW0pO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGNhbmNlbFNlbGVjdGlvbigpIHtcbiAgICAgICAgJHNob3dDb250ZW50QnJvd3NlciA9IGZhbHNlO1xuICAgICAgICBrZXlib2FyZE5hdkluaXRpYWxpemVkID0gZmFsc2U7XG4gICAgICAgIHVwZGF0ZVByZXZpZXcoeyBhY3Rpb246IFwiY2xlYXJcIiB9KTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBpc1NlbGVjdGFibGUoaXRlbSkge1xuICAgICAgICByZXR1cm4gJHNlbGVjdGVkVWlkcy5pbmRleE9mKGl0ZW0uVUlEKSA9PT0gLTE7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gc2Nyb2xsVG9SaWdodCgpIHtcbiAgICAgICAgY29uc3Qgc2Nyb2xsQ29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5sZXZlbENvbHVtbnNcIik7XG4gICAgICAgIGlmIChzY3JvbGxDb250YWluZXIpIHtcbiAgICAgICAgICAgIGFuaW1hdGVTY3JvbGwuc2Nyb2xsVG8oe1xuICAgICAgICAgICAgICAgIC8vIGVsZW1lbnQ6IFwiLmxldmVsQ29sdW1uOmxhc3QtY2hpbGRcIixcbiAgICAgICAgICAgICAgICB4OiBzY3JvbGxDb250YWluZXIuc2Nyb2xsV2lkdGggKyAxMDAsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGl0ZW1JblBhdGgoaXRlbSkge1xuICAgICAgICByZXR1cm4gJGNvbmZpZy5tb2RlID09IFwiYnJvd3NlXCIgJiYgJGN1cnJlbnRQYXRoLmluZGV4T2YoaXRlbS5wYXRoKSAhPSAtMTtcbiAgICB9XG5cbiAgICBjb25zdCBmaWx0ZXJJdGVtcyA9IHV0aWxzLmRlYm91bmNlKChlKSA9PiB7XG4gICAgICAgIGNvbnRlbnRJdGVtcy5nZXQoeyBwYXRoOiAkY3VycmVudFBhdGgsIHNlYXJjaFRlcm06IGUudGFyZ2V0LnZhbHVlIH0pO1xuICAgIH0sIDMwMCk7XG5cbiAgICBmdW5jdGlvbiBsb2FkTW9yZShub2RlKSB7XG4gICAgICAgIGNvbnN0IG9ic2VydmVyID0gbmV3IEludGVyc2VjdGlvbk9ic2VydmVyKFxuICAgICAgICAgICAgKGVudHJpZXMpID0+IHtcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGVudHJ5IG9mIGVudHJpZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGVudHJ5LmlzSW50ZXJzZWN0aW5nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBwYXRoID0gbm9kZS5kYXRhc2V0LmxldmVsUGF0aDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHBhZ2UgPSBwYXJzZUludChub2RlLmRhdGFzZXQubGV2ZWxOZXh0UGFnZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50SXRlbXMuZ2V0KHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2FkTW9yZVBhdGg6IHBhdGgsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFnZTogcGFnZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHsgdGhyZXNob2xkOiAwLCByb290OiBudWxsLCBtYXJnaW46IFwiMHB4XCIgfSxcbiAgICAgICAgKTtcbiAgICAgICAgLy8gZGVmZXIgb2JzZXJ2aW5nXG4gICAgICAgIHdpbmRvdy5zZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgIG9ic2VydmVyLm9ic2VydmUobm9kZSk7XG4gICAgICAgIH0sIDUwMCk7XG4gICAgfVxuXG4gICAgJDoge1xuICAgICAgICBpZiAoJHNob3dDb250ZW50QnJvd3Nlcikge1xuICAgICAgICAgICAgY29udGVudEl0ZW1zLmdldCh7IHBhdGg6ICRjdXJyZW50UGF0aCB9KTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgICQ6IHtcbiAgICAgICAgJGNvbnRlbnRJdGVtcztcbiAgICAgICAgc2Nyb2xsVG9SaWdodCgpO1xuICAgIH1cblxuICAgICQ6IHtcbiAgICAgICAgJHByZXZpZXdVaWRzO1xuICAgIH1cbjwvc2NyaXB0PlxuXG57I2lmICRzaG93Q29udGVudEJyb3dzZXJ9XG4gICAgPGRpdiBjbGFzcz1cImNvbnRlbnQtYnJvd3Nlci1wb3NpdGlvbi13cmFwcGVyXCI+XG4gICAgICAgIDxuYXZcbiAgICAgICAgICAgIGNsYXNzPVwiY29udGVudC1icm93c2VyXCJcbiAgICAgICAgICAgIHRyYW5zaXRpb246Zmx5PXt7IHg6ICh2dyAvIDEwMCkgKiA5NCwgb3BhY2l0eTogMSB9fVxuICAgICAgICAgICAgb246aW50cm9lbmQ9eygpID0+IHtcbiAgICAgICAgICAgICAgICBzY3JvbGxUb1JpZ2h0KCk7XG4gICAgICAgICAgICAgICAgaW5pdEtleWJvYXJkTmF2KCk7XG4gICAgICAgICAgICB9fVxuICAgICAgICAgICAgdXNlOmNsaWNrT3V0c2lkZVxuICAgICAgICAgICAgb246Y2xpY2tfb3V0c2lkZT17Y2FuY2VsU2VsZWN0aW9ufVxuICAgICAgICA+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwidG9vbEJhciBuYXZiYXJcIj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZmlsdGVyIG1lLTNcIj5cbiAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9XCJ0ZXh0XCIgbmFtZT1cImZpbHRlclwiIG9uOmlucHV0PXtmaWx0ZXJJdGVtc30gLz5cbiAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGZvcj1cImZpbHRlclwiXG4gICAgICAgICAgICAgICAgICAgICAgICA+PHN2ZyB1c2U6cmVzb2x2ZUljb249e3sgaWNvbk5hbWU6IFwic2VhcmNoXCIgfX0gLz48L2xhYmVsXG4gICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8UmVjZW50bHlVc2VkIG9uOnNlbGVjdEl0ZW09e3NlbGVjdFJlY2VudGx5VXNlZH0gLz5cbiAgICAgICAgICAgICAgICA8RmF2b3JpdGVzIG9uOnNlbGVjdEl0ZW09e3NlbGVjdEZhdm9yaXRlfSAvPlxuICAgICAgICAgICAgICAgIHsjaWYgJGNvbmZpZy51cGxvYWRFbmFibGVkfVxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwibXMtMlwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU9XCJidXR0b25cIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzPVwidXBsb2FkIGJ0biBidG4tb3V0bGluZS1saWdodCBidG4tc21cIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhYmluZGV4PVwiMFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb246a2V5ZG93bj17dXBsb2FkfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uOmNsaWNrPXt1cGxvYWR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPjxzdmcgdXNlOnJlc29sdmVJY29uPXt7IGljb25OYW1lOiBcInVwbG9hZFwiIH19IC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge190KFwidXBsb2FkIHRvICR7Y3VycmVudF9wYXRofVwiLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRfcGF0aDogJGN1cnJlbnRQYXRoLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pfTwvYnV0dG9uXG4gICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIHsvaWZ9XG4gICAgICAgICAgICAgICAgPGJ1dHRvblxuICAgICAgICAgICAgICAgICAgICBjbGFzcz1cImJ0biBidG4tbGluayB0ZXh0LXdoaXRlIG1zLWF1dG9cIlxuICAgICAgICAgICAgICAgICAgICB0YWJpbmRleD1cIjBcIlxuICAgICAgICAgICAgICAgICAgICBvbjpjbGlja3xwcmV2ZW50RGVmYXVsdD17KCkgPT4gY2FuY2VsU2VsZWN0aW9uKCl9XG4gICAgICAgICAgICAgICAgICAgID48c3ZnIHVzZTpyZXNvbHZlSWNvbj17eyBpY29uTmFtZTogXCJ4LWNpcmNsZVwiIH19IC8+PC9idXR0b25cbiAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIHsjYXdhaXQgJGNvbnRlbnRJdGVtc31cbiAgICAgICAgICAgICAgICA8cD57X3QoXCJsb2FkaW5nIGNvbnRlbnQgaXRlbXNcIil9PC9wPlxuICAgICAgICAgICAgezp0aGVuIGxldmVsc31cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwibGV2ZWxDb2x1bW5zXCI+XG4gICAgICAgICAgICAgICAgICAgIHsjZWFjaCBsZXZlbHMgYXMgbGV2ZWwsIGkgKGxldmVsLnBhdGgpfVxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzPVwibGV2ZWxDb2x1bW57aSAlIDIgPT0gMCA/ICcgb2RkJyA6ICcgZXZlbid9XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbjpmbHl8bG9jYWw9e3sgZHVyYXRpb246IDMwMCB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJsZXZlbFRvb2xiYXJcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeyNpZiBpID09IDAgJiYgJGNvbmZpZy5tb2RlID09IFwiYnJvd3NlXCJ9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZT1cImJ1dHRvblwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3M9XCJidG4gYnRuLWxpbmsgYnRuLXhzIHBzLTBcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhYmluZGV4PVwiMFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb246a2V5ZG93bj17KCkgPT4gY2hhbmdlUGF0aCgkY29uZmlnLnJvb3RQYXRoKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbjpjbGljaz17KCkgPT4gY2hhbmdlUGF0aCgkY29uZmlnLnJvb3RQYXRoKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+PHN2Z1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1c2U6cmVzb2x2ZUljb249e3sgaWNvbk5hbWU6IFwiaG91c2VcIiB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+PC9idXR0b25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgey9pZn1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeyNpZiBsZXZlbC5zZWxlY3RhYmxlfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzPVwiYnRuIGJ0bi1wcmltYXJ5IGJ0bi14c1wiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU9XCJ7bGV2ZWwuZGlzcGxheVBhdGh9XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaXNhYmxlZD17IWlzU2VsZWN0YWJsZShsZXZlbCl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb246Y2xpY2t8cHJldmVudERlZmF1bHQ9eygpID0+IGFkZEl0ZW0obGV2ZWwpfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtfdChcInNlbGVjdCAke2xldmVsX3BhdGh9XCIsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV2ZWxfcGF0aDogbGV2ZWwuVGl0bGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgey9pZn1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImxldmVsQWN0aW9uc1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeyNpZiAhbGV2ZWwuZ3JpZFZpZXd9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzcz1cImJ0biBidG4tbGluayBidG4teHMgZ3JpZC12aWV3XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb246Y2xpY2s9eygpID0+IChsZXZlbC5ncmlkVmlldyA9IHRydWUpfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHN2Z1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXNlOnJlc29sdmVJY29uPXt7IGljb25OYW1lOiBcImdyaWRcIiB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgezplbHNlfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3M9XCJidG4gYnRuLWxpbmsgYnRuLXhzIGdyaWQtdmlld1wiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uOmNsaWNrPXsoKSA9PiAobGV2ZWwuZ3JpZFZpZXcgPSBmYWxzZSl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3ZnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1c2U6cmVzb2x2ZUljb249e3sgaWNvbk5hbWU6IFwibGlzdFwiIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7L2lmfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwibGV2ZWxJdGVtc1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7I2VhY2ggbGV2ZWwucmVzdWx0cyB8fCBbXSBhcyBpdGVtLCBufVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPCEtLSBzdmVsdGUtaWdub3JlIG1pc3NpbmctZGVjbGFyYXRpb24gLS0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3M9XCJjb250ZW50SXRlbXtuICUgMiA9PSAwXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gJyBvZGQnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogJyBldmVuJ317aXRlbUluUGF0aChpdGVtKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/ICcgaW5QYXRoJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6ICcnfXskcHJldmlld1VpZHMuaW5kZXhPZihpdGVtLlVJRCkgIT0gLTFcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyAnIHNlbGVjdGVkSXRlbSdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiAnJ317IWlzU2VsZWN0YWJsZShpdGVtKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/ICcgdGV4dC1tdXRlZCdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiAnJ31cIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvbGU9XCJidXR0b25cIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhYmluZGV4PXtufVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEtdXVpZD17aXRlbS5VSUR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb246a2V5ZG93bnxwcmV2ZW50RGVmYXVsdD17KGUpID0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleWJvYXJkTmF2aWdhdGlvbihpdGVtLCBlKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbjpjbGljaz17KGUpID0+IGNsaWNrSXRlbShpdGVtLCBlKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7I2lmIGxldmVsLmdyaWRWaWV3fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZ3JpZC1wcmV2aWV3XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7I2lmIGl0ZW0uZ2V0SWNvbn1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW1nXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNyYz17YCR7aXRlbS5nZXRVUkx9L0BAaW1hZ2VzL2ltYWdlL3RodW1iYH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWx0PXtpdGVtLlRpdGxlfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7OmVsc2V9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHN2Z1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1c2U6cmVzb2x2ZUljb249e3tcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGljb25OYW1lOiBgY29udGVudHR5cGUvJHtpdGVtLnBvcnRhbF90eXBlLnRvTG93ZXJDYXNlKCkucmVwbGFjZSgvXFwufCAvZywgXCItXCIpfWAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsvaWZ9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7aXRlbS5UaXRsZX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgezplbHNlfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzcz1cIml0ZW0tdGl0bGVcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU9XCJ7aXRlbS5wb3J0YWxfdHlwZX06IHtpdGVtLlRpdGxlfVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzdmdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1c2U6cmVzb2x2ZUljb249e3tcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWNvbk5hbWU6IGBjb250ZW50dHlwZS8ke2l0ZW0ucG9ydGFsX3R5cGUudG9Mb3dlckNhc2UoKS5yZXBsYWNlKC9cXC58IC9nLCBcIi1cIil9YCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtpdGVtLlRpdGxlfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeyNpZiAkY29uZmlnLm1vZGUgPT0gXCJzZWFyY2hcIn1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxicj48c3BhbiBjbGFzcz1cInNtYWxsXCI+e2l0ZW0ucGF0aH08L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7L2lmfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7L2lmfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsjaWYgaXRlbS5pc19mb2xkZXJpc2ggJiYgJGNvbmZpZy5tb2RlID09IFwiYnJvd3NlXCJ9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJicm93c2VTdWJcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzdmdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1c2U6cmVzb2x2ZUljb249e3tcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWNvbk5hbWU6IFwiYXJyb3ctcmlnaHQtY2lyY2xlXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsvaWZ9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgey9lYWNofVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7I2lmIGxldmVsLm1vcmV9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3M9XCJsb2FkbW9yZVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YS1sZXZlbC1wYXRoPXtsZXZlbC5wYXRofVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEtbGV2ZWwtbmV4dC1wYWdlPXtwYXJzZUludChsZXZlbC5wYWdlKSArIDF9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXNlOmxvYWRNb3JlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInNwaW5uZXItYm9yZGVyXCIgcm9sZT1cInN0YXR1c1wiPjwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsvaWZ9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsjaWYgbGV2ZWwudG90YWwgPT0gMH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjb250ZW50SXRlbVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwPntfdChcIm5vIHJlc3VsdHMgZm91bmRcIil9PC9wPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsvaWZ9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgey9lYWNofVxuICAgICAgICAgICAgICAgICAgICB7I2lmIHByZXZpZXdJdGVtPy5VSUQgJiYgJHByZXZpZXdVaWRzLmxlbmd0aCA9PSAxfVxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInByZXZpZXdcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwibGV2ZWxUb29sYmFyXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzPVwiYnRuIGJ0bi1wcmltYXJ5IGJ0bi14c1wiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aXRsZT17cHJldmlld0l0ZW0ucGF0aC5zcGxpdChcIi9cIikucG9wKCl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaXNhYmxlZD17IWlzU2VsZWN0YWJsZShwcmV2aWV3SXRlbSl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbjpjbGlja3xwcmV2ZW50RGVmYXVsdD17KCkgPT4gYWRkSXRlbShwcmV2aWV3SXRlbSl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+e190KFwic2VsZWN0ICR7cHJldmlld19wYXRofVwiLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJldmlld19wYXRoOiBwcmV2aWV3SXRlbS5UaXRsZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pfTwvYnV0dG9uXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiaW5mb1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7I2lmIHByZXZpZXdJdGVtLmdldEljb259XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwicHJldmlld0ltYWdlXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGltZ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzcmM9XCJ7cHJldmlld0l0ZW0uZ2V0VVJMfS9AQGltYWdlcy9pbWFnZS9wcmV2aWV3XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWx0PXtwcmV2aWV3SXRlbS5UaXRsZX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHs6ZWxzZX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJwcmV2aWV3SWNvblwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzdmdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXNlOnJlc29sdmVJY29uPXt7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpY29uTmFtZTogYGNvbnRlbnR0eXBlLyR7cHJldmlld0l0ZW0ucG9ydGFsX3R5cGUudG9Mb3dlckNhc2UoKS5yZXBsYWNlKC9cXC58IC9nLCBcIi1cIil9YCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsvaWZ9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxoND57cHJldmlld0l0ZW0uVGl0bGV9PC9oND5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHA+e3ByZXZpZXdJdGVtLkRlc2NyaXB0aW9ufTwvcD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICB7L2lmfVxuICAgICAgICAgICAgICAgICAgICB7I2lmICRwcmV2aWV3VWlkcy5sZW5ndGggPiAxfVxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInByZXZpZXdcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwibGV2ZWxUb29sYmFyXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzPVwiYnRuIGJ0bi1wcmltYXJ5IGJ0bi14c1wiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbjpjbGlja3xwcmV2ZW50RGVmYXVsdD17YWRkU2VsZWN0ZWRJdGVtc31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID57X3QoXCJhZGQgc2VsZWN0ZWQgaXRlbXNcIil9PC9idXR0b25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJpbmZvXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzdmdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVzZTpyZXNvbHZlSWNvbj17e1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGljb25OYW1lOiBcImZpbGVzXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIHsvaWZ9XG4gICAgICAgICAgICAgICAgICAgIHsjaWYgc2hvd1VwbG9hZH1cbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJ1cGxvYWQtd3JhcHBlclwiPjwvZGl2PlxuICAgICAgICAgICAgICAgICAgICB7L2lmfVxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgezpjYXRjaCBlcnJvcn1cbiAgICAgICAgICAgICAgICA8cCBzdHlsZT1cImNvbG9yOiByZWRcIj57ZXJyb3IubWVzc2FnZX08L3A+XG4gICAgICAgICAgICB7L2F3YWl0fVxuICAgICAgICA8L25hdj5cbiAgICA8L2Rpdj5cbnsvaWZ9XG5cbjxzdHlsZT5cbiAgICAuY29udGVudC1icm93c2VyLXBvc2l0aW9uLXdyYXBwZXIge1xuICAgICAgICBwb3NpdGlvbjogZml4ZWQ7XG4gICAgICAgIHRvcDogMDtcbiAgICAgICAgcmlnaHQ6IDA7XG4gICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgIGp1c3RpZnktY29udGVudDogZW5kO1xuICAgICAgICB6LWluZGV4OiAxNTAwO1xuICAgICAgICB3aWR0aDogMTAwJTtcbiAgICAgICAgaGVpZ2h0OiAxMDB2aDtcbiAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogcmdiYSgwLCAwLCAwLCAwLjI1KTtcbiAgICB9XG4gICAgLmJ0bi14cyB7XG4gICAgICAgIC0tYnMtYnRuLXBhZGRpbmcteTogMC4xNXJlbTtcbiAgICAgICAgLS1icy1idG4tcGFkZGluZy14OiAwLjVyZW07XG4gICAgICAgIC0tYnMtYnRuLWZvbnQtc2l6ZTogMC43NXJlbTtcbiAgICB9XG4gICAgLmNvbnRlbnQtYnJvd3NlciB7XG4gICAgICAgIGhlaWdodDogMTAwdmg7XG4gICAgICAgIG1pbi13aWR0aDogNTUwcHg7XG4gICAgICAgIGJhY2tncm91bmQtY29sb3I6IHZhcigtLWJzLWxpZ2h0LWJnLXN1YnRsZSk7XG4gICAgICAgIGJvcmRlci1sZWZ0OiB2YXIoLS1icy1ib3JkZXItc3R5bGUpIHZhcigtLWJzLWJvcmRlci13aWR0aCkgI2ZmZjtcbiAgICAgICAgei1pbmRleDogMTUwMDtcbiAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgICB9XG4gICAgLnRvb2xCYXIge1xuICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1icy1wcmltYXJ5KTtcbiAgICAgICAgcGFkZGluZzogMC4zMjVyZW0gMC43NXJlbTtcbiAgICAgICAgY29sb3I6IHZhcigtLWJzLWxpZ2h0KTtcbiAgICAgICAgd2lkdGg6IDEwMCU7XG4gICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgIGp1c3RpZnktY29udGVudDogc3RhcnQ7XG4gICAgfVxuICAgIC50b29sQmFyIDpnbG9iYWwoc3ZnKSB7XG4gICAgICAgIHZlcnRpY2FsLWFsaWduOiAtMC4xMjVlbTtcbiAgICB9XG4gICAgLmxldmVsQ29sdW1ucyB7XG4gICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgIGZsZXgtd3JhcDogbm93cmFwO1xuICAgICAgICB3aWR0aDogMTAwJTtcbiAgICAgICAgb3ZlcmZsb3cteTogaGlkZGVuO1xuICAgICAgICBvdmVyZmxvdy14OiBhdXRvO1xuICAgICAgICBmbGV4LWdyb3c6IDM7XG4gICAgICAgIGJvcmRlci1sZWZ0OiB2YXIoLS1icy1ib3JkZXItc3R5bGUpIHZhcigtLWJzLWJvcmRlci1jb2xvcikgdmFyKC0tYnMtYm9yZGVyLXdpZHRoKTtcbiAgICAgICAgdXNlci1zZWxlY3Q6IG5vbmU7XG4gICAgfVxuXG4gICAgLmxldmVsQ29sdW1uIHtcbiAgICAgICAgd2lkdGg6IDMyMHB4O1xuICAgICAgICBib3JkZXItcmlnaHQ6IHZhcigtLWJzLWJvcmRlci1zdHlsZSkgdmFyKC0tYnMtYm9yZGVyLXdpZHRoKVxuICAgICAgICAgICAgdmFyKC0tYnMtYm9yZGVyLWNvbG9yKTtcbiAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgICAgICAgZmxleC1ncm93OiAwO1xuICAgICAgICBmbGV4LXNocmluazogMDtcbiAgICB9XG5cbiAgICAubGV2ZWxUb29sYmFyIHtcbiAgICAgICAgd2lkdGg6IDEwMCU7XG4gICAgICAgIGhlaWdodDogMi41cmVtO1xuICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47XG4gICAgICAgIHBhZGRpbmc6IDAuMzc1cmVtO1xuICAgICAgICBib3JkZXItYm90dG9tOiB2YXIoLS1icy1ib3JkZXItc3R5bGUpIHZhcigtLWJzLWJvcmRlci13aWR0aClcbiAgICAgICAgICAgIHZhcigtLWJzLWJvcmRlci1jb2xvcik7XG4gICAgfVxuICAgIC5sZXZlbFRvb2xiYXIgPiAubGV2ZWxBY3Rpb25zIHtcbiAgICAgICAgbWFyZ2luLWxlZnQ6IGF1dG87XG4gICAgfVxuICAgIC5sZXZlbFRvb2xiYXIgPiBidXR0b257XG4gICAgICAgIHdoaXRlLXNwYWNlOiBub3dyYXA7XG4gICAgICAgIG92ZXJmbG93OiBoaWRkZW47XG4gICAgICAgIHRleHQtb3ZlcmZsb3c6IGVsbGlwc2lzO1xuICAgIH1cblxuICAgIC5sZXZlbEl0ZW1zIHtcbiAgICAgICAgb3ZlcmZsb3cteDogYXV0bztcbiAgICB9XG4gICAgLmNvbnRlbnRJdGVtIHtcbiAgICAgICAgLyogcGFkZGluZzogMXJlbSAxcmVtOyAqL1xuICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47XG4gICAgICAgIGZvbnQtc2l6ZTogOTAlO1xuICAgICAgICBtaW4taGVpZ2h0OiAycmVtO1xuICAgIH1cbiAgICAuY29udGVudEl0ZW06Zm9jdXMtdmlzaWJsZSB7XG4gICAgICAgIG91dGxpbmU6IG5vbmU7XG4gICAgfVxuICAgIC5jb250ZW50SXRlbS5ldmVuIHtcbiAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogcmdiYSh2YXIoLS1icy1zZWNvbmRhcnktYmctcmdiKSwgLjQpO1xuICAgIH1cbiAgICAuY29udGVudEl0ZW0uaW5QYXRoLFxuICAgIC5jb250ZW50SXRlbTpmb2N1cyB7XG4gICAgICAgIGJhY2tncm91bmQtY29sb3I6IHJnYmEodmFyKC0tYnMtcHJpbWFyeS1yZ2IpLCAwLjE1KTtcbiAgICB9XG4gICAgLmNvbnRlbnRJdGVtLnNlbGVjdGVkSXRlbSB7XG4gICAgICAgIGJhY2tncm91bmQtY29sb3I6IHZhcigtLWJzLXByaW1hcnkpO1xuICAgICAgICBjb2xvcjogdmFyKC0tYnMtYm9keS1iZyk7XG4gICAgfVxuICAgIC5jb250ZW50SXRlbSA+ICoge1xuICAgICAgICBwYWRkaW5nOiAwLjVyZW07XG4gICAgICAgIHdoaXRlLXNwYWNlOiBub3dyYXA7XG4gICAgICAgIG1heC13aWR0aDogNDUwcHg7XG4gICAgICAgIHRleHQtb3ZlcmZsb3c6IGVsbGlwc2lzO1xuICAgICAgICBvdmVyZmxvdzogaGlkZGVuO1xuICAgIH1cbiAgICAuY29udGVudEl0ZW0gPiAuYnJvd3NlU3ViIHtcbiAgICAgICAgZmxleC1zaHJpbms6IDA7XG4gICAgfVxuXG4gICAgLmNvbnRlbnRJdGVtIC5ncmlkLXByZXZpZXcgPiBpbWcge1xuICAgICAgICB3aWR0aDogOTVweDtcbiAgICAgICAgaGVpZ2h0OiA5NXB4O1xuICAgICAgICBvYmplY3QtZml0OiBjb3ZlcjtcbiAgICAgICAgZmxvYXQ6IGxlZnQ7XG4gICAgICAgIG1hcmdpbi1yaWdodDogMXJlbTtcbiAgICB9XG4gICAgLnByZXZpZXcge1xuICAgICAgICB3aWR0aDogMzIwcHg7XG4gICAgICAgIG1pbi1oZWlnaHQ6IDMwMHB4O1xuICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgIH1cbiAgICAucHJldmlldyAuaW5mbyB7XG4gICAgICAgIHBhZGRpbmc6IDAuNXJlbTtcbiAgICAgICAgd2lkdGg6IDEwMCU7XG4gICAgICAgIHdvcmQtd3JhcDogYW55d2hlcmU7XG4gICAgfVxuICAgIC5wcmV2aWV3IC5pbmZvIC5wcmV2aWV3SWNvbiB7XG4gICAgICAgIG1hcmdpbjogMCBhdXRvIDFyZW0gYXV0bztcbiAgICB9XG4gICAgLnByZXZpZXcgLmluZm8gLnByZXZpZXdJY29uIHN2ZyB7XG4gICAgICAgIHdpZHRoOiA1MHB4ICFpbXBvcnRhbnQ7XG4gICAgICAgIGhlaWdodDogNTBweCAhaW1wb3J0YW50O1xuICAgIH1cbiAgICAucHJldmlldyBoNCB7XG4gICAgICAgIGZvbnQtc2l6ZTogMS4yIHJlbTtcbiAgICB9XG4gICAgLnByZXZpZXcgaW1nIHtcbiAgICAgICAgbWF4LXdpZHRoOiAxMDAlO1xuICAgICAgICBtYXgtd2lkdGg6IDEwMCU7XG4gICAgICAgIG1hcmdpbi1ib3R0b206IDAuNXJlbTtcbiAgICB9XG5cbiAgICAudXBsb2FkLXdyYXBwZXIge1xuICAgICAgICBwYWRkaW5nOiAxcmVtO1xuICAgICAgICB3aWR0aDogNTkwcHg7XG4gICAgICAgIG92ZXJmbG93LXg6IGF1dG87XG4gICAgfVxuICAgIC5sb2FkbW9yZSB7XG4gICAgICAgIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgICAgICAgcGFkZGluZzogMC4yNXJlbSAwO1xuICAgIH1cbjwvc3R5bGU+XG4iXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBNmxCSSw4RUFBa0MsQ0FDOUIsUUFBUSxDQUFFLEtBQUssQ0FDZixHQUFHLENBQUUsQ0FBQyxDQUNOLEtBQUssQ0FBRSxDQUFDLENBQ1IsT0FBTyxDQUFFLElBQUksQ0FDYixlQUFlLENBQUUsR0FBRyxDQUNwQixPQUFPLENBQUUsSUFBSSxDQUNiLEtBQUssQ0FBRSxJQUFJLENBQ1gsTUFBTSxDQUFFLEtBQUssQ0FDYixnQkFBZ0IsQ0FBRSxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FDeEMsQ0FDQSxvREFBUSxDQUNKLGtCQUFrQixDQUFFLE9BQU8sQ0FDM0Isa0JBQWtCLENBQUUsTUFBTSxDQUMxQixrQkFBa0IsQ0FBRSxPQUN4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*/\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".content-browser-selected-items-wrapper.svelte-awokap{display:flex;align-items:start}.content-browser-selected-items.svelte-awokap{list-style:none;background-color:var(--bs-body-bg);border-radius:var(--bs-border-radius) 0 0 var(--bs-border-radius);border:var(--bs-border-style) var(--bs-border-color) var(--bs-border-width);min-height:2.4rem;padding:.5rem .5rem 0 .5rem;flex:1 1 auto}\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/pat/contentbrowser/src/SelectedItems.svelte\"],\"names\":[],\"mappings\":\"AAAA,sDAAA,YAAA,CAAA,iBAAA,CAAA,8CAAA,eAAA,CAAA,kCAAA,CAAA,iEAAA,CAAA,2EAAA,CAAA,iBAAA,CAAA,2BAAA,CAAA,aAAA\",\"sourcesContent\":[\".content-browser-selected-items-wrapper.svelte-awokap{display:flex;align-items:start}.content-browser-selected-items.svelte-awokap{list-style:none;background-color:var(--bs-body-bg);border-radius:var(--bs-border-radius) 0 0 var(--bs-border-radius);border:var(--bs-border-style) var(--bs-border-color) var(--bs-border-width);min-height:2.4rem;padding:0.5rem 0.5rem 0 0.5rem;flex:1 1 auto}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiU2VsZWN0ZWRJdGVtcy5zdmVsdGUiLCJzb3VyY2VzIjpbIlNlbGVjdGVkSXRlbXMuc3ZlbHRlIl0sInNvdXJjZXNDb250ZW50IjpbIjxzY3JpcHQ+XG4gICAgaW1wb3J0IHsgZ2V0Q29udGV4dCwgb25Nb3VudCwgc2V0Q29udGV4dCB9IGZyb20gXCJzdmVsdGVcIjtcbiAgICBpbXBvcnQgeyBnZXRfaXRlbXNfZnJvbV91aWRzIH0gZnJvbSBcIi4vdXRpbHMuanNcIjtcbiAgICBpbXBvcnQgU29ydGFibGUgZnJvbSBcInNvcnRhYmxlanNcIjtcbiAgICBpbXBvcnQgX3QgZnJvbSBcIi4uLy4uLy4uL2NvcmUvaTE4bi13cmFwcGVyXCI7XG4gICAgaW1wb3J0IGV2ZW50cyBmcm9tIFwiQHBhdHRlcm5zbGliL3BhdHRlcm5zbGliL3NyYy9jb3JlL2V2ZW50c1wiO1xuICAgIGltcG9ydCBwbG9uZV9yZWdpc3RyeSBmcm9tIFwiQHBsb25lL3JlZ2lzdHJ5XCI7XG5cbiAgICBsZXQgcmVmO1xuICAgIGxldCBpbml0aWFsaXppbmcgPSB0cnVlO1xuXG4gICAgLy8gZ2V0IHJlYWN0aXZlIGNvbnRleHQgY29uZmlnXG4gICAgY29uc3QgY29uZmlnID0gZ2V0Q29udGV4dChcImNvbmZpZ1wiKTtcbiAgICBjb25zdCBmaWVsZElkID0gJGNvbmZpZy5maWVsZElkO1xuICAgIGNvbnN0IHNlbGVjdGVkSXRlbXNOb2RlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoZmllbGRJZCk7XG5cbiAgICAvLyBnZXQgcmVhY3RpdmUgY29udGV4dCBzdG9yZVxuICAgIGNvbnN0IHNlbGVjdGVkSXRlbXMgPSBnZXRDb250ZXh0KFwic2VsZWN0ZWRJdGVtc1wiKTtcbiAgICBjb25zdCBzZWxlY3RlZFVpZHMgPSBnZXRDb250ZXh0KFwic2VsZWN0ZWRVaWRzXCIpO1xuXG4gICAgLy8gc2hvd0NvbnRlbnRCcm93c2VyIHJlYWN0aXZlIHN0YXRlXG4gICAgY29uc3Qgc2hvd0NvbnRlbnRCcm93c2VyID0gZ2V0Q29udGV4dChcInNob3dDb250ZW50QnJvd3NlclwiKTtcblxuICAgIC8vIGdldCBzZWxlY3RlZEl0ZW0gY29tcG9uZW50IGZyb20gcmVnaXN0cnkuXG4gICAgLy8gdGhlIHJlZ2lzdHJ5IGtleSBjYW4gYmUgY3VzdG9taXplZCB3aXRoIHBhdHRlcm5fb3B0aW9uc1xuICAgIC8vIGlmIGFuIGFkZG9uIHJlZ2lzdGVycyBhIGN1c3RvbSBjb21wb25lbnQgdG8gYSBjdXN0b20ga2V5XG4gICAgY29uc3QgUmVnaXN0ZXJlZFNlbGVjdGVkSXRlbSA9IHBsb25lX3JlZ2lzdHJ5LmdldENvbXBvbmVudChcbiAgICAgICAgJGNvbmZpZy5jb21wb25lbnRSZWdpc3RyeUtleXM/LnNlbGVjdGVkSXRlbSB8fMKgXCJwYXQtY29udGVudGJyb3dzZXIuU2VsZWN0ZWRJdGVtXCJcbiAgICApO1xuXG4gICAgb25Nb3VudChhc3luYyAoKSA9PiB7XG4gICAgICAgIGF3YWl0IGluaXRpYWxpemVTZWxlY3RlZEl0ZW1zU3RvcmUoKTtcbiAgICAgICAgaW5pdGlhbGl6ZVNvcnRpbmcoKTtcbiAgICAgICAgaW5pdGlhbGl6aW5nID0gZmFsc2U7XG4gICAgfSk7XG5cbiAgICBmdW5jdGlvbiB1bnNlbGVjdEl0ZW0oaSkge1xuICAgICAgICBzZWxlY3RlZEl0ZW1zLnVwZGF0ZSgobikgPT4ge1xuICAgICAgICAgICAgbi5zcGxpY2UoaSwgMSk7XG4gICAgICAgICAgICByZXR1cm4gbjtcbiAgICAgICAgfSk7XG4gICAgICAgIHNlbGVjdGVkVWlkcy51cGRhdGUoKCkgPT4gJHNlbGVjdGVkSXRlbXMubWFwKCh4KSA9PiB4LlVJRCkpO1xuICAgIH1cblxuICAgIC8vIHVzZSB0aGlzIGZ1bmN0aW9uIGluIFwiU2VsZWN0ZWRJdGVtXCIgY29tcG9uZW50IHdpdGhcbiAgICAvLyBjb25zdCB1bnNlbGVjdEl0ZW0gPSBnZXRDb250ZXh0KFwidW5zZWxlY3RJdGVtXCIpXG4gICAgc2V0Q29udGV4dChcInVuc2VsZWN0SXRlbVwiLCB1bnNlbGVjdEl0ZW0pO1xuXG4gICAgYXN5bmMgZnVuY3Rpb24gaW5pdGlhbGl6ZVNlbGVjdGVkSXRlbXNTdG9yZSgpIHtcbiAgICAgICAgY29uc3QgaW5pdGlhbFZhbHVlID0gJGNvbmZpZy5zZWxlY3Rpb24ubGVuZ3RoXG4gICAgICAgICAgICA/ICRjb25maWcuc2VsZWN0aW9uXG4gICAgICAgICAgICA6IHNlbGVjdGVkSXRlbXNOb2RlPy52YWx1ZVxuICAgICAgICAgICAgICA/IHNlbGVjdGVkSXRlbXNOb2RlLnZhbHVlLnNwbGl0KCRjb25maWcuc2VwYXJhdG9yKVxuICAgICAgICAgICAgICA6IFtdO1xuXG4gICAgICAgIGlmICghaW5pdGlhbFZhbHVlLmxlbmd0aCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgJHNlbGVjdGVkSXRlbXMgPSBhd2FpdCBnZXRfaXRlbXNfZnJvbV91aWRzKGluaXRpYWxWYWx1ZSwgJGNvbmZpZyk7XG4gICAgICAgIHNlbGVjdGVkVWlkcy51cGRhdGUoKCkgPT4gJHNlbGVjdGVkSXRlbXMubWFwKCh4KSA9PiB4LlVJRCkpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGluaXRpYWxpemVTb3J0aW5nKCkge1xuICAgICAgICBpZiAoJGNvbmZpZy5tYXhpbXVtU2VsZWN0aW9uU2l6ZSAhPT0gMSAmJiAkc2VsZWN0ZWRJdGVtcy5sZW5ndGggPiAxKSB7XG4gICAgICAgICAgICBTb3J0YWJsZS5jcmVhdGUoXG4gICAgICAgICAgICAgICAgc2VsZWN0ZWRJdGVtc05vZGUucHJldmlvdXNTaWJsaW5nLnF1ZXJ5U2VsZWN0b3IoXG4gICAgICAgICAgICAgICAgICAgIFwiLmNvbnRlbnQtYnJvd3Nlci1zZWxlY3RlZC1pdGVtc1wiLFxuICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBkcmFnZ2FibGU6IFwiLnNlbGVjdGVkLWl0ZW1cIixcbiAgICAgICAgICAgICAgICAgICAgYW5pbWF0aW9uOiAyMDAsXG4gICAgICAgICAgICAgICAgICAgIG9uVXBkYXRlOiAoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHNvcnRlZFV1aWRzID0gW107XG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGVsIG9mIGUudGFyZ2V0LmNoaWxkcmVuKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc29ydGVkVXVpZHMucHVzaChlbC5kYXRhc2V0W1widXVpZFwiXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBzZXROb2RlVmFsdWUoc29ydGVkVXVpZHMpO1xuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gc2VsZWN0ZWRVaWRzRnJvbVNlbGVjdGVkSXRlbXMoKSB7XG4gICAgICAgIGxldCBpdGVtcyA9IFtdO1xuICAgICAgICAkc2VsZWN0ZWRJdGVtcy5mb3JFYWNoKChpdGVtKSA9PiB7XG4gICAgICAgICAgICBpdGVtcy5wdXNoKGl0ZW0uVUlEKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBpdGVtcztcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBzZXROb2RlVmFsdWUoc2VsZWN0ZWRVaWRzKSB7XG4gICAgICAgIGNvbnN0IG5vZGVfdmFsID0gc2VsZWN0ZWRVaWRzLmpvaW4oJGNvbmZpZy5zZXBhcmF0b3IpO1xuICAgICAgICBzZWxlY3RlZEl0ZW1zTm9kZS52YWx1ZSA9IG5vZGVfdmFsO1xuICAgICAgICBzZWxlY3RlZEl0ZW1zTm9kZS5kaXNwYXRjaEV2ZW50KGV2ZW50cy5jaGFuZ2VfZXZlbnQoKSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gTG9hZFNlbGVjdGVkSXRlbUNvbXBvbmVudChub2RlLCBwcm9wcykge1xuICAgICAgICBjb25zdCBjb21wb25lbnQgPSBuZXcgUmVnaXN0ZXJlZFNlbGVjdGVkSXRlbS5jb21wb25lbnQoe3RhcmdldDogbm9kZSwgcHJvcHM6IHByb3BzfSk7XG4gICAgfVxuXG4gICAgJDoge1xuICAgICAgICAkc2VsZWN0ZWRJdGVtcztcbiAgICAgICAgaWYgKCRzZWxlY3RlZEl0ZW1zLmxlbmd0aCB8fCAhaW5pdGlhbGl6aW5nKSB7XG4gICAgICAgICAgICBzZXROb2RlVmFsdWUoc2VsZWN0ZWRVaWRzRnJvbVNlbGVjdGVkSXRlbXMoKSk7XG4gICAgICAgICAgICBpbml0aWFsaXplU29ydGluZygpO1xuICAgICAgICB9XG4gICAgfVxuPC9zY3JpcHQ+XG5cbjxkaXZcbiAgICBjbGFzcz1cImNvbnRlbnQtYnJvd3Nlci1zZWxlY3RlZC1pdGVtcy13cmFwcGVyXCJcbiAgICBzdHlsZT1cIndpZHRoOiB7JGNvbmZpZy53aWR0aCB8fCAnYXV0byd9XCJcbiAgICBiaW5kOnRoaXM9e3JlZn1cbj5cbiAgICA8IS0tIHN2ZWx0ZS1pZ25vcmUgYTExeS1jbGljay1ldmVudHMtaGF2ZS1rZXktZXZlbnRzIC0tPlxuICAgIDwhLS0gc3ZlbHRlLWlnbm9yZSBhMTF5LW5vLXN0YXRpYy1lbGVtZW50LWludGVyYWN0aW9ucyAtLT5cbiAgICA8ZGl2IGNsYXNzPVwiY29udGVudC1icm93c2VyLXNlbGVjdGVkLWl0ZW1zXCJcbiAgICAgICAgIG9uOmNsaWNrPXsoKSA9PiAkc2hvd0NvbnRlbnRCcm93c2VyID0gJHNlbGVjdGVkSXRlbXMubGVuZ3RoID8gZmFsc2UgOiB0cnVlIH0+XG4gICAgICAgIHsjaWYgJHNlbGVjdGVkSXRlbXN9XG4gICAgICAgICAgICB7I2VhY2ggJHNlbGVjdGVkSXRlbXMgYXMgc2VsSXRlbSwgaSAoc2VsSXRlbS5VSUQpfVxuICAgICAgICAgICAgICAgIDxkaXYgdXNlOkxvYWRTZWxlY3RlZEl0ZW1Db21wb25lbnQ9e3tpZHg6aSwgaXRlbTpzZWxJdGVtfX0gLz5cbiAgICAgICAgICAgIHsvZWFjaH1cbiAgICAgICAgey9pZn1cbiAgICAgICAgeyNpZiAhJHNlbGVjdGVkSXRlbXN9XG4gICAgICAgICAgICA8cD57X3QoXCJsb2FkaW5nIHNlbGVjdGVkIGl0ZW1zXCIpfTwvcD5cbiAgICAgICAgey9pZn1cbiAgICA8L2Rpdj5cbiAgICA8IS0tIHN2ZWx0ZS1pZ25vcmUgYTExeS1pbnZhbGlkLWF0dHJpYnV0ZSAtLT5cbiAgICA8YVxuICAgICAgICBjbGFzcz1cImJ0biBidG4tcHJpbWFyeVwiIGhyZWY9XCIjXCJcbiAgICAgICAgc3R5bGU9XCJib3JkZXItcmFkaXVzOjAgdmFyKC0tYnMtYm9yZGVyLXJhZGl1cykgdmFyKC0tYnMtYm9yZGVyLXJhZGl1cykgMFwiXG4gICAgICAgIG9uOmNsaWNrfHByZXZlbnREZWZhdWx0PXsoKSA9PiAoJHNob3dDb250ZW50QnJvd3NlciA9IHRydWUpfVxuICAgICAgICA+e190KFwiU2VsZWN0XCIpfTwvYVxuICAgID5cbjwvZGl2PlxuXG48c3R5bGU+XG4gICAgLmNvbnRlbnQtYnJvd3Nlci1zZWxlY3RlZC1pdGVtcy13cmFwcGVyIHtcbiAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgYWxpZ24taXRlbXM6IHN0YXJ0O1xuICAgIH1cbiAgICAuY29udGVudC1icm93c2VyLXNlbGVjdGVkLWl0ZW1zIHtcbiAgICAgICAgbGlzdC1zdHlsZTogbm9uZTtcbiAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tYnMtYm9keS1iZyk7XG4gICAgICAgIGJvcmRlci1yYWRpdXM6IHZhcigtLWJzLWJvcmRlci1yYWRpdXMpIDAgMCB2YXIoLS1icy1ib3JkZXItcmFkaXVzKTtcbiAgICAgICAgYm9yZGVyOiB2YXIoLS1icy1ib3JkZXItc3R5bGUpIHZhcigtLWJzLWJvcmRlci1jb2xvcikgdmFyKC0tYnMtYm9yZGVyLXdpZHRoKTtcbiAgICAgICAgbWluLWhlaWdodDogMi40cmVtO1xuICAgICAgICBwYWRkaW5nOiAwLjVyZW0gMC41cmVtIDAgMC41cmVtO1xuICAgICAgICBmbGV4OiAxIDEgYXV0bztcbiAgICB9XG48L3N0eWxlPlxuIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQTJJSSxxREFBd0MsQ0FDcEMsT0FBTyxDQUFFLElBQUksQ0FDYixXQUFXLENBQUUsS0FDakIsQ0FDQSw2Q0FBZ0MsQ0FDNUIsVUFBVSxDQUFFLElBQUksQ0FDaEIsZ0JBQWdCLENBQUUsSUFBSSxZQUFZLENBQUMsQ0FDbkMsYUFBYSxDQUFFLElBQUksa0JBQWtCLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksa0JBQWtCLENBQUMsQ0FDbEUsTUFBTSxDQUFFLElBQUksaUJBQWlCLENBQUMsQ0FBQyxJQUFJLGlCQUFpQixDQUFDLENBQUMsSUFBSSxpQkFBaUIsQ0FBQyxDQUM1RSxVQUFVLENBQUUsTUFBTSxDQUNsQixPQUFPLENBQUUsTUFBTSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUMvQixJQUFJLENBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUNkIn0=*/\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","import { writable, get } from \"svelte/store\";\nimport { request } from \"./utils.js\";\n\nexport default function (config, pathCache) {\n    const store = writable([]);\n\n    const load = async (query) => {\n        let defaults = {\n            vocabularyUrl: config.vocabularyUrl,\n            attributes: config.attributes,\n            pageSize: config.pageSize,\n        };\n        query = {\n            ...defaults,\n            ...query,\n        }\n        if (config.selectableTypes.length) {\n            query[\"selectableTypes\"] = config.selectableTypes;\n        }\n        return await request(query);\n    }\n\n    const browse = async (path, searchTerm, updateCache) => {\n\n        let rootPath = config.rootPath;\n        let rootPathParts = rootPath.replace(/^\\/+/, '').split(\"/\");\n        let physicalPath = path;\n        let hideRootPath = rootPath;\n\n        if (!physicalPath.startsWith(rootPath)) {\n            // The path from the returned items from \"vocabularyUrl\" are starting\n            // relative from the Plone Site. So we need to generate the phyiscalPath here.\n            if (rootPathParts.length === 1) {\n                physicalPath = rootPath + physicalPath;\n            } else {\n                // We also have to merge the rootPath and the clicked path correctly for example:\n                // rootPath: /Plone/media, clicked path: /media/subfolder\n                // has to become:\n                // /Plone/media/subfolder\n                let pathParts = physicalPath.replace(/^\\/+/, '').split(\"/\");\n                let overlapIdx = rootPathParts.length;\n                for (let idx = 0; idx < rootPathParts.length; idx++) {\n                    if (rootPathParts[idx] === pathParts[0]) {\n                        overlapIdx = idx;\n                        break;\n                    }\n                }\n                hideRootPath = \"/\" + (rootPathParts.filter(it => pathParts.includes(it))).join(\"/\");\n                physicalPath = \"/\" + (rootPathParts.slice(1, overlapIdx).concat(pathParts)).join(\"/\");\n            }\n        }\n\n        let paths = [];\n        let parts = physicalPath.split(\"/\") || [];\n        const maxDepth = Math.min(parts.length, config.maxDepth || 999);\n\n        let partsToShow = parts.slice(parts.length - maxDepth, parts.length);\n        let partsToHide = parts.slice(0, parts.length - maxDepth);\n        const pathPrefix = partsToHide.join(\"/\");\n\n        while (partsToShow.length > 0) {\n            let sub_path = partsToShow.join(\"/\").replace(/^\\//, \"\");\n            const poped = partsToShow.pop();\n            sub_path = pathPrefix + ((poped != \"\") ? `/${sub_path}` : \"\");\n            if (sub_path && paths.indexOf(sub_path) === -1) paths.push(sub_path);\n            if (sub_path == rootPath) {\n                // respect rootPath\n                break;\n            }\n        }\n\n        const pC = get(pathCache);\n        let levels = [];\n        let pathCounter = 0;\n\n        for (var p of paths) {\n            pathCounter++;\n            const isFirstPath = pathCounter == 1;\n            let level = {};\n            if (\n                !(p in pC) ||  // new path not found in cache\n                (isFirstPath && searchTerm) ||  // filtering the level\n                updateCache  // manual cache update request\n            ) {\n                let query = {\n                    path: p,\n                };\n\n                if (isFirstPath && searchTerm) {\n                    query[\"searchTerm\"] = \"*\" + searchTerm + \"*\";\n                }\n\n                level = await load(query);\n\n                // check if there is more than the current batch\n                level.more = config.pageSize < level.total;\n                // save possible search filter for later batch loading\n                level.searchTerm = searchTerm;\n                level.page = 1;\n                level.path = p;\n                level.displayPath = p.replace(new RegExp(`^(${hideRootPath}|${rootPath})`), \"\") || \"/\"\n\n                // do not update cache when searching\n                if (!searchTerm) {\n                    const levelInfo = await load({\n                        levelInfoPath: p,\n                    });\n                    if (levelInfo.total) {\n                        level.UID = levelInfo.results[0].UID;\n                        level.Title = levelInfo.results[0].Title;\n                        level.portal_type = levelInfo.results[0].portal_type;\n                        level.getIcon = levelInfo.results[0].getIcon;\n                        // check if level is selectable (config.selectableTypes)\n                        level.selectable = (!config.selectableTypes.length || config.selectableTypes.indexOf(levelInfo.results[0].portal_type) != -1);\n                    }\n                    level.gridView = false;\n                    pathCache.update((n) => {\n                        n[p] = level;\n                        return n;\n                    });\n                }\n            } else {\n                level = pC[p];\n            }\n            levels = [level, ...levels];\n        }\n        store.set(levels);\n    }\n\n    const search = async (searchTerm, page) => {\n        let query = {\n            searchPath: config.rootPath,\n            page: page,\n        };\n        if (searchTerm) {\n            if (searchTerm.length < 2) {\n                // minimum length of search term\n                return;\n            }\n            query[\"searchTerm\"] = \"*\" + searchTerm + \"*\";\n        }\n        let level = await load(query);\n        level.page = page;\n        level.searchTerm = searchTerm;\n\n        store.update((levels) => {\n            const has_more = (page * config.pageSize) < level.total;\n\n            // first time or new search\n            if (levels.length == 0 || levels[0].searchTerm != searchTerm) {\n                level.more = has_more;\n                level.selectable = false;\n                level.gridView = false;\n                return [level,];\n            }\n\n            // has more ?\n            levels[0].more = has_more;\n            levels[0].page = level.page;\n\n            // append new batch\n            levels[0].results = [\n                ...levels[0].results,\n                ...level.results,\n            ];\n            return levels;\n        });\n    }\n\n    const nextBatch = async (p, page, searchTerm) => {\n        let query = {\n            path: p,\n            page: page,\n        };\n\n        if (searchTerm) {\n            query[\"searchTerm\"] = \"*\" + searchTerm + \"*\";\n        }\n\n        let level = await load(query);\n        level.more = (page * config.pageSize) < level.total;\n        level.page = page;\n\n        store.update((levels) => {\n            levels.forEach((l) => {\n                if (l.path != p) {\n                    return l;\n                }\n                l.page = level.page;\n                l.more = level.more;\n                l.results = [\n                    ...l.results,\n                    ...level.results,\n                ]\n            });\n            return levels;\n        });\n    }\n\n    store.get = async ({\n        path = \"\",\n        searchTerm = \"\",\n        updateCache = false,\n        loadMorePath = \"\",\n        page = 1,\n    }) => {\n        if (config.mode === \"search\") {\n            await search(searchTerm, page);\n        } else if (loadMorePath) {\n            const pC = get(pathCache);\n            if (!(loadMorePath in pC)) {\n                return;\n            }\n            let level = pC[loadMorePath];\n            if (page > level.page) {\n                await nextBatch(loadMorePath, page, level.searchTerm);\n            }\n        } else if (path) {\n            await browse(path, searchTerm, updateCache);\n        }\n\n    };\n\n    return store;\n}\n","<script>\n    import { resolveIcon } from \"./utils\";\n    import _t from \"../../../core/i18n-wrapper\";\n    import { createEventDispatcher, getContext } from \"svelte\";\n\n    const config = getContext(\"config\");\n    const dispatch = createEventDispatcher();\n\n    function select(item) {\n        dispatch(\"selectItem\", {\n            item: item,\n        });\n    }\n</script>\n\n{#if $config?.favorites}\n<div class=\"favorites dropdown dropdown-menu-end ms-2\">\n    <button\n        type=\"button\"\n        class=\"favorites dropdown-toggle btn btn-outline-light btn-sm\"\n        data-bs-toggle=\"dropdown\"\n        aria-haspopup=\"true\"\n        aria-expanded=\"false\"\n    >\n        <svg use:resolveIcon={{ iconName: \"star-fill\" }} />\n        {_t(\"Favorites\")}\n    </button>\n    <ul class=\"dropdown-menu\">\n        {#each $config.favorites as favorite}\n        <li>\n            <a class=\"dropdown-item\" href=\"{favorite.path}\" on:click|preventDefault={() => select(favorite)}>{favorite.title}</a>\n        </li>\n        {/each}\n    </ul>\n</div>\n{/if}\n","<script>\n    import { resolveIcon, recentlyUsedItems } from \"./utils\";\n    import _t from \"../../../core/i18n-wrapper\";\n    import { createEventDispatcher, getContext } from \"svelte\";\n\n    const config = getContext(\"config\");\n    const items = recentlyUsedItems(true, $config);\n    const dispatch = createEventDispatcher();\n\n    function select(item) {\n        dispatch(\"selectItem\", {\n            item: item,\n        });\n    }\n</script>\n\n{#if $config.recentlyUsed && items.length}\n    <div class=\"recentlyUsed dropdown ms-2\">\n        <button\n            type=\"button\"\n            class=\"recentlyUsed dropdown-toggle btn btn-outline-light btn-sm\"\n            data-bs-toggle=\"dropdown\"\n            aria-haspopup=\"true\"\n            aria-expanded=\"false\"\n        >\n            <svg use:resolveIcon={{ iconName: \"grid-fill\" }} />\n            {_t(\"Recently Used\")}\n        </button>\n        <ul class=\"dropdown-menu\">\n            {#each items.reverse() as recentlyUsed}\n                <li>\n                    <a\n                        href={recentlyUsed.getURL || \"#\"}\n                        on:click|preventDefault={() => select(recentlyUsed)}\n                        class=\"dropdown-item\"\n                    >\n                        <svg\n                            use:resolveIcon={{\n                                iconName: `contenttype/${recentlyUsed?.portal_type.toLowerCase().replace(/\\.| /g, \"-\")}`,\n                            }}\n                        />\n                        {recentlyUsed.Title}\n                    </a>\n                </li>\n            {/each}\n        </ul>\n    </div>\n{/if}\n","\n      import API from \"!../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"../../../../node_modules/@patternslib/dev/webpack/style-inserter.js\";\n      import setAttributes from \"!../../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../node_modules/css-loader/dist/cjs.js!../../../../node_modules/sass-loader/dist/cjs.js!../../../../node_modules/svelte-loader/index.js?cssPath=/home/runner/work/mockup/mockup/src/pat/contentbrowser/src/ContentBrowser.svelte.2.css!./ContentBrowser.svelte\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\noptions.insert = insertFn;\noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../node_modules/css-loader/dist/cjs.js!../../../../node_modules/sass-loader/dist/cjs.js!../../../../node_modules/svelte-loader/index.js?cssPath=/home/runner/work/mockup/mockup/src/pat/contentbrowser/src/ContentBrowser.svelte.2.css!./ContentBrowser.svelte\";\n       export default content && content.locals ? content.locals : undefined;\n","<script>\n    import utils from \"@patternslib/patternslib/src/core/utils\";\n    import { getContext } from \"svelte\";\n    import * as animateScroll from \"svelte-scrollto\";\n    import { fly } from \"svelte/transition\";\n    import _t from \"../../../core/i18n-wrapper\";\n    import Upload from \"../../upload/upload\";\n    import contentStore from \"./ContentStore\";\n    import {\n        clickOutside,\n        get_items_from_uids,\n        request,\n        resolveIcon,\n        updateRecentlyUsed,\n    } from \"./utils\";\n    import Favorites from \"./Favorites.svelte\";\n    import RecentlyUsed from \"./RecentlyUsed.svelte\";\n\n    animateScroll.setGlobalOptions({\n        scrollX: true,\n        container: \".levelColumns\",\n        duration: 500,\n    });\n\n    // get context stores\n    const currentPath = getContext(\"currentPath\");\n    const config = getContext(\"config\");\n    const pathCache = getContext(\"pathCache\");\n    const showContentBrowser = getContext(\"showContentBrowser\");\n    const selectedItems = getContext(\"selectedItems\");\n    const selectedUids = getContext(\"selectedUids\");\n    const previewUids = getContext(\"previewUids\");\n\n    // initialize content browser store\n    const contentItems = contentStore($config, pathCache);\n\n    let showUpload = false;\n    let previewItem = {};\n    let keyboardNavInitialized = false;\n    let shiftKey = false;\n\n    let vw = Math.max(document.documentElement.clientWidth || 0, window.innerWidth || 0);\n\n    function updatePreview({ data = null, uuid = null, action = \"show\" }) {\n        if (data && action == \"show\") {\n            previewItem = data;\n            $previewUids = [data.UID];\n        } else if (uuid && action == \"add\" && $previewUids.indexOf(uuid) === -1) {\n            if (\n                $config.maximumSelectionSize > 0 &&\n                $previewUids.length >= $config.maximumSelectionSize\n            ) {\n                // respect maximumSelectionSize\n                return;\n            }\n            $previewUids = [...$previewUids, uuid]; // NOTE: $previewUids.push() is not a reactive change\n        } else if (uuid && action == \"remove\" && $previewUids.indexOf(uuid) !== -1) {\n            previewUids.update((n) => {\n                n.splice(n.indexOf(uuid), 1);\n                return n;\n            });\n        } else if (action == \"clear\") {\n            previewItem = {};\n            $previewUids = [];\n        }\n    }\n\n    async function upload() {\n        updatePreview({ action: \"clear\" });\n        showUpload = true;\n        await utils.timeout(1);\n        const uploadEl = document.querySelector(\".upload-wrapper\");\n        uploadEl.classList.add(\"pat-upload\");\n        const patUpload = new Upload(uploadEl, {\n            baseUrl: $config.rootUrl,\n            currentPath: $currentPath,\n            relativePath: \"@@fileUpload\",\n            allowPathSelection: false,\n            hiddenInputContainer: \".upload-wrapper\",\n            success: (fileUpload, obj) => {\n                contentItems.get({ path: $currentPath, updateCache: true });\n            },\n        });\n    }\n\n    function showPreview(item) {\n        if ($config.mode == \"search\") {\n            // one level search mode\n            updatePreview({ data: item });\n        } else if (item.is_folderish) {\n            $previewUids = [item.UID];\n            currentPath.set(item.path);\n        } else {\n            const pathParts = item.path.split(\"/\");\n            const folderPath = pathParts.slice(0, pathParts.length - 1).join(\"/\");\n            currentPath.set(folderPath || $config.rootPath);\n            updatePreview({ data: item });\n        }\n        scrollToRight();\n    }\n\n    function changePath(item, e) {\n        // always hide upload when changing path\n        showUpload = false;\n\n        // clear previous selection\n        updatePreview({ action: \"clear\" });\n\n        if (item === \"/\" || item === $config.rootPath) {\n            // clicked \"home\" button\n            currentPath.set($config.rootPath);\n            return;\n        }\n\n        // show clicked item\n        showPreview(item);\n    }\n\n    function clickItem(item, e) {\n        if (!keyboardNavInitialized) {\n            // if we've already clicked an element with the mouse\n            // do not start over keyboardnav\n            keyboardNavInitialized = true;\n        }\n\n        // check for multiselection\n        const levelWrapper = e.currentTarget.closest(\".levelItems\");\n        const prevSelection = levelWrapper.querySelectorAll(\".selectedItem\");\n\n        if (prevSelection.length && $config.maximumSelectionSize != 1) {\n            // check for pressed shift or ctrl/meta key for multiselection\n\n            if (shiftKey || e?.shiftKey) {\n                // iter through the wrapper children and select all\n                // inbetween current selection and last preview\n                let select = false;\n                for (const el of levelWrapper.children) {\n                    if ([item.UID, previewItem.UID].indexOf(el.dataset.uuid) !== -1) {\n                        if (select) {\n                            // stop selecting but make sure the last item is selected too\n                            updatePreview({\n                                uuid: el.dataset.uuid,\n                                action: \"add\",\n                            });\n                            select = false;\n                            continue;\n                        }\n                        // start selecting\n                        select = true;\n                    }\n                    updatePreview({\n                        uuid: el.dataset.uuid,\n                        action: select ? \"add\" : \"remove\",\n                    });\n                }\n            } else if (e?.metaKey || e?.ctrlKey) {\n                // de/select multiple single items\n                // NOTE: only for mouse click event\n                updatePreview({\n                    uuid: item.UID,\n                    action: $previewUids.indexOf(item.UID) == -1 ? \"add\" : \"remove\",\n                });\n            } else {\n                // unselect\n                [...prevSelection].map((el) => el.classList.remove(\"selectedItem\"));\n                changePath(item, e);\n            }\n        } else {\n            changePath(item, e);\n        }\n\n        e.currentTarget.focus(); // needed for keyboard navigation\n        e.currentTarget.classList.add(\"selectedItem\");\n    }\n\n    function initKeyboardNav() {\n        // focus first element when showing contentbrowser\n        if (keyboardNavInitialized) {\n            return;\n        }\n        const possibleFocusEls = [\n            ...document.querySelectorAll(\".levelColumn .inPath\"), // previously selected folder\n            ...document.querySelectorAll(\".levelColumn .selectedItem\"), // previously selected item\n        ];\n        if(!possibleFocusEls.length && document.querySelector(\".levelColumn .contentItem\")) {\n            possibleFocusEls.push(document.querySelector(\".levelColumn .contentItem\"));\n        }\n        if (possibleFocusEls.length) {\n            keyboardNavInitialized = true;\n            possibleFocusEls[0].focus();\n        }\n    }\n\n    function keyboardNavigation(item, e) {\n        const node = e.currentTarget;\n        shiftKey = e.shiftKey;\n        if (e.key == \"Escape\") {\n            cancelSelection();\n        }\n        if (\n            e.key == \"ArrowDown\" &&\n            node?.nextElementSibling?.classList.contains(\"contentItem\")\n        ) {\n            node.nextElementSibling.click();\n        }\n        if (\n            e.key == \"ArrowUp\" &&\n            node?.previousElementSibling?.classList.contains(\"contentItem\")\n        ) {\n            node.previousElementSibling.click();\n        }\n        if (e.key == \"ArrowRight\") {\n            const currCol = e.target.closest(\".levelColumn\");\n            const nxtCol = currCol?.nextElementSibling;\n            if (!nxtCol || !nxtCol.classList.contains(\"levelColumn\")) {\n                return;\n            }\n            nxtCol.querySelector(\".contentItem\")?.click();\n        }\n        if (e.key == \"ArrowLeft\") {\n            const currCol = e.target.closest(\".levelColumn\");\n            const prevCol = currCol?.previousElementSibling;\n            if (!prevCol || !prevCol.classList.contains(\"levelColumn\")) {\n                return;\n            }\n            prevCol.querySelector(\".inPath\").click();\n        }\n        if (e.key == \"Space\") {\n            // add item to selection (like metaKey + click)\n            clickItem(item, e, true);\n        }\n        if (e.key == \"Enter\") {\n            if (isSelectable(item)) {\n                if ($config.maximumSelectionSize == 1) {\n                    addItem(item);\n                } else {\n                    addSelectedItems();\n                }\n            }\n        }\n    }\n\n    async function addItem(item) {\n        if ($config.maximumSelectionSize == 1) {\n            selectedItems.set([item]);\n            selectedUids.set([item.UID]);\n        } else {\n            selectedItems.update((n) => [...n, item]);\n            selectedUids.update(() => $selectedItems.map((x) => x.UID));\n        }\n        updateRecentlyUsed(item, $config);\n        updatePreview({ action: \"clear\" });\n        $showContentBrowser = false;\n        keyboardNavInitialized = false;\n    }\n\n    async function addSelectedItems() {\n        const previewItems = await get_items_from_uids($previewUids, $config);\n        selectedItems.update((n) => {\n            for (const it of previewItems) {\n                if ($selectedUids.indexOf(it.UID) != -1) continue;\n                n.push(it);\n            }\n            return n;\n        });\n        selectedUids.update(() => $selectedItems.map((x) => x.UID));\n        updatePreview({ action: \"clear\" });\n        $showContentBrowser = false;\n        keyboardNavInitialized = false;\n    }\n\n    function selectRecentlyUsed(event) {\n        addItem(event.detail.item);\n    }\n\n    async function selectFavorite(event) {\n        const path = event.detail.item.path;\n        const response = await request({\n            vocabularyUrl: $config.vocabularyUrl,\n            attributes: $config.attributes,\n            levelInfoPath: path,\n        });\n        if (!response.total) {\n            alert(`${path} not found!`);\n            return;\n        }\n        const item = response.results[0];\n        if (!item.path) {\n            // fix for root\n            item.path = $config.rootPath;\n        }\n        changePath(item);\n    }\n\n    function cancelSelection() {\n        $showContentBrowser = false;\n        keyboardNavInitialized = false;\n        updatePreview({ action: \"clear\" });\n    }\n\n    function isSelectable(item) {\n        return $selectedUids.indexOf(item.UID) === -1;\n    }\n\n    function scrollToRight() {\n        const scrollContainer = document.querySelector(\".levelColumns\");\n        if (scrollContainer) {\n            animateScroll.scrollTo({\n                // element: \".levelColumn:last-child\",\n                x: scrollContainer.scrollWidth + 100,\n            });\n        }\n    }\n\n    function itemInPath(item) {\n        return $config.mode == \"browse\" && $currentPath.indexOf(item.path) != -1;\n    }\n\n    const filterItems = utils.debounce((e) => {\n        contentItems.get({ path: $currentPath, searchTerm: e.target.value });\n    }, 300);\n\n    function loadMore(node) {\n        const observer = new IntersectionObserver(\n            (entries) => {\n                for (const entry of entries) {\n                    if (entry.isIntersecting) {\n                        const path = node.dataset.levelPath;\n                        const page = parseInt(node.dataset.levelNextPage);\n                        contentItems.get({\n                            loadMorePath: path,\n                            page: page,\n                        });\n                    }\n                }\n            },\n            { threshold: 0, root: null, margin: \"0px\" },\n        );\n        // defer observing\n        window.setTimeout(() => {\n            observer.observe(node);\n        }, 500);\n    }\n\n    $: {\n        if ($showContentBrowser) {\n            contentItems.get({ path: $currentPath });\n        }\n    }\n\n    $: {\n        $contentItems;\n        scrollToRight();\n    }\n\n    $: {\n        $previewUids;\n    }\n</script>\n\n{#if $showContentBrowser}\n    <div class=\"content-browser-position-wrapper\">\n        <nav\n            class=\"content-browser\"\n            transition:fly={{ x: (vw / 100) * 94, opacity: 1 }}\n            on:introend={() => {\n                scrollToRight();\n                initKeyboardNav();\n            }}\n            use:clickOutside\n            on:click_outside={cancelSelection}\n        >\n            <div class=\"toolBar navbar\">\n                <div class=\"filter me-3\">\n                    <input type=\"text\" name=\"filter\" on:input={filterItems} />\n                    <label for=\"filter\"\n                        ><svg use:resolveIcon={{ iconName: \"search\" }} /></label\n                    >\n                </div>\n                <RecentlyUsed on:selectItem={selectRecentlyUsed} />\n                <Favorites on:selectItem={selectFavorite} />\n                {#if $config.uploadEnabled}\n                    <div class=\"ms-2\">\n                        <button\n                            type=\"button\"\n                            class=\"upload btn btn-outline-light btn-sm\"\n                            tabindex=\"0\"\n                            on:keydown={upload}\n                            on:click={upload}\n                            ><svg use:resolveIcon={{ iconName: \"upload\" }} />\n                            {_t(\"upload to ${current_path}\", {\n                                current_path: $currentPath,\n                            })}</button\n                        >\n                    </div>\n                {/if}\n                <button\n                    class=\"btn btn-link text-white ms-auto\"\n                    tabindex=\"0\"\n                    on:click|preventDefault={() => cancelSelection()}\n                    ><svg use:resolveIcon={{ iconName: \"x-circle\" }} /></button\n                >\n            </div>\n            {#await $contentItems}\n                <p>{_t(\"loading content items\")}</p>\n            {:then levels}\n                <div class=\"levelColumns\">\n                    {#each levels as level, i (level.path)}\n                        <div\n                            class=\"levelColumn{i % 2 == 0 ? ' odd' : ' even'}\"\n                            in:fly|local={{ duration: 300 }}\n                        >\n                            <div class=\"levelToolbar\">\n                                {#if i == 0 && $config.mode == \"browse\"}\n                                    <button\n                                        type=\"button\"\n                                        class=\"btn btn-link btn-xs ps-0\"\n                                        tabindex=\"0\"\n                                        on:keydown={() => changePath($config.rootPath)}\n                                        on:click={() => changePath($config.rootPath)}\n                                        ><svg\n                                            use:resolveIcon={{ iconName: \"house\" }}\n                                        /></button\n                                    >\n                                {/if}\n                                {#if level.selectable}\n                                    <button\n                                        class=\"btn btn-primary btn-xs\"\n                                        title=\"{level.displayPath}\"\n                                        disabled={!isSelectable(level)}\n                                        on:click|preventDefault={() => addItem(level)}\n                                    >\n                                        {_t(\"select ${level_path}\", {\n                                            level_path: level.Title,\n                                        })}\n                                    </button>\n                                {/if}\n                                <div class=\"levelActions\">\n                                    {#if !level.gridView}\n                                        <button\n                                            class=\"btn btn-link btn-xs grid-view\"\n                                            on:click={() => (level.gridView = true)}\n                                        >\n                                            <svg\n                                                use:resolveIcon={{ iconName: \"grid\" }}\n                                            />\n                                        </button>\n                                    {:else}\n                                        <button\n                                            class=\"btn btn-link btn-xs grid-view\"\n                                            on:click={() => (level.gridView = false)}\n                                        >\n                                            <svg\n                                                use:resolveIcon={{ iconName: \"list\" }}\n                                            />\n                                        </button>\n                                    {/if}\n                                </div>\n                            </div>\n                            <div class=\"levelItems\">\n                                {#each level.results || [] as item, n}\n                                    <!-- svelte-ignore missing-declaration -->\n                                    <div\n                                        class=\"contentItem{n % 2 == 0\n                                            ? ' odd'\n                                            : ' even'}{itemInPath(item)\n                                            ? ' inPath'\n                                            : ''}{$previewUids.indexOf(item.UID) != -1\n                                            ? ' selectedItem'\n                                            : ''}{!isSelectable(item)\n                                            ? ' text-muted'\n                                            : ''}\"\n                                        role=\"button\"\n                                        tabindex={n}\n                                        data-uuid={item.UID}\n                                        on:keydown|preventDefault={(e) =>\n                                            keyboardNavigation(item, e)}\n                                        on:click={(e) => clickItem(item, e)}\n                                    >\n                                        {#if level.gridView}\n                                            <div class=\"grid-preview\">\n                                                {#if item.getIcon}\n                                                    <img\n                                                        src={`${item.getURL}/@@images/image/thumb`}\n                                                        alt={item.Title}\n                                                    />\n                                                {:else}\n                                                    <svg\n                                                        use:resolveIcon={{\n                                                            iconName: `contenttype/${item.portal_type.toLowerCase().replace(/\\.| /g, \"-\")}`,\n                                                        }}\n                                                    />\n                                                {/if}\n                                                {item.Title}\n                                            </div>\n                                        {:else}\n                                            <div\n                                                class=\"item-title\"\n                                                title=\"{item.portal_type}: {item.Title}\"\n                                            >\n                                                <svg\n                                                    use:resolveIcon={{\n                                                        iconName: `contenttype/${item.portal_type.toLowerCase().replace(/\\.| /g, \"-\")}`,\n                                                    }}\n                                                />\n                                                {item.Title}\n                                                {#if $config.mode == \"search\"}\n                                                <br><span class=\"small\">{item.path}</span>\n                                                {/if}\n                                            </div>\n                                        {/if}\n                                        {#if item.is_folderish && $config.mode == \"browse\"}\n                                            <div class=\"browseSub\">\n                                                <svg\n                                                    use:resolveIcon={{\n                                                        iconName: \"arrow-right-circle\",\n                                                    }}\n                                                />\n                                            </div>\n                                        {/if}\n                                    </div>\n                                {/each}\n                                {#if level.more}\n                                    <div\n                                        class=\"loadmore\"\n                                        data-level-path={level.path}\n                                        data-level-next-page={parseInt(level.page) + 1}\n                                        use:loadMore\n                                    >\n                                        <div class=\"spinner-border\" role=\"status\"></div>\n                                    </div>\n                                {/if}\n                                {#if level.total == 0}\n                                    <div class=\"contentItem\">\n                                        <p>{_t(\"no results found\")}</p>\n                                    </div>\n                                {/if}\n                            </div>\n                        </div>\n                    {/each}\n                    {#if previewItem?.UID && $previewUids.length == 1}\n                        <div class=\"preview\">\n                            <div class=\"levelToolbar\">\n                                <button\n                                    class=\"btn btn-primary btn-xs\"\n                                    title={previewItem.path.split(\"/\").pop()}\n                                    disabled={!isSelectable(previewItem)}\n                                    on:click|preventDefault={() => addItem(previewItem)}\n                                    >{_t(\"select ${preview_path}\", {\n                                        preview_path: previewItem.Title,\n                                    })}</button\n                                >\n                            </div>\n                            <div class=\"info\">\n                                {#if previewItem.getIcon}\n                                    <div class=\"previewImage\">\n                                        <img\n                                            src=\"{previewItem.getURL}/@@images/image/preview\"\n                                            alt={previewItem.Title}\n                                        />\n                                    </div>\n                                {:else}\n                                    <div class=\"previewIcon\">\n                                        <svg\n                                            use:resolveIcon={{\n                                                iconName: `contenttype/${previewItem.portal_type.toLowerCase().replace(/\\.| /g, \"-\")}`,\n                                            }}\n                                        />\n                                    </div>\n                                {/if}\n                                <h4>{previewItem.Title}</h4>\n                                <p>{previewItem.Description}</p>\n                            </div>\n                        </div>\n                    {/if}\n                    {#if $previewUids.length > 1}\n                        <div class=\"preview\">\n                            <div class=\"levelToolbar\">\n                                <button\n                                    class=\"btn btn-primary btn-xs\"\n                                    on:click|preventDefault={addSelectedItems}\n                                    >{_t(\"add selected items\")}</button\n                                >\n                            </div>\n                            <div class=\"info\">\n                                <svg\n                                    use:resolveIcon={{\n                                        iconName: \"files\",\n                                    }}\n                                />\n                            </div>\n                        </div>\n                    {/if}\n                    {#if showUpload}\n                        <div class=\"upload-wrapper\"></div>\n                    {/if}\n                </div>\n            {:catch error}\n                <p style=\"color: red\">{error.message}</p>\n            {/await}\n        </nav>\n    </div>\n{/if}\n\n<style>\n    .content-browser-position-wrapper {\n        position: fixed;\n        top: 0;\n        right: 0;\n        display: flex;\n        justify-content: end;\n        z-index: 1500;\n        width: 100%;\n        height: 100vh;\n        background-color: rgba(0, 0, 0, 0.25);\n    }\n    .btn-xs {\n        --bs-btn-padding-y: 0.15rem;\n        --bs-btn-padding-x: 0.5rem;\n        --bs-btn-font-size: 0.75rem;\n    }\n    .content-browser {\n        height: 100vh;\n        min-width: 550px;\n        background-color: var(--bs-light-bg-subtle);\n        border-left: var(--bs-border-style) var(--bs-border-width) #fff;\n        z-index: 1500;\n        display: flex;\n        flex-direction: column;\n    }\n    .toolBar {\n        background-color: var(--bs-primary);\n        padding: 0.325rem 0.75rem;\n        color: var(--bs-light);\n        width: 100%;\n        display: flex;\n        justify-content: start;\n    }\n    .toolBar :global(svg) {\n        vertical-align: -0.125em;\n    }\n    .levelColumns {\n        display: flex;\n        flex-wrap: nowrap;\n        width: 100%;\n        overflow-y: hidden;\n        overflow-x: auto;\n        flex-grow: 3;\n        border-left: var(--bs-border-style) var(--bs-border-color) var(--bs-border-width);\n        user-select: none;\n    }\n\n    .levelColumn {\n        width: 320px;\n        border-right: var(--bs-border-style) var(--bs-border-width)\n            var(--bs-border-color);\n        display: flex;\n        flex-direction: column;\n        flex-grow: 0;\n        flex-shrink: 0;\n    }\n\n    .levelToolbar {\n        width: 100%;\n        height: 2.5rem;\n        display: flex;\n        justify-content: space-between;\n        padding: 0.375rem;\n        border-bottom: var(--bs-border-style) var(--bs-border-width)\n            var(--bs-border-color);\n    }\n    .levelToolbar > .levelActions {\n        margin-left: auto;\n    }\n    .levelToolbar > button{\n        white-space: nowrap;\n        overflow: hidden;\n        text-overflow: ellipsis;\n    }\n\n    .levelItems {\n        overflow-x: auto;\n    }\n    .contentItem {\n        /* padding: 1rem 1rem; */\n        display: flex;\n        align-items: center;\n        justify-content: space-between;\n        font-size: 90%;\n        min-height: 2rem;\n    }\n    .contentItem:focus-visible {\n        outline: none;\n    }\n    .contentItem.even {\n        background-color: rgba(var(--bs-secondary-bg-rgb), .4);\n    }\n    .contentItem.inPath,\n    .contentItem:focus {\n        background-color: rgba(var(--bs-primary-rgb), 0.15);\n    }\n    .contentItem.selectedItem {\n        background-color: var(--bs-primary);\n        color: var(--bs-body-bg);\n    }\n    .contentItem > * {\n        padding: 0.5rem;\n        white-space: nowrap;\n        max-width: 450px;\n        text-overflow: ellipsis;\n        overflow: hidden;\n    }\n    .contentItem > .browseSub {\n        flex-shrink: 0;\n    }\n\n    .contentItem .grid-preview > img {\n        width: 95px;\n        height: 95px;\n        object-fit: cover;\n        float: left;\n        margin-right: 1rem;\n    }\n    .preview {\n        width: 320px;\n        min-height: 300px;\n        display: flex;\n        flex-direction: column;\n        align-items: center;\n    }\n    .preview .info {\n        padding: 0.5rem;\n        width: 100%;\n        word-wrap: anywhere;\n    }\n    .preview .info .previewIcon {\n        margin: 0 auto 1rem auto;\n    }\n    .preview .info .previewIcon svg {\n        width: 50px !important;\n        height: 50px !important;\n    }\n    .preview h4 {\n        font-size: 1.2 rem;\n    }\n    .preview img {\n        max-width: 100%;\n        max-width: 100%;\n        margin-bottom: 0.5rem;\n    }\n\n    .upload-wrapper {\n        padding: 1rem;\n        width: 590px;\n        overflow-x: auto;\n    }\n    .loadmore {\n        text-align: center;\n        padding: 0.25rem 0;\n    }\n</style>\n","\n      import API from \"!../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"../../../../node_modules/@patternslib/dev/webpack/style-inserter.js\";\n      import setAttributes from \"!../../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../node_modules/css-loader/dist/cjs.js!../../../../node_modules/sass-loader/dist/cjs.js!../../../../node_modules/svelte-loader/index.js?cssPath=/home/runner/work/mockup/mockup/src/pat/contentbrowser/src/SelectedItems.svelte.1.css!./SelectedItems.svelte\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\noptions.insert = insertFn;\noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../node_modules/css-loader/dist/cjs.js!../../../../node_modules/sass-loader/dist/cjs.js!../../../../node_modules/svelte-loader/index.js?cssPath=/home/runner/work/mockup/mockup/src/pat/contentbrowser/src/SelectedItems.svelte.1.css!./SelectedItems.svelte\";\n       export default content && content.locals ? content.locals : undefined;\n","<script>\n    import { getContext, onMount, setContext } from \"svelte\";\n    import { get_items_from_uids } from \"./utils.js\";\n    import Sortable from \"sortablejs\";\n    import _t from \"../../../core/i18n-wrapper\";\n    import events from \"@patternslib/patternslib/src/core/events\";\n    import plone_registry from \"@plone/registry\";\n\n    let ref;\n    let initializing = true;\n\n    // get reactive context config\n    const config = getContext(\"config\");\n    const fieldId = $config.fieldId;\n    const selectedItemsNode = document.getElementById(fieldId);\n\n    // get reactive context store\n    const selectedItems = getContext(\"selectedItems\");\n    const selectedUids = getContext(\"selectedUids\");\n\n    // showContentBrowser reactive state\n    const showContentBrowser = getContext(\"showContentBrowser\");\n\n    // get selectedItem component from registry.\n    // the registry key can be customized with pattern_options\n    // if an addon registers a custom component to a custom key\n    const RegisteredSelectedItem = plone_registry.getComponent(\n        $config.componentRegistryKeys?.selectedItem || \"pat-contentbrowser.SelectedItem\"\n    );\n\n    onMount(async () => {\n        await initializeSelectedItemsStore();\n        initializeSorting();\n        initializing = false;\n    });\n\n    function unselectItem(i) {\n        selectedItems.update((n) => {\n            n.splice(i, 1);\n            return n;\n        });\n        selectedUids.update(() => $selectedItems.map((x) => x.UID));\n    }\n\n    // use this function in \"SelectedItem\" component with\n    // const unselectItem = getContext(\"unselectItem\")\n    setContext(\"unselectItem\", unselectItem);\n\n    async function initializeSelectedItemsStore() {\n        const initialValue = $config.selection.length\n            ? $config.selection\n            : selectedItemsNode?.value\n              ? selectedItemsNode.value.split($config.separator)\n              : [];\n\n        if (!initialValue.length) {\n            return;\n        }\n\n        $selectedItems = await get_items_from_uids(initialValue, $config);\n        selectedUids.update(() => $selectedItems.map((x) => x.UID));\n    }\n\n    function initializeSorting() {\n        if ($config.maximumSelectionSize !== 1 && $selectedItems.length > 1) {\n            Sortable.create(\n                selectedItemsNode.previousSibling.querySelector(\n                    \".content-browser-selected-items\",\n                ),\n                {\n                    draggable: \".selected-item\",\n                    animation: 200,\n                    onUpdate: (e) => {\n                        let sortedUuids = [];\n                        for (const el of e.target.children) {\n                            sortedUuids.push(el.dataset[\"uuid\"]);\n                        }\n                        setNodeValue(sortedUuids);\n                    },\n                },\n            );\n        }\n    }\n\n    function selectedUidsFromSelectedItems() {\n        let items = [];\n        $selectedItems.forEach((item) => {\n            items.push(item.UID);\n        });\n        return items;\n    }\n\n    function setNodeValue(selectedUids) {\n        const node_val = selectedUids.join($config.separator);\n        selectedItemsNode.value = node_val;\n        selectedItemsNode.dispatchEvent(events.change_event());\n    }\n\n    function LoadSelectedItemComponent(node, props) {\n        const component = new RegisteredSelectedItem.component({target: node, props: props});\n    }\n\n    $: {\n        $selectedItems;\n        if ($selectedItems.length || !initializing) {\n            setNodeValue(selectedUidsFromSelectedItems());\n            initializeSorting();\n        }\n    }\n</script>\n\n<div\n    class=\"content-browser-selected-items-wrapper\"\n    style=\"width: {$config.width || 'auto'}\"\n    bind:this={ref}\n>\n    <!-- svelte-ignore a11y-click-events-have-key-events -->\n    <!-- svelte-ignore a11y-no-static-element-interactions -->\n    <div class=\"content-browser-selected-items\"\n         on:click={() => $showContentBrowser = $selectedItems.length ? false : true }>\n        {#if $selectedItems}\n            {#each $selectedItems as selItem, i (selItem.UID)}\n                <div use:LoadSelectedItemComponent={{idx:i, item:selItem}} />\n            {/each}\n        {/if}\n        {#if !$selectedItems}\n            <p>{_t(\"loading selected items\")}</p>\n        {/if}\n    </div>\n    <!-- svelte-ignore a11y-invalid-attribute -->\n    <a\n        class=\"btn btn-primary\" href=\"#\"\n        style=\"border-radius:0 var(--bs-border-radius) var(--bs-border-radius) 0\"\n        on:click|preventDefault={() => ($showContentBrowser = true)}\n        >{_t(\"Select\")}</a\n    >\n</div>\n\n<style>\n    .content-browser-selected-items-wrapper {\n        display: flex;\n        align-items: start;\n    }\n    .content-browser-selected-items {\n        list-style: none;\n        background-color: var(--bs-body-bg);\n        border-radius: var(--bs-border-radius) 0 0 var(--bs-border-radius);\n        border: var(--bs-border-style) var(--bs-border-color) var(--bs-border-width);\n        min-height: 2.4rem;\n        padding: 0.5rem 0.5rem 0 0.5rem;\n        flex: 1 1 auto;\n    }\n</style>\n","import { setContext } from 'svelte';\nimport { writable } from 'svelte/store';\n\nexport const gridView = writable(false);\n\nexport function setCurrentPath() {\n    let currentPath = writable('');\n    setContext('currentPath', currentPath);\n}\n\nexport function setPathCache() {\n    let pathCache = writable({});\n    setContext('pathCache', pathCache);\n}\n\n// reactive context stores\nexport function setSelectedItems() {\n    let selItems = writable([]);\n    setContext('selectedItems', selItems);\n}\n\nexport function setConfig() {\n    let config = writable({});\n    setContext('config', config);\n}\n\nexport function setShowContentBrowser() {\n    let showContentBrowser = writable(false);\n    setContext('showContentBrowser', showContentBrowser);\n}\n\nexport function setSelectedUids() {\n    let selUids = writable([]);\n    setContext(\"selectedUids\", selUids);\n}\n\nexport function setPreviewUids() {\n    let prevUids = writable([]);\n    setContext(\"previewUids\", prevUids);\n}\n","<script>\n    import logger from \"@patternslib/patternslib/src/core/logging\";\n    import { getContext } from \"svelte\";\n    import ContentBrowser from \"./ContentBrowser.svelte\";\n    import SelectedItems from \"./SelectedItems.svelte\";\n    import {\n        setConfig,\n        setCurrentPath,\n        setPathCache,\n        setSelectedItems,\n        setSelectedUids,\n        setPreviewUids,\n        setShowContentBrowser,\n    } from \"./stores\";\n\n    export let maxDepth;\n    export let width;\n    export let attributes;\n    export let contextPath;\n    export let vocabularyUrl;\n    export let mode = \"browse\";\n    export let rootPath = \"\";\n    export let rootUrl = \"\";\n    export let basePath = \"\";\n    export let selectableTypes = [];\n    export let maximumSelectionSize = -1;\n    export let separator;\n    export let selection = [];\n    export let query = {};\n    export let fieldId;\n    export let upload;\n    export let favorites;\n    export let recentlyUsed;\n    export let recentlyUsedKey;\n    export let recentlyUsedMaxItems;\n    export let bSize = 20;\n    export let componentRegistryKeys = {};\n\n    const log = logger.getLogger(\"pat-contentbrowser\");\n\n    // initialize context stores\n    setCurrentPath();\n    setConfig();\n    setPathCache();\n    setSelectedItems();\n    setShowContentBrowser();\n    setSelectedUids();\n    setPreviewUids();\n\n    // initially set current path\n    const currentPath = getContext(\"currentPath\");\n\n    if (!$currentPath) {\n        if(basePath || rootPath) {\n            // if root path is not above base path we start at rootPath\n            $currentPath = basePath.indexOf(rootPath) != 0 ? rootPath : basePath;\n        } else {\n            // no path available. try to determine path from vocabularyUrl\n            const vocabPath = new URL(vocabularyUrl).pathname.split(\"/\");\n            rootPath = contextPath = $currentPath = vocabPath.slice(0, vocabPath.length - 1).join(\"/\") || \"/\";\n        }\n    }\n\n    let config = getContext(\"config\");\n    $config = {\n        mode: mode,\n        attributes: attributes,\n        contextPath: contextPath,\n        vocabularyUrl: vocabularyUrl,\n        width: width,\n        maxDepth: maxDepth,\n        rootPath: rootPath,\n        rootUrl: rootUrl,\n        basePath: basePath,\n        selectableTypes: selectableTypes,\n        maximumSelectionSize: maximumSelectionSize,\n        separator: separator,\n        selection: selection,\n        query: query,\n        fieldId: fieldId,\n        uploadEnabled: upload,\n        favorites: favorites,\n        recentlyUsed: recentlyUsed,\n        recentlyUsedKey: recentlyUsedKey,\n        recentlyUsedMaxItems: recentlyUsedMaxItems,\n        pageSize: bSize,\n        componentRegistryKeys: componentRegistryKeys,\n    };\n\n    log.debug(`Initialized App<${fieldId}> with config ${JSON.stringify($config)}`);\n</script>\n\n<ContentBrowser />\n<SelectedItems />\n"],"names":["async","request","_ref","method","vocabularyUrl","attributes","path","uids","searchTerm","searchPath","levelInfoPath","selectableTypes","pageSize","page","vocabQuery","criteria","i","o","v","sort_on","sort_order","length","push","results","total","url","indexOf","JSON","stringify","size","headers","Headers","set","response","fetch","ok","errors","json","filtered_response","it","portal_type","is_folderish","get_items_from_uids","config","selectedItemsFromUids","sort","a","b","UID","resolveIcon","node","_ref2","iconName","iconCode","utils","getIcon","outerHTML","destroy","clickOutside","handleClick","event","contains","target","dispatchEvent","CustomEvent","document","addEventListener","removeEventListener","recentlyUsedItems","filterItems","ret","storage","get","recentlyUsedKey","slice","filter","max","parseInt","recentlyUsedMaxItems","updateRecentlyUsed","item","recentlyUsed","alreadyPresent","splice","___CSS_LOADER_EXPORT___","module","id","pathCache","store","writable","load","query","updateCache","loadMorePath","mode","rootPath","level","update","levels","has_more","more","selectable","gridView","search","pC","p","forEach","l","nextBatch","rootPathParts","replace","split","physicalPath","hideRootPath","startsWith","pathParts","overlapIdx","idx","includes","join","concat","paths","parts","maxDepth","Math","min","partsToShow","pathPrefix","sub_path","pop","pathCounter","isFirstPath","displayPath","RegExp","levelInfo","Title","n","browse","favorites","title","dispatch","select","favorite","reverse","getURL","toLowerCase","items","$config","options","styleTagTransform","setAttributes","insert","domAPI","insertStyleElement","locals","uploadEnabled","x","opacity","current_path","message","level_path","duration","preview_path","Description","scrollX","container","currentPath","showContentBrowser","selectedItems","selectedUids","previewUids","contentItems","showUpload","previewItem","keyboardNavInitialized","shiftKey","vw","documentElement","clientWidth","window","innerWidth","updatePreview","data","uuid","action","$previewUids","maximumSelectionSize","changePath","e","folderPath","scrollToRight","showPreview","clickItem","levelWrapper","currentTarget","closest","prevSelection","querySelectorAll","el","children","dataset","metaKey","ctrlKey","map","classList","remove","focus","add","initKeyboardNav","possibleFocusEls","querySelector","keyboardNavigation","key","cancelSelection","nextElementSibling","click","previousElementSibling","currCol","nxtCol","prevCol","isSelectable","addItem","addSelectedItems","$selectedItems","$showContentBrowser","previewItems","$selectedUids","scrollContainer","scrollWidth","debounce","$currentPath","value","timeout","uploadEl","baseUrl","rootUrl","relativePath","allowPathSelection","hiddenInputContainer","success","fileUpload","obj","detail","alert","observer","IntersectionObserver","entries","entry","isIntersecting","levelPath","levelNextPage","threshold","root","margin","setTimeout","observe","width","ref","initializing","fieldId","selectedItemsNode","getElementById","RegisteredSelectedItem","componentRegistryKeys","selectedItem","initializeSorting","previousSibling","draggable","animation","onUpdate","sortedUuids","setNodeValue","node_val","separator","events","change_event","initialValue","selection","initializeSelectedItemsStore","selectedUidsFromSelectedItems","props","component","contextPath","basePath","upload","bSize","log","getLogger","setContext","setCurrentPath","setConfig","setPathCache","selItems","setSelectedItems","setShowContentBrowser","selUids","setSelectedUids","prevUids","setPreviewUids","vocabPath","URL","pathname","debug"],"sourceRoot":""}