(self.webpackChunk_plone_mockup=self.webpackChunk_plone_mockup||[]).push([[65348],{65348:function(){!function(){"use strict";var e=tinymce.util.Tools.resolve("tinymce.PluginManager");const t=e=>!(e=>null==e)(e),n=Object.hasOwnProperty,o=e=>"\ufeff"===e,r=e=>t=>t.options.get(e),a=r("autolink_pattern"),s=r("link_default_target"),l=r("link_default_protocol"),c=r("allow_unsafe_link_target");var i=tinymce.util.Tools.resolve("tinymce.dom.TextSeeker");const d=e=>/^[(\[{ \u00a0]$/.test(e),u=(e,t,n)=>{for(let r=t-1;r>=0;r--){const t=e.charAt(r);if(!o(t)&&n(t))return r}return-1},f=(e,t)=>{const o=e.schema.getVoidElements(),r=a(e),{dom:s,selection:c}=e;if(null!==s.getParent(c.getNode(),"a[href]")||e.mode.isReadOnly())return null;const f=c.getRng(),g=i(s,e=>{return s.isBlock(e)||(t=o,r=e.nodeName.toLowerCase(),n.call(t,r))||"false"===s.getContentEditable(e)||null!==s.getParent(e,"a[href]");var t,r}),{container:k,offset:p}=((e,t)=>{let n=e,o=t;for(;1===n.nodeType&&n.childNodes[o];)n=n.childNodes[o],o=3===n.nodeType?n.data.length:n.childNodes.length;return{container:n,offset:o}})(f.endContainer,f.endOffset),m=s.getParent(k,s.isBlock)??s.getRoot(),h=g.backwards(k,p+t,(e,t)=>{const n=e.data,o=u(n,t,(r=d,e=>!r(e)));var r,a;return-1===o||(a=n[o],/[?!,.;:]/.test(a))?o:o+1},m);if(!h)return null;let w=h.container;const y=g.backwards(h.container,h.offset,(e,t)=>{w=e;const n=u(e.data,t,d);return-1===n?n:n+1},m),_=s.createRng();y?_.setStart(y.container,y.offset):_.setStart(w,0),_.setEnd(h.container,h.offset);const v=_.toString().replace(/\uFEFF/g,"").match(r);if(v){let t=v[0];return(C=t).length>=4&&"www."===C.substr(0,4)?t=l(e)+"://"+t:((e,t,n=0,o)=>{const r=e.indexOf(t,n);return-1!==r&&(!!(e=>void 0===e)(o)||r+t.length<=o)})(t,"@")&&!(e=>/^([A-Za-z][A-Za-z\d.+-]*:\/\/)|mailto:/.test(e))(t)&&(t="mailto:"+t),{rng:_,url:t}}var C;return null},g=(e,t)=>{const{dom:n,selection:o}=e,{rng:r,url:a}=t,l=o.getBookmark();o.setRng(r);const i="createlink",d={command:i,ui:!1,value:a};if(!e.dispatch("BeforeExecCommand",d).isDefaultPrevented()){e.getDoc().execCommand(i,!1,a),e.dispatch("ExecCommand",d);const t=s(e);if((e=>"string"===(e=>{const t=typeof e;return null===e?"null":"object"===t&&Array.isArray(e)?"array":"object"===t&&(n=o=e,(r=String).prototype.isPrototypeOf(n)||o.constructor?.name===r.name)?"string":t;var n,o,r})(e))(t)){const r=o.getNode();n.setAttrib(r,"target",t),"_blank"!==t||c(e)||n.setAttrib(r,"rel","noopener")}}o.moveToBookmark(l),e.nodeChanged()},k=e=>{const n=f(e,-1);t(n)&&g(e,n)},p=k;e.add("autolink",e=>{(e=>{const t=e.options.register;t("autolink_pattern",{processor:"regexp",default:new RegExp("^"+/(?:[A-Za-z][A-Za-z\d.+-]{0,14}:\/\/(?:[-.~*+=!&;:'%@?^${}(),\w]+@)?|www\.|[-;:&=+$,.\w]+@)[A-Za-z\d-]+(?:\.[A-Za-z\d-]+)*(?::\d+)?(?:\/(?:[-.~*+=!;:'%@$(),\/\w]*[-~*+=%@$()\/\w])?)?(?:\?(?:[-.~*+=!&;:'%@?^${}(),\/\w]+))?(?:#(?:[-.~*+=!&;:'%@?^${}(),\/\w]+))?/g.source+"$","i")}),t("link_default_target",{processor:"string"}),t("link_default_protocol",{processor:"string",default:"https"})})(e),(e=>{e.on("keydown",n=>{13!==n.keyCode||n.isDefaultPrevented()||(e=>{const n=f(e,0);t(n)&&g(e,n)})(e)}),e.on("keyup",t=>{32===t.keyCode?k(e):(48===t.keyCode&&t.shiftKey||221===t.keyCode)&&p(e)})})(e)})}()}}]);
//# sourceMappingURL=65348.e69ece7892e9e2b784d5.min.js.map