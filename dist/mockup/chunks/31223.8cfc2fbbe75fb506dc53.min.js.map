{"version":3,"file":"chunks/31223.8cfc2fbbe75fb506dc53.min.js","mappings":"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","sources":["webpack://@plone/mockup/./src/pat/tinymce/js/template.js"],"sourcesContent":["/**\n * template plugin backport from TinyMCE version 6.8.3 (2024-02-08)\n */\nimport tinymce from \"tinymce/tinymce\";\n\nconst hasProto = (v, constructor, predicate) => {\n    var _a;\n    if (predicate(v, constructor.prototype)) {\n        return true;\n    } else {\n        return (\n            ((_a = v.constructor) === null || _a === void 0 ? void 0 : _a.name) ===\n            constructor.name\n        );\n    }\n};\nconst typeOf = (x) => {\n    const t = typeof x;\n    if (x === null) {\n        return \"null\";\n    } else if (t === \"object\" && Array.isArray(x)) {\n        return \"array\";\n    }\n    // eslint-disable-next-line no-prototype-builtins\n    else if (\n        t === \"object\" &&\n        hasProto(x, String, (o, proto) => proto.isPrototypeOf(o))\n    ) {\n        return \"string\";\n    } else {\n        return t;\n    }\n};\nconst isType = (type) => (value) => typeOf(value) === type;\nconst isSimpleType = (type) => (value) => typeof value === type;\nconst isString = isType(\"string\");\nconst isObject = isType(\"object\");\nconst isArray = isType(\"array\");\nconst isNullable = (a) => a === null || a === undefined;\nconst isNonNullable = (a) => !isNullable(a);\nconst isFunction = isSimpleType(\"function\");\nconst isArrayOf = (value, pred) => {\n    if (isArray(value)) {\n        for (let i = 0, len = value.length; i < len; ++i) {\n            if (!pred(value[i])) {\n                return false;\n            }\n        }\n        return true;\n    }\n    return false;\n};\n\nconst constant = (value) => {\n    return () => {\n        return value;\n    };\n};\nfunction curry(fn, ...initialArgs) {\n    return (...restArgs) => {\n        const all = initialArgs.concat(restArgs);\n        return fn.apply(null, all);\n    };\n}\nconst never = constant(false);\n\nconst escape = (text) => text.replace(/[.*+?^${}()|[\\]\\\\]/g, \"\\\\$&\");\n\nvar global$2 = tinymce.util.Tools;\n\nconst option = (name) => (editor) => editor.options.get(name);\nconst register$2 = (editor) => {\n    const registerOption = editor.options.register;\n    registerOption(\"template_cdate_classes\", {\n        processor: \"string\",\n        default: \"cdate\",\n    });\n    registerOption(\"template_mdate_classes\", {\n        processor: \"string\",\n        default: \"mdate\",\n    });\n    registerOption(\"template_selected_content_classes\", {\n        processor: \"string\",\n        default: \"selcontent\",\n    });\n    registerOption(\"template_preview_replace_values\", { processor: \"object\" });\n    registerOption(\"template_replace_values\", { processor: \"object\" });\n    registerOption(\"templates\", {\n        processor: (value) =>\n            isString(value) || isArrayOf(value, isObject) || isFunction(value),\n        default: [],\n    });\n    registerOption(\"template_cdate_format\", {\n        processor: \"string\",\n        default: editor.translate(\"%Y-%m-%d\"),\n    });\n    registerOption(\"template_mdate_format\", {\n        processor: \"string\",\n        default: editor.translate(\"%Y-%m-%d\"),\n    });\n};\nconst getCreationDateClasses = option(\"template_cdate_classes\");\nconst getModificationDateClasses = option(\"template_mdate_classes\");\nconst getSelectedContentClasses = option(\"template_selected_content_classes\");\nconst getPreviewReplaceValues = option(\"template_preview_replace_values\");\nconst getTemplateReplaceValues = option(\"template_replace_values\");\nconst getTemplates = option(\"templates\");\nconst getCdateFormat = option(\"template_cdate_format\");\nconst getMdateFormat = option(\"template_mdate_format\");\nconst getContentStyle = option(\"content_style\");\nconst shouldUseContentCssCors = option(\"content_css_cors\");\nconst getBodyClass = option(\"body_class\");\n\nconst addZeros = (value, len) => {\n    value = \"\" + value;\n    if (value.length < len) {\n        for (let i = 0; i < len - value.length; i++) {\n            value = \"0\" + value;\n        }\n    }\n    return value;\n};\nconst getDateTime = (editor, fmt, date = new Date()) => {\n    const daysShort = \"Sun Mon Tue Wed Thu Fri Sat Sun\".split(\" \");\n    const daysLong =\n        \"Sunday Monday Tuesday Wednesday Thursday Friday Saturday Sunday\".split(\" \");\n    const monthsShort = \"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec\".split(\" \");\n    const monthsLong =\n        \"January February March April May June July August September October November December\".split(\n            \" \",\n        );\n    fmt = fmt.replace(\"%D\", \"%m/%d/%Y\");\n    fmt = fmt.replace(\"%r\", \"%I:%M:%S %p\");\n    fmt = fmt.replace(\"%Y\", \"\" + date.getFullYear());\n    fmt = fmt.replace(\"%y\", \"\" + date.getYear());\n    fmt = fmt.replace(\"%m\", addZeros(date.getMonth() + 1, 2));\n    fmt = fmt.replace(\"%d\", addZeros(date.getDate(), 2));\n    fmt = fmt.replace(\"%H\", \"\" + addZeros(date.getHours(), 2));\n    fmt = fmt.replace(\"%M\", \"\" + addZeros(date.getMinutes(), 2));\n    fmt = fmt.replace(\"%S\", \"\" + addZeros(date.getSeconds(), 2));\n    fmt = fmt.replace(\"%I\", \"\" + (((date.getHours() + 11) % 12) + 1));\n    fmt = fmt.replace(\"%p\", \"\" + (date.getHours() < 12 ? \"AM\" : \"PM\"));\n    fmt = fmt.replace(\"%B\", \"\" + editor.translate(monthsLong[date.getMonth()]));\n    fmt = fmt.replace(\"%b\", \"\" + editor.translate(monthsShort[date.getMonth()]));\n    fmt = fmt.replace(\"%A\", \"\" + editor.translate(daysLong[date.getDay()]));\n    fmt = fmt.replace(\"%a\", \"\" + editor.translate(daysShort[date.getDay()]));\n    fmt = fmt.replace(\"%%\", \"%\");\n    return fmt;\n};\n\nclass Optional {\n    constructor(tag, value) {\n        this.tag = tag;\n        this.value = value;\n    }\n    static some(value) {\n        return new Optional(true, value);\n    }\n    static none() {\n        return Optional.singletonNone;\n    }\n    fold(onNone, onSome) {\n        if (this.tag) {\n            return onSome(this.value);\n        } else {\n            return onNone();\n        }\n    }\n    isSome() {\n        return this.tag;\n    }\n    isNone() {\n        return !this.tag;\n    }\n    map(mapper) {\n        if (this.tag) {\n            return Optional.some(mapper(this.value));\n        } else {\n            return Optional.none();\n        }\n    }\n    bind(binder) {\n        if (this.tag) {\n            return binder(this.value);\n        } else {\n            return Optional.none();\n        }\n    }\n    exists(predicate) {\n        return this.tag && predicate(this.value);\n    }\n    forall(predicate) {\n        return !this.tag || predicate(this.value);\n    }\n    filter(predicate) {\n        if (!this.tag || predicate(this.value)) {\n            return this;\n        } else {\n            return Optional.none();\n        }\n    }\n    getOr(replacement) {\n        return this.tag ? this.value : replacement;\n    }\n    or(replacement) {\n        return this.tag ? this : replacement;\n    }\n    getOrThunk(thunk) {\n        return this.tag ? this.value : thunk();\n    }\n    orThunk(thunk) {\n        return this.tag ? this : thunk();\n    }\n    getOrDie(message) {\n        if (!this.tag) {\n            throw new Error(\n                message !== null && message !== void 0\n                    ? message\n                    : \"Called getOrDie on None\",\n            );\n        } else {\n            return this.value;\n        }\n    }\n    static from(value) {\n        return isNonNullable(value) ? Optional.some(value) : Optional.none();\n    }\n    getOrNull() {\n        return this.tag ? this.value : null;\n    }\n    getOrUndefined() {\n        return this.value;\n    }\n    each(worker) {\n        if (this.tag) {\n            worker(this.value);\n        }\n    }\n    toArray() {\n        return this.tag ? [this.value] : [];\n    }\n    toString() {\n        return this.tag ? `some(${this.value})` : \"none()\";\n    }\n}\nOptional.singletonNone = new Optional(false);\n\nconst exists = (xs, pred) => {\n    for (let i = 0, len = xs.length; i < len; i++) {\n        const x = xs[i];\n        if (pred(x, i)) {\n            return true;\n        }\n    }\n    return false;\n};\nconst map = (xs, f) => {\n    const len = xs.length;\n    const r = new Array(len);\n    for (let i = 0; i < len; i++) {\n        const x = xs[i];\n        r[i] = f(x, i);\n    }\n    return r;\n};\nconst findUntil = (xs, pred, until) => {\n    for (let i = 0, len = xs.length; i < len; i++) {\n        const x = xs[i];\n        if (pred(x, i)) {\n            return Optional.some(x);\n        } else if (until(x, i)) {\n            break;\n        }\n    }\n    return Optional.none();\n};\nconst find = (xs, pred) => {\n    return findUntil(xs, pred, never);\n};\n\nconst hasOwnProperty = Object.hasOwnProperty;\nconst get = (obj, key) => {\n    return has(obj, key) ? Optional.from(obj[key]) : Optional.none();\n};\nconst has = (obj, key) => hasOwnProperty.call(obj, key);\n\nvar global$1 = tinymce.html.Serializer;\n\nconst entitiesAttr = {\n    '\"': \"&quot;\",\n    \"<\": \"&lt;\",\n    \">\": \"&gt;\",\n    \"&\": \"&amp;\",\n    \"'\": \"&#039;\",\n};\nconst htmlEscape = (html) =>\n    html.replace(/[\"'<>&]/g, (match) => get(entitiesAttr, match).getOr(match));\nconst hasAnyClasses = (dom, n, classes) =>\n    exists(classes.split(/\\s+/), (c) => dom.hasClass(n, c));\nconst parseAndSerialize = (editor, html) =>\n    global$1({ validate: true }, editor.schema).serialize(\n        editor.parser.parse(html, { insert: true }),\n    );\n\nconst createTemplateList = (editor, callback) => {\n    return () => {\n        const templateList = getTemplates(editor);\n        if (isFunction(templateList)) {\n            templateList(callback);\n        } else if (isString(templateList)) {\n            fetch(templateList).then((res) => {\n                if (res.ok) {\n                    res.json().then(callback);\n                }\n            });\n        } else {\n            callback(templateList);\n        }\n    };\n};\nconst replaceTemplateValues = (html, templateValues) => {\n    global$2.each(templateValues, (v, k) => {\n        if (isFunction(v)) {\n            v = v(k);\n        }\n        html = html.replace(new RegExp(\"\\\\{\\\\$\" + escape(k) + \"\\\\}\", \"g\"), v);\n    });\n    return html;\n};\nconst replaceVals = (editor, scope) => {\n    const dom = editor.dom,\n        vl = getTemplateReplaceValues(editor);\n    global$2.each(dom.select(\"*\", scope), (e) => {\n        global$2.each(vl, (v, k) => {\n            if (dom.hasClass(e, k)) {\n                if (isFunction(v)) {\n                    v(e);\n                }\n            }\n        });\n    });\n};\nconst insertTemplate = (editor, _ui, html) => {\n    const dom = editor.dom;\n    const sel = editor.selection.getContent();\n    html = replaceTemplateValues(html, getTemplateReplaceValues(editor));\n    let el = dom.create(\"div\", {}, parseAndSerialize(editor, html));\n    const n = dom.select(\".mceTmpl\", el);\n    if (n && n.length > 0) {\n        el = dom.create(\"div\");\n        el.appendChild(n[0].cloneNode(true));\n    }\n    global$2.each(dom.select(\"*\", el), (n) => {\n        if (hasAnyClasses(dom, n, getCreationDateClasses(editor))) {\n            n.innerHTML = getDateTime(editor, getCdateFormat(editor));\n        }\n        if (hasAnyClasses(dom, n, getModificationDateClasses(editor))) {\n            n.innerHTML = getDateTime(editor, getMdateFormat(editor));\n        }\n        if (hasAnyClasses(dom, n, getSelectedContentClasses(editor))) {\n            n.innerHTML = sel;\n        }\n    });\n    replaceVals(editor, el);\n    editor.execCommand(\"mceInsertContent\", false, el.innerHTML);\n    editor.addVisual();\n};\n\nvar global = tinymce.Env;\n\nconst getPreviewContent = (editor, html) => {\n    var _a;\n    let previewHtml = parseAndSerialize(editor, html);\n    if (html.indexOf(\"<html>\") === -1) {\n        let contentCssEntries = \"\";\n        const contentStyle =\n            (_a = getContentStyle(editor)) !== null && _a !== void 0 ? _a : \"\";\n        const cors = shouldUseContentCssCors(editor) ? ' crossorigin=\"anonymous\"' : \"\";\n        global$2.each(editor.contentCSS, (url) => {\n            contentCssEntries +=\n                '<link type=\"text/css\" rel=\"stylesheet\" href=\"' +\n                editor.documentBaseURI.toAbsolute(url) +\n                '\"' +\n                cors +\n                \">\";\n        });\n        if (contentStyle) {\n            contentCssEntries += '<style type=\"text/css\">' + contentStyle + \"</style>\";\n        }\n        const bodyClass = getBodyClass(editor);\n        const encode = editor.dom.encode;\n        const isMetaKeyPressed =\n            global.os.isMacOS() || global.os.isiOS()\n                ? \"e.metaKey\"\n                : \"e.ctrlKey && !e.altKey\";\n        const preventClicksOnLinksScript =\n            \"<script>\" +\n            'document.addEventListener && document.addEventListener(\"click\", function(e) {' +\n            \"for (var elm = e.target; elm; elm = elm.parentNode) {\" +\n            'if (elm.nodeName === \"A\" && !(' +\n            isMetaKeyPressed +\n            \")) {\" +\n            \"e.preventDefault();\" +\n            \"}\" +\n            \"}\" +\n            \"}, false);\" +\n            \"</script> \";\n        const directionality = editor.getBody().dir;\n        const dirAttr = directionality ? ' dir=\"' + encode(directionality) + '\"' : \"\";\n        previewHtml =\n            \"<!DOCTYPE html>\" +\n            \"<html>\" +\n            \"<head>\" +\n            '<base href=\"' +\n            encode(editor.documentBaseURI.getURI()) +\n            '\">' +\n            contentCssEntries +\n            preventClicksOnLinksScript +\n            \"</head>\" +\n            '<body class=\"' +\n            encode(bodyClass) +\n            '\"' +\n            dirAttr +\n            \">\" +\n            previewHtml +\n            \"</body>\" +\n            \"</html>\";\n    }\n    return replaceTemplateValues(previewHtml, getPreviewReplaceValues(editor));\n};\nconst open = (editor, templateList) => {\n    const createTemplates = () => {\n        if (!templateList || templateList.length === 0) {\n            const message = editor.translate(\"No templates defined.\");\n            editor.notificationManager.open({\n                text: message,\n                type: \"info\",\n            });\n            return Optional.none();\n        }\n        return Optional.from(\n            global$2.map(templateList, (template, index) => {\n                const isUrlTemplate = (t) => t.url !== undefined;\n                return {\n                    selected: index === 0,\n                    text: template.title,\n                    value: {\n                        url: isUrlTemplate(template)\n                            ? Optional.from(template.url)\n                            : Optional.none(),\n                        content: !isUrlTemplate(template)\n                            ? Optional.from(template.content)\n                            : Optional.none(),\n                        description: template.description,\n                    },\n                };\n            }),\n        );\n    };\n    const createSelectBoxItems = (templates) =>\n        map(templates, (t) => ({\n            text: t.text,\n            value: t.text,\n        }));\n    const findTemplate = (templates, templateTitle) =>\n        find(templates, (t) => t.text === templateTitle);\n    const loadFailedAlert = (api) => {\n        editor.windowManager.alert(\"Could not load the specified template.\", () =>\n            api.focus(\"template\"),\n        );\n    };\n    const getTemplateContent = (t) =>\n        t.value.url.fold(\n            () => Promise.resolve(t.value.content.getOr(\"\")),\n            (url) => fetch(url).then((res) => (res.ok ? res.text() : Promise.reject())),\n        );\n    const onChange = (templates, updateDialog) => (api, change) => {\n        if (change.name === \"template\") {\n            const newTemplateTitle = api.getData().template;\n            findTemplate(templates, newTemplateTitle).each((t) => {\n                api.block(\"Loading...\");\n                getTemplateContent(t)\n                    .then((previewHtml) => {\n                        updateDialog(api, t, previewHtml);\n                    })\n                    .catch(() => {\n                        updateDialog(api, t, \"\");\n                        api.setEnabled(\"save\", false);\n                        loadFailedAlert(api);\n                    });\n            });\n        }\n    };\n    const onSubmit = (templates) => (api) => {\n        const data = api.getData();\n        findTemplate(templates, data.template).each((t) => {\n            getTemplateContent(t)\n                .then((previewHtml) => {\n                    editor.execCommand(\"mceInsertTemplate\", false, previewHtml);\n                    api.close();\n                })\n                .catch(() => {\n                    api.setEnabled(\"save\", false);\n                    loadFailedAlert(api);\n                });\n        });\n    };\n    const openDialog = (templates) => {\n        const selectBoxItems = createSelectBoxItems(templates);\n        const buildDialogSpec = (bodyItems, initialData) => ({\n            title: \"Insert Template\",\n            size: \"large\",\n            body: {\n                type: \"panel\",\n                items: bodyItems,\n            },\n            initialData,\n            buttons: [\n                {\n                    type: \"cancel\",\n                    name: \"cancel\",\n                    text: \"Cancel\",\n                },\n                {\n                    type: \"submit\",\n                    name: \"save\",\n                    text: \"Save\",\n                    primary: true,\n                },\n            ],\n            onSubmit: onSubmit(templates),\n            onChange: onChange(templates, updateDialog),\n        });\n        const updateDialog = (dialogApi, template, previewHtml) => {\n            const content = getPreviewContent(editor, previewHtml);\n            const bodyItems = [\n                {\n                    type: \"listbox\",\n                    name: \"template\",\n                    label: \"Templates\",\n                    items: selectBoxItems,\n                },\n                {\n                    type: \"htmlpanel\",\n                    html: `<p aria-live=\"polite\">${htmlEscape(template.value.description)}</p>`,\n                },\n                {\n                    label: \"Preview\",\n                    type: \"iframe\",\n                    name: \"preview\",\n                    sandboxed: false,\n                    transparent: false,\n                },\n            ];\n            const initialData = {\n                template: template.text,\n                preview: content,\n            };\n            dialogApi.unblock();\n            dialogApi.redial(buildDialogSpec(bodyItems, initialData));\n            dialogApi.focus(\"template\");\n        };\n        const dialogApi = editor.windowManager.open(\n            buildDialogSpec([], {\n                template: \"\",\n                preview: \"\",\n            }),\n        );\n        dialogApi.block(\"Loading...\");\n        getTemplateContent(templates[0])\n            .then((previewHtml) => {\n                updateDialog(dialogApi, templates[0], previewHtml);\n            })\n            .catch(() => {\n                updateDialog(dialogApi, templates[0], \"\");\n                dialogApi.setEnabled(\"save\", false);\n                loadFailedAlert(dialogApi);\n            });\n    };\n    const optTemplates = createTemplates();\n    optTemplates.each(openDialog);\n};\n\nconst showDialog = (editor) => (templates) => {\n    open(editor, templates);\n};\nconst register$1 = (editor) => {\n    editor.addCommand(\"mceInsertTemplate\", curry(insertTemplate, editor));\n    editor.addCommand(\"mceTemplate\", createTemplateList(editor, showDialog(editor)));\n};\n\nconst setup = (editor) => {\n    editor.on(\"PreProcess\", (o) => {\n        const dom = editor.dom,\n            dateFormat = getMdateFormat(editor);\n        global$2.each(dom.select(\"div\", o.node), (e) => {\n            if (dom.hasClass(e, \"mceTmpl\")) {\n                global$2.each(dom.select(\"*\", e), (e) => {\n                    if (hasAnyClasses(dom, e, getModificationDateClasses(editor))) {\n                        e.innerHTML = getDateTime(editor, dateFormat);\n                    }\n                });\n                replaceVals(editor, e);\n            }\n        });\n    });\n};\n\nconst onSetupEditable = (editor) => (api) => {\n    const nodeChanged = () => {\n        api.setEnabled(editor.selection.isEditable());\n    };\n    editor.on(\"NodeChange\", nodeChanged);\n    nodeChanged();\n    return () => {\n        editor.off(\"NodeChange\", nodeChanged);\n    };\n};\nconst register = (editor) => {\n    const onAction = () => editor.execCommand(\"mceTemplate\");\n    editor.ui.registry.addButton(\"template\", {\n        icon: \"template\",\n        tooltip: \"Insert template\",\n        onSetup: onSetupEditable(editor),\n        onAction,\n    });\n    editor.ui.registry.addMenuItem(\"template\", {\n        icon: \"template\",\n        text: \"Insert template...\",\n        onSetup: onSetupEditable(editor),\n        onAction,\n    });\n};\n\nconst TemplatePlugin = () => {\n    // eslint-disable-next-line no-unused-vars\n    tinymce.PluginManager.add(\"template\", (editor, url) => {\n        register$2(editor);\n        register(editor);\n        register$1(editor);\n        setup(editor);\n    });\n};\n\nexport default TemplatePlugin;\n"],"names":["isType","type","value","x","t","Array","isArray","o","v","proto","constructor","String","prototype","isPrototypeOf","_a","name","hasProto","typeOf","isString","isObject","isFunction","never","global$2","tinymce","Tools","option","editor","options","get","register$2","registerOption","register","processor","default","isArrayOf","pred","i","len","length","translate","getCreationDateClasses","getModificationDateClasses","getSelectedContentClasses","getPreviewReplaceValues","getTemplateReplaceValues","getTemplates","getCdateFormat","getMdateFormat","getContentStyle","shouldUseContentCssCors","getBodyClass","addZeros","getDateTime","fmt","date","Date","daysShort","split","daysLong","monthsShort","monthsLong","replace","getFullYear","getYear","getMonth","getDate","getHours","getMinutes","getSeconds","getDay","Optional","tag","this","some","none","singletonNone","fold","onNone","onSome","isSome","isNone","map","mapper","bind","binder","exists","predicate","forall","filter","getOr","replacement","or","getOrThunk","thunk","orThunk","getOrDie","message","Error","from","a","isNullable","getOrNull","getOrUndefined","each","worker","toArray","toString","find","xs","findUntil","until","hasOwnProperty","Object","has","obj","key","call","global$1","Serializer","entitiesAttr","htmlEscape","html","match","hasAnyClasses","dom","n","classes","c","hasClass","parseAndSerialize","validate","schema","serialize","parser","parse","insert","replaceTemplateValues","templateValues","k","RegExp","replaceVals","scope","vl","select","e","insertTemplate","_ui","sel","selection","getContent","el","create","appendChild","cloneNode","innerHTML","execCommand","addVisual","global","open","templateList","createSelectBoxItems","templates","f","r","text","findTemplate","templateTitle","loadFailedAlert","api","windowManager","alert","focus","getTemplateContent","url","Promise","resolve","content","fetch","then","res","ok","reject","onChange","updateDialog","change","newTemplateTitle","getData","template","block","previewHtml","catch","setEnabled","onSubmit","data","close","createTemplates","notificationManager","index","isUrlTemplate","undefined","selected","title","description","selectBoxItems","buildDialogSpec","bodyItems","initialData","size","body","items","buttons","primary","dialogApi","getPreviewContent","indexOf","contentCssEntries","contentStyle","cors","contentCSS","documentBaseURI","toAbsolute","bodyClass","encode","preventClicksOnLinksScript","os","isMacOS","isiOS","directionality","getBody","dir","dirAttr","getURI","label","sandboxed","transparent","preview","unblock","redial","register$1","addCommand","fn","initialArgs","restArgs","all","concat","apply","curry","createTemplateList","callback","json","showDialog","onSetupEditable","nodeChanged","isEditable","on","off","TemplatePlugin","add","onAction","ui","registry","addButton","icon","tooltip","onSetup","addMenuItem","dateFormat","node","setup"],"sourceRoot":""}