"use strict";(self.webpackChunk_plone_mockup=self.webpackChunk_plone_mockup||[]).push([[15353],{15353:function(t,e,n){n.r(e),n.d(e,{default:function(){return r}});var o=n(59329),a=n(35686),i=n.n(a);class r{constructor(t){this.el=t}init_moderation_eventhandler(){let t=this;i()("button[name='form.button.moderation.DeleteComment']").on("click",function(t){t.preventDefault();var e=i()(this).closest("tr"),n=e.find("[name='selected_obj_paths:list']").attr("value")+"/@@moderate-delete-comment?_authenticator="+i()('input[name="_authenticator"]').val();i().ajax({type:"GET",url:n,success:function(t){e.fadeOut(250).fadeIn(250,function(){e.remove()}),1===i()("table#review-comments > tbody > tr").length&&location.reload()},error:function(t){alert("Error sending AJAX request:"+n)}})}),i()('button[name="form.button.moderation.TransmitComment"]').on("click",function(e){e.preventDefault();var n=i()(this).closest("tr"),o=i()(n).find("[name='selected_obj_paths:list']").attr("value"),a=i()(this).attr("data-transition"),r=o+"/@@transmit-comment?_authenticator="+i()('input[name="_authenticator"]').val()+"&workflow_action="+a,c="fieldset-moderate-comments"==i()(this).closest("fieldset").attr("id");i().ajax({type:"GET",url:r,success:function(e){if(c){let e=location.href;i()("#review-comments").load(e+" #review-comments > *",function(){t.init_moderation_eventhandler(),i()(".pat-plone-modal").patPloneModal()})}else location.reload()},error:function(t){alert("Error transmitting comment. (Error sending AJAX request:"+r+")")}})}),i()("button[name='form.button.BulkAction']").on("click",function(e){e.preventDefault();var n=i()(this).closest("form"),o=i()(n).attr("action"),a=i()(n).serialize(),r=i()("input:checkbox:checked"),c=i()(n).find("[name='form.select.BulkAction']");"-1"===c.val()?alert("You haven't selected a bulk action. Please select one."):0===r.length?alert("You haven't selected any comment for this bulk action.Please select at least one comment."):i().post(o,a,function(e){c.find("option[value='-1']").attr("selected","selected"),i()("#review-comments").load(window.location+" #review-comments",function(){t.init_moderation_eventhandler(),i()(".pat-plone-modal").patPloneModal()})})}),i()("input[name='check_all']").on("click",function(){"0"===i()(this).val()?(i()(this).parents("table").find("input:checkbox").prop("checked",!0),i()(this).val("1")):(i()(this).parents("table").find("input:checkbox").prop("checked",!1),i()(this).val("0"))}),i()("input[name='review_state']").on("click",function(){let e=i()(this).val(),n=location.href;n=location.search?location.href.replace(location.search,"?review_state="+e):location.href+"?review_state="+e,i()("#fieldset-moderate-comments").parent().load(n+" #content form > *",function(){t.init_moderation_eventhandler(),i()(".pat-plone-modal").patPloneModal();let o={review_state:e};history.pushState(o,"moderate comments",n)})}),i()(".show-full-comment-text").on("click",function(t){t.preventDefault();var e=i()(this).attr("href"),n=i()(this).parent();i().ajax({type:"GET",url:e,data:"",success:function(t){n.html(t)},error:function(t){alert("Error getting full comment text:"+e)}})}),i()(".last-history-entry").each(function(){var t=i()(this);i().ajax({url:t.attr("data-href"),success:function(e){t.html(i()(e).find(".historyByLine").first()),o.A.scan(t)},error:function(t){console.error("Error getting history.")}})})}init(){this.init_moderation_eventhandler()}}}}]);
//# sourceMappingURL=15353.8f748b9bf3f0023e4a6d.min.js.map