"use strict";(self.webpackChunk_plone_mockup=self.webpackChunk_plone_mockup||[]).push([[85083],{3831:function(g,I,A){A.d(I,{EO:function(){return s},Em:function(){return c},Yq:function(){return u},gf:function(){return b},qz:function(){return n},r1:function(){return d},x6:function(){return i}});var C=A(23505),l=A(49264),e=A(67545);const t=C.A.getLogger("pat-contentbrowser");async function c(g){let{method:I="GET",vocabularyUrl:A=null,attributes:C=[],path:l=null,uids:e=null,searchTerm:c=null,searchIndex:i="SearchableText",searchPath:n=null,levelInfoPath:s=null,selectableTypes:b=[],browseableTypes:d=[],pageSize:u=100,page:a=1}=g,o={criteria:[]};if(l&&(o={criteria:[{i:"path",o:"plone.app.querystring.operation.string.path",v:`${l}::1`}],sort_on:"getObjPositionInParent",sort_order:"ascending"},b.length&&o.criteria.push({i:"portal_type",o:"plone.app.querystring.operation.list.contains",v:b.concat(d)})),s&&(o={criteria:[{i:"path",o:"plone.app.querystring.operation.string.path",v:`${s}::0`}]}),n&&(o={criteria:[{i:"path",o:"plone.app.querystring.operation.string.path",v:n}]},b.length&&o.criteria.push({i:"portal_type",o:"plone.app.querystring.operation.list.contains",v:b})),e&&(o={criteria:[{i:"UID",o:"plone.app.querystring.operation.list.contains",v:e}]}),c&&o.criteria.push({i:i,o:"plone.app.querystring.operation.string.contains",v:c}),!o.criteria.length)return{results:[],total:0};const G=JSON.stringify(o),Z=JSON.stringify(C),r=JSON.stringify({page:a,size:u}),m=encodeURI(`${A}${-1!==A.indexOf("?")?"&":"?"}query=${G}&attributes=${Z}&batch=${r}`);t.debug(m);const X=new Headers;X.set("Accept","application/json");const B=await fetch(m,{method:I,headers:X});if(!B.ok)return{results:[],total:0,errors:x.errors};const x=await B.json();if(!n&&!s&&b.length){const g={results:[],total:x.total};for(const I of x.results)(-1!=b.indexOf(I.portal_type)||I.is_folderish)&&g.results.push(I);return g}return x}async function i(g,I){if(!g)return[];const A=await c({vocabularyUrl:I.vocabularyUrl,attributes:I.attributes,uids:g});let C=await(A?.results)||[];return C.sort(((I,A)=>g.indexOf(I.UID)-g.indexOf(A.UID))),C}async function n(g,I){let{iconName:A}=I;const C=await async function(g){return await l.A.resolveIcon(g)}(A);return g.outerHTML=C,{destroy(){}}}function s(g){const I=I=>{g&&!g.contains(I.target)&&g.dispatchEvent(new CustomEvent("click_outside",g))};return document.addEventListener("click",I,!0),{destroy(){document.removeEventListener("click",I,!0)}}}function b(g,I){let A=l.A.storage.get(I.recentlyUsedKey)||[];A=A.slice(A.length-1e3,A.length),g&&I?.selectableTypes.length&&(A=A.filter((g=>-1!=I.selectableTypes.indexOf(g.portal_type))));const C=parseInt(I.recentlyUsedMaxItems,20);return C&&(A=A.slice(A.length-C,A.length)),A}function d(g,I){if(!I.recentlyUsed)return;const A=b(!1,I),C=A.filter((I=>I.UID===g.UID));C.length>0&&A.splice(A.indexOf(C[0]),1),A.push(g),l.A.storage.set(I.recentlyUsedKey,A)}function u(g){const I=Date.parse(g),A=new e.A;return new Date(I).toLocaleString(A.currentLanguage.replace("_","-"))}},19394:function(g,I,A){var C=A(71354),l=A.n(C),e=A(76314),t=A.n(e)()(l());t.push([g.id,".content-browser-selected-items-wrapper.svelte-awokap{display:flex;align-items:start}.content-browser-selected-items.svelte-awokap{list-style:none;background-color:var(--bs-body-bg);border-radius:var(--bs-border-radius) 0 0 var(--bs-border-radius);border:var(--bs-border-style) var(--bs-border-color) var(--bs-border-width);min-height:2.4rem;padding:.5rem .5rem 0 .5rem;flex:1 1 auto}","",{version:3,sources:["webpack://./src/pat/contentbrowser/src/SelectedItems.svelte"],names:[],mappings:"AAAA,sDAAA,YAAA,CAAA,iBAAA,CAAA,8CAAA,eAAA,CAAA,kCAAA,CAAA,iEAAA,CAAA,2EAAA,CAAA,iBAAA,CAAA,2BAAA,CAAA,aAAA",sourcesContent:[".content-browser-selected-items-wrapper.svelte-awokap{display:flex;align-items:start}.content-browser-selected-items.svelte-awokap{list-style:none;background-color:var(--bs-body-bg);border-radius:var(--bs-border-radius) 0 0 var(--bs-border-radius);border:var(--bs-border-style) var(--bs-border-color) var(--bs-border-width);min-height:2.4rem;padding:0.5rem 0.5rem 0 0.5rem;flex:1 1 auto}\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiU2VsZWN0ZWRJdGVtcy5zdmVsdGUiLCJzb3VyY2VzIjpbIlNlbGVjdGVkSXRlbXMuc3ZlbHRlIl0sInNvdXJjZXNDb250ZW50IjpbIjxzY3JpcHQ+XG4gICAgaW1wb3J0IHsgZ2V0Q29udGV4dCwgb25Nb3VudCwgc2V0Q29udGV4dCB9IGZyb20gXCJzdmVsdGVcIjtcbiAgICBpbXBvcnQgeyBnZXRfaXRlbXNfZnJvbV91aWRzIH0gZnJvbSBcIi4vdXRpbHMuanNcIjtcbiAgICBpbXBvcnQgU29ydGFibGUgZnJvbSBcInNvcnRhYmxlanNcIjtcbiAgICBpbXBvcnQgX3QgZnJvbSBcIi4uLy4uLy4uL2NvcmUvaTE4bi13cmFwcGVyXCI7XG4gICAgaW1wb3J0IGV2ZW50cyBmcm9tIFwiQHBhdHRlcm5zbGliL3BhdHRlcm5zbGliL3NyYy9jb3JlL2V2ZW50c1wiO1xuICAgIGltcG9ydCBwbG9uZV9yZWdpc3RyeSBmcm9tIFwiQHBsb25lL3JlZ2lzdHJ5XCI7XG5cbiAgICBsZXQgcmVmO1xuICAgIGxldCBpbml0aWFsaXppbmcgPSB0cnVlO1xuICAgIGxldCBSZWdpc3RlcmVkU2VsZWN0ZWRJdGVtO1xuXG4gICAgLy8gZ2V0IHJlYWN0aXZlIGNvbnRleHQgY29uZmlnXG4gICAgY29uc3QgY29uZmlnID0gZ2V0Q29udGV4dChcImNvbmZpZ1wiKTtcbiAgICBjb25zdCBmaWVsZElkID0gJGNvbmZpZy5maWVsZElkO1xuICAgIGNvbnN0IHNlbGVjdGVkSXRlbXNOb2RlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoZmllbGRJZCk7XG5cbiAgICAvLyBnZXQgcmVhY3RpdmUgY29udGV4dCBzdG9yZVxuICAgIGNvbnN0IHNlbGVjdGVkSXRlbXMgPSBnZXRDb250ZXh0KFwic2VsZWN0ZWRJdGVtc1wiKTtcbiAgICBjb25zdCBzZWxlY3RlZFVpZHMgPSBnZXRDb250ZXh0KFwic2VsZWN0ZWRVaWRzXCIpO1xuXG4gICAgLy8gc2hvd0NvbnRlbnRCcm93c2VyIHJlYWN0aXZlIHN0YXRlXG4gICAgY29uc3Qgc2hvd0NvbnRlbnRCcm93c2VyID0gZ2V0Q29udGV4dChcInNob3dDb250ZW50QnJvd3NlclwiKTtcblxuICAgIG9uTW91bnQoYXN5bmMgKCkgPT4ge1xuICAgICAgICBhd2FpdCBpbml0aWFsaXplU2VsZWN0ZWRJdGVtc1N0b3JlKCk7XG4gICAgICAgIGluaXRpYWxpemVTb3J0aW5nKCk7XG4gICAgICAgIGluaXRpYWxpemluZyA9IGZhbHNlO1xuICAgIH0pO1xuXG4gICAgYXN5bmMgZnVuY3Rpb24gZ2V0U2VsZWN0ZWRJdGVtQ29tcG9uZW50KCkge1xuICAgICAgICAvLyBnZXQgc2VsZWN0ZWRJdGVtIGNvbXBvbmVudCBmcm9tIHJlZ2lzdHJ5LlxuICAgICAgICAvLyB0aGUgcmVnaXN0cnkga2V5IGNhbiBiZSBjdXN0b21pemVkIHdpdGggcGF0dGVybl9vcHRpb25zXG4gICAgICAgIC8vIGlmIGFuIGFkZG9uIHJlZ2lzdGVycyBhIGN1c3RvbSBjb21wb25lbnQgdG8gYSBjdXN0b20ga2V5XG4gICAgICAgIGlmICgkY29uZmlnLmNvbXBvbmVudFJlZ2lzdHJ5S2V5cz8uc2VsZWN0ZWRJdGVtKSB7XG4gICAgICAgICAgICBSZWdpc3RlcmVkU2VsZWN0ZWRJdGVtID0gcGxvbmVfcmVnaXN0cnkuZ2V0Q29tcG9uZW50KFxuICAgICAgICAgICAgICAgICRjb25maWcuY29tcG9uZW50UmVnaXN0cnlLZXlzLnNlbGVjdGVkSXRlbSxcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gZmFsbGJhY2sgaWYgbm8gY3VzdG9tIGNvbXBvbmVudCB3YXMgcmVnaXN0ZXJlZFxuICAgICAgICAvLyBvciBubyB2YWxpZCBjb21wb25lbnQgaW4gcmVnaXN0cnlcbiAgICAgICAgaWYgKCFSZWdpc3RlcmVkU2VsZWN0ZWRJdGVtPy5jb21wb25lbnQpIHtcbiAgICAgICAgICAgIFJlZ2lzdGVyZWRTZWxlY3RlZEl0ZW0gPSBwbG9uZV9yZWdpc3RyeS5nZXRDb21wb25lbnQoXG4gICAgICAgICAgICAgICAgXCJwYXQtY29udGVudGJyb3dzZXIuU2VsZWN0ZWRJdGVtXCIsXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gdW5zZWxlY3RJdGVtKHVpZCkge1xuICAgICAgICBzZWxlY3RlZEl0ZW1zLnVwZGF0ZSgobikgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIG4uZmlsdGVyKCh4KSA9PiB4LlVJRCAhPT0gdWlkKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHNlbGVjdGVkVWlkcy51cGRhdGUoKCkgPT4gJHNlbGVjdGVkSXRlbXMubWFwKCh4KSA9PiB4LlVJRCkpO1xuICAgIH1cblxuICAgIGFzeW5jIGZ1bmN0aW9uIGluaXRpYWxpemVTZWxlY3RlZEl0ZW1zU3RvcmUoKSB7XG4gICAgICAgIGNvbnN0IGluaXRpYWxWYWx1ZSA9ICRjb25maWcuc2VsZWN0aW9uLmxlbmd0aFxuICAgICAgICAgICAgPyAkY29uZmlnLnNlbGVjdGlvblxuICAgICAgICAgICAgOiBzZWxlY3RlZEl0ZW1zTm9kZT8udmFsdWVcbiAgICAgICAgICAgICAgPyBzZWxlY3RlZEl0ZW1zTm9kZS52YWx1ZS5zcGxpdCgkY29uZmlnLnNlcGFyYXRvcilcbiAgICAgICAgICAgICAgOiBbXTtcblxuICAgICAgICBpZiAoIWluaXRpYWxWYWx1ZS5sZW5ndGgpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgICRzZWxlY3RlZEl0ZW1zID0gYXdhaXQgZ2V0X2l0ZW1zX2Zyb21fdWlkcyhpbml0aWFsVmFsdWUsICRjb25maWcpO1xuICAgICAgICBzZWxlY3RlZFVpZHMudXBkYXRlKCgpID0+ICRzZWxlY3RlZEl0ZW1zLm1hcCgoeCkgPT4geC5VSUQpKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBpbml0aWFsaXplU29ydGluZygpIHtcbiAgICAgICAgaWYgKCRjb25maWcubWF4aW11bVNlbGVjdGlvblNpemUgIT09IDEgJiYgJHNlbGVjdGVkSXRlbXMubGVuZ3RoID4gMSkge1xuICAgICAgICAgICAgU29ydGFibGUuY3JlYXRlKFxuICAgICAgICAgICAgICAgIHNlbGVjdGVkSXRlbXNOb2RlLnByZXZpb3VzU2libGluZy5xdWVyeVNlbGVjdG9yKFxuICAgICAgICAgICAgICAgICAgICBcIi5jb250ZW50LWJyb3dzZXItc2VsZWN0ZWQtaXRlbXNcIixcbiAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgZHJhZ2dhYmxlOiBcIj4gZGl2XCIsXG4gICAgICAgICAgICAgICAgICAgIGFuaW1hdGlvbjogMjAwLFxuICAgICAgICAgICAgICAgICAgICBvblVwZGF0ZTogKGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBzb3J0ZWRVdWlkcyA9IFtdO1xuICAgICAgICAgICAgICAgICAgICAgICAgZS50YXJnZXQucXVlcnlTZWxlY3RvckFsbChcIi5zZWxlY3RlZC1pdGVtXCIpLmZvckVhY2goKGVsKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc29ydGVkVXVpZHMucHVzaChlbC5kYXRhc2V0W1widXVpZFwiXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldE5vZGVWYWx1ZShzb3J0ZWRVdWlkcyk7XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBzZWxlY3RlZFVpZHNGcm9tU2VsZWN0ZWRJdGVtcygpIHtcbiAgICAgICAgbGV0IGl0ZW1zID0gW107XG4gICAgICAgICRzZWxlY3RlZEl0ZW1zLmZvckVhY2goKGl0ZW0pID0+IHtcbiAgICAgICAgICAgIGl0ZW1zLnB1c2goaXRlbS5VSUQpO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIGl0ZW1zO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHNldE5vZGVWYWx1ZShzZWxlY3RlZFVpZHMpIHtcbiAgICAgICAgY29uc3Qgbm9kZV92YWwgPSBzZWxlY3RlZFVpZHMuam9pbigkY29uZmlnLnNlcGFyYXRvcik7XG4gICAgICAgIHNlbGVjdGVkSXRlbXNOb2RlLnZhbHVlID0gbm9kZV92YWw7XG4gICAgICAgIHNlbGVjdGVkSXRlbXNOb2RlLmRpc3BhdGNoRXZlbnQoZXZlbnRzLmNoYW5nZV9ldmVudCgpKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBMb2FkU2VsZWN0ZWRJdGVtQ29tcG9uZW50KG5vZGUsIHByb3BzKSB7XG4gICAgICAgIGNvbnN0IGNvbXBvbmVudCA9IG5ldyBSZWdpc3RlcmVkU2VsZWN0ZWRJdGVtLmNvbXBvbmVudCh7XG4gICAgICAgICAgICB0YXJnZXQ6IG5vZGUsXG4gICAgICAgICAgICBwcm9wczogcHJvcHMsXG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgICQ6IHtcbiAgICAgICAgJHNlbGVjdGVkSXRlbXM7XG4gICAgICAgIGlmICgkc2VsZWN0ZWRJdGVtcy5sZW5ndGggfHwgIWluaXRpYWxpemluZykge1xuICAgICAgICAgICAgc2V0Tm9kZVZhbHVlKHNlbGVjdGVkVWlkc0Zyb21TZWxlY3RlZEl0ZW1zKCkpO1xuICAgICAgICAgICAgaW5pdGlhbGl6ZVNvcnRpbmcoKTtcbiAgICAgICAgfVxuICAgIH1cbjwvc2NyaXB0PlxuXG48ZGl2XG4gICAgY2xhc3M9XCJjb250ZW50LWJyb3dzZXItc2VsZWN0ZWQtaXRlbXMtd3JhcHBlclwiXG4gICAgc3R5bGU9XCJ3aWR0aDogeyRjb25maWcud2lkdGggfHwgJ2F1dG8nfVwiXG4gICAgYmluZDp0aGlzPXtyZWZ9XG4+XG4gICAgPCEtLSBzdmVsdGUtaWdub3JlIGExMXktY2xpY2stZXZlbnRzLWhhdmUta2V5LWV2ZW50cyAtLT5cbiAgICA8IS0tIHN2ZWx0ZS1pZ25vcmUgYTExeS1uby1zdGF0aWMtZWxlbWVudC1pbnRlcmFjdGlvbnMgLS0+XG4gICAgPGRpdlxuICAgICAgICBjbGFzcz1cImNvbnRlbnQtYnJvd3Nlci1zZWxlY3RlZC1pdGVtc1wiXG4gICAgICAgIG9uOmNsaWNrPXsoKSA9PiAoJHNob3dDb250ZW50QnJvd3NlciA9ICRzZWxlY3RlZEl0ZW1zLmxlbmd0aCA/IGZhbHNlIDogdHJ1ZSl9XG4gICAgPlxuICAgICAgICB7I2lmICRzZWxlY3RlZEl0ZW1zfVxuICAgICAgICAgICAgeyNhd2FpdCBnZXRTZWxlY3RlZEl0ZW1Db21wb25lbnQoKSB0aGVufVxuICAgICAgICAgICAgICAgIHsjZWFjaCAkc2VsZWN0ZWRJdGVtcyBhcyBzZWxJdGVtLCBpIChzZWxJdGVtLlVJRCl9XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgdXNlOkxvYWRTZWxlY3RlZEl0ZW1Db21wb25lbnQ9e3sgaXRlbTogc2VsSXRlbSwgdW5zZWxlY3RJdGVtOiB1bnNlbGVjdEl0ZW0gfX0gLz5cbiAgICAgICAgICAgICAgICB7L2VhY2h9XG4gICAgICAgICAgICB7OmNhdGNoIGVycm9yfVxuICAgICAgICAgICAgICAgIDxwIHN0eWxlPVwiY29sb3I6IHJlZFwiPntlcnJvci5tZXNzYWdlfTwvcD5cbiAgICAgICAgICAgIHsvYXdhaXR9XG4gICAgICAgIHsvaWZ9XG4gICAgICAgIHsjaWYgISRzZWxlY3RlZEl0ZW1zfVxuICAgICAgICAgICAgPHA+e190KFwibG9hZGluZyBzZWxlY3RlZCBpdGVtc1wiKX08L3A+XG4gICAgICAgIHsvaWZ9XG4gICAgPC9kaXY+XG4gICAgPCEtLSBzdmVsdGUtaWdub3JlIGExMXktaW52YWxpZC1hdHRyaWJ1dGUgLS0+XG4gICAgPGFcbiAgICAgICAgY2xhc3M9XCJidG4gYnRuLXByaW1hcnlcIlxuICAgICAgICBocmVmPVwiI1wiXG4gICAgICAgIHN0eWxlPVwiYm9yZGVyLXJhZGl1czowIHZhcigtLWJzLWJvcmRlci1yYWRpdXMpIHZhcigtLWJzLWJvcmRlci1yYWRpdXMpIDBcIlxuICAgICAgICBvbjpjbGlja3xwcmV2ZW50RGVmYXVsdD17KCkgPT4gKCRzaG93Q29udGVudEJyb3dzZXIgPSB0cnVlKX0+e190KFwiU2VsZWN0XCIpfTwvYVxuICAgID5cbjwvZGl2PlxuXG48c3R5bGU+XG4gICAgLmNvbnRlbnQtYnJvd3Nlci1zZWxlY3RlZC1pdGVtcy13cmFwcGVyIHtcbiAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgYWxpZ24taXRlbXM6IHN0YXJ0O1xuICAgIH1cbiAgICAuY29udGVudC1icm93c2VyLXNlbGVjdGVkLWl0ZW1zIHtcbiAgICAgICAgbGlzdC1zdHlsZTogbm9uZTtcbiAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tYnMtYm9keS1iZyk7XG4gICAgICAgIGJvcmRlci1yYWRpdXM6IHZhcigtLWJzLWJvcmRlci1yYWRpdXMpIDAgMCB2YXIoLS1icy1ib3JkZXItcmFkaXVzKTtcbiAgICAgICAgYm9yZGVyOiB2YXIoLS1icy1ib3JkZXItc3R5bGUpIHZhcigtLWJzLWJvcmRlci1jb2xvcikgdmFyKC0tYnMtYm9yZGVyLXdpZHRoKTtcbiAgICAgICAgbWluLWhlaWdodDogMi40cmVtO1xuICAgICAgICBwYWRkaW5nOiAwLjVyZW0gMC41cmVtIDAgMC41cmVtO1xuICAgICAgICBmbGV4OiAxIDEgYXV0bztcbiAgICB9XG48L3N0eWxlPlxuIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQTJKSSxxREFBd0MsQ0FDcEMsT0FBTyxDQUFFLElBQUksQ0FDYixXQUFXLENBQUUsS0FDakIsQ0FDQSw2Q0FBZ0MsQ0FDNUIsVUFBVSxDQUFFLElBQUksQ0FDaEIsZ0JBQWdCLENBQUUsSUFBSSxZQUFZLENBQUMsQ0FDbkMsYUFBYSxDQUFFLElBQUksa0JBQWtCLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksa0JBQWtCLENBQUMsQ0FDbEUsTUFBTSxDQUFFLElBQUksaUJBQWlCLENBQUMsQ0FBQyxJQUFJLGlCQUFpQixDQUFDLENBQUMsSUFBSSxpQkFBaUIsQ0FBQyxDQUM1RSxVQUFVLENBQUUsTUFBTSxDQUNsQixPQUFPLENBQUUsTUFBTSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUMvQixJQUFJLENBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUNkIn0=*/"],sourceRoot:""}]),I.A=t},24433:function(g,I,A){var C=A(71354),l=A.n(C),e=A(76314),t=A.n(e)()(l());t.push([g.id,".content-browser-position-wrapper.svelte-8w273.svelte-8w273.svelte-8w273{position:fixed;top:0;right:0;display:flex;justify-content:end;z-index:1500;width:100%;height:100vh;background-color:rgba(0,0,0,.25)}.btn-xs.svelte-8w273.svelte-8w273.svelte-8w273{--bs-btn-padding-y:0.15rem;--bs-btn-padding-x:0.5rem;--bs-btn-font-size:0.75rem}.content-browser.svelte-8w273.svelte-8w273.svelte-8w273{height:100vh;min-width:450px;background-color:var(--bs-light-bg-subtle);border-left:var(--bs-border-style) var(--bs-border-width) #fff;z-index:1500;display:flex;flex-direction:column}.toolBar.svelte-8w273.svelte-8w273.svelte-8w273{background-color:var(--bs-primary);padding:.325rem .75rem;color:var(--bs-light);width:100%;display:flex;justify-content:start}.toolBar.svelte-8w273 svg{vertical-align:-0.125em}.levelColumns.svelte-8w273.svelte-8w273.svelte-8w273{display:flex;flex-wrap:nowrap;width:100%;overflow-y:hidden;overflow-x:auto;flex-grow:3;border-left:var(--bs-border-style) var(--bs-border-color) var(--bs-border-width);user-select:none}.levelColumn.svelte-8w273.svelte-8w273.svelte-8w273{width:320px;background:rgba(var(--bs-secondary-bg-rgb), 0.55);border-right:var(--bs-border-style) var(--bs-border-width) var(--bs-border-color);display:flex;flex-direction:column;flex-grow:0;flex-shrink:0}.levelColumn.active.svelte-8w273.svelte-8w273.svelte-8w273{background:var(--bs-body-bg);border-left:var(--bs-border-style) var(--bs-border-width) var(--bs-primary);margin-left:-1px}.levelToolbar.svelte-8w273.svelte-8w273.svelte-8w273{width:100%;min-height:2.5rem;display:flex;justify-content:space-between;white-space:nowrap;padding:.375rem;border-bottom:var(--bs-border-style) var(--bs-border-width) var(--bs-border-color)}.levelToolbar.svelte-8w273>.levelActions.svelte-8w273.svelte-8w273{margin-left:auto;display:flex}.levelToolbar.svelte-8w273>button.svelte-8w273.svelte-8w273{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.levelItems.svelte-8w273.svelte-8w273.svelte-8w273{overflow-x:auto}.contentItem.svelte-8w273.svelte-8w273.svelte-8w273{display:flex;align-items:center;justify-content:space-between;font-size:90%;min-height:2rem}.contentItem.svelte-8w273.svelte-8w273.svelte-8w273:focus-visible{outline:none}.contentItem.even.svelte-8w273.svelte-8w273.svelte-8w273{background-color:rgba(var(--bs-secondary-bg-rgb), 0.4)}.contentItem.inPath.svelte-8w273.svelte-8w273.svelte-8w273,.contentItem.selectedItem.svelte-8w273.svelte-8w273.svelte-8w273{background-color:rgba(var(--bs-primary-rgb), 0.15)}.contentItem.svelte-8w273>.svelte-8w273.svelte-8w273{padding:.5rem;white-space:nowrap;max-width:450px;text-overflow:ellipsis;overflow:hidden}.contentItem.svelte-8w273>.browseSub.svelte-8w273.svelte-8w273{flex-shrink:0}.contentItem.svelte-8w273 .plone-icon.svelte-8w273.svelte-8w273{display:inline-block}.contentItem.svelte-8w273 .grid-preview.svelte-8w273>img.svelte-8w273{width:95px;height:95px;object-fit:cover;float:left;margin-right:1rem}.contentItem.svelte-8w273 .id-only.svelte-8w273.svelte-8w273{font-style:italic}.preview.svelte-8w273.svelte-8w273.svelte-8w273{width:320px;flex-shrink:0;min-height:300px}.preview.svelte-8w273 .info.svelte-8w273.svelte-8w273{padding:.5rem;width:100%;word-wrap:anywhere}.preview.svelte-8w273 .info .previewIcon.svelte-8w273.svelte-8w273{margin:0 auto 1rem auto}.preview.svelte-8w273 .info .previewIcon svg.svelte-8w273.svelte-8w273{width:50px !important;height:50px !important}.preview.svelte-8w273 img.svelte-8w273.svelte-8w273{max-width:100%;height:auto;margin-bottom:.5rem}.upload-wrapper.svelte-8w273.svelte-8w273.svelte-8w273{padding:1rem;width:540px;overflow-x:auto;flex-shrink:0}.loadmore.svelte-8w273.svelte-8w273.svelte-8w273{text-align:center;padding:.25rem 0}.select-button-ellipsis.svelte-8w273.svelte-8w273.svelte-8w273{white-space:nowrap;max-width:150px;text-overflow:ellipsis;overflow:hidden}","",{version:3,sources:["webpack://./src/pat/contentbrowser/src/ContentBrowser.svelte"],names:[],mappings:"AAAA,yEAAA,cAAA,CAAA,KAAA,CAAA,OAAA,CAAA,YAAA,CAAA,mBAAA,CAAA,YAAA,CAAA,UAAA,CAAA,YAAA,CAAA,gCAAA,CAAA,+CAAA,0BAAA,CAAA,yBAAA,CAAA,0BAAA,CAAA,wDAAA,YAAA,CAAA,eAAA,CAAA,0CAAA,CAAA,8DAAA,CAAA,YAAA,CAAA,YAAA,CAAA,qBAAA,CAAA,gDAAA,kCAAA,CAAA,sBAAA,CAAA,qBAAA,CAAA,UAAA,CAAA,YAAA,CAAA,qBAAA,CAAA,0BAAA,uBAAA,CAAA,qDAAA,YAAA,CAAA,gBAAA,CAAA,UAAA,CAAA,iBAAA,CAAA,eAAA,CAAA,WAAA,CAAA,gFAAA,CAAA,gBAAA,CAAA,oDAAA,WAAA,CAAA,iDAAA,CAAA,iFAAA,CACmC,YAAA,CAAA,qBAAA,CAAA,WAAA,CAAA,aAAA,CAAA,2DAAA,4BAAA,CAAA,2EAAA,CAAA,gBAAA,CAAA,qDAAA,UAAA,CAAA,iBAAA,CAAA,YAAA,CAAA,6BAAA,CAAA,kBAAA,CAAA,eAAA,CAAA,kFAAA,CACA,mEAAA,gBAAA,CAAA,YAAA,CAAA,4DAAA,kBAAA,CAAA,eAAA,CAAA,sBAAA,CAAA,mDAAA,eAAA,CAAA,oDAAA,YAAA,CAAA,kBAAA,CAAA,6BAAA,CAAA,aAAA,CAAA,eAAA,CAAA,kEAAA,YAAA,CAAA,yDAAA,sDAAA,CAAA,4HAAA,kDAAA,CAAA,qDAAA,aAAA,CAAA,kBAAA,CAAA,eAAA,CAAA,sBAAA,CAAA,eAAA,CAAA,+DAAA,aAAA,CAAA,gEAAA,oBAAA,CAAA,sEAAA,UAAA,CAAA,WAAA,CAAA,gBAAA,CAAA,UAAA,CAAA,iBAAA,CAAA,6DAAA,iBAAA,CAAA,gDAAA,WAAA,CAAA,aAAA,CAAA,gBAAA,CAAA,sDAAA,aAAA,CAAA,UAAA,CAAA,kBAAA,CAAA,mEAAA,uBAAA,CAAA,uEAAA,qBAAA,CAAA,sBAAA,CAAA,oDAAA,cAAA,CAAA,WAAA,CAAA,mBAAA,CAAA,uDAAA,YAAA,CAAA,WAAA,CAAA,eAAA,CAAA,aAAA,CAAA,iDAAA,iBAAA,CAAA,gBAAA,CAAA,+DAAA,kBAAA,CAAA,eAAA,CAAA,sBAAA,CAAA,eAAA",sourcesContent:[".content-browser-position-wrapper.svelte-8w273.svelte-8w273.svelte-8w273{position:fixed;top:0;right:0;display:flex;justify-content:end;z-index:1500;width:100%;height:100vh;background-color:rgba(0, 0, 0, 0.25)}.btn-xs.svelte-8w273.svelte-8w273.svelte-8w273{--bs-btn-padding-y:0.15rem;--bs-btn-padding-x:0.5rem;--bs-btn-font-size:0.75rem}.content-browser.svelte-8w273.svelte-8w273.svelte-8w273{height:100vh;min-width:450px;background-color:var(--bs-light-bg-subtle);border-left:var(--bs-border-style) var(--bs-border-width) #fff;z-index:1500;display:flex;flex-direction:column}.toolBar.svelte-8w273.svelte-8w273.svelte-8w273{background-color:var(--bs-primary);padding:0.325rem 0.75rem;color:var(--bs-light);width:100%;display:flex;justify-content:start}.toolBar.svelte-8w273 svg{vertical-align:-0.125em}.levelColumns.svelte-8w273.svelte-8w273.svelte-8w273{display:flex;flex-wrap:nowrap;width:100%;overflow-y:hidden;overflow-x:auto;flex-grow:3;border-left:var(--bs-border-style) var(--bs-border-color) var(--bs-border-width);user-select:none}.levelColumn.svelte-8w273.svelte-8w273.svelte-8w273{width:320px;background:rgba(var(--bs-secondary-bg-rgb), 0.55);border-right:var(--bs-border-style) var(--bs-border-width)\n            var(--bs-border-color);display:flex;flex-direction:column;flex-grow:0;flex-shrink:0}.levelColumn.active.svelte-8w273.svelte-8w273.svelte-8w273{background:var(--bs-body-bg);border-left:var(--bs-border-style) var(--bs-border-width) var(--bs-primary);margin-left:-1px}.levelToolbar.svelte-8w273.svelte-8w273.svelte-8w273{width:100%;min-height:2.5rem;display:flex;justify-content:space-between;white-space:nowrap;padding:0.375rem;border-bottom:var(--bs-border-style) var(--bs-border-width)\n            var(--bs-border-color)}.levelToolbar.svelte-8w273>.levelActions.svelte-8w273.svelte-8w273{margin-left:auto;display:flex}.levelToolbar.svelte-8w273>button.svelte-8w273.svelte-8w273{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.levelItems.svelte-8w273.svelte-8w273.svelte-8w273{overflow-x:auto}.contentItem.svelte-8w273.svelte-8w273.svelte-8w273{display:flex;align-items:center;justify-content:space-between;font-size:90%;min-height:2rem}.contentItem.svelte-8w273.svelte-8w273.svelte-8w273:focus-visible{outline:none}.contentItem.even.svelte-8w273.svelte-8w273.svelte-8w273{background-color:rgba(var(--bs-secondary-bg-rgb), 0.4)}.contentItem.inPath.svelte-8w273.svelte-8w273.svelte-8w273,.contentItem.selectedItem.svelte-8w273.svelte-8w273.svelte-8w273{background-color:rgba(var(--bs-primary-rgb), 0.15)}.contentItem.svelte-8w273>.svelte-8w273.svelte-8w273{padding:0.5rem;white-space:nowrap;max-width:450px;text-overflow:ellipsis;overflow:hidden}.contentItem.svelte-8w273>.browseSub.svelte-8w273.svelte-8w273{flex-shrink:0}.contentItem.svelte-8w273 .plone-icon.svelte-8w273.svelte-8w273{display:inline-block}.contentItem.svelte-8w273 .grid-preview.svelte-8w273>img.svelte-8w273{width:95px;height:95px;object-fit:cover;float:left;margin-right:1rem}.contentItem.svelte-8w273 .id-only.svelte-8w273.svelte-8w273{font-style:italic}.preview.svelte-8w273.svelte-8w273.svelte-8w273{width:320px;flex-shrink:0;min-height:300px}.preview.svelte-8w273 .info.svelte-8w273.svelte-8w273{padding:0.5rem;width:100%;word-wrap:anywhere}.preview.svelte-8w273 .info .previewIcon.svelte-8w273.svelte-8w273{margin:0 auto 1rem auto}.preview.svelte-8w273 .info .previewIcon svg.svelte-8w273.svelte-8w273{width:50px !important;height:50px !important}.preview.svelte-8w273 img.svelte-8w273.svelte-8w273{max-width:100%;height:auto;margin-bottom:0.5rem}.upload-wrapper.svelte-8w273.svelte-8w273.svelte-8w273{padding:1rem;width:540px;overflow-x:auto;flex-shrink:0}.loadmore.svelte-8w273.svelte-8w273.svelte-8w273{text-align:center;padding:0.25rem 0}.select-button-ellipsis.svelte-8w273.svelte-8w273.svelte-8w273{white-space:nowrap;max-width:150px;text-overflow:ellipsis;overflow:hidden}\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiQ29udGVudEJyb3dzZXIuc3ZlbHRlIiwic291cmNlcyI6WyJDb250ZW50QnJvd3Nlci5zdmVsdGUiXSwic291cmNlc0NvbnRlbnQiOlsiPHNjcmlwdD5cbiAgICBpbXBvcnQgdXRpbHMgZnJvbSBcIkBwYXR0ZXJuc2xpYi9wYXR0ZXJuc2xpYi9zcmMvY29yZS91dGlsc1wiO1xuICAgIGltcG9ydCB7IGdldENvbnRleHQgfSBmcm9tIFwic3ZlbHRlXCI7XG4gICAgaW1wb3J0ICogYXMgYW5pbWF0ZVNjcm9sbCBmcm9tIFwic3ZlbHRlLXNjcm9sbHRvXCI7XG4gICAgaW1wb3J0IHsgZmx5IH0gZnJvbSBcInN2ZWx0ZS90cmFuc2l0aW9uXCI7XG4gICAgaW1wb3J0IF90IGZyb20gXCIuLi8uLi8uLi9jb3JlL2kxOG4td3JhcHBlclwiO1xuICAgIGltcG9ydCBVcGxvYWQgZnJvbSBcIi4uLy4uL3VwbG9hZC91cGxvYWRcIjtcbiAgICBpbXBvcnQgY29udGVudFN0b3JlIGZyb20gXCIuL0NvbnRlbnRTdG9yZVwiO1xuICAgIGltcG9ydCB7XG4gICAgICAgIGNsaWNrT3V0c2lkZSxcbiAgICAgICAgZm9ybWF0RGF0ZSxcbiAgICAgICAgZ2V0X2l0ZW1zX2Zyb21fdWlkcyxcbiAgICAgICAgcmVxdWVzdCxcbiAgICAgICAgcmVzb2x2ZUljb24sXG4gICAgICAgIHVwZGF0ZVJlY2VudGx5VXNlZCxcbiAgICB9IGZyb20gXCIuL3V0aWxzXCI7XG4gICAgaW1wb3J0IEZhdm9yaXRlcyBmcm9tIFwiLi9GYXZvcml0ZXMuc3ZlbHRlXCI7XG4gICAgaW1wb3J0IFJlY2VudGx5VXNlZCBmcm9tIFwiLi9SZWNlbnRseVVzZWQuc3ZlbHRlXCI7XG5cbiAgICBhbmltYXRlU2Nyb2xsLnNldEdsb2JhbE9wdGlvbnMoe1xuICAgICAgICBzY3JvbGxYOiB0cnVlLFxuICAgICAgICBjb250YWluZXI6IFwiLmxldmVsQ29sdW1uc1wiLFxuICAgICAgICBkdXJhdGlvbjogNTAwLFxuICAgIH0pO1xuXG4gICAgLy8gZ2V0IGNvbnRleHQgc3RvcmVzXG4gICAgY29uc3QgY3VycmVudFBhdGggPSBnZXRDb250ZXh0KFwiY3VycmVudFBhdGhcIik7XG4gICAgY29uc3QgY29uZmlnID0gZ2V0Q29udGV4dChcImNvbmZpZ1wiKTtcbiAgICBjb25zdCBwYXRoQ2FjaGUgPSBnZXRDb250ZXh0KFwicGF0aENhY2hlXCIpO1xuICAgIGNvbnN0IHNob3dDb250ZW50QnJvd3NlciA9IGdldENvbnRleHQoXCJzaG93Q29udGVudEJyb3dzZXJcIik7XG4gICAgY29uc3Qgc2VsZWN0ZWRJdGVtcyA9IGdldENvbnRleHQoXCJzZWxlY3RlZEl0ZW1zXCIpO1xuICAgIGNvbnN0IHNlbGVjdGVkVWlkcyA9IGdldENvbnRleHQoXCJzZWxlY3RlZFVpZHNcIik7XG4gICAgY29uc3QgcHJldmlld1VpZHMgPSBnZXRDb250ZXh0KFwicHJldmlld1VpZHNcIik7XG5cbiAgICAvLyBpbml0aWFsaXplIGNvbnRlbnQgYnJvd3NlciBzdG9yZVxuICAgIGNvbnN0IGNvbnRlbnRJdGVtcyA9IGNvbnRlbnRTdG9yZSgkY29uZmlnLCBwYXRoQ2FjaGUpO1xuXG4gICAgbGV0IHNob3dVcGxvYWQgPSBmYWxzZTtcbiAgICBsZXQgc2hvd0xldmVsRmlsdGVyID0gZmFsc2U7XG4gICAgbGV0IHByZXZpZXdJdGVtID0ge307XG4gICAgbGV0IGtleWJvYXJkTmF2SW5pdGlhbGl6ZWQgPSBmYWxzZTtcbiAgICBsZXQgc2hpZnRLZXkgPSBmYWxzZTtcbiAgICBsZXQgc2VhcmNoVGVybSA9IG51bGw7XG4gICAgbGV0IGdyaWRWaWV3ID0gZmFsc2U7XG4gICAgbGV0IGRlZmF1bHRDb25maWdNb2RlID0gJGNvbmZpZy5tb2RlO1xuXG4gICAgbGV0IHZ3ID0gTWF0aC5tYXgoZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudFdpZHRoIHx8IDAsIHdpbmRvdy5pbm5lcldpZHRoIHx8IDApO1xuXG4gICAgZnVuY3Rpb24gdXBkYXRlUHJldmlldyh7IGRhdGEgPSBudWxsLCB1dWlkID0gbnVsbCwgYWN0aW9uID0gXCJzaG93XCIgfSkge1xuICAgICAgICBpZiAoZGF0YSAmJiBhY3Rpb24gPT0gXCJzaG93XCIpIHtcbiAgICAgICAgICAgIHByZXZpZXdJdGVtID0gZGF0YTtcbiAgICAgICAgICAgICRwcmV2aWV3VWlkcyA9IFtkYXRhLlVJRF07XG4gICAgICAgIH0gZWxzZSBpZiAodXVpZCAmJiBhY3Rpb24gPT0gXCJhZGRcIiAmJiAkcHJldmlld1VpZHMuaW5kZXhPZih1dWlkKSA9PT0gLTEpIHtcbiAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAkY29uZmlnLm1heGltdW1TZWxlY3Rpb25TaXplID4gMCAmJlxuICAgICAgICAgICAgICAgICRwcmV2aWV3VWlkcy5sZW5ndGggPj0gJGNvbmZpZy5tYXhpbXVtU2VsZWN0aW9uU2l6ZVxuICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgLy8gcmVzcGVjdCBtYXhpbXVtU2VsZWN0aW9uU2l6ZVxuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgICRwcmV2aWV3VWlkcyA9IFsuLi4kcHJldmlld1VpZHMsIHV1aWRdOyAvLyBOT1RFOiAkcHJldmlld1VpZHMucHVzaCgpIGlzIG5vdCBhIHJlYWN0aXZlIGNoYW5nZVxuICAgICAgICB9IGVsc2UgaWYgKHV1aWQgJiYgYWN0aW9uID09IFwicmVtb3ZlXCIgJiYgJHByZXZpZXdVaWRzLmluZGV4T2YodXVpZCkgIT09IC0xKSB7XG4gICAgICAgICAgICBwcmV2aWV3VWlkcy51cGRhdGUoKG4pID0+IHtcbiAgICAgICAgICAgICAgICBuLnNwbGljZShuLmluZGV4T2YodXVpZCksIDEpO1xuICAgICAgICAgICAgICAgIHJldHVybiBuO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0gZWxzZSBpZiAoYWN0aW9uID09IFwiY2xlYXJcIikge1xuICAgICAgICAgICAgcHJldmlld0l0ZW0gPSB7fTtcbiAgICAgICAgICAgICRwcmV2aWV3VWlkcyA9IFtdO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgYXN5bmMgZnVuY3Rpb24gdXBsb2FkKCkge1xuICAgICAgICB1cGRhdGVQcmV2aWV3KHsgYWN0aW9uOiBcImNsZWFyXCIgfSk7XG4gICAgICAgIHNjcm9sbFRvUmlnaHQoKTtcbiAgICAgICAgc2hvd1VwbG9hZCA9IHRydWU7XG4gICAgICAgIGF3YWl0IHV0aWxzLnRpbWVvdXQoMSk7XG4gICAgICAgIGNvbnN0IHVwbG9hZEVsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi51cGxvYWQtd3JhcHBlclwiKTtcbiAgICAgICAgdXBsb2FkRWwuY2xhc3NMaXN0LmFkZChcInBhdC11cGxvYWRcIik7XG4gICAgICAgIGNvbnN0IHBhdFVwbG9hZCA9IG5ldyBVcGxvYWQodXBsb2FkRWwsIHtcbiAgICAgICAgICAgIGJhc2VVcmw6ICRjb25maWcucm9vdFVybCxcbiAgICAgICAgICAgIGN1cnJlbnRQYXRoOiAkY3VycmVudFBhdGgsXG4gICAgICAgICAgICByZWxhdGl2ZVBhdGg6IFwiQEBmaWxlVXBsb2FkXCIsXG4gICAgICAgICAgICBhbGxvd1BhdGhTZWxlY3Rpb246IGZhbHNlLFxuICAgICAgICAgICAgaGlkZGVuSW5wdXRDb250YWluZXI6IFwiLnVwbG9hZC13cmFwcGVyXCIsXG4gICAgICAgICAgICBzdWNjZXNzOiAoZmlsZXVwbG9hZCwgb2JqKSA9PiB7XG4gICAgICAgICAgICAgICAgJHByZXZpZXdVaWRzLnB1c2gob2JqLlVJRCk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgcXVldWVjb21wbGV0ZTogKGZpbGVVcGxvYWQsIG9iaikgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnRlbnRJdGVtcy5nZXQoeyBwYXRoOiAkY3VycmVudFBhdGgsIHVwZGF0ZUNhY2hlOiB0cnVlIH0pO1xuICAgICAgICAgICAgICAgIHNob3dVcGxvYWQgPSBmYWxzZTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHNob3dQcmV2aWV3KGl0ZW0pIHtcbiAgICAgICAgaWYgKCRjb25maWcubW9kZSA9PSBcImJyb3dzZVwiKSB7XG4gICAgICAgICAgICAkcHJldmlld1VpZHMgPSBbaXRlbS5VSURdO1xuXG4gICAgICAgICAgICBpZiAoaXRlbS5pc19mb2xkZXJpc2gpIHtcbiAgICAgICAgICAgICAgICAvLyBzaG93IGZvbGRlclxuICAgICAgICAgICAgICAgIGN1cnJlbnRQYXRoLnNldChpdGVtLnBhdGgpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyBzaG93IG5vbiBmb2xkZXJpc2ggcHJldmlld1xuICAgICAgICAgICAgICAgIGNvbnN0IHBhdGhQYXJ0cyA9IGl0ZW0ucGF0aC5zcGxpdChcIi9cIik7XG4gICAgICAgICAgICAgICAgY29uc3QgZm9sZGVyUGF0aCA9IHBhdGhQYXJ0cy5zbGljZSgwLCBwYXRoUGFydHMubGVuZ3RoIC0gMSkuam9pbihcIi9cIik7XG4gICAgICAgICAgICAgICAgY3VycmVudFBhdGguc2V0KGZvbGRlclBhdGggfHwgXCIvXCIpO1xuICAgICAgICAgICAgICAgIHVwZGF0ZVByZXZpZXcoeyBkYXRhOiBpdGVtIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdXBkYXRlUHJldmlldyh7IGRhdGE6IGl0ZW0gfSk7XG4gICAgICAgIH1cbiAgICAgICAgc2Nyb2xsVG9SaWdodCgpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGNoYW5nZVBhdGgoaXRlbSwgZSkge1xuICAgICAgICAvLyBhbHdheXMgaGlkZSB1cGxvYWQgd2hlbiBjaGFuZ2luZyBwYXRoXG4gICAgICAgIHNob3dVcGxvYWQgPSBmYWxzZTtcbiAgICAgICAgLy8gaGlkZSBsZXZlbCBmaWx0ZXIgd2hlbiBjaGFuZ2luIHBhdGhzXG4gICAgICAgIC8vIE5PVEU6IGl0IHNob3dzIGF1dG9tYXRpY2FsbHkgd2hlbiB5b3Ugc3dpdGNoIHRvIGEgZmlsdGVyZWQgcGF0aFxuICAgICAgICBzaG93TGV2ZWxGaWx0ZXIgPSBmYWxzZTtcblxuICAgICAgICAvLyBjbGVhciBwcmV2aW91cyBzZWxlY3Rpb25cbiAgICAgICAgdXBkYXRlUHJldmlldyh7IGFjdGlvbjogXCJjbGVhclwiIH0pO1xuXG4gICAgICAgIGlmIChpdGVtID09PSBcIi9cIiB8fCBpdGVtID09PSAkY29uZmlnLnJvb3RQYXRoKSB7XG4gICAgICAgICAgICAvLyBjbGlja2VkIFwiaG9tZVwiIGJ1dHRvblxuICAgICAgICAgICAgY3VycmVudFBhdGguc2V0KCRjb25maWcucm9vdFBhdGgpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gc2hvdyBjbGlja2VkIGl0ZW1cbiAgICAgICAgc2hvd1ByZXZpZXcoaXRlbSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gY2xpY2tJdGVtKGl0ZW0sIGUpIHtcbiAgICAgICAgaWYgKCFrZXlib2FyZE5hdkluaXRpYWxpemVkKSB7XG4gICAgICAgICAgICAvLyBpZiB3ZSd2ZSBhbHJlYWR5IGNsaWNrZWQgYW4gZWxlbWVudCB3aXRoIHRoZSBtb3VzZVxuICAgICAgICAgICAgLy8gZG8gbm90IHN0YXJ0IG92ZXIga2V5Ym9hcmRuYXZcbiAgICAgICAgICAgIGtleWJvYXJkTmF2SW5pdGlhbGl6ZWQgPSB0cnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gY2hlY2sgZm9yIG11bHRpc2VsZWN0aW9uXG4gICAgICAgIGNvbnN0IGxldmVsV3JhcHBlciA9IGUuY3VycmVudFRhcmdldC5jbG9zZXN0KFwiLmxldmVsSXRlbXNcIik7XG4gICAgICAgIGxldCBwcmV2U2VsZWN0aW9uID0gbGV2ZWxXcmFwcGVyLnF1ZXJ5U2VsZWN0b3JBbGwoXCIuc2VsZWN0ZWRJdGVtXCIpO1xuXG4gICAgICAgIGlmIChwcmV2U2VsZWN0aW9uLmxlbmd0aCAmJiAkY29uZmlnLm1heGltdW1TZWxlY3Rpb25TaXplICE9IDEpIHtcbiAgICAgICAgICAgIC8vIGNoZWNrIGZvciBwcmVzc2VkIHNoaWZ0IG9yIGN0cmwvbWV0YSBrZXkgZm9yIG11bHRpc2VsZWN0aW9uXG4gICAgICAgICAgICBpZiAoc2hpZnRLZXkgfHwgZT8uc2hpZnRLZXkpIHtcbiAgICAgICAgICAgICAgICAvLyBpdGVyIHRocm91Z2ggdGhlIHdyYXBwZXIgY2hpbGRyZW4gYW5kIHNlbGVjdCBhbGxcbiAgICAgICAgICAgICAgICAvLyBpbmJldHdlZW4gY3VycmVudCBzZWxlY3Rpb24gYW5kIGxhc3QgcHJldmlld1xuICAgICAgICAgICAgICAgIGxldCBzZWxlY3QgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGVsIG9mIGxldmVsV3JhcHBlci5jaGlsZHJlbikge1xuICAgICAgICAgICAgICAgICAgICBpZiAoW2l0ZW0uVUlELCAkcHJldmlld1VpZHNbMF1dLmluZGV4T2YoZWwuZGF0YXNldC51dWlkKSAhPT0gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzZWxlY3QpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBzdG9wIHNlbGVjdGluZyBidXQgbWFrZSBzdXJlIHRoZSBsYXN0IGl0ZW0gaXMgc2VsZWN0ZWQgdG9vXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdXBkYXRlUHJldmlldyh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHV1aWQ6IGVsLmRhdGFzZXQudXVpZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWN0aW9uOiBcImFkZFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGVjdCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gc3RhcnQgc2VsZWN0aW5nXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxlY3QgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHVwZGF0ZVByZXZpZXcoe1xuICAgICAgICAgICAgICAgICAgICAgICAgdXVpZDogZWwuZGF0YXNldC51dWlkLFxuICAgICAgICAgICAgICAgICAgICAgICAgYWN0aW9uOiBzZWxlY3QgPyBcImFkZFwiIDogXCJyZW1vdmVcIixcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHNoaWZ0S2V5ID0gZmFsc2U7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGU/Lm1ldGFLZXkgfHwgZT8uY3RybEtleSkge1xuICAgICAgICAgICAgICAgIC8vIGRlL3NlbGVjdCBtdWx0aXBsZSBzaW5nbGUgaXRlbXNcbiAgICAgICAgICAgICAgICAvLyBOT1RFOiBvbmx5IGZvciBtb3VzZSBjbGljayBldmVudFxuICAgICAgICAgICAgICAgIHVwZGF0ZVByZXZpZXcoe1xuICAgICAgICAgICAgICAgICAgICB1dWlkOiBpdGVtLlVJRCxcbiAgICAgICAgICAgICAgICAgICAgYWN0aW9uOiAkcHJldmlld1VpZHMuaW5kZXhPZihpdGVtLlVJRCkgPT0gLTEgPyBcImFkZFwiIDogXCJyZW1vdmVcIixcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8gdW5zZWxlY3RcbiAgICAgICAgICAgICAgICBbLi4ucHJldlNlbGVjdGlvbl0ubWFwKChlbCkgPT4gZWwuY2xhc3NMaXN0LnJlbW92ZShcInNlbGVjdGVkSXRlbVwiKSk7XG4gICAgICAgICAgICAgICAgY2hhbmdlUGF0aChpdGVtLCBlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNoYW5nZVBhdGgoaXRlbSwgZSk7XG4gICAgICAgIH1cblxuICAgICAgICBlLmN1cnJlbnRUYXJnZXQuZm9jdXMoKTsgLy8gbmVlZGVkIGZvciBrZXlib2FyZCBuYXZpZ2F0aW9uXG4gICAgICAgIGUuY3VycmVudFRhcmdldC5jbGFzc0xpc3QuYWRkKFwic2VsZWN0ZWRJdGVtXCIpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGluaXRLZXlib2FyZE5hdigpIHtcbiAgICAgICAgLy8gZm9jdXMgZmlyc3QgZWxlbWVudCB3aGVuIHNob3dpbmcgY29udGVudGJyb3dzZXJcbiAgICAgICAgaWYgKGtleWJvYXJkTmF2SW5pdGlhbGl6ZWQpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBwb3NzaWJsZUZvY3VzRWxzID0gW1xuICAgICAgICAgICAgLi4uZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5sZXZlbENvbHVtbiAuaW5QYXRoXCIpLCAvLyBwcmV2aW91c2x5IHNlbGVjdGVkIGZvbGRlclxuICAgICAgICAgICAgLi4uZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5sZXZlbENvbHVtbiAuc2VsZWN0ZWRJdGVtXCIpLCAvLyBwcmV2aW91c2x5IHNlbGVjdGVkIGl0ZW1cbiAgICAgICAgXTtcbiAgICAgICAgaWYgKFxuICAgICAgICAgICAgIXBvc3NpYmxlRm9jdXNFbHMubGVuZ3RoICYmXG4gICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmxldmVsQ29sdW1uIC5jb250ZW50SXRlbVwiKVxuICAgICAgICApIHtcbiAgICAgICAgICAgIHBvc3NpYmxlRm9jdXNFbHMucHVzaChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmxldmVsQ29sdW1uIC5jb250ZW50SXRlbVwiKSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHBvc3NpYmxlRm9jdXNFbHMubGVuZ3RoKSB7XG4gICAgICAgICAgICBrZXlib2FyZE5hdkluaXRpYWxpemVkID0gdHJ1ZTtcbiAgICAgICAgICAgIHBvc3NpYmxlRm9jdXNFbHNbMF0uZm9jdXMoKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGtleWJvYXJkTmF2aWdhdGlvbihpdGVtLCBlKSB7XG4gICAgICAgIGNvbnN0IG5vZGUgPSBlLmN1cnJlbnRUYXJnZXQ7XG4gICAgICAgIHNoaWZ0S2V5ID0gZS5zaGlmdEtleTtcbiAgICAgICAgaWYgKGUua2V5ID09IFwiRXNjYXBlXCIpIHtcbiAgICAgICAgICAgIGNsb3NlQnJvd3NlcigpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChcbiAgICAgICAgICAgIGUua2V5ID09IFwiQXJyb3dEb3duXCIgJiZcbiAgICAgICAgICAgIG5vZGU/Lm5leHRFbGVtZW50U2libGluZz8uY2xhc3NMaXN0LmNvbnRhaW5zKFwiY29udGVudEl0ZW1cIilcbiAgICAgICAgKSB7XG4gICAgICAgICAgICBub2RlLm5leHRFbGVtZW50U2libGluZy5jbGljaygpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChcbiAgICAgICAgICAgIGUua2V5ID09IFwiQXJyb3dVcFwiICYmXG4gICAgICAgICAgICBub2RlPy5wcmV2aW91c0VsZW1lbnRTaWJsaW5nPy5jbGFzc0xpc3QuY29udGFpbnMoXCJjb250ZW50SXRlbVwiKVxuICAgICAgICApIHtcbiAgICAgICAgICAgIG5vZGUucHJldmlvdXNFbGVtZW50U2libGluZy5jbGljaygpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChlLmtleSA9PSBcIkFycm93UmlnaHRcIikge1xuICAgICAgICAgICAgY29uc3QgY3VyckNvbCA9IGUudGFyZ2V0LmNsb3Nlc3QoXCIubGV2ZWxDb2x1bW5cIik7XG4gICAgICAgICAgICBjb25zdCBueHRDb2wgPSBjdXJyQ29sPy5uZXh0RWxlbWVudFNpYmxpbmc7XG4gICAgICAgICAgICBpZiAoIW54dENvbCB8fCAhbnh0Q29sLmNsYXNzTGlzdC5jb250YWlucyhcImxldmVsQ29sdW1uXCIpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbnh0Q29sLnF1ZXJ5U2VsZWN0b3IoXCIuY29udGVudEl0ZW1cIik/LmNsaWNrKCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGUua2V5ID09IFwiQXJyb3dMZWZ0XCIpIHtcbiAgICAgICAgICAgIGNvbnN0IGN1cnJDb2wgPSBlLnRhcmdldC5jbG9zZXN0KFwiLmxldmVsQ29sdW1uXCIpO1xuICAgICAgICAgICAgY29uc3QgcHJldkNvbCA9IGN1cnJDb2w/LnByZXZpb3VzRWxlbWVudFNpYmxpbmc7XG4gICAgICAgICAgICBpZiAoIXByZXZDb2wgfHwgIXByZXZDb2wuY2xhc3NMaXN0LmNvbnRhaW5zKFwibGV2ZWxDb2x1bW5cIikpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBwcmV2Q29sLnF1ZXJ5U2VsZWN0b3IoXCIuaW5QYXRoXCIpLmNsaWNrKCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGUua2V5ID09IFwiU3BhY2VcIikge1xuICAgICAgICAgICAgLy8gYWRkIGl0ZW0gdG8gc2VsZWN0aW9uIChsaWtlIG1ldGFLZXkgKyBjbGljaylcbiAgICAgICAgICAgIGNsaWNrSXRlbShpdGVtLCBlLCB0cnVlKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZS5rZXkgPT0gXCJFbnRlclwiKSB7XG4gICAgICAgICAgICBpZiAoaXNTZWxlY3RhYmxlKGl0ZW0pKSB7XG4gICAgICAgICAgICAgICAgaWYgKCRjb25maWcubWF4aW11bVNlbGVjdGlvblNpemUgPT0gMSkge1xuICAgICAgICAgICAgICAgICAgICBhZGRJdGVtKGl0ZW0pO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGFkZFNlbGVjdGVkSXRlbXMoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBhc3luYyBmdW5jdGlvbiBhZGRJdGVtKGl0ZW0pIHtcbiAgICAgICAgaWYgKCRjb25maWcubWF4aW11bVNlbGVjdGlvblNpemUgPT0gMSkge1xuICAgICAgICAgICAgc2VsZWN0ZWRJdGVtcy5zZXQoW2l0ZW1dKTtcbiAgICAgICAgICAgIHNlbGVjdGVkVWlkcy5zZXQoW2l0ZW0uVUlEXSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBzZWxlY3RlZEl0ZW1zLnVwZGF0ZSgobikgPT4gWy4uLm4sIGl0ZW1dKTtcbiAgICAgICAgICAgIHNlbGVjdGVkVWlkcy51cGRhdGUoKCkgPT4gJHNlbGVjdGVkSXRlbXMubWFwKCh4KSA9PiB4LlVJRCkpO1xuICAgICAgICB9XG4gICAgICAgIHVwZGF0ZVJlY2VudGx5VXNlZChpdGVtLCAkY29uZmlnKTtcbiAgICAgICAgY2xvc2VCcm93c2VyKCk7XG4gICAgfVxuXG4gICAgYXN5bmMgZnVuY3Rpb24gYWRkU2VsZWN0ZWRJdGVtcygpIHtcbiAgICAgICAgY29uc3QgcHJldmlld0l0ZW1zID0gYXdhaXQgZ2V0X2l0ZW1zX2Zyb21fdWlkcygkcHJldmlld1VpZHMsICRjb25maWcpO1xuICAgICAgICBzZWxlY3RlZEl0ZW1zLnVwZGF0ZSgobikgPT4ge1xuICAgICAgICAgICAgZm9yIChjb25zdCBpdCBvZiBwcmV2aWV3SXRlbXMpIHtcbiAgICAgICAgICAgICAgICBpZiAoJHNlbGVjdGVkVWlkcy5pbmRleE9mKGl0LlVJRCkgIT0gLTEpIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIG4ucHVzaChpdCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gbjtcbiAgICAgICAgfSk7XG4gICAgICAgIHNlbGVjdGVkVWlkcy51cGRhdGUoKCkgPT4gJHNlbGVjdGVkSXRlbXMubWFwKCh4KSA9PiB4LlVJRCkpO1xuICAgICAgICBjbG9zZUJyb3dzZXIoKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBzZWxlY3RSZWNlbnRseVVzZWQoZXZlbnQpIHtcbiAgICAgICAgYWRkSXRlbShldmVudC5kZXRhaWwuaXRlbSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gaXRlbUlkKGl0ZW0pIHtcbiAgICAgICAgcmV0dXJuIGl0ZW0ucGF0aD8uc3BsaXQoXCIvXCIpLnBvcCgpIHx8IFwiLSBubyBpZCAtXCI7XG4gICAgfVxuXG4gICAgYXN5bmMgZnVuY3Rpb24gc2VsZWN0RmF2b3JpdGUoZXZlbnQpIHtcbiAgICAgICAgY29uc3QgcGF0aCA9IGV2ZW50LmRldGFpbC5pdGVtLnBhdGg7XG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgcmVxdWVzdCh7XG4gICAgICAgICAgICB2b2NhYnVsYXJ5VXJsOiAkY29uZmlnLnZvY2FidWxhcnlVcmwsXG4gICAgICAgICAgICBhdHRyaWJ1dGVzOiAkY29uZmlnLmF0dHJpYnV0ZXMsXG4gICAgICAgICAgICBsZXZlbEluZm9QYXRoOiBwYXRoLFxuICAgICAgICB9KTtcbiAgICAgICAgaWYgKCFyZXNwb25zZS50b3RhbCkge1xuICAgICAgICAgICAgYWxlcnQoYCR7cGF0aH0gbm90IGZvdW5kIWApO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGl0ZW0gPSByZXNwb25zZS5yZXN1bHRzWzBdO1xuICAgICAgICBpZiAoIWl0ZW0ucGF0aCkge1xuICAgICAgICAgICAgLy8gZml4IGZvciByb290XG4gICAgICAgICAgICBpdGVtLnBhdGggPSAkY29uZmlnLnJvb3RQYXRoO1xuICAgICAgICB9XG4gICAgICAgIGNoYW5nZVBhdGgoaXRlbSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gY2xvc2VCcm93c2VyKCkge1xuICAgICAgICAvLyBoaWRlIGxldmVsZmlsdGVyIGFuZCBjbGVhciBhbGwgZmlsdGVyc1xuICAgICAgICBzaG93TGV2ZWxGaWx0ZXIgPSBmYWxzZTtcbiAgICAgICAgZmlsdGVyTGV2ZWwoXCJcIik7XG4gICAgICAgIC8vIGNsZWFyIHNlYXJjaFxuICAgICAgICBzZWFyY2hUZXJtID0gbnVsbDtcbiAgICAgICAgJGNvbmZpZy5tb2RlID0gZGVmYXVsdENvbmZpZ01vZGU7XG4gICAgICAgICRzaG93Q29udGVudEJyb3dzZXIgPSBmYWxzZTtcbiAgICAgICAga2V5Ym9hcmROYXZJbml0aWFsaXplZCA9IGZhbHNlO1xuICAgICAgICB1cGRhdGVQcmV2aWV3KHsgYWN0aW9uOiBcImNsZWFyXCIgfSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gaXNTZWxlY3RhYmxlKGl0ZW0pIHtcbiAgICAgICAgcmV0dXJuICRzZWxlY3RlZFVpZHMuaW5kZXhPZihpdGVtLlVJRCkgPT09IC0xO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHNjcm9sbFRvUmlnaHQoKSB7XG4gICAgICAgIGNvbnN0IHNjcm9sbENvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubGV2ZWxDb2x1bW5zXCIpO1xuICAgICAgICBpZiAoc2Nyb2xsQ29udGFpbmVyKSB7XG4gICAgICAgICAgICBhbmltYXRlU2Nyb2xsLnNjcm9sbFRvKHtcbiAgICAgICAgICAgICAgICAvLyBlbGVtZW50OiBcIi5sZXZlbENvbHVtbjpsYXN0LWNoaWxkXCIsXG4gICAgICAgICAgICAgICAgeDogc2Nyb2xsQ29udGFpbmVyLnNjcm9sbFdpZHRoICsgMTAwLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBpdGVtSW5QYXRoKGl0ZW0pIHtcbiAgICAgICAgY29uc3QgaXRlbV9wYXRoID0gaXRlbS5wYXRoLnNwbGl0KFwiL1wiKTtcbiAgICAgICAgY29uc3QgY3Vycl9wYXRoID0gJGN1cnJlbnRQYXRoLnNwbGl0KFwiL1wiKTtcbiAgICAgICAgbGV0IGluX3BhdGggPSB0cnVlO1xuICAgICAgICBmb3IgKGNvbnN0IGlkeCBpbiBpdGVtX3BhdGgpIHtcbiAgICAgICAgICAgIC8vIGNoZWNrIHBhdGggcGFydHMgdG8gYmUgZXF1YWxcbiAgICAgICAgICAgIGluX3BhdGggPSBpbl9wYXRoICYmIGl0ZW1fcGF0aFtpZHhdID09PSBjdXJyX3BhdGhbaWR4XTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gaW5fcGF0aDtcbiAgICB9XG5cbiAgICBjb25zdCBzZWFyY2hJdGVtc0tleXVwID0gdXRpbHMuZGVib3VuY2UoYXN5bmMgKGUpID0+IHtcbiAgICAgICAgYXdhaXQgc2VhcmNoSXRlbXMoZS50YXJnZXQudmFsdWUpO1xuICAgIH0sIDMwMCk7XG5cbiAgICBhc3luYyBmdW5jdGlvbiBzZWFyY2hJdGVtcyh2YWwpIHtcbiAgICAgICAgc2VhcmNoVGVybSA9IHZhbDtcbiAgICAgICAgaWYgKGRlZmF1bHRDb25maWdNb2RlID09PSBcImJyb3dzZVwiKSB7XG4gICAgICAgICAgICAvLyBzd2l0Y2hpbmcgdG8gc2VhcmNoIG1vZGUgaW4gZ2xvYmFsIHNlYXJjaCBpZiBjb25maWd1cmVkIGFzIFwiYnJvd3NlXCIgbW9kZVxuICAgICAgICAgICAgJGNvbmZpZy5tb2RlID0gc2VhcmNoVGVybSAhPT0gXCJcIiA/IFwic2VhcmNoXCIgOiBcImJyb3dzZVwiO1xuICAgICAgICB9XG4gICAgICAgIGF3YWl0IGNvbnRlbnRJdGVtcy5nZXQoe1xuICAgICAgICAgICAgcGF0aDogJGN1cnJlbnRQYXRoLFxuICAgICAgICAgICAgc2VhcmNoVGVybTogc2VhcmNoVGVybSxcbiAgICAgICAgICAgIG1vZGU6ICRjb25maWcubW9kZSxcbiAgICAgICAgfSk7XG4gICAgICAgIHVwZGF0ZVByZXZpZXcoeyBhY3Rpb246IFwiY2xlYXJcIiB9KTtcbiAgICAgICAgaWYgKCF2YWwpIHtcbiAgICAgICAgICAgIHNjcm9sbFRvUmlnaHQoKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGNvbnN0IGZpbHRlckxldmVsS2V5dXAgPSB1dGlscy5kZWJvdW5jZShhc3luYyAoZSkgPT4ge1xuICAgICAgICBhd2FpdCBmaWx0ZXJMZXZlbChlLnRhcmdldC52YWx1ZSk7XG4gICAgfSwgMzAwKTtcblxuICAgIGNvbnN0IGZpbHRlckxldmVsID0gYXN5bmMgKHZhbCkgPT4ge1xuICAgICAgICBpZiAodmFsICE9PSBcIlwiKSB7XG4gICAgICAgICAgICB1cGRhdGVQcmV2aWV3KHsgYWN0aW9uOiBcImNsZWFyXCIgfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBzY3JvbGxUb1JpZ2h0KCk7XG4gICAgICAgIH1cbiAgICAgICAgYXdhaXQgY29udGVudEl0ZW1zLmdldCh7IHBhdGg6ICRjdXJyZW50UGF0aCwgc2VhcmNoVGVybTogdmFsLCB1cGRhdGVDYWNoZTogdHJ1ZSB9KTtcbiAgICB9O1xuXG4gICAgZnVuY3Rpb24gbG9hZE1vcmUobm9kZSkge1xuICAgICAgICBjb25zdCBvYnNlcnZlciA9IG5ldyBJbnRlcnNlY3Rpb25PYnNlcnZlcihcbiAgICAgICAgICAgIChlbnRyaWVzKSA9PiB7XG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBlbnRyeSBvZiBlbnRyaWVzKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChlbnRyeS5pc0ludGVyc2VjdGluZykge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudEl0ZW1zLmdldCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9hZE1vcmVQYXRoOiBub2RlLmRhdGFzZXQubGV2ZWxQYXRoLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhZ2U6ICtub2RlLmRhdGFzZXQubGV2ZWxOZXh0UGFnZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWFyY2hUZXJtOiBub2RlLmRhdGFzZXQuc2VhcmNoVGVybSxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHsgdGhyZXNob2xkOiAwLCByb290OiBudWxsLCBtYXJnaW46IFwiMHB4XCIgfSxcbiAgICAgICAgKTtcbiAgICAgICAgLy8gZGVmZXIgb2JzZXJ2aW5nXG4gICAgICAgIHdpbmRvdy5zZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgIG9ic2VydmVyLm9ic2VydmUobm9kZSk7XG4gICAgICAgIH0sIDMwMCk7XG4gICAgfVxuXG4gICAgJDoge1xuICAgICAgICBpZiAoJHNob3dDb250ZW50QnJvd3Nlcikge1xuICAgICAgICAgICAgY29udGVudEl0ZW1zLmdldCh7IHBhdGg6ICRjdXJyZW50UGF0aCB9KTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgICQ6IHtcbiAgICAgICAgJGNvbnRlbnRJdGVtcztcbiAgICAgICAgc2Nyb2xsVG9SaWdodCgpO1xuICAgIH1cblxuICAgICQ6IHtcbiAgICAgICAgJHByZXZpZXdVaWRzO1xuICAgIH1cbjwvc2NyaXB0PlxuXG57I2lmICRzaG93Q29udGVudEJyb3dzZXJ9XG4gICAgPGRpdiBjbGFzcz1cImNvbnRlbnQtYnJvd3Nlci1wb3NpdGlvbi13cmFwcGVyXCI+XG4gICAgICAgIDxuYXZcbiAgICAgICAgICAgIGNsYXNzPVwiY29udGVudC1icm93c2VyXCJcbiAgICAgICAgICAgIHRyYW5zaXRpb246Zmx5PXt7IHg6ICh2dyAvIDEwMCkgKiA5NCwgb3BhY2l0eTogMSB9fVxuICAgICAgICAgICAgb246aW50cm9lbmQ9eygpID0+IHtcbiAgICAgICAgICAgICAgICBzY3JvbGxUb1JpZ2h0KCk7XG4gICAgICAgICAgICAgICAgaW5pdEtleWJvYXJkTmF2KCk7XG4gICAgICAgICAgICB9fVxuICAgICAgICAgICAgdXNlOmNsaWNrT3V0c2lkZVxuICAgICAgICAgICAgb246Y2xpY2tfb3V0c2lkZT17Y2xvc2VCcm93c2VyfVxuICAgICAgICA+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwidG9vbEJhciBuYXZiYXJcIj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiaW5wdXQtZ3JvdXAgdy1hdXRvXCI+XG4gICAgICAgICAgICAgICAgICAgIDxpbnB1dFxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZT1cInRleHRcIlxuICAgICAgICAgICAgICAgICAgICAgICAgbmFtZT1cImZpbHRlclwiXG4gICAgICAgICAgICAgICAgICAgICAgICBjbGFzcz1cImZvcm0tY29udHJvbCBmb3JtLWNvbnRyb2wtc21cIlxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU9e3NlYXJjaFRlcm19XG4gICAgICAgICAgICAgICAgICAgICAgICBvbjppbnB1dD17c2VhcmNoSXRlbXNLZXl1cH1cbiAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgeyNpZiBzZWFyY2hUZXJtfVxuICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzPVwiYnRuIGJ0bi1saWdodCBidG4tc21cIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU9XCJidXR0b25cIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uOmNsaWNrfHByZXZlbnREZWZhdWx0PXsoKSA9PiBzZWFyY2hJdGVtcyhcIlwiKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA+PHN2ZyB1c2U6cmVzb2x2ZUljb249e3sgaWNvbk5hbWU6IFwieFwiIH19IC8+PC9idXR0b25cbiAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgey9pZn1cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8UmVjZW50bHlVc2VkIG9uOnNlbGVjdEl0ZW09e3NlbGVjdFJlY2VudGx5VXNlZH0gLz5cbiAgICAgICAgICAgICAgICA8RmF2b3JpdGVzIG9uOnNlbGVjdEl0ZW09e3NlbGVjdEZhdm9yaXRlfSAvPlxuICAgICAgICAgICAgICAgIHsjaWYgJGNvbmZpZy51cGxvYWRFbmFibGVkICYmICRjb25maWcubW9kZSA9PSBcImJyb3dzZVwifVxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwibXMtMlwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU9XCJidXR0b25cIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzPVwidXBsb2FkIGJ0biBidG4tb3V0bGluZS1saWdodCBidG4tc21cIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhYmluZGV4PVwiMFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb246a2V5ZG93bj17dXBsb2FkfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uOmNsaWNrPXt1cGxvYWR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPjxzdmcgdXNlOnJlc29sdmVJY29uPXt7IGljb25OYW1lOiBcInVwbG9hZFwiIH19IC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge190KFwidXBsb2FkIHRvICR7Y3VycmVudF9wYXRofVwiLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRfcGF0aDogJGN1cnJlbnRQYXRoLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pfTwvYnV0dG9uXG4gICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIHsvaWZ9XG4gICAgICAgICAgICAgICAgPGJ1dHRvblxuICAgICAgICAgICAgICAgICAgICBjbGFzcz1cImJ0biBidG4tbGluayB0ZXh0LXdoaXRlIG1zLWF1dG9cIlxuICAgICAgICAgICAgICAgICAgICB0YWJpbmRleD1cIjBcIlxuICAgICAgICAgICAgICAgICAgICBvbjpjbGlja3xwcmV2ZW50RGVmYXVsdD17KCkgPT4gY2xvc2VCcm93c2VyKCl9XG4gICAgICAgICAgICAgICAgICAgID48c3ZnIHVzZTpyZXNvbHZlSWNvbj17eyBpY29uTmFtZTogXCJ4LWNpcmNsZVwiIH19IC8+PC9idXR0b25cbiAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIHsjYXdhaXQgJGNvbnRlbnRJdGVtc31cbiAgICAgICAgICAgICAgICA8cD57X3QoXCJsb2FkaW5nIGNvbnRlbnQgaXRlbXNcIil9PC9wPlxuICAgICAgICAgICAgezp0aGVuIGxldmVsc31cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwibGV2ZWxDb2x1bW5zXCI+XG4gICAgICAgICAgICAgICAgICAgIHsjZWFjaCBsZXZlbHMgYXMgbGV2ZWwsIGkgKGxldmVsLnBhdGgpfVxuICAgICAgICAgICAgICAgICAgICAgICAgeyNpZiAkcHJldmlld1VpZHMubGVuZ3RoIDwgMiB8fCAhJHByZXZpZXdVaWRzLmluY2x1ZGVzKGxldmVsLlVJRCl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzcz1cImxldmVsQ29sdW1ue2kgJSAyID09IDAgPyAnIG9kZCcgOiAnIGV2ZW4nfSB7aSA9PT1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV2ZWxzLmxlbmd0aCAtIDFcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gJ2FjdGl2ZSdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogJyd9XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW46Zmx5fGxvY2FsPXt7IGR1cmF0aW9uOiA1MDAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJsZXZlbFRvb2xiYXJcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsjaWYgaSA9PSAwICYmICRjb25maWcubW9kZSA9PSBcImJyb3dzZVwifVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZT1cImJ1dHRvblwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzPVwiYnRuIGJ0bi1saW5rIGJ0bi14cyBwcy0wXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFiaW5kZXg9XCIwXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb246a2V5ZG93bj17KCkgPT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoYW5nZVBhdGgoJGNvbmZpZy5yb290UGF0aCl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uOmNsaWNrPXsoKSA9PiBjaGFuZ2VQYXRoKCRjb25maWcucm9vdFBhdGgpfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+PHN2Z1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXNlOnJlc29sdmVJY29uPXt7IGljb25OYW1lOiBcImhvdXNlXCIgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz48L2J1dHRvblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsvaWZ9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7I2lmIGkgPT0gbGV2ZWxzLmxlbmd0aCAtIDF9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeyNpZiBsZXZlbC5zZWxlY3RhYmxlICYmICFzaG93TGV2ZWxGaWx0ZXIgJiYgIXByZXZpZXdJdGVtLlVJRH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3M9XCJidG4gYnRuLXhzIGJ0bi1vdXRsaW5lLXByaW1hcnkgZC1mbGV4IGFsaWduLWl0ZW1zLWNlbnRlclwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aXRsZT17X3QoXCJzZWxlY3QgJHtsZXZlbF9wYXRofVwiLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV2ZWxfcGF0aDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV2ZWwuVGl0bGUgfHwgaXRlbUlkKGxldmVsKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlzYWJsZWQ9eyFpc1NlbGVjdGFibGUobGV2ZWwpfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb246Y2xpY2t8cHJldmVudERlZmF1bHQ9eygpID0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWRkSXRlbShsZXZlbCl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+PHN2Z1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVzZTpyZXNvbHZlSWNvbj17e1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpY29uTmFtZTogXCJwbHVzXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cInNlbGVjdC1idXR0b24tZWxsaXBzaXNcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID57bGV2ZWwuVGl0bGUgfHwgaXRlbUlkKGxldmVsKX08L3NwYW5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID48L2J1dHRvblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgey9pZn1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwibGV2ZWxBY3Rpb25zXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsjaWYgJGNvbmZpZy5tb2RlICE9PSBcInNlYXJjaFwifVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeyNpZiBzaG93TGV2ZWxGaWx0ZXIgfHwgbGV2ZWwuc2VhcmNoVGVybX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZT1cInRleHRcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lPVwibGV2ZWxGaWx0ZXJcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzcz1cImZvcm0tY29udHJvbCBmb3JtLWNvbnRyb2wtc21cIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZT17bGV2ZWwuc2VhcmNoVGVybX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb246aW5wdXQ9e2ZpbHRlckxldmVsS2V5dXB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzPVwiYnRuIGJ0bi1saW5rIGJ0bi14cyBsZXZlbC1maWx0ZXJcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aXRsZT17X3QoXCJjbGVhciBmaWx0ZXJcIil9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uOmNsaWNrfHByZXZlbnREZWZhdWx0PXsoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWx0ZXJMZXZlbChcIlwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNob3dMZXZlbEZpbHRlciA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHN2Z1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXNlOnJlc29sdmVJY29uPXt7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWNvbk5hbWU6IFwieFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz48L2J1dHRvblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHs6ZWxzZX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzPVwiYnRuIGJ0bi1saW5rIGJ0bi14cyBsZXZlbC1maWx0ZXJcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aXRsZT17X3QoXCJsZXZlbCBmaWx0ZXJcIil9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uOmNsaWNrfHByZXZlbnREZWZhdWx0PXsoKSA9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKHNob3dMZXZlbEZpbHRlciA9IHRydWUpfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHN2Z1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXNlOnJlc29sdmVJY29uPXt7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWNvbk5hbWU6IFwiZmlsdGVyXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPjwvYnV0dG9uXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgey9pZn1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgey9pZn1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeyNpZiAhZ3JpZFZpZXd9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3M9XCJidG4gYnRuLWxpbmsgYnRuLXhzIGdyaWQtdmlld1wiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU9e190KFwiZ3JpZCB2aWV3XCIpfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uOmNsaWNrPXsoKSA9PiAoZ3JpZFZpZXcgPSB0cnVlKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3ZnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVzZTpyZXNvbHZlSWNvbj17e1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWNvbk5hbWU6IFwiZ3JpZFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgezplbHNlfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzPVwiYnRuIGJ0bi1saW5rIGJ0bi14cyBncmlkLXZpZXdcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlPXtfdChcImxpc3Qgdmlld1wiKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbjpjbGljaz17KCkgPT4gKGdyaWRWaWV3ID0gZmFsc2UpfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzdmdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXNlOnJlc29sdmVJY29uPXt7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpY29uTmFtZTogXCJsaXN0XCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7L2lmfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgey9pZn1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJsZXZlbEl0ZW1zXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7I2VhY2ggbGV2ZWwucmVzdWx0cyB8fCBbXSBhcyBpdGVtLCBufVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwhLS0gc3ZlbHRlLWlnbm9yZSBtaXNzaW5nLWRlY2xhcmF0aW9uIC0tPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3M9XCJjb250ZW50SXRlbXtuICUgMiA9PSAwXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/ICcgb2RkJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiAnIGV2ZW4nfXtpdGVtSW5QYXRoKGl0ZW0pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/ICcgaW5QYXRoJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiAnJ317JHByZXZpZXdVaWRzLmluZGV4T2YoaXRlbS5VSUQpICE9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC0xXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/ICcgc2VsZWN0ZWRJdGVtJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiAnJ317IWlzU2VsZWN0YWJsZShpdGVtKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyAnIHRleHQtYm9keS10ZXJ0aWFyeSdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogJyd9XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcm9sZT1cImJ1dHRvblwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhYmluZGV4PXtufVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhLXV1aWQ9e2l0ZW0uVUlEfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbjprZXlkb3dufHByZXZlbnREZWZhdWx0PXsoZSkgPT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleWJvYXJkTmF2aWdhdGlvbihpdGVtLCBlKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb246Y2xpY2s9eyhlKSA9PiBjbGlja0l0ZW0oaXRlbSwgZSl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzcz17Z3JpZFZpZXdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IFwiZ3JpZC1wcmV2aWV3XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IFwiaXRlbS10aXRsZVwifVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU9XCJ7aXRlbS5wYXRofToge2l0ZW0uVGl0bGUgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpdGVtSWQoaXRlbSl9XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeyNpZiBncmlkVmlldyAmJiBpdGVtLmdldEljb259XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGltZ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzcmM9e2Ake2l0ZW0uZ2V0VVJMfS9AQGltYWdlcy9pbWFnZS90aHVtYmB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFsdD17aXRlbS5UaXRsZSB8fCBpdGVtSWQoaXRlbSl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHs6ZWxzZX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cInBsb25lLWljb25cIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHN2Z1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXNlOnJlc29sdmVJY29uPXt7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWNvbk5hbWU6IGBjb250ZW50dHlwZS8ke2l0ZW0ucG9ydGFsX3R5cGUudG9Mb3dlckNhc2UoKS5yZXBsYWNlKC9cXC58IC9nLCBcIi1cIil9YCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgey9pZn1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3M9eyFpdGVtLlRpdGxlID8gXCJpZC1vbmx5XCIgOiBcIlwifVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID57aXRlbS5UaXRsZSB8fCBpdGVtSWQoaXRlbSl9PC9zcGFuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7I2lmICRjb25maWcubW9kZSA9PSBcInNlYXJjaFwifVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxiciAvPjxzcGFuIGNsYXNzPVwic21hbGxcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+e2l0ZW0ucGF0aH08L3NwYW5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7L2lmfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeyNpZiBpdGVtLmlzX2ZvbGRlcmlzaCAmJiAkY29uZmlnLm1vZGUgPT0gXCJicm93c2VcIn1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJicm93c2VTdWJcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3ZnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVzZTpyZXNvbHZlSWNvbj17e1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWNvbk5hbWU6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJhcnJvdy1yaWdodC1jaXJjbGVcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsvaWZ9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7L2VhY2h9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7I2lmIGxldmVsLmxvYWRfbW9yZX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzPVwibG9hZG1vcmVcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhLWxldmVsLXBhdGg9e2xldmVsLnBhdGh9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEtc2VhcmNoLXRlcm09e3NlYXJjaFRlcm0gfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldmVsLnNlYXJjaFRlcm19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEtbGV2ZWwtbmV4dC1wYWdlPXsrbGV2ZWwucGFnZSArIDF9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVzZTpsb2FkTW9yZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3M9XCJzcGlubmVyLWJvcmRlclwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByb2xlPVwic3RhdHVzXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPjwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgey9pZn1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsjaWYgbGV2ZWwudG90YWwgPT0gMH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY29udGVudEl0ZW1cIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHA+e190KFwibm8gcmVzdWx0cyBmb3VuZFwiKX08L3A+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7L2lmfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgIHsvaWZ9XG4gICAgICAgICAgICAgICAgICAgIHsvZWFjaH1cbiAgICAgICAgICAgICAgICAgICAgeyNpZiBwcmV2aWV3SXRlbT8uVUlEICYmICRwcmV2aWV3VWlkcy5sZW5ndGggPT0gMX1cbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJwcmV2aWV3XCIgaW46Zmx5fGxvY2FsPXt7IGR1cmF0aW9uOiA1MDAgfX0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImxldmVsVG9vbGJhclwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwic2VsZWN0TGV2ZWwgbWUtM1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeyNpZiBpc1NlbGVjdGFibGUocHJldmlld0l0ZW0pfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3M9XCJidG4gYnRuLXhzIGJ0bi1vdXRsaW5lLXByaW1hcnkgZC1mbGV4IGFsaWduLWl0ZW1zLWNlbnRlclwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlPXtfdChcInNlbGVjdCAke3ByZXZpZXdfcGF0aH1cIiwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJldmlld19wYXRoOiBwcmV2aWV3SXRlbS5UaXRsZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uOmNsaWNrfHByZXZlbnREZWZhdWx0PXsoKSA9PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWRkSXRlbShwcmV2aWV3SXRlbSl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID48c3ZnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1c2U6cmVzb2x2ZUljb249e3sgaWNvbk5hbWU6IFwicGx1c1wiIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwic2VsZWN0LWJ1dHRvbi1lbGxpcHNpc1wiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+e3ByZXZpZXdJdGVtLlRpdGxlfTwvc3BhblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7L2lmfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiaW5mb1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7I2lmIHByZXZpZXdJdGVtLmdldEljb259XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwicHJldmlld0ltYWdlXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGltZ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzcmM9XCJ7cHJldmlld0l0ZW0uZ2V0VVJMfS9AQGltYWdlcy9pbWFnZS9wcmV2aWV3XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWx0PXtwcmV2aWV3SXRlbS5UaXRsZX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHs6ZWxzZX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJwcmV2aWV3SWNvblwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzdmdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXNlOnJlc29sdmVJY29uPXt7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpY29uTmFtZTogYGNvbnRlbnR0eXBlLyR7cHJldmlld0l0ZW0ucG9ydGFsX3R5cGUudG9Mb3dlckNhc2UoKS5yZXBsYWNlKC9cXC58IC9nLCBcIi1cIil9YCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsvaWZ9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkbD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkdD57X3QoXCJJZFwiKX08L2R0PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRkPntpdGVtSWQocHJldmlld0l0ZW0pfTwvZGQ+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZHQ+e190KFwiVGl0bGVcIil9PC9kdD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkZD57cHJldmlld0l0ZW0uVGl0bGV9PC9kZD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsjaWYgcHJldmlld0l0ZW0uRGVzY3JpcHRpb259XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGR0PntfdChcIkRlc2NyaXB0aW9uXCIpfTwvZHQ+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzPVwidGV4dC10cnVuY2F0ZVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlPXtwcmV2aWV3SXRlbS5EZXNjcmlwdGlvbn1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtwcmV2aWV3SXRlbS5EZXNjcmlwdGlvbn1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2RkPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgey9pZn1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsjaWYgcHJldmlld0l0ZW0uY3JlYXRlZH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZHQ+e190KFwiY3JlYXRlZFwiKX08L2R0PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkZD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRpbWUgZGF0ZXRpbWU9e3ByZXZpZXdJdGVtLmNyZWF0ZWR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+e2Zvcm1hdERhdGUocHJldmlld0l0ZW0uY3JlYXRlZCl9PC90aW1lXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2RkPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgey9pZn1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsjaWYgcHJldmlld0l0ZW0ubW9kaWZpZWR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGR0PntfdChcIm1vZGlmaWVkXCIpfTwvZHQ+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRkPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGltZSBkYXRldGltZT17cHJldmlld0l0ZW0ubW9kaWZpZWR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+e2Zvcm1hdERhdGUocHJldmlld0l0ZW0ubW9kaWZpZWQpfTwvdGltZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kZD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsvaWZ9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7I2lmIHByZXZpZXdJdGVtLnJldmlld19zdGF0ZX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZHQ+e190KFwicmV2aWV3X3N0YXRlXCIpfTwvZHQ+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRkPntwcmV2aWV3SXRlbS5yZXZpZXdfc3RhdGV9PC9kZD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsvaWZ9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGw+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgey9pZn1cbiAgICAgICAgICAgICAgICAgICAgeyNpZiAkcHJldmlld1VpZHMubGVuZ3RoID4gMX1cbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJwcmV2aWV3XCIgaW46Zmx5fGxvY2FsPXt7IGR1cmF0aW9uOiA1MDAgfX0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImxldmVsVG9vbGJhclwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzcz1cImJ0biBidG4teHMgYnRuLW91dGxpbmUtcHJpbWFyeSBkLWZsZXggYWxpZ24taXRlbXMtY2VudGVyXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlPXtfdChcImFkZCBzZWxlY3RlZCBpdGVtc1wiKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uOmNsaWNrfHByZXZlbnREZWZhdWx0PXthZGRTZWxlY3RlZEl0ZW1zfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPjxzdmcgdXNlOnJlc29sdmVJY29uPXt7IGljb25OYW1lOiBcInBsdXNcIiB9fSAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJzZWxlY3QtYnV0dG9uLWVsbGlwc2lzXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+e190KFwiYWRkIHNlbGVjdGVkIGl0ZW1zXCIpfTwvc3BhblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiaW5mb1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3ZnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1c2U6cmVzb2x2ZUljb249e3tcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpY29uTmFtZTogXCJmaWxlc1wiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPntfdChcIiR7aXRlbV9jb3VudH0gaXRlbXMgc2VsZWN0ZWRcIiwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW1fY291bnQ6ICRwcmV2aWV3VWlkcy5sZW5ndGgsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KX08L3NwYW5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIHsvaWZ9XG4gICAgICAgICAgICAgICAgICAgIHsjaWYgc2hvd1VwbG9hZH1cbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJ1cGxvYWQtd3JhcHBlclwiPjwvZGl2PlxuICAgICAgICAgICAgICAgICAgICB7L2lmfVxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgezpjYXRjaCBlcnJvcn1cbiAgICAgICAgICAgICAgICA8cCBzdHlsZT1cImNvbG9yOiByZWRcIj57ZXJyb3IubWVzc2FnZX08L3A+XG4gICAgICAgICAgICB7L2F3YWl0fVxuICAgICAgICA8L25hdj5cbiAgICA8L2Rpdj5cbnsvaWZ9XG5cbjxzdHlsZT5cbiAgICAuY29udGVudC1icm93c2VyLXBvc2l0aW9uLXdyYXBwZXIge1xuICAgICAgICBwb3NpdGlvbjogZml4ZWQ7XG4gICAgICAgIHRvcDogMDtcbiAgICAgICAgcmlnaHQ6IDA7XG4gICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgIGp1c3RpZnktY29udGVudDogZW5kO1xuICAgICAgICB6LWluZGV4OiAxNTAwO1xuICAgICAgICB3aWR0aDogMTAwJTtcbiAgICAgICAgaGVpZ2h0OiAxMDB2aDtcbiAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogcmdiYSgwLCAwLCAwLCAwLjI1KTtcbiAgICB9XG4gICAgLmJ0bi14cyB7XG4gICAgICAgIC0tYnMtYnRuLXBhZGRpbmcteTogMC4xNXJlbTtcbiAgICAgICAgLS1icy1idG4tcGFkZGluZy14OiAwLjVyZW07XG4gICAgICAgIC0tYnMtYnRuLWZvbnQtc2l6ZTogMC43NXJlbTtcbiAgICB9XG4gICAgLmNvbnRlbnQtYnJvd3NlciB7XG4gICAgICAgIGhlaWdodDogMTAwdmg7XG4gICAgICAgIG1pbi13aWR0aDogNDUwcHg7XG4gICAgICAgIGJhY2tncm91bmQtY29sb3I6IHZhcigtLWJzLWxpZ2h0LWJnLXN1YnRsZSk7XG4gICAgICAgIGJvcmRlci1sZWZ0OiB2YXIoLS1icy1ib3JkZXItc3R5bGUpIHZhcigtLWJzLWJvcmRlci13aWR0aCkgI2ZmZjtcbiAgICAgICAgei1pbmRleDogMTUwMDtcbiAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgICB9XG4gICAgLnRvb2xCYXIge1xuICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1icy1wcmltYXJ5KTtcbiAgICAgICAgcGFkZGluZzogMC4zMjVyZW0gMC43NXJlbTtcbiAgICAgICAgY29sb3I6IHZhcigtLWJzLWxpZ2h0KTtcbiAgICAgICAgd2lkdGg6IDEwMCU7XG4gICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgIGp1c3RpZnktY29udGVudDogc3RhcnQ7XG4gICAgfVxuICAgIC50b29sQmFyIDpnbG9iYWwoc3ZnKSB7XG4gICAgICAgIHZlcnRpY2FsLWFsaWduOiAtMC4xMjVlbTtcbiAgICB9XG4gICAgLmxldmVsQ29sdW1ucyB7XG4gICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgIGZsZXgtd3JhcDogbm93cmFwO1xuICAgICAgICB3aWR0aDogMTAwJTtcbiAgICAgICAgb3ZlcmZsb3cteTogaGlkZGVuO1xuICAgICAgICBvdmVyZmxvdy14OiBhdXRvO1xuICAgICAgICBmbGV4LWdyb3c6IDM7XG4gICAgICAgIGJvcmRlci1sZWZ0OiB2YXIoLS1icy1ib3JkZXItc3R5bGUpIHZhcigtLWJzLWJvcmRlci1jb2xvcikgdmFyKC0tYnMtYm9yZGVyLXdpZHRoKTtcbiAgICAgICAgdXNlci1zZWxlY3Q6IG5vbmU7XG4gICAgfVxuXG4gICAgLmxldmVsQ29sdW1uIHtcbiAgICAgICAgd2lkdGg6IDMyMHB4O1xuICAgICAgICBiYWNrZ3JvdW5kOiByZ2JhKHZhcigtLWJzLXNlY29uZGFyeS1iZy1yZ2IpLCAwLjU1KTtcbiAgICAgICAgYm9yZGVyLXJpZ2h0OiB2YXIoLS1icy1ib3JkZXItc3R5bGUpIHZhcigtLWJzLWJvcmRlci13aWR0aClcbiAgICAgICAgICAgIHZhcigtLWJzLWJvcmRlci1jb2xvcik7XG4gICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gICAgICAgIGZsZXgtZ3JvdzogMDtcbiAgICAgICAgZmxleC1zaHJpbms6IDA7XG4gICAgfVxuICAgIC5sZXZlbENvbHVtbi5hY3RpdmUge1xuICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1icy1ib2R5LWJnKTtcbiAgICAgICAgYm9yZGVyLWxlZnQ6IHZhcigtLWJzLWJvcmRlci1zdHlsZSkgdmFyKC0tYnMtYm9yZGVyLXdpZHRoKSB2YXIoLS1icy1wcmltYXJ5KTtcbiAgICAgICAgbWFyZ2luLWxlZnQ6IC0xcHg7XG4gICAgfVxuICAgIC5sZXZlbFRvb2xiYXIge1xuICAgICAgICB3aWR0aDogMTAwJTtcbiAgICAgICAgbWluLWhlaWdodDogMi41cmVtO1xuICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47XG4gICAgICAgIHdoaXRlLXNwYWNlOiBub3dyYXA7XG4gICAgICAgIHBhZGRpbmc6IDAuMzc1cmVtO1xuICAgICAgICBib3JkZXItYm90dG9tOiB2YXIoLS1icy1ib3JkZXItc3R5bGUpIHZhcigtLWJzLWJvcmRlci13aWR0aClcbiAgICAgICAgICAgIHZhcigtLWJzLWJvcmRlci1jb2xvcik7XG4gICAgfVxuICAgIC5sZXZlbFRvb2xiYXIgPiAubGV2ZWxBY3Rpb25zIHtcbiAgICAgICAgbWFyZ2luLWxlZnQ6IGF1dG87XG4gICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgfVxuICAgIC5sZXZlbFRvb2xiYXIgPiBidXR0b24ge1xuICAgICAgICB3aGl0ZS1zcGFjZTogbm93cmFwO1xuICAgICAgICBvdmVyZmxvdzogaGlkZGVuO1xuICAgICAgICB0ZXh0LW92ZXJmbG93OiBlbGxpcHNpcztcbiAgICB9XG5cbiAgICAubGV2ZWxJdGVtcyB7XG4gICAgICAgIG92ZXJmbG93LXg6IGF1dG87XG4gICAgfVxuICAgIC5jb250ZW50SXRlbSB7XG4gICAgICAgIC8qIHBhZGRpbmc6IDFyZW0gMXJlbTsgKi9cbiAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICAgICAganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuO1xuICAgICAgICBmb250LXNpemU6IDkwJTtcbiAgICAgICAgbWluLWhlaWdodDogMnJlbTtcbiAgICB9XG4gICAgLmNvbnRlbnRJdGVtOmZvY3VzLXZpc2libGUge1xuICAgICAgICBvdXRsaW5lOiBub25lO1xuICAgIH1cbiAgICAuY29udGVudEl0ZW0uZXZlbiB7XG4gICAgICAgIGJhY2tncm91bmQtY29sb3I6IHJnYmEodmFyKC0tYnMtc2Vjb25kYXJ5LWJnLXJnYiksIDAuNCk7XG4gICAgfVxuICAgIC5jb250ZW50SXRlbS5pblBhdGgsXG4gICAgLmNvbnRlbnRJdGVtLnNlbGVjdGVkSXRlbSB7XG4gICAgICAgIGJhY2tncm91bmQtY29sb3I6IHJnYmEodmFyKC0tYnMtcHJpbWFyeS1yZ2IpLCAwLjE1KTtcbiAgICB9XG4gICAgLmNvbnRlbnRJdGVtID4gKiB7XG4gICAgICAgIHBhZGRpbmc6IDAuNXJlbTtcbiAgICAgICAgd2hpdGUtc3BhY2U6IG5vd3JhcDtcbiAgICAgICAgbWF4LXdpZHRoOiA0NTBweDtcbiAgICAgICAgdGV4dC1vdmVyZmxvdzogZWxsaXBzaXM7XG4gICAgICAgIG92ZXJmbG93OiBoaWRkZW47XG4gICAgfVxuICAgIC5jb250ZW50SXRlbSA+IC5icm93c2VTdWIge1xuICAgICAgICBmbGV4LXNocmluazogMDtcbiAgICB9XG4gICAgLmNvbnRlbnRJdGVtIC5wbG9uZS1pY29uIHtcbiAgICAgICAgZGlzcGxheTogaW5saW5lLWJsb2NrO1xuICAgIH1cbiAgICAuY29udGVudEl0ZW0gLmdyaWQtcHJldmlldyA+IGltZyB7XG4gICAgICAgIHdpZHRoOiA5NXB4O1xuICAgICAgICBoZWlnaHQ6IDk1cHg7XG4gICAgICAgIG9iamVjdC1maXQ6IGNvdmVyO1xuICAgICAgICBmbG9hdDogbGVmdDtcbiAgICAgICAgbWFyZ2luLXJpZ2h0OiAxcmVtO1xuICAgIH1cbiAgICAuY29udGVudEl0ZW0gLmlkLW9ubHkge1xuICAgICAgICBmb250LXN0eWxlOiBpdGFsaWM7XG4gICAgfVxuICAgIC5wcmV2aWV3IHtcbiAgICAgICAgd2lkdGg6IDMyMHB4O1xuICAgICAgICBmbGV4LXNocmluazogMDtcbiAgICAgICAgbWluLWhlaWdodDogMzAwcHg7XG4gICAgfVxuICAgIC5wcmV2aWV3IC5pbmZvIHtcbiAgICAgICAgcGFkZGluZzogMC41cmVtO1xuICAgICAgICB3aWR0aDogMTAwJTtcbiAgICAgICAgd29yZC13cmFwOiBhbnl3aGVyZTtcbiAgICB9XG4gICAgLnByZXZpZXcgLmluZm8gLnByZXZpZXdJY29uIHtcbiAgICAgICAgbWFyZ2luOiAwIGF1dG8gMXJlbSBhdXRvO1xuICAgIH1cbiAgICAucHJldmlldyAuaW5mbyAucHJldmlld0ljb24gc3ZnIHtcbiAgICAgICAgd2lkdGg6IDUwcHggIWltcG9ydGFudDtcbiAgICAgICAgaGVpZ2h0OiA1MHB4ICFpbXBvcnRhbnQ7XG4gICAgfVxuICAgIC5wcmV2aWV3IGltZyB7XG4gICAgICAgIG1heC13aWR0aDogMTAwJTtcbiAgICAgICAgaGVpZ2h0OiBhdXRvO1xuICAgICAgICBtYXJnaW4tYm90dG9tOiAwLjVyZW07XG4gICAgfVxuXG4gICAgLnVwbG9hZC13cmFwcGVyIHtcbiAgICAgICAgcGFkZGluZzogMXJlbTtcbiAgICAgICAgd2lkdGg6IDU0MHB4O1xuICAgICAgICBvdmVyZmxvdy14OiBhdXRvO1xuICAgICAgICBmbGV4LXNocmluazogMDtcbiAgICB9XG4gICAgLmxvYWRtb3JlIHtcbiAgICAgICAgdGV4dC1hbGlnbjogY2VudGVyO1xuICAgICAgICBwYWRkaW5nOiAwLjI1cmVtIDA7XG4gICAgfVxuXG4gICAgLnNlbGVjdC1idXR0b24tZWxsaXBzaXMge1xuICAgICAgICB3aGl0ZS1zcGFjZTogbm93cmFwO1xuICAgICAgICBtYXgtd2lkdGg6IDE1MHB4O1xuICAgICAgICB0ZXh0LW92ZXJmbG93OiBlbGxpcHNpcztcbiAgICAgICAgb3ZlcmZsb3c6IGhpZGRlbjtcbiAgICB9XG48L3N0eWxlPlxuIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQTJ4Qkksd0VBQWtDLENBQzlCLFFBQVEsQ0FBRSxLQUFLLENBQ2YsR0FBRyxDQUFFLENBQUMsQ0FDTixLQUFLLENBQUUsQ0FBQyxDQUNSLE9BQU8sQ0FBRSxJQUFJLENBQ2IsZUFBZSxDQUFFLEdBQUcsQ0FDcEIsT0FBTyxDQUFFLElBQUksQ0FDYixLQUFLLENBQUUsSUFBSSxDQUNYLE1BQU0sQ0FBRSxLQUFLLENBQ2IsZ0JBQWdCLENBQUUsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQ3hDLENBQ0EsOENBQVEsQ0FDSixrQkFBa0IsQ0FBRSxPQUFPLENBQzNCLGtCQUFrQixDQUFFLE1BQU0sQ0FDMUIsa0JBQWtCLENBQUUsT0FDeEIsQ0FDQSx1REFBaUIsQ0FDYixNQUFNLENBQUUsS0FBSyxDQUNiLFNBQVMsQ0FBRSxLQUFLLENBQ2hCLGdCQUFnQixDQUFFLElBQUksb0JBQW9CLENBQUMsQ0FDM0MsV0FBVyxDQUFFLElBQUksaUJBQWlCLENBQUMsQ0FBQyxJQUFJLGlCQUFpQixDQUFDLENBQUMsSUFBSSxDQUMvRCxPQUFPLENBQUUsSUFBSSxDQUNiLE9BQU8sQ0FBRSxJQUFJLENBQ2IsY0FBYyxDQUFFLE1BQ3BCLENBQ0EsK0NBQVMsQ0FDTCxnQkFBZ0IsQ0FBRSxJQUFJLFlBQVksQ0FBQyxDQUNuQyxPQUFPLENBQUUsUUFBUSxDQUFDLE9BQU8sQ0FDekIsS0FBSyxDQUFFLElBQUksVUFBVSxDQUFDLENBQ3RCLEtBQUssQ0FBRSxJQUFJLENBQ1gsT0FBTyxDQUFFLElBQUksQ0FDYixlQUFlLENBQUUsS0FDckIsQ0FDQSxxQkFBUSxDQUFTLEdBQUssQ0FDbEIsY0FBYyxDQUFFLFFBQ3BCLENBQ0Esb0RBQWMsQ0FDVixPQUFPLENBQUUsSUFBSSxDQUNiLFNBQVMsQ0FBRSxNQUFNLENBQ2pCLEtBQUssQ0FBRSxJQUFJLENBQ1gsVUFBVSxDQUFFLE1BQU0sQ0FDbEIsVUFBVSxDQUFFLElBQUksQ0FDaEIsU0FBUyxDQUFFLENBQUMsQ0FDWixXQUFXLENBQUUsSUFBSSxpQkFBaUIsQ0FBQyxDQUFDLElBQUksaUJBQWlCLENBQUMsQ0FBQyxJQUFJLGlCQUFpQixDQUFDLENBQ2pGLFdBQVcsQ0FBRSxJQUNqQixDQUVBLG1EQUFhLENBQ1QsS0FBSyxDQUFFLEtBQUssQ0FDWixVQUFVLENBQUUsS0FBSyxJQUFJLHFCQUFxQixDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FDbEQsWUFBWSxDQUFFLElBQUksaUJBQWlCLENBQUMsQ0FBQyxJQUFJLGlCQUFpQixDQUFDO0FBQ25FLFlBQVksSUFBSSxpQkFBaUIsQ0FBQyxDQUMxQixPQUFPLENBQUUsSUFBSSxDQUNiLGNBQWMsQ0FBRSxNQUFNLENBQ3RCLFNBQVMsQ0FBRSxDQUFDLENBQ1osV0FBVyxDQUFFLENBQ2pCLENBQ0EsWUFBWSw4Q0FBUSxDQUNoQixVQUFVLENBQUUsSUFBSSxZQUFZLENBQUMsQ0FDN0IsV0FBVyxDQUFFLElBQUksaUJBQWlCLENBQUMsQ0FBQyxJQUFJLGlCQUFpQixDQUFDLENBQUMsSUFBSSxZQUFZLENBQUMsQ0FDNUUsV0FBVyxDQUFFLElBQ2pCLENBQ0Esb0RBQWMsQ0FDVixLQUFLLENBQUUsSUFBSSxDQUNYLFVBQVUsQ0FBRSxNQUFNLENBQ2xCLE9BQU8sQ0FBRSxJQUFJLENBQ2IsZUFBZSxDQUFFLGFBQWEsQ0FDOUIsV0FBVyxDQUFFLE1BQU0sQ0FDbkIsT0FBTyxDQUFFLFFBQVEsQ0FDakIsYUFBYSxDQUFFLElBQUksaUJBQWlCLENBQUMsQ0FBQyxJQUFJLGlCQUFpQixDQUFDO0FBQ3BFLFlBQVksSUFBSSxpQkFBaUIsQ0FDN0IsQ0FDQSwwQkFBYSxDQUFHLHVDQUFjLENBQzFCLFdBQVcsQ0FBRSxJQUFJLENBQ2pCLE9BQU8sQ0FBRSxJQUNiLENBQ0EsMEJBQWEsQ0FBRyxnQ0FBTyxDQUNuQixXQUFXLENBQUUsTUFBTSxDQUNuQixRQUFRLENBQUUsTUFBTSxDQUNoQixhQUFhLENBQUUsUUFDbkIsQ0FFQSxrREFBWSxDQUNSLFVBQVUsQ0FBRSxJQUNoQixDQUNBLG1EQUFhLENBRVQsT0FBTyxDQUFFLElBQUksQ0FDYixXQUFXLENBQUUsTUFBTSxDQUNuQixlQUFlLENBQUUsYUFBYSxDQUM5QixTQUFTLENBQUUsR0FBRyxDQUNkLFVBQVUsQ0FBRSxJQUNoQixDQUNBLG1EQUFZLGNBQWUsQ0FDdkIsT0FBTyxDQUFFLElBQ2IsQ0FDQSxZQUFZLDRDQUFNLENBQ2QsZ0JBQWdCLENBQUUsS0FBSyxJQUFJLHFCQUFxQixDQUFDLENBQUMsQ0FBQyxHQUFHLENBQzFELENBQ0EsWUFBWSw4Q0FBTyxDQUNuQixZQUFZLG9EQUFjLENBQ3RCLGdCQUFnQixDQUFFLEtBQUssSUFBSSxnQkFBZ0IsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUN0RCxDQUNBLHlCQUFZLENBQUcsMEJBQUUsQ0FDYixPQUFPLENBQUUsTUFBTSxDQUNmLFdBQVcsQ0FBRSxNQUFNLENBQ25CLFNBQVMsQ0FBRSxLQUFLLENBQ2hCLGFBQWEsQ0FBRSxRQUFRLENBQ3ZCLFFBQVEsQ0FBRSxNQUNkLENBQ0EseUJBQVksQ0FBRyxvQ0FBVyxDQUN0QixXQUFXLENBQUUsQ0FDakIsQ0FDQSx5QkFBWSxDQUFDLHFDQUFZLENBQ3JCLE9BQU8sQ0FBRSxZQUNiLENBQ0EseUJBQVksQ0FBQywwQkFBYSxDQUFHLGdCQUFJLENBQzdCLEtBQUssQ0FBRSxJQUFJLENBQ1gsTUFBTSxDQUFFLElBQUksQ0FDWixVQUFVLENBQUUsS0FBSyxDQUNqQixLQUFLLENBQUUsSUFBSSxDQUNYLFlBQVksQ0FBRSxJQUNsQixDQUNBLHlCQUFZLENBQUMsa0NBQVMsQ0FDbEIsVUFBVSxDQUFFLE1BQ2hCLENBQ0EsK0NBQVMsQ0FDTCxLQUFLLENBQUUsS0FBSyxDQUNaLFdBQVcsQ0FBRSxDQUFDLENBQ2QsVUFBVSxDQUFFLEtBQ2hCLENBQ0EscUJBQVEsQ0FBQywrQkFBTSxDQUNYLE9BQU8sQ0FBRSxNQUFNLENBQ2YsS0FBSyxDQUFFLElBQUksQ0FDWCxTQUFTLENBQUUsUUFDZixDQUNBLHFCQUFRLENBQUMsS0FBSyxDQUFDLHNDQUFhLENBQ3hCLE1BQU0sQ0FBRSxDQUFDLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxJQUN4QixDQUNBLHFCQUFRLENBQUMsS0FBSyxDQUFDLFlBQVksQ0FBQyw2QkFBSSxDQUM1QixLQUFLLENBQUUsSUFBSSxDQUFDLFVBQVUsQ0FDdEIsTUFBTSxDQUFFLElBQUksQ0FBQyxVQUNqQixDQUNBLHFCQUFRLENBQUMsNkJBQUksQ0FDVCxTQUFTLENBQUUsSUFBSSxDQUNmLE1BQU0sQ0FBRSxJQUFJLENBQ1osYUFBYSxDQUFFLE1BQ25CLENBRUEsc0RBQWdCLENBQ1osT0FBTyxDQUFFLElBQUksQ0FDYixLQUFLLENBQUUsS0FBSyxDQUNaLFVBQVUsQ0FBRSxJQUFJLENBQ2hCLFdBQVcsQ0FBRSxDQUNqQixDQUNBLGdEQUFVLENBQ04sVUFBVSxDQUFFLE1BQU0sQ0FDbEIsT0FBTyxDQUFFLE9BQU8sQ0FBQyxDQUNyQixDQUVBLDhEQUF3QixDQUNwQixXQUFXLENBQUUsTUFBTSxDQUNuQixTQUFTLENBQUUsS0FBSyxDQUNoQixhQUFhLENBQUUsUUFBUSxDQUN2QixRQUFRLENBQUUsTUFDZCJ9*/"],sourceRoot:""}]),I.A=t},85083:function(g,I,A){A.r(I),A.d(I,{default:function(){return Mg}});var C=A(43467),l=(A(2531),A(23505)),e=A(41949),t=A(8633),c=A(78836),i=A(95669),n=A(61751),s=A(8936),b=A(54603),d=A(3831);function u(g,I){const A=(0,b.T5)([]),C=async I=>{I={...{vocabularyUrl:g.vocabularyUrl,attributes:g.attributes,pageSize:g.pageSize,browseableTypes:g.browseableTypes,searchIndex:g.searchIndex},...I},g.selectableTypes.length&&(I.selectableTypes=g.selectableTypes);try{return await(0,d.Em)(I)}catch{return{error:"Could load data from backend."}}};return A.get=async l=>{let{path:e="",searchTerm:t="",updateCache:c=!1,loadMorePath:i="",page:n=1,mode:s=null}=l;if(null==s&&(s=g.mode),"search"===s)await(async(I,l)=>{let e={searchPath:g.rootPath,page:l};I&&(e.searchTerm="*"+I+"*");let t=await C(e);t.searchTerm=I;const c=l*g.pageSize<t.total;A.update((g=>0==g.length||g[0].searchTerm!=I?(t.load_more=c,t.selectable=!1,t.page=l,[t]):(g[0].load_more=c,g[0].page=l,g[0].results=[...g[0].results,...t.results],g)))})(t,n);else if(i){n>(0,b.Jt)(I)[i].page&&await(async(I,l,e)=>{let t={path:I,page:l};e&&(t.searchTerm="*"+e+"*");let c=await C(t);A.update((A=>(A.forEach((A=>{if(A.path!=I)return A;A.page=l,A.load_more=l*g.pageSize<c.total,A.results=[...A.results,...c.results]})),A)))})(i,n,t)}else e&&await(async(l,e,t)=>{let c=g.rootPath,i=c.replace(/^\/+/,"").split("/"),n=l,s=c;if(!n.startsWith(c))if(1===i.length)n=c+n;else{let g=n.replace(/^\/+/,"").split("/"),I=i.length;for(let A=0;A<i.length;A++)if(i[A]===g[0]){I=A;break}s="/"+i.filter((I=>g.includes(I))).join("/"),n="/"+i.slice(1,I).concat(g).join("/")}let d=[],u=n.split("/")||[];const a=Math.min(u.length,g.maxDepth||999);let o=u.slice(u.length-a,u.length);const G=u.slice(0,u.length-a).join("/");for(;o.length>0;){let g=o.join("/").replace(/^\//,"");if(g=G+(""!=o.pop()?`/${g}`:""),g&&-1===d.indexOf(g)&&d.push(g),g==c)break}const Z=(0,b.Jt)(I);let r=[],m=0;for(var X of d){m++;const A=1==m;let l={};if(!(X in Z)||A&&e||A&&t){let t={path:X};if(A&&e&&(t.searchTerm="*"+e+"*"),l=await C(t),l.load_more=g.pageSize<l.total,l.page=1,l.path=X,l.searchTerm=e,l.displayPath=X.replace(new RegExp(`^(${s}|${c})`),"")||"/",""===e){const I=await C({levelInfoPath:X});I.total&&(l.UID=I.results[0].UID,l.Title=I.results[0].Title,l.portal_type=I.results[0].portal_type,l.getIcon=I.results[0].getIcon,l.selectable=!g.selectableTypes.length||-1!=g.selectableTypes.indexOf(I.results[0].portal_type))}I.update((g=>(g[X]=l,g)))}else l=Z[X];r=[l,...r]}A.set(r)})(e,t,c)},A}function a(g,I,A){const C=g.slice();return C[5]=I[A],C}function o(g){let I,A,l,e,t,c,i,s,b,u,o=(0,n.Ay)("Favorites")+"",Z=(0,C.rv_)(g[0].favorites),r=[];for(let I=0;I<Z.length;I+=1)r[I]=G(a(g,Z,I));return{c(){I=(0,C.ND4)("div"),A=(0,C.ND4)("button"),l=(0,C.QQy)("svg"),t=(0,C.xem)(),c=(0,C.Qq7)(o),i=(0,C.xem)(),s=(0,C.ND4)("ul");for(let g=0;g<r.length;g+=1)r[g].c();(0,C.CFu)(A,"type","button"),(0,C.CFu)(A,"class","favorites dropdown-toggle btn btn-outline-light btn-sm"),(0,C.CFu)(A,"data-bs-toggle","dropdown"),(0,C.CFu)(A,"aria-haspopup","true"),(0,C.CFu)(A,"aria-expanded","false"),(0,C.CFu)(s,"class","dropdown-menu"),(0,C.CFu)(I,"class","favorites dropdown dropdown-menu-end ms-2")},m(g,n){(0,C.Yry)(g,I,n),(0,C.BCw)(I,A),(0,C.BCw)(A,l),(0,C.BCw)(A,t),(0,C.BCw)(A,c),(0,C.BCw)(I,i),(0,C.BCw)(I,s);for(let g=0;g<r.length;g+=1)r[g]&&r[g].m(s,null);b||(u=(0,C.hGc)(e=d.qz.call(null,l,{iconName:"star-fill"})),b=!0)},p(g,I){if(5&I){let A;for(Z=(0,C.rv_)(g[0].favorites),A=0;A<Z.length;A+=1){const C=a(g,Z,A);r[A]?r[A].p(C,I):(r[A]=G(C),r[A].c(),r[A].m(s,null))}for(;A<r.length;A+=1)r[A].d(1);r.length=Z.length}},d(g){g&&(0,C.YoD)(I),(0,C.ppq)(r,g),b=!1,u()}}}function G(g){let I,A,l,e,t,c,i,n=g[5].title+"";function s(){return g[3](g[5])}return{c(){I=(0,C.ND4)("li"),A=(0,C.ND4)("a"),l=(0,C.Qq7)(n),t=(0,C.xem)(),(0,C.CFu)(A,"class","dropdown-item"),(0,C.CFu)(A,"href",e=g[5].path)},m(g,e){(0,C.Yry)(g,I,e),(0,C.BCw)(I,A),(0,C.BCw)(A,l),(0,C.BCw)(I,t),c||(i=(0,C.KTR)(A,"click",(0,C.xZN)(s)),c=!0)},p(I,t){g=I,1&t&&n!==(n=g[5].title+"")&&(0,C.iQh)(l,n),1&t&&e!==(e=g[5].path)&&(0,C.CFu)(A,"href",e)},d(g){g&&(0,C.YoD)(I),c=!1,i()}}}function Z(g){let I,A=g[0]?.favorites&&o(g);return{c(){A&&A.c(),I=(0,C.Iex)()},m(g,l){A&&A.m(g,l),(0,C.Yry)(g,I,l)},p(g,[C]){g[0]?.favorites?A?A.p(g,C):(A=o(g),A.c(),A.m(I.parentNode,I)):A&&(A.d(1),A=null)},i:C.lQ1,o:C.lQ1,d(g){g&&(0,C.YoD)(I),A&&A.d(g)}}}function r(g,I,A){let l;const t=(0,e.SD)("config");(0,C.j0C)(g,t,(g=>A(0,l=g)));const c=(0,e.ur)();function i(g){c("selectItem",{item:g})}return[l,t,i,g=>i(g)]}class m extends C.r7T{constructor(g){super(),(0,C.TsN)(this,g,r,Z,C.jXN,{})}}var X=m;function B(g,I,A){const C=g.slice();return C[6]=I[A],C}function x(g){let I,A,l,e,t,c,i,s,b,u,a=(0,n.Ay)("Recently Used")+"",o=(0,C.rv_)(g[2].reverse()),G=[];for(let I=0;I<o.length;I+=1)G[I]=p(B(g,o,I));return{c(){I=(0,C.ND4)("div"),A=(0,C.ND4)("button"),l=(0,C.QQy)("svg"),t=(0,C.xem)(),c=(0,C.Qq7)(a),i=(0,C.xem)(),s=(0,C.ND4)("ul");for(let g=0;g<G.length;g+=1)G[g].c();(0,C.CFu)(A,"type","button"),(0,C.CFu)(A,"class","recentlyUsed dropdown-toggle btn btn-outline-light btn-sm"),(0,C.CFu)(A,"data-bs-toggle","dropdown"),(0,C.CFu)(A,"aria-haspopup","true"),(0,C.CFu)(A,"aria-expanded","false"),(0,C.CFu)(s,"class","dropdown-menu dropdown-menu-end"),(0,C.CFu)(I,"class","recentlyUsed dropdown ms-2")},m(g,n){(0,C.Yry)(g,I,n),(0,C.BCw)(I,A),(0,C.BCw)(A,l),(0,C.BCw)(A,t),(0,C.BCw)(A,c),(0,C.BCw)(I,i),(0,C.BCw)(I,s);for(let g=0;g<G.length;g+=1)G[g]&&G[g].m(s,null);b||(u=(0,C.hGc)(e=d.qz.call(null,l,{iconName:"grid-fill"})),b=!0)},p(g,I){if(12&I){let A;for(o=(0,C.rv_)(g[2].reverse()),A=0;A<o.length;A+=1){const C=B(g,o,A);G[A]?G[A].p(C,I):(G[A]=p(C),G[A].c(),G[A].m(s,null))}for(;A<G.length;A+=1)G[A].d(1);G.length=o.length}},d(g){g&&(0,C.YoD)(I),(0,C.ppq)(G,g),b=!1,u()}}}function p(g){let I,A,l,e,t,c,i,n,s,b,u=g[6].Title+"";function a(){return g[4](g[6])}return{c(){I=(0,C.ND4)("li"),A=(0,C.ND4)("a"),l=(0,C.QQy)("svg"),t=(0,C.xem)(),c=(0,C.Qq7)(u),n=(0,C.xem)(),(0,C.CFu)(A,"href",i=g[6].getURL||"#"),(0,C.CFu)(A,"class","dropdown-item")},m(i,u){(0,C.Yry)(i,I,u),(0,C.BCw)(I,A),(0,C.BCw)(A,l),(0,C.BCw)(A,t),(0,C.BCw)(A,c),(0,C.BCw)(I,n),s||(b=[(0,C.hGc)(e=d.qz.call(null,l,{iconName:`contenttype/${g[6]?.portal_type.toLowerCase().replace(/\.| /g,"-")}`})),(0,C.KTR)(A,"click",(0,C.xZN)(a))],s=!0)},p(I,A){g=I},d(g){g&&(0,C.YoD)(I),s=!1,(0,C.oOW)(b)}}}function V(g){let I,A=g[0].recentlyUsed&&g[2].length&&x(g);return{c(){A&&A.c(),I=(0,C.Iex)()},m(g,l){A&&A.m(g,l),(0,C.Yry)(g,I,l)},p(g,[C]){g[0].recentlyUsed&&g[2].length?A?A.p(g,C):(A=x(g),A.c(),A.m(I.parentNode,I)):A&&(A.d(1),A=null)},i:C.lQ1,o:C.lQ1,d(g){g&&(0,C.YoD)(I),A&&A.d(g)}}}function W(g,I,A){let l;const t=(0,e.SD)("config");(0,C.j0C)(g,t,(g=>A(0,l=g)));const c=(0,d.gf)(!0,l),i=(0,e.ur)();function n(g){i("selectItem",{item:g})}return[l,t,c,n,g=>n(g)]}class w extends C.r7T{constructor(g){super(),(0,C.TsN)(this,g,W,V,C.jXN,{})}}var F=w,v=A(85072),Q=A.n(v),N=A(97825),h=A.n(N),y=A(57722),R=A.n(y),Y=A(55056),U=A.n(Y),L=A(10540),D=A.n(L),J=A(41113),S=A.n(J),f=A(24433),H={};H.styleTagTransform=S(),H.setAttributes=U(),H.insert=R(),H.domAPI=h(),H.insertStyleElement=D();Q()(f.A,H),f.A&&f.A.locals&&f.A.locals;function k(g,I,A){const C=g.slice();return C[58]=I[A],C[60]=A,C}function z(g,I,A){const C=g.slice();return C[61]=I[A],C[63]=A,C}function T(g){let I,A,l,e,t,c,n,s,b,u,a,o,G,Z,r,m,B,x,p,V,W,w,v=g[7]&&E(g);s=new F({}),s.$on("selectItem",g[25]),u=new X({}),u.$on("selectItem",g[26]);let Q=g[9].uploadEnabled&&"browse"==g[9].mode&&j(g),N={ctx:g,current:null,token:null,hasCatch:!0,pending:xg,then:K,catch:P,value:57,error:64};return(0,C.vBd)(B=g[1],N),{c(){I=(0,C.ND4)("div"),A=(0,C.ND4)("nav"),l=(0,C.ND4)("div"),e=(0,C.ND4)("div"),t=(0,C.ND4)("input"),c=(0,C.xem)(),v&&v.c(),n=(0,C.xem)(),(0,C.N0i)(s.$$.fragment),b=(0,C.xem)(),(0,C.N0i)(u.$$.fragment),a=(0,C.xem)(),Q&&Q.c(),o=(0,C.xem)(),G=(0,C.ND4)("button"),Z=(0,C.QQy)("svg"),m=(0,C.xem)(),N.block.c(),(0,C.CFu)(t,"type","text"),(0,C.CFu)(t,"name","filter"),(0,C.CFu)(t,"class","form-control form-control-sm"),t.value=g[7],(0,C.CFu)(e,"class","input-group w-auto"),(0,C.CFu)(G,"class","btn btn-link text-white ms-auto"),(0,C.CFu)(G,"tabindex","0"),(0,C.CFu)(l,"class","toolBar navbar svelte-8w273"),(0,C.CFu)(A,"class","content-browser svelte-8w273"),(0,C.CFu)(I,"class","content-browser-position-wrapper svelte-8w273")},m(i,X){(0,C.Yry)(i,I,X),(0,C.BCw)(I,A),(0,C.BCw)(A,l),(0,C.BCw)(l,e),(0,C.BCw)(e,t),(0,C.BCw)(e,c),v&&v.m(e,null),(0,C.BCw)(l,n),(0,C.wSR)(s,l,null),(0,C.BCw)(l,b),(0,C.wSR)(u,l,null),(0,C.BCw)(l,a),Q&&Q.m(l,null),(0,C.BCw)(l,o),(0,C.BCw)(l,G),(0,C.BCw)(G,Z),(0,C.BCw)(A,m),N.block.m(A,N.anchor=null),N.mount=()=>A,N.anchor=null,V=!0,W||(w=[(0,C.KTR)(t,"input",g[31]),(0,C.hGc)(r=d.qz.call(null,Z,{iconName:"x-circle"})),(0,C.KTR)(G,"click",(0,C.xZN)(g[37])),(0,C.KTR)(A,"introend",g[48]),(0,C.hGc)(x=d.EO.call(null,A)),(0,C.KTR)(A,"click_outside",g[27])],W=!0)},p(I,A){g=I,(!V||128&A[0]&&t.value!==g[7])&&(t.value=g[7]),g[7]?v?v.p(g,A):(v=E(g),v.c(),v.m(e,null)):v&&(v.d(1),v=null),g[9].uploadEnabled&&"browse"==g[9].mode?Q?Q.p(g,A):(Q=j(g),Q.c(),Q.m(l,o)):Q&&(Q.d(1),Q=null),N.ctx=g,2&A[0]&&B!==(B=g[1])&&(0,C.vBd)(B,N)||(0,C._6B)(N,g,A)},i(I){V||((0,C.c7F)(s.$$.fragment,I),(0,C.c7F)(u.$$.fragment,I),I&&(0,C.Dti)((()=>{V&&(p||(p=(0,C.h86)(A,i._J,{x:g[17]/100*94,opacity:1},!0)),p.run(1))})),V=!0)},o(I){(0,C.Tn8)(s.$$.fragment,I),(0,C.Tn8)(u.$$.fragment,I),I&&(p||(p=(0,C.h86)(A,i._J,{x:g[17]/100*94,opacity:1},!1)),p.run(0)),V=!1},d(g){g&&(0,C.YoD)(I),v&&v.d(),(0,C.Hbl)(s),(0,C.Hbl)(u),Q&&Q.d(),N.block.d(),N.token=null,N=null,g&&p&&p.end(),W=!1,(0,C.oOW)(w)}}}function E(g){let I,A,l,e,t;return{c(){I=(0,C.ND4)("button"),A=(0,C.QQy)("svg"),(0,C.CFu)(I,"class","btn btn-light btn-sm"),(0,C.CFu)(I,"type","button")},m(c,i){(0,C.Yry)(c,I,i),(0,C.BCw)(I,A),e||(t=[(0,C.hGc)(l=d.qz.call(null,A,{iconName:"x"})),(0,C.KTR)(I,"click",(0,C.xZN)(g[36]))],e=!0)},p:C.lQ1,d(g){g&&(0,C.YoD)(I),e=!1,(0,C.oOW)(t)}}}function j(g){let I,A,l,e,t,c,i,s,b=(0,n.Ay)("upload to ${current_path}",{current_path:g[2]})+"";return{c(){I=(0,C.ND4)("div"),A=(0,C.ND4)("button"),l=(0,C.QQy)("svg"),t=(0,C.xem)(),c=(0,C.Qq7)(b),(0,C.CFu)(A,"type","button"),(0,C.CFu)(A,"class","upload btn btn-outline-light btn-sm"),(0,C.CFu)(A,"tabindex","0"),(0,C.CFu)(I,"class","ms-2")},m(n,b){(0,C.Yry)(n,I,b),(0,C.BCw)(I,A),(0,C.BCw)(A,l),(0,C.BCw)(A,t),(0,C.BCw)(A,c),i||(s=[(0,C.hGc)(e=d.qz.call(null,l,{iconName:"upload"})),(0,C.KTR)(A,"keydown",g[18]),(0,C.KTR)(A,"click",g[18])],i=!0)},p(g,I){4&I[0]&&b!==(b=(0,n.Ay)("upload to ${current_path}",{current_path:g[2]})+"")&&(0,C.iQh)(c,b)},d(g){g&&(0,C.YoD)(I),i=!1,(0,C.oOW)(s)}}}function P(g){let I,A,l=g[64].message+"";return{c(){I=(0,C.ND4)("p"),A=(0,C.Qq7)(l),(0,C.hgi)(I,"color","red")},m(g,l){(0,C.Yry)(g,I,l),(0,C.BCw)(I,A)},p(g,I){2&I[0]&&l!==(l=g[64].message+"")&&(0,C.iQh)(A,l)},d(g){g&&(0,C.YoD)(I)}}}function K(g){let I,A,l,e,t=[],c=new Map,i=(0,C.rv_)(g[57]);const n=g=>g[58].path;for(let I=0;I<i.length;I+=1){let A=k(g,i,I),C=n(A);c.set(C,t[I]=bg(C,A))}let s=g[6]?.UID&&1==g[0].length&&dg(g),b=g[0].length>1&&Xg(g),d=g[4]&&Bg(g);return{c(){I=(0,C.ND4)("div");for(let g=0;g<t.length;g+=1)t[g].c();A=(0,C.xem)(),s&&s.c(),l=(0,C.xem)(),b&&b.c(),e=(0,C.xem)(),d&&d.c(),(0,C.CFu)(I,"class","levelColumns svelte-8w273")},m(g,c){(0,C.Yry)(g,I,c);for(let g=0;g<t.length;g+=1)t[g]&&t[g].m(I,null);(0,C.BCw)(I,A),s&&s.m(I,null),(0,C.BCw)(I,l),b&&b.m(I,null),(0,C.BCw)(I,e),d&&d.m(I,null)},p(g,u){1356334051&u[0]|12&u[1]&&(i=(0,C.rv_)(g[57]),t=(0,C.l7s)(t,u,n,1,g,i,c,I,C.n_k,bg,A,k)),g[6]?.UID&&1==g[0].length?s?(s.p(g,u),65&u[0]&&(0,C.c7F)(s,1)):(s=dg(g),s.c(),(0,C.c7F)(s,1),s.m(I,l)):s&&(s.d(1),s=null),g[0].length>1?b?(b.p(g,u),1&u[0]&&(0,C.c7F)(b,1)):(b=Xg(g),b.c(),(0,C.c7F)(b,1),b.m(I,e)):b&&(b.d(1),b=null),g[4]?d||(d=Bg(g),d.c(),d.m(I,null)):d&&(d.d(1),d=null)},d(g){g&&(0,C.YoD)(I);for(let g=0;g<t.length;g+=1)t[g].d();s&&s.d(),b&&b.d(),d&&d.d()}}}function M(g){let I,A,l,e,t,c,n,s,b,d=0==g[60]&&"browse"==g[9].mode&&O(g),u=g[60]==g[57].length-1&&q(g),a=(0,C.rv_)(g[58].results||[]),o=[];for(let I=0;I<a.length;I+=1)o[I]=ig(z(g,a,I));let G=g[58].load_more&&ng(g),Z=0==g[58].total&&sg(g);return{c(){I=(0,C.ND4)("div"),A=(0,C.ND4)("div"),d&&d.c(),l=(0,C.xem)(),u&&u.c(),e=(0,C.xem)(),t=(0,C.ND4)("div");for(let g=0;g<o.length;g+=1)o[g].c();c=(0,C.xem)(),G&&G.c(),n=(0,C.xem)(),Z&&Z.c(),(0,C.CFu)(A,"class","levelToolbar svelte-8w273"),(0,C.CFu)(t,"class","levelItems svelte-8w273"),(0,C.CFu)(I,"class",s="levelColumn"+(g[60]%2==0?" odd":" even")+" "+(g[60]===g[57].length-1?"active":"")+" svelte-8w273")},m(g,i){(0,C.Yry)(g,I,i),(0,C.BCw)(I,A),d&&d.m(A,null),(0,C.BCw)(A,l),u&&u.m(A,null),(0,C.BCw)(I,e),(0,C.BCw)(I,t);for(let g=0;g<o.length;g+=1)o[g]&&o[g].m(t,null);(0,C.BCw)(t,c),G&&G.m(t,null),(0,C.BCw)(t,n),Z&&Z.m(t,null)},p(g,e){if(0==g[60]&&"browse"==g[9].mode?d?d.p(g,e):(d=O(g),d.c(),d.m(A,l)):d&&(d.d(1),d=null),g[60]==g[57].length-1?u?u.p(g,e):(u=q(g),u.c(),u.m(A,null)):u&&(u.d(1),u=null),1347420931&e[0]){let I;for(a=(0,C.rv_)(g[58].results||[]),I=0;I<a.length;I+=1){const A=z(g,a,I);o[I]?o[I].p(A,e):(o[I]=ig(A),o[I].c(),o[I].m(t,c))}for(;I<o.length;I+=1)o[I].d(1);o.length=a.length}g[58].load_more?G?G.p(g,e):(G=ng(g),G.c(),G.m(t,n)):G&&(G.d(1),G=null),0==g[58].total?Z||(Z=sg(g),Z.c(),Z.m(t,null)):Z&&(Z.d(1),Z=null),2&e[0]&&s!==(s="levelColumn"+(g[60]%2==0?" odd":" even")+" "+(g[60]===g[57].length-1?"active":"")+" svelte-8w273")&&(0,C.CFu)(I,"class",s)},i(g){g&&(b||(0,C.Dti)((()=>{b=(0,C.b7f)(I,i._J,{duration:500}),b.start()})))},o:C.lQ1,d(g){g&&(0,C.YoD)(I),d&&d.d(),u&&u.d(),(0,C.ppq)(o,g),G&&G.d(),Z&&Z.d()}}}function O(g){let I,A,l,e,t;return{c(){I=(0,C.ND4)("button"),A=(0,C.QQy)("svg"),(0,C.CFu)(I,"type","button"),(0,C.CFu)(I,"class","btn btn-link btn-xs ps-0 svelte-8w273"),(0,C.CFu)(I,"tabindex","0")},m(c,i){(0,C.Yry)(c,I,i),(0,C.BCw)(I,A),e||(t=[(0,C.hGc)(l=d.qz.call(null,A,{iconName:"house"})),(0,C.KTR)(I,"keydown",g[38]),(0,C.KTR)(I,"click",g[39])],e=!0)},p:C.lQ1,d(g){g&&(0,C.YoD)(I),e=!1,(0,C.oOW)(t)}}}function q(g){let I,A,l,e=g[58].selectable&&!g[5]&&!g[6].UID&&$(g),t="search"!==g[9].mode&&_(g);function c(g,I){return g[8]?Ag:Cg}let i=c(g),n=i(g);return{c(){e&&e.c(),I=(0,C.xem)(),A=(0,C.ND4)("div"),t&&t.c(),l=(0,C.xem)(),n.c(),(0,C.CFu)(A,"class","levelActions svelte-8w273")},m(g,c){e&&e.m(g,c),(0,C.Yry)(g,I,c),(0,C.Yry)(g,A,c),t&&t.m(A,null),(0,C.BCw)(A,l),n.m(A,null)},p(g,C){!g[58].selectable||g[5]||g[6].UID?e&&(e.d(1),e=null):e?e.p(g,C):(e=$(g),e.c(),e.m(I.parentNode,I)),"search"!==g[9].mode?t?t.p(g,C):(t=_(g),t.c(),t.m(A,l)):t&&(t.d(1),t=null),i===(i=c(g))&&n?n.p(g,C):(n.d(1),n=i(g),n&&(n.c(),n.m(A,null)))},d(g){g&&((0,C.YoD)(I),(0,C.YoD)(A)),e&&e.d(g),t&&t.d(),n.d()}}}function $(g){let I,A,l,e,t,c,i,s,b,u,a=(g[58].Title||Vg(g[58]))+"";function o(){return g[40](g[58])}return{c(){I=(0,C.ND4)("button"),A=(0,C.QQy)("svg"),e=(0,C.xem)(),t=(0,C.ND4)("span"),c=(0,C.Qq7)(a),(0,C.CFu)(t,"class","select-button-ellipsis svelte-8w273"),(0,C.CFu)(I,"class","btn btn-xs btn-outline-primary d-flex align-items-center svelte-8w273"),(0,C.CFu)(I,"title",i=(0,n.Ay)("select ${level_path}",{level_path:g[58].Title||Vg(g[58])})),I.disabled=s=!g[28](g[58])},m(g,i){(0,C.Yry)(g,I,i),(0,C.BCw)(I,A),(0,C.BCw)(I,e),(0,C.BCw)(I,t),(0,C.BCw)(t,c),b||(u=[(0,C.hGc)(l=d.qz.call(null,A,{iconName:"plus"})),(0,C.KTR)(I,"click",(0,C.xZN)(o))],b=!0)},p(A,l){g=A,2&l[0]&&a!==(a=(g[58].Title||Vg(g[58]))+"")&&(0,C.iQh)(c,a),2&l[0]&&i!==(i=(0,n.Ay)("select ${level_path}",{level_path:g[58].Title||Vg(g[58])}))&&(0,C.CFu)(I,"title",i),2&l[0]&&s!==(s=!g[28](g[58]))&&(I.disabled=s)},d(g){g&&(0,C.YoD)(I),b=!1,(0,C.oOW)(u)}}}function _(g){let I;function A(g,I){return g[5]||g[58].searchTerm?Ig:gg}let l=A(g),e=l(g);return{c(){e.c(),I=(0,C.Iex)()},m(g,A){e.m(g,A),(0,C.Yry)(g,I,A)},p(g,C){l===(l=A(g))&&e?e.p(g,C):(e.d(1),e=l(g),e&&(e.c(),e.m(I.parentNode,I)))},d(g){g&&(0,C.YoD)(I),e.d(g)}}}function gg(g){let I,A,l,e,t,c;return{c(){I=(0,C.ND4)("button"),A=(0,C.QQy)("svg"),(0,C.CFu)(I,"class","btn btn-link btn-xs level-filter svelte-8w273"),(0,C.CFu)(I,"title",e=(0,n.Ay)("level filter"))},m(e,i){(0,C.Yry)(e,I,i),(0,C.BCw)(I,A),t||(c=[(0,C.hGc)(l=d.qz.call(null,A,{iconName:"filter"})),(0,C.KTR)(I,"click",(0,C.xZN)(g[42]))],t=!0)},p:C.lQ1,d(g){g&&(0,C.YoD)(I),t=!1,(0,C.oOW)(c)}}}function Ig(g){let I,A,l,e,t,c,i,s,b;return{c(){I=(0,C.ND4)("input"),l=(0,C.xem)(),e=(0,C.ND4)("button"),t=(0,C.QQy)("svg"),(0,C.CFu)(I,"type","text"),(0,C.CFu)(I,"name","levelFilter"),(0,C.CFu)(I,"class","form-control form-control-sm"),I.value=A=g[58].searchTerm,(0,C.CFu)(e,"class","btn btn-link btn-xs level-filter svelte-8w273"),(0,C.CFu)(e,"title",i=(0,n.Ay)("clear filter"))},m(A,i){(0,C.Yry)(A,I,i),(0,C.Yry)(A,l,i),(0,C.Yry)(A,e,i),(0,C.BCw)(e,t),s||(b=[(0,C.KTR)(I,"input",g[33]),(0,C.hGc)(c=d.qz.call(null,t,{iconName:"x"})),(0,C.KTR)(e,"click",(0,C.xZN)(g[41]))],s=!0)},p(g,C){2&C[0]&&A!==(A=g[58].searchTerm)&&I.value!==A&&(I.value=A)},d(g){g&&((0,C.YoD)(I),(0,C.YoD)(l),(0,C.YoD)(e)),s=!1,(0,C.oOW)(b)}}}function Ag(g){let I,A,l,e,t,c;return{c(){I=(0,C.ND4)("button"),A=(0,C.QQy)("svg"),(0,C.CFu)(I,"class","btn btn-link btn-xs grid-view svelte-8w273"),(0,C.CFu)(I,"title",e=(0,n.Ay)("list view"))},m(e,i){(0,C.Yry)(e,I,i),(0,C.BCw)(I,A),t||(c=[(0,C.hGc)(l=d.qz.call(null,A,{iconName:"list"})),(0,C.KTR)(I,"click",g[44])],t=!0)},p:C.lQ1,d(g){g&&(0,C.YoD)(I),t=!1,(0,C.oOW)(c)}}}function Cg(g){let I,A,l,e,t,c;return{c(){I=(0,C.ND4)("button"),A=(0,C.QQy)("svg"),(0,C.CFu)(I,"class","btn btn-link btn-xs grid-view svelte-8w273"),(0,C.CFu)(I,"title",e=(0,n.Ay)("grid view"))},m(e,i){(0,C.Yry)(e,I,i),(0,C.BCw)(I,A),t||(c=[(0,C.hGc)(l=d.qz.call(null,A,{iconName:"grid"})),(0,C.KTR)(I,"click",g[43])],t=!0)},p:C.lQ1,d(g){g&&(0,C.YoD)(I),t=!1,(0,C.oOW)(c)}}}function lg(g){let I,A,l,e,t;return{c(){I=(0,C.ND4)("span"),A=(0,C.QQy)("svg"),(0,C.CFu)(I,"class","plone-icon svelte-8w273")},m(c,i){(0,C.Yry)(c,I,i),(0,C.BCw)(I,A),e||(t=(0,C.hGc)(l=d.qz.call(null,A,{iconName:`contenttype/${g[61].portal_type.toLowerCase().replace(/\.| /g,"-")}`})),e=!0)},p(I,A){g=I,l&&(0,C.Qk1)(l.update)&&2&A[0]&&l.update.call(null,{iconName:`contenttype/${g[61].portal_type.toLowerCase().replace(/\.| /g,"-")}`})},d(g){g&&(0,C.YoD)(I),e=!1,t()}}}function eg(g){let I,A,l;return{c(){I=(0,C.ND4)("img"),(0,C.mq_)(I.src,A=`${g[61].getURL}/@@images/image/thumb`)||(0,C.CFu)(I,"src",A),(0,C.CFu)(I,"alt",l=g[61].Title||Vg(g[61])),(0,C.CFu)(I,"class","svelte-8w273")},m(g,A){(0,C.Yry)(g,I,A)},p(g,e){2&e[0]&&!(0,C.mq_)(I.src,A=`${g[61].getURL}/@@images/image/thumb`)&&(0,C.CFu)(I,"src",A),2&e[0]&&l!==(l=g[61].Title||Vg(g[61]))&&(0,C.CFu)(I,"alt",l)},d(g){g&&(0,C.YoD)(I)}}}function tg(g){let I,A,l,e=g[61].path+"";return{c(){I=(0,C.ND4)("br"),A=(0,C.ND4)("span"),l=(0,C.Qq7)(e),(0,C.CFu)(A,"class","small")},m(g,e){(0,C.Yry)(g,I,e),(0,C.Yry)(g,A,e),(0,C.BCw)(A,l)},p(g,I){2&I[0]&&e!==(e=g[61].path+"")&&(0,C.iQh)(l,e)},d(g){g&&((0,C.YoD)(I),(0,C.YoD)(A))}}}function cg(g){let I,A,l,e,t;return{c(){I=(0,C.ND4)("div"),A=(0,C.QQy)("svg"),(0,C.CFu)(I,"class","browseSub svelte-8w273")},m(g,c){(0,C.Yry)(g,I,c),(0,C.BCw)(I,A),e||(t=(0,C.hGc)(l=d.qz.call(null,A,{iconName:"arrow-right-circle"})),e=!0)},d(g){g&&(0,C.YoD)(I),e=!1,t()}}}function ig(g){let I,A,l,e,t,c,i,n,s,b,d,u,a,o,G,Z=(g[61].Title||Vg(g[61]))+"";function r(g,I){return g[8]&&g[61].getIcon?eg:lg}let m=r(g),X=m(g),B="search"==g[9].mode&&tg(g),x=g[61].is_folderish&&"browse"==g[9].mode&&cg();function p(...I){return g[45](g[61],...I)}function V(...I){return g[46](g[61],...I)}return{c(){I=(0,C.ND4)("div"),A=(0,C.ND4)("div"),X.c(),l=(0,C.xem)(),e=(0,C.ND4)("span"),t=(0,C.Qq7)(Z),i=(0,C.xem)(),B&&B.c(),b=(0,C.xem)(),x&&x.c(),(0,C.CFu)(e,"class",c=(0,C.oEI)(g[61].Title?"":"id-only")+" svelte-8w273"),(0,C.CFu)(A,"class",n=(0,C.oEI)(g[8]?"grid-preview":"item-title")+" svelte-8w273"),(0,C.CFu)(A,"title",s=g[61].path+": "+(g[61].Title||Vg(g[61]))),(0,C.CFu)(I,"class",d="contentItem"+(g[63]%2==0?" odd":" even")+(g[30](g[61])?" inPath":"")+(-1!=g[0].indexOf(g[61].UID)?" selectedItem":"")+(g[28](g[61])?"":" text-body-tertiary")+" svelte-8w273"),(0,C.CFu)(I,"role","button"),(0,C.CFu)(I,"tabindex",u=g[63]),(0,C.CFu)(I,"data-uuid",a=g[61].UID)},m(g,c){(0,C.Yry)(g,I,c),(0,C.BCw)(I,A),X.m(A,null),(0,C.BCw)(A,l),(0,C.BCw)(A,e),(0,C.BCw)(e,t),(0,C.BCw)(A,i),B&&B.m(A,null),(0,C.BCw)(I,b),x&&x.m(I,null),o||(G=[(0,C.KTR)(I,"keydown",(0,C.xZN)(p)),(0,C.KTR)(I,"click",V)],o=!0)},p(i,b){m===(m=r(g=i))&&X?X.p(g,b):(X.d(1),X=m(g),X&&(X.c(),X.m(A,l))),2&b[0]&&Z!==(Z=(g[61].Title||Vg(g[61]))+"")&&(0,C.iQh)(t,Z),2&b[0]&&c!==(c=(0,C.oEI)(g[61].Title?"":"id-only")+" svelte-8w273")&&(0,C.CFu)(e,"class",c),"search"==g[9].mode?B?B.p(g,b):(B=tg(g),B.c(),B.m(A,null)):B&&(B.d(1),B=null),256&b[0]&&n!==(n=(0,C.oEI)(g[8]?"grid-preview":"item-title")+" svelte-8w273")&&(0,C.CFu)(A,"class",n),2&b[0]&&s!==(s=g[61].path+": "+(g[61].Title||Vg(g[61])))&&(0,C.CFu)(A,"title",s),g[61].is_folderish&&"browse"==g[9].mode?x||(x=cg(),x.c(),x.m(I,null)):x&&(x.d(1),x=null),3&b[0]&&d!==(d="contentItem"+(g[63]%2==0?" odd":" even")+(g[30](g[61])?" inPath":"")+(-1!=g[0].indexOf(g[61].UID)?" selectedItem":"")+(g[28](g[61])?"":" text-body-tertiary")+" svelte-8w273")&&(0,C.CFu)(I,"class",d),2&b[0]&&a!==(a=g[61].UID)&&(0,C.CFu)(I,"data-uuid",a)},d(g){g&&(0,C.YoD)(I),X.d(),B&&B.d(),x&&x.d(),o=!1,(0,C.oOW)(G)}}}function ng(g){let I,A,l,e,t,c,i,n;return{c(){I=(0,C.ND4)("div"),A=(0,C.ND4)("div"),(0,C.CFu)(A,"class","spinner-border"),(0,C.CFu)(A,"role","status"),(0,C.CFu)(I,"class","loadmore svelte-8w273"),(0,C.CFu)(I,"data-level-path",l=g[58].path),(0,C.CFu)(I,"data-search-term",e=g[7]||g[58].searchTerm),(0,C.CFu)(I,"data-level-next-page",t=+g[58].page+1)},m(l,e){(0,C.Yry)(l,I,e),(0,C.BCw)(I,A),i||(n=(0,C.hGc)(c=g[35].call(null,I)),i=!0)},p(g,A){2&A[0]&&l!==(l=g[58].path)&&(0,C.CFu)(I,"data-level-path",l),130&A[0]&&e!==(e=g[7]||g[58].searchTerm)&&(0,C.CFu)(I,"data-search-term",e),2&A[0]&&t!==(t=+g[58].page+1)&&(0,C.CFu)(I,"data-level-next-page",t)},d(g){g&&(0,C.YoD)(I),i=!1,n()}}}function sg(g){let I,A;return{c(){I=(0,C.ND4)("div"),A=(0,C.ND4)("p"),A.textContent=`${(0,n.Ay)("no results found")}`,(0,C.CFu)(A,"class","svelte-8w273"),(0,C.CFu)(I,"class","contentItem svelte-8w273")},m(g,l){(0,C.Yry)(g,I,l),(0,C.BCw)(I,A)},d(g){g&&(0,C.YoD)(I)}}}function bg(g,I){let A,l,e=I[0].length<2||!I[0].includes(I[58].UID),t=e&&M(I);return{key:g,first:null,c(){A=(0,C.Iex)(),t&&t.c(),l=(0,C.Iex)(),this.first=A},m(g,I){(0,C.Yry)(g,A,I),t&&t.m(g,I),(0,C.Yry)(g,l,I)},p(g,A){I=g,3&A[0]&&(e=I[0].length<2||!I[0].includes(I[58].UID)),e?t?(t.p(I,A),3&A[0]&&(0,C.c7F)(t,1)):(t=M(I),t.c(),(0,C.c7F)(t,1),t.m(l.parentNode,l)):t&&(t.d(1),t=null)},d(g){g&&((0,C.YoD)(A),(0,C.YoD)(l)),t&&t.d(g)}}}function dg(g){let I,A,l,e,t,c,s,b,d,u,a,o,G,Z,r,m,X,B=g[28](g[6]),x=Vg(g[6])+"",p=g[6].Title+"",V=B&&ug(g);function W(g,I){return g[6].getIcon?og:ag}let w=W(g),F=w(g),v=g[6].Description&&Gg(g),Q=g[6].created&&Zg(g),N=g[6].modified&&rg(g),h=g[6].review_state&&mg(g);return{c(){I=(0,C.ND4)("div"),A=(0,C.ND4)("div"),l=(0,C.ND4)("div"),V&&V.c(),e=(0,C.xem)(),t=(0,C.ND4)("div"),F.c(),c=(0,C.xem)(),s=(0,C.ND4)("dl"),b=(0,C.ND4)("dt"),b.textContent=`${(0,n.Ay)("Id")}`,d=(0,C.ND4)("dd"),u=(0,C.Qq7)(x),a=(0,C.ND4)("dt"),a.textContent=`${(0,n.Ay)("Title")}`,o=(0,C.ND4)("dd"),G=(0,C.Qq7)(p),v&&v.c(),Z=(0,C.Iex)(),Q&&Q.c(),r=(0,C.Iex)(),N&&N.c(),m=(0,C.Iex)(),h&&h.c(),(0,C.CFu)(l,"class","selectLevel me-3"),(0,C.CFu)(A,"class","levelToolbar svelte-8w273"),(0,C.CFu)(t,"class","info svelte-8w273"),(0,C.CFu)(I,"class","preview svelte-8w273")},m(g,i){(0,C.Yry)(g,I,i),(0,C.BCw)(I,A),(0,C.BCw)(A,l),V&&V.m(l,null),(0,C.BCw)(I,e),(0,C.BCw)(I,t),F.m(t,null),(0,C.BCw)(t,c),(0,C.BCw)(t,s),(0,C.BCw)(s,b),(0,C.BCw)(s,d),(0,C.BCw)(d,u),(0,C.BCw)(s,a),(0,C.BCw)(s,o),(0,C.BCw)(o,G),v&&v.m(s,null),(0,C.BCw)(s,Z),Q&&Q.m(s,null),(0,C.BCw)(s,r),N&&N.m(s,null),(0,C.BCw)(s,m),h&&h.m(s,null)},p(g,I){64&I[0]&&(B=g[28](g[6])),B?V?V.p(g,I):(V=ug(g),V.c(),V.m(l,null)):V&&(V.d(1),V=null),w===(w=W(g))&&F?F.p(g,I):(F.d(1),F=w(g),F&&(F.c(),F.m(t,c))),64&I[0]&&x!==(x=Vg(g[6])+"")&&(0,C.iQh)(u,x),64&I[0]&&p!==(p=g[6].Title+"")&&(0,C.iQh)(G,p),g[6].Description?v?v.p(g,I):(v=Gg(g),v.c(),v.m(s,Z)):v&&(v.d(1),v=null),g[6].created?Q?Q.p(g,I):(Q=Zg(g),Q.c(),Q.m(s,r)):Q&&(Q.d(1),Q=null),g[6].modified?N?N.p(g,I):(N=rg(g),N.c(),N.m(s,m)):N&&(N.d(1),N=null),g[6].review_state?h?h.p(g,I):(h=mg(g),h.c(),h.m(s,null)):h&&(h.d(1),h=null)},i(g){g&&(X||(0,C.Dti)((()=>{X=(0,C.b7f)(I,i._J,{duration:500}),X.start()})))},o:C.lQ1,d(g){g&&(0,C.YoD)(I),V&&V.d(),F.d(),v&&v.d(),Q&&Q.d(),N&&N.d(),h&&h.d()}}}function ug(g){let I,A,l,e,t,c,i,s,b,u=g[6].Title+"";return{c(){I=(0,C.ND4)("button"),A=(0,C.QQy)("svg"),e=(0,C.xem)(),t=(0,C.ND4)("span"),c=(0,C.Qq7)(u),(0,C.CFu)(A,"class","svelte-8w273"),(0,C.CFu)(t,"class","select-button-ellipsis svelte-8w273"),(0,C.CFu)(I,"class","btn btn-xs btn-outline-primary d-flex align-items-center svelte-8w273"),(0,C.CFu)(I,"title",i=(0,n.Ay)("select ${preview_path}",{preview_path:g[6].Title}))},m(i,n){(0,C.Yry)(i,I,n),(0,C.BCw)(I,A),(0,C.BCw)(I,e),(0,C.BCw)(I,t),(0,C.BCw)(t,c),s||(b=[(0,C.hGc)(l=d.qz.call(null,A,{iconName:"plus"})),(0,C.KTR)(I,"click",(0,C.xZN)(g[47]))],s=!0)},p(g,A){64&A[0]&&u!==(u=g[6].Title+"")&&(0,C.iQh)(c,u),64&A[0]&&i!==(i=(0,n.Ay)("select ${preview_path}",{preview_path:g[6].Title}))&&(0,C.CFu)(I,"title",i)},d(g){g&&(0,C.YoD)(I),s=!1,(0,C.oOW)(b)}}}function ag(g){let I,A,l,e,t;return{c(){I=(0,C.ND4)("div"),A=(0,C.QQy)("svg"),(0,C.CFu)(A,"class","svelte-8w273"),(0,C.CFu)(I,"class","previewIcon svelte-8w273")},m(c,i){(0,C.Yry)(c,I,i),(0,C.BCw)(I,A),e||(t=(0,C.hGc)(l=d.qz.call(null,A,{iconName:`contenttype/${g[6].portal_type.toLowerCase().replace(/\.| /g,"-")}`})),e=!0)},p(g,I){l&&(0,C.Qk1)(l.update)&&64&I[0]&&l.update.call(null,{iconName:`contenttype/${g[6].portal_type.toLowerCase().replace(/\.| /g,"-")}`})},d(g){g&&(0,C.YoD)(I),e=!1,t()}}}function og(g){let I,A,l,e;return{c(){I=(0,C.ND4)("div"),A=(0,C.ND4)("img"),(0,C.mq_)(A.src,l=g[6].getURL+"/@@images/image/preview")||(0,C.CFu)(A,"src",l),(0,C.CFu)(A,"alt",e=g[6].Title),(0,C.CFu)(A,"class","svelte-8w273"),(0,C.CFu)(I,"class","previewImage")},m(g,l){(0,C.Yry)(g,I,l),(0,C.BCw)(I,A)},p(g,I){64&I[0]&&!(0,C.mq_)(A.src,l=g[6].getURL+"/@@images/image/preview")&&(0,C.CFu)(A,"src",l),64&I[0]&&e!==(e=g[6].Title)&&(0,C.CFu)(A,"alt",e)},d(g){g&&(0,C.YoD)(I)}}}function Gg(g){let I,A,l,e,t,c=g[6].Description+"";return{c(){I=(0,C.ND4)("dt"),I.textContent=`${(0,n.Ay)("Description")}`,A=(0,C.ND4)("dd"),l=(0,C.Qq7)(c),e=(0,C.xem)(),(0,C.CFu)(A,"class","text-truncate"),(0,C.CFu)(A,"title",t=g[6].Description)},m(g,t){(0,C.Yry)(g,I,t),(0,C.Yry)(g,A,t),(0,C.BCw)(A,l),(0,C.BCw)(A,e)},p(g,I){64&I[0]&&c!==(c=g[6].Description+"")&&(0,C.iQh)(l,c),64&I[0]&&t!==(t=g[6].Description)&&(0,C.CFu)(A,"title",t)},d(g){g&&((0,C.YoD)(I),(0,C.YoD)(A))}}}function Zg(g){let I,A,l,e,t,c,i=(0,d.Yq)(g[6].created)+"";return{c(){I=(0,C.ND4)("dt"),I.textContent=`${(0,n.Ay)("created")}`,A=(0,C.ND4)("dd"),l=(0,C.ND4)("time"),e=(0,C.Qq7)(i),c=(0,C.xem)(),(0,C.CFu)(l,"datetime",t=g[6].created)},m(g,t){(0,C.Yry)(g,I,t),(0,C.Yry)(g,A,t),(0,C.BCw)(A,l),(0,C.BCw)(l,e),(0,C.BCw)(A,c)},p(g,I){64&I[0]&&i!==(i=(0,d.Yq)(g[6].created)+"")&&(0,C.iQh)(e,i),64&I[0]&&t!==(t=g[6].created)&&(0,C.CFu)(l,"datetime",t)},d(g){g&&((0,C.YoD)(I),(0,C.YoD)(A))}}}function rg(g){let I,A,l,e,t,c,i=(0,d.Yq)(g[6].modified)+"";return{c(){I=(0,C.ND4)("dt"),I.textContent=`${(0,n.Ay)("modified")}`,A=(0,C.ND4)("dd"),l=(0,C.ND4)("time"),e=(0,C.Qq7)(i),c=(0,C.xem)(),(0,C.CFu)(l,"datetime",t=g[6].modified)},m(g,t){(0,C.Yry)(g,I,t),(0,C.Yry)(g,A,t),(0,C.BCw)(A,l),(0,C.BCw)(l,e),(0,C.BCw)(A,c)},p(g,I){64&I[0]&&i!==(i=(0,d.Yq)(g[6].modified)+"")&&(0,C.iQh)(e,i),64&I[0]&&t!==(t=g[6].modified)&&(0,C.CFu)(l,"datetime",t)},d(g){g&&((0,C.YoD)(I),(0,C.YoD)(A))}}}function mg(g){let I,A,l,e=g[6].review_state+"";return{c(){I=(0,C.ND4)("dt"),I.textContent=`${(0,n.Ay)("review_state")}`,A=(0,C.ND4)("dd"),l=(0,C.Qq7)(e)},m(g,e){(0,C.Yry)(g,I,e),(0,C.Yry)(g,A,e),(0,C.BCw)(A,l)},p(g,I){64&I[0]&&e!==(e=g[6].review_state+"")&&(0,C.iQh)(l,e)},d(g){g&&((0,C.YoD)(I),(0,C.YoD)(A))}}}function Xg(g){let I,A,l,e,t,c,s,b,u,a,o,G,Z,r,m,X,B,x,p=(0,n.Ay)("${item_count} items selected",{item_count:g[0].length})+"";return{c(){I=(0,C.ND4)("div"),A=(0,C.ND4)("div"),l=(0,C.ND4)("button"),e=(0,C.QQy)("svg"),c=(0,C.xem)(),s=(0,C.ND4)("span"),s.textContent=`${(0,n.Ay)("add selected items")}`,u=(0,C.xem)(),a=(0,C.ND4)("div"),o=(0,C.QQy)("svg"),Z=(0,C.xem)(),r=(0,C.ND4)("span"),m=(0,C.Qq7)(p),(0,C.CFu)(e,"class","svelte-8w273"),(0,C.CFu)(s,"class","select-button-ellipsis svelte-8w273"),(0,C.CFu)(l,"class","btn btn-xs btn-outline-primary d-flex align-items-center svelte-8w273"),(0,C.CFu)(l,"title",b=(0,n.Ay)("add selected items")),(0,C.CFu)(A,"class","levelToolbar svelte-8w273"),(0,C.CFu)(o,"class","svelte-8w273"),(0,C.CFu)(r,"class",""),(0,C.CFu)(a,"class","info svelte-8w273"),(0,C.CFu)(I,"class","preview svelte-8w273")},m(i,n){(0,C.Yry)(i,I,n),(0,C.BCw)(I,A),(0,C.BCw)(A,l),(0,C.BCw)(l,e),(0,C.BCw)(l,c),(0,C.BCw)(l,s),(0,C.BCw)(I,u),(0,C.BCw)(I,a),(0,C.BCw)(a,o),(0,C.BCw)(a,Z),(0,C.BCw)(a,r),(0,C.BCw)(r,m),B||(x=[(0,C.hGc)(t=d.qz.call(null,e,{iconName:"plus"})),(0,C.KTR)(l,"click",(0,C.xZN)(g[24])),(0,C.hGc)(G=d.qz.call(null,o,{iconName:"files"}))],B=!0)},p(g,I){1&I[0]&&p!==(p=(0,n.Ay)("${item_count} items selected",{item_count:g[0].length})+"")&&(0,C.iQh)(m,p)},i(g){g&&(X||(0,C.Dti)((()=>{X=(0,C.b7f)(I,i._J,{duration:500}),X.start()})))},o:C.lQ1,d(g){g&&(0,C.YoD)(I),B=!1,(0,C.oOW)(x)}}}function Bg(g){let I;return{c(){I=(0,C.ND4)("div"),(0,C.CFu)(I,"class","upload-wrapper svelte-8w273")},m(g,A){(0,C.Yry)(g,I,A)},d(g){g&&(0,C.YoD)(I)}}}function xg(g){let I;return{c(){I=(0,C.ND4)("p"),I.textContent=`${(0,n.Ay)("loading content items")}`},m(g,A){(0,C.Yry)(g,I,A)},p:C.lQ1,d(g){g&&(0,C.YoD)(I)}}}function pg(g){let I,A,l=g[3]&&T(g);return{c(){l&&l.c(),I=(0,C.Iex)()},m(g,e){l&&l.m(g,e),(0,C.Yry)(g,I,e),A=!0},p(g,A){g[3]?l?(l.p(g,A),8&A[0]&&(0,C.c7F)(l,1)):(l=T(g),l.c(),(0,C.c7F)(l,1),l.m(I.parentNode,I)):l&&((0,C.V44)(),(0,C.Tn8)(l,1,1,(()=>{l=null})),(0,C.GYV)())},i(g){A||((0,C.c7F)(l),A=!0)},o(g){(0,C.Tn8)(l),A=!1},d(g){g&&(0,C.YoD)(I),l&&l.d(g)}}}function Vg(g){return g.path?.split("/").pop()||"- no id -"}function Wg(g,I,A){let l,i,n,b,a,o,G;c.ih({scrollX:!0,container:".levelColumns",duration:500});const Z=(0,e.SD)("currentPath");(0,C.j0C)(g,Z,(g=>A(2,n=g)));const r=(0,e.SD)("config");(0,C.j0C)(g,r,(g=>A(9,a=g)));const m=(0,e.SD)("pathCache"),X=(0,e.SD)("showContentBrowser");(0,C.j0C)(g,X,(g=>A(3,b=g)));const B=(0,e.SD)("selectedItems");(0,C.j0C)(g,B,(g=>A(52,G=g)));const x=(0,e.SD)("selectedUids");(0,C.j0C)(g,x,(g=>A(51,o=g)));const p=(0,e.SD)("previewUids");(0,C.j0C)(g,p,(g=>A(0,l=g)));const V=u(a,m);(0,C.j0C)(g,V,(g=>A(1,i=g)));let W=!1,w=!1,F={},v=!1,Q=!1,N=null,h=!1,y=a.mode,R=Math.max(document.documentElement.clientWidth||0,window.innerWidth||0);function Y({data:g=null,uuid:I=null,action:e="show"}){if(g&&"show"==e)A(6,F=g),(0,C.vu6)(p,l=[g.UID],l);else if(I&&"add"==e&&-1===l.indexOf(I)){if(a.maximumSelectionSize>0&&l.length>=a.maximumSelectionSize)return;(0,C.vu6)(p,l=[...l,I],l)}else I&&"remove"==e&&-1!==l.indexOf(I)?p.update((g=>(g.splice(g.indexOf(I),1),g))):"clear"==e&&(A(6,F={}),(0,C.vu6)(p,l=[],l))}function U(g,I){A(4,W=!1),A(5,w=!1),Y({action:"clear"}),"/"!==g&&g!==a.rootPath?function(g){if("browse"==a.mode)if((0,C.vu6)(p,l=[g.UID],l),g.is_folderish)Z.set(g.path);else{const I=g.path.split("/"),A=I.slice(0,I.length-1).join("/");Z.set(A||"/"),Y({data:g})}else Y({data:g});z()}(g):Z.set(a.rootPath)}function L(g,I){v||(v=!0);const A=I.currentTarget.closest(".levelItems");let C=A.querySelectorAll(".selectedItem");if(C.length&&1!=a.maximumSelectionSize)if(Q||I?.shiftKey){let I=!1;for(const C of A.children){if(-1!==[g.UID,l[0]].indexOf(C.dataset.uuid)){if(I){Y({uuid:C.dataset.uuid,action:"add"}),I=!1;continue}I=!0}Y({uuid:C.dataset.uuid,action:I?"add":"remove"})}Q=!1}else I?.metaKey||I?.ctrlKey?Y({uuid:g.UID,action:-1==l.indexOf(g.UID)?"add":"remove"}):([...C].map((g=>g.classList.remove("selectedItem"))),U(g));else U(g);I.currentTarget.focus(),I.currentTarget.classList.add("selectedItem")}function D(){if(v)return;const g=[...document.querySelectorAll(".levelColumn .inPath"),...document.querySelectorAll(".levelColumn .selectedItem")];!g.length&&document.querySelector(".levelColumn .contentItem")&&g.push(document.querySelector(".levelColumn .contentItem")),g.length&&(v=!0,g[0].focus())}function J(g,I){const A=I.currentTarget;if(Q=I.shiftKey,"Escape"==I.key&&H(),"ArrowDown"==I.key&&A?.nextElementSibling?.classList.contains("contentItem")&&A.nextElementSibling.click(),"ArrowUp"==I.key&&A?.previousElementSibling?.classList.contains("contentItem")&&A.previousElementSibling.click(),"ArrowRight"==I.key){const g=I.target.closest(".levelColumn"),A=g?.nextElementSibling;if(!A||!A.classList.contains("levelColumn"))return;A.querySelector(".contentItem")?.click()}if("ArrowLeft"==I.key){const g=I.target.closest(".levelColumn"),A=g?.previousElementSibling;if(!A||!A.classList.contains("levelColumn"))return;A.querySelector(".inPath").click()}"Space"==I.key&&L(g,I),"Enter"==I.key&&k(g)&&(1==a.maximumSelectionSize?S(g):f())}async function S(g){1==a.maximumSelectionSize?(B.set([g]),x.set([g.UID])):(B.update((I=>[...I,g])),x.update((()=>G.map((g=>g.UID))))),(0,d.r1)(g,a),H()}async function f(){const g=await(0,d.x6)(l,a);B.update((I=>{for(const A of g)-1==o.indexOf(A.UID)&&I.push(A);return I})),x.update((()=>G.map((g=>g.UID)))),H()}function H(){A(5,w=!1),P(""),A(7,N=null),(0,C.vu6)(r,a.mode=y,a),(0,C.vu6)(X,b=!1,b),v=!1,Y({action:"clear"})}function k(g){return-1===o.indexOf(g.UID)}function z(){const g=document.querySelector(".levelColumns");g&&c.VG({x:g.scrollWidth+100})}const T=t.A.debounce((async g=>{await E(g.target.value)}),300);async function E(g){A(7,N=g),"browse"===y&&(0,C.vu6)(r,a.mode=""!==N?"search":"browse",a),await V.get({path:n,searchTerm:N,mode:a.mode}),Y({action:"clear"}),g||z()}const j=t.A.debounce((async g=>{await P(g.target.value)}),300),P=async g=>{""!==g?Y({action:"clear"}):z(),await V.get({path:n,searchTerm:g,updateCache:!0})};return g.$$.update=()=>{12&g.$$.dirty[0]&&b&&V.get({path:n}),2&g.$$.dirty[0]&&z(),g.$$.dirty[0]},[l,i,n,b,W,w,F,N,h,a,Z,r,X,B,x,p,V,R,async function(){Y({action:"clear"}),z(),A(4,W=!0),await t.A.timeout(1);const g=document.querySelector(".upload-wrapper");g.classList.add("pat-upload"),new s.default(g,{baseUrl:a.rootUrl,currentPath:n,relativePath:"@@fileUpload",allowPathSelection:!1,hiddenInputContainer:".upload-wrapper",success:(g,I)=>{l.push(I.UID)},queuecomplete:(g,I)=>{V.get({path:n,updateCache:!0}),A(4,W=!1)}})},U,L,D,J,S,f,function(g){S(g.detail.item)},async function(g){const I=g.detail.item.path,A=await(0,d.Em)({vocabularyUrl:a.vocabularyUrl,attributes:a.attributes,levelInfoPath:I});if(!A.total)return void alert(`${I} not found!`);const C=A.results[0];C.path||(C.path=a.rootPath),U(C)},H,k,z,function(g){const I=g.path.split("/"),A=n.split("/");let C=!0;for(const g in I)C=C&&I[g]===A[g];return C},T,E,j,P,function(g){const I=new IntersectionObserver((I=>{for(const A of I)A.isIntersecting&&V.get({loadMorePath:g.dataset.levelPath,page:+g.dataset.levelNextPage,searchTerm:g.dataset.searchTerm})}),{threshold:0,root:null,margin:"0px"});window.setTimeout((()=>{I.observe(g)}),300)},()=>E(""),()=>H(),()=>U(a.rootPath),()=>U(a.rootPath),g=>S(g),()=>{P(""),A(5,w=!1)},()=>A(5,w=!0),()=>A(8,h=!0),()=>A(8,h=!1),(g,I)=>J(g,I),(g,I)=>L(g,I),()=>S(F),()=>{z(),D()}]}class wg extends C.r7T{constructor(g){super(),(0,C.TsN)(this,g,Wg,pg,C.jXN,{},null,[-1,-1,-1])}}var Fg=wg,vg=A(64708),Qg=A.n(vg),Ng=A(44563),hg=A(58621),yg=A.n(hg),Rg=A(19394),Yg={};Yg.styleTagTransform=S(),Yg.setAttributes=U(),Yg.insert=R(),Yg.domAPI=h(),Yg.insertStyleElement=D();Q()(Rg.A,Yg),Rg.A&&Rg.A.locals&&Rg.A.locals;function Ug(g,I,A){const C=g.slice();return C[22]=I[A],C[24]=A,C}function Lg(g){let I,A,l={ctx:g,current:null,token:null,hasCatch:!0,pending:fg,then:Jg,catch:Dg,error:25};return(0,C.vBd)(A=g[7](),l),{c(){I=(0,C.Iex)(),l.block.c()},m(g,A){(0,C.Yry)(g,I,A),l.block.m(g,l.anchor=A),l.mount=()=>I.parentNode,l.anchor=I},p(I,A){g=I,(0,C._6B)(l,g,A)},d(g){g&&(0,C.YoD)(I),l.block.d(g),l.token=null,l=null}}}function Dg(g){let I;return{c(){I=(0,C.ND4)("p"),I.textContent=`${g[25].message}`,(0,C.hgi)(I,"color","red")},m(g,A){(0,C.Yry)(g,I,A)},p:C.lQ1,d(g){g&&(0,C.YoD)(I)}}}function Jg(g){let I,A=[],l=new Map,e=(0,C.rv_)(g[0]);const t=g=>g[22].UID;for(let I=0;I<e.length;I+=1){let C=Ug(g,e,I),c=t(C);l.set(c,A[I]=Sg(c,C))}return{c(){for(let g=0;g<A.length;g+=1)A[g].c();I=(0,C.Iex)()},m(g,l){for(let I=0;I<A.length;I+=1)A[I]&&A[I].m(g,l);(0,C.Yry)(g,I,l)},p(g,c){257&c&&(e=(0,C.rv_)(g[0]),A=(0,C.l7s)(A,c,t,1,g,e,l,I.parentNode,C.n_k,Sg,I,Ug))},d(g){g&&(0,C.YoD)(I);for(let I=0;I<A.length;I+=1)A[I].d(g)}}}function Sg(g,I){let A,l,e,t;return{key:g,first:null,c(){A=(0,C.ND4)("div"),this.first=A},m(g,c){(0,C.Yry)(g,A,c),e||(t=(0,C.hGc)(l=I[9].call(null,A,{item:I[22],unselectItem:I[8]})),e=!0)},p(g,A){I=g,l&&(0,C.Qk1)(l.update)&&1&A&&l.update.call(null,{item:I[22],unselectItem:I[8]})},d(g){g&&(0,C.YoD)(A),e=!1,t()}}}function fg(g){return{c:C.lQ1,m:C.lQ1,p:C.lQ1,d:C.lQ1}}function Hg(g){let I;return{c(){I=(0,C.ND4)("p"),I.textContent=`${(0,n.Ay)("loading selected items")}`},m(g,A){(0,C.Yry)(g,I,A)},d(g){g&&(0,C.YoD)(I)}}}function kg(g){let I,A,l,e,t,c,i,s=g[0]&&Lg(g),b=!g[0]&&Hg();return{c(){I=(0,C.ND4)("div"),A=(0,C.ND4)("div"),s&&s.c(),l=(0,C.xem)(),b&&b.c(),e=(0,C.xem)(),t=(0,C.ND4)("a"),t.textContent=`${(0,n.Ay)("Select")}`,(0,C.CFu)(A,"class","content-browser-selected-items svelte-awokap"),(0,C.CFu)(t,"class","btn btn-primary"),(0,C.CFu)(t,"href","#"),(0,C.hgi)(t,"border-radius","0 var(--bs-border-radius) var(--bs-border-radius) 0"),(0,C.CFu)(I,"class","content-browser-selected-items-wrapper svelte-awokap"),(0,C.hgi)(I,"width",g[2].width||"auto")},m(n,d){(0,C.Yry)(n,I,d),(0,C.BCw)(I,A),s&&s.m(A,null),(0,C.BCw)(A,l),b&&b.m(A,null),(0,C.BCw)(I,e),(0,C.BCw)(I,t),g[13](I),c||(i=[(0,C.KTR)(A,"click",g[11]),(0,C.KTR)(t,"click",(0,C.xZN)(g[12]))],c=!0)},p(g,[e]){g[0]?s?s.p(g,e):(s=Lg(g),s.c(),s.m(A,l)):s&&(s.d(1),s=null),g[0]?b&&(b.d(1),b=null):b||(b=Hg(),b.c(),b.m(A,null)),4&e&&(0,C.hgi)(I,"width",g[2].width||"auto")},i:C.lQ1,o:C.lQ1,d(A){A&&(0,C.YoD)(I),s&&s.d(),b&&b.d(),g[13](null),c=!1,(0,C.oOW)(i)}}}function zg(g,I,A){let l,t,c,i,n,s=!0;const b=(0,e.SD)("config");(0,C.j0C)(g,b,(g=>A(2,t=g)));const u=t.fieldId,a=document.getElementById(u),o=(0,e.SD)("selectedItems");(0,C.j0C)(g,o,(g=>A(0,l=g)));const G=(0,e.SD)("selectedUids"),Z=(0,e.SD)("showContentBrowser");function r(){1!==t.maximumSelectionSize&&l.length>1&&Qg().create(a.previousSibling.querySelector(".content-browser-selected-items"),{draggable:"> div",animation:200,onUpdate:g=>{let I=[];g.target.querySelectorAll(".selected-item").forEach((g=>{I.push(g.dataset.uuid)})),m(I)}})}function m(g){const I=g.join(t.separator);a.value=I,a.dispatchEvent(Ng.A.change_event())}(0,C.j0C)(g,Z,(g=>A(3,c=g))),(0,e.Rc)((async()=>{await async function(){const g=t.selection.length?t.selection:a?.value?a.value.split(t.separator):[];if(!g.length)return;(0,C.vu6)(o,l=await(0,d.x6)(g,t),l),G.update((()=>l.map((g=>g.UID))))}(),r(),A(10,s=!1)}));return g.$$.update=()=>{1025&g.$$.dirty&&(!l.length&&s||(m(function(){let g=[];return l.forEach((I=>{g.push(I.UID)})),g}()),r()))},[l,i,t,c,b,o,Z,async function(){t.componentRegistryKeys?.selectedItem&&(n=yg().getComponent(t.componentRegistryKeys.selectedItem)),n?.component||(n=yg().getComponent("pat-contentbrowser.SelectedItem"))},function(g){o.update((I=>I.filter((I=>I.UID!==g)))),G.update((()=>l.map((g=>g.UID))))},function(g,I){new n.component({target:g,props:I})},s,()=>(0,C.vu6)(Z,c=!l.length,c),()=>(0,C.vu6)(Z,c=!0,c),function(g){C.Dnk[g?"unshift":"push"]((()=>{i=g,A(1,i)}))}]}class Tg extends C.r7T{constructor(g){super(),(0,C.TsN)(this,g,zg,kg,C.jXN,{})}}var Eg=Tg;(0,b.T5)(!1);function jg(g){let I,A,l,e;return I=new Fg({}),l=new Eg({}),{c(){(0,C.N0i)(I.$$.fragment),A=(0,C.xem)(),(0,C.N0i)(l.$$.fragment)},m(g,t){(0,C.wSR)(I,g,t),(0,C.Yry)(g,A,t),(0,C.wSR)(l,g,t),e=!0},p:C.lQ1,i(g){e||((0,C.c7F)(I.$$.fragment,g),(0,C.c7F)(l.$$.fragment,g),e=!0)},o(g){(0,C.Tn8)(I.$$.fragment,g),(0,C.Tn8)(l.$$.fragment,g),e=!1},d(g){g&&(0,C.YoD)(A),(0,C.Hbl)(I,g),(0,C.Hbl)(l,g)}}}function Pg(g,I,A){let t,c,{maxDepth:i}=I,{width:n}=I,{attributes:s}=I,{contextPath:d}=I,{vocabularyUrl:u}=I,{mode:a="browse"}=I,{rootPath:o=""}=I,{rootUrl:G=""}=I,{basePath:Z=""}=I,{selectableTypes:r=[]}=I,{browseableTypes:m=["Folder","LIF","LRF"]}=I,{searchIndex:X="SearchableText"}=I,{maximumSelectionSize:B=-1}=I,{separator:x}=I,{selection:p=[]}=I,{query:V={}}=I,{fieldId:W}=I,{upload:w}=I,{favorites:F}=I,{recentlyUsed:v}=I,{recentlyUsedKey:Q}=I,{recentlyUsedMaxItems:N}=I,{bSize:h=20}=I,{componentRegistryKeys:y={}}=I;const R=l.A.getLogger("pat-contentbrowser");!function(){let g=(0,b.T5)("");(0,e.o)("currentPath",g)}(),function(){let g=(0,b.T5)({});(0,e.o)("config",g)}(),function(){let g=(0,b.T5)({});(0,e.o)("pathCache",g)}(),function(){let g=(0,b.T5)([]);(0,e.o)("selectedItems",g)}(),function(){let g=(0,b.T5)(!1);(0,e.o)("showContentBrowser",g)}(),function(){let g=(0,b.T5)([]);(0,e.o)("selectedUids",g)}(),function(){let g=(0,b.T5)([]);(0,e.o)("previewUids",g)}();const Y=(0,e.SD)("currentPath");if((0,C.j0C)(g,Y,(g=>A(27,c=g))),!c)if(Z||o)(0,C.vu6)(Y,c=0!=Z.indexOf(o)?o:Z,c),o&&c!=o&&0==c.indexOf(o)&&(0,C.vu6)(Y,c=c.replace(o,""),c);else{const g=new URL(u).pathname.split("/");o=d=(0,C.vu6)(Y,c=g.slice(0,g.length-1).join("/")||"/",c)}let U=(0,e.SD)("config");return(0,C.j0C)(g,U,(g=>A(26,t=g))),(0,C.vu6)(U,t={mode:a,attributes:s,contextPath:d,vocabularyUrl:u,width:n,maxDepth:i,rootPath:o,rootUrl:G,basePath:Z,selectableTypes:r,browseableTypes:m,searchIndex:X,maximumSelectionSize:B,separator:x,selection:p,query:V,fieldId:W,uploadEnabled:w,favorites:F,recentlyUsed:v,recentlyUsedKey:Q,recentlyUsedMaxItems:N,pageSize:h,componentRegistryKeys:y},t),R.debug(`Initialized App<${W}> with config`,t),g.$$set=g=>{"maxDepth"in g&&A(4,i=g.maxDepth),"width"in g&&A(5,n=g.width),"attributes"in g&&A(6,s=g.attributes),"contextPath"in g&&A(2,d=g.contextPath),"vocabularyUrl"in g&&A(7,u=g.vocabularyUrl),"mode"in g&&A(8,a=g.mode),"rootPath"in g&&A(3,o=g.rootPath),"rootUrl"in g&&A(9,G=g.rootUrl),"basePath"in g&&A(10,Z=g.basePath),"selectableTypes"in g&&A(11,r=g.selectableTypes),"browseableTypes"in g&&A(12,m=g.browseableTypes),"searchIndex"in g&&A(13,X=g.searchIndex),"maximumSelectionSize"in g&&A(14,B=g.maximumSelectionSize),"separator"in g&&A(15,x=g.separator),"selection"in g&&A(16,p=g.selection),"query"in g&&A(17,V=g.query),"fieldId"in g&&A(18,W=g.fieldId),"upload"in g&&A(19,w=g.upload),"favorites"in g&&A(20,F=g.favorites),"recentlyUsed"in g&&A(21,v=g.recentlyUsed),"recentlyUsedKey"in g&&A(22,Q=g.recentlyUsedKey),"recentlyUsedMaxItems"in g&&A(23,N=g.recentlyUsedMaxItems),"bSize"in g&&A(24,h=g.bSize),"componentRegistryKeys"in g&&A(25,y=g.componentRegistryKeys)},[Y,U,d,o,i,n,s,u,a,G,Z,r,m,X,B,x,p,V,W,w,F,v,Q,N,h,y]}class Kg extends C.r7T{constructor(g){super(),(0,C.TsN)(this,g,Pg,jg,C.jXN,{maxDepth:4,width:5,attributes:6,contextPath:2,vocabularyUrl:7,mode:8,rootPath:3,rootUrl:9,basePath:10,selectableTypes:11,browseableTypes:12,searchIndex:13,maximumSelectionSize:14,separator:15,selection:16,query:17,fieldId:18,upload:19,favorites:20,recentlyUsed:21,recentlyUsedKey:22,recentlyUsedMaxItems:23,bSize:24,componentRegistryKeys:25})}}var Mg=Kg}}]);
//# sourceMappingURL=85083.97700fab6ac4b56728fa.min.js.map