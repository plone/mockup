"use strict";(self.webpackChunk_plone_mockup=self.webpackChunk_plone_mockup||[]).push([[48707],{48707:function(e,t,n){n.r(t),n.d(t,{default:function(){return i}});var r=n(35686),o=n.n(r);class i{constructor(e){this.el=e}createReplyForm(e){var t=e.attr("id"),n=e.find(".reply-to-comment-button"),r=o()("#commenting").clone(!0);r.find("#formfield-form-widgets-captcha").find("script").remove(),r.appendTo(e).css("display","none"),r.removeAttr("id"),o()(n).css("display","none");var i=r.find("form");i.find("#formfield-form-widgets-comment-text").attr("id","formfield-form-widgets-new-textarea"+t),i.find("#form-widgets-comment-text").attr("id","form-widgets-new-textarea"+t),i.find('input[name="form.widgets.in_reply_to"]').val(t);var a=r.find(".cancelreplytocomment");a.attr("id",t),i.find('input[name="form.buttons.cancel"]').css("display","inline"),r.slideDown("slow"),a.css("display","inline")}clearForm(e){e.find(".error").removeClass("error"),e.find(".fieldErrorBox").remove(),e.find('input[type="text"]').attr("value",""),e.find("textarea").attr("value","")}init_comment_eventhandler(){o()('input[name="form.button.TransmitComment"]').on("click",e=>{e.preventDefault();const t=e.currentTarget,n=o()(t),r=n.parents("form"),i=o()(r),a=i.serialize(),l=i.attr("action"),m=n.parents(".comment").attr("id");return o().ajax({type:"GET",url:l,data:a,context:t,success:()=>{let e=location.href;n.parents(".comment").load(`${e} #${m}.comment`,()=>{n.find(".comment").unwrap(),this.init_comment_eventhandler(),o()(".pat-plone-modal").patPloneModal()})},error:()=>!0}),!1}),o().fn.prepOverlay&&o()('form[name="edit"]').prepOverlay({cssclass:"overlay-edit-comment",width:"60%",subtype:"ajax",filter:"#content>*"}),o()('input[name="form.button.DeleteComment"]').on("click",function(e){e.preventDefault();var t=o()(this).parents("form"),n=o()(t).serialize(),r=o()(t).attr("action");return o().ajax({type:"POST",url:r,data:n,context:o()(this).parents(".comment"),success:function(){for(var e=o()(this),t=e.attr("class"),n=parseInt(t[t.indexOf("replyTreeLevel")+14],10),r=".replyTreeLevel"+n,i=0;i<n;i++)r+=", .replyTreeLevel"+i;e.nextUntil(r).each(function(){o()(this).fadeOut("fast",function(){o()(this).remove()})}),e.prev('[class*="replyTreeLevel'+(n-1)+'"]').find('form[name="delete"]').css("display","inline"),o()(this).fadeOut("fast",function(){o()(this).remove()})},error:function(){return!0}}),!1})}init(){let e=this;e.init_comment_eventhandler();var t=o()("#commenting"),n=t.find('input[name="form.widgets.in_reply_to"]');if(0!==n.length&&""!==n.val()){var r="#"+n.val(),i=o()(".discussion").find(r);e.createReplyForm(i),e.clearForm(t)}o()(".reply-to-comment-button").on("click",function(){var t=o()(this).parents().filter(".comment");e.createReplyForm(t),e.clearForm(t)}),o()("#commenting #form-buttons-cancel").on("click",function(t){t.preventDefault();var n=o()(this).parents().filter(".comment").find(".reply-to-comment-button");e.reply_to_comment_form=o()(this).parents().filter(".reply"),e.reply_to_comment_form.slideUp("slow",function(){o()(this).remove()}),n.css("display","inline")}),o()(".reply").find('input[name="form.buttons.reply"]').css("display","none"),o()(".reply").find('input[name="form.buttons.cancel"]').css("display","none"),o()(".reply-to-comment-button").removeClass("hide")}}}}]);
//# sourceMappingURL=48707.60cf0711bcc8e29fb33f.min.js.map