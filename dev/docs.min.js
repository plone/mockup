/** vim: et:ts=4:sw=4:sts=4
 * @license RequireJS 2.1.11 Copyright (c) 2010-2014, The Dojo Foundation All Rights Reserved.
 * Available via the MIT or new BSD license.
 * see: http://github.com/jrburke/requirejs for details
 */

/*!
 * jQuery JavaScript Library v1.8.3
 * http://jquery.com/
 *
 * Includes Sizzle.js
 * http://sizzlejs.com/
 *
 * Copyright 2012 jQuery Foundation and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 *
 * Date: Tue Nov 13 2012 08:20:33 GMT-0500 (Eastern Standard Time)
 */

/*!
 * Sizzle CSS Selector Engine
 * Copyright 2012 jQuery Foundation and other contributors
 * Released under the MIT license
 * http://sizzlejs.com/
 */

/**
 * Copyright 2013-2014 Facebook, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * @providesModule AutoFocusMixin
 * @typechecks static-only
 */

/**
 * Copyright 2013-2014 Facebook, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * @providesModule CSSProperty
 */

/**
 * Copyright 2013-2014 Facebook, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * @providesModule CSSPropertyOperations
 * @typechecks static-only
 */

/**
 * Copyright 2013-2014 Facebook, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * @providesModule ChangeEventPlugin
 */

/**
 * Copyright 2013-2014 Facebook, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * @providesModule ClientReactRootIndex
 * @typechecks
 */

/**
 * Copyright 2013-2014 Facebook, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * @providesModule CompositionEventPlugin
 * @typechecks static-only
 */

/**
 * Copyright 2013-2014 Facebook, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * @providesModule DOMChildrenOperations
 * @typechecks static-only
 */

/**
 * Copyright 2013-2014 Facebook, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * @providesModule DOMProperty
 * @typechecks static-only
 */

/**
 * Copyright 2013-2014 Facebook, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * @providesModule DOMPropertyOperations
 * @typechecks static-only
 */

/**
 * Copyright 2013-2014 Facebook, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * @providesModule Danger
 * @typechecks static-only
 */

/**
 * Copyright 2013-2014 Facebook, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * @providesModule DefaultDOMPropertyConfig
 */

/**
 * Copyright 2013-2014 Facebook, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * @providesModule DefaultEventPluginOrder
 */

/**
 * Copyright 2013-2014 Facebook, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * @providesModule EnterLeaveEventPlugin
 * @typechecks static-only
 */

/**
 * Copyright 2013-2014 Facebook, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * @providesModule EventConstants
 */

/**
 * Copyright 2013-2014 Facebook, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * @providesModule EventPluginHub
 */

/**
 * Copyright 2013-2014 Facebook, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * @providesModule EventPluginRegistry
 * @typechecks static-only
 */

/**
 * Copyright 2013-2014 Facebook, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * @providesModule EventPluginUtils
 */

/**
 * Copyright 2013-2014 Facebook, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * @providesModule EventPropagators
 */

/**
 * Copyright 2013-2014 Facebook, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * @providesModule ExecutionEnvironment
 */

/**
 * Copyright 2013-2014 Facebook, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * @providesModule LinkedValueUtils
 * @typechecks static-only
 */

/**
 * Copyright 2013-2014 Facebook, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * @providesModule MobileSafariClickEventPlugin
 * @typechecks static-only
 */

/**
 * Copyright 2013-2014 Facebook, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * @providesModule PooledClass
 */

/**
 * Copyright 2013-2014 Facebook, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * @providesModule React
 */

/**
 * Copyright 2013-2014 Facebook, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * @providesModule ReactChildren
 */

/**
 * Copyright 2013-2014 Facebook, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * @providesModule ReactComponent
 */

/**
 * Copyright 2013-2014 Facebook, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * @providesModule ReactComponentBrowserEnvironment
 */

/**
 * Copyright 2013-2014 Facebook, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * @providesModule ReactComponentEnvironment
 */

/**
 * Copyright 2013-2014 Facebook, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * @providesModule ReactCompositeComponent
 */

/**
 * Copyright 2013-2014 Facebook, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * @providesModule ReactContext
 */

/**
 * Copyright 2013-2014 Facebook, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * @providesModule ReactCurrentOwner
 */

/**
 * Copyright 2013-2014 Facebook, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * @providesModule ReactDOM
 * @typechecks static-only
 */

/**
 * Copyright 2013-2014 Facebook, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * @providesModule ReactDOMButton
 */

/**
 * Copyright 2013-2014 Facebook, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * @providesModule ReactDOMComponent
 * @typechecks static-only
 */

/**
 * Copyright 2013-2014 Facebook, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * @providesModule ReactDOMForm
 */

/**
 * Copyright 2013-2014 Facebook, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * @providesModule ReactDOMIDOperations
 * @typechecks static-only
 */

/**
 * Copyright 2013-2014 Facebook, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * @providesModule ReactDOMImg
 */

/**
 * Copyright 2013-2014 Facebook, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * @providesModule ReactDOMInput
 */

/**
 * Copyright 2013-2014 Facebook, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * @providesModule ReactDOMOption
 */

/**
 * Copyright 2013-2014 Facebook, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * @providesModule ReactDOMSelect
 */

/**
 * Copyright 2013-2014 Facebook, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * @providesModule ReactDOMSelection
 */

/**
 * Copyright 2013-2014 Facebook, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * @providesModule ReactDOMTextarea
 */

/**
 * Copyright 2013-2014 Facebook, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * @providesModule ReactDefaultBatchingStrategy
 */

/**
 * Copyright 2013-2014 Facebook, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * @providesModule ReactDefaultInjection
 */

/**
 * Copyright 2013-2014 Facebook, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * @providesModule ReactDefaultPerf
 * @typechecks static-only
 */

/**
 * Copyright 2013-2014 Facebook, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * @providesModule ReactDefaultPerfAnalysis
 */

/**
 * Copyright 2013-2014 Facebook, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * @providesModule ReactErrorUtils
 * @typechecks
 */

/**
 * Copyright 2013-2014 Facebook, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * @providesModule ReactEventEmitter
 * @typechecks static-only
 */

/**
 * Copyright 2013-2014 Facebook, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * @providesModule ReactEventEmitterMixin
 */

/**
 * Copyright 2013-2014 Facebook, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * @providesModule ReactEventTopLevelCallback
 * @typechecks static-only
 */

/**
 * Copyright 2013-2014 Facebook, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * @providesModule ReactInjection
 */

/**
 * Copyright 2013-2014 Facebook, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * @providesModule ReactInputSelection
 */

/**
 * Copyright 2013-2014 Facebook, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * @providesModule ReactInstanceHandles
 * @typechecks static-only
 */

/**
 * Copyright 2013-2014 Facebook, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * @providesModule ReactMarkupChecksum
 */

/**
 * Copyright 2013-2014 Facebook, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * @providesModule ReactMount
 */

/**
 * Copyright 2013-2014 Facebook, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * @providesModule ReactMountReady
 */

/**
 * Copyright 2013-2014 Facebook, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * @providesModule ReactMultiChild
 * @typechecks static-only
 */

/**
 * Copyright 2013-2014 Facebook, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * @providesModule ReactMultiChildUpdateTypes
 */

/**
 * Copyright 2013-2014 Facebook, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * @providesModule ReactOwner
 */

/**
 * Copyright 2013-2014 Facebook, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * @providesModule ReactPerf
 * @typechecks static-only
 */

/**
 * Copyright 2013-2014 Facebook, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * @providesModule ReactPropTransferer
 */

/**
 * Copyright 2013-2014 Facebook, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * @providesModule ReactPropTypeLocationNames
 */

/**
 * Copyright 2013-2014 Facebook, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * @providesModule ReactPropTypeLocations
 */

/**
 * Copyright 2013-2014 Facebook, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * @providesModule ReactPropTypes
 */

/**
 * Copyright 2013-2014 Facebook, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * @providesModule ReactPutListenerQueue
 */

/**
 * Copyright 2013-2014 Facebook, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * @providesModule ReactReconcileTransaction
 * @typechecks static-only
 */

/**
 * Copyright 2013-2014 Facebook, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * @providesModule ReactRootIndex
 * @typechecks
 */

/**
 * Copyright 2013-2014 Facebook, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * @typechecks static-only
 * @providesModule ReactServerRendering
 */

/**
 * Copyright 2013-2014 Facebook, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * @providesModule ReactTextComponent
 * @typechecks static-only
 */

/**
 * Copyright 2013-2014 Facebook, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * @providesModule ReactUpdates
 */

/**
 * Copyright 2013-2014 Facebook, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * @providesModule SelectEventPlugin
 */

/**
 * Copyright 2013-2014 Facebook, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * @providesModule ServerReactRootIndex
 * @typechecks
 */

/**
 * Copyright 2013-2014 Facebook, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * @providesModule SimpleEventPlugin
 */

/**
 * Copyright 2013-2014 Facebook, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * @providesModule SyntheticClipboardEvent
 * @typechecks static-only
 */

/**
 * Copyright 2013-2014 Facebook, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * @providesModule SyntheticCompositionEvent
 * @typechecks static-only
 */

/**
 * Copyright 2013-2014 Facebook, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * @providesModule SyntheticDragEvent
 * @typechecks static-only
 */

/**
 * Copyright 2013-2014 Facebook, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * @providesModule SyntheticEvent
 * @typechecks static-only
 */

/**
 * Copyright 2013-2014 Facebook, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * @providesModule SyntheticFocusEvent
 * @typechecks static-only
 */

/**
 * Copyright 2013-2014 Facebook, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * @providesModule SyntheticKeyboardEvent
 * @typechecks static-only
 */

/**
 * Copyright 2013-2014 Facebook, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * @providesModule SyntheticMouseEvent
 * @typechecks static-only
 */

/**
 * Copyright 2013-2014 Facebook, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * @providesModule SyntheticTouchEvent
 * @typechecks static-only
 */

/**
 * Copyright 2013-2014 Facebook, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * @providesModule SyntheticUIEvent
 * @typechecks static-only
 */

/**
 * Copyright 2013-2014 Facebook, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * @providesModule SyntheticWheelEvent
 * @typechecks static-only
 */

/**
 * Copyright 2013-2014 Facebook, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * @providesModule Transaction
 */

/**
 * Copyright 2013-2014 Facebook, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * @providesModule ViewportMetrics
 */

/**
 * Copyright 2013-2014 Facebook, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * @providesModule accumulate
 */

/**
 * Copyright 2013-2014 Facebook, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * @providesModule adler32
 */

/**
 * Copyright 2013-2014 Facebook, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * @providesModule containsNode
 * @typechecks
 */

/**
 * Copyright 2013-2014 Facebook, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * @providesModule copyProperties
 */

/**
 * Copyright 2013-2014 Facebook, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * @providesModule createArrayFrom
 * @typechecks
 */

/**
 * Copyright 2013-2014 Facebook, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * @providesModule createFullPageComponent
 * @typechecks
 */

/**
 * Copyright 2013-2014 Facebook, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * @providesModule createNodesFromMarkup
 * @typechecks
 */

/**
 * Copyright 2013-2014 Facebook, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * @providesModule createObjectFrom
 */

/**
 * Copyright 2013-2014 Facebook, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * @providesModule dangerousStyleValue
 * @typechecks static-only
 */

/**
 * Copyright 2013-2014 Facebook, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * @providesModule emptyFunction
 */

/**
 * Copyright 2013-2014 Facebook, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * @providesModule escapeTextForBrowser
 * @typechecks static-only
 */

/**
 * Copyright 2013-2014 Facebook, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * @providesModule flattenChildren
 */

/**
 * Copyright 2013-2014 Facebook, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * @providesModule forEachAccumulated
 */

/**
 * Copyright 2013-2014 Facebook, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * @providesModule getActiveElement
 * @typechecks
 */

/**
 * Copyright 2013-2014 Facebook, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * @providesModule getEventKey
 * @typechecks static-only
 */

/**
 * Copyright 2013-2014 Facebook, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * @providesModule getEventTarget
 * @typechecks static-only
 */

/**
 * Copyright 2013-2014 Facebook, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * @providesModule getMarkupWrap
 */

/**
 * Copyright 2013-2014 Facebook, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * @providesModule getNodeForCharacterOffset
 */

/**
 * Copyright 2013-2014 Facebook, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * @providesModule getReactRootElementInContainer
 */

/**
 * Copyright 2013-2014 Facebook, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * @providesModule getTextContentAccessor
 */

/**
 * Copyright 2013-2014 Facebook, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * @providesModule getUnboundedScrollPosition
 * @typechecks
 */

/**
 * Copyright 2013-2014 Facebook, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * @providesModule hyphenate
 * @typechecks
 */

/**
 * Copyright 2013-2014 Facebook, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * @providesModule invariant
 */

/**
 * Copyright 2013-2014 Facebook, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * @providesModule isEventSupported
 */

/**
 * Checks if an event is supported in the current execution environment.
 *
 * NOTE: This will not work correctly for non-generic events such as `change`,
 * `reset`, `load`, `error`, and `select`.
 *
 * Borrows from Modernizr.
 *
 * @param {string} eventNameSuffix Event name, e.g. "click".
 * @param {?boolean} capture Check if the capture phase is supported.
 * @return {boolean} True if the event is supported.
 * @internal
 * @license Modernizr 3.0.0pre (Custom Build) | MIT
 */

/**
 * Copyright 2013-2014 Facebook, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * @providesModule isNode
 * @typechecks
 */

/**
 * Copyright 2013-2014 Facebook, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * @providesModule isTextInputElement
 */

/**
 * Copyright 2013-2014 Facebook, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * @providesModule isTextNode
 * @typechecks
 */

/**
 * Copyright 2013-2014 Facebook, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * @providesModule joinClasses
 * @typechecks static-only
 */

/**
 * Copyright 2013-2014 Facebook, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * @providesModule keyMirror
 * @typechecks static-only
 */

/**
 * Copyright 2013-2014 Facebook, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * @providesModule keyOf
 */

/**
 * Copyright 2013-2014 Facebook, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * @providesModule memoizeStringOnly
 * @typechecks static-only
 */

/**
 * Copyright 2013-2014 Facebook, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * @providesModule merge
 */

/**
 * Copyright 2013-2014 Facebook, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * @providesModule mergeHelpers
 *
 * requiresPolyfills: Array.isArray
 */

/**
 * Copyright 2013-2014 Facebook, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * @providesModule mergeInto
 * @typechecks static-only
 */

/**
 * Copyright 2013-2014 Facebook, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * @providesModule mixInto
 */

/**
 * Copyright 2013-2014 Facebook, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * @providesModule objMap
 */

/**
 * Copyright 2013-2014 Facebook, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * @providesModule objMapKeyVal
 */

/**
 * Copyright 2013-2014 Facebook, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * @providesModule onlyChild
 */

/**
 * Copyright 2013-2014 Facebook, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * @providesModule performanceNow
 * @typechecks static-only
 */

/**
 * Copyright 2013-2014 Facebook, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * @providesModule shallowEqual
 */

/**
 * Copyright 2013-2014 Facebook, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * @providesModule shouldUpdateReactComponent
 * @typechecks static-only
 */

/**
 * Copyright 2014 Facebook, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * @providesModule toArray
 * @typechecks
 */

/**
 * Copyright 2013-2014 Facebook, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * @providesModule traverseAllChildren
 */

/**
 * Copyright 2014 Facebook, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * @providesModule warning
 */

/**
 * @license
 * Lo-Dash 2.4.1 (Custom Build) <http://lodash.com/>
 * Build: `lodash underscore exports="amd,commonjs,global,node" -o ./dist/lodash.underscore.js`
 * Copyright 2012-2013 The Dojo Foundation <http://dojofoundation.org/>
 * Based on Underscore.js 1.5.2 <http://underscorejs.org/LICENSE>
 * Copyright 2009-2013 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 * Available under MIT license <http://lodash.com/license>
 */

//     (c) 2010-2014 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
//     Backbone may be freely distributed under the MIT license.
//     For all details and documentation:
//     http://backbonejs.org

/**
 * marked - a markdown parser
 * Copyright (c) 2011-2014, Christopher Jeffrey. (MIT Licensed)
 * https://github.com/chjj/marked
 */

/* ========================================================================
 * Bootstrap: collapse.js v3.1.1
 * http://getbootstrap.com/javascript/#collapse
 * ========================================================================
 * Copyright 2011-2014 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */

/* ========================================================================
 * Bootstrap: transition.js v3.1.1
 * http://getbootstrap.com/javascript/#transitions
 * ========================================================================
 * Copyright 2011-2014 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */

/**
 * @license RequireJS text 2.0.10 Copyright (c) 2010-2012, The Dojo Foundation All Rights Reserved.
 * Available via the MIT or new BSD license.
 * see: http://github.com/requirejs/text for details
 */

/**
 * Sinon.JS 1.7.3, 2013/06/20
 *
 * @author Christian Johansen (christian@cjohansen.no)
 * @author Contributors: https://github.com/cjohansen/Sinon.JS/blob/master/AUTHORS
 *
 * (The BSD License)
 * 
 * Copyright (c) 2010-2013, Christian Johansen, christian@cjohansen.no
 * All rights reserved.
 * 
 * Redistribution and use in source and binary forms, with or without modification,
 * are permitted provided that the following conditions are met:
 * 
 *     * Redistributions of source code must retain the above copyright notice,
 *       this list of conditions and the following disclaimer.
 *     * Redistributions in binary form must reproduce the above copyright notice,
 *       this list of conditions and the following disclaimer in the documentation
 *       and/or other materials provided with the distribution.
 *     * Neither the name of Christian Johansen nor the names of his contributors
 *       may be used to endorse or promote products derived from this software
 *       without specific prior written permission.
 * 
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND
 * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
 * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
 * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE
 * FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
 * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR
 * SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER
 * CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
 * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF
 * THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */

/**
 * Sinon core utilities. For internal use only.
 *
 * @author Christian Johansen (christian@cjohansen.no)
 * @license BSD
 *
 * Copyright (c) 2010-2013 Christian Johansen
 */

/**
 * Match functions
 *
 * @author Maximilian Antoni (mail@maxantoni.de)
 * @license BSD
 *
 * Copyright (c) 2012 Maximilian Antoni
 */

/**
  * Spy calls
  *
  * @author Christian Johansen (christian@cjohansen.no)
  * @author Maximilian Antoni (mail@maxantoni.de)
  * @license BSD
  *
  * Copyright (c) 2010-2013 Christian Johansen
  * Copyright (c) 2013 Maximilian Antoni
  */

/**
  * Spy functions
  *
  * @author Christian Johansen (christian@cjohansen.no)
  * @license BSD
  *
  * Copyright (c) 2010-2013 Christian Johansen
  */

/**
 * Stub functions
 *
 * @author Christian Johansen (christian@cjohansen.no)
 * @license BSD
 *
 * Copyright (c) 2010-2013 Christian Johansen
 */

/**
 * Mock functions.
 *
 * @author Christian Johansen (christian@cjohansen.no)
 * @license BSD
 *
 * Copyright (c) 2010-2013 Christian Johansen
 */

/**
 * Collections of stubs, spies and mocks.
 *
 * @author Christian Johansen (christian@cjohansen.no)
 * @license BSD
 *
 * Copyright (c) 2010-2013 Christian Johansen
 */

/**
 * Fake timer API
 * setTimeout
 * setInterval
 * clearTimeout
 * clearInterval
 * tick
 * reset
 * Date
 *
 * Inspired by jsUnitMockTimeOut from JsUnit
 *
 * @author Christian Johansen (christian@cjohansen.no)
 * @license BSD
 *
 * Copyright (c) 2010-2013 Christian Johansen
 */

/**
 * Minimal Event interface implementation
 *
 * Original implementation by Sven Fuchs: https://gist.github.com/995028
 * Modifications and tests by Christian Johansen.
 *
 * @author Sven Fuchs (svenfuchs@artweb-design.de)
 * @author Christian Johansen (christian@cjohansen.no)
 * @license BSD
 *
 * Copyright (c) 2011 Sven Fuchs, Christian Johansen
 */

/**
 * Fake XMLHttpRequest object
 *
 * @author Christian Johansen (christian@cjohansen.no)
 * @license BSD
 *
 * Copyright (c) 2010-2013 Christian Johansen
 */

/**
 * The Sinon "server" mimics a web server that receives requests from
 * sinon.FakeXMLHttpRequest and provides an API to respond to those requests,
 * both synchronously and asynchronously. To respond synchronuously, canned
 * answers have to be provided upfront.
 *
 * @author Christian Johansen (christian@cjohansen.no)
 * @license BSD
 *
 * Copyright (c) 2010-2013 Christian Johansen
 */

/**
 * Add-on for sinon.fakeServer that automatically handles a fake timer along with
 * the FakeXMLHttpRequest. The direct inspiration for this add-on is jQuery
 * 1.3.x, which does not use xhr object's onreadystatehandler at all - instead,
 * it polls the object for completion with setInterval. Dispite the direct
 * motivation, there is nothing jQuery-specific in this file, so it can be used
 * in any environment where the ajax implementation depends on setInterval or
 * setTimeout.
 *
 * @author Christian Johansen (christian@cjohansen.no)
 * @license BSD
 *
 * Copyright (c) 2010-2013 Christian Johansen
 */

/**
 * Manages fake collections as well as fake utilities such as Sinon's
 * timers and fake XHR implementation in one convenient object.
 *
 * @author Christian Johansen (christian@cjohansen.no)
 * @license BSD
 *
 * Copyright (c) 2010-2013 Christian Johansen
 */

/**
 * Test function, sandboxes fakes
 *
 * @author Christian Johansen (christian@cjohansen.no)
 * @license BSD
 *
 * Copyright (c) 2010-2013 Christian Johansen
 */

/**
 * Test case, sandboxes all test functions
 *
 * @author Christian Johansen (christian@cjohansen.no)
 * @license BSD
 *
 * Copyright (c) 2010-2013 Christian Johansen
 */

/**
 * Assertions matching the test spy retrieval interface.
 *
 * @author Christian Johansen (christian@cjohansen.no)
 * @license BSD
 *
 * Copyright (c) 2010-2013 Christian Johansen
 */

// Patterns
//
// Author: Rok Garbas
// Contact: rok@garbas.si
// Version: 1.0
// Depends: jquery.js
//
// Description:
//
// License:
//
// Copyright (C) 2010 Plone Foundation
//
// This program is free software; you can redistribute it and/or modify it
// under the terms of the GNU General Public License as published by the Free
// Software Foundation; either version 2 of the License.
//
// This program is distributed in the hope that it will be useful, but WITHOUT
// ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
// FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for
// more details.
//
// You should have received a copy of the GNU General Public License along with
// this program; if not, write to the Free Software Foundation, Inc., 51
// Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA.
//

/*!
 * jQuery Cookie Plugin v1.4.0
 * https://github.com/carhartl/jquery-cookie
 *
 * Copyright 2013 Klaus Hartl
 * Released under the MIT license
 */

/* Pattern which provides accessibility support
 *
 * Options:
 *    smallbtn(string):	Selector used to activate small text on click. (null)
 *    normalbtn(string): Selector used to activate normal text on click. (null)
 *    largebtn(string):	Selector used to activate large text on click. (null)
 *
 * Documentation:
 *    # Example
 *
 *    {{ example-1 }}
 *
 * Example: example-1
 *    <ul id="textAdjust"
 *        class="pat-accessibility"
 *        data-pat-accessibility="smallbtn:.decrease-text;
 *                                normalbtn:.normal-text;
 *                                largebtn:.increase-text;">
 *      <li>
 *        <a href="." class="decrease-text">
 *          <i class="icon-minus-sign"></i>
 *          Decrease Text Size
 *        </a>
 *      </li>
 *      <li>
 *        <a href="." class="normal-text">
 *          <i class="icon-circle"></i>
 *          Normal Text Size
 *        </a>
 *      </li>
 *      <li>
 *        <a href="." class="increase-text">
 *          <i class="icon-plus-sign"></i>
 *          Increase Text Size
 *        </a>
 *      </li>
 *    </ul>
 *
 * License:
 *    Copyright (C) 2010 Plone Foundation
 *
 *    This program is free software; you can redistribute it and/or modify it
 *    under the terms of the GNU General Public License as published by the
 *    Free Software Foundation; either version 2 of the License.
 *
 *    This program is distributed in the hope that it will be useful, but
 *    WITHOUT ANY WARRANTY; without even the implied warranty of
 *    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General
 *    Public License for more details.
 *
 *    You should have received a copy of the GNU General Public License along
 *    with this program; if not, write to the Free Software Foundation, Inc.,
 *    51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA.
 */

// utils.
//
// Author: Nathan Van Gheem
// Contact: nathan@vangheem.us
// Version: 1.0
// Depends: jquery.js
//
// Description:
//
// License:
//
// Copyright (C) 2010 Plone Foundation
//
// This program is free software; you can redistribute it and/or modify it
// under the terms of the GNU General Public License as published by the Free
// Software Foundation; either version 2 of the License.
//
// This program is distributed in the hope that it will be useful, but WITHOUT
// ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
// FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for
// more details.
//
// You should have received a copy of the GNU General Public License along with
// this program; if not, write to the Free Software Foundation, Inc., 51
// Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA.
//

/* ***** BEGIN LICENSE BLOCK *****
 * Distributed under the BSD license:
 *
 * Copyright (c) 2010, Ajax.org B.V.
 * All rights reserved.
 * 
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are met:
 *     * Redistributions of source code must retain the above copyright
 *       notice, this list of conditions and the following disclaimer.
 *     * Redistributions in binary form must reproduce the above copyright
 *       notice, this list of conditions and the following disclaimer in the
 *       documentation and/or other materials provided with the distribution.
 *     * Neither the name of Ajax.org B.V. nor the
 *       names of its contributors may be used to endorse or promote products
 *       derived from this software without specific prior written permission.
 * 
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND
 * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
 * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
 * DISCLAIMED. IN NO EVENT SHALL AJAX.ORG B.V. BE LIABLE FOR ANY
 * DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
 * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
 * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
 * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
 * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 *
 * ***** END LICENSE BLOCK ***** */

/* ***** BEGIN LICENSE BLOCK *****
 * Distributed under the BSD license:
 *
 * Copyright (c) 2010, Ajax.org B.V.
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are met:
 *     * Redistributions of source code must retain the above copyright
 *       notice, this list of conditions and the following disclaimer.
 *     * Redistributions in binary form must reproduce the above copyright
 *       notice, this list of conditions and the following disclaimer in the
 *       documentation and/or other materials provided with the distribution.
 *     * Neither the name of Ajax.org B.V. nor the
 *       names of its contributors may be used to endorse or promote products
 *       derived from this software without specific prior written permission.
 * 
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND
 * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
 * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
 * DISCLAIMED. IN NO EVENT SHALL AJAX.ORG B.V. BE LIABLE FOR ANY
 * DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
 * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
 * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
 * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
 * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 *
 * ***** END LICENSE BLOCK ***** */

/* Ace editor pattern
 *
 * Options:
 *    theme(string): Theme to use with editor. defaults to whatever it ships with. (null)
 *    mode(string): What type of syntax is it? ('text')
 *    width(integer): Width of the editor. (500)
 *    height(integer): Height of the editor. (200)
 *    tabSize(integer): TODO (4)
 *    softTabs(boolean): Use spaces for tabs. (true)
 *    wrapMode(boolean): Wrap text. (false)
 *    showGutter(boolean): TODO (true),
 *    showPrintMargin(boolean): Show print margin. (false)
 *    readOnly(boolean): Read only editor. (false)
 *
 * Documentation:
 *    # Default
 *
 *    {{ example-1 }}
 *
 *    # Different theme
 *
 *    {{ example-2 }}
 *
 *    # Different options
 *
 *    {{ example-3 }}
 *
 * Example: example-1
 *    <pre class="pat-ace" data-pat-ace="theme:clouds">
 *    foobar
 *    </pre>
 *
 * Example: example-2
 *    <pre class="pat-ace" data-pat-ace="mode:javascript;theme:dawn;">
 *    var foo = 'bar';
 *    function foobar() {
 *      return foo;
 *    }
 *    </pre>
 *
 * Example: example-3
 *    <pre class="pat-ace"
 *         data-pat-ace="mode:javascript;
 *                       theme:ambiance;
 *                       tabSize:2;
 *                       showGutter:false;
 *                       showPrintMargin:true;">
 *    var foo = 'bar';
 *    function foobar() {
 *      return foo;
 *    }
 *    </pre>
 *
 * License:
 *    Copyright (C) 2010 Plone Foundation
 *
 *    This program is free software; you can redistribute it and/or modify it
 *    under the terms of the GNU General Public License as published by the
 *    Free Software Foundation; either version 2 of the License.
 *
 *    This program is distributed in the hope that it will be useful, but
 *    WITHOUT ANY WARRANTY; without even the implied warranty of
 *    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General
 *    Public License for more details.
 *
 *    You should have received a copy of the GNU General Public License along
 *    with this program; if not, write to the Free Software Foundation, Inc.,
 *    51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA.
 */

/* Autotoc pattern.
 *
 * Options:
 *    IDPrefix(string): Prefix used to generate ID. ('autotoc-item-')
 *    classActiveName(string): Class used for active level. ('active')
 *    classLevelPrefixName(string): Class prefix used for the TOC levels. ('autotoc-level-')
 *    classSectionName(string): Class used for section in TOC. ('autotoc-section')
 *    classTOCName(string): Class used for the TOC. ('autotoc-nav')
 *    levels(string): Selectors used to find levels. ('h1,h2,h3')
 *    scrollDuration(string): Speed of scrolling. ('slow')
 *    scrollEasing(string): Easing to use while scrolling. ('swing')
 *    section(string): Tag type to use for TOC. ('section')
 *
 * Documentation:
 *    # TOC
 *    {{ example-1 }}
 *
 *    # Tabs
 *    {{ example-2-tabs }}
 *
 * Example: example-1
 *    <div class="pat-autotoc"
 *          data-pat-autotoc="scrollDuration:slow;levels:h4,h5,h6;">
 *      <h4>Title 1</h4>
 *      <p>Mr. Zuckerkorn, you've been warned about touching. You said
 *         spanking. It walked on my pillow! How about a turtle? I've always
 *         loved those leathery little snappy faces.</p>
 *      <h5>Title 1.1</h5>
 *      <p>Ah coodle doodle do Caw ca caw, caw ca caw. Butterscotch!</p>
 *      <h6>Title 1.1.1</h6>
 *      <p>Want a lick? Okay, Lindsay, are you forgetting that I was
 *         a professional twice over - an analyst and a therapist.</p>
 *      <h4>Title 2</h4>
 *      <p>You boys know how to shovel coal? Don't worry, these young
 *      beauties have been nowhere near the bananas. I thought the two of
 *      us could talk man-on-man.</p>
 *    </div>
 *
 * Example: example-2-tabs
 *    <div class="pat-autotoc autotabs"
 *          data-pat-autotoc="section:fieldset;levels:legend;">
 *        <fieldset>
 *          <legend>Tab 1</legend>
 *          <div>
 *            Lorem ipsum dolor sit amet, ex nam odio ceteros fastidii,
 *            id porro lorem pro, homero facilisis in cum.
 *            At doming voluptua indoctum mel, natum noster similique ne mel.
 *          </div>
 *        </fieldset>
 *        <fieldset>
 *          <legend>Tab 2</legend>
 *          <div>
 *            Reque repudiare eum et. Prompta expetendis percipitur eu eam,
 *            et graece mandamus pro, eu vim harum audire tractatos.
 *            Ad perpetua salutandi mea, soluta delicata aliquando eam ne.
 *            Qui nostrum lucilius perpetua ut, eum suas stet oblique ut.
 *          </div>
 *        </fieldset>
 *        <fieldset>
 *          <legend>Tab 3</legend>
 *          <div>
 *            Vis mazim harum deterruisset ex, duo nemore nostro civibus ad,
 *            eros vituperata id cum. Vim at erat solet soleat,
 *            eum et iuvaret luptatum, pro an esse dolorum maiestatis.
 *          </div>
 *        </fieldset>
 *    </div>
 *
 * License:
 *    Copyright (C) 2010 Plone Foundation
 *
 *    This program is free software; you can redistribute it and/or modify it
 *    under the terms of the GNU General Public License as published by the
 *    Free Software Foundation; either version 2 of the License.
 *
 *    This program is distributed in the hope that it will be useful, but
 *    WITHOUT ANY WARRANTY; without even the implied warranty of
 *    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General
 *    Public License for more details.
 *
 *    You should have received a copy of the GNU General Public License along
 *    with this program; if not, write to the Free Software Foundation, Inc.,
 *    51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA.
 */

/* Backdrop pattern.
 *
 * Options:
 *    zIndex(integer): z-index of backdrop element. (null)
 *    opacity(float): opacity level of backdrop element. (0.8)
 *    className(string): class name of backdrop element. ('backdrop')
 *    classActiveName(string): class name when backdrop is active. ('backdrop-active')
 *    closeOnEsc(boolean): should backdrop close when ESC key is pressed. (true)
 *    closeOnClick(boolean): should backdrop close when clicked on it. (true)
 *
 * Documentation:
 *    # TODO: we need example or this is not pattern :)
 *
 * Example: example-1
 *
 * License:
 *    Copyright (C) 2010 Plone Foundation
 *
 *    This program is free software; you can redistribute it and/or modify it
 *    under the terms of the GNU General Public License as published by the
 *    Free Software Foundation; either version 2 of the License.
 *
 *    This program is distributed in the hope that it will be useful, but
 *    WITHOUT ANY WARRANTY; without even the implied warranty of
 *    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General
 *    Public License for more details.
 *
 *    You should have received a copy of the GNU General Public License along
 *    with this program; if not, write to the Free Software Foundation, Inc.,
 *    51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA.
 */

/* Cookie Directive pattern.
 *
 * Options:
 *    allowMsg(string): Allow Text on button used to allow cookies.
 *    askPermissionMsg(string): A message about allowing cookies. (This site uses cookies to provide additional functionality, do you accept?)
 *    cookieName(string): Name of cookie used to store the value of this setting. ('Allow_Cookies_For_Site')
 *    denyMsg(string): Text on button used to deny cookies. (Deny)
 *    shouldAsk(boolean): Should user be prompted about cookies? (true)
 *    shouldEnable(boolean): Display a message about enabling cookies if they are disabled. (true)
 *    shouldEnableMsg(string): A message about enabling cookies if they are disabled, which will be displayed if shouldEnable is true. (You should enable cookies to be able to login.)
 *    shouldEnableSelector(string): shouldEnable message selector. ('.login')
 *
 * Documentation:
 *    # TODO: example is not working
 *
 *    {{ example-1 }}
 *
 * Example: example-1
 *    <div class="pat-cookiedirective">
 *      <div class="login">
 *      </div>
 *    </div>
 *
 * License:
 *    Copyright (C) 2010 Plone Foundation
 *
 *    This program is free software; you can redistribute it and/or modify it
 *    under the terms of the GNU General Public License as published by the
 *    Free Software Foundation; either version 2 of the License.
 *
 *    This program is distributed in the hope that it will be useful, but
 *    WITHOUT ANY WARRANTY; without even the implied warranty of
 *    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General
 *    Public License for more details.
 *
 *    You should have received a copy of the GNU General Public License along
 *    with this program; if not, write to the Free Software Foundation, Inc.,
 *    51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA.
 */

/*! 
 * jquery.event.drag - v 2.2
 * Copyright (c) 2010 Three Dub Media - http://threedubmedia.com
 * Open Source MIT License - http://threedubmedia.com/code/license
 */

/*! 
 * jquery.event.drop - v 2.2
 * Copyright (c) 2010 Three Dub Media - http://threedubmedia.com
 * Open Source MIT License - http://threedubmedia.com/code/license
 */

/* Sortable pattern.
 *
 * Options:
 *    selector(string): Selector to use to draggable items in pattern ('li')
 *    dragClass(string): Class to apply to original item that is being dragged. ('item-dragging')
 *    cloneClass(string): Class to apply to cloned item that is dragged. ('dragging')
 *    drop(function): callback function for when item is dropped (null)
 *
 * Documentation:
 *    # Default
 *
 *    {{ example-1 }}
 *
 *    # Table
 *
 *    {{ example-2 }}
 *
 * Example: example-1
 *    <ul class="pat-sortable">
 *      <li>One</li>
 *      <li>Two</li>
 *      <li>Three</li>
 *    </ul>
 *
 * Example: example-2
 *    <table class="table table-stripped pat-sortable"
 *           data-pat-sortable="selector:tr;">
 *      <tbody>
 *        <tr>
 *          <td>One One</td>
 *          <td>One Two</td>
 *        </tr>
 *        <tr>
 *          <td>Two One</td>
 *          <td>Two Two</td>
 *        </tr>
 *        <tr>
 *          <td>Three One</td>
 *          <td>Three Two</td>
 *        </tr>
 *      </tbody>
 *    </table>
 *
 * License:
 *    Copyright (C) 2010 Plone Foundation
 *
 *    This program is free software; you can redistribute it and/or modify it
 *    under the terms of the GNU General Public License as published by the
 *    Free Software Foundation; either version 2 of the License.
 *
 *    This program is distributed in the hope that it will be useful, but
 *    WITHOUT ANY WARRANTY; without even the implied warranty of
 *    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General
 *    Public License for more details.
 *
 *    You should have received a copy of the GNU General Public License along
 *    with this program; if not, write to the Free Software Foundation, Inc.,
 *    51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA.
 */

/*
#
# More info at [www.dropzonejs.com](http://www.dropzonejs.com)
# 
# Copyright (c) 2012, Matias Meno  
# 
# Permission is hereby granted, free of charge, to any person obtaining a copy
# of this software and associated documentation files (the "Software"), to deal
# in the Software without restriction, including without limitation the rights
# to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
# copies of the Software, and to permit persons to whom the Software is
# furnished to do so, subject to the following conditions:
# 
# The above copyright notice and this permission notice shall be included in
# all copies or substantial portions of the Software.
# 
# THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
# IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
# FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
# AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
# LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
# OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
# THE SOFTWARE.
#
*/

/* Dropzone pattern.
 *
 * Options:
 *    url(string): If not used with a form, this option must provide the URL to submit to (null)
 *    clickable(boolean): If you can click on container to also upload (false)
 *    className(string): value for class attribute in the form element ('dropzone')
 *    paramName(string): value for name attribute in the file input element ('file')
 *    uploadMultiple(boolean): condition value for multiple attribute in the file input element. If the value is 'true' and paramName is file, 'multiple=multiple' and 'name=file[]' will be added in the file input. (false)
 *    wrap(boolean): true or false for wrapping this element using the value of wrapperTemplate. If the value is 'inner', this element will wrap the wrapperTemplate value. (false)
 *    wrapperTemplate(string): HTML template for wrapping around with this element. ('<div class='dropzone-container"/>')
 *    resultTemplate(string): HTML template for the element that will contain file information. ('<div class="dz-notice"><p>Drop files here...</p></div><div class="dropzone-previews"/>')
 *    autoCleanResults(boolean): condition value for the file preview in div element to fadeout after file upload is completed. (false)
 *    previewsContainer(selector): JavaScript selector for file preview in div element. (.dropzone-previews)
 *
 * Documentation:
 *    # On a form element
 *
 *    {{ example-1 }}
 *
 *    # On a div element
 *
 *    {{ example-2 }}
 *
 *    # With custom style
 *
 *    {{ example-3 }}
 *
 * Example: example-1
 *    <form method="post" action="/upload" enctype="multipart/form-data"
 *          class="pat-dropzone" data-pat-dropzone="clickable:true">
 *    </form>
 *
 * Example: example-2
 *    <div class="pat-dropzone" data-pat-dropzone="url: /upload">
 *      <div>
 *        <p>Something here that is useful</p>
 *        <p>Something else here that is useful</p>
 *        <p>Another thing here that is useful</p>
 *      </div>
 *    </div>
 *
 * Example: example-3
 *    <style>
 *      .mydropzone{
 *        width: 400px;
 *        height: 100px;
 *        background-color: gray;
 *      }
 *      .mydropzone.dz-drag-hover{
 *        background-color: red;
 *      }
 *    </style>
 *    <div class="pat-dropzone"
 *         data-pat-dropzone="url: /upload; className: mydropzone">
 *      Drop here...
 *    </div>
 *
 * License:
 *    Copyright (C) 2010 Plone Foundation
 *
 *    This program is free software; you can redistribute it and/or modify it
 *    under the terms of the GNU General Public License as published by the
 *    Free Software Foundation; either version 2 of the License.
 *
 *    This program is distributed in the hope that it will be useful, but
 *    WITHOUT ANY WARRANTY; without even the implied warranty of
 *    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General
 *    Public License for more details.
 *
 *    You should have received a copy of the GNU General Public License along
 *    with this program; if not, write to the Free Software Foundation, Inc.,
 *    51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA.
 */

/* Expose pattern.
 *
 * Options:
 *    backdrop(string): Selector of parent element to use as backdrop. ('body')
 *    backdropCloseOnClick(boolean): Cancel expose on click if true. (true)
 *    backdropCloseOnEsc(boolean): Cancel expose on escape if true. (true)
 *    backdropClassName(string): TODO ('backdrop')
 *    backdropClassActiveName(string): TODO ('backdrop-active')
 *    backdropOpacity(float): Backdrop opacity value between 0 and 1. (0.8)
 *    backdropZIndex(integer): Z-index of backdrop overlay. (null)
 *    classActiveName(string): TODO ('active')
 *    triggers(string): Events that cause the expose feature to be triggered. ('focusin')
 *
 * Documentation:
 *    # Expose on focus event (default)
 *
 *    {{ example-1 }}
 *
 *    # Expose on hover
 *
 *    {{ example-2 }}
 *
 * Example: example-1
 *    <form id="mockup-expose" class="form-horizontal pat-expose">
 *      <div class="control-group">
 *        <label class="control-label" for="inputEmail">Email</label>
 *        <div class="controls">
 *          <input type="text" id="inputEmail" placeholder="Email">
 *        </div>
 *      </div>
 *      <div class="control-group">
 *        <label class="control-label" for="inputPassword">Password</label>
 *        <div class="controls">
 *          <input type="password" id="inputPassword" placeholder="Password">
 *        </div>
 *      </div>
 *      <div class="control-group">
 *        <div class="controls">
 *          <label class="checkbox">
 *            <input type="checkbox"> Remember me
 *          </label>
 *          <button type="submit" class="btn">Sign in</button>
 *        </div>
 *      </div>
 *    </form>
 *
 * Example: example-2
 *    <button type="submit" class="btn btn-large pat-expose"
 *            data-pat-expose="triggers:hover">Hover over this button</button>
 *
 * License:
 *    Copyright (C) 2010 Plone Foundation
 *
 *    This program is free software; you can redistribute it and/or modify it
 *    under the terms of the GNU General Public License as published by the
 *    Free Software Foundation; either version 2 of the License.
 *
 *    This program is distributed in the hope that it will be useful, but
 *    WITHOUT ANY WARRANTY; without even the implied warranty of
 *    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General
 *    Public License for more details.
 *
 *    You should have received a copy of the GNU General Public License along
 *    with this program; if not, write to the Free Software Foundation, Inc.,
 *    51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA.
 */

// Author: Ryan Foster
// Contact: ryan@rynamic.com
// Version: 1.0
//
// Description:
//
// License:
//
// Copyright (C) 2010 Plone Foundation
//
// This program is free software; you can redistribute it and/or modify it
// under the terms of the GNU General Public License as published by the Free
// Software Foundation; either version 2 of the License.
//
// This program is distributed in the hope that it will be useful, but WITHOUT
// ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
// FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for
// more details.
//
// You should have received a copy of the GNU General Public License along with
// this program; if not, write to the Free Software Foundation, Inc., 51
// Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA.
//

/*
Copyright 2013 Marco Braak

Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

    http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.
 */

/*
  Copyright 2013 Marco Braak
  
  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at
  
      http://www.apache.org/licenses/LICENSE-2.0
  
  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
   */

/* Tree pattern.
 *
 * Options: data(jSON): load data structure directly into tree (undefined)
 * dataUrl(jSON): Load data from remote url (undefined) autoOpen(boolean): auto
 * open tree contents (false) dragAndDrop(boolean): node drag and drop support
 * (false) selectable(boolean): if nodes can be selectable (true)
 * keyboardSupport(boolean): if keyboard naviation is allowed (true)
 *
 * Documentation: # JSON node data
 *
 *    {{ example-1 }}
 *
 *    # Remote data URL
 *
 *    {{ example-2 }}
 *
 *    # Drag and drop
 *
 *    {{ example-3 }}
 *
 * Example: example-1
 *    <div class="pat-tree"
 *         data-pat-tree='data:[
 *          { "label": "node1",
 *            "children": [
 *              { "label": "child1" },
 *              { "label": "child2" }
 *            ]
 *          },
 *          { "label": "node2",
 *            "children": [
 *              { "label": "child3" }
 *            ]
 *          }
 *        ];'> </div>
 *
 * Example: example-2
 *    <div class="pat-tree"
 *         data-pat-tree="dataUrl:/tests/json/fileTree.json;
 *                        autoOpen:true"></div>
 *
 * Example: example-3
 *    <div class="pat-tree"
 *         data-pat-tree="dataUrl:/tests/json/fileTree.json;
 *                        dragAndDrop: true;
 *                        autoOpen: true"></div>
 *
 * License: Copyright (C) 2010 Plone Foundation
 *
 *    This program is free software; you can redistribute it and/or modify it
 *    under the terms of the GNU General Public License as published by the
 *    Free Software Foundation; either version 2 of the License.
 *
 *    This program is distributed in the hope that it will be useful, but
 *    WITHOUT ANY WARRANTY; without even the implied warranty of
 *    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General
 *    Public License for more details.
 *
 *    You should have received a copy of the GNU General Public License along
 *    with this program; if not, write to the Free Software Foundation, Inc.,
 *    51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA.
 */

// Author: Nathan Van Gheem
// Contact: nathan@vangheem.us
// Version: 1.0
//
// Description:
//
// License:
//
// Copyright (C) 2010 Plone Foundation
//
// This program is free software; you can redistribute it and/or modify it
// under the terms of the GNU General Public License as published by the Free
// Software Foundation; either version 2 of the License.
//
// This program is distributed in the hope that it will be useful, but WITHOUT
// ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
// FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for
// more details.
//
// You should have received a copy of the GNU General Public License along with
// this program; if not, write to the Free Software Foundation, Inc., 51
// Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA.
//

/* Filemanager pattern.
 *
 * Options:
 *    aceConfig(object): ace configuration ({})
 *    dataTreeUrl(stirng): TODO (null)
 *    uploadUrl(string): TODO (null)
 *
 * Documentation:
 *    # TODO
 *
 * Example: example-1
 *
 * License:
 *    Copyright (C) 2010 Plone Foundation
 *
 *    This program is free software; you can redistribute it and/or modify it
 *    under the terms of the GNU General Public License as published by the
 *    Free Software Foundation; either version 2 of the License.
 *
 *    This program is distributed in the hope that it will be useful, but
 *    WITHOUT ANY WARRANTY; without even the implied warranty of
 *    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General
 *    Public License for more details.
 *
 *    You should have received a copy of the GNU General Public License along
 *    with this program; if not, write to the Free Software Foundation, Inc.,
 *    51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA.
 */

/* Formautofocus pattern.
 *
 * Options:
 *    condition(string): TODO ('div.error')
 *    target(string): TODO ("div.error :input:not(.formTabs):visible:first')
 *    always(string): TODO (:input:not(.formTabs):visible:first')
 *
 * Documentation:
 *    # TODO
 *
 * Example: example-1
 *
 * License:
 *    Copyright (C) 2010 Plone Foundation
 *
 *    This program is free software; you can redistribute it and/or modify it
 *    under the terms of the GNU General Public License as published by the
 *    Free Software Foundation; either version 2 of the License.
 *
 *    This program is distributed in the hope that it will be useful, but
 *    WITHOUT ANY WARRANTY; without even the implied warranty of
 *    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General
 *    Public License for more details.
 *
 *    You should have received a copy of the GNU General Public License along
 *    with this program; if not, write to the Free Software Foundation, Inc.,
 *    51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA.
 */

/* Formunloadalert pattern.
 *
 * Options:
 *    changingEvents(string): Events on which to check for changes (space-separated). ('change keyup paste')
 *    changingFields(string): Fields on which to check for changes (comma-separated). ('input,select,textarea,fileupload')
 *    message(string): Confirmation message to display when dirty form is being unloaded. (Discard changes? If you click OK, any changes you have made will be lost.)
 *
 * Documentation:
 *    # Example
 *
 *    {{ example-1 }}
 *
 * Example: example-1
 *    <form class="pat-formunloadalert" onsubmit="javascript:return false;">
 *      <input type="text" value="" />
 *      <select>
 *        <option value="1">value 1</option>
 *        <option value="2">value 2</option>
 *      </select>
 *      <input
 *        class="btn btn-large btn-primary"
 *        type="submit" value="Submit" />
 *      <br />
 *      <a href="/">Click here to go somewhere else</a>
 *    </form>
 *
 * License:
 *    Copyright (C) 2010 Plone Foundation
 *
 *    This program is free software; you can redistribute it and/or modify it
 *    under the terms of the GNU General Public License as published by the
 *    Free Software Foundation; either version 2 of the License.
 *
 *    This program is distributed in the hope that it will be useful, but
 *    WITHOUT ANY WARRANTY; without even the implied warranty of
 *    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General
 *    Public License for more details.
 *
 *    You should have received a copy of the GNU General Public License along
 *    with this program; if not, write to the Free Software Foundation, Inc.,
 *    51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA.
 */

/* Toggle pattern.
 *
 * Options:
 *    target(string): selector of the target elements to toggle ('undefied')
 *    targetScope(string): selector of a target scope element in anchestors ('global')
 *    attribute(string): element attribute which will be toggeled ('class')
 *    event(string): event which will trigger toggling ('click')
 *
 * Documentation:
 *    # Toggle itself
 *
 *    {{ example-1 }}
 *
 *    # Toggle all targets (global scope)
 *
 *    {{ example-2 }}
 *
 *    # Toggle specific target inside a target scope
 *
 *    {{ example-3 }}
 *
 *    # Toggle more than one target inside a specific target scope
 *
 *    {{ example-4 }}
 *
 *    # Toggle an element by hover event
 *
 *    {{ example-5 }}
 *
 *    # Toggle another element than class, like 'rel'
 *
 *    {{ example-6 }}
 *
 *    # Build a collapsable with toggle
 *
 *    {{ example-7 }}
 *
 * Example: example-1
 *    <button type="button"
 *            class="btn btn-default pat-toggle"
 *            data-pat-toggle="value:btn-lg;">This button goes bigger/smaller!</button>
 *
 * Example: example-2
 *    <div class="wrapper">
 *      <button type="button"
 *              class="btn btn-default pat-toggle"
 *              data-pat-toggle="value:label-success;target:.targetElement">This button is toggling the background of a element.</button><br />
 *      <p class="targetElement label label-default">Hello World</p>
 *    </div>
 *
 * Example: example-3
 *    <div class="wrapper">
 *      <div class="myScope">
 *        <button type="button"
 *                class="btn btn-default pat-toggle"
 *                data-pat-toggle="value:label-success;target:.targetElement;targetScope:.myScope;">toggle</button><br />
 *        <p class="targetElement label label-default">Hello World</p>
 *      </div>
 *      <div class="myScope">
 *        <button type="button"
 *                class="btn btn-default pat-toggle"
 *                data-pat-toggle="value:label-success;target:.targetElement;targetScope:.myScope;">toggle</button><br />
 *        <p class="targetElement label label-default">Hello World</p>
 *      </div>
 *    </div>
 *
 * Example: example-4
 *    <div class="wrapper">
 *      <div class="myScope">
 *        <button type="button"
 *                class="btn btn-default pat-toggle"
 *                data-pat-toggle="value:label-success;target:.targetElement;targetScope:.myScope;">toggle</button><br />
 *        <p class="targetElement label label-default">Hello World</p>
 *        <p class="targetElement label label-default">Hello again</p>
 *      </div>
 *      <div class="myScope">
 *        <button type="button"
 *                class="btn btn-default pat-toggle"
 *                data-pat-toggle="value:label-success;target:.targetElement;targetScope:.myScope;">toggle</button><br />
 *        <p class="targetElement label label-default">Hello World</p>
 *      </div>
 *    </div>
 *
 * Example: example-5
 *    <div class="wrapper">
 *      <div class="myScope">
 *        <button type="button"
 *                class="btn btn-default pat-toggle"
 *                data-pat-toggle="event:hover;value:label-success;target:.targetElement;targetScope:.myScope;">toggle</button><br />
 *        <p class="targetElement label label-default">Hello World</p>
 *      </div>
 *    </div>
 *
 * Example: example-6
 *    <div class="wrapper">
 *      <div class="myScope">
 *        <button type="button"
 *                class="btn btn-default pat-toggle"
 *                data-pat-toggle="attribute:rel; value:myRel; target:.targetElement; targetScope:.myScope">toggle</button><br />
 *        <p class="targetElement label label-default">Hello World</p>
 *      </div>
 *    </div>
 *
 * Example: example-7
 *    <div class="panel panel-default">
 *      <div class="panel-heading">
 *        <a class="btn btn-default pat-toggle"
 *           data-pat-toggle="value:in; target:.collapse; targetScope:.panel">toggle</a>
 *      </div>
 *      <div>
 *        <ul class="collapse in">
 *          <li>We use toggle for</li>
 *          <li>toggling collapsable CSS classes</li>
 *          <li>this is awesome</li>
 *        </ul>
 *      </div>
 *    </div>
 *
 *
 * License:
 *    Copyright (C) 2010 Plone Foundation
 *
 *    This program is free software; you can redistribute it and/or modify it
 *    under the terms of the GNU General Public License as published by the
 *    Free Software Foundation; either version 2 of the License.
 *
 *    This program is distributed in the hope that it will be useful, but
 *    WITHOUT ANY WARRANTY; without even the implied warranty of
 *    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General
 *    Public License for more details.
 *
 *    You should have received a copy of the GNU General Public License along
 *    with this program; if not, write to the Free Software Foundation, Inc.,
 *    51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA.
 */

/*
Copyright 2012 Igor Vaynberg

Version: 3.4.5 Timestamp: Mon Nov  4 08:22:42 PST 2013

This software is licensed under the Apache License, Version 2.0 (the "Apache License") or the GNU
General Public License version 2 (the "GPL License"). You may choose either license to govern your
use of this software only upon the condition that you accept all of the terms of either the Apache
License or the GPL License.

You may obtain a copy of the Apache License and the GPL License at:

    http://www.apache.org/licenses/LICENSE-2.0
    http://www.gnu.org/licenses/gpl-2.0.html

Unless required by applicable law or agreed to in writing, software distributed under the
Apache License or the GPL Licesnse is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR
CONDITIONS OF ANY KIND, either express or implied. See the Apache License and the GPL License for
the specific language governing permissions and limitations under the Apache License and the GPL License.
*/

/* Select2 pattern.
 *
 * Options:
 *    separator(string): Analagous to the separator constructor parameter from Select2. Defines a custom separator used to distinguish the tag values. Ex: a value of ";" will allow tags and initialValues to have values separated by ";" instead of the default ",". (',')
 *    initialValues(string): This can be a json encoded string, or a list of id:text values. Ex: Red:The Color Red,Orange:The Color Orange  This is used inside the initSelection method, if AJAX options are NOT set. (null)
 *    vocabularyUrl(string): This is a URL to a JSON-formatted file used to populate the list (null)
 *    OTHER OPTIONS(): For more options on select2 go to http://ivaynberg.github.io/select2/#documentation ()
 *
 * Documentation:
 *    # Autocomplete with search (single select)
 *
 *    {{ example-1 }}
 *
 *    # Tagging
 *
 *    {{ example-2 }}
 *
 *    # Orderable tags
 *
 *    {{ example-3 }}
 *
 *    # AJAX tags
 *
 *    {{ example-4 }}
 *
 * Example: example-1
 *    <select class="pat-select2" data-pat-select2="width:20em">
 *      <option value="Acholi">Acholi</option>
 *      <option value="Afrikaans">Afrikaans</option>
 *      <option value="Akan">Akan</option>
 *      <option value="Albanian">Albanian</option>
 *      <option value="Amharic">Amharic</option>
 *      <option value="Arabic">Arabic</option>
 *      <option value="Ashante">Ashante</option>
 *      <option value="Asl">Asl</option>
 *      <option value="Assyrian">Assyrian</option>
 *      <option value="Azerbaijani">Azerbaijani</option>
 *      <option value="Azeri">Azeri</option>
 *    </select>
 *
 * Example: example-2
 *    <input type="text" class="pat-select2"
 *           data-pat-select2="separator:,;
 *                             tags:Red,Yellow,Green,Orange,Purple;
 *                             width:20em;
 *                             initialValues:Red:The Color Red,Orange:The Color Orange"
 *           value="Red,Orange"/>
 *
 * Example: example-3
 *    <input type="text" class="pat-select2"
 *           data-pat-select2="orderable:true;
 *                             tags:Red,Yellow,Green;
 *                             width:20em" />
 * Example: example-4
 *    <input type="hidden" class="pat-select2"
 *           data-pat-select2="placeholder:Search for a Value;
 *                             vocabularyUrl:select2-test.json;
 *                             width:20em" />
 *
 * License:
 *    Copyright (C) 2010 Plone Foundation
 *
 *    This program is free software; you can redistribute it and/or modify it
 *    under the terms of the GNU General Public License as published by the
 *    Free Software Foundation; either version 2 of the License.
 *
 *    This program is distributed in the hope that it will be useful, but
 *    WITHOUT ANY WARRANTY; without even the implied warranty of
 *    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General
 *    Public License for more details.
 *
 *    You should have received a copy of the GNU General Public License along
 *    with this program; if not, write to the Free Software Foundation, Inc.,
 *    51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA.
 */

/* Livesearch pattern.
 *
 * Options:
 *    url(string): The server-side url that will be queried. (null)
 *    delay(integer): Delay in ms after user types before searching. (200)
 *    highlight(string): CSS class that will be used to highlight items on keyboard navigation. ('pattern-livesearch-highlight')
 *    minimumInputLength(integer): Number of characters user must type before search begins. (3)
 *    input(string): Selector for element that will be used for the livesearch input. ('.pattern-livesearch-input')
 *    toggleTarget(string): Selector for element that will be shown when results are found. ('.pattern-livesearch-container')
 *    toggleClass(string): CSS class that will be added to target toggle element when results are found. ('show')
 *    positionToggleWithInput(boolean): Whether or not the toggle element should be positioned relative to the input element. If set to false setPosition() will not be called. (true)
 *    setPosition(function): Function which will be used to set the position of the toggle element. (look at source)
 *    resultsTarget(string): Selector for element where results from the server will be inserted. ('.pattern-livesearch-results')
 *    resultsContainerTemplate(string): Template for the element that will contain results. If resultContainerTemplateSelector is set, this will not be used. ('<ul></ul>')
 *    resultsContainerTemplateSelector(string): Selector for an element in the DOM to use in place of resultContainerTemplate. (null)
 *    resultsAppendTo(string): Selector for element within results to append to ('ul')
 *    resultSelector(string): Will be used to select result items from within the result container. ('.pattern-livesearch-result')
 *    resultTemplate(string): Will be used to select result items from within the result container. ('<li class="pat-livesearch-result pat-livesearch-type-<%= Type %>"><a class="pat-livesearch-result-title" href="<%= getURL %>"><%= Title %></a><p class="pat-livesearch-result-desc"><%= Description %></p></li>')
 *    resultTemplateSelector(string): Selector for element to be used in place of resultTemplate. (null)
 *    helpTemplate(string): Template for the element that will contain help messages, such as 'No results found.' or 'Type 3 more characters to search.' ('<div class="pattern-livesearch-help"><%= help %></div>')
 *    helpTemplateSelector(string): Element in the DOM to be used instead of helpTemplate. (null)
 *    typeMoreTemplate(string): Template for message which is displayed if the current input length is less than minimumInputLength. ('Type <%= more %> more character<%= more === 1 ? "" : "s" %> to search.')
 *    typeMoreTemplateSelector(string): Element in the DOM to be used instead of typeMoreTemplate. (null)
 *    noResultsTemplate(string): Template for message that is displayed after a search when no results were found. ('No results found.')
 *    noResultsTemplateSelector(string): Element in the DOM to be used instead of noResultsTemplate. (null)
 *    searchingTemplate(string): Template for message which will be displayed after a search has started and before it has ended. ('Searching...')
 *    searchingTemplateSelector(string): Element in the DOM to be used instead of searchingTemplate. (null)
 *
 * Documentation:
 *    # Example
 *
 *    {{ example-1 }}
 *
 * Example: example-1
 *    <div class="pat-livesearch"
 *         data-pat-livesearch="url: /search.json;">
 *      <input type="text" class="pat-livesearch-input" placeholder="Search" />
 *      <div class="pat-livesearch-container">
 *        <div class="pat-livesearch-results"></div>
 *      </div>
 *    </div>
 *
 * License:
 *    Copyright (C) 2010 Plone Foundation
 *
 *    This program is free software; you can redistribute it and/or modify it
 *    under the terms of the GNU General Public License as published by the
 *    Free Software Foundation; either version 2 of the License.
 *
 *    This program is distributed in the hope that it will be useful, but
 *    WITHOUT ANY WARRANTY; without even the implied warranty of
 *    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General
 *    Public License for more details.
 *
 *    You should have received a copy of the GNU General Public License along
 *    with this program; if not, write to the Free Software Foundation, Inc.,
 *    51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA.
 */

// pattern router.
//
// Author: Ryan Foster
// Contact: ryan@rynamic.com
// Version: 1.0
// Depends: jquery.js
//
// Description:
//
// License:
//
// Copyright (C) 2010 Plone Foundation
//
// This program is free software; you can redistribute it and/or modify it
// under the terms of the GNU General Public License as published by the Free
// Software Foundation; either version 2 of the License.
//
// This program is distributed in the hope that it will be useful, but WITHOUT
// ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
// FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for
// more details.
//
// You should have received a copy of the GNU General Public License along with
// this program; if not, write to the Free Software Foundation, Inc., 51
// Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA.
//

/*!
 * jQuery Form Plugin
 * version: 3.46.0-2013.11.21
 * Requires jQuery v1.5 or later
 * Copyright (c) 2013 M. Alsup
 * Examples and documentation at: http://malsup.com/jquery/form/
 * Project repository: https://github.com/malsup/form
 * Dual licensed under the MIT and GPL licenses.
 * https://github.com/malsup/form#copyright-and-license
 */

/* Modal pattern.
 *
 * Options:
 *    height(string): Set the height of the modal, for example: 250px ('')
 *    width(string): Set the width of the modal, for example: 80% or 500px. ('')
 *    margin(function or integer): A function, Integer or String which will be used to set the margin of the modal in pixels. If a function is passed it must return an Integer. (20)
 *    position(string): Position the modal relative to the window with the format: "<horizontal> <vertical>" -- allowed values: top, bottom, left, right, center, middle. ('center middle')
 *    triggers(array): Add event listeners to elements on the page which will open the modal when triggered. Pass an Array of strings with the format ["&lt;event&gt; &lt;selector&gt;"] or ["&lt;event&gt;"]. For example, ["click .someButton"]. If you pass in only an event such as, ["change"], the event listener will be added to the element on which the modal was initiated, usually a link or button. ([])
 *    title(string): A string to place in the modal header. If title is provided, titleSelector is not used. (null)
 *    titleSelector(string): Selector for an element to extract from the content provided to the modal and place in the modal header. ('h1:first')
 *    content(string): Selector for an element within the content provided to the modal to use as the modal body. ('#content')
 *    prependContent(string): Selector for elements within the content provided to the modal which will be collected and inserted, by default above, the modal content. This is useful for extracting things like alerts or status messages on forms and displaying them to the user after an AJAX response. ('.portalMessage')
 *    backdrop(string): Selector for the element upon which the Backdrop pattern should be initiated. The Backdrop is a full width mask that will be apply above the content behind the modal which is useful for highlighting the modal dialog to the user. ('body')
 *    backdropOptions(object): Look at options at backdrop pattern. ({ zIndex: "1040", opacity: "0.8", className: "backdrop", classActiveName: "backdrop-active", closeOnEsc: true, closeOnClick: true })
 *    buttons(string): Selector for matching elements, usually buttons, inputs or links, from the modal content to place in the modal footer. The original elements in the content will be hidden. ('.formControls > input[type="submit"]')
 *    automaticallyAddButtonActions(boolean): Automatically create actions for elements matched with the buttons selector. They will use the options provided in actionOptions. (true)
 *    loadLinksWithinModal(boolean): Automatically load links inside of the modal using AJAX. (true)
 *    actions(object): A hash of selector to options. Where options can include any of the defaults from actionOptions. Allows for the binding of events to elements in the content and provides options for handling ajax requests and displaying them in the modal. ({})
 *
 *
 * Documentation:
 *    # Example
 *
 *    {{ example-basic }}
 *
 *    {{ example-long }}
 *
 *    {{ example-tinymce }}
 *
 *
 * Example: example-basic
 *    <a href="#modal1" class="btn btn-large btn-primary pat-modal"
 *                      data-pat-modal="width: 400">Modal basic</a>
 *    <div id="modal1" style="display: none">
 *      <h1>Basic modal!</h1>
 *      <p>Indeed. Whoa whoa whoa whoa. Wait.</p>
 *    </div>
 *
 * Example: example-long
 *    <a href="#modal2" class="btn btn-large btn-primary pat-modal"
 *                      data-pat-modal="width: 500">Modal long scrolling</a>
 *    <div id="modal2" style="display: none">
 *      <h1>Basic with scrolling</h1>
 *      <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua</p>
 *      <br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br />
 *      <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua</p>
 *      <br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br />
 *      <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua</p>
 *      <br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br />
 *      <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua</p>
 *      <br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br />
 *      <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua</p>
 *      <br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br />
 *      <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua</p>
 *    </div>
 *
 *
 * Example: example-tinymce
 *    <a href="#modaltinymce" class="btn btn-large btn-primary pat-modal"
 *       data-pat-modal="height: 600px;
 *                       width: 80%">
 *       Modal with TinyMCE</a>
 *    <div id="modaltinymce" style="display:none">
 *      <textarea class="pat-tinymce"></textarea>
 *    </div>
 *
 *
 * License:
 *    Copyright (C) 2010 Plone Foundation
 *
 *    This program is free software; you can redistribute it and/or modify it
 *    under the terms of the GNU General Public License as published by the
 *    Free Software Foundation; either version 2 of the License.
 *
 *    This program is distributed in the hope that it will be useful, but
 *    WITHOUT ANY WARRANTY; without even the implied warranty of
 *    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General
 *    Public License for more details.
 *
 *    You should have received a copy of the GNU General Public License along
 *    with this program; if not, write to the Free Software Foundation, Inc.,
 *    51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA.
 */

//! moment.js
//! version : 2.5.1
//! authors : Tim Wood, Iskren Chernev, Moment.js contributors
//! license : MIT
//! momentjs.com

/* Moment pattern.
 *
 * Options:
 *    selector(string): selector to use to look for dates to format (null)
 *    format(string): Format to use to render date. Also available is "relative" and "calendar" formats. (MMMM Do YYYY, h:mm:ss a)
 *
 * Documentation:
 *    # Defaults
 *
 *    {{ example-1 }}
 *
 *    # Relative format
 *
 *    {{ example-2 }}
 *
 *    # Calendar format
 *
 *    {{ example-3 }}
 *
 *    # Custom format
 *
 *    {{ example-4 }}
 *
 *    # Setting date by attribute
 *
 *    {{ example-5 }}
 *
 * Example: example-1
 *    <ul class="pat-moment" data-pat-moment="selector:li">
 *      <li>2013-10-01T10:00:00-05:00</li>
 *      <li>2013-01-01T22:10:00-05:00</li>
 *      <li>2013-01-05T04:34:00-05:00</li>
 *      <li>2013-02-14T16:55:00-05:00</li>
 *    </ul>
 *
 * Example: example-2
 *    <ul class="pat-moment"
 *        data-pat-moment="selector:li;format:relative;">
 *      <li>2013-10-01T10:00:00-05:00</li>
 *      <li>2013-01-01T22:10:00-05:00</li>
 *      <li>2013-01-05T04:34:00-05:00</li>
 *      <li>2013-02-14T16:55:00-05:00</li>
 *    </ul>
 *
 * Example: example-3
 *    <ul class="pat-moment"
 *        data-pat-moment="selector:li;format:calendar;">
 *      <li>2013-10-01T10:00:00-05:00</li>
 *      <li>2013-10-02T22:10:00-05:00</li>
 *      <li>2013-10-05T04:34:00-05:00</li>
 *      <li>2013-10-03T16:55:00-05:00</li>
 *    </ul>
 *
 * Example: example-4
 *    <ul class="pat-moment"
 *        data-pat-moment="selector:li;format:MMM Do, YYYY h:m a;">
 *      <li>2013-10-01T10:00:00-05:00</li>
 *      <li>2013-01-01T22:10:00-05:00</li>
 *      <li>2013-01-05T04:34:00-05:00</li>
 *      <li>2013-02-14T16:55:00-05:00</li>
 *    </ul>
 *
 * Example: example-5
 *    <ul class="pat-moment"
 *        data-pat-moment="selector:li;format:MMM Do, YYYY h:m a;">
 *      <li data-date="2013-10-01T10:00:00-05:00"></li>
 *      <li data-date="2013-01-01T22:10:00-05:00"></li>
 *      <li data-date="2013-01-05T04:34:00-05:00"></li>
 *      <li data-date="2013-02-14T16:55:00-05:00"></li>
 *    </ul>
 *
 * License:
 *    Copyright (C) 2010 Plone Foundation
 *
 *    This program is free software; you can redistribute it and/or modify it
 *    under the terms of the GNU General Public License as published by the
 *    Free Software Foundation; either version 2 of the License.
 *
 *    This program is distributed in the hope that it will be useful, but
 *    WITHOUT ANY WARRANTY; without even the implied warranty of
 *    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General
 *    Public License for more details.
 *
 *    You should have received a copy of the GNU General Public License along
 *    with this program; if not, write to the Free Software Foundation, Inc.,
 *    51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA.
 */

/*!
 * pickadate.js v3.4.0, 2014/02/15
 * By Amsul, http://amsul.ca
 * Hosted on http://amsul.github.io/pickadate.js
 * Licensed under MIT
 */

/*!
 * Date picker for pickadate.js v3.4.0
 * http://amsul.github.io/pickadate.js/date.htm
 */

/*!
 * Time picker for pickadate.js v3.4.0
 * http://amsul.github.io/pickadate.js/time.htm
 */

/* PickADate pattern.
 *
 * Options:
 *    date(object): Date widget options described here. If false is selected date picker wont be shown. ({{selectYears: true, selectMonths: true })
 *    time(object): Time widget options described here. If false is selected time picker wont be shown. ({})
 *    separator(string): Separator between date and time if both are enabled.
 *    (' ')
 *    classClearName(string): Class name of element that is generated by pattern. ('pattern-pickadate-clear')
 *    classDateName(string): Class applied to date input. ('pattern-pickadate-date')
 *    classDateWrapperName(string): Class applied to extra wrapper div around date input. ('pattern-pickadate-date-wrapper')
 *    classSeparatorName(string): Class applied to separator. ('pattern-pickadate-separator')
 *    classTimeName(string): Class applied to time input. ('pattern-pickadate-time')
 *    classTimeWrapperName(string): Class applied to wrapper div around time input. ('pattern-pickadate-time-wrapper')
 *    classWrapperName(string): Class name of element that is generated by pattern. ('pattern-pickadate-wrapper')
 *
 * Documentation:
 *    # Date and Time
 *
 *    {{ example-1 }}
 *
 *    # Date and Time with initial data
 *
 *    {{ example-2 }}
 *
 *    # Date
 *
 *    {{ example-3 }}
 *
 *    # Date with initial date
 *
 *    {{ example-4 }}
 *
 *    # Time
 *
 *    {{ example-5 }}
 *
 *    # Time with initial time
 *
 *    {{ example-6 }}
 *
 * Example: example-1
 *    <input class="pat-pickadate"/>
 *
 * Example: example-2
 *    <input class="pat-pickadate" value="2010-12-31 00:45" />
 *
 * Example: example-3
 *    <input class="pat-pickadate" data-pat-pickadate="time:false"/>
 *
 * Example: example-4
 *    <input class="pat-pickadate" value="2010-12-31" data-pat-pickadate="time:false"/>
 *
 * Example: example-5
 *    <input class="pat-pickadate" data-pat-pickadate="date:false"/>
 *
 * Example: example-6
 *    <input class="pat-pickadate" value="00:00" data-pat-pickadate="date:false"/>
 *
 * License:
 *    Copyright (C) 2010 Plone Foundation
 *
 *    This program is free software; you can redistribute it and/or modify it
 *    under the terms of the GNU General Public License as published by the
 *    Free Software Foundation; either version 2 of the License.
 *
 *    This program is distributed in the hope that it will be useful, but
 *    WITHOUT ANY WARRANTY; without even the implied warranty of
 *    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General
 *    Public License for more details.
 *
 *    You should have received a copy of the GNU General Public License along
 *    with this program; if not, write to the Free Software Foundation, Inc.,
 *    51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA.
 */

/* PreventDoubleSubmit pattern.
 *
 * Options:
 *    guardClassName(string): Class applied to submit button after it is clicked once. ('submitting')
 *    optOutClassName(string): Class used to opt-out a submit button from double-submit prevention. ('allowMultiSubmit')
 *    message(string): Message to be displayed when "opt-out" submit button is clicked a second time. ('You already clicked the submit button. Do you really want to submit this form again?')
 *
 * Documentation:
 *    # Example
 *
 *    {{ example-1 }}
 *
 * Example: example-1
 *    <form class="pat-preventdoublesubmit" onsubmit="javascript:return false;">
 *      <input type="text" value="submit this value please!" />
 *      <input class="btn btn-large btn-primary" type="submit" value="Single submit" />
 *      <input class="btn btn-large btn-primary allowMultiSubmit" type="submit" value="Multi submit" />
 *    </form>
 *
 * License:
 *    Copyright (C) 2010 Plone Foundation
 *
 *    This program is free software; you can redistribute it and/or modify it
 *    under the terms of the GNU General Public License as published by the
 *    Free Software Foundation; either version 2 of the License.
 *
 *    This program is distributed in the hope that it will be useful, but
 *    WITHOUT ANY WARRANTY; without even the implied warranty of
 *    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General
 *    Public License for more details.
 *
 *    You should have received a copy of the GNU General Public License along
 *    with this program; if not, write to the Free Software Foundation, Inc.,
 *    51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA.
 */

/* Querystring pattern.
 *
 * Options:
 *    criteria(object): options to pass into criteria ({})
 *    indexOptionsUrl(string): URL to grab index option data from. Must contain "sortable_indexes" and "indexes" data in JSON object. (null)
 *    previewURL(string): URL used to pass in a plone.app.querystring-formatted HTTP querystring and get an HTML list of results ('portal_factory/@@querybuilder_html_results')
 *    previewCountURL(string): URL used to pass in a plone.app.querystring-formatted HTTP querystring and get an HTML string of the total number of records found with the query ('portal_factory/@@querybuildernumberofresults')
 *    sorttxt(string): Text to use to label the sort dropdown ('Sort On')
 *    reversetxt(string): Text to use to label the sort order checkbox ('Reversed Order')
 *    previewTitle(string): Title for the preview area ('Preview')
 *    previewDescription(string): Description for the preview area ('Preview of at most 10 items')
 *    classWrapperName(string): CSS class to apply to the wrapper element ('querystring-wrapper')
 *    classSortLabelName(string): CSS class to apply to the sort on label ('querystring-sort-label')
 *    classSortReverseName(string): CSS class to apply to the sort order label and checkbox container ('querystring-sortreverse')
 *    classSortReverseLabelName(string): CSS class to apply to the sort order label ('querystring-sortreverse-label')
 *    classPreviewCountWrapperName(string): TODO ('querystring-previewcount-wrapper')
 *    classPreviewResultsWrapperName(string): CSS class to apply to the results wrapper ('querystring-previewresults-wrapper')
 *    classPreviewWrapperName(string): CSS class to apply to the preview wrapper ('querystring-preview-wrapper')
 *    classPreviewName(string): CSS class to apply to the preview pane ('querystring-preview')
 *    classPreviewTitleName(string): CSS class to apply to the preview title ('querystring-preview-title')
 *    classPreviewDescriptionName(string): CSS class to apply to the preview description ('querystring-preview-description')
 *    classSortWrapperName(string): CSS class to apply to the sort order and sort on wrapper ('querystring-sort-wrapper')
 *    showPreviews(boolean): Should previews be shown? (true)
 *
 * Documentation:
 *    # Default
 *
 *    {{ example-1 }}
 *
 *    # Without Previews
 *
 *    {{ example-2 }}
 *
 * Example: example-1
 *    <input class="pat-querystring"
 *           data-pat-querystring="indexOptionsUrl: /tests/json/queryStringCriteria.json" />
 *
 * Example: example-2
 *    <input class="pat-querystring"
 *           data-pat-querystring="indexOptionsUrl: /tests/json/queryStringCriteria.json;
 *                                 showPreviews: false;" />
 *
 * License:
 *    Copyright (C) 2010 Plone Foundation
 *
 *    This program is free software; you can redistribute it and/or modify it
 *    under the terms of the GNU General Public License as published by the
 *    Free Software Foundation; either version 2 of the License.
 *
 *    This program is distributed in the hope that it will be useful, but
 *    WITHOUT ANY WARRANTY; without even the implied warranty of
 *    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General
 *    Public License for more details.
 *
 *    You should have received a copy of the GNU General Public License along
 *    with this program; if not, write to the Free Software Foundation, Inc.,
 *    51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA.
 */

/* Related items pattern.
 *
 * Options:
 *    vocabularyUrl(string): This is a URL to a JSON-formatted file used to populate the list (null)
 *    attributes(array): This list is passed to the server during an AJAX request to specify the attributes which should be included on each item. (['UID', 'Title', 'Type', 'path'])
 *    basePath(string): If this is set the widget will start in "Browse" mode and will pass the path to the server to filter the results. ('/')
 *    breadCrumbTemplate(string): Template to use for a single item in the breadcrumbs. ('/<a href="<%= path %>"><%= text %></a>')
 *    breadCrumbTemplateSelector(string): Select an element from the DOM from which to grab the breadCrumbTemplate. (null)
 *    breadCrumbsTemplate(string): Template for element to which breadCrumbs will be appended. ('<span><span class="pattern-relateditems-path-label"><%= searchText %></span><a class="icon-home" href="/"></a><%= items %></span>')
 *    breadCrumbsTemplateSelector(string): Select an element from the DOM from which to grab the breadCrumbsTemplate. (null)
 *    cache(boolean): Whether or not results from the server should be
 *    cached. (true)
 *    closeOnSelect(boolean): Select2 option. Whether or not the drop down should be closed when an item is selected. (false)
 *    dropdownCssClass(string): Select2 option. CSS class to add to the drop down element. ('pattern-relateditems-dropdown')
 *    folderTypes(array): Types which should be considered browsable. (["Folder"])
 *    homeText(string): Text to display in the initial breadcrumb item. (home)
 *    maximumSelectionSize(integer): The maximum number of items that can be selected in a multi-select control. If this number is less than 1 selection is not limited. (-1)
 *    multiple(boolean): Do not change this option. (true)
 *    orderable(boolean): Whether or not items should be drag-and-drop sortable. (true)
 *    resultTemplate(string): Template for an item in the in the list of results. Refer to source for default. (Refer to source)
 *    resultTemplateSelector(string): Select an element from the DOM from which to grab the resultTemplate. (null)
 *    searchText(string): Text which will be inserted to the left of the
 *    path. (Search)
 *    searchAllText(string): Displays next to the path when the path is set to the root. (All)
 *    selectableTypes(array): If the value is null all types are selectable. Otherwise, provide a list of strings to match item types that are selectable. (null)
 *    selectionTemplate(string): Template for element that will be used to construct a selected item. (Refer to source)
 *    selectionTemplateSelector(string): Select an element from the DOM from which to grab the selectionTemplate. (null)
 *    separator(string): Select2 option. String which separates multiple items. (',')
 *    tokenSeparators(array): Select2 option, refer to select2 documentation.
 *    ([",", " "])
 *    width(string): Specify a width for the widget. ('300px')
 *
 * Documentation:
 *    The Related Items pattern is based on Select2 so many of the same options will work here as well.
 *
 *    # Default
 *
 *    {{ example-1 }}
 *
 *    # Existing values, some bad
 *
 *    {{ example-2 }}
 *
 *    # Selectable Types
 *
 *    {{ example-3 }}
 *
 *    # Select a single item
 *
 *    {{ example-4 }}
 *
 * Example: example-1
 *    <input type="text" class="pat-relateditems"
 *           data-pat-relateditems="width:30em;
 *                                  vocabularyUrl:/relateditems-test.json" />
 *
 * Example: example-2
 *    <input type="text" class="pat-relateditems"
 *           value="asdf1234gsad,sdfbsfdh345,asdlfkjasdlfkjasdf,kokpoius98"
 *           data-pat-relateditems="width:30em; vocabularyUrl:/relateditems-test.json" />
 *
 * Example: example-3
 *    <input type="text" class="pat-relateditems"
             data-pat-relateditems='{"selectableTypes": ["Document"], "vocabularyUrl": "/relateditems-test.json"}' />
 *
 * Example: example-4
 *    <input type="text" class="pat-relateditems"
             data-pat-relateditems='{"selectableTypes": ["Document"], "vocabularyUrl": "/relateditems-test.json", "maximumSelectionSize": 1}' />
 *
 * License:
 *    Copyright (C) 2010 Plone Foundation
 *
 *    This program is free software; you can redistribute it and/or modify it
 *    under the terms of the GNU General Public License as published by the
 *    Free Software Foundation; either version 2 of the License.
 *
 *    This program is distributed in the hope that it will be useful, but
 *    WITHOUT ANY WARRANTY; without even the implied warranty of
 *    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General
 *    Public License for more details.
 *
 *    You should have received a copy of the GNU General Public License along
 *    with this program; if not, write to the Free Software Foundation, Inc.,
 *    51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA.
 */

/* ========================================================================
 * Bootstrap: tooltip.js v3.1.1
 * http://getbootstrap.com/javascript/#tooltip
 * Inspired by the original jQuery.tipsy by Jason Frame
 * ========================================================================
 * Copyright 2011-2014 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */

/* ========================================================================
 * Bootstrap: dropdown.js v3.1.1
 * http://getbootstrap.com/javascript/#dropdowns
 * ========================================================================
 * Copyright 2011-2014 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */

// Author: Nathan Van Gheem Contact: nathan@vangheem.us Version: 1.0
//
// Description:
//
// License:
//
// Copyright (C) 2010 Plone Foundation
//
// This program is free software; you can redistribute it and/or modify it
// under the terms of the GNU General Public License as published by the Free
// Software Foundation; either version 2 of the License.
//
// This program is distributed in the hope that it will be useful, but WITHOUT
// ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
// FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for
// more details.
//
// You should have received a copy of the GNU General Public License along with
// this program; if not, write to the Free Software Foundation, Inc., 51
// Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA.
//

/* Structure pattern.
 *
 * Options:
 *    vocabularyUrl(string): Url to return query results (null)
 *    tagsVocabularyUrl(string): Url to return tags query results (null)
 *    usersVocabularyUrl(string): Url to query users (null)
 *    indexOptionsUrl(string): Url to configure querystring widget with (null)
 *    uploadUrl(string): For setting up dropzone (null)
 *    moveUrl(string): For supporting drag drop reordering (null)
 *    contextInfoUrl(string): For supporting add menu (null)
 *
 * Documentation:
 *    # Example
 *
 *    {{ example-1 }}
 *
 * Example: example-1
 *    <div class="pat-structure"
 *         data-pat-structure="vocabularyUrl:/relateditems-test.json;
 *                             uploadUrl:/upload;
 *                             moveUrl:/moveitem;
 *                             tagsVocabularyUrl:/select2-test.json;
 *                             usersVocabularyUrl:/tests/json/users.json;
 *                             indexOptionsUrl:/tests/json/queryStringCriteria.json;
 *                             contextInfoUrl:{path}/context-info;"></div>
 *
 * License:
 *    Copyright (C) 2010 Plone Foundation
 *
 *    This program is free software; you can redistribute it and/or modify it
 *    under the terms of the GNU General Public License as published by the
 *    Free Software Foundation; either version 2 of the License.
 *
 *    This program is distributed in the hope that it will be useful, but
 *    WITHOUT ANY WARRANTY; without even the implied warranty of
 *    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General
 *    Public License for more details.
 *
 *    You should have received a copy of the GNU General Public License along
 *    with this program; if not, write to the Free Software Foundation, Inc.,
 *    51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA.
 */

/* Tablesorter pattern.
 *
 * Options:
 *    someoptions(XXX): TODO: we need to expose options (XXX)
 *
 * Documentation:
 *    # Directions
 *
 *    - If the displayed data doesn't match the sequence (as in days of the
 *      week), provide a sortabledata-XXX class. The column will be sorted on
 *      XXX.
 *    - Note that a secondary sort is always done on the first two columns
 *      (by the second, and then by the first column). This provides a crude
 *      way to sort by surname and name. (Look at sequence of "Bluth" rows
 *      changing when sorting on Last Name.)
 *    - Rows get odd and even classes for CSS styling.
 *    - If something looks more like a date than like a number (specifically
 *      1999-01-01, not e.g. 01-01-1999) it will be sorted textually, not
 *      numerically. Dates aren't validated.
 *    - If something looks like a number, javascript will make some wild
 *      guesses about it. It can turn out weird (try sorting on the "No Date"
 *      column).
 *
 *    # Example
 *
 *    {{ example-1 }}
 *
 * Example: example-1
 *    <table class="pat-tablesorter">
 *      <thead>
 *        <th>First Name</th>
 *        <th>Last Name</th>
 *        <th>Occupation</th>
 *        <th>Age</th>
 *      </thead>
 *      <tr>
 *        <td>Buster</td>
 *        <td>Bluth</td>
 *        <td>Army</td>
 *        <td>35</td>
 *      </tr>
 *      <tr>
 *        <td>Michael</td>
 *        <td>Bluth</td>
 *        <td>Company President</td>
 *        <td>39</td>
 *      </tr>
 *      <tr>
 *        <td>GOB</td>
 *        <td>Bluth</td>
 *        <td>Magician</td>
 *        <td>37</td>
 *      </tr>
 *      <tr>
 *        <td>Lindsay</td>
 *        <td>Fnke</td>
 *        <td>Protester</td>
 *        <td>36</td>
 *      </tr>
 *      <tr>
 *        <td>Tony</td>
 *        <td>Wonder</td>
 *        <td>Magician</td>
 *        <td>35</td>
 *      </tr>
 *      <tr>
 *        <td>Tobias</td>
 *        <td>Fnke</td>
 *        <td>Therapist</td>
 *        <td>40</td>
 *      </tr>
 *    </table>
 *
 * License: Copyright (C) 2010 Plone Foundation
 *
 *    This program is free software; you can redistribute it and/or modify it
 *    under the terms of the GNU General Public License as published by the
 *    Free Software Foundation; either version 2 of the License.
 *
 *    This program is distributed in the hope that it will be useful, but
 *    WITHOUT ANY WARRANTY; without even the implied warranty of
 *    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU
 *    General Public License for more details.
 *
 *    You should have received a copy of the GNU General Public License along
 *    with this program; if not, write to the Free Software Foundation, Inc.,
 *    51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA.
 */

// Author: Nathan Van Gheem
// Contact: nathan@vangheem.us
// Version: 1.0
//
// Description:
//    TinyMCE pattern (for now its depening on Plone's integration)
//
// License:
//
// Copyright (C) 2010 Plone Foundation
//
// This program is free software; you can redistribute it and/or modify it
// under the terms of the GNU General Public License as published by the Free
// Software Foundation; either version 2 of the License.
//
// This program is distributed in the hope that it will be useful, but WITHOUT
// ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
// FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for
// more details.
//
// You should have received a copy of the GNU General Public License along with
// this program; if not, write to the Free Software Foundation, Inc., 51
// Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA.
//

/* TinyMCE pattern.
 *
 * Options:
 *    relatedItems(object): Related items pattern options. ({ attributes: ["UID", "Title", "Description", "getURL", "Type", "path", "ModificationDate"], batchSize: 20, basePath: "/", vocabularyUrl: null, width: 500, maximumSelectionSize: 1, placeholder: "Search for item on site..." })
 *    text(object): Translation strings ({ insertBtn: "Insert", cancelBtn: "Cancel", insertHeading: "Insert link", title: "Title", internal: "Internal", external: "External", email: "Email", anchor: "Anchor", subject: "Subject" image: "Image", imageAlign: "Align", scale: "Size", alt: "Alternative Text", externalImage: "External Image URI"})
 *    scales(string): TODO: is this even used ('Listing (16x16):listing,Icon (32x32):icon,Tile (64x64):tile,Thumb (128x128):thumb,Mini (200x200):mini,Preview (400x400):preview,Large (768x768):large')
 *    targetList(array): TODO ([ {text: "Open in this window / frame", value: ""}, {text: "Open in new window", value: "_blank"}, {text: "Open in parent window / frame", value: "_parent"}, {text: "Open in top frame (replaces all frames)", value: "_top"}])
 * imageTypes(string): TODO ('Image')
 *    folderTypes(string): TODO ('Folder,Plone Site')
 *    linkableTypes(string): TODO ('Document,Event,File,Folder,Image,News Item,Topic')
 *    tiny(object): TODO ({ plugins: [ "advlist autolink lists charmap print preview anchor ploneupload", "usearchreplace visualblocks code fullscreen autoresize", "insertdatetime media table contextmenu paste plonelink ploneimage" ], menubar: "edit table format tools view insert",
toolbar: "undo redo | styleselect | bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | unlink plonelink ploneimage | ploneupload", autoresize_max_height: 1500 })
 *    rel_upload_path(string): To provide upload support. (null)
 *    folder_url(string): Base url to provide upload url off of. (null)
 *    prependToUrl(string): Text to prepend to generated internal urls. ('')
 *    appendToUrl(string): Text to append to generated internal urls. ('')
 *    prependToScalePart(string): Text to prepend to generated image scale url part. ('/imagescale/')
 *    appendToScalePart(string): Text to append to generated image scale url part. ('')
 *    linkAttribute(string): Ajax response data attribute to use for url. ('path')
 *
 * Documentation:
 *    # Default
 *
 *    {{ example-1 }}
 *
 *    # With dropzone
 *
 *    {{ example-2 }}
 *
 * Example: example-1
 *    <form>
 *      <textarea class="pat-tinymce"
 *          data-pat-tinymce='{"relatedItems": {
 *                                "vocabularyUrl": "/relateditems-test.json"
 *                                }}'></textarea>
 *    </form>
 *
 * Example: example-2
 *    <form>
 *      <textarea class="pat-tinymce"
 *          data-pat-tinymce='{"relatedItems": {"vocabularyUrl": "/relateditems-test.json" },
 *                             "rel_upload_path": "upload",
 *                             "folder_url": "http://localhost:8000/"}'></textarea>
 *    </form>
 *
 * License:
 *    Copyright (C) 2010 Plone Foundation
 *
 *    This program is free software; you can redistribute it and/or modify it
 *    under the terms of the GNU General Public License as published by the
 *    Free Software Foundation; either version 2 of the License.
 *
 *    This program is distributed in the hope that it will be useful, but
 *    WITHOUT ANY WARRANTY; without even the implied warranty of
 *    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General
 *    Public License for more details.
 *
 *    You should have received a copy of the GNU General Public License along
 *    with this program; if not, write to the Free Software Foundation, Inc.,
 *    51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA.
 */

/* Tooltip pattern.
 *
 * Options:
 *    enterEvent(string): Event used to trigger tooltip. ('mouseenter')
 *    exitEvent(string): Event used to dismiss tooltip. ('mouseleave')
 *
 * Documentation:
 *    # Directions
 *
 *    You can use this inside Plone or on any static page. Please check below
 *    for additional directions for non-Plone sites as there are some lines
 *    of code you need to add to the header of your webpage.
 *
 *    # Adding tooltip using Plone
 *
 *    - Make sure your viewing the page you want to add the tool tip too.
 *    - Log in
 *    - Create some text that you want to be the link that will reveal the
 *      tooltip.
 *    - Select the view html button
 *    - Find your text. and wrap that text with an href tag, and add a class
 *      and the href tag.
 *    - It should look like < a class="pat-tooltip" href="#my-demo-tip"> My
 *      link text </a>
 *    - Choose Save
 *
 *    Now that we have added our link we now need to add our tooltip.
 *
 *    - Choose "edit"
 *    - Immediently following the link click to add some text and hit your
 *      "return" key
 *    - Add the text that you want to be the tip.
 *    - Choose the "edit html" button
 *    - Find the tip text and wrap that text with a div tag, an ID tag and a
 *      class.
 *    - It should look like <div id="my-demo-tip" class="tooltips"> My Tip
 *      Text here </div>
 *    - Choose Save and test your tooltip.
 *
 *    Note: it's important that the href AND the ID be named exactly the same
 *    thing. This is what links them together.
 *
 *    # Example
 *
 *    {{ example-1 }}
 *
 * Example: example-1
 *    <p href=".example-class" class="pat-tooltip">
 *      Hover over this line to see a tooltip
 *    </p>
 *    <p class="tooltips example-class">
 *      Setting the .example-class in the href makes this show up
 *    </p>
 *
 * License:
 *    Copyright (C) 2010 Plone Foundation
 *
 *    This program is free software; you can redistribute it and/or modify it
 *    under the terms of the GNU General Public License as published by the
 *    Free Software Foundation; either version 2 of the License.
 *
 *    This program is distributed in the hope that it will be useful, but
 *    WITHOUT ANY WARRANTY; without even the implied warranty of
 *    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General
 *    Public License for more details.
 *
 *    You should have received a copy of the GNU General Public License along
 *    with this program; if not, write to the Free Software Foundation, Inc.,
 *    51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA.
 */

var requirejs,require,define;(function(global){function isFunction(e){return ostring.call(e)==="[object Function]"}function isArray(e){return ostring.call(e)==="[object Array]"}function each(e,t){if(e){var n;for(n=0;n<e.length;n+=1)if(e[n]&&t(e[n],n,e))break}}function eachReverse(e,t){if(e){var n;for(n=e.length-1;n>-1;n-=1)if(e[n]&&t(e[n],n,e))break}}function hasProp(e,t){return hasOwn.call(e,t)}function getOwn(e,t){return hasProp(e,t)&&e[t]}function eachProp(e,t){var n;for(n in e)if(hasProp(e,n)&&t(e[n],n))break}function mixin(e,t,n,r){return t&&eachProp(t,function(t,i){if(n||!hasProp(e,i))r&&typeof t=="object"&&t&&!isArray(t)&&!isFunction(t)&&!(t instanceof RegExp)?(e[i]||(e[i]={}),mixin(e[i],t,n,r)):e[i]=t}),e}function bind(e,t){return function(){return t.apply(e,arguments)}}function scripts(){return document.getElementsByTagName("script")}function defaultOnError(e){throw e}function getGlobal(e){if(!e)return e;var t=global;return each(e.split("."),function(e){t=t[e]}),t}function makeError(e,t,n,r){var i=new Error(t+"\nhttp://requirejs.org/docs/errors.html#"+e);return i.requireType=e,i.requireModules=r,n&&(i.originalError=n),i}function newContext(e){function m(e){var t,n,r=e.length;for(t=0;t<r;t++){n=e[t];if(n===".")e.splice(t,1),t-=1;else if(n===".."){if(t===1&&(e[2]===".."||e[0]===".."))break;t>0&&(e.splice(t-1,2),t-=2)}}}function g(e,t,n){var r,i,s,u,a,f,l,c,h,p,d,v=t&&t.split("/"),g=v,y=o.map,b=y&&y["*"];e&&e.charAt(0)==="."&&(t?(g=v.slice(0,v.length-1),e=e.split("/"),l=e.length-1,o.nodeIdCompat&&jsSuffixRegExp.test(e[l])&&(e[l]=e[l].replace(jsSuffixRegExp,"")),e=g.concat(e),m(e),e=e.join("/")):e.indexOf("./")===0&&(e=e.substring(2)));if(n&&y&&(v||b)){s=e.split("/");e:for(u=s.length;u>0;u-=1){f=s.slice(0,u).join("/");if(v)for(a=v.length;a>0;a-=1){i=getOwn(y,v.slice(0,a).join("/"));if(i){i=getOwn(i,f);if(i){c=i,h=u;break e}}}!p&&b&&getOwn(b,f)&&(p=getOwn(b,f),d=u)}!c&&p&&(c=p,h=d),c&&(s.splice(0,h,c),e=s.join("/"))}return r=getOwn(o.pkgs,e),r?r:e}function y(e){isBrowser&&each(scripts(),function(t){if(t.getAttribute("data-requiremodule")===e&&t.getAttribute("data-requirecontext")===r.contextName)return t.parentNode.removeChild(t),!0})}function b(e){var t=getOwn(o.paths,e);if(t&&isArray(t)&&t.length>1)return t.shift(),r.require.undef(e),r.require([e]),!0}function w(e){var t,n=e?e.indexOf("!"):-1;return n>-1&&(t=e.substring(0,n),e=e.substring(n+1,e.length)),[t,e]}function E(e,t,n,i){var s,o,u,a,f=null,l=t?t.name:null,h=e,p=!0,m="";return e||(p=!1,e="_@r"+(d+=1)),a=w(e),f=a[0],e=a[1],f&&(f=g(f,l,i),o=getOwn(c,f)),e&&(f?o&&o.normalize?m=o.normalize(e,function(e){return g(e,l,i)}):m=g(e,l,i):(m=g(e,l,i),a=w(m),f=a[0],m=a[1],n=!0,s=r.nameToUrl(m))),u=f&&!o&&!n?"_unnormalized"+(v+=1):"",{prefix:f,name:m,parentMap:t,unnormalized:!!u,url:s,originalName:h,isDefine:p,id:(f?f+"!"+m:m)+u}}function S(e){var t=e.id,n=getOwn(u,t);return n||(n=u[t]=new r.Module(e)),n}function x(e,t,n){var r=e.id,i=getOwn(u,r);hasProp(c,r)&&(!i||i.defineEmitComplete)?t==="defined"&&n(c[r]):(i=S(e),i.error&&t==="error"?n(i.error):i.on(t,n))}function T(e,t){var n=e.requireModules,r=!1;t?t(e):(each(n,function(t){var n=getOwn(u,t);n&&(n.error=e,n.events.error&&(r=!0,n.emit("error",e)))}),r||req.onError(e))}function N(){globalDefQueue.length&&(apsp.apply(l,[l.length,0].concat(globalDefQueue)),globalDefQueue=[])}function C(e){delete u[e],delete a[e]}function k(e,t,n){var r=e.map.id;e.error?e.emit("error",e.error):(t[r]=!0,each(e.depMaps,function(r,i){var s=r.id,o=getOwn(u,s);o&&!e.depMatched[i]&&!n[s]&&(getOwn(t,s)?(e.defineDep(i,c[s]),e.check()):k(o,t,n))}),n[r]=!0)}function L(){var e,n,i=o.waitSeconds*1e3,u=i&&r.startTime+i<(new Date).getTime(),f=[],l=[],c=!1,h=!0;if(t)return;t=!0,eachProp(a,function(e){var t=e.map,r=t.id;if(!e.enabled)return;t.isDefine||l.push(e);if(!e.error)if(!e.inited&&u)b(r)?(n=!0,c=!0):(f.push(r),y(r));else if(!e.inited&&e.fetched&&t.isDefine){c=!0;if(!t.prefix)return h=!1}});if(u&&f.length)return e=makeError("timeout","Load timeout for modules: "+f,null,f),e.contextName=r.contextName,T(e);h&&each(l,function(e){k(e,{},{})}),(!u||n)&&c&&(isBrowser||isWebWorker)&&!s&&(s=setTimeout(function(){s=0,L()},50)),t=!1}function A(e){hasProp(c,e[0])||S(E(e[0],null,!0)).init(e[1],e[2])}function O(e,t,n,r){e.detachEvent&&!isOpera?r&&e.detachEvent(r,t):e.removeEventListener(n,t,!1)}function M(e){var t=e.currentTarget||e.srcElement;return O(t,r.onScriptLoad,"load","onreadystatechange"),O(t,r.onScriptError,"error"),{node:t,id:t&&t.getAttribute("data-requiremodule")}}function _(){var e;N();while(l.length){e=l.shift();if(e[0]===null)return T(makeError("mismatch","Mismatched anonymous define() module: "+e[e.length-1]));A(e)}}var t,n,r,i,s,o={waitSeconds:7,baseUrl:"./",paths:{},bundles:{},pkgs:{},shim:{},config:{}},u={},a={},f={},l=[],c={},h={},p={},d=1,v=1;return i={require:function(e){return e.require?e.require:e.require=r.makeRequire(e.map)},exports:function(e){e.usingExports=!0;if(e.map.isDefine)return e.exports?c[e.map.id]=e.exports:e.exports=c[e.map.id]={}},module:function(e){return e.module?e.module:e.module={id:e.map.id,uri:e.map.url,config:function(){return getOwn(o.config,e.map.id)||{}},exports:e.exports||(e.exports={})}}},n=function(e){this.events=getOwn(f,e.id)||{},this.map=e,this.shim=getOwn(o.shim,e.id),this.depExports=[],this.depMaps=[],this.depMatched=[],this.pluginMaps={},this.depCount=0},n.prototype={init:function(e,t,n,r){r=r||{};if(this.inited)return;this.factory=t,n?this.on("error",n):this.events.error&&(n=bind(this,function(e){this.emit("error",e)})),this.depMaps=e&&e.slice(0),this.errback=n,this.inited=!0,this.ignore=r.ignore,r.enabled||this.enabled?this.enable():this.check()},defineDep:function(e,t){this.depMatched[e]||(this.depMatched[e]=!0,this.depCount-=1,this.depExports[e]=t)},fetch:function(){if(this.fetched)return;this.fetched=!0,r.startTime=(new Date).getTime();var e=this.map;if(!this.shim)return e.prefix?this.callPlugin():this.load();r.makeRequire(this.map,{enableBuildCallback:!0})(this.shim.deps||[],bind(this,function(){return e.prefix?this.callPlugin():this.load()}))},load:function(){var e=this.map.url;h[e]||(h[e]=!0,r.load(this.map.id,e))},check:function(){if(!this.enabled||this.enabling)return;var e,t,n=this.map.id,i=this.depExports,s=this.exports,o=this.factory;if(!this.inited)this.fetch();else if(this.error)this.emit("error",this.error);else if(!this.defining){this.defining=!0;if(this.depCount<1&&!this.defined){if(isFunction(o)){if(this.events.error&&this.map.isDefine||req.onError!==defaultOnError)try{s=r.execCb(n,o,i,s)}catch(u){e=u}else s=r.execCb(n,o,i,s);this.map.isDefine&&s===undefined&&(t=this.module,t?s=t.exports:this.usingExports&&(s=this.exports));if(e)return e.requireMap=this.map,e.requireModules=this.map.isDefine?[this.map.id]:null,e.requireType=this.map.isDefine?"define":"require",T(this.error=e)}else s=o;this.exports=s,this.map.isDefine&&!this.ignore&&(c[n]=s,req.onResourceLoad&&req.onResourceLoad(r,this.map,this.depMaps)),C(n),this.defined=!0}this.defining=!1,this.defined&&!this.defineEmitted&&(this.defineEmitted=!0,this.emit("defined",this.exports),this.defineEmitComplete=!0)}},callPlugin:function(){var e=this.map,t=e.id,n=E(e.prefix);this.depMaps.push(n),x(n,"defined",bind(this,function(n){var i,s,a,f=getOwn(p,this.map.id),l=this.map.name,c=this.map.parentMap?this.map.parentMap.name:null,h=r.makeRequire(e.parentMap,{enableBuildCallback:!0});if(this.map.unnormalized){n.normalize&&(l=n.normalize(l,function(e){return g(e,c,!0)})||""),s=E(e.prefix+"!"+l,this.map.parentMap),x(s,"defined",bind(this,function(e){this.init([],function(){return e},null,{enabled:!0,ignore:!0})})),a=getOwn(u,s.id),a&&(this.depMaps.push(s),this.events.error&&a.on("error",bind(this,function(e){this.emit("error",e)})),a.enable());return}if(f){this.map.url=r.nameToUrl(f),this.load();return}i=bind(this,function(e){this.init([],function(){return e},null,{enabled:!0})}),i.error=bind(this,function(e){this.inited=!0,this.error=e,e.requireModules=[t],eachProp(u,function(e){e.map.id.indexOf(t+"_unnormalized")===0&&C(e.map.id)}),T(e)}),i.fromText=bind(this,function(n,s){var u=e.name,a=E(u),f=useInteractive;s&&(n=s),f&&(useInteractive=!1),S(a),hasProp(o.config,t)&&(o.config[u]=o.config[t]);try{req.exec(n)}catch(l){return T(makeError("fromtexteval","fromText eval for "+t+" failed: "+l,l,[t]))}f&&(useInteractive=!0),this.depMaps.push(a),r.completeLoad(u),h([u],i)}),n.load(e.name,h,i,o)})),r.enable(n,this),this.pluginMaps[n.id]=n},enable:function(){a[this.map.id]=this,this.enabled=!0,this.enabling=!0,each(this.depMaps,bind(this,function(e,t){var n,s,o;if(typeof e=="string"){e=E(e,this.map.isDefine?this.map:this.map.parentMap,!1,!this.skipMap),this.depMaps[t]=e,o=getOwn(i,e.id);if(o){this.depExports[t]=o(this);return}this.depCount+=1,x(e,"defined",bind(this,function(e){this.defineDep(t,e),this.check()})),this.errback&&x(e,"error",bind(this,this.errback))}n=e.id,s=u[n],!hasProp(i,n)&&s&&!s.enabled&&r.enable(e,this)})),eachProp(this.pluginMaps,bind(this,function(e){var t=getOwn(u,e.id);t&&!t.enabled&&r.enable(e,this)})),this.enabling=!1,this.check()},on:function(e,t){var n=this.events[e];n||(n=this.events[e]=[]),n.push(t)},emit:function(e,t){each(this.events[e],function(e){e(t)}),e==="error"&&delete this.events[e]}},r={config:o,contextName:e,registry:u,defined:c,urlFetched:h,defQueue:l,Module:n,makeModuleMap:E,nextTick:req.nextTick,onError:T,configure:function(e){e.baseUrl&&e.baseUrl.charAt(e.baseUrl.length-1)!=="/"&&(e.baseUrl+="/");var t=o.shim,n={paths:!0,bundles:!0,config:!0,map:!0};eachProp(e,function(e,t){n[t]?(o[t]||(o[t]={}),mixin(o[t],e,!0,!0)):o[t]=e}),e.bundles&&eachProp(e.bundles,function(e,t){each(e,function(e){e!==t&&(p[e]=t)})}),e.shim&&(eachProp(e.shim,function(e,n){isArray(e)&&(e={deps:e}),(e.exports||e.init)&&!e.exportsFn&&(e.exportsFn=r.makeShimExports(e)),t[n]=e}),o.shim=t),e.packages&&each(e.packages,function(e){var t,n;e=typeof e=="string"?{name:e}:e,n=e.name,t=e.location,t&&(o.paths[n]=e.location),o.pkgs[n]=e.name+"/"+(e.main||"main").replace(currDirRegExp,"").replace(jsSuffixRegExp,"")}),eachProp(u,function(e,t){!e.inited&&!e.map.unnormalized&&(e.map=E(t))}),(e.deps||e.callback)&&r.require(e.deps||[],e.callback)},makeShimExports:function(e){function t(){var t;return e.init&&(t=e.init.apply(global,arguments)),t||e.exports&&getGlobal(e.exports)}return t},makeRequire:function(t,n){function s(o,a,f){var l,h,p;return n.enableBuildCallback&&a&&isFunction(a)&&(a.__requireJsBuild=!0),typeof o=="string"?isFunction(a)?T(makeError("requireargs","Invalid require call"),f):t&&hasProp(i,o)?i[o](u[t.id]):req.get?req.get(r,o,t,s):(h=E(o,t,!1,!0),l=h.id,hasProp(c,l)?c[l]:T(makeError("notloaded",'Module name "'+l+'" has not been loaded yet for context: '+e+(t?"":". Use require([])")))):(_(),r.nextTick(function(){_(),p=S(E(null,t)),p.skipMap=n.skipMap,p.init(o,a,f,{enabled:!0}),L()}),s)}return n=n||{},mixin(s,{isBrowser:isBrowser,toUrl:function(e){var n,i=e.lastIndexOf("."),s=e.split("/")[0],o=s==="."||s==="..";return i!==-1&&(!o||i>1)&&(n=e.substring(i,e.length),e=e.substring(0,i)),r.nameToUrl(g(e,t&&t.id,!0),n,!0)},defined:function(e){return hasProp(c,E(e,t,!1,!0).id)},specified:function(e){return e=E(e,t,!1,!0).id,hasProp(c,e)||hasProp(u,e)}}),t||(s.undef=function(e){N();var n=E(e,t,!0),r=getOwn(u,e);y(e),delete c[e],delete h[n.url],delete f[e],eachReverse(l,function(t,n){t[0]===e&&l.splice(n,1)}),r&&(r.events.defined&&(f[e]=r.events),C(e))}),s},enable:function(e){var t=getOwn(u,e.id);t&&S(e).enable()},completeLoad:function(e){var t,n,r,i=getOwn(o.shim,e)||{},s=i.exports;N();while(l.length){n=l.shift();if(n[0]===null){n[0]=e;if(t)break;t=!0}else n[0]===e&&(t=!0);A(n)}r=getOwn(u,e);if(!t&&!hasProp(c,e)&&r&&!r.inited){if(o.enforceDefine&&(!s||!getGlobal(s))){if(b(e))return;return T(makeError("nodefine","No define call for "+e,null,[e]))}A([e,i.deps||[],i.exportsFn])}L()},nameToUrl:function(e,t,n){var i,s,u,a,f,l,c,h=getOwn(o.pkgs,e);h&&(e=h),c=getOwn(p,e);if(c)return r.nameToUrl(c,t,n);if(req.jsExtRegExp.test(e))f=e+(t||"");else{i=o.paths,s=e.split("/");for(u=s.length;u>0;u-=1){a=s.slice(0,u).join("/"),l=getOwn(i,a);if(l){isArray(l)&&(l=l[0]),s.splice(0,u,l);break}}f=s.join("/"),f+=t||(/^data\:|\?/.test(f)||n?"":".js"),f=(f.charAt(0)==="/"||f.match(/^[\w\+\.\-]+:/)?"":o.baseUrl)+f}return o.urlArgs?f+((f.indexOf("?")===-1?"?":"&")+o.urlArgs):f},load:function(e,t){req.load(r,e,t)},execCb:function(e,t,n,r){return t.apply(r,n)},onScriptLoad:function(e){if(e.type==="load"||readyRegExp.test((e.currentTarget||e.srcElement).readyState)){interactiveScript=null;var t=M(e);r.completeLoad(t.id)}},onScriptError:function(e){var t=M(e);if(!b(t.id))return T(makeError("scripterror","Script error for: "+t.id,e,[t.id]))}},r.require=r.makeRequire(),r}function getInteractiveScript(){return interactiveScript&&interactiveScript.readyState==="interactive"?interactiveScript:(eachReverse(scripts(),function(e){if(e.readyState==="interactive")return interactiveScript=e}),interactiveScript)}var req,s,head,baseElement,dataMain,src,interactiveScript,currentlyAddingScript,mainScript,subPath,version="2.1.11",commentRegExp=/(\/\*([\s\S]*?)\*\/|([^:]|^)\/\/(.*)$)/mg,cjsRequireRegExp=/[^.]\s*require\s*\(\s*["']([^'"\s]+)["']\s*\)/g,jsSuffixRegExp=/\.js$/,currDirRegExp=/^\.\//,op=Object.prototype,ostring=op.toString,hasOwn=op.hasOwnProperty,ap=Array.prototype,apsp=ap.splice,isBrowser=typeof window!="undefined"&&typeof navigator!="undefined"&&!!window.document,isWebWorker=!isBrowser&&typeof importScripts!="undefined",readyRegExp=isBrowser&&navigator.platform==="PLAYSTATION 3"?/^complete$/:/^(complete|loaded)$/,defContextName="_",isOpera=typeof opera!="undefined"&&opera.toString()==="[object Opera]",contexts={},cfg={},globalDefQueue=[],useInteractive=!1;if(typeof define!="undefined")return;if(typeof requirejs!="undefined"){if(isFunction(requirejs))return;cfg=requirejs,requirejs=undefined}typeof require!="undefined"&&!isFunction(require)&&(cfg=require,require=undefined),req=requirejs=function(e,t,n,r){var i,s,o=defContextName;return!isArray(e)&&typeof e!="string"&&(s=e,isArray(t)?(e=t,t=n,n=r):e=[]),s&&s.context&&(o=s.context),i=getOwn(contexts,o),i||(i=contexts[o]=req.s.newContext(o)),s&&i.configure(s),i.require(e,t,n)},req.config=function(e){return req(e)},req.nextTick=typeof setTimeout!="undefined"?function(e){setTimeout(e,4)}:function(e){e()},require||(require=req),req.version=version,req.jsExtRegExp=/^\/|:|\?|\.js$/,req.isBrowser=isBrowser,s=req.s={contexts:contexts,newContext:newContext},req({}),each(["toUrl","undef","defined","specified"],function(e){req[e]=function(){var t=contexts[defContextName];return t.require[e].apply(t,arguments)}}),isBrowser&&(head=s.head=document.getElementsByTagName("head")[0],baseElement=document.getElementsByTagName("base")[0],baseElement&&(head=s.head=baseElement.parentNode)),req.onError=defaultOnError,req.createNode=function(e,t,n){var r=e.xhtml?document.createElementNS("http://www.w3.org/1999/xhtml","html:script"):document.createElement("script");return r.type=e.scriptType||"text/javascript",r.charset="utf-8",r.async=!0,r},req.load=function(e,t,n){var r=e&&e.config||{},i;if(isBrowser)return i=req.createNode(r,t,n),i.setAttribute("data-requirecontext",e.contextName),i.setAttribute("data-requiremodule",t),i.attachEvent&&!(i.attachEvent.toString&&i.attachEvent.toString().indexOf("[native code")<0)&&!isOpera?(useInteractive=!0,i.attachEvent("onreadystatechange",e.onScriptLoad)):(i.addEventListener("load",e.onScriptLoad,!1),i.addEventListener("error",e.onScriptError,!1)),i.src=n,currentlyAddingScript=i,baseElement?head.insertBefore(i,baseElement):head.appendChild(i),currentlyAddingScript=null,i;if(isWebWorker)try{importScripts(n),e.completeLoad(t)}catch(s){e.onError(makeError("importscripts","importScripts failed for "+t+" at "+n,s,[t]))}},isBrowser&&!cfg.skipDataMain&&eachReverse(scripts(),function(e){head||(head=e.parentNode),dataMain=e.getAttribute("data-main");if(dataMain)return mainScript=dataMain,cfg.baseUrl||(src=mainScript.split("/"),mainScript=src.pop(),subPath=src.length?src.join("/")+"/":"./",cfg.baseUrl=subPath),mainScript=mainScript.replace(jsSuffixRegExp,""),req.jsExtRegExp.test(mainScript)&&(mainScript=dataMain),cfg.deps=cfg.deps?cfg.deps.concat(mainScript):[mainScript],!0}),define=function(e,t,n){var r,i;typeof e!="string"&&(n=t,t=e,e=null),isArray(t)||(n=t,t=null),!t&&isFunction(n)&&(t=[],n.length&&(n.toString().replace(commentRegExp,"").replace(cjsRequireRegExp,function(e,n){t.push(n)}),t=(n.length===1?["require"]:["require","exports","module"]).concat(t))),useInteractive&&(r=currentlyAddingScript||getInteractiveScript(),r&&(e||(e=r.getAttribute("data-requiremodule")),i=contexts[r.getAttribute("data-requirecontext")])),(i?i.defQueue:globalDefQueue).push([e,t,n])},define.amd={jQuery:!0},req.exec=function(text){return eval(text)},req(cfg)})(this),define("node_modules/requirejs/require.js",function(){}),function(e,t){function _(e){var t=M[e]={};return v.each(e.split(y),function(e,n){t[n]=!0}),t}function H(e,n,r){if(r===t&&e.nodeType===1){var i="data-"+n.replace(P,"-$1").toLowerCase();r=e.getAttribute(i);if(typeof r=="string"){try{r=r==="true"?!0:r==="false"?!1:r==="null"?null:+r+""===r?+r:D.test(r)?v.parseJSON(r):r}catch(s){}v.data(e,n,r)}else r=t}return r}function B(e){var t;for(t in e){if(t==="data"&&v.isEmptyObject(e[t]))continue;if(t!=="toJSON")return!1}return!0}function et(){return!1}function tt(){return!0}function ut(e){return!e||!e.parentNode||e.parentNode.nodeType===11}function at(e,t){do e=e[t];while(e&&e.nodeType!==1);return e}function ft(e,t,n){t=t||0;if(v.isFunction(t))return v.grep(e,function(e,r){var i=!!t.call(e,r,e);return i===n});if(t.nodeType)return v.grep(e,function(e,r){return e===t===n});if(typeof t=="string"){var r=v.grep(e,function(e){return e.nodeType===1});if(it.test(t))return v.filter(t,r,!n);t=v.filter(t,r)}return v.grep(e,function(e,r){return v.inArray(e,t)>=0===n})}function lt(e){var t=ct.split("|"),n=e.createDocumentFragment();if(n.createElement)while(t.length)n.createElement(t.pop());return n}function Lt(e,t){return e.getElementsByTagName(t)[0]||e.appendChild(e.ownerDocument.createElement(t))}function At(e,t){if(t.nodeType!==1||!v.hasData(e))return;var n,r,i,s=v._data(e),o=v._data(t,s),u=s.events;if(u){delete o.handle,o.events={};for(n in u)for(r=0,i=u[n].length;r<i;r++)v.event.add(t,n,u[n][r])}o.data&&(o.data=v.extend({},o.data))}function Ot(e,t){var n;if(t.nodeType!==1)return;t.clearAttributes&&t.clearAttributes(),t.mergeAttributes&&t.mergeAttributes(e),n=t.nodeName.toLowerCase(),n==="object"?(t.parentNode&&(t.outerHTML=e.outerHTML),v.support.html5Clone&&e.innerHTML&&!v.trim(t.innerHTML)&&(t.innerHTML=e.innerHTML)):n==="input"&&Et.test(e.type)?(t.defaultChecked=t.checked=e.checked,t.value!==e.value&&(t.value=e.value)):n==="option"?t.selected=e.defaultSelected:n==="input"||n==="textarea"?t.defaultValue=e.defaultValue:n==="script"&&t.text!==e.text&&(t.text=e.text),t.removeAttribute(v.expando)}function Mt(e){return typeof e.getElementsByTagName!="undefined"?e.getElementsByTagName("*"):typeof e.querySelectorAll!="undefined"?e.querySelectorAll("*"):[]}function _t(e){Et.test(e.type)&&(e.defaultChecked=e.checked)}function Qt(e,t){if(t in e)return t;var n=t.charAt(0).toUpperCase()+t.slice(1),r=t,i=Jt.length;while(i--){t=Jt[i]+n;if(t in e)return t}return r}function Gt(e,t){return e=t||e,v.css(e,"display")==="none"||!v.contains(e.ownerDocument,e)}function Yt(e,t){var n,r,i=[],s=0,o=e.length;for(;s<o;s++){n=e[s];if(!n.style)continue;i[s]=v._data(n,"olddisplay"),t?(!i[s]&&n.style.display==="none"&&(n.style.display=""),n.style.display===""&&Gt(n)&&(i[s]=v._data(n,"olddisplay",nn(n.nodeName)))):(r=Dt(n,"display"),!i[s]&&r!=="none"&&v._data(n,"olddisplay",r))}for(s=0;s<o;s++){n=e[s];if(!n.style)continue;if(!t||n.style.display==="none"||n.style.display==="")n.style.display=t?i[s]||"":"none"}return e}function Zt(e,t,n){var r=Rt.exec(t);return r?Math.max(0,r[1]-(n||0))+(r[2]||"px"):t}function en(e,t,n,r){var i=n===(r?"border":"content")?4:t==="width"?1:0,s=0;for(;i<4;i+=2)n==="margin"&&(s+=v.css(e,n+$t[i],!0)),r?(n==="content"&&(s-=parseFloat(Dt(e,"padding"+$t[i]))||0),n!=="margin"&&(s-=parseFloat(Dt(e,"border"+$t[i]+"Width"))||0)):(s+=parseFloat(Dt(e,"padding"+$t[i]))||0,n!=="padding"&&(s+=parseFloat(Dt(e,"border"+$t[i]+"Width"))||0));return s}function tn(e,t,n){var r=t==="width"?e.offsetWidth:e.offsetHeight,i=!0,s=v.support.boxSizing&&v.css(e,"boxSizing")==="border-box";if(r<=0||r==null){r=Dt(e,t);if(r<0||r==null)r=e.style[t];if(Ut.test(r))return r;i=s&&(v.support.boxSizingReliable||r===e.style[t]),r=parseFloat(r)||0}return r+en(e,t,n||(s?"border":"content"),i)+"px"}function nn(e){if(Wt[e])return Wt[e];var t=v("<"+e+">").appendTo(i.body),n=t.css("display");t.remove();if(n==="none"||n===""){Pt=i.body.appendChild(Pt||v.extend(i.createElement("iframe"),{frameBorder:0,width:0,height:0}));if(!Ht||!Pt.createElement)Ht=(Pt.contentWindow||Pt.contentDocument).document,Ht.write("<!doctype html><html><body>"),Ht.close();t=Ht.body.appendChild(Ht.createElement(e)),n=Dt(t,"display"),i.body.removeChild(Pt)}return Wt[e]=n,n}function fn(e,t,n,r){var i;if(v.isArray(t))v.each(t,function(t,i){n||sn.test(e)?r(e,i):fn(e+"["+(typeof i=="object"?t:"")+"]",i,n,r)});else if(!n&&v.type(t)==="object")for(i in t)fn(e+"["+i+"]",t[i],n,r);else r(e,t)}function Cn(e){return function(t,n){typeof t!="string"&&(n=t,t="*");var r,i,s,o=t.toLowerCase().split(y),u=0,a=o.length;if(v.isFunction(n))for(;u<a;u++)r=o[u],s=/^\+/.test(r),s&&(r=r.substr(1)||"*"),i=e[r]=e[r]||[],i[s?"unshift":"push"](n)}}function kn(e,n,r,i,s,o){s=s||n.dataTypes[0],o=o||{},o[s]=!0;var u,a=e[s],f=0,l=a?a.length:0,c=e===Sn;for(;f<l&&(c||!u);f++)u=a[f](n,r,i),typeof u=="string"&&(!c||o[u]?u=t:(n.dataTypes.unshift(u),u=kn(e,n,r,i,u,o)));return(c||!u)&&!o["*"]&&(u=kn(e,n,r,i,"*",o)),u}function Ln(e,n){var r,i,s=v.ajaxSettings.flatOptions||{};for(r in n)n[r]!==t&&((s[r]?e:i||(i={}))[r]=n[r]);i&&v.extend(!0,e,i)}function An(e,n,r){var i,s,o,u,a=e.contents,f=e.dataTypes,l=e.responseFields;for(s in l)s in r&&(n[l[s]]=r[s]);while(f[0]==="*")f.shift(),i===t&&(i=e.mimeType||n.getResponseHeader("content-type"));if(i)for(s in a)if(a[s]&&a[s].test(i)){f.unshift(s);break}if(f[0]in r)o=f[0];else{for(s in r){if(!f[0]||e.converters[s+" "+f[0]]){o=s;break}u||(u=s)}o=o||u}if(o)return o!==f[0]&&f.unshift(o),r[o]}function On(e,t){var n,r,i,s,o=e.dataTypes.slice(),u=o[0],a={},f=0;e.dataFilter&&(t=e.dataFilter(t,e.dataType));if(o[1])for(n in e.converters)a[n.toLowerCase()]=e.converters[n];for(;i=o[++f];)if(i!=="*"){if(u!=="*"&&u!==i){n=a[u+" "+i]||a["* "+i];if(!n)for(r in a){s=r.split(" ");if(s[1]===i){n=a[u+" "+s[0]]||a["* "+s[0]];if(n){n===!0?n=a[r]:a[r]!==!0&&(i=s[0],o.splice(f--,0,i));break}}}if(n!==!0)if(n&&e["throws"])t=n(t);else try{t=n(t)}catch(l){return{state:"parsererror",error:n?l:"No conversion from "+u+" to "+i}}}u=i}return{state:"success",data:t}}function Fn(){try{return new e.XMLHttpRequest}catch(t){}}function In(){try{return new e.ActiveXObject("Microsoft.XMLHTTP")}catch(t){}}function $n(){return setTimeout(function(){qn=t},0),qn=v.now()}function Jn(e,t){v.each(t,function(t,n){var r=(Vn[t]||[]).concat(Vn["*"]),i=0,s=r.length;for(;i<s;i++)if(r[i].call(e,t,n))return})}function Kn(e,t,n){var r,i=0,s=0,o=Xn.length,u=v.Deferred().always(function(){delete a.elem}),a=function(){var t=qn||$n(),n=Math.max(0,f.startTime+f.duration-t),r=n/f.duration||0,i=1-r,s=0,o=f.tweens.length;for(;s<o;s++)f.tweens[s].run(i);return u.notifyWith(e,[f,i,n]),i<1&&o?n:(u.resolveWith(e,[f]),!1)},f=u.promise({elem:e,props:v.extend({},t),opts:v.extend(!0,{specialEasing:{}},n),originalProperties:t,originalOptions:n,startTime:qn||$n(),duration:n.duration,tweens:[],createTween:function(t,n,r){var i=v.Tween(e,f.opts,t,n,f.opts.specialEasing[t]||f.opts.easing);return f.tweens.push(i),i},stop:function(t){var n=0,r=t?f.tweens.length:0;for(;n<r;n++)f.tweens[n].run(1);return t?u.resolveWith(e,[f,t]):u.rejectWith(e,[f,t]),this}}),l=f.props;Qn(l,f.opts.specialEasing);for(;i<o;i++){r=Xn[i].call(f,e,l,f.opts);if(r)return r}return Jn(f,l),v.isFunction(f.opts.start)&&f.opts.start.call(e,f),v.fx.timer(v.extend(a,{anim:f,queue:f.opts.queue,elem:e})),f.progress(f.opts.progress).done(f.opts.done,f.opts.complete).fail(f.opts.fail).always(f.opts.always)}function Qn(e,t){var n,r,i,s,o;for(n in e){r=v.camelCase(n),i=t[r],s=e[n],v.isArray(s)&&(i=s[1],s=e[n]=s[0]),n!==r&&(e[r]=s,delete e[n]),o=v.cssHooks[r];if(o&&"expand"in o){s=o.expand(s),delete e[r];for(n in s)n in e||(e[n]=s[n],t[n]=i)}else t[r]=i}}function Gn(e,t,n){var r,i,s,o,u,a,f,l,c,h=this,p=e.style,d={},m=[],g=e.nodeType&&Gt(e);n.queue||(l=v._queueHooks(e,"fx"),l.unqueued==null&&(l.unqueued=0,c=l.empty.fire,l.empty.fire=function(){l.unqueued||c()}),l.unqueued++,h.always(function(){h.always(function(){l.unqueued--,v.queue(e,"fx").length||l.empty.fire()})})),e.nodeType===1&&("height"in t||"width"in t)&&(n.overflow=[p.overflow,p.overflowX,p.overflowY],v.css(e,"display")==="inline"&&v.css(e,"float")==="none"&&(!v.support.inlineBlockNeedsLayout||nn(e.nodeName)==="inline"?p.display="inline-block":p.zoom=1)),n.overflow&&(p.overflow="hidden",v.support.shrinkWrapBlocks||h.done(function(){p.overflow=n.overflow[0],p.overflowX=n.overflow[1],p.overflowY=n.overflow[2]}));for(r in t){s=t[r];if(Un.exec(s)){delete t[r],a=a||s==="toggle";if(s===(g?"hide":"show"))continue;m.push(r)}}o=m.length;if(o){u=v._data(e,"fxshow")||v._data(e,"fxshow",{}),"hidden"in u&&(g=u.hidden),a&&(u.hidden=!g),g?v(e).show():h.done(function(){v(e).hide()}),h.done(function(){var t;v.removeData(e,"fxshow",!0);for(t in d)v.style(e,t,d[t])});for(r=0;r<o;r++)i=m[r],f=h.createTween(i,g?u[i]:0),d[i]=u[i]||v.style(e,i),i in u||(u[i]=f.start,g&&(f.end=f.start,f.start=i==="width"||i==="height"?1:0))}}function Yn(e,t,n,r,i){return new Yn.prototype.init(e,t,n,r,i)}function Zn(e,t){var n,r={height:e},i=0;t=t?1:0;for(;i<4;i+=2-t)n=$t[i],r["margin"+n]=r["padding"+n]=e;return t&&(r.opacity=r.width=e),r}function tr(e){return v.isWindow(e)?e:e.nodeType===9?e.defaultView||e.parentWindow:!1}var n,r,i=e.document,s=e.location,o=e.navigator,u=e.jQuery,a=e.$,f=Array.prototype.push,l=Array.prototype.slice,c=Array.prototype.indexOf,h=Object.prototype.toString,p=Object.prototype.hasOwnProperty,d=String.prototype.trim,v=function(e,t){return new v.fn.init(e,t,n)},m=/[\-+]?(?:\d*\.|)\d+(?:[eE][\-+]?\d+|)/.source,g=/\S/,y=/\s+/,b=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,w=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,E=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,S=/^[\],:{}\s]*$/,x=/(?:^|:|,)(?:\s*\[)+/g,T=/\\(?:["\\\/bfnrt]|u[\da-fA-F]{4})/g,N=/"[^"\\\r\n]*"|true|false|null|-?(?:\d\d*\.|)\d+(?:[eE][\-+]?\d+|)/g,C=/^-ms-/,k=/-([\da-z])/gi,L=function(e,t){return(t+"").toUpperCase()},A=function(){i.addEventListener?(i.removeEventListener("DOMContentLoaded",A,!1),v.ready()):i.readyState==="complete"&&(i.detachEvent("onreadystatechange",A),v.ready())},O={};v.fn=v.prototype={constructor:v,init:function(e,n,r){var s,o,u,a;if(!e)return this;if(e.nodeType)return this.context=this[0]=e,this.length=1,this;if(typeof e=="string"){e.charAt(0)==="<"&&e.charAt(e.length-1)===">"&&e.length>=3?s=[null,e,null]:s=w.exec(e);if(s&&(s[1]||!n)){if(s[1])return n=n instanceof v?n[0]:n,a=n&&n.nodeType?n.ownerDocument||n:i,e=v.parseHTML(s[1],a,!0),E.test(s[1])&&v.isPlainObject(n)&&this.attr.call(e,n,!0),v.merge(this,e);o=i.getElementById(s[2]);if(o&&o.parentNode){if(o.id!==s[2])return r.find(e);this.length=1,this[0]=o}return this.context=i,this.selector=e,this}return!n||n.jquery?(n||r).find(e):this.constructor(n).find(e)}return v.isFunction(e)?r.ready(e):(e.selector!==t&&(this.selector=e.selector,this.context=e.context),v.makeArray(e,this))},selector:"",jquery:"1.8.3",length:0,size:function(){return this.length},toArray:function(){return l.call(this)},get:function(e){return e==null?this.toArray():e<0?this[this.length+e]:this[e]},pushStack:function(e,t,n){var r=v.merge(this.constructor(),e);return r.prevObject=this,r.context=this.context,t==="find"?r.selector=this.selector+(this.selector?" ":"")+n:t&&(r.selector=this.selector+"."+t+"("+n+")"),r},each:function(e,t){return v.each(this,e,t)},ready:function(e){return v.ready.promise().done(e),this},eq:function(e){return e=+e,e===-1?this.slice(e):this.slice(e,e+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},slice:function(){return this.pushStack(l.apply(this,arguments),"slice",l.call(arguments).join(","))},map:function(e){return this.pushStack(v.map(this,function(t,n){return e.call(t,n,t)}))},end:function(){return this.prevObject||this.constructor(null)},push:f,sort:[].sort,splice:[].splice},v.fn.init.prototype=v.fn,v.extend=v.fn.extend=function(){var e,n,r,i,s,o,u=arguments[0]||{},a=1,f=arguments.length,l=!1;typeof u=="boolean"&&(l=u,u=arguments[1]||{},a=2),typeof u!="object"&&!v.isFunction(u)&&(u={}),f===a&&(u=this,--a);for(;a<f;a++)if((e=arguments[a])!=null)for(n in e){r=u[n],i=e[n];if(u===i)continue;l&&i&&(v.isPlainObject(i)||(s=v.isArray(i)))?(s?(s=!1,o=r&&v.isArray(r)?r:[]):o=r&&v.isPlainObject(r)?r:{},u[n]=v.extend(l,o,i)):i!==t&&(u[n]=i)}return u},v.extend({noConflict:function(t){return e.$===v&&(e.$=a),t&&e.jQuery===v&&(e.jQuery=u),v},isReady:!1,readyWait:1,holdReady:function(e){e?v.readyWait++:v.ready(!0)},ready:function(e){if(e===!0?--v.readyWait:v.isReady)return;if(!i.body)return setTimeout(v.ready,1);v.isReady=!0;if(e!==!0&&--v.readyWait>0)return;r.resolveWith(i,[v]),v.fn.trigger&&v(i).trigger("ready").off("ready")},isFunction:function(e){return v.type(e)==="function"},isArray:Array.isArray||function(e){return v.type(e)==="array"},isWindow:function(e){return e!=null&&e==e.window},isNumeric:function(e){return!isNaN(parseFloat(e))&&isFinite(e)},type:function(e){return e==null?String(e):O[h.call(e)]||"object"},isPlainObject:function(e){if(!e||v.type(e)!=="object"||e.nodeType||v.isWindow(e))return!1;try{if(e.constructor&&!p.call(e,"constructor")&&!p.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(n){return!1}var r;for(r in e);return r===t||p.call(e,r)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},error:function(e){throw new Error(e)},parseHTML:function(e,t,n){var r;return!e||typeof e!="string"?null:(typeof t=="boolean"&&(n=t,t=0),t=t||i,(r=E.exec(e))?[t.createElement(r[1])]:(r=v.buildFragment([e],t,n?null:[]),v.merge([],(r.cacheable?v.clone(r.fragment):r.fragment).childNodes)))},parseJSON:function(t){if(!t||typeof t!="string")return null;t=v.trim(t);if(e.JSON&&e.JSON.parse)return e.JSON.parse(t);if(S.test(t.replace(T,"@").replace(N,"]").replace(x,"")))return(new Function("return "+t))();v.error("Invalid JSON: "+t)},parseXML:function(n){var r,i;if(!n||typeof n!="string")return null;try{e.DOMParser?(i=new DOMParser,r=i.parseFromString(n,"text/xml")):(r=new ActiveXObject("Microsoft.XMLDOM"),r.async="false",r.loadXML(n))}catch(s){r=t}return(!r||!r.documentElement||r.getElementsByTagName("parsererror").length)&&v.error("Invalid XML: "+n),r},noop:function(){},globalEval:function(t){t&&g.test(t)&&(e.execScript||function(t){e.eval.call(e,t)})(t)},camelCase:function(e){return e.replace(C,"ms-").replace(k,L)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,n,r){var i,s=0,o=e.length,u=o===t||v.isFunction(e);if(r){if(u){for(i in e)if(n.apply(e[i],r)===!1)break}else for(;s<o;)if(n.apply(e[s++],r)===!1)break}else if(u){for(i in e)if(n.call(e[i],i,e[i])===!1)break}else for(;s<o;)if(n.call(e[s],s,e[s++])===!1)break;return e},trim:d&&!d.call("")?function(e){return e==null?"":d.call(e)}:function(e){return e==null?"":(e+"").replace(b,"")},makeArray:function(e,t){var n,r=t||[];return e!=null&&(n=v.type(e),e.length==null||n==="string"||n==="function"||n==="regexp"||v.isWindow(e)?f.call(r,e):v.merge(r,e)),r},inArray:function(e,t,n){var r;if(t){if(c)return c.call(t,e,n);r=t.length,n=n?n<0?Math.max(0,r+n):n:0;for(;n<r;n++)if(n in t&&t[n]===e)return n}return-1},merge:function(e,n){var r=n.length,i=e.length,s=0;if(typeof r=="number")for(;s<r;s++)e[i++]=n[s];else while(n[s]!==t)e[i++]=n[s++];return e.length=i,e},grep:function(e,t,n){var r,i=[],s=0,o=e.length;n=!!n;for(;s<o;s++)r=!!t(e[s],s),n!==r&&i.push(e[s]);return i},map:function(e,n,r){var i,s,o=[],u=0,a=e.length,f=e instanceof v||a!==t&&typeof a=="number"&&(a>0&&e[0]&&e[a-1]||a===0||v.isArray(e));if(f)for(;u<a;u++)i=n(e[u],u,r),i!=null&&(o[o.length]=i);else for(s in e)i=n(e[s],s,r),i!=null&&(o[o.length]=i);return o.concat.apply([],o)},guid:1,proxy:function(e,n){var r,i,s;return typeof n=="string"&&(r=e[n],n=e,e=r),v.isFunction(e)?(i=l.call(arguments,2),s=function(){return e.apply(n,i.concat(l.call(arguments)))},s.guid=e.guid=e.guid||v.guid++,s):t},access:function(e,n,r,i,s,o,u){var a,f=r==null,l=0,c=e.length;if(r&&typeof r=="object"){for(l in r)v.access(e,n,l,r[l],1,o,i);s=1}else if(i!==t){a=u===t&&v.isFunction(i),f&&(a?(a=n,n=function(e,t,n){return a.call(v(e),n)}):(n.call(e,i),n=null));if(n)for(;l<c;l++)n(e[l],r,a?i.call(e[l],l,n(e[l],r)):i,u);s=1}return s?e:f?n.call(e):c?n(e[0],r):o},now:function(){return(new Date).getTime()}}),v.ready.promise=function(t){if(!r){r=v.Deferred();if(i.readyState==="complete")setTimeout(v.ready,1);else if(i.addEventListener)i.addEventListener("DOMContentLoaded",A,!1),e.addEventListener("load",v.ready,!1);else{i.attachEvent("onreadystatechange",A),e.attachEvent("onload",v.ready);var n=!1;try{n=e.frameElement==null&&i.documentElement}catch(s){}n&&n.doScroll&&function o(){if(!v.isReady){try{n.doScroll("left")}catch(e){return setTimeout(o,50)}v.ready()}}()}}return r.promise(t)},v.each("Boolean Number String Function Array Date RegExp Object".split(" "),function(e,t){O["[object "+t+"]"]=t.toLowerCase()}),n=v(i);var M={};v.Callbacks=function(e){e=typeof e=="string"?M[e]||_(e):v.extend({},e);var n,r,i,s,o,u,a=[],f=!e.once&&[],l=function(t){n=e.memory&&t,r=!0,u=s||0,s=0,o=a.length,i=!0;for(;a&&u<o;u++)if(a[u].apply(t[0],t[1])===!1&&e.stopOnFalse){n=!1;break}i=!1,a&&(f?f.length&&l(f.shift()):n?a=[]:c.disable())},c={add:function(){if(a){var t=a.length;(function r(t){v.each(t,function(t,n){var i=v.type(n);i==="function"?(!e.unique||!c.has(n))&&a.push(n):n&&n.length&&i!=="string"&&r(n)})})(arguments),i?o=a.length:n&&(s=t,l(n))}return this},remove:function(){return a&&v.each(arguments,function(e,t){var n;while((n=v.inArray(t,a,n))>-1)a.splice(n,1),i&&(n<=o&&o--,n<=u&&u--)}),this},has:function(e){return v.inArray(e,a)>-1},empty:function(){return a=[],this},disable:function(){return a=f=n=t,this},disabled:function(){return!a},lock:function(){return f=t,n||c.disable(),this},locked:function(){return!f},fireWith:function(e,t){return t=t||[],t=[e,t.slice?t.slice():t],a&&(!r||f)&&(i?f.push(t):l(t)),this},fire:function(){return c.fireWith(this,arguments),this},fired:function(){return!!r}};return c},v.extend({Deferred:function(e){var t=[["resolve","done",v.Callbacks("once memory"),"resolved"],["reject","fail",v.Callbacks("once memory"),"rejected"],["notify","progress",v.Callbacks("memory")]],n="pending",r={state:function(){return n},always:function(){return i.done(arguments).fail(arguments),this},then:function(){var e=arguments;return v.Deferred(function(n){v.each(t,function(t,r){var s=r[0],o=e[t];i[r[1]](v.isFunction(o)?function(){var e=o.apply(this,arguments);e&&v.isFunction(e.promise)?e.promise().done(n.resolve).fail(n.reject).progress(n.notify):n[s+"With"](this===i?n:this,[e])}:n[s])}),e=null}).promise()},promise:function(e){return e!=null?v.extend(e,r):r}},i={};return r.pipe=r.then,v.each(t,function(e,s){var o=s[2],u=s[3];r[s[1]]=o.add,u&&o.add(function(){n=u},t[e^1][2].disable,t[2][2].lock),i[s[0]]=o.fire,i[s[0]+"With"]=o.fireWith}),r.promise(i),e&&e.call(i,i),i},when:function(e){var t=0,n=l.call(arguments),r=n.length,i=r!==1||e&&v.isFunction(e.promise)?r:0,s=i===1?e:v.Deferred(),o=function(e,t,n){return function(r){t[e]=this,n[e]=arguments.length>1?l.call(arguments):r,n===u?s.notifyWith(t,n):--i||s.resolveWith(t,n)}},u,a,f;if(r>1){u=new Array(r),a=new Array(r),f=new Array(r);for(;t<r;t++)n[t]&&v.isFunction(n[t].promise)?n[t].promise().done(o(t,f,n)).fail(s.reject).progress(o(t,a,u)):--i}return i||s.resolveWith(f,n),s.promise()}}),v.support=function(){var t,n,r,s,o,u,a,f,l,c,h,p=i.createElement("div");p.setAttribute("className","t"),p.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",n=p.getElementsByTagName("*"),r=p.getElementsByTagName("a")[0];if(!n||!r||!n.length)return{};s=i.createElement("select"),o=s.appendChild(i.createElement("option")),u=p.getElementsByTagName("input")[0],r.style.cssText="top:1px;float:left;opacity:.5",t={leadingWhitespace:p.firstChild.nodeType===3,tbody:!p.getElementsByTagName("tbody").length,htmlSerialize:!!p.getElementsByTagName("link").length,style:/top/.test(r.getAttribute("style")),hrefNormalized:r.getAttribute("href")==="/a",opacity:/^0.5/.test(r.style.opacity),cssFloat:!!r.style.cssFloat,checkOn:u.value==="on",optSelected:o.selected,getSetAttribute:p.className!=="t",enctype:!!i.createElement("form").enctype,html5Clone:i.createElement("nav").cloneNode(!0).outerHTML!=="<:nav></:nav>",boxModel:i.compatMode==="CSS1Compat",submitBubbles:!0,changeBubbles:!0,focusinBubbles:!1,deleteExpando:!0,noCloneEvent:!0,inlineBlockNeedsLayout:!1,shrinkWrapBlocks:!1,reliableMarginRight:!0,boxSizingReliable:!0,pixelPosition:!1},u.checked=!0,t.noCloneChecked=u.cloneNode(!0).checked,s.disabled=!0,t.optDisabled=!o.disabled;try{delete p.test}catch(d){t.deleteExpando=!1}!p.addEventListener&&p.attachEvent&&p.fireEvent&&(p.attachEvent("onclick",h=function(){t.noCloneEvent=!1}),p.cloneNode(!0).fireEvent("onclick"),p.detachEvent("onclick",h)),u=i.createElement("input"),u.value="t",u.setAttribute("type","radio"),t.radioValue=u.value==="t",u.setAttribute("checked","checked"),u.setAttribute("name","t"),p.appendChild(u),a=i.createDocumentFragment(),a.appendChild(p.lastChild),t.checkClone=a.cloneNode(!0).cloneNode(!0).lastChild.checked,t.appendChecked=u.checked,a.removeChild(u),a.appendChild(p);if(p.attachEvent)for(l in{submit:!0,change:!0,focusin:!0})f="on"+l,c=f in p,c||(p.setAttribute(f,"return;"),c=typeof p[f]=="function"),t[l+"Bubbles"]=c;return v(function(){var n,r,s,o,u="padding:0;margin:0;border:0;display:block;overflow:hidden;",a=i.getElementsByTagName("body")[0];if(!a)return;n=i.createElement("div"),n.style.cssText="visibility:hidden;border:0;width:0;height:0;position:static;top:0;margin-top:1px",a.insertBefore(n,a.firstChild),r=i.createElement("div"),n.appendChild(r),r.innerHTML="<table><tr><td></td><td>t</td></tr></table>",s=r.getElementsByTagName("td"),s[0].style.cssText="padding:0;margin:0;border:0;display:none",c=s[0].offsetHeight===0,s[0].style.display="",s[1].style.display="none",t.reliableHiddenOffsets=c&&s[0].offsetHeight===0,r.innerHTML="",r.style.cssText="box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%;",t.boxSizing=r.offsetWidth===4,t.doesNotIncludeMarginInBodyOffset=a.offsetTop!==1,e.getComputedStyle&&(t.pixelPosition=(e.getComputedStyle(r,null)||{}).top!=="1%",t.boxSizingReliable=(e.getComputedStyle(r,null)||{width:"4px"}).width==="4px",o=i.createElement("div"),o.style.cssText=r.style.cssText=u,o.style.marginRight=o.style.width="0",r.style.width="1px",r.appendChild(o),t.reliableMarginRight=!parseFloat((e.getComputedStyle(o,null)||{}).marginRight)),typeof r.style.zoom!="undefined"&&(r.innerHTML="",r.style.cssText=u+"width:1px;padding:1px;display:inline;zoom:1",t.inlineBlockNeedsLayout=r.offsetWidth===3,r.style.display="block",r.style.overflow="visible",r.innerHTML="<div></div>",r.firstChild.style.width="5px",t.shrinkWrapBlocks=r.offsetWidth!==3,n.style.zoom=1),a.removeChild(n),n=r=s=o=null}),a.removeChild(p),n=r=s=o=u=a=p=null,t}();var D=/(?:\{[\s\S]*\}|\[[\s\S]*\])$/,P=/([A-Z])/g;v.extend({cache:{},deletedIds:[],uuid:0,expando:"jQuery"+(v.fn.jquery+Math.random()).replace(/\D/g,""),noData:{embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:!0},hasData:function(e){return e=e.nodeType?v.cache[e[v.expando]]:e[v.expando],!!e&&!B(e)},data:function(e,n,r,i){if(!v.acceptData(e))return;var s,o,u=v.expando,a=typeof n=="string",f=e.nodeType,l=f?v.cache:e,c=f?e[u]:e[u]&&u;if((!c||!l[c]||!i&&!l[c].data)&&a&&r===t)return;c||(f?e[u]=c=v.deletedIds.pop()||v.guid++:c=u),l[c]||(l[c]={},f||(l[c].toJSON=v.noop));if(typeof n=="object"||typeof n=="function")i?l[c]=v.extend(l[c],n):l[c].data=v.extend(l[c].data,n);return s=l[c],i||(s.data||(s.data={}),s=s.data),r!==t&&(s[v.camelCase(n)]=r),a?(o=s[n],o==null&&(o=s[v.camelCase(n)])):o=s,o},removeData:function(e,t,n){if(!v.acceptData(e))return;var r,i,s,o=e.nodeType,u=o?v.cache:e,a=o?e[v.expando]:v.expando;if(!u[a])return;if(t){r=n?u[a]:u[a].data;if(r){v.isArray(t)||(t in r?t=[t]:(t=v.camelCase(t),t in r?t=[t]:t=t.split(" ")));for(i=0,s=t.length;i<s;i++)delete r[t[i]];if(!(n?B:v.isEmptyObject)(r))return}}if(!n){delete u[a].data;if(!B(u[a]))return}o?v.cleanData([e],!0):v.support.deleteExpando||u!=u.window?delete u[a]:u[a]=null},_data:function(e,t,n){return v.data(e,t,n,!0)},acceptData:function(e){var t=e.nodeName&&v.noData[e.nodeName.toLowerCase()];return!t||t!==!0&&e.getAttribute("classid")===t}}),v.fn.extend({data:function(e,n){var r,i,s,o,u,a=this[0],f=0,l=null;if(e===t){if(this.length){l=v.data(a);if(a.nodeType===1&&!v._data(a,"parsedAttrs")){s=a.attributes;for(u=s.length;f<u;f++)o=s[f].name,o.indexOf("data-")||(o=v.camelCase(o.substring(5)),H(a,o,l[o]));v._data(a,"parsedAttrs",!0)}}return l}return typeof e=="object"?this.each(function(){v.data(this,e)}):(r=e.split(".",2),r[1]=r[1]?"."+r[1]:"",i=r[1]+"!",v.access(this,function(n){if(n===t)return l=this.triggerHandler("getData"+i,[r[0]]),l===t&&a&&(l=v.data(a,e),l=H(a,e,l)),l===t&&r[1]?this.data(r[0]):l;r[1]=n,this.each(function(){var t=v(this);t.triggerHandler("setData"+i,r),v.data(this,e,n),t.triggerHandler("changeData"+i,r)})},null,n,arguments.length>1,null,!1))},removeData:function(e){return this.each(function(){v.removeData(this,e)})}}),v.extend({queue:function(e,t,n){var r;if(e)return t=(t||"fx")+"queue",r=v._data(e,t),n&&(!r||v.isArray(n)?r=v._data(e,t,v.makeArray(n)):r.push(n)),r||[]},dequeue:function(e,t){t=t||"fx";var n=v.queue(e,t),r=n.length,i=n.shift(),s=v._queueHooks(e,t),o=function(){v.dequeue(e,t)};i==="inprogress"&&(i=n.shift(),r--),i&&(t==="fx"&&n.unshift("inprogress"),delete s.stop,i.call(e,o,s)),!r&&s&&s.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return v._data(e,n)||v._data(e,n,{empty:v.Callbacks("once memory").add(function(){v.removeData(e,t+"queue",!0),v.removeData(e,n,!0)})})}}),v.fn.extend({queue:function(e,n){var r=2;return typeof e!="string"&&(n=e,e="fx",r--),arguments.length<r?v.queue(this[0],e):n===t?this:this.each(function(){var t=v.queue(this,e,n);v._queueHooks(this,e),e==="fx"&&t[0]!=="inprogress"&&v.dequeue(this,e)})},dequeue:function(e){return this.each(function(){v.dequeue(this,e)})},delay:function(e,t){return e=v.fx?v.fx.speeds[e]||e:e,t=t||"fx",this.queue(t,function(t,n){var r=setTimeout(t,e);n.stop=function(){clearTimeout(r)}})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,n){var r,i=1,s=v.Deferred(),o=this,u=this.length,a=function(){--i||s.resolveWith(o,[o])};typeof e!="string"&&(n=e,e=t),e=e||"fx";while(u--)r=v._data(o[u],e+"queueHooks"),r&&r.empty&&(i++,r.empty.add(a));return a(),s.promise(n)}});var j,F,I,q=/[\t\r\n]/g,R=/\r/g,U=/^(?:button|input)$/i,z=/^(?:button|input|object|select|textarea)$/i,W=/^a(?:rea|)$/i,X=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,V=v.support.getSetAttribute;v.fn.extend({attr:function(e,t){return v.access(this,v.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){v.removeAttr(this,e)})},prop:function(e,t){return v.access(this,v.prop,e,t,arguments.length>1)},removeProp:function(e){return e=v.propFix[e]||e,this.each(function(){try{this[e]=t,delete this[e]}catch(n){}})},addClass:function(e){var t,n,r,i,s,o,u;if(v.isFunction(e))return this.each(function(t){v(this).addClass(e.call(this,t,this.className))});if(e&&typeof e=="string"){t=e.split(y);for(n=0,r=this.length;n<r;n++){i=this[n];if(i.nodeType===1)if(!i.className&&t.length===1)i.className=e;else{s=" "+i.className+" ";for(o=0,u=t.length;o<u;o++)s.indexOf(" "+t[o]+" ")<0&&(s+=t[o]+" ");i.className=v.trim(s)}}}return this},removeClass:function(e){var n,r,i,s,o,u,a;if(v.isFunction(e))return this.each(function(t){v(this).removeClass(e.call(this,t,this.className))});if(e&&typeof e=="string"||e===t){n=(e||"").split(y);for(u=0,a=this.length;u<a;u++){i=this[u];if(i.nodeType===1&&i.className){r=(" "+i.className+" ").replace(q," ");for(s=0,o=n.length;s<o;s++)while(r.indexOf(" "+n[s]+" ")>=0)r=r.replace(" "+n[s]+" "," ");i.className=e?v.trim(r):""}}}return this},toggleClass:function(e,t){var n=typeof e,r=typeof t=="boolean";return v.isFunction(e)?this.each(function(n){v(this).toggleClass(e.call(this,n,this.className,t),t)}):this.each(function(){if(n==="string"){var i,s=0,o=v(this),u=t,a=e.split(y);while(i=a[s++])u=r?u:!o.hasClass(i),o[u?"addClass":"removeClass"](i)}else if(n==="undefined"||n==="boolean")this.className&&v._data(this,"__className__",this.className),this.className=this.className||e===!1?"":v._data(this,"__className__")||""})},hasClass:function(e){var t=" "+e+" ",n=0,r=this.length;for(;n<r;n++)if(this[n].nodeType===1&&(" "+this[n].className+" ").replace(q," ").indexOf(t)>=0)return!0;return!1},val:function(e){var n,r,i,s=this[0];if(!arguments.length){if(s)return n=v.valHooks[s.type]||v.valHooks[s.nodeName.toLowerCase()],n&&"get"in n&&(r=n.get(s,"value"))!==t?r:(r=s.value,typeof r=="string"?r.replace(R,""):r==null?"":r);return}return i=v.isFunction(e),this.each(function(r){var s,o=v(this);if(this.nodeType!==1)return;i?s=e.call(this,r,o.val()):s=e,s==null?s="":typeof s=="number"?s+="":v.isArray(s)&&(s=v.map(s,function(e){return e==null?"":e+""})),n=v.valHooks[this.type]||v.valHooks[this.nodeName.toLowerCase()];if(!n||!("set"in n)||n.set(this,s,"value")===t)this.value=s})}}),v.extend({valHooks:{option:{get:function(e){var t=e.attributes.value;return!t||t.specified?e.value:e.text}},select:{get:function(e){var t,n,r=e.options,i=e.selectedIndex,s=e.type==="select-one"||i<0,o=s?null:[],u=s?i+1:r.length,a=i<0?u:s?i:0;for(;a<u;a++){n=r[a];if((n.selected||a===i)&&(v.support.optDisabled?!n.disabled:n.getAttribute("disabled")===null)&&(!n.parentNode.disabled||!v.nodeName(n.parentNode,"optgroup"))){t=v(n).val();if(s)return t;o.push(t)}}return o},set:function(e,t){var n=v.makeArray(t);return v(e).find("option").each(function(){this.selected=v.inArray(v(this).val(),n)>=0}),n.length||(e.selectedIndex=-1),n}}},attrFn:{},attr:function(e,n,r,i){var s,o,u,a=e.nodeType;if(!e||a===3||a===8||a===2)return;if(i&&v.isFunction(v.fn[n]))return v(e)[n](r);if(typeof e.getAttribute=="undefined")return v.prop(e,n,r);u=a!==1||!v.isXMLDoc(e),u&&(n=n.toLowerCase(),o=v.attrHooks[n]||(X.test(n)?F:j));if(r!==t){if(r===null){v.removeAttr(e,n);return}return o&&"set"in o&&u&&(s=o.set(e,r,n))!==t?s:(e.setAttribute(n,r+""),r)}return o&&"get"in o&&u&&(s=o.get(e,n))!==null?s:(s=e.getAttribute(n),s===null?t:s)},removeAttr:function(e,t){var n,r,i,s,o=0;if(t&&e.nodeType===1){r=t.split(y);for(;o<r.length;o++)i=r[o],i&&(n=v.propFix[i]||i,s=X.test(i),s||v.attr(e,i,""),e.removeAttribute(V?i:n),s&&n in e&&(e[n]=!1))}},attrHooks:{type:{set:function(e,t){if(U.test(e.nodeName)&&e.parentNode)v.error("type property can't be changed");else if(!v.support.radioValue&&t==="radio"&&v.nodeName(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}},value:{get:function(e,t){return j&&v.nodeName(e,"button")?j.get(e,t):t in e?e.value:null},set:function(e,t,n){if(j&&v.nodeName(e,"button"))return j.set(e,t,n);e.value=t}}},propFix:{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(e,n,r){var i,s,o,u=e.nodeType;if(!e||u===3||u===8||u===2)return;return o=u!==1||!v.isXMLDoc(e),o&&(n=v.propFix[n]||n,s=v.propHooks[n]),r!==t?s&&"set"in s&&(i=s.set(e,r,n))!==t?i:e[n]=r:s&&"get"in s&&(i=s.get(e,n))!==null?i:e[n]},propHooks:{tabIndex:{get:function(e){var n=e.getAttributeNode("tabindex");return n&&n.specified?parseInt(n.value,10):z.test(e.nodeName)||W.test(e.nodeName)&&e.href?0:t}}}}),F={get:function(e,n){var r,i=v.prop(e,n);return i===!0||typeof i!="boolean"&&(r=e.getAttributeNode(n))&&r.nodeValue!==!1?n.toLowerCase():t},set:function(e,t,n){var r;return t===!1?v.removeAttr(e,n):(r=v.propFix[n]||n,r in e&&(e[r]=!0),e.setAttribute(n,n.toLowerCase())),n}},V||(I={name:!0,id:!0,coords:!0},j=v.valHooks.button={get:function(e,n){var r;return r=e.getAttributeNode(n),r&&(I[n]?r.value!=="":r.specified)?r.value:t},set:function(e,t,n){var r=e.getAttributeNode(n);return r||(r=i.createAttribute(n),e.setAttributeNode(r)),r.value=t+""}},v.each(["width","height"],function(e,t){v.attrHooks[t]=v.extend(v.attrHooks[t],{set:function(e,n){if(n==="")return e.setAttribute(t,"auto"),n}})}),v.attrHooks.contenteditable={get:j.get,set:function(e,t,n){t===""&&(t="false"),j.set(e,t,n)}}),v.support.hrefNormalized||v.each(["href","src","width","height"],function(e,n){v.attrHooks[n]=v.extend(v.attrHooks[n],{get:function(e){var r=e.getAttribute(n,2);return r===null?t:r}})}),v.support.style||(v.attrHooks.style={get:function(e){return e.style.cssText.toLowerCase()||t},set:function(e,t){return e.style.cssText=t+""}}),v.support.optSelected||(v.propHooks.selected=v.extend(v.propHooks.selected,{get:function(e){var t=e.parentNode;return t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex),null}})),v.support.enctype||(v.propFix.enctype="encoding"),v.support.checkOn||v.each(["radio","checkbox"],function(){v.valHooks[this]={get:function(e){return e.getAttribute("value")===null?"on":e.value}}}),v.each(["radio","checkbox"],function(){v.valHooks[this]=v.extend(v.valHooks[this],{set:function(e,t){if(v.isArray(t))return e.checked=v.inArray(v(e).val(),t)>=0}})});var $=/^(?:textarea|input|select)$/i,J=/^([^\.]*|)(?:\.(.+)|)$/,K=/(?:^|\s)hover(\.\S+|)\b/,Q=/^key/,G=/^(?:mouse|contextmenu)|click/,Y=/^(?:focusinfocus|focusoutblur)$/,Z=function(e){return v.event.special.hover?e:e.replace(K,"mouseenter$1 mouseleave$1")};v.event={add:function(e,n,r,i,s){var o,u,a,f,l,c,h,p,d,m,g;if(e.nodeType===3||e.nodeType===8||!n||!r||!(o=v._data(e)))return;r.handler&&(d=r,r=d.handler,s=d.selector),r.guid||(r.guid=v.guid++),a=o.events,a||(o.events=a={}),u=o.handle,u||(o.handle=u=function(e){return typeof v=="undefined"||!!e&&v.event.triggered===e.type?t:v.event.dispatch.apply(u.elem,arguments)},u.elem=e),n=v.trim(Z(n)).split(" ");for(f=0;f<n.length;f++){l=J.exec(n[f])||[],c=l[1],h=(l[2]||"").split(".").sort(),g=v.event.special[c]||{},c=(s?g.delegateType:g.bindType)||c,g=v.event.special[c]||{},p=v.extend({type:c,origType:l[1],data:i,handler:r,guid:r.guid,selector:s,needsContext:s&&v.expr.match.needsContext.test(s),namespace:h.join(".")},d),m=a[c];if(!m){m=a[c]=[],m.delegateCount=0;if(!g.setup||g.setup.call(e,i,h,u)===!1)e.addEventListener?e.addEventListener(c,u,!1):e.attachEvent&&e.attachEvent("on"+c,u)}g.add&&(g.add.call(e,p),p.handler.guid||(p.handler.guid=r.guid)),s?m.splice(m.delegateCount++,0,p):m.push(p),v.event.global[c]=!0}e=null},global:{},remove:function(e,t,n,r,i){var s,o,u,a,f,l,c,h,p,d,m,g=v.hasData(e)&&v._data(e);if(!g||!(h=g.events))return;t=v.trim(Z(t||"")).split(" ");for(s=0;s<t.length;s++){o=J.exec(t[s])||[],u=a=o[1],f=o[2];if(!u){for(u in h)v.event.remove(e,u+t[s],n,r,!0);continue}p=v.event.special[u]||{},u=(r?p.delegateType:p.bindType)||u,d=h[u]||[],l=d.length,f=f?new RegExp("(^|\\.)"+f.split(".").sort().join("\\.(?:.*\\.|)")+"(\\.|$)"):null;for(c=0;c<d.length;c++)m=d[c],(i||a===m.origType)&&(!n||n.guid===m.guid)&&(!f||f.test(m.namespace))&&(!r||r===m.selector||r==="**"&&m.selector)&&(d.splice(c--,1),m.selector&&d.delegateCount--,p.remove&&p.remove.call(e,m));d.length===0&&l!==d.length&&((!p.teardown||p.teardown.call(e,f,g.handle)===!1)&&v.removeEvent(e,u,g.handle),delete h[u])}v.isEmptyObject(h)&&(delete g.handle,v.removeData(e,"events",!0))},customEvent:{getData:!0,setData:!0,changeData:!0},trigger:function(n,r,s,o){if(!s||s.nodeType!==3&&s.nodeType!==8){var u,a,f,l,c,h,p,d,m,g,y=n.type||n,b=[];if(Y.test(y+v.event.triggered))return;y.indexOf("!")>=0&&(y=y.slice(0,-1),a=!0),y.indexOf(".")>=0&&(b=y.split("."),y=b.shift(),b.sort());if((!s||v.event.customEvent[y])&&!v.event.global[y])return;n=typeof n=="object"?n[v.expando]?n:new v.Event(y,n):new v.Event(y),n.type=y,n.isTrigger=!0,n.exclusive=a,n.namespace=b.join("."),n.namespace_re=n.namespace?new RegExp("(^|\\.)"+b.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,h=y.indexOf(":")<0?"on"+y:"";if(!s){u=v.cache;for(f in u)u[f].events&&u[f].events[y]&&v.event.trigger(n,r,u[f].handle.elem,!0);return}n.result=t,n.target||(n.target=s),r=r!=null?v.makeArray(r):[],r.unshift(n),p=v.event.special[y]||{};if(p.trigger&&p.trigger.apply(s,r)===!1)return;m=[[s,p.bindType||y]];if(!o&&!p.noBubble&&!v.isWindow(s)){g=p.delegateType||y,l=Y.test(g+y)?s:s.parentNode;for(c=s;l;l=l.parentNode)m.push([l,g]),c=l;c===(s.ownerDocument||i)&&m.push([c.defaultView||c.parentWindow||e,g])}for(f=0;f<m.length&&!n.isPropagationStopped();f++)l=m[f][0],n.type=m[f][1],d=(v._data(l,"events")||{})[n.type]&&v._data(l,"handle"),d&&d.apply(l,r),d=h&&l[h],d&&v.acceptData(l)&&d.apply&&d.apply(l,r)===!1&&n.preventDefault();return n.type=y,!o&&!n.isDefaultPrevented()&&(!p._default||p._default.apply(s.ownerDocument,r)===!1)&&(y!=="click"||!v.nodeName(s,"a"))&&v.acceptData(s)&&h&&s[y]&&(y!=="focus"&&y!=="blur"||n.target.offsetWidth!==0)&&!v.isWindow(s)&&(c=s[h],c&&(s[h]=null),v.event.triggered=y,s[y](),v.event.triggered=t,c&&(s[h]=c)),n.result}return},dispatch:function(n){n=v.event.fix(n||e.event);var r,i,s,o,u,a,f,c,h,p,d=(v._data(this,"events")||{})[n.type]||[],m=d.delegateCount,g=l.call(arguments),y=!n.exclusive&&!n.namespace,b=v.event.special[n.type]||{},w=[];g[0]=n,n.delegateTarget=this;if(b.preDispatch&&b.preDispatch.call(this,n)===!1)return;if(m&&(!n.button||n.type!=="click"))for(s=n.target;s!=this;s=s.parentNode||this)if(s.disabled!==!0||n.type!=="click"){u={},f=[];for(r=0;r<m;r++)c=d[r],h=c.selector,u[h]===t&&(u[h]=c.needsContext?v(h,this).index(s)>=0:v.find(h,this,null,[s]).length),u[h]&&f.push(c);f.length&&w.push({elem:s,matches:f})}d.length>m&&w.push({elem:this,matches:d.slice(m)});for(r=0;r<w.length&&!n.isPropagationStopped();r++){a=w[r],n.currentTarget=a.elem;for(i=0;i<a.matches.length&&!n.isImmediatePropagationStopped();i++){c=a.matches[i];if(y||!n.namespace&&!c.namespace||n.namespace_re&&n.namespace_re.test(c.namespace))n.data=c.data,n.handleObj=c,o=((v.event.special[c.origType]||{}).handle||c.handler).apply(a.elem,g),o!==t&&(n.result=o,o===!1&&(n.preventDefault(),n.stopPropagation()))}}return b.postDispatch&&b.postDispatch.call(this,n),n.result},props:"attrChange attrName relatedNode srcElement altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return e.which==null&&(e.which=t.charCode!=null?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,n){var r,s,o,u=n.button,a=n.fromElement;return e.pageX==null&&n.clientX!=null&&(r=e.target.ownerDocument||i,s=r.documentElement,o=r.body,e.pageX=n.clientX+(s&&s.scrollLeft||o&&o.scrollLeft||0)-(s&&s.clientLeft||o&&o.clientLeft||0),e.pageY=n.clientY+(s&&s.scrollTop||o&&o.scrollTop||0)-(s&&s.clientTop||o&&o.clientTop||0)),!e.relatedTarget&&a&&(e.relatedTarget=a===e.target?n.toElement:a),!e.which&&u!==t&&(e.which=u&1?1:u&2?3:u&4?2:0),e}},fix:function(e){if(e[v.expando])return e;var t,n,r=e,s=v.event.fixHooks[e.type]||{},o=s.props?this.props.concat(s.props):this.props;e=v.Event(r);for(t=o.length;t;)n=o[--t],e[n]=r[n];return e.target||(e.target=r.srcElement||i),e.target.nodeType===3&&(e.target=e.target.parentNode),e.metaKey=!!e.metaKey,s.filter?s.filter(e,r):e},special:{load:{noBubble:!0},focus:{delegateType:"focusin"},blur:{delegateType:"focusout"},beforeunload:{setup:function(e,t,n){v.isWindow(this)&&(this.onbeforeunload=n)},teardown:function(e,t){this.onbeforeunload===t&&(this.onbeforeunload=null)}}},simulate:function(e,t,n,r){var i=v.extend(new v.Event,n,{type:e,isSimulated:!0,originalEvent:{}});r?v.event.trigger(i,null,t):v.event.dispatch.call(t,i),i.isDefaultPrevented()&&n.preventDefault()}},v.event.handle=v.event.dispatch,v.removeEvent=i.removeEventListener?function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n,!1)}:function(e,t,n){var r="on"+t;e.detachEvent&&(typeof e[r]=="undefined"&&(e[r]=null),e.detachEvent(r,n))},v.Event=function(e,t){if(!(this instanceof v.Event))return new v.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||e.returnValue===!1||e.getPreventDefault&&e.getPreventDefault()?tt:et):this.type=e,t&&v.extend(this,t),this.timeStamp=e&&e.timeStamp||v.now(),this[v.expando]=!0},v.Event.prototype={preventDefault:function(){this.isDefaultPrevented=tt;var e=this.originalEvent;if(!e)return;e.preventDefault?e.preventDefault():e.returnValue=!1},stopPropagation:function(){this.isPropagationStopped=tt;var e=this.originalEvent;if(!e)return;e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=tt,this.stopPropagation()},isDefaultPrevented:et,isPropagationStopped:et,isImmediatePropagationStopped:et},v.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(e,t){v.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,r=this,i=e.relatedTarget,s=e.handleObj,o=s.selector;if(!i||i!==r&&!v.contains(r,i))e.type=s.origType,n=s.handler.apply(this,arguments),e.type=t;return n}}}),v.support.submitBubbles||(v.event.special.submit={setup:function(){if(v.nodeName(this,"form"))return!1;v.event.add(this,"click._submit keypress._submit",function(e){var n=e.target,r=v.nodeName(n,"input")||v.nodeName(n,"button")?n.form:t;r&&!v._data(r,"_submit_attached")&&(v.event.add(r,"submit._submit",function(e){e._submit_bubble=!0}),v._data(r,"_submit_attached",!0))})},postDispatch:function(e){e._submit_bubble&&(delete e._submit_bubble,this.parentNode&&!e.isTrigger&&v.event.simulate("submit",this.parentNode,e,!0))},teardown:function(){if(v.nodeName(this,"form"))return!1;v.event.remove(this,"._submit")}}),v.support.changeBubbles||(v.event.special.change={setup:function(){if($.test(this.nodeName)){if(this.type==="checkbox"||this.type==="radio")v.event.add(this,"propertychange._change",function(e){e.originalEvent.propertyName==="checked"&&(this._just_changed=!0)}),v.event.add(this,"click._change",function(e){this._just_changed&&!e.isTrigger&&(this._just_changed=!1),v.event.simulate("change",this,e,!0)});return!1}v.event.add(this,"beforeactivate._change",function(e){var t=e.target;$.test(t.nodeName)&&!v._data(t,"_change_attached")&&(v.event.add(t,"change._change",function(e){this.parentNode&&!e.isSimulated&&!e.isTrigger&&v.event.simulate("change",this.parentNode,e,!0)}),v._data(t,"_change_attached",!0))})},handle:function(e){var t=e.target;if(this!==t||e.isSimulated||e.isTrigger||t.type!=="radio"&&t.type!=="checkbox")return e.handleObj.handler.apply(this,arguments)},teardown:function(){return v.event.remove(this,"._change"),!$.test(this.nodeName)}}),v.support.focusinBubbles||v.each({focus:"focusin",blur:"focusout"},function(e,t){var n=0,r=function(e){v.event.simulate(t,e.target,v.event.fix(e),!0)};v.event.special[t]={setup:function(){n++===0&&i.addEventListener(e,r,!0)},teardown:function(){--n===0&&i.removeEventListener(e,r,!0)}}}),v.fn.extend({on:function(e,n,r,i,s){var o,u;if(typeof e=="object"){typeof n!="string"&&(r=r||n,n=t);for(u in e)this.on(u,n,r,e[u],s);return this}r==null&&i==null?(i=n,r=n=t):i==null&&(typeof n=="string"?(i=r,r=t):(i=r,r=n,n=t));if(i===!1)i=et;else if(!i)return this;return s===1&&(o=i,i=function(e){return v().off(e),o.apply(this,arguments)},i.guid=o.guid||(o.guid=v.guid++)),this.each(function(){v.event.add(this,e,i,r,n)})},one:function(e,t,n,r){return this.on(e,t,n,r,1)},off:function(e,n,r){var i,s;if(e&&e.preventDefault&&e.handleObj)return i=e.handleObj,v(e.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler),this;if(typeof e=="object"){for(s in e)this.off(s,n,e[s]);return this}if(n===!1||typeof n=="function")r=n,n=t;return r===!1&&(r=et),this.each(function(){v.event.remove(this,e,r,n)})},bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},live:function(e,t,n){return v(this.context).on(e,this.selector,t,n),this},die:function(e,t){return v(this.context).off(e,this.selector||"**",t),this},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return arguments.length===1?this.off(e,"**"):this.off(t,e||"**",n)},trigger:function(e,t){return this.each(function(){v.event.trigger(e,t,this)})},triggerHandler:function(e,t){if(this[0])return v.event.trigger(e,t,this[0],!0)},toggle:function(e){var t=arguments,n=e.guid||v.guid++,r=0,i=function(n){var i=(v._data(this,"lastToggle"+e.guid)||0)%r;return v._data(this,"lastToggle"+e.guid,i+1),n.preventDefault(),t[i].apply(this,arguments)||!1};i.guid=n;while(r<t.length)t[r++].guid=n;return this.click(i)},hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),v.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){v.fn[t]=function(e,n){return n==null&&(n=e,e=null),arguments.length>0?this.on(t,null,e,n):this.trigger(t)},Q.test(t)&&(v.event.fixHooks[t]=v.event.keyHooks),G.test(t)&&(v.event.fixHooks[t]=v.event.mouseHooks)}),function(e,t){function nt(e,t,n,r){n=n||[],t=t||g;var i,s,a,f,l=t.nodeType;if(!e||typeof e!="string")return n;if(l!==1&&l!==9)return[];a=o(t);if(!a&&!r)if(i=R.exec(e))if(f=i[1]){if(l===9){s=t.getElementById(f);if(!s||!s.parentNode)return n;if(s.id===f)return n.push(s),n}else if(t.ownerDocument&&(s=t.ownerDocument.getElementById(f))&&u(t,s)&&s.id===f)return n.push(s),n}else{if(i[2])return S.apply(n,x.call(t.getElementsByTagName(e),0)),n;if((f=i[3])&&Z&&t.getElementsByClassName)return S.apply(n,x.call(t.getElementsByClassName(f),0)),n}return vt(e.replace(j,"$1"),t,n,r,a)}function rt(e){return function(t){var n=t.nodeName.toLowerCase();return n==="input"&&t.type===e}}function it(e){return function(t){var n=t.nodeName.toLowerCase();return(n==="input"||n==="button")&&t.type===e}}function st(e){return N(function(t){return t=+t,N(function(n,r){var i,s=e([],n.length,t),o=s.length;while(o--)n[i=s[o]]&&(n[i]=!(r[i]=n[i]))})})}function ot(e,t,n){if(e===t)return n;var r=e.nextSibling;while(r){if(r===t)return-1;r=r.nextSibling}return 1}function ut(e,t){var n,r,s,o,u,a,f,l=L[d][e+" "];if(l)return t?0:l.slice(0);u=e,a=[],f=i.preFilter;while(u){if(!n||(r=F.exec(u)))r&&(u=u.slice(r[0].length)||u),a.push(s=[]);n=!1;if(r=I.exec(u))s.push(n=new m(r.shift())),u=u.slice(n.length),n.type=r[0].replace(j," ");for(o in i.filter)(r=J[o].exec(u))&&(!f[o]||(r=f[o](r)))&&(s.push(n=new m(r.shift())),u=u.slice(n.length),n.type=o,n.matches=r);if(!n)break}return t?u.length:u?nt.error(e):L(e,a).slice(0)}function at(e,t,r){var i=t.dir,s=r&&t.dir==="parentNode",o=w++;return t.first?function(t,n,r){while(t=t[i])if(s||t.nodeType===1)return e(t,n,r)}:function(t,r,u){if(!u){var a,f=b+" "+o+" ",l=f+n;while(t=t[i])if(s||t.nodeType===1){if((a=t[d])===l)return t.sizset;if(typeof a=="string"&&a.indexOf(f)===0){if(t.sizset)return t}else{t[d]=l;if(e(t,r,u))return t.sizset=!0,t;t.sizset=!1}}}else while(t=t[i])if(s||t.nodeType===1)if(e(t,r,u))return t}}function ft(e){return e.length>1?function(t,n,r){var i=e.length;while(i--)if(!e[i](t,n,r))return!1;return!0}:e[0]}function lt(e,t,n,r,i){var s,o=[],u=0,a=e.length,f=t!=null;for(;u<a;u++)if(s=e[u])if(!n||n(s,r,i))o.push(s),f&&t.push(u);return o}function ct(e,t,n,r,i,s){return r&&!r[d]&&(r=ct(r)),i&&!i[d]&&(i=ct(i,s)),N(function(s,o,u,a){var f,l,c,h=[],p=[],d=o.length,v=s||dt(t||"*",u.nodeType?[u]:u,[]),m=e&&(s||!t)?lt(v,h,e,u,a):v,g=n?i||(s?e:d||r)?[]:o:m;n&&n(m,g,u,a);if(r){f=lt(g,p),r(f,[],u,a),l=f.length;while(l--)if(c=f[l])g[p[l]]=!(m[p[l]]=c)}if(s){if(i||e){if(i){f=[],l=g.length;while(l--)(c=g[l])&&f.push(m[l]=c);i(null,g=[],f,a)}l=g.length;while(l--)(c=g[l])&&(f=i?T.call(s,c):h[l])>-1&&(s[f]=!(o[f]=c))}}else g=lt(g===o?g.splice(d,g.length):g),i?i(null,o,g,a):S.apply(o,g)})}function ht(e){var t,n,r,s=e.length,o=i.relative[e[0].type],u=o||i.relative[" "],a=o?1:0,f=at(function(e){return e===t},u,!0),l=at(function(e){return T.call(t,e)>-1},u,!0),h=[function(e,n,r){return!o&&(r||n!==c)||((t=n).nodeType?f(e,n,r):l(e,n,r))}];for(;a<s;a++)if(n=i.relative[e[a].type])h=[at(ft(h),n)];else{n=i.filter[e[a].type].apply(null,e[a].matches);if(n[d]){r=++a;for(;r<s;r++)if(i.relative[e[r].type])break;return ct(a>1&&ft(h),a>1&&e.slice(0,a-1).join("").replace(j,"$1"),n,a<r&&ht(e.slice(a,r)),r<s&&ht(e=e.slice(r)),r<s&&e.join(""))}h.push(n)}return ft(h)}function pt(e,t){var r=t.length>0,s=e.length>0,o=function(u,a,f,l,h){var p,d,v,m=[],y=0,w="0",x=u&&[],T=h!=null,N=c,C=u||s&&i.find.TAG("*",h&&a.parentNode||a),k=b+=N==null?1:Math.E;T&&(c=a!==g&&a,n=o.el);for(;(p=C[w])!=null;w++){if(s&&p){for(d=0;v=e[d];d++)if(v(p,a,f)){l.push(p);break}T&&(b=k,n=++o.el)}r&&((p=!v&&p)&&y--,u&&x.push(p))}y+=w;if(r&&w!==y){for(d=0;v=t[d];d++)v(x,m,a,f);if(u){if(y>0)while(w--)!x[w]&&!m[w]&&(m[w]=E.call(l));m=lt(m)}S.apply(l,m),T&&!u&&m.length>0&&y+t.length>1&&nt.uniqueSort(l)}return T&&(b=k,c=N),x};return o.el=0,r?N(o):o}function dt(e,t,n){var r=0,i=t.length;for(;r<i;r++)nt(e,t[r],n);return n}function vt(e,t,n,r,s){var o,u,f,l,c,h=ut(e),p=h.length;if(!r&&h.length===1){u=h[0]=h[0].slice(0);if(u.length>2&&(f=u[0]).type==="ID"&&t.nodeType===9&&!s&&i.relative[u[1].type]){t=i.find.ID(f.matches[0].replace($,""),t,s)[0];if(!t)return n;e=e.slice(u.shift().length)}for(o=J.POS.test(e)?-1:u.length-1;o>=0;o--){f=u[o];if(i.relative[l=f.type])break;if(c=i.find[l])if(r=c(f.matches[0].replace($,""),z.test(u[0].type)&&t.parentNode||t,s)){u.splice(o,1),e=r.length&&u.join("");if(!e)return S.apply(n,x.call(r,0)),n;break}}}return a(e,h)(r,t,s,n,z.test(e)),n}function mt(){}var n,r,i,s,o,u,a,f,l,c,h=!0,p="undefined",d=("sizcache"+Math.random()).replace(".",""),m=String,g=e.document,y=g.documentElement,b=0,w=0,E=[].pop,S=[].push,x=[].slice,T=[].indexOf||function(e){var t=0,n=this.length;for(;t<n;t++)if(this[t]===e)return t;return-1},N=function(e,t){return e[d]=t==null||t,e},C=function(){var e={},t=[];return N(function(n,r){return t.push(n)>i.cacheLength&&delete e[t.shift()],e[n+" "]=r},e)},k=C(),L=C(),A=C(),O="[\\x20\\t\\r\\n\\f]",M="(?:\\\\.|[-\\w]|[^\\x00-\\xa0])+",_=M.replace("w","w#"),D="([*^$|!~]?=)",P="\\["+O+"*("+M+")"+O+"*(?:"+D+O+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+_+")|)|)"+O+"*\\]",H=":("+M+")(?:\\((?:(['\"])((?:\\\\.|[^\\\\])*?)\\2|([^()[\\]]*|(?:(?:"+P+")|[^:]|\\\\.)*|.*))\\)|)",B=":(even|odd|eq|gt|lt|nth|first|last)(?:\\("+O+"*((?:-\\d)?\\d*)"+O+"*\\)|)(?=[^-]|$)",j=new RegExp("^"+O+"+|((?:^|[^\\\\])(?:\\\\.)*)"+O+"+$","g"),F=new RegExp("^"+O+"*,"+O+"*"),I=new RegExp("^"+O+"*([\\x20\\t\\r\\n\\f>+~])"+O+"*"),q=new RegExp(H),R=/^(?:#([\w\-]+)|(\w+)|\.([\w\-]+))$/,U=/^:not/,z=/[\x20\t\r\n\f]*[+~]/,W=/:not\($/,X=/h\d/i,V=/input|select|textarea|button/i,$=/\\(?!\\)/g,J={ID:new RegExp("^#("+M+")"),CLASS:new RegExp("^\\.("+M+")"),NAME:new RegExp("^\\[name=['\"]?("+M+")['\"]?\\]"),TAG:new RegExp("^("+M.replace("w","w*")+")"),ATTR:new RegExp("^"+P),PSEUDO:new RegExp("^"+H),POS:new RegExp(B,"i"),CHILD:new RegExp("^:(only|nth|first|last)-child(?:\\("+O+"*(even|odd|(([+-]|)(\\d*)n|)"+O+"*(?:([+-]|)"+O+"*(\\d+)|))"+O+"*\\)|)","i"),needsContext:new RegExp("^"+O+"*[>+~]|"+B,"i")},K=function(e){var t=g.createElement("div");try{return e(t)}catch(n){return!1}finally{t=null}},Q=K(function(e){return e.appendChild(g.createComment("")),!e.getElementsByTagName("*").length}),G=K(function(e){return e.innerHTML="<a href='#'></a>",e.firstChild&&typeof e.firstChild.getAttribute!==p&&e.firstChild.getAttribute("href")==="#"}),Y=K(function(e){e.innerHTML="<select></select>";var t=typeof e.lastChild.getAttribute("multiple");return t!=="boolean"&&t!=="string"}),Z=K(function(e){return e.innerHTML="<div class='hidden e'></div><div class='hidden'></div>",!e.getElementsByClassName||!e.getElementsByClassName("e").length?!1:(e.lastChild.className="e",e.getElementsByClassName("e").length===2)}),et=K(function(e){e.id=d+0,e.innerHTML="<a name='"+d+"'></a><div name='"+d+"'></div>",y.insertBefore(e,y.firstChild);var t=g.getElementsByName&&g.getElementsByName(d).length===2+g.getElementsByName(d+0).length;return r=!g.getElementById(d),y.removeChild(e),t});try{x.call(y.childNodes,0)[0].nodeType}catch(tt){x=function(e){var t,n=[];for(;t=this[e];e++)n.push(t);return n}}nt.matches=function(e,t){return nt(e,null,null,t)},nt.matchesSelector=function(e,t){return nt(t,null,null,[e]).length>0},s=nt.getText=function(e){var t,n="",r=0,i=e.nodeType;if(i){if(i===1||i===9||i===11){if(typeof e.textContent=="string")return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=s(e)}else if(i===3||i===4)return e.nodeValue}else for(;t=e[r];r++)n+=s(t);return n},o=nt.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return t?t.nodeName!=="HTML":!1},u=nt.contains=y.contains?function(e,t){var n=e.nodeType===9?e.documentElement:e,r=t&&t.parentNode;return e===r||!!(r&&r.nodeType===1&&n.contains&&n.contains(r))}:y.compareDocumentPosition?function(e,t){return t&&!!(e.compareDocumentPosition(t)&16)}:function(e,t){while(t=t.parentNode)if(t===e)return!0;return!1},nt.attr=function(e,t){var n,r=o(e);return r||(t=t.toLowerCase()),(n=i.attrHandle[t])?n(e):r||Y?e.getAttribute(t):(n=e.getAttributeNode(t),n?typeof e[t]=="boolean"?e[t]?t:null:n.specified?n.value:null:null)},i=nt.selectors={cacheLength:50,createPseudo:N,match:J,attrHandle:G?{}:{href:function(e){return e.getAttribute("href",2)},type:function(e){return e.getAttribute("type")}},find:{ID:r?function(e,t,n){if(typeof t.getElementById!==p&&!n){var r=t.getElementById(e);return r&&r.parentNode?[r]:[]}}:function(e,n,r){if(typeof n.getElementById!==p&&!r){var i=n.getElementById(e);return i?i.id===e||typeof i.getAttributeNode!==p&&i.getAttributeNode("id").value===e?[i]:t:[]}},TAG:Q?function(e,t){if(typeof t.getElementsByTagName!==p)return t.getElementsByTagName(e)}:function(e,t){var n=t.getElementsByTagName(e);if(e==="*"){var r,i=[],s=0;for(;r=n[s];s++)r.nodeType===1&&i.push(r);return i}return n},NAME:et&&function(e,t){if(typeof t.getElementsByName!==p)return t.getElementsByName(name)},CLASS:Z&&function(e,t,n){if(typeof t.getElementsByClassName!==p&&!n)return t.getElementsByClassName(e)}},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace($,""),e[3]=(e[4]||e[5]||"").replace($,""),e[2]==="~="&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),e[1]==="nth"?(e[2]||nt.error(e[0]),e[3]=+(e[3]?e[4]+(e[5]||1):2*(e[2]==="even"||e[2]==="odd")),e[4]=+(e[6]+e[7]||e[2]==="odd")):e[2]&&nt.error(e[0]),e},PSEUDO:function(e){var t,n;if(J.CHILD.test(e[0]))return null;if(e[3])e[2]=e[3];else if(t=e[4])q.test(t)&&(n=ut(t,!0))&&(n=t.indexOf(")",t.length-n)-t.length)&&(t=t.slice(0,n),e[0]=e[0].slice(0,n)),e[2]=t;return e.slice(0,3)}},filter:{ID:r?function(e){return e=e.replace($,""),function(t){return t.getAttribute("id")===e}}:function(e){return e=e.replace($,""),function(t){var n=typeof t.getAttributeNode!==p&&t.getAttributeNode("id");return n&&n.value===e}},TAG:function(e){return e==="*"?function(){return!0}:(e=e.replace($,"").toLowerCase(),function(t){return t.nodeName&&t.nodeName.toLowerCase()===e})},CLASS:function(e){var t=k[d][e+" "];return t||(t=new RegExp("(^|"+O+")"+e+"("+O+"|$)"))&&k(e,function(e){return t.test(e.className||typeof e.getAttribute!==p&&e.getAttribute("class")||"")})},ATTR:function(e,t,n){return function(r,i){var s=nt.attr(r,e);return s==null?t==="!=":t?(s+="",t==="="?s===n:t==="!="?s!==n:t==="^="?n&&s.indexOf(n)===0:t==="*="?n&&s.indexOf(n)>-1:t==="$="?n&&s.substr(s.length-n.length)===n:t==="~="?(" "+s+" ").indexOf(n)>-1:t==="|="?s===n||s.substr(0,n.length+1)===n+"-":!1):!0}},CHILD:function(e,t,n,r){return e==="nth"?function(e){var t,i,s=e.parentNode;if(n===1&&r===0)return!0;if(s){i=0;for(t=s.firstChild;t;t=t.nextSibling)if(t.nodeType===1){i++;if(e===t)break}}return i-=r,i===n||i%n===0&&i/n>=0}:function(t){var n=t;switch(e){case"only":case"first":while(n=n.previousSibling)if(n.nodeType===1)return!1;if(e==="first")return!0;n=t;case"last":while(n=n.nextSibling)if(n.nodeType===1)return!1;return!0}}},PSEUDO:function(e,t){var n,r=i.pseudos[e]||i.setFilters[e.toLowerCase()]||nt.error("unsupported pseudo: "+e);return r[d]?r(t):r.length>1?(n=[e,e,"",t],i.setFilters.hasOwnProperty(e.toLowerCase())?N(function(e,n){var i,s=r(e,t),o=s.length;while(o--)i=T.call(e,s[o]),e[i]=!(n[i]=s[o])}):function(e){return r(e,0,n)}):r}},pseudos:{not:N(function(e){var t=[],n=[],r=a(e.replace(j,"$1"));return r[d]?N(function(e,t,n,i){var s,o=r(e,null,i,[]),u=e.length;while(u--)if(s=o[u])e[u]=!(t[u]=s)}):function(e,i,s){return t[0]=e,r(t,null,s,n),!n.pop()}}),has:N(function(e){return function(t){return nt(e,t).length>0}}),contains:N(function(e){return function(t){return(t.textContent||t.innerText||s(t)).indexOf(e)>-1}}),enabled:function(e){return e.disabled===!1},disabled:function(e){return e.disabled===!0},checked:function(e){var t=e.nodeName.toLowerCase();return t==="input"&&!!e.checked||t==="option"&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},parent:function(e){return!i.pseudos.empty(e)},empty:function(e){var t;e=e.firstChild;while(e){if(e.nodeName>"@"||(t=e.nodeType)===3||t===4)return!1;e=e.nextSibling}return!0},header:function(e){return X.test(e.nodeName)},text:function(e){var t,n;return e.nodeName.toLowerCase()==="input"&&(t=e.type)==="text"&&((n=e.getAttribute("type"))==null||n.toLowerCase()===t)},radio:rt("radio"),checkbox:rt("checkbox"),file:rt("file"),password:rt("password"),image:rt("image"),submit:it("submit"),reset:it("reset"),button:function(e){var t=e.nodeName.toLowerCase();return t==="input"&&e.type==="button"||t==="button"},input:function(e){return V.test(e.nodeName)},focus:function(e){var t=e.ownerDocument;return e===t.activeElement&&(!t.hasFocus||t.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},active:function(e){return e===e.ownerDocument.activeElement},first:st(function(){return[0]}),last:st(function(e,t){return[t-1]}),eq:st(function(e,t,n){return[n<0?n+t:n]}),even:st(function(e,t){for(var n=0;n<t;n+=2)e.push(n);return e}),odd:st(function(e,t){for(var n=1;n<t;n+=2)e.push(n);return e}),lt:st(function(e,t,n){for(var r=n<0?n+t:n;--r>=0;)e.push(r);return e}),gt:st(function(e,t,n){for(var r=n<0?n+t:n;++r<t;)e.push(r);return e})}},f=y.compareDocumentPosition?function(e,t){return e===t?(l=!0,0):(!e.compareDocumentPosition||!t.compareDocumentPosition?e.compareDocumentPosition:e.compareDocumentPosition(t)&4)?-1:1}:function(e,t){if(e===t)return l=!0,0;if(e.sourceIndex&&t.sourceIndex)return e.sourceIndex-t.sourceIndex;var n,r,i=[],s=[],o=e.parentNode,u=t.parentNode,a=o;if(o===u)return ot(e,t);if(!o)return-1;if(!u)return 1;while(a)i.unshift(a),a=a.parentNode;a=u;while(a)s.unshift(a),a=a.parentNode;n=i.length,r=s.length;for(var f=0;f<n&&f<r;f++)if(i[f]!==s[f])return ot(i[f],s[f]);return f===n?ot(e,s[f],-1):ot(i[f],t,1)},[0,0].sort(f),h=!l,nt.uniqueSort=function(e){var t,n=[],r=1,i=0;l=h,e.sort(f);if(l){for(;t=e[r];r++)t===e[r-1]&&(i=n.push(r));while(i--)e.splice(n[i],1)}return e},nt.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},a=nt.compile=function(e,t){var n,r=[],i=[],s=A[d][e+" "];if(!s){t||(t=ut(e)),n=t.length;while(n--)s=ht(t[n]),s[d]?r.push(s):i.push(s);s=A(e,pt(i,r))}return s},g.querySelectorAll&&function(){var e,t=vt,n=/'|\\/g,r=/\=[\x20\t\r\n\f]*([^'"\]]*)[\x20\t\r\n\f]*\]/g,i=[":focus"],s=[":active"],u=y.matchesSelector||y.mozMatchesSelector||y.webkitMatchesSelector||y.oMatchesSelector||y.msMatchesSelector;K(function(e){e.innerHTML="<select><option selected=''></option></select>",e.querySelectorAll("[selected]").length||i.push("\\["+O+"*(?:checked|disabled|ismap|multiple|readonly|selected|value)"),e.querySelectorAll(":checked").length||i.push(":checked")}),K(function(e){e.innerHTML="<p test=''></p>",e.querySelectorAll("[test^='']").length&&i.push("[*^$]="+O+"*(?:\"\"|'')"),e.innerHTML="<input type='hidden'/>",e.querySelectorAll(":enabled").length||i.push(":enabled",":disabled")}),i=new RegExp(i.join("|")),vt=function(e,r,s,o,u){if(!o&&!u&&!i.test(e)){var a,f,l=!0,c=d,h=r,p=r.nodeType===9&&e;if(r.nodeType===1&&r.nodeName.toLowerCase()!=="object"){a=ut(e),(l=r.getAttribute("id"))?c=l.replace(n,"\\$&"):r.setAttribute("id",c),c="[id='"+c+"'] ",f=a.length;while(f--)a[f]=c+a[f].join("");h=z.test(e)&&r.parentNode||r,p=a.join(",")}if(p)try{return S.apply(s,x.call(h.querySelectorAll(p),0)),s}catch(v){}finally{l||r.removeAttribute("id")}}return t(e,r,s,o,u)},u&&(K(function(t){e=u.call(t,"div");try{u.call(t,"[test!='']:sizzle"),s.push("!=",H)}catch(n){}}),s=new RegExp(s.join("|")),nt.matchesSelector=function(t,n){n=n.replace(r,"='$1']");if(!o(t)&&!s.test(n)&&!i.test(n))try{var a=u.call(t,n);if(a||e||t.document&&t.document.nodeType!==11)return a}catch(f){}return nt(n,null,null,[t]).length>0})}(),i.pseudos.nth=i.pseudos.eq,i.filters=mt.prototype=i.pseudos,i.setFilters=new mt,nt.attr=v.attr,v.find=nt,v.expr=nt.selectors,v.expr[":"]=v.expr.pseudos,v.unique=nt.uniqueSort,v.text=nt.getText,v.isXMLDoc=nt.isXML,v.contains=nt.contains}(e);var nt=/Until$/,rt=/^(?:parents|prev(?:Until|All))/,it=/^.[^:#\[\.,]*$/,st=v.expr.match.needsContext,ot={children:!0,contents:!0,next:!0,prev:!0};v.fn.extend({find:function(e){var t,n,r,i,s,o,u=this;if(typeof e!="string")return v(e).filter(function(){for(t=0,n=u.length;t<n;t++)if(v.contains(u[t],this))return!0});o=this.pushStack("","find",e);for(t=0,n=this.length;t<n;t++){r=o.length,v.find(e,this[t],o);if(t>0)for(i=r;i<o.length;i++)for(s=0;s<r;s++)if(o[s]===o[i]){o.splice(i--,1);break}}return o},has:function(e){var t,n=v(e,this),r=n.length;return this.filter(function(){for(t=0;t<r;t++)if(v.contains(this,n[t]))return!0})},not:function(e){return this.pushStack(ft(this,e,!1),"not",e)},filter:function(e){return this.pushStack(ft(this,e,!0),"filter",e)},is:function(e){return!!e&&(typeof e=="string"?st.test(e)?v(e,this.context).index(this[0])>=0:v.filter(e,this).length>0:this.filter(e).length>0)},closest:function(e,t){var n,r=0,i=this.length,s=[],o=st.test(e)||typeof e!="string"?v(e,t||this.context):0;for(;r<i;r++){n=this[r];while(n&&n.ownerDocument&&n!==t&&n.nodeType!==11){if(o?o.index(n)>-1:v.find.matchesSelector(n,e)){s.push(n);break}n=n.parentNode}}return s=s.length>1?v.unique(s):s,this.pushStack(s,"closest",e)},index:function(e){return e?typeof e=="string"?v.inArray(this[0],v(e)):v.inArray(e.jquery?e[0]:e,this):this[0]&&this[0].parentNode?this.prevAll().length:-1},add:function(e,t){var n=typeof e=="string"?v(e,t):v.makeArray(e&&e.nodeType?[e]:e),r=v.merge(this.get(),n);return this.pushStack(ut(n[0])||ut(r[0])?r:v.unique(r))},addBack:function(e){return this.add(e==null?this.prevObject:this.prevObject.filter(e))}}),v.fn.andSelf=v.fn.addBack,v.each({parent:function(e){var t=e.parentNode;return t&&t.nodeType!==11?t:null},parents:function(e){return v.dir(e,"parentNode")},parentsUntil:function(e,t,n){return v.dir(e,"parentNode",n)},next:function(e){return at(e,"nextSibling")},prev:function(e){return at(e,"previousSibling")},nextAll:function(e){return v.dir(e,"nextSibling")},prevAll:function(e){return v.dir(e,"previousSibling")},nextUntil:function(e,t,n){return v.dir(e,"nextSibling",n)},prevUntil:function(e,t,n){return v.dir(e,"previousSibling",n)},siblings:function(e){return v.sibling((e.parentNode||{}).firstChild,e)},children:function(e){return v.sibling(e.firstChild)},contents:function(e){return v.nodeName(e,"iframe")?e.contentDocument||e.contentWindow.document:v.merge([],e.childNodes)}},function(e,t){v.fn[e]=function(n,r){var i=v.map(this,t,n);return nt.test(e)||(r=n),r&&typeof r=="string"&&(i=v.filter(r,i)),i=this.length>1&&!ot[e]?v.unique(i):i,this.length>1&&rt.test(e)&&(i=i.reverse()),this.pushStack(i,e,l.call(arguments).join(","))}}),v.extend({filter:function(e,t,n){return n&&(e=":not("+e+")"),t.length===1?v.find.matchesSelector(t[0],e)?[t[0]]:[]:v.find.matches(e,t)},dir:function(e,n,r){var i=[],s=e[n];while(s&&s.nodeType!==9&&(r===t||s.nodeType!==1||!v(s).is(r)))s.nodeType===1&&i.push(s),s=s[n];return i},sibling:function(e,t){var n=[];for(;e;e=e.nextSibling)e.nodeType===1&&e!==t&&n.push(e);return n}});var ct="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",ht=/ jQuery\d+="(?:null|\d+)"/g,pt=/^\s+/,dt=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,vt=/<([\w:]+)/,mt=/<tbody/i,gt=/<|&#?\w+;/,yt=/<(?:script|style|link)/i,bt=/<(?:script|object|embed|option|style)/i,wt=new RegExp("<(?:"+ct+")[\\s/>]","i"),Et=/^(?:checkbox|radio)$/,St=/checked\s*(?:[^=]|=\s*.checked.)/i,xt=/\/(java|ecma)script/i,Tt=/^\s*<!(?:\[CDATA\[|\-\-)|[\]\-]{2}>\s*$/g,Nt={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"],_default:[0,"",""]},Ct=lt(i),kt=Ct.appendChild(i.createElement("div"));Nt.optgroup=Nt.option,Nt.tbody=Nt.tfoot=Nt.colgroup=Nt.caption=Nt.thead,Nt.th=Nt.td,v.support.htmlSerialize||(Nt._default=[1,"X<div>","</div>"]),v.fn.extend({text:function(e){return v.access(this,function(e){return e===t?v.text(this):this.empty().append((this[0]&&this[0].ownerDocument||i).createTextNode(e))},null,e,arguments.length)},wrapAll:function(e){if(v.isFunction(e))return this.each(function(t){v(this).wrapAll(e.call(this,t))});if(this[0]){var t=v(e,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){var e=this;while(e.firstChild&&e.firstChild.nodeType===1)e=e.firstChild;return e}).append(this)}return this},wrapInner:function(e){return v.isFunction(e)?this.each(function(t){v(this).wrapInner(e.call(this,t))}):this.each(function(){var t=v(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=v.isFunction(e);return this.each(function(n){v(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(){return this.parent().each(function(){v.nodeName(this,"body")||v(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,!0,function(e){(this.nodeType===1||this.nodeType===11)&&this.appendChild(e)})},prepend:function(){return this.domManip(arguments,!0,function(e){(this.nodeType===1||this.nodeType===11)&&this.insertBefore(e,this.firstChild)})},before:function(){if(!ut(this[0]))return this.domManip(arguments,!1,function(e){this.parentNode.insertBefore(e,this)});if(arguments.length){var e=v.clean(arguments);return this.pushStack(v.merge(e,this),"before",this.selector)}},after:function(){if(!ut(this[0]))return this.domManip(arguments,!1,function(e){this.parentNode.insertBefore(e,this.nextSibling)});if(arguments.length){var e=v.clean(arguments);return this.pushStack(v.merge(this,e),"after",this.selector)}},remove:function(e,t){var n,r=0;for(;(n=this[r])!=null;r++)if(!e||v.filter(e,[n]).length)!t&&n.nodeType===1&&(v.cleanData(n.getElementsByTagName("*")),v.cleanData([n])),n.parentNode&&n.parentNode.removeChild(n);return this},empty:function(){var e,t=0;for(;(e=this[t])!=null;t++){e.nodeType===1&&v.cleanData(e.getElementsByTagName("*"));while(e.firstChild)e.removeChild(e.firstChild)}return this},clone:function(e,t){return e=e==null?!1:e,t=t==null?e:t,this.map(function(){return v.clone(this,e,t)})},html:function(e){return v.access(this,function(e){var n=this[0]||{},r=0,i=this.length;if(e===t)return n.nodeType===1?n.innerHTML.replace(ht,""):t;if(typeof e=="string"&&!yt.test(e)&&(v.support.htmlSerialize||!wt.test(e))&&(v.support.leadingWhitespace||!pt.test(e))&&!Nt[(vt.exec(e)||["",""])[1].toLowerCase()]){e=e.replace(dt,"<$1></$2>");try{for(;r<i;r++)n=this[r]||{},n.nodeType===1&&(v.cleanData(n.getElementsByTagName("*")),n.innerHTML=e);n=0}catch(s){}}n&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(e){return ut(this[0])?this.length?this.pushStack(v(v.isFunction(e)?e():e),"replaceWith",e):this:v.isFunction(e)?this.each(function(t){var n=v(this),r=n.html();n.replaceWith(e.call(this,t,r))}):(typeof e!="string"&&(e=v(e).detach()),this.each(function(){var t=this.nextSibling,n=this.parentNode;v(this).remove(),t?v(t).before(e):v(n).append(e)}))},detach:function(e){return this.remove(e,!0)},domManip:function(e,n,r){e=[].concat.apply([],e);var i,s,o,u,a=0,f=e[0],l=[],c=this.length;if(!v.support.checkClone&&c>1&&typeof f=="string"&&St.test(f))return this.each(function(){v(this).domManip(e,n,r)});if(v.isFunction(f))return this.each(function(i){var s=v(this);e[0]=f.call(this,i,n?s.html():t),s.domManip(e,n,r)});if(this[0]){i=v.buildFragment(e,this,l),o=i.fragment,s=o.firstChild,o.childNodes.length===1&&(o=s);if(s){n=n&&v.nodeName(s,"tr");for(u=i.cacheable||c-1;a<c;a++)r.call(n&&v.nodeName(this[a],"table")?Lt(this[a],"tbody"):this[a],a===u?o:v.clone(o,!0,!0))}o=s=null,l.length&&v.each(l,function(e,t){t.src?v.ajax?v.ajax({url:t.src,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0}):v.error("no ajax"):v.globalEval((t.text||t.textContent||t.innerHTML||"").replace(Tt,"")),t.parentNode&&t.parentNode.removeChild(t)})}return this}}),v.buildFragment=function(e,n,r){var s,o,u,a=e[0];return n=n||i,n=!n.nodeType&&n[0]||n,n=n.ownerDocument||n,e.length===1&&typeof a=="string"&&a.length<512&&n===i&&a.charAt(0)==="<"&&!bt.test(a)&&(v.support.checkClone||!St.test(a))&&(v.support.html5Clone||!wt.test(a))&&(o=!0,s=v.fragments[a],u=s!==t),s||(s=n.createDocumentFragment(),v.clean(e,n,s,r),o&&(v.fragments[a]=u&&s)),{fragment:s,cacheable:o}},v.fragments={},v.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){v.fn[e]=function(n){var r,i=0,s=[],o=v(n),u=o.length,a=this.length===1&&this[0].parentNode;if((a==null||a&&a.nodeType===11&&a.childNodes.length===1)&&u===1)return o[t](this[0]),this;for(;i<u;i++)r=(i>0?this.clone(!0):this).get(),v(o[i])[t](r),s=s.concat(r);return this.pushStack(s,e,o.selector)}}),v.extend({clone:function(e,t,n){var r,i,s,o;v.support.html5Clone||v.isXMLDoc(e)||!wt.test("<"+e.nodeName+">")?o=e.cloneNode(!0):(kt.innerHTML=e.outerHTML,kt.removeChild(o=kt.firstChild));if((!v.support.noCloneEvent||!v.support.noCloneChecked)&&(e.nodeType===1||e.nodeType===11)&&!v.isXMLDoc(e)){Ot(e,o),r=Mt(e),i=Mt(o);for(s=0;r[s];++s)i[s]&&Ot(r[s],i[s])}if(t){At(e,o);if(n){r=Mt(e),i=Mt(o);for(s=0;r[s];++s)At(r[s],i[s])}}return r=i=null,o},clean:function(e,t,n,r){var s,o,u,a,f,l,c,h,p,d,m,g,y=t===i&&Ct,b=[];if(!t||typeof t.createDocumentFragment=="undefined")t=i;for(s=0;(u=e[s])!=null;s++){typeof u=="number"&&(u+="");if(!u)continue;if(typeof u=="string")if(!gt.test(u))u=t.createTextNode(u);else{y=y||lt(t),c=t.createElement("div"),y.appendChild(c),u=u.replace(dt,"<$1></$2>"),a=(vt.exec(u)||["",""])[1].toLowerCase(),f=Nt[a]||Nt._default,l=f[0],c.innerHTML=f[1]+u+f[2];while(l--)c=c.lastChild;if(!v.support.tbody){h=mt.test(u),p=a==="table"&&!h?c.firstChild&&c.firstChild.childNodes:f[1]==="<table>"&&!h?c.childNodes:[];for(o=p.length-1;o>=0;--o)v.nodeName(p[o],"tbody")&&!p[o].childNodes.length&&p[o].parentNode.removeChild(p[o])}!v.support.leadingWhitespace&&pt.test(u)&&c.insertBefore(t.createTextNode(pt.exec(u)[0]),c.firstChild),u=c.childNodes,c.parentNode.removeChild(c)}u.nodeType?b.push(u):v.merge(b,u)}c&&(u=c=y=null);if(!v.support.appendChecked)for(s=0;(u=b[s])!=null;s++)v.nodeName(u,"input")?_t(u):typeof u.getElementsByTagName!="undefined"&&v.grep(u.getElementsByTagName("input"),_t);if(n){m=function(e){if(!e.type||xt.test(e.type))return r?r.push(e.parentNode?e.parentNode.removeChild(e):e):n.appendChild(e)};for(s=0;(u=b[s])!=null;s++)if(!v.nodeName(u,"script")||!m(u))n.appendChild(u),typeof u.getElementsByTagName!="undefined"&&(g=v.grep(v.merge([],u.getElementsByTagName("script")),m),b.splice.apply(b,[s+1,0].concat(g)),s+=g.length)}return b},cleanData:function(e,t){var n,r,i,s,o=0,u=v.expando,a=v.cache,f=v.support.deleteExpando,l=v.event.special;for(;(i=e[o])!=null;o++)if(t||v.acceptData(i)){r=i[u],n=r&&a[r];if(n){if(n.events)for(s in n.events)l[s]?v.event.remove(i,s):v.removeEvent(i,s,n.handle);a[r]&&(delete a[r],f?delete i[u]:i.removeAttribute?i.removeAttribute(u):i[u]=null,v.deletedIds.push(r))}}}}),function(){var e,t;v.uaMatch=function(e){e=e.toLowerCase();var t=/(chrome)[ \/]([\w.]+)/.exec(e)||/(webkit)[ \/]([\w.]+)/.exec(e)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(e)||/(msie) ([\w.]+)/.exec(e)||e.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(e)||[];return{browser:t[1]||"",version:t[2]||"0"}},e=v.uaMatch(o.userAgent),t={},e.browser&&(t[e.browser]=!0,t.version=e.version),t.chrome?t.webkit=!0:t.webkit&&(t.safari=!0),v.browser=t,v.sub=function(){function e(t,n){return new e.fn.init(t,n)}v.extend(!0,e,this),e.superclass=this,e.fn=e.prototype=this(),e.fn.constructor=e,e.sub=this.sub,e.fn.init=function(r,i){return i&&i instanceof v&&!(i instanceof e)&&(i=e(i)),v.fn.init.call(this,r,i,t)},e.fn.init.prototype=e.fn;var t=e(i);return e}}();var Dt,Pt,Ht,Bt=/alpha\([^)]*\)/i,jt=/opacity=([^)]*)/,Ft=/^(top|right|bottom|left)$/,It=/^(none|table(?!-c[ea]).+)/,qt=/^margin/,Rt=new RegExp("^("+m+")(.*)$","i"),Ut=new RegExp("^("+m+")(?!px)[a-z%]+$","i"),zt=new RegExp("^([-+])=("+m+")","i"),Wt={BODY:"block"},Xt={position:"absolute",visibility:"hidden",display:"block"},Vt={letterSpacing:0,fontWeight:400},$t=["Top","Right","Bottom","Left"],Jt=["Webkit","O","Moz","ms"],Kt=v.fn.toggle;v.fn.extend({css:function(e,n){return v.access(this,function(e,n,r){return r!==t?v.style(e,n,r):v.css(e,n)},e,n,arguments.length>1)},show:function(){return Yt(this,!0)},hide:function(){return Yt(this)},toggle:function(e,t){var n=typeof e=="boolean";return v.isFunction(e)&&v.isFunction(t)?Kt.apply(this,arguments):this.each(function(){(n?e:Gt(this))?v(this).show():v(this).hide()})}}),v.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=Dt(e,"opacity");return n===""?"1":n}}}},cssNumber:{fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":v.support.cssFloat?"cssFloat":"styleFloat"},style:function(e,n,r,i){if(!e||e.nodeType===3||e.nodeType===8||!e.style)return;var s,o,u,a=v.camelCase(n),f=e.style;n=v.cssProps[a]||(v.cssProps[a]=Qt(f,a)),u=v.cssHooks[n]||v.cssHooks[a];if(r===t)return u&&"get"in u&&(s=u.get(e,!1,i))!==t?s:f[n];o=typeof r,o==="string"&&(s=zt.exec(r))&&(r=(s[1]+1)*s[2]+parseFloat(v.css(e,n)),o="number");if(r==null||o==="number"&&isNaN(r))return;o==="number"&&!v.cssNumber[a]&&(r+="px");if(!u||!("set"in u)||(r=u.set(e,r,i))!==t)try{f[n]=r}catch(l){}},css:function(e,n,r,i){var s,o,u,a=v.camelCase(n);return n=v.cssProps[a]||(v.cssProps[a]=Qt(e.style,a)),u=v.cssHooks[n]||v.cssHooks[a],u&&"get"in u&&(s=u.get(e,!0,i)),s===t&&(s=Dt(e,n)),s==="normal"&&n in Vt&&(s=Vt[n]),r||i!==t?(o=parseFloat(s),r||v.isNumeric(o)?o||0:s):s},swap:function(e,t,n){var r,i,s={};for(i in t)s[i]=e.style[i],e.style[i]=t[i];r=n.call(e);for(i in t)e.style[i]=s[i];return r}}),e.getComputedStyle?Dt=function(t,n){var r,i,s,o,u=e.getComputedStyle(t,null),a=t.style;return u&&(r=u.getPropertyValue(n)||u[n],r===""&&!v.contains(t.ownerDocument,t)&&(r=v.style(t,n)),Ut.test(r)&&qt.test(n)&&(i=a.width,s=a.minWidth,o=a.maxWidth,a.minWidth=a.maxWidth=a.width=r,r=u.width,a.width=i,a.minWidth=s,a.maxWidth=o)),r}:i.documentElement.currentStyle&&(Dt=function(e,t){var n,r,i=e.currentStyle&&e.currentStyle[t],s=e.style;return i==null&&s&&s[t]&&(i=s[t]),Ut.test(i)&&!Ft.test(t)&&(n=s.left,r=e.runtimeStyle&&e.runtimeStyle.left,r&&(e.runtimeStyle.left=e.currentStyle.left),s.left=t==="fontSize"?"1em":i,i=s.pixelLeft+"px",s.left=n,r&&(e.runtimeStyle.left=r)),i===""?"auto":i}),v.each(["height","width"],function(e,t){v.cssHooks[t]={get:function(e,n,r){if(n)return e.offsetWidth===0&&It.test(Dt(e,"display"))?v.swap(e,Xt,function(){return tn(e,t,r)}):tn(e,t,r)},set:function(e,n,r){return Zt(e,n,r?en(e,t,r,v.support.boxSizing&&v.css(e,"boxSizing")==="border-box"):0)}}}),v.support.opacity||(v.cssHooks.opacity={get:function(e,t){return jt.test((t&&e.currentStyle?e.currentStyle.filter:e.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":t?"1":""},set:function(e,t){var n=e.style,r=e.currentStyle,i=v.isNumeric(t)?"alpha(opacity="+t*100+")":"",s=r&&r.filter||n.filter||"";n.zoom=1;if(t>=1&&v.trim(s.replace(Bt,""))===""&&n.removeAttribute){n.removeAttribute("filter");if(r&&!r.filter)return}n.filter=Bt.test(s)?s.replace(Bt,i):s+" "+i}}),v(function(){v.support.reliableMarginRight||(v.cssHooks.marginRight={get:function(e,t){return v.swap(e,{display:"inline-block"},function(){if(t)return Dt(e,"marginRight")})}}),!v.support.pixelPosition&&v.fn.position&&v.each(["top","left"],function(e,t){v.cssHooks[t]={get:function(e,n){if(n){var r=Dt(e,t);return Ut.test(r)?v(e).position()[t]+"px":r}}}})}),v.expr&&v.expr.filters&&(v.expr.filters.hidden=function(e){return e.offsetWidth===0&&e.offsetHeight===0||!v.support.reliableHiddenOffsets&&(e.style&&e.style.display||Dt(e,"display"))==="none"},v.expr.filters.visible=function(e){return!v.expr.filters.hidden(e)}),v.each({margin:"",padding:"",border:"Width"},function(e,t){v.cssHooks[e+t]={expand:function(n){var r,i=typeof n=="string"?n.split(" "):[n],s={};for(r=0;r<4;r++)s[e+$t[r]+t]=i[r]||i[r-2]||i[0];return s}},qt.test(e)||(v.cssHooks[e+t].set=Zt)});var rn=/%20/g,sn=/\[\]$/,on=/\r?\n/g,un=/^(?:color|date|datetime|datetime-local|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,an=/^(?:select|textarea)/i;v.fn.extend({serialize:function(){return v.param(this.serializeArray())},serializeArray:function(){return this.map(function(){return this.elements?v.makeArray(this.elements):this}).filter(function(){return this.name&&!this.disabled&&(this.checked||an.test(this.nodeName)||un.test(this.type))}).map(function(e,t){var n=v(this).val();return n==null?null:v.isArray(n)?v.map(n,function(e,n){return{name:t.name,value:e.replace(on,"\r\n")}}):{name:t.name,value:n.replace(on,"\r\n")}}).get()}}),v.param=function(e,n){var r,i=[],s=function(e,t){t=v.isFunction(t)?t():t==null?"":t,i[i.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};n===t&&(n=v.ajaxSettings&&v.ajaxSettings.traditional);if(v.isArray(e)||e.jquery&&!v.isPlainObject(e))v.each(e,function(){s(this.name,this.value)});else for(r in e)fn(r,e[r],n,s);return i.join("&").replace(rn,"+")};var ln,cn,hn=/#.*$/,pn=/^(.*?):[ \t]*([^\r\n]*)\r?$/mg,dn=/^(?:about|app|app\-storage|.+\-extension|file|res|widget):$/,vn=/^(?:GET|HEAD)$/,mn=/^\/\//,gn=/\?/,yn=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,bn=/([?&])_=[^&]*/,wn=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,En=v.fn.load,Sn={},xn={},Tn=["*/"]+["*"];try{cn=s.href}catch(Nn){cn=i.createElement("a"),cn.href="",cn=cn.href}ln=wn.exec(cn.toLowerCase())||[],v.fn.load=function(e,n,r){if(typeof e!="string"&&En)return En.apply(this,arguments);if(!this.length)return this;var i,s,o,u=this,a=e.indexOf(" ");return a>=0&&(i=e.slice(a,e.length),e=e.slice(0,a)),v.isFunction(n)?(r=n,n=t):n&&typeof n=="object"&&(s="POST"),v.ajax({url:e,type:s,dataType:"html",data:n,complete:function(e,t){r&&u.each(r,o||[e.responseText,t,e])}}).done(function(e){o=arguments,u.html(i?v("<div>").append(e.replace(yn,"")).find(i):e)}),this},v.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(e,t){v.fn[t]=function(e){return this.on(t,e)}}),v.each(["get","post"],function(e,n){v[n]=function(e,r,i,s){return v.isFunction(r)&&(s=s||i,i=r,r=t),v.ajax({type:n,url:e,data:r,success:i,dataType:s})}}),v.extend({getScript:function(e,n){return v.get(e,t,n,"script")},getJSON:function(e,t,n){return v.get(e,t,n,"json")},ajaxSetup:function(e,t){return t?Ln(e,v.ajaxSettings):(t=e,e=v.ajaxSettings),Ln(e,t),e},ajaxSettings:{url:cn,isLocal:dn.test(ln[1]),global:!0,type:"GET",contentType:"application/x-www-form-urlencoded; charset=UTF-8",processData:!0,async:!0,accepts:{xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript","*":Tn},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":e.String,"text html":!0,"text json":v.parseJSON,"text xml":v.parseXML},flatOptions:{context:!0,url:!0}},ajaxPrefilter:Cn(Sn),ajaxTransport:Cn(xn),ajax:function(e,n){function T(e,n,s,a){var l,y,b,w,S,T=n;if(E===2)return;E=2,u&&clearTimeout(u),o=t,i=a||"",x.readyState=e>0?4:0,s&&(w=An(c,x,s));if(e>=200&&e<300||e===304)c.ifModified&&(S=x.getResponseHeader("Last-Modified"),S&&(v.lastModified[r]=S),S=x.getResponseHeader("Etag"),S&&(v.etag[r]=S)),e===304?(T="notmodified",l=!0):(l=On(c,w),T=l.state,y=l.data,b=l.error,l=!b);else{b=T;if(!T||e)T="error",e<0&&(e=0)}x.status=e,x.statusText=(n||T)+"",l?d.resolveWith(h,[y,T,x]):d.rejectWith(h,[x,T,b]),x.statusCode(g),g=t,f&&p.trigger("ajax"+(l?"Success":"Error"),[x,c,l?y:b]),m.fireWith(h,[x,T]),f&&(p.trigger("ajaxComplete",[x,c]),--v.active||v.event.trigger("ajaxStop"))}typeof e=="object"&&(n=e,e=t),n=n||{};var r,i,s,o,u,a,f,l,c=v.ajaxSetup({},n),h=c.context||c,p=h!==c&&(h.nodeType||h instanceof v)?v(h):v.event,d=v.Deferred(),m=v.Callbacks("once memory"),g=c.statusCode||{},b={},w={},E=0,S="canceled",x={readyState:0,setRequestHeader:function(e,t){if(!E){var n=e.toLowerCase();e=w[n]=w[n]||e,b[e]=t}return this},getAllResponseHeaders:function(){return E===2?i:null},getResponseHeader:function(e){var n;if(E===2){if(!s){s={};while(n=pn.exec(i))s[n[1].toLowerCase()]=n[2]}n=s[e.toLowerCase()]}return n===t?null:n},overrideMimeType:function(e){return E||(c.mimeType=e),this},abort:function(e){return e=e||S,o&&o.abort(e),T(0,e),this}};d.promise(x),x.success=x.done,x.error=x.fail,x.complete=m.add,x.statusCode=function(e){if(e){var t;if(E<2)for(t in e)g[t]=[g[t],e[t]];else t=e[x.status],x.always(t)}return this},c.url=((e||c.url)+"").replace(hn,"").replace(mn,ln[1]+"//"),c.dataTypes=v.trim(c.dataType||"*").toLowerCase().split(y),c.crossDomain==null&&(a=wn.exec(c.url.toLowerCase()),c.crossDomain=!(!a||a[1]===ln[1]&&a[2]===ln[2]&&(a[3]||(a[1]==="http:"?80:443))==(ln[3]||(ln[1]==="http:"?80:443)))),c.data&&c.processData&&typeof c.data!="string"&&(c.data=v.param(c.data,c.traditional)),kn(Sn,c,n,x);if(E===2)return x;f=c.global,c.type=c.type.toUpperCase(),c.hasContent=!vn.test(c.type),f&&v.active++===0&&v.event.trigger("ajaxStart");if(!c.hasContent){c.data&&(c.url+=(gn.test(c.url)?"&":"?")+c.data,delete c.data),r=c.url;if(c.cache===!1){var N=v.now(),C=c.url.replace(bn,"$1_="+N);c.url=C+(C===c.url?(gn.test(c.url)?"&":"?")+"_="+N:"")}}(c.data&&c.hasContent&&c.contentType!==!1||n.contentType)&&x.setRequestHeader("Content-Type",c.contentType),c.ifModified&&(r=r||c.url,v.lastModified[r]&&x.setRequestHeader("If-Modified-Since",v.lastModified[r]),v.etag[r]&&x.setRequestHeader("If-None-Match",v.etag[r])),x.setRequestHeader("Accept",c.dataTypes[0]&&c.accepts[c.dataTypes[0]]?c.accepts[c.dataTypes[0]]+(c.dataTypes[0]!=="*"?", "+Tn+"; q=0.01":""):c.accepts["*"]);for(l in c.headers)x.setRequestHeader(l,c.headers[l]);if(!c.beforeSend||c.beforeSend.call(h,x,c)!==!1&&E!==2){S="abort";for(l in{success:1,error:1,complete:1})x[l](c[l]);o=kn(xn,c,n,x);if(!o)T(-1,"No Transport");else{x.readyState=1,f&&p.trigger("ajaxSend",[x,c]),c.async&&c.timeout>0&&(u=setTimeout(function(){x.abort("timeout")},c.timeout));try{E=1,o.send(b,T)}catch(k){if(!(E<2))throw k;T(-1,k)}}return x}return x.abort()},active:0,lastModified:{},etag:{}});var Mn=[],_n=/\?/,Dn=/(=)\?(?=&|$)|\?\?/,Pn=v.now();v.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Mn.pop()||v.expando+"_"+Pn++;return this[e]=!0,e}}),v.ajaxPrefilter("json jsonp",function(n,r,i){var s,o,u,a=n.data,f=n.url,l=n.jsonp!==!1,c=l&&Dn.test(f),h=l&&!c&&typeof a=="string"&&!(n.contentType||"").indexOf("application/x-www-form-urlencoded")&&Dn.test(a);if(n.dataTypes[0]==="jsonp"||c||h)return s=n.jsonpCallback=v.isFunction(n.jsonpCallback)?n.jsonpCallback():n.jsonpCallback,o=e[s],c?n.url=f.replace(Dn,"$1"+s):h?n.data=a.replace(Dn,"$1"+s):l&&(n.url+=(_n.test(f)?"&":"?")+n.jsonp+"="+s),n.converters["script json"]=function(){return u||v.error(s+" was not called"),u[0]},n.dataTypes[0]="json",e[s]=function(){u=arguments},i.always(function(){e[s]=o,n[s]&&(n.jsonpCallback=r.jsonpCallback,Mn.push(s)),u&&v.isFunction(o)&&o(u[0]),u=o=t}),"script"}),v.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/javascript|ecmascript/},converters:{"text script":function(e){return v.globalEval(e),e}}}),v.ajaxPrefilter("script",function(e){e.cache===t&&(e.cache=!1),e.crossDomain&&(e.type="GET",e.global=!1)}),v.ajaxTransport("script",function(e){if(e.crossDomain){var n,r=i.head||i.getElementsByTagName("head")[0]||i.documentElement;return{send:function(s,o){n=i.createElement("script"),n.async="async",e.scriptCharset&&(n.charset=e.scriptCharset),n.src=e.url,n.onload=n.onreadystatechange=function(e,i){if(i||!n.readyState||/loaded|complete/.test(n.readyState))n.onload=n.onreadystatechange=null,r&&n.parentNode&&r.removeChild(n),n=t,i||o(200,"success")},r.insertBefore(n,r.firstChild)},abort:function(){n&&n.onload(0,1)}}}});var Hn,Bn=e.ActiveXObject?function(){for(var e in Hn)Hn[e](0,1)}:!1,jn=0;v.ajaxSettings.xhr=e.ActiveXObject?function(){return!this.isLocal&&Fn()||In()}:Fn,function(e){v.extend(v.support,{ajax:!!e,cors:!!e&&"withCredentials"in e})}(v.ajaxSettings.xhr()),v.support.ajax&&v.ajaxTransport(function(n){if(!n.crossDomain||v.support.cors){var r;return{send:function(i,s){var o,u,a=n.xhr();n.username?a.open(n.type,n.url,n.async,n.username,n.password):a.open(n.type,n.url,n.async);if(n.xhrFields)for(u in n.xhrFields)a[u]=n.xhrFields[u];n.mimeType&&a.overrideMimeType&&a.overrideMimeType(n.mimeType),!n.crossDomain&&!i["X-Requested-With"]&&(i["X-Requested-With"]="XMLHttpRequest");try{for(u in i)a.setRequestHeader(u,i[u])}catch(f){}a.send(n.hasContent&&n.data||null),r=function(e,i){var u,f,l,c,h;try{if(r&&(i||a.readyState===4)){r=t,o&&(a.onreadystatechange=v.noop,Bn&&delete Hn[o]);if(i)a.readyState!==4&&a.abort();else{u=a.status,l=a.getAllResponseHeaders(),c={},h=a.responseXML,h&&h.documentElement&&(c.xml=h);try{c.text=a.responseText}catch(p){}try{f=a.statusText}catch(p){f=""}!u&&n.isLocal&&!n.crossDomain?u=c.text?200:404:u===1223&&(u=204)}}}catch(d){i||s(-1,d)}c&&s(u,f,c,l)},n.async?a.readyState===4?setTimeout(r,0):(o=++jn,Bn&&(Hn||(Hn={},v(e).unload(Bn)),Hn[o]=r),a.onreadystatechange=r):r()},abort:function(){r&&r(0,1)}}}});var qn,Rn,Un=/^(?:toggle|show|hide)$/,zn=new RegExp("^(?:([-+])=|)("+m+")([a-z%]*)$","i"),Wn=/queueHooks$/,Xn=[Gn],Vn={"*":[function(e,t){var n,r,i=this.createTween(e,t),s=zn.exec(t),o=i.cur(),u=+o||0,a=1,f=20;if(s){n=+s[2],r=s[3]||(v.cssNumber[e]?"":"px");if(r!=="px"&&u){u=v.css(i.elem,e,!0)||n||1;do a=a||".5",u/=a,v.style(i.elem,e,u+r);while(a!==(a=i.cur()/o)&&a!==1&&--f)}i.unit=r,i.start=u,i.end=s[1]?u+(s[1]+1)*n:n}return i}]};v.Animation=v.extend(Kn,{tweener:function(e,t){v.isFunction(e)?(t=e,e=["*"]):e=e.split(" ");var n,r=0,i=e.length;for(;r<i;r++)n=e[r],Vn[n]=Vn[n]||[],Vn[n].unshift(t)},prefilter:function(e,t){t?Xn.unshift(e):Xn.push(e)}}),v.Tween=Yn,Yn.prototype={constructor:Yn,init:function(e,t,n,r,i,s){this.elem=e,this.prop=n,this.easing=i||"swing",this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=s||(v.cssNumber[n]?"":"px")},cur:function(){var e=Yn.propHooks[this.prop];return e&&e.get?e.get(this):Yn.propHooks._default.get(this)},run:function(e){var t,n=Yn.propHooks[this.prop];return this.options.duration?this.pos=t=v.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):Yn.propHooks._default.set(this),this}},Yn.prototype.init.prototype=Yn.prototype,Yn.propHooks={_default:{get:function(e){var t;return e.elem[e.prop]==null||!!e.elem.style&&e.elem.style[e.prop]!=null?(t=v.css(e.elem,e.prop,!1,""),!t||t==="auto"?0:t):e.elem[e.prop]},set:function(e){v.fx.step[e.prop]?v.fx.step[e.prop](e):e.elem.style&&(e.elem.style[v.cssProps[e.prop]]!=null||v.cssHooks[e.prop])?v.style(e.elem,e.prop,e.now+e.unit):e.elem[e.prop]=e.now}}},Yn.propHooks.scrollTop=Yn.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},v.each(["toggle","show","hide"],function(e,t){var n=v.fn[t];v.fn[t]=function(r,i,s){return r==null||typeof r=="boolean"||!e&&v.isFunction(r)&&v.isFunction(i)?n.apply(this,arguments):this.animate(Zn(t,!0),r,i,s)}}),v.fn.extend({fadeTo:function(e,t,n,r){return this.filter(Gt).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(e,t,n,r){var i=v.isEmptyObject(e),s=v.speed(t,n,r),o=function(){var t=Kn(this,v.extend({},e),s);i&&t.stop(!0)};return i||s.queue===!1?this.each(o):this.queue(s.queue,o)},stop:function(e,n,r){var i=function(e){var t=e.stop;delete e.stop,t(r)};return typeof e!="string"&&(r=n,n=e,e=t),n&&e!==!1&&this.queue(e||"fx",[]),this.each(function(){var t=!0,n=e!=null&&e+"queueHooks",s=v.timers,o=v._data(this);if(n)o[n]&&o[n].stop&&i(o[n]);else for(n in o)o[n]&&o[n].stop&&Wn.test(n)&&i(o[n]);for(n=s.length;n--;)s[n].elem===this&&(e==null||s[n].queue===e)&&(s[n].anim.stop(r),t=!1,s.splice(n,1));(t||!r)&&v.dequeue(this,e)})}}),v.each({slideDown:Zn("show"),slideUp:Zn("hide"),slideToggle:Zn("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){v.fn[e]=function(e,n,r){return this.animate(t,e,n,r)}}),v.speed=function(e,t,n){var r=e&&typeof e=="object"?v.extend({},e):{complete:n||!n&&t||v.isFunction(e)&&e,duration:e,easing:n&&t||t&&!v.isFunction(t)&&t};r.duration=v.fx.off?0:typeof r.duration=="number"?r.duration:r.duration in v.fx.speeds?v.fx.speeds[r.duration]:v.fx.speeds._default;if(r.queue==null||r.queue===!0)r.queue="fx";return r.old=r.complete,r.complete=function(){v.isFunction(r.old)&&r.old.call(this),r.queue&&v.dequeue(this,r.queue)},r},v.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2}},v.timers=[],v.fx=Yn.prototype.init,v.fx.tick=function(){var e,n=v.timers,r=0;qn=v.now();for(;r<n.length;r++)e=n[r],!e()&&n[r]===e&&n.splice(r--,1);n.length||v.fx.stop(),qn=t},v.fx.timer=function(e){e()&&v.timers.push(e)&&!Rn&&(Rn=setInterval(v.fx.tick,v.fx.interval))},v.fx.interval=13,v.fx.stop=function(){clearInterval(Rn),Rn=null},v.fx.speeds={slow:600,fast:200,_default:400},v.fx.step={},v.expr&&v.expr.filters&&(v.expr.filters.animated=function(e){return v.grep(v.timers,function(t){return e===t.elem}).length});var er=/^(?:body|html)$/i;v.fn.offset=function(e){if(arguments.length)return e===t?this:this.each(function(t){v.offset.setOffset(this,e,t)});var n,r,i,s,o,u,a,f={top:0,left:0},l=this[0],c=l&&l.ownerDocument;if(!c)return;return(r=c.body)===l?v.offset.bodyOffset(l):(n=c.documentElement,v.contains(n,l)?(typeof l.getBoundingClientRect!="undefined"&&(f=l.getBoundingClientRect()),i=tr(c),s=n.clientTop||r.clientTop||0,o=n.clientLeft||r.clientLeft||0,u=i.pageYOffset||n.scrollTop,a=i.pageXOffset||n.scrollLeft,{top:f.top+u-s,left:f.left+a-o}):f)},v.offset={bodyOffset:function(e){var t=e.offsetTop,n=e.offsetLeft;return v.support.doesNotIncludeMarginInBodyOffset&&(t+=parseFloat(v.css(e,"marginTop"))||0,n+=parseFloat(v.css(e,"marginLeft"))||0),{top:t,left:n}},setOffset:function(e,t,n){var r=v.css(e,"position");r==="static"&&(e.style.position="relative");var i=v(e),s=i.offset(),o=v.css(e,"top"),u=v.css(e,"left"),a=(r==="absolute"||r==="fixed")&&v.inArray("auto",[o,u])>-1,f={},l={},c,h;a?(l=i.position(),c=l.top,h=l.left):(c=parseFloat(o)||0,h=parseFloat(u)||0),v.isFunction(t)&&(t=t.call(e,n,s)),t.top!=null&&(f.top=t.top-s.top+c),t.left!=null&&(f.left=t.left-s.left+h),"using"in t?t.using.call(e,f):i.css(f)}},v.fn.extend({position:function(){if(!this[0])return;var e=this[0],t=this.offsetParent(),n=this.offset(),r=er.test(t[0].nodeName)?{top:0,left:0}:t.offset();return n.top-=parseFloat(v.css(e,"marginTop"))||0,n.left-=parseFloat(v.css(e,"marginLeft"))||0,r.top+=parseFloat(v.css(t[0],"borderTopWidth"))||0,r.left+=parseFloat(v.css(t[0],"borderLeftWidth"))||0,{top:n.top-r.top,left:n.left-r.left}},offsetParent:function(){return this.map(function(){var e=this.offsetParent||i.body;while(e&&!er.test(e.nodeName)&&v.css(e,"position")==="static")e=e.offsetParent;return e||i.body})}}),v.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,n){var r=/Y/.test(n);v.fn[e]=function(i){return v.access(this,function(e,i,s){var o=tr(e);if(s===t)return o?n in o?o[n]:o.document.documentElement[i]:e[i];o?o.scrollTo(r?v(o).scrollLeft():s,r?s:v(o).scrollTop()):e[i]=s},e,i,arguments.length,null)}}),v.each({Height:"height",Width:"width"},function(e,n){v.each({padding:"inner"+e,content:n,"":"outer"+e},function(r,i){v.fn[i]=function(i,s){var o=arguments.length&&(r||typeof i!="boolean"),u=r||(i===!0||s===!0?"margin":"border");return v.access(this,function(n,r,i){var s;return v.isWindow(n)?n.document.documentElement["client"+e]:n.nodeType===9?(s=n.documentElement,Math.max(n.body["scroll"+e],s["scroll"+e],n.body["offset"+e],s["offset"+e],s["client"+e])):i===t?v.css(n,r,i,u):v.style(n,r,i,u)},n,o?i:t,o,null)}})}),e.jQuery=e.$=v,typeof define=="function"&&define.amd&&define.amd.jQuery&&define("jquery",[],function(){return v})}(window),!function(e){if("object"==typeof exports)module.exports=e();else if("function"==typeof define&&define.amd)define("react",e);else{var t;"undefined"!=typeof window?t=window:"undefined"!=typeof global?t=global:"undefined"!=typeof self&&(t=self),t.React=e()}}(function(){var e,t,n;return function r(e,t,n){function i(o,u){if(!t[o]){if(!e[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(s)return s(o,!0);throw new Error("Cannot find module '"+o+"'")}var f=t[o]={exports:{}};e[o][0].call(f.exports,function(t){var n=e[o][1][t];return i(n?n:t)},f,f.exports,r,e,t,n)}return t[o].exports}var s=typeof require=="function"&&require;for(var o=0;o<n.length;o++)i(n[o]);return i}({1:[function(e,t,n){var r={componentDidMount:function(){this.props.autoFocus&&this.getDOMNode().focus()}};t.exports=r},{}],2:[function(e,t,n){function i(e,t){return e+t.charAt(0).toUpperCase()+t.substring(1)}var r={columnCount:!0,fillOpacity:!0,flex:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},s=["Webkit","ms","Moz","O"];Object.keys(r).forEach(function(e){s.forEach(function(t){r[i(t,e)]=r[e]})});var o={background:{backgroundImage:!0,backgroundPosition:!0,backgroundRepeat:!0,backgroundColor:!0},border:{borderWidth:!0,borderStyle:!0,borderColor:!0},borderBottom:{borderBottomWidth:!0,borderBottomStyle:!0,borderBottomColor:!0},borderLeft:{borderLeftWidth:!0,borderLeftStyle:!0,borderLeftColor:!0},borderRight:{borderRightWidth:!0,borderRightStyle:!0,borderRightColor:!0},borderTop:{borderTopWidth:!0,borderTopStyle:!0,borderTopColor:!0},font:{fontStyle:!0,fontVariant:!0,fontWeight:!0,fontSize:!0,lineHeight:!0,fontFamily:!0}},u={isUnitlessNumber:r,shorthandPropertyExpansions:o};t.exports=u},{}],3:[function(e,t,n){var r=e("./CSSProperty"),i=e("./dangerousStyleValue"),s=e("./escapeTextForBrowser"),o=e("./hyphenate"),u=e("./memoizeStringOnly"),a=u(function(e){return s(o(e))}),f={createMarkupForStyles:function(e){var t="";for(var n in e){if(!e.hasOwnProperty(n))continue;var r=e[n];r!=null&&(t+=a(n)+":",t+=i(n,r)+";")}return t||null},setValueForStyles:function(e,t){var n=e.style;for(var s in t){if(!t.hasOwnProperty(s))continue;var o=i(s,t[s]);if(o)n[s]=o;else{var u=r.shorthandPropertyExpansions[s];if(u)for(var a in u)n[a]="";else n[s]=""}}}};t.exports=f},{"./CSSProperty":2,"./dangerousStyleValue":94,"./escapeTextForBrowser":96,"./hyphenate":107,"./memoizeStringOnly":116}],4:[function(e,t,n){function y(e){return e.nodeName==="SELECT"||e.nodeName==="INPUT"&&e.type==="file"}function w(e){var t=a.getPooled(p.change,v,e);s.accumulateTwoPhaseDispatches(t),u.batchedUpdates(E,t)}function E(e){i.enqueueEvents(e),i.processEventQueue()}function S(e,t){d=e,v=t,d.attachEvent("onchange",w)}function x(){if(!d)return;d.detachEvent("onchange",w),d=null,v=null}function T(e,t,n){if(e===h.topChange)return n}function N(e,t,n){e===h.topFocus?(x(),S(t,n)):e===h.topBlur&&x()}function L(e,t){d=e,v=t,m=e.value,g=Object.getOwnPropertyDescriptor(e.constructor.prototype,"value"),Object.defineProperty(d,"value",k),d.attachEvent("onpropertychange",O)}function A(){if(!d)return;delete d.value,d.detachEvent("onpropertychange",O),d=null,v=null,m=null,g=null}function O(e){if(e.propertyName!=="value")return;var t=e.srcElement.value;if(t===m)return;m=t,w(e)}function M(e,t,n){if(e===h.topInput)return n}function _(e,t,n){e===h.topFocus?(A(),L(t,n)):e===h.topBlur&&A()}function D(e,t,n){if(e===h.topSelectionChange||e===h.topKeyUp||e===h.topKeyDown)if(d&&d.value!==m)return m=d.value,v}function P(e){return e.nodeName==="INPUT"&&(e.type==="checkbox"||e.type==="radio")}function H(e,t,n){if(e===h.topClick)return n}var r=e("./EventConstants"),i=e("./EventPluginHub"),s=e("./EventPropagators"),o=e("./ExecutionEnvironment"),u=e("./ReactUpdates"),a=e("./SyntheticEvent"),f=e("./isEventSupported"),l=e("./isTextInputElement"),c=e("./keyOf"),h=r.topLevelTypes,p={change:{phasedRegistrationNames:{bubbled:c({onChange:null}),captured:c({onChangeCapture:null})},dependencies:[h.topBlur,h.topChange,h.topClick,h.topFocus,h.topInput,h.topKeyDown,h.topKeyUp,h.topSelectionChange]}},d=null,v=null,m=null,g=null,b=!1;o.canUseDOM&&(b=f("change")&&(!("documentMode"in document)||document.documentMode>8));var C=!1;o.canUseDOM&&(C=f("input")&&(!("documentMode"in document)||document.documentMode>9));var k={get:function(){return g.get.call(this)},set:function(e){m=""+e,g.set.call(this,e)}},B={eventTypes:p,extractEvents:function(e,t,n,r){var i,o;y(t)?b?i=T:o=N:l(t)?C?i=M:(i=D,o=_):P(t)&&(i=H);if(i){var u=i(e,t,n);if(u){var f=a.getPooled(p.change,u,r);return s.accumulateTwoPhaseDispatches(f),f}}o&&o(e,t,n)}};t.exports=B},{"./EventConstants":14,"./EventPluginHub":16,"./EventPropagators":19,"./ExecutionEnvironment":20,"./ReactUpdates":70,"./SyntheticEvent":77,"./isEventSupported":109,"./isTextInputElement":111,"./keyOf":115}],5:[function(e,t,n){var r=0,i={createReactRootIndex:function(){return r++}};t.exports=i},{}],6:[function(e,t,n){function g(e){switch(e){case d.topCompositionStart:return m.compositionStart;case d.topCompositionEnd:return m.compositionEnd;case d.topCompositionUpdate:return m.compositionUpdate}}function y(e,t){return e===d.topKeyDown&&t.keyCode===c}function b(e,t){switch(e){case d.topKeyUp:return l.indexOf(t.keyCode)!==-1;case d.topKeyDown:return t.keyCode!==c;case d.topKeyPress:case d.topMouseDown:case d.topBlur:return!0;default:return!1}}function w(e){this.root=e,this.startSelection=o.getSelection(e),this.startValue=this.getText()}var r=e("./EventConstants"),i=e("./EventPropagators"),s=e("./ExecutionEnvironment"),o=e("./ReactInputSelection"),u=e("./SyntheticCompositionEvent"),a=e("./getTextContentAccessor"),f=e("./keyOf"),l=[9,13,27,32],c=229,h=s.canUseDOM&&"CompositionEvent"in window,p=!h||"documentMode"in document&&document.documentMode>8,d=r.topLevelTypes,v=null,m={compositionEnd:{phasedRegistrationNames:{bubbled:f({onCompositionEnd:null}),captured:f({onCompositionEndCapture:null})},dependencies:[d.topBlur,d.topCompositionEnd,d.topKeyDown,d.topKeyPress,d.topKeyUp,d.topMouseDown]},compositionStart:{phasedRegistrationNames:{bubbled:f({onCompositionStart:null}),captured:f({onCompositionStartCapture:null})},dependencies:[d.topBlur,d.topCompositionStart,d.topKeyDown,d.topKeyPress,d.topKeyUp,d.topMouseDown]},compositionUpdate:{phasedRegistrationNames:{bubbled:f({onCompositionUpdate:null}),captured:f({onCompositionUpdateCapture:null})},dependencies:[d.topBlur,d.topCompositionUpdate,d.topKeyDown,d.topKeyPress,d.topKeyUp,d.topMouseDown]}};w.prototype.getText=function(){return this.root.value||this.root[a()]},w.prototype.getData=function(){var e=this.getText(),t=this.startSelection.start,n=this.startValue.length-this.startSelection.end;return e.substr(t,e.length-n-t)};var E={eventTypes:m,extractEvents:function(e,t,n,r){var s,o;h?s=g(e):v?b(e,r)&&(s=m.compositionEnd):y(e,r)&&(s=m.compositionStart),p&&(!v&&s===m.compositionStart?v=new w(t):s===m.compositionEnd&&v&&(o=v.getData(),v=null));if(s){var a=u.getPooled(s,n,r);return o&&(a.data=o),i.accumulateTwoPhaseDispatches(a),a}}};t.exports=E},{"./EventConstants":14,"./EventPropagators":19,"./ExecutionEnvironment":20,"./ReactInputSelection":52,"./SyntheticCompositionEvent":75,"./getTextContentAccessor":105,"./keyOf":115}],7:[function(e,t,n){function u(e,t,n){var r=e.childNodes;if(r[n]===t)return;t.parentNode===e&&e.removeChild(t),n>=r.length?e.appendChild(t):e.insertBefore(t,r[n])}var r=e("./Danger"),i=e("./ReactMultiChildUpdateTypes"),s=e("./getTextContentAccessor"),o=s(),a;o==="textContent"?a=function(e,t){e.textContent=t}:a=function(e,t){while(e.firstChild)e.removeChild(e.firstChild);if(t){var n=e.ownerDocument||document;e.appendChild(n.createTextNode(t))}};var f={dangerouslyReplaceNodeWithMarkup:r.dangerouslyReplaceNodeWithMarkup,updateTextContent:a,processUpdates:function(e,t){var n,s=null,o=null;for(var f=0;n=e[f];f++)if(n.type===i.MOVE_EXISTING||n.type===i.REMOVE_NODE){var l=n.fromIndex,c=n.parentNode.childNodes[l],h=n.parentID;s=s||{},s[h]=s[h]||[],s[h][l]=c,o=o||[],o.push(c)}var p=r.dangerouslyRenderMarkup(t);if(o)for(var d=0;d<o.length;d++)o[d].parentNode.removeChild(o[d]);for(var v=0;n=e[v];v++)switch(n.type){case i.INSERT_MARKUP:u(n.parentNode,p[n.markupIndex],n.toIndex);break;case i.MOVE_EXISTING:u(n.parentNode,s[n.parentID][n.fromIndex],n.toIndex);break;case i.TEXT_CONTENT:a(n.parentNode,n.textContent);break;case i.REMOVE_NODE:}}};t.exports=f},{"./Danger":10,"./ReactMultiChildUpdateTypes":58,"./getTextContentAccessor":105}],8:[function(e,t,n){var r=e("./invariant"),i={MUST_USE_ATTRIBUTE:1,MUST_USE_PROPERTY:2,HAS_SIDE_EFFECTS:4,HAS_BOOLEAN_VALUE:8,HAS_POSITIVE_NUMERIC_VALUE:16,injectDOMPropertyConfig:function(e){var t=e.Properties||{},n=e.DOMAttributeNames||{},s=e.DOMPropertyNames||{},u=e.DOMMutationMethods||{};e.isCustomAttribute&&o._isCustomAttributeFunctions.push(e.isCustomAttribute);for(var a in t){r(!o.isStandardName[a],"injectDOMPropertyConfig(...): You're trying to inject DOM property '%s' which has already been injected. You may be accidentally injecting the same DOM property config twice, or you may be injecting two configs that have conflicting property names.",a),o.isStandardName[a]=!0;var f=a.toLowerCase();o.getPossibleStandardName[f]=a;var l=n[a];l&&(o.getPossibleStandardName[l]=a),o.getAttributeName[a]=l||f,o.getPropertyName[a]=s[a]||a;var c=u[a];c&&(o.getMutationMethod[a]=c);var h=t[a];o.mustUseAttribute[a]=h&i.MUST_USE_ATTRIBUTE,o.mustUseProperty[a]=h&i.MUST_USE_PROPERTY,o.hasSideEffects[a]=h&i.HAS_SIDE_EFFECTS,o.hasBooleanValue[a]=h&i.HAS_BOOLEAN_VALUE,o.hasPositiveNumericValue[a]=h&i.HAS_POSITIVE_NUMERIC_VALUE,r(!o.mustUseAttribute[a]||!o.mustUseProperty[a],"DOMProperty: Cannot require using both attribute and property: %s",a),r(o.mustUseProperty[a]||!o.hasSideEffects[a],"DOMProperty: Properties that have side effects must use property: %s",a),r(!o.hasBooleanValue[a]||!o.hasPositiveNumericValue[a],"DOMProperty: Cannot have both boolean and positive numeric value: %s",a)}}},s={},o={ID_ATTRIBUTE_NAME:"data-reactid",isStandardName:{},getPossibleStandardName:{},getAttributeName:{},getPropertyName:{},getMutationMethod:{},mustUseAttribute:{},mustUseProperty:{},hasSideEffects:{},hasBooleanValue:{},hasPositiveNumericValue:{},_isCustomAttributeFunctions:[],isCustomAttribute:function(e){return o._isCustomAttributeFunctions.some(function(t){return t.call(null,e)})},getDefaultValueForProperty:function(e,t){var n=s[e],r;return n||(s[e]=n={}),t in n||(r=document.createElement(e),n[t]=r[t]),n[t]},injection:i};t.exports=o},{"./invariant":108}],9:[function(e,t,n){function o(e,t){return t==null||r.hasBooleanValue[e]&&!t||r.hasPositiveNumericValue[e]&&(isNaN(t)||t<1)}var r=e("./DOMProperty"),i=e("./escapeTextForBrowser"),s=e("./memoizeStringOnly"),u=s(function(e){return i(e)+'="'}),a={children:!0,dangerouslySetInnerHTML:!0,key:!0,ref:!0},f={},l=function(e){if(a[e]||f[e])return;f[e]=!0;var t=e.toLowerCase(),n=r.isCustomAttribute(t)?t:r.getPossibleStandardName[t];n!=null&&console.warn("Unknown DOM property "+e+". Did you mean "+n+"?")},c={createMarkupForID:function(e){return u(r.ID_ATTRIBUTE_NAME)+i(e)+'"'},createMarkupForProperty:function(e,t){if(r.isStandardName[e]){if(o(e,t))return"";var n=r.getAttributeName[e];return r.hasBooleanValue[e]?i(n):u(n)+i(t)+'"'}return r.isCustomAttribute(e)?t==null?"":u(e)+i(t)+'"':(l(e),null)},setValueForProperty:function(e,t,n){if(r.isStandardName[t]){var i=r.getMutationMethod[t];if(i)i(e,n);else if(o(t,n))this.deleteValueForProperty(e,t);else if(r.mustUseAttribute[t])e.setAttribute(r.getAttributeName[t],""+n);else{var s=r.getPropertyName[t];if(!r.hasSideEffects[t]||e[s]!==n)e[s]=n}}else r.isCustomAttribute(t)?n==null?e.removeAttribute(r.getAttributeName[t]):e.setAttribute(t,""+n):l(t)},deleteValueForProperty:function(e,t){if(r.isStandardName[t]){var n=r.getMutationMethod[t];if(n)n(e,undefined);else if(r.mustUseAttribute[t])e.removeAttribute(r.getAttributeName[t]);else{var i=r.getPropertyName[t],s=r.getDefaultValueForProperty(e.nodeName,t);if(!r.hasSideEffects[t]||e[i]!==s)e[i]=s}}else r.isCustomAttribute(t)?e.removeAttribute(t):l(t)}};t.exports=c},{"./DOMProperty":8,"./escapeTextForBrowser":96,"./memoizeStringOnly":116}],10:[function(e,t,n){function l(e){return e.substring(1,e.indexOf(" "))}var r=e("./ExecutionEnvironment"),i=e("./createNodesFromMarkup"),s=e("./emptyFunction"),o=e("./getMarkupWrap"),u=e("./invariant"),a=/^(<[^ \/>]+)/,f="data-danger-index",c={dangerouslyRenderMarkup:function(e){u(r.canUseDOM,"dangerouslyRenderMarkup(...): Cannot render markup in a Worker thread. This is likely a bug in the framework. Please report immediately.");var t,n={};for(var c=0;c<e.length;c++)u(e[c],"dangerouslyRenderMarkup(...): Missing markup."),t=l(e[c]),t=o(t)?t:"*",n[t]=n[t]||[],n[t][c]=e[c];var h=[],p=0;for(t in n){if(!n.hasOwnProperty(t))continue;var d=n[t];for(var v in d)if(d.hasOwnProperty(v)){var m=d[v];d[v]=m.replace(a,"$1 "+f+'="'+v+'" ')}var g=i(d.join(""),s);for(c=0;c<g.length;++c){var y=g[c];y.hasAttribute&&y.hasAttribute(f)?(v=+y.getAttribute(f),y.removeAttribute(f),u(!h.hasOwnProperty(v),"Danger: Assigning to an already-occupied result index."),h[v]=y,p+=1):console.error("Danger: Discarding unexpected node:",y)}}return u(p===h.length,"Danger: Did not assign to every index of resultList."),u(h.length===e.length,"Danger: Expected markup to render %s nodes, but rendered %s.",e.length,h.length),h},dangerouslyReplaceNodeWithMarkup:function(e,t){u(r.canUseDOM,"dangerouslyReplaceNodeWithMarkup(...): Cannot render markup in a worker thread. This is likely a bug in the framework. Please report immediately."),u(t,"dangerouslyReplaceNodeWithMarkup(...): Missing markup."),u(e.tagName.toLowerCase()!=="html","dangerouslyReplaceNodeWithMarkup(...): Cannot replace markup of the <html> node. This is because browser quirks make this unreliable and/or slow. If you want to render to the root you must use server rendering. See renderComponentToString().");var n=i(t,s)[0];e.parentNode.replaceChild(n,e)}};t.exports=c},{"./ExecutionEnvironment":20,"./createNodesFromMarkup":92,"./emptyFunction":95,"./getMarkupWrap":102,"./invariant":108}],11:[function(e,t,n){var r=e("./DOMProperty"),i=r.injection.MUST_USE_ATTRIBUTE,s=r.injection.MUST_USE_PROPERTY,o=r.injection.HAS_BOOLEAN_VALUE,u=r.injection.HAS_SIDE_EFFECTS,a=r.injection.HAS_POSITIVE_NUMERIC_VALUE,f={isCustomAttribute:RegExp.prototype.test.bind(/^(data|aria)-[a-z_][a-z\d_.\-]*$/),Properties:{accept:null,accessKey:null,action:null,allowFullScreen:i|o,allowTransparency:i,alt:null,async:o,autoComplete:null,autoPlay:o,cellPadding:null,cellSpacing:null,charSet:i,checked:s|o,className:s,cols:i|a,colSpan:null,content:null,contentEditable:null,contextMenu:i,controls:s|o,crossOrigin:null,data:null,dateTime:i,defer:o,dir:null,disabled:i|o,download:null,draggable:null,encType:null,form:i,formNoValidate:o,frameBorder:i,height:i,hidden:i|o,href:null,hrefLang:null,htmlFor:null,httpEquiv:null,icon:null,id:s,label:null,lang:null,list:null,loop:s|o,max:null,maxLength:i,mediaGroup:null,method:null,min:null,multiple:s|o,muted:s|o,name:null,noValidate:o,pattern:null,placeholder:null,poster:null,preload:null,radioGroup:null,readOnly:s|o,rel:null,required:o,role:i,rows:i|a,rowSpan:null,sandbox:null,scope:null,scrollLeft:s,scrollTop:s,seamless:i|o,selected:s|o,size:i|a,span:a,spellCheck:null,src:null,srcDoc:s,step:null,style:null,tabIndex:null,target:null,title:null,type:null,value:s|u,width:i,wmode:i,autoCapitalize:null,autoCorrect:null,property:null,cx:i,cy:i,d:i,fill:i,fx:i,fy:i,gradientTransform:i,gradientUnits:i,offset:i,points:i,r:i,rx:i,ry:i,spreadMethod:i,stopColor:i,stopOpacity:i,stroke:i,strokeLinecap:i,strokeWidth:i,transform:i,version:i,viewBox:i,x1:i,x2:i,x:i,y1:i,y2:i,y:i},DOMAttributeNames:{className:"class",gradientTransform:"gradientTransform",gradientUnits:"gradientUnits",htmlFor:"for",spreadMethod:"spreadMethod",stopColor:"stop-color",stopOpacity:"stop-opacity",strokeLinecap:"stroke-linecap",strokeWidth:"stroke-width",viewBox:"viewBox"},DOMPropertyNames:{autoCapitalize:"autocapitalize",autoComplete:"autocomplete",autoCorrect:"autocorrect",autoFocus:"autofocus",autoPlay:"autoplay",encType:"enctype",hrefLang:"hreflang",radioGroup:"radiogroup",spellCheck:"spellcheck",srcDoc:"srcdoc"},DOMMutationMethods:{className:function(e,t){e.className=t||""}}};t.exports=f},{"./DOMProperty":8}],12:[function(e,t,n){var r=e("./keyOf"),i=[r({ResponderEventPlugin:null}),r({SimpleEventPlugin:null}),r({TapEventPlugin:null}),r({EnterLeaveEventPlugin:null}),r({ChangeEventPlugin:null}),r({SelectEventPlugin:null}),r({CompositionEventPlugin:null}),r({AnalyticsEventPlugin:null}),r({MobileSafariClickEventPlugin:null})];t.exports=i},{"./keyOf":115}],13:[function(e,t,n){var r=e("./EventConstants"),i=e("./EventPropagators"),s=e("./SyntheticMouseEvent"),o=e("./ReactMount"),u=e("./keyOf"),a=r.topLevelTypes,f=o.getFirstReactDOM,l={mouseEnter:{registrationName:u({onMouseEnter:null}),dependencies:[a.topMouseOut,a.topMouseOver]},mouseLeave:{registrationName:u({onMouseLeave:null}),dependencies:[a.topMouseOut,a.topMouseOver]}},c=[null,null],h={eventTypes:l,extractEvents:function(e,t,n,r){if(e===a.topMouseOver&&(r.relatedTarget||r.fromElement))return null;if(e!==a.topMouseOut&&e!==a.topMouseOver)return null;var u;if(t.window===t)u=t;else{var h=t.ownerDocument;h?u=h.defaultView||h.parentWindow:u=window}var p,d;e===a.topMouseOut?(p=t,d=f(r.relatedTarget||r.toElement)||u):(p=u,d=t);if(p===d)return null;var v=p?o.getID(p):"",m=d?o.getID(d):"",g=s.getPooled(l.mouseLeave,v,r);g.type="mouseleave",g.target=p,g.relatedTarget=d;var y=s.getPooled(l.mouseEnter,m,r);return y.type="mouseenter",y.target=d,y.relatedTarget=p,i.accumulateEnterLeaveDispatches(g,y,v,m),c[0]=g,c[1]=y,c}};t.exports=h},{"./EventConstants":14,"./EventPropagators":19,"./ReactMount":55,"./SyntheticMouseEvent":80,"./keyOf":115}],14:[function(e,t,n){var r=e("./keyMirror"),i=r({bubbled:null,captured:null}),s=r({topBlur:null,topChange:null,topClick:null,topCompositionEnd:null,topCompositionStart:null,topCompositionUpdate:null,topContextMenu:null,topCopy:null,topCut:null,topDoubleClick:null,topDrag:null,topDragEnd:null,topDragEnter:null,topDragExit:null,topDragLeave:null,topDragOver:null,topDragStart:null,topDrop:null,topError:null,topFocus:null,topInput:null,topKeyDown:null,topKeyPress:null,topKeyUp:null,topLoad:null,topMouseDown:null,topMouseMove:null,topMouseOut:null,topMouseOver:null,topMouseUp:null,topPaste:null,topReset:null,topScroll:null,topSelectionChange:null,topSubmit:null,topTouchCancel:null,topTouchEnd:null,topTouchMove:null,topTouchStart:null,topWheel:null}),o={topLevelTypes:s,PropagationPhases:i};t.exports=o},{"./keyMirror":114}],15:[function(e,t,n){var r=e("./emptyFunction"),i={listen:function(e,t,n){if(e.addEventListener)return e.addEventListener(t,n,!1),{remove:function(){e.removeEventListener(t,n,!1)}};if(e.attachEvent)return e.attachEvent("on"+t,n),{remove:function(){e.detachEvent(t,n)}}},capture:function(e,t,n){return e.addEventListener?(e.addEventListener(t,n,!0),{remove:function(){e.removeEventListener(t,n,!0)}}):(console.error("Attempted to listen to events during the capture phase on a browser that does not support the capture phase. Your application will not receive some events."),{remove:r})}};t.exports=i},{"./emptyFunction":95}],16:[function(e,t,n){function d(){var e=!p||!p.traverseTwoPhase||!p.traverseEnterLeave;if(e)throw new Error("InstanceHandle not injected before use!")}var r=e("./EventPluginRegistry"),i=e("./EventPluginUtils"),s=e("./ExecutionEnvironment"),o=e("./accumulate"),u=e("./forEachAccumulated"),a=e("./invariant"),f=e("./isEventSupported"),l={},c=null,h=function(e){if(e){var t=i.executeDispatch,n=r.getPluginModuleForEvent(e);n&&n.executeDispatch&&(t=n.executeDispatch),i.executeDispatchesInOrder(e,t),e.isPersistent()||e.constructor.release(e)}},p=null,v={injection:{injectMount:i.injection.injectMount,injectInstanceHandle:function(e){p=e,d()},getInstanceHandle:function(){return d(),p},injectEventPluginOrder:r.injectEventPluginOrder,injectEventPluginsByName:r.injectEventPluginsByName},eventNameDispatchConfigs:r.eventNameDispatchConfigs,registrationNameModules:r.registrationNameModules,putListener:function(e,t,n){a(s.canUseDOM,"Cannot call putListener() in a non-DOM environment."),a(!n||typeof n=="function","Expected %s listener to be a function, instead got type %s",t,typeof n),t==="onScroll"&&!f("scroll",!0)&&console.warn("This browser doesn't support the `onScroll` event");var r=l[t]||(l[t]={});r[e]=n},getListener:function(e,t){var n=l[t];return n&&n[e]},deleteListener:function(e,t){var n=l[t];n&&delete n[e]},deleteAllListeners:function(e){for(var t in l)delete l[t][e]},extractEvents:function(e,t,n,i){var s,u=r.plugins;for(var a=0,f=u.length;a<f;a++){var l=u[a];if(l){var c=l.extractEvents(e,t,n,i);c&&(s=o(s,c))}}return s},enqueueEvents:function(e){e&&(c=o(c,e))},processEventQueue:function(){var e=c;c=null,u(e,h),a(!c,"processEventQueue(): Additional events were enqueued while processing an event queue. Support for this has not yet been implemented.")},__purge:function(){l={}},__getListenerBank:function(){return l}};t.exports=v},{"./EventPluginRegistry":17,"./EventPluginUtils":18,"./ExecutionEnvironment":20,"./accumulate":86,"./forEachAccumulated":98,"./invariant":108,"./isEventSupported":109}],17:[function(e,t,n){function o(){if(!i)return;for(var e in s){var t=s[e],n=i.indexOf(e);r(n>-1,"EventPluginRegistry: Cannot inject event plugins that do not exist in the plugin ordering, `%s`.",e);if(f.plugins[n])continue;r(t.extractEvents,"EventPluginRegistry: Event plugins must implement an `extractEvents` method, but `%s` does not.",e),f.plugins[n]=t;var o=t.eventTypes;for(var a in o)r(u(o[a],t,a),"EventPluginRegistry: Failed to publish event `%s` for plugin `%s`.",a,e)}}function u(e,t,n){r(!f.eventNameDispatchConfigs[n],"EventPluginHub: More than one plugin attempted to publish the same event name, `%s`.",n),f.eventNameDispatchConfigs[n]=e;var i=e.phasedRegistrationNames;if(i){for(var s in i)if(i.hasOwnProperty(s)){var o=i[s];a(o,t,n)}return!0}return e.registrationName?(a(e.registrationName,t,n),!0):!1}function a(e,t,n){r(!f.registrationNameModules[e],"EventPluginHub: More than one plugin attempted to publish the same registration name, `%s`.",e),f.registrationNameModules[e]=t,f.registrationNameDependencies[e]=t.eventTypes[n].dependencies}var r=e("./invariant"),i=null,s={},f={plugins:[],eventNameDispatchConfigs:{},registrationNameModules:{},registrationNameDependencies:{},injectEventPluginOrder:function(e){r(!i,"EventPluginRegistry: Cannot inject event plugin ordering more than once."),i=Array.prototype.slice.call(e),o()},injectEventPluginsByName:function(e){var t=!1;for(var n in e){if(!e.hasOwnProperty(n))continue;var i=e[n];s[n]!==i&&(r(!s[n],"EventPluginRegistry: Cannot inject two different event plugins using the same name, `%s`.",n),s[n]=i,t=!0)}t&&o()},getPluginModuleForEvent:function(e){var t=e.dispatchConfig;if(t.registrationName)return f.registrationNameModules[t.registrationName]||null;for(var n in t.phasedRegistrationNames){if(!t.phasedRegistrationNames.hasOwnProperty(n))continue;var r=f.registrationNameModules[t.phasedRegistrationNames[n]];if(r)return r}return null},_resetEventPlugins:function(){i=null;for(var e in s)s.hasOwnProperty(e)&&delete s[e];f.plugins.length=0;var t=f.eventNameDispatchConfigs;for(var n in t)t.hasOwnProperty(n)&&delete t[n];var r=f.registrationNameModules;for(var o in r)r.hasOwnProperty(o)&&delete r[o]}};t.exports=f},{"./invariant":108}],18:[function(e,t,n){function u(e){return e===o.topMouseUp||e===o.topTouchEnd||e===o.topTouchCancel}function a(e){return e===o.topMouseMove||e===o.topTouchMove}function f(e){return e===o.topMouseDown||e===o.topTouchStart}function c(e,t){var n=e._dispatchListeners,r=e._dispatchIDs;l(e);if(Array.isArray(n))for(var i=0;i<n.length;i++){if(e.isPropagationStopped())break;t(e,n[i],r[i])}else n&&t(e,n,r)}function h(e,t,n){e.currentTarget=s.Mount.getNode(n);var r=t(e,n);return e.currentTarget=null,r}function p(e,t){c(e,t),e._dispatchListeners=null,e._dispatchIDs=null}function d(e){var t=e._dispatchListeners,n=e._dispatchIDs;l(e);if(Array.isArray(t))for(var r=0;r<t.length;r++){if(e.isPropagationStopped())break;if(t[r](e,n[r]))return n[r]}else if(t&&t(e,n))return n;return null}function v(e){l(e);var t=e._dispatchListeners,n=e._dispatchIDs;i(!Array.isArray(t),"executeDirectDispatch(...): Invalid `event`.");var r=t?t(e,n):null;return e._dispatchListeners=null,e._dispatchIDs=null,r}function m(e){return!!e._dispatchListeners}var r=e("./EventConstants"),i=e("./invariant"),s={Mount:null,injectMount:function(e){s.Mount=e,i(e&&e.getNode,"EventPluginUtils.injection.injectMount(...): Injected Mount module is missing getNode.")}},o=r.topLevelTypes,l;l=function(e){var t=e._dispatchListeners,n=e._dispatchIDs,r=Array.isArray(t),s=Array.isArray(n),o=s?n.length:n?1:0,u=r?t.length:t?1:0;i(s===r&&o===u,"EventPluginUtils: Invalid `event`.")};var g={isEndish:u,isMoveish:a,isStartish:f,executeDirectDispatch:v,executeDispatch:h,executeDispatchesInOrder:p,executeDispatchesInOrderStopAtTrue:d,hasDispatches:m,injection:s,useTouchEvents:!1};t.exports=g},{"./EventConstants":14,"./invariant":108}],19:[function(e,t,n){function f(e,t,n){var r=t.dispatchConfig.phasedRegistrationNames[n];return a(e,r)}function l(e,t,n){if(!e)throw new Error("Dispatching id must not be null");var r=t?u.bubbled:u.captured,i=f(e,n,r);i&&(n._dispatchListeners=s(n._dispatchListeners,i),n._dispatchIDs=s(n._dispatchIDs,e))}function c(e){e&&e.dispatchConfig.phasedRegistrationNames&&i.injection.getInstanceHandle().traverseTwoPhase(e.dispatchMarker,l,e)}function h(e,t,n){if(n&&n.dispatchConfig.registrationName){var r=n.dispatchConfig.registrationName,i=a(e,r);i&&(n._dispatchListeners=s(n._dispatchListeners,i),n._dispatchIDs=s(n._dispatchIDs,e))}}function p(e){e&&e.dispatchConfig.registrationName&&h(e.dispatchMarker,null,e)}function d(e){o(e,c)}function v(e,t,n,r){i.injection.getInstanceHandle().traverseEnterLeave(n,r,h,e,t)}function m(e){o(e,p)}var r=e("./EventConstants"),i=e("./EventPluginHub"),s=e("./accumulate"),o=e("./forEachAccumulated"),u=r.PropagationPhases,a=i.getListener,g={accumulateTwoPhaseDispatches:d,accumulateDirectDispatches:m,accumulateEnterLeaveDispatches:v};t.exports=g},{"./EventConstants":14,"./EventPluginHub":16,"./accumulate":86,"./forEachAccumulated":98}],20:[function(e,t,n){var r=typeof window!="undefined",i={canUseDOM:r,canUseWorkers:typeof Worker!="undefined",canUseEventListeners:r&&(window.addEventListener||window.attachEvent),isInWorker:!r};t.exports=i},{}],21:[function(e,t,n){function o(e){i(e.props.checkedLink==null||e.props.valueLink==null,"Cannot provide a checkedLink and a valueLink. If you want to use checkedLink, you probably don't want to use valueLink and vice versa.")}function u(e){o(e),i(e.props.value==null&&e.props.onChange==null,"Cannot provide a valueLink and a value or onChange event. If you want to use value or onChange, you probably don't want to use valueLink.")}function a(e){o(e),i(e.props.checked==null&&e.props.onChange==null,"Cannot provide a checkedLink and a checked property or onChange event. If you want to use checked or onChange, you probably don't want to use checkedLink")}function f(e){this.props.valueLink.requestChange(e.target.value)}function l(e){this.props.checkedLink.requestChange(e.target.checked)}var r=e("./ReactPropTypes"),i=e("./invariant"),s={button:!0,checkbox:!0,image:!0,hidden:!0,radio:!0,reset:!0,submit:!0},c={Mixin:{propTypes:{value:function(e,t,n){e[t]&&!s[e.type]&&!e.onChange&&!e.readOnly&&!e.disabled&&console.warn("You provided a `value` prop to a form field without an `onChange` handler. This will render a read-only field. If the field should be mutable use `defaultValue`. Otherwise, set either `onChange` or `readOnly`.")},checked:function(e,t,n){e[t]&&!e.onChange&&!e.readOnly&&!e.disabled&&console.warn("You provided a `checked` prop to a form field without an `onChange` handler. This will render a read-only field. If the field should be mutable use `defaultChecked`. Otherwise, set either `onChange` or `readOnly`.")},onChange:r.func}},getValue:function(e){return e.props.valueLink?(u(e),e.props.valueLink.value):e.props.value},getChecked:function(e){return e.props.checkedLink?(a(e),e.props.checkedLink.value):e.props.checked},getOnChange:function(e){return e.props.valueLink?(u(e),f):e.props.checkedLink?(a(e),l):e.props.onChange}};t.exports=c},{"./ReactPropTypes":64,"./invariant":108}],22:[function(e,t,n){var r=e("./EventConstants"),i=e("./emptyFunction"),s=r.topLevelTypes,o={eventTypes:null,extractEvents:function(e,t,n,r){if(e===s.topTouchStart){var o=r.target;o&&!o.onclick&&(o.onclick=i)}}};t.exports=o},{"./EventConstants":14,"./emptyFunction":95}],23:[function(e,t,n){var r=e("./invariant"),i=function(e){var t=this;if(t.instancePool.length){var n=t.instancePool.pop();return t.call(n,e),n}return new t(e)},s=function(e,t){var n=this;if(n.instancePool.length){var r=n.instancePool.pop();return n.call(r,e,t),r}return new n(e,t)},o=function(e,t,n){var r=this;if(r.instancePool.length){var i=r.instancePool.pop();return r.call(i,e,t,n),i}return new r(e,t,n)},u=function(e,t,n,r,i){var s=this;if(s.instancePool.length){var o=s.instancePool.pop();return s.call(o,e,t,n,r,i),o}return new s(e,t,n,r,i)},a=function(e){var t=this;r(e instanceof t,"Trying to release an instance into a pool of a different type."),e.destructor&&e.destructor(),t.instancePool.length<t.poolSize&&t.instancePool.push(e)},f=10,l=i,c=function(e,t){var n=e;return n.instancePool=[],n.getPooled=t||l,n.poolSize||(n.poolSize=f),n.release=a,n},h={addPoolingTo:c,oneArgumentPooler:i,twoArgumentPooler:s,threeArgumentPooler:o,fiveArgumentPooler:u};t.exports=h},{"./invariant":108}],24:[function(e,t,n){var r=e("./DOMPropertyOperations"),i=e("./EventPluginUtils"),s=e("./ReactChildren"),o=e("./ReactComponent"),u=e("./ReactCompositeComponent"),a=e("./ReactContext"),f=e("./ReactCurrentOwner"),l=e("./ReactDOM"),c=e("./ReactDOMComponent"),h=e("./ReactDefaultInjection"),p=e("./ReactInstanceHandles"),d=e("./ReactMount"),v=e("./ReactMultiChild"),m=e("./ReactPerf"),g=e("./ReactPropTypes"),y=e("./ReactServerRendering"),b=e("./ReactTextComponent"),w=e("./onlyChild");h.inject();var E={Children:{map:s.map,forEach:s.forEach,only:w},DOM:l,PropTypes:g,initializeTouchEvents:function(e){i.useTouchEvents=e},createClass:u.createClass,constructAndRenderComponent:d.constructAndRenderComponent,constructAndRenderComponentByID:d.constructAndRenderComponentByID,renderComponent:m.measure("React","renderComponent",d.renderComponent),renderComponentToString:y.renderComponentToString,unmountComponentAtNode:d.unmountComponentAtNode,isValidClass:u.isValidClass,isValidComponent:o.isValidComponent,withContext:a.withContext,__internals:{Component:o,CurrentOwner:f,DOMComponent:c,DOMPropertyOperations:r,InstanceHandles:p,Mount:d,MultiChild:v,TextComponent:b}},S=e("./ExecutionEnvironment");S.canUseDOM&&window.top===window.self&&navigator.userAgent.indexOf("Chrome")>-1&&console.debug("Download the React DevTools for a better development experience: http://fb.me/react-devtools"),E.version="0.9.0",t.exports=E},{"./DOMPropertyOperations":9,"./EventPluginUtils":18,"./ExecutionEnvironment":20,"./ReactChildren":25,"./ReactComponent":26,"./ReactCompositeComponent":29,"./ReactContext":30,"./ReactCurrentOwner":31,"./ReactDOM":32,"./ReactDOMComponent":34,"./ReactDefaultInjection":44,"./ReactInstanceHandles":53,"./ReactMount":55,"./ReactMultiChild":57,"./ReactPerf":60,"./ReactPropTypes":64,"./ReactServerRendering":68,"./ReactTextComponent":69,"./onlyChild":123}],25:[function(e,t,n){function a(e,t){this.forEachFunction=e,this.forEachContext=t}function f(e,t,n,r){var i=e;i.forEachFunction.call(i.forEachContext,t,r)}function l(e,t,n){if(e==null)return e;var r=a.getPooled(t,n);s(e,f,r),a.release(r)}function c(e,t,n){this.mapResult=e,this.mapFunction=t,this.mapContext=n}function h(e,t,n,r){var s=e,o=s.mapResult,u=s.mapFunction.call(s.mapContext,t,r);i(!o.hasOwnProperty(n),"ReactChildren.map(...): Encountered two children with the same key, `%s`. Children keys must be unique.",n),o[n]=u}function p(e,t,n){if(e==null)return e;var r={},i=c.getPooled(r,t,n);return s(e,h,i),c.release(i),r}var r=e("./PooledClass"),i=e("./invariant"),s=e("./traverseAllChildren"),o=r.twoArgumentPooler,u=r.threeArgumentPooler;r.addPoolingTo(a,o),r.addPoolingTo(c,u);var d={forEach:l,map:p};t.exports=d},{"./PooledClass":23,"./invariant":108,"./traverseAllChildren":128}],26:[function(e,t,n){function d(e){if(e.__keyValidated__||e.props.key!=null)return;e.__keyValidated__=!0;if(!i.current)return;var t=i.current.constructor.displayName;if(c.hasOwnProperty(t))return;c[t]=!0;var n='Each child in an array should have a unique "key" prop. Check the render method of '+t+".";if(!e.isOwnedBy(i.current)){var r=e._owner&&e._owner.constructor.displayName;n+=" It was passed a child from "+r+"."}n+=" See http://fb.me/react-warning-keys for more information.",console.warn(n)}function v(e){if(p.test(e)){var t=i.current.constructor.displayName;if(h.hasOwnProperty(t))return;h[t]=!0,console.warn("Child objects should have non-numeric keys so ordering is preserved. Check the render method of "+t+". "+"See http://fb.me/react-warning-keys for more information.")}}function m(e){if(Array.isArray(e))for(var t=0;t<e.length;t++){var n=e[t];g.isValidComponent(n)&&d(n)}else if(g.isValidComponent(e))e.__keyValidated__=!0;else if(e&&typeof e=="object")for(var r in e)v(r,e)}var r=e("./ReactComponentEnvironment"),i=e("./ReactCurrentOwner"),s=e("./ReactOwner"),o=e("./ReactUpdates"),u=e("./invariant"),a=e("./keyMirror"),f=e("./merge"),l=a({MOUNTED:null,UNMOUNTED:null}),c={},h={},p=/^\d+$/,g={isValidComponent:function(e){if(!e||!e.type||!e.type.prototype)return!1;var t=e.type.prototype;return typeof t.mountComponentIntoNode=="function"&&typeof t.receiveComponent=="function"},LifeCycle:l,BackendIDOperations:r.BackendIDOperations,unmountIDFromEnvironment:r.unmountIDFromEnvironment,mountImageIntoNode:r.mountImageIntoNode,ReactReconcileTransaction:r.ReactReconcileTransaction,Mixin:f(r.Mixin,{isMounted:function(){return this._lifeCycleState===l.MOUNTED},setProps:function(e,t){this.replaceProps(f(this._pendingProps||this.props,e),t)},replaceProps:function(e,t){u(this.isMounted(),"replaceProps(...): Can only update a mounted component."),u(this._mountDepth===0,"replaceProps(...): You called `setProps` or `replaceProps` on a component with a parent. This is an anti-pattern since props will get reactively updated when rendered. Instead, change the owner's `render` method to pass the correct value as props to the component where it is created."),this._pendingProps=e,o.enqueueUpdate(this,t)},construct:function(e,t){this.props=e||{},this._owner=i.current,this._lifeCycleState=l.UNMOUNTED,this._pendingProps=null,this._pendingCallbacks=null,this._pendingOwner=this._owner;var n=arguments.length-1;if(n===1)m(t),this.props.children=t;else if(n>1){var r=Array(n);for(var s=0;s<n;s++)m(arguments[s+1]),r[s]=arguments[s+1];this.props.children=r}},mountComponent:function(e,t,n){u(!this.isMounted(),"mountComponent(%s, ...): Can only mount an unmounted component. Make sure to avoid storing components between renders or reusing a single component instance in multiple places.",e);var r=this.props;r.ref!=null&&s.addComponentAsRefTo(this,r.ref,this._owner),this._rootNodeID=e,this._lifeCycleState=l.MOUNTED,this._mountDepth=n},unmountComponent:function(){u(this.isMounted(),"unmountComponent(): Can only unmount a mounted component.");var e=this.props;e.ref!=null&&s.removeComponentAsRefFrom(this,e.ref,this._owner),g.unmountIDFromEnvironment(this._rootNodeID),this._rootNodeID=null,this._lifeCycleState=l.UNMOUNTED},receiveComponent:function(e,t){u(this.isMounted(),"receiveComponent(...): Can only update a mounted component."),this._pendingOwner=e._owner,this._pendingProps=e.props,this._performUpdateIfNecessary(t)},performUpdateIfNecessary:function(){var e=g.ReactReconcileTransaction.getPooled();e.perform(this._performUpdateIfNecessary,this,e),g.ReactReconcileTransaction.release(e)},_performUpdateIfNecessary:function(e){if(this._pendingProps==null)return;var t=this.props,n=this._owner;this.props=this._pendingProps,this._owner=this._pendingOwner,this._pendingProps=null,this.updateComponent(e,t,n)},updateComponent:function(e,t,n){var r=this.props;if(this._owner!==n||r.ref!==t.ref)t.ref!=null&&s.removeComponentAsRefFrom(this,t.ref,n),r.ref!=null&&s.addComponentAsRefTo(this,r.ref,this._owner)},mountComponentIntoNode:function(e,t,n){var r=g.ReactReconcileTransaction.getPooled();r.perform(this._mountComponentIntoNode,this,e,t,r,n),g.ReactReconcileTransaction.release(r)},_mountComponentIntoNode:function(e,t,n,r){var i=this.mountComponent(e,n,0);g.mountImageIntoNode(i,t,r)},isOwnedBy:function(e){return this._owner===e},getSiblingByRef:function(e){var t=this._owner;return!t||!t.refs?null:t.refs[e]}})};t.exports=g},{"./ReactComponentEnvironment":28,"./ReactCurrentOwner":31,"./ReactOwner":59,"./ReactUpdates":70,"./invariant":108,"./keyMirror":114,"./merge":117}],27:[function(e,t,n){var r=e("./ReactDOMIDOperations"),i=e("./ReactMarkupChecksum"),s=e("./ReactMount"),o=e("./ReactPerf"),u=e("./ReactReconcileTransaction"),a=e("./getReactRootElementInContainer"),f=e("./invariant"),l=1,c=9,h={Mixin:{getDOMNode:function(){return f(this.isMounted(),"getDOMNode(): A component must be mounted to have a DOM node."),s.getNode(this._rootNodeID)}},ReactReconcileTransaction:u,BackendIDOperations:r,unmountIDFromEnvironment:function(e){s.purgeID(e)},mountImageIntoNode:o.measure("ReactComponentBrowserEnvironment","mountImageIntoNode",function(e,t,n){f(t&&(t.nodeType===l||t.nodeType===c),"mountComponentIntoNode(...): Target container is not valid.");if(n){if(i.canReuseMarkup(e,a(t)))return;f(t.nodeType!==c,"You're trying to render a component to the document using server rendering but the checksum was invalid. This usually means you rendered a different component type or props on the client from the one on the server, or your render() methods are impure. React cannot handle this case due to cross-browser quirks by rendering at the document root. You should look for environment dependent code in your components and ensure the props are the same client and server side."),console.warn("React attempted to use reuse markup in a container but the checksum was invalid. This generally means that you are using server rendering and the markup generated on the server was not what the client was expecting. React injectednew markup to compensate which works but you have lost many of the benefits of server rendering. Instead, figure out why the markup being generated is different on the client or server.")}f(t.nodeType!==c,"You're trying to render a component to the document but you didn't use server rendering. We can't do this without using server rendering due to cross-browser quirks. See renderComponentToString() for server rendering.");var r=t.parentNode;if(r){var s=t.nextSibling;r.removeChild(t),t.innerHTML=e,s?r.insertBefore(t,s):r.appendChild(t)}else t.innerHTML=e})};t.exports=h},{"./ReactDOMIDOperations":36,"./ReactMarkupChecksum":54,"./ReactMount":55,"./ReactPerf":60,"./ReactReconcileTransaction":66,"./getReactRootElementInContainer":104,"./invariant":108}],28:[function(e,t,n){var r=e("./ReactComponentBrowserEnvironment"),i=r;t.exports=i},{"./ReactComponentBrowserEnvironment":27}],29:[function(e,t,n){function S(e,t,n){for(var r in t)t.hasOwnProperty(r)&&p(typeof t[r]=="function","%s: %s type `%s` is invalid; it must be a function, usually from React.PropTypes.",e.displayName||"ReactCompositeComponent",c[n],r)}function x(e,t){var n=w[t];B.hasOwnProperty(t)&&p(n===b.OVERRIDE_BASE,"ReactCompositeComponentInterface: You are attempting to override `%s` from your class specification. Ensure that your method names do not overlap with React methods.",t),e.hasOwnProperty(t)&&p(n===b.DEFINE_MANY||n===b.DEFINE_MANY_MERGED,"ReactCompositeComponentInterface: You are attempting to define `%s` on your component more than once. This conflict may be due to a mixin.",t)}function T(e){var t=e._compositeLifeCycleState;p(e.isMounted()||t===H.MOUNTING,"replaceState(...): Can only update a mounted or mounting component."),p(t!==H.RECEIVING_STATE,"replaceState(...): Cannot update during an existing state transition (such as within `render`). This could potentially cause an infinite loop so it is forbidden."),p(t!==H.UNMOUNTING,"replaceState(...): Cannot update while unmounting component. This usually means you called setState() on an unmounted component.")}function N(e,t){p(!F(t),"ReactCompositeComponent: You're attempting to use a component class as a mixin. Instead, just use a regular object."),p(!r.isValidComponent(t),"ReactCompositeComponent: You're attempting to use a component as a mixin. Instead, just use a regular object.");var n=e.componentConstructor,i=n.prototype;for(var s in t){var o=t[s];if(!t.hasOwnProperty(s))continue;x(i,s);if(E.hasOwnProperty(s))E[s](e,o);else{var u=s in w,a=s in i,f=o&&o.__reactDontBind,l=typeof o=="function",c=l&&!u&&!a&&!f;c?(i.__reactAutoBindMap||(i.__reactAutoBindMap={}),i.__reactAutoBindMap[s]=o,i[s]=o):a?w[s]===b.DEFINE_MANY_MERGED?i[s]=L(i[s],o):i[s]=A(i[s],o):i[s]=o}}}function C(e,t){if(!t)return;for(var n in t){var r=t[n];if(!t.hasOwnProperty(n)||!r)return;var i=n in e,s=r;if(i){var o=e[n],u=typeof o,a=typeof r;p(u==="function"&&a==="function","ReactCompositeComponent: You are attempting to define `%s` on your component more than once, but that is only supported for functions, which are chained together. This conflict may be due to a mixin.",n),s=A(o,r)}e[n]=s,e.componentConstructor[n]=s}}function k(e,t){return p(e&&t&&typeof e=="object"&&typeof t=="object","mergeObjectsWithNoDuplicateKeys(): Cannot merge non-objects"),g(t,function(t,n){p(e[n]===undefined,"mergeObjectsWithNoDuplicateKeys(): Tried to merge two objects with the same key: %s",n),e[n]=t}),e}function L(e,t){return function(){var r=e.apply(this,arguments),i=t.apply(this,arguments);return r==null?i:i==null?r:k(r,i)}}function A(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}}function F(e){return e instanceof Function&&"componentConstructor"in e&&e.componentConstructor instanceof Function}var r=e("./ReactComponent"),i=e("./ReactContext"),s=e("./ReactCurrentOwner"),o=e("./ReactErrorUtils"),u=e("./ReactOwner"),a=e("./ReactPerf"),f=e("./ReactPropTransferer"),l=e("./ReactPropTypeLocations"),c=e("./ReactPropTypeLocationNames"),h=e("./ReactUpdates"),p=e("./invariant"),d=e("./keyMirror"),v=e("./merge"),m=e("./mixInto"),g=e("./objMap"),y=e("./shouldUpdateReactComponent"),b=d({DEFINE_ONCE:null,DEFINE_MANY:null,OVERRIDE_BASE:null,DEFINE_MANY_MERGED:null}),w={mixins:b.DEFINE_MANY,statics:b.DEFINE_MANY,propTypes:b.DEFINE_MANY,contextTypes:b.DEFINE_MANY,childContextTypes:b.DEFINE_MANY,getDefaultProps:b.DEFINE_MANY_MERGED,getInitialState:b.DEFINE_MANY_MERGED,getChildContext:b.DEFINE_MANY_MERGED,render:b.DEFINE_ONCE,componentWillMount:b.DEFINE_MANY,componentDidMount:b.DEFINE_MANY,componentWillReceiveProps:b.DEFINE_MANY,shouldComponentUpdate:b.DEFINE_ONCE,componentWillUpdate:b.DEFINE_MANY,componentDidUpdate:b.DEFINE_MANY,componentWillUnmount:b.DEFINE_MANY,updateComponent:b.OVERRIDE_BASE},E={displayName:function(e,t){e.componentConstructor.displayName=t},mixins:function(e,t){if(t)for(var n=0;n<t.length;n++)N(e,t[n])},childContextTypes:function(e,t){var n=e.componentConstructor;S(n,t,l.childContext),n.childContextTypes=v(n.childContextTypes,t)},contextTypes:function(e,t){var n=e.componentConstructor;S(n,t,l.context),n.contextTypes=v(n.contextTypes,t)},propTypes:function(e,t){var n=e.componentConstructor;S(n,t,l.prop),n.propTypes=v(n.propTypes,t)},statics:function(e,t){C(e,t)}},O={constructor:!0,construct:!0,isOwnedBy:!0,mountComponent:!0,mountComponentIntoNode:!0,props:!0,type:!0,_checkPropTypes:!0,_mountComponentIntoNode:!0,_processContext:!0},M={},_=function(e,t){if(e.__hasBeenMounted)return;var n=e.constructor.displayName||"Unknown",r=s.current,i=r&&r.constructor.displayName||"Unknown",o=t+"|"+n+"|"+i;if(M.hasOwnProperty(o))return;M[o]=!0;var u=r?" in "+i+".":" at the top level.",a="<"+n+" />.type."+t+"(...)";console.warn('Invalid access to component property "'+t+'" on '+n+u+" See http://fb.me/react-warning-descriptors ."+" Use a static method instead: "+a)},D=function(e,t,n){Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:function(){return this!==e&&_(this,n),t[n]},set:function(r){this!==e?(_(this,n),Object.defineProperty(this,n,{enumerable:!0,configurable:!0,writable:!0,value:r})):t[n]=r}})},P=function(e){try{var t=Object.create(e);for(var n in e){if(O.hasOwnProperty(n))continue;D(t,e,n)}return t.mountComponent=function(){return this.__hasBeenMounted=!0,e.mountComponent.apply(this,arguments)},t}catch(r){return e}},H=d({MOUNTING:null,UNMOUNTING:null,RECEIVING_PROPS:null,RECEIVING_STATE:null}),B={construct:function(e,t){r.Mixin.construct.apply(this,arguments),this.state=null,this._pendingState=null,this.context=this._processContext(i.current),this._currentContext=i.current,this._pendingContext=null,this._compositeLifeCycleState=null},isMounted:function(){return r.Mixin.isMounted.call(this)&&this._compositeLifeCycleState!==H.MOUNTING},mountComponent:a.measure("ReactCompositeComponent","mountComponent",function(e,t,n){r.Mixin.mountComponent.call(this,e,t,n),this._compositeLifeCycleState=H.MOUNTING,this._defaultProps=this.getDefaultProps?this.getDefaultProps():null,this.props=this._processProps(this.props),this.__reactAutoBindMap&&this._bindAutoBindMethods(),this.state=this.getInitialState?this.getInitialState():null,p(typeof this.state=="object"&&!Array.isArray(this.state),"%s.getInitialState(): must return an object or null",this.constructor.displayName||"ReactCompositeComponent"),this._pendingState=null,this._pendingForceUpdate=!1,this.componentWillMount&&(this.componentWillMount(),this._pendingState&&(this.state=this._pendingState,this._pendingState=null)),this._renderedComponent=this._renderValidatedComponent(),this._compositeLifeCycleState=null;var i=this._renderedComponent.mountComponent(e,t,n+1);return this.componentDidMount&&t.getReactMountReady().enqueue(this,this.componentDidMount),i}),unmountComponent:function(){this._compositeLifeCycleState=H.UNMOUNTING,this.componentWillUnmount&&this.componentWillUnmount(),this._compositeLifeCycleState=null,this._defaultProps=null,this._renderedComponent.unmountComponent(),this._renderedComponent=null,r.Mixin.unmountComponent.call(this),this.refs&&(this.refs=null)},setState:function(e,t){p(typeof e=="object"||e==null,"setState(...): takes an object of state variables to update."),e==null&&console.warn("setState(...): You passed an undefined or null state object; instead, use forceUpdate()."),this.replaceState(v(this._pendingState||this.state,e),t)},replaceState:function(e,t){T(this),this._pendingState=e,h.enqueueUpdate(this,t)},_processContext:function(e){var t=null,n=this.constructor.contextTypes;if(n){t={};for(var r in n)t[r]=e[r];this._checkPropTypes(n,t,l.context)}return t},_processChildContext:function(e){var t=this.getChildContext&&this.getChildContext(),n=this.constructor.displayName||"ReactCompositeComponent";if(t){p(typeof this.constructor.childContextTypes=="object","%s.getChildContext(): childContextTypes must be defined in order to use getChildContext().",n),this._checkPropTypes(this.constructor.childContextTypes,t,l.childContext);for(var r in t)p(r in this.constructor.childContextTypes,'%s.getChildContext(): key "%s" is not defined in childContextTypes.',n,r);return v(e,t)}return e},_processProps:function(e){var t=v(e),n=this._defaultProps;for(var r in n)typeof t[r]=="undefined"&&(t[r]=n[r]);var i=this.constructor.propTypes;return i&&this._checkPropTypes(i,t,l.prop),t},_checkPropTypes:function(e,t,n){var r=this.constructor.displayName;for(var i in e)e.hasOwnProperty(i)&&e[i](t,i,r,n)},performUpdateIfNecessary:function(){var e=this._compositeLifeCycleState;if(e===H.MOUNTING||e===H.RECEIVING_PROPS)return;r.Mixin.performUpdateIfNecessary.call(this)},_performUpdateIfNecessary:function(e){if(this._pendingProps==null&&this._pendingState==null&&this._pendingContext==null&&!this._pendingForceUpdate)return;var t=this._pendingContext||this._currentContext,n=this._processContext(t);this._pendingContext=null;var r=this.props;this._pendingProps!=null&&(r=this._processProps(this._pendingProps),this._pendingProps=null,this._compositeLifeCycleState=H.RECEIVING_PROPS,this.componentWillReceiveProps&&this.componentWillReceiveProps(r,n)),this._compositeLifeCycleState=H.RECEIVING_STATE;var i=this._pendingOwner,s=this._pendingState||this.state;this._pendingState=null;try{this._pendingForceUpdate||!this.shouldComponentUpdate||this.shouldComponentUpdate(r,s,n)?(this._pendingForceUpdate=!1,this._performComponentUpdate(r,i,s,t,n,e)):(this.props=r,this._owner=i,this.state=s,this._currentContext=t,this.context=n)}finally{this._compositeLifeCycleState=null}},_performComponentUpdate:function(e,t,n,r,i,s){var o=this.props,u=this._owner,a=this.state,f=this.context;this.componentWillUpdate&&this.componentWillUpdate(e,n,i),this.props=e,this._owner=t,this.state=n,this._currentContext=r,this.context=i,this.updateComponent(s,o,u,a,f),this.componentDidUpdate&&s.getReactMountReady().enqueue(this,this.componentDidUpdate.bind(this,o,a,f))},receiveComponent:function(e,t){if(e===this)return;this._pendingContext=e._currentContext,r.Mixin.receiveComponent.call(this,e,t)},updateComponent:a.measure("ReactCompositeComponent","updateComponent",function(e,t,n,i,s){r.Mixin.updateComponent.call(this,e,t,n);var o=this._renderedComponent,u=this._renderValidatedComponent();if(y(o,u))o.receiveComponent(u,e);else{var a=this._rootNodeID,f=o._rootNodeID;o.unmountComponent(),this._renderedComponent=u;var l=u.mountComponent(a,e,this._mountDepth+1);r.BackendIDOperations.dangerouslyReplaceNodeWithMarkupByID(f,l)}}),forceUpdate:function(e){var t=this._compositeLifeCycleState;p(this.isMounted()||t===H.MOUNTING,"forceUpdate(...): Can only force an update on mounted or mounting components."),p(t!==H.RECEIVING_STATE&&t!==H.UNMOUNTING,"forceUpdate(...): Cannot force an update while unmounting component or during an existing state transition (such as within `render`)."),this._pendingForceUpdate=!0,h.enqueueUpdate(this,e)},_renderValidatedComponent:a.measure("ReactCompositeComponent","_renderValidatedComponent",function(){var e,t=i.current;i.current=this._processChildContext(this._currentContext),s.current=this;try{e=this.render()}finally{i.current=t,s.current=null}return p(r.isValidComponent(e),"%s.render(): A valid ReactComponent must be returned. You may have returned null, undefined, an array, or some other invalid object.",this.constructor.displayName||"ReactCompositeComponent"),e}),_bindAutoBindMethods:function(){for(var e in this.__reactAutoBindMap){if(!this.__reactAutoBindMap.hasOwnProperty(e))continue;var t=this.__reactAutoBindMap[e];this[e]=this._bindAutoBindMethod(o.guard(t,this.constructor.displayName+"."+e))}},_bindAutoBindMethod:function(e){var t=this,n=function(){return e.apply(t,arguments)};n.__reactBoundContext=t,n.__reactBoundMethod=e,n.__reactBoundArguments=null;var r=t.constructor.displayName,i=n.bind;return n.bind=function(s){var o=Array.prototype.slice.call(arguments,1);if(s!==t&&s!==null)console.warn("bind(): React component methods may only be bound to the component instance. See "+r);else if(!o.length)return console.warn("bind(): You are binding a component method to the component. React does this for you automatically in a high-performance way, so you can safely remove this call. See "+r),n;var u=i.apply(n,arguments);return u.__reactBoundContext=t,u.__reactBoundMethod=e,u.__reactBoundArguments=o,u},n}},j=function(){};m(j,r.Mixin),m(j,u.Mixin),m(j,f.Mixin),m(j,B);var I={LifeCycle:H,Base:j,createClass:function(e){var t=function(){};t.prototype=new j,t.prototype.constructor=t;var n=function(e,n){var r=new t;return r.construct.apply(r,arguments),r};n.componentConstructor=t,t.ConvenienceConstructor=n,n.originalSpec=e,N(n,e),p(t.prototype.render,"createClass(...): Class specification must implement a `render` method."),t.prototype.componentShouldUpdate&&console.warn((e.displayName||"A component")+" has a method called "+"componentShouldUpdate(). Did you mean shouldComponentUpdate()? "+"The name is phrased as a question because the function is "+"expected to return a value."),n.type=t,t.prototype.type=t;for(var r in w)t.prototype[r]||(t.prototype[r]=null);return t.prototype=P(t.prototype),n},isValidClass:F};t.exports=I},{"./ReactComponent":26,"./ReactContext":30,"./ReactCurrentOwner":31,"./ReactErrorUtils":47,"./ReactOwner":59,"./ReactPerf":60,"./ReactPropTransferer":61,"./ReactPropTypeLocationNames":62,"./ReactPropTypeLocations":63,"./ReactUpdates":70,"./invariant":108,"./keyMirror":114,"./merge":117,"./mixInto":120,"./objMap":121,"./shouldUpdateReactComponent":126}],30:[function(e,t,n){var r=e("./merge"),i={current:{},withContext:function(e,t){var n,s=i.current;i.current=r(s,e);try{n=t()}finally{i.current=s}return n}};t.exports=i},{"./merge":117}],31:[function(e,t,n){var r={current:null};t.exports=r},{}],32:[function(e,t,n){function o(e,t){var n=function(){};n.prototype=new r(e,t),n.prototype.constructor=n,n.displayName=e;var i=function(e,t){var r=new n;return r.construct.apply(r,arguments),r};return i.type=n,n.prototype.type=n,n.ConvenienceConstructor=i,i.componentConstructor=n,i}var r=e("./ReactDOMComponent"),i=e("./mergeInto"),s=e("./objMapKeyVal"),u=s({a:!1,abbr:!1,address:!1,area:!1,article:!1,aside:!1,audio:!1,b:!1,base:!1,bdi:!1,bdo:!1,big:!1,blockquote:!1,body:!1,br:!0,button:!1,canvas:!1,caption:!1,cite:!1,code:!1,col:!0,colgroup:!1,data:!1,datalist:!1,dd:!1,del:!1,details:!1,dfn:!1,div:!1,dl:!1,dt:!1,em:!1,embed:!0,fieldset:!1,figcaption:!1,figure:!1,footer:!1,form:!1,h1:!1,h2:!1,h3:!1,h4:!1,h5:!1,h6:!1,head:!1,header:!1,hr:!0,html:!1,i:!1,iframe:!1,img:!0,input:!0,ins:!1,kbd:!1,keygen:!0,label:!1,legend:!1,li:!1,link:!1,main:!1,map:!1,mark:!1,menu:!1,menuitem:!1,meta:!0,meter:!1,nav:!1,noscript:!1,object:!1,ol:!1,optgroup:!1,option:!1,output:!1,p:!1,param:!0,pre:!1,progress:!1,q:!1,rp:!1,rt:!1,ruby:!1,s:!1,samp:!1,script:!1,section:!1,select:!1,small:!1,source:!1,span:!1,strong:!1,style:!1,sub:!1,summary:!1,sup:!1,table:!1,tbody:!1,td:!1,textarea:!1,tfoot:!1,th:!1,thead:!1,time:!1,title:!1,tr:!1,track:!0,u:!1,ul:!1,"var":!1,video:!1,wbr:!1,circle:!1,defs:!1,g:!1,line:!1,linearGradient:!1,path:!1,polygon:!1,polyline:!1,radialGradient:!1,rect:!1,stop:!1,svg:!1,text:!1},o),a={injectComponentClasses:function(e){i(u,e)}};u.injection=a,t.exports=u},{"./ReactDOMComponent":34,"./mergeInto":119,"./objMapKeyVal":122}],33:[function(e,t,n){var r=e("./AutoFocusMixin"),i=e("./ReactCompositeComponent"),s=e("./ReactDOM"),o=e("./keyMirror"),u=s.button,a=o({onClick:!0,onDoubleClick:!0,onMouseDown:!0,onMouseMove:!0,onMouseUp:!0,onClickCapture:!0,onDoubleClickCapture:!0,onMouseDownCapture:!0,onMouseMoveCapture:!0,onMouseUpCapture:!0}),f=i.createClass({displayName:"ReactDOMButton",mixins:[r],render:function(){var e={};for(var t in this.props)this.props.hasOwnProperty(t)&&(!this.props.disabled||!a[t])&&(e[t]=this.props[t]);return u(e,this.props.children)}});t.exports=f},{"./AutoFocusMixin":1,"./ReactCompositeComponent":29,"./ReactDOM":32,"./keyMirror":114}],34:[function(e,t,n){function S(e){if(!e)return;h(e.children==null||e.dangerouslySetInnerHTML==null,"Can only set one of `children` or `props.dangerouslySetInnerHTML`."),h(e.style==null||typeof e.style=="object","The `style` prop expects a mapping from style properties to values, not a string.")}function x(e,t,n,r){var i=a.findReactContainerForID(e);if(i){var s=i.nodeType===E?i.ownerDocument:i;g(t,s)}r.getPutListenerQueue().enqueuePutListener(e,t,n)}function T(e,t){this._tagOpen="<"+e,this._tagClose=t?"":"</"+e+">",this.tagName=e.toUpperCase()}var r=e("./CSSPropertyOperations"),i=e("./DOMProperty"),s=e("./DOMPropertyOperations"),o=e("./ReactComponent"),u=e("./ReactEventEmitter"),a=e("./ReactMount"),f=e("./ReactMultiChild"),l=e("./ReactPerf"),c=e("./escapeTextForBrowser"),h=e("./invariant"),p=e("./keyOf"),d=e("./merge"),v=e("./mixInto"),m=u.deleteListener,g=u.listenTo,y=u.registrationNameModules,b={string:!0,number:!0},w=p({style:null}),E=1;T.Mixin={mountComponent:l.measure("ReactDOMComponent","mountComponent",function(e,t,n){return o.Mixin.mountComponent.call(this,e,t,n),S(this.props),this._createOpenTagMarkupAndPutListeners(t)+this._createContentMarkup(t)+this._tagClose}),_createOpenTagMarkupAndPutListeners:function(e){var t=this.props,n=this._tagOpen;for(var i in t){if(!t.hasOwnProperty(i))continue;var o=t[i];if(o==null)continue;if(y[i])x(this._rootNodeID,i,o,e);else{i===w&&(o&&(o=t.style=d(t.style)),o=r.createMarkupForStyles(o));var u=s.createMarkupForProperty(i,o);u&&(n+=" "+u)}}var a=s.createMarkupForID(this._rootNodeID);return n+" "+a+">"},_createContentMarkup:function(e){var t=this.props.dangerouslySetInnerHTML;if(t!=null){if(t.__html!=null)return t.__html}else{var n=b[typeof this.props.children]?this.props.children:null,r=n!=null?null:this.props.children;if(n!=null)return c(n);if(r!=null){var i=this.mountChildren(r,e);return i.join("")}}return""},receiveComponent:function(e,t){S(e.props),o.Mixin.receiveComponent.call(this,e,t)},updateComponent:l.measure("ReactDOMComponent","updateComponent",function(e,t,n){o.Mixin.updateComponent.call(this,e,t,n),this._updateDOMProperties(t,e),this._updateDOMChildren(t,e)}),_updateDOMProperties:function(e,t){var n=this.props,r,s,u;for(r in e){if(n.hasOwnProperty(r)||!e.hasOwnProperty(r))continue;if(r===w){var a=e[r];for(s in a)a.hasOwnProperty(s)&&(u=u||{},u[s]="")}else y[r]?m(this._rootNodeID,r):(i.isStandardName[r]||i.isCustomAttribute(r))&&o.BackendIDOperations.deletePropertyByID(this._rootNodeID,r)}for(r in n){var f=n[r],l=e[r];if(!n.hasOwnProperty(r)||f===l)continue;if(r===w){f&&(f=n.style=d(f));if(l){for(s in l)l.hasOwnProperty(s)&&!f.hasOwnProperty(s)&&(u=u||{},u[s]="");for(s in f)f.hasOwnProperty(s)&&l[s]!==f[s]&&(u=u||{},u[s]=f[s])}else u=f}else y[r]?x(this._rootNodeID,r,f,t):(i.isStandardName[r]||i.isCustomAttribute(r))&&o.BackendIDOperations.updatePropertyByID(this._rootNodeID,r,f)}u&&o.BackendIDOperations.updateStylesByID(this._rootNodeID,u)},_updateDOMChildren:function(e,t){var n=this.props,r=b[typeof e.children]?e.children:null,i=b[typeof n.children]?n.children:null,s=e.dangerouslySetInnerHTML&&e.dangerouslySetInnerHTML.__html,u=n.dangerouslySetInnerHTML&&n.dangerouslySetInnerHTML.__html,a=r!=null?null:e.children,f=i!=null?null:n.children,l=r!=null||s!=null,c=i!=null||u!=null;a!=null&&f==null?this.updateChildren(null,t):l&&!c&&this.updateTextContent(""),i!=null?r!==i&&this.updateTextContent(""+i):u!=null?s!==u&&o.BackendIDOperations.updateInnerHTMLByID(this._rootNodeID,u):f!=null&&this.updateChildren(f,t)},unmountComponent:function(){this.unmountChildren(),u.deleteAllListeners(this._rootNodeID),o.Mixin.unmountComponent.call(this)}},v(T,o.Mixin),v(T,T.Mixin),v(T,f.Mixin),t.exports=T},{"./CSSPropertyOperations":3,"./DOMProperty":8,"./DOMPropertyOperations":9,"./ReactComponent":26,"./ReactEventEmitter":48,"./ReactMount":55,"./ReactMultiChild":57,"./ReactPerf":60,"./escapeTextForBrowser":96,"./invariant":108,"./keyOf":115,"./merge":117,"./mixInto":120}],35:[function(e,t,n){var r=e("./ReactCompositeComponent"),i=e("./ReactDOM"),s=e("./ReactEventEmitter"),o=e("./EventConstants"),u=i.form,a=r.createClass({displayName:"ReactDOMForm",render:function(){return this.transferPropsTo(u(null,this.props.children))},componentDidMount:function(){s.trapBubbledEvent(o.topLevelTypes.topReset,"reset",this.getDOMNode()),s.trapBubbledEvent(o.topLevelTypes.topSubmit,"submit",this.getDOMNode())}});t.exports=a},{"./EventConstants":14,"./ReactCompositeComponent":29,"./ReactDOM":32,"./ReactEventEmitter":48}],36:[function(e,t,n){var r=e("./CSSPropertyOperations"),i=e("./DOMChildrenOperations"),s=e("./DOMPropertyOperations"),o=e("./ReactMount"),u=e("./ReactPerf"),a=e("./invariant"),f={dangerouslySetInnerHTML:"`dangerouslySetInnerHTML` must be set using `updateInnerHTMLByID()`.",style:"`style` must be set using `updateStylesByID()`."},l,c={updatePropertyByID:u.measure("ReactDOMIDOperations","updatePropertyByID",function(e,t,n){var r=o.getNode(e);a(!f.hasOwnProperty(t),"updatePropertyByID(...): %s",f[t]),n!=null?s.setValueForProperty(r,t,n):s.deleteValueForProperty(r,t)}),deletePropertyByID:u.measure("ReactDOMIDOperations","deletePropertyByID",function(e,t,n){var r=o.getNode(e);a(!f.hasOwnProperty(t),"updatePropertyByID(...): %s",f[t]),s.deleteValueForProperty(r,t,n)}),updateStylesByID:u.measure("ReactDOMIDOperations","updateStylesByID",function(e,t){var n=o.getNode(e);r.setValueForStyles(n,t)}),updateInnerHTMLByID:u.measure("ReactDOMIDOperations","updateInnerHTMLByID",function(e,t){var n=o.getNode(e);if(l===undefined){var r=document.createElement("div");r.innerHTML=" ",l=r.innerHTML===""}l&&n.parentNode.replaceChild(n,n),l&&t.match(/^[ \r\n\t\f]/)?(n.innerHTML=""+t,n.firstChild.deleteData(0,1)):n.innerHTML=t}),updateTextContentByID:u.measure("ReactDOMIDOperations","updateTextContentByID",function(e,t){var n=o.getNode(e);i.updateTextContent(n,t)}),dangerouslyReplaceNodeWithMarkupByID:u.measure("ReactDOMIDOperations","dangerouslyReplaceNodeWithMarkupByID",function(e,t){var n=o.getNode(e);i.dangerouslyReplaceNodeWithMarkup(n,t)}),dangerouslyProcessChildrenUpdates:u.measure("ReactDOMIDOperations","dangerouslyProcessChildrenUpdates",function(e,t){for(var n=0;n<e.length;n++)e[n].parentNode=o.getNode(e[n].parentID);i.processUpdates(e,t)})};t.exports=c},{"./CSSPropertyOperations":3,"./DOMChildrenOperations":7,"./DOMPropertyOperations":9,"./ReactMount":55,"./ReactPerf":60,"./invariant":108}],37:[function(e,t,n){var r=e("./ReactCompositeComponent"),i=e("./ReactDOM"),s=e("./ReactEventEmitter"),o=e("./EventConstants"),u=i.img,a=r.createClass({displayName:"ReactDOMImg",tagName:"IMG",render:function(){return u(this.props)},componentDidMount:function(){var e=this.getDOMNode();s.trapBubbledEvent(o.topLevelTypes.topLoad,"load",e),s.trapBubbledEvent(o.topLevelTypes.topError,"error",e)}});t.exports=a},{"./EventConstants":14,"./ReactCompositeComponent":29,"./ReactDOM":32,"./ReactEventEmitter":48}],38:[function(e,t,n){var r=e("./AutoFocusMixin"),i=e("./DOMPropertyOperations"),s=e("./LinkedValueUtils"),o=e("./ReactCompositeComponent"),u=e("./ReactDOM"),a=e("./ReactMount"),f=e("./invariant"),l=e("./merge"),c=u.input,h={},p=o.createClass({displayName:"ReactDOMInput",mixins:[r,s.Mixin],getInitialState:function(){var e=this.props.defaultValue;return{checked:this.props.defaultChecked||!1,value:e!=null?e:null}},shouldComponentUpdate:function(){return!this._isChanging},render:function(){var e=l(this.props);e.defaultChecked=null,e.defaultValue=null;var t=s.getValue(this);e.value=t!=null?t:this.state.value;var n=s.getChecked(this);return e.checked=n!=null?n:this.state.checked,e.onChange=this._handleChange,c(e,this.props.children)},componentDidMount:function(){var e=a.getID(this.getDOMNode());h[e]=this},componentWillUnmount:function(){var e=this.getDOMNode(),t=a.getID(e);delete h[t]},componentDidUpdate:function(e,t,n){var r=this.getDOMNode();this.props.checked!=null&&i.setValueForProperty(r,"checked",this.props.checked||!1);var o=s.getValue(this);o!=null&&i.setValueForProperty(r,"value",""+o)},_handleChange:function(e){var t,n=s.getOnChange(this);n&&(this._isChanging=!0,t=n.call(this,e),this._isChanging=!1),this.setState({checked:e.target.checked,value:e.target.value});var r=this.props.name;if(this.props.type==="radio"&&r!=null){var i=this.getDOMNode(),o=i;while(o.parentNode)o=o.parentNode;var u=o.querySelectorAll("input[name="+JSON.stringify(""+r)+'][type="radio"]');for(var l=0,c=u.length;l<c;l++){var p=u[l];if(p===i||p.form!==i.form)continue;var d=a.getID(p);f(d,"ReactDOMInput: Mixing React and non-React radio inputs with the same `name` is not supported.");var v=h[d];f(v,"ReactDOMInput: Unknown radio button ID %s.",d),v.setState({checked:!1})}}return t}});t.exports=p},{"./AutoFocusMixin":1,"./DOMPropertyOperations":9,"./LinkedValueUtils":21,"./ReactCompositeComponent":29,"./ReactDOM":32,"./ReactMount":55,"./invariant":108,"./merge":117}],39:[function(e,t,n){var r=e("./ReactCompositeComponent"),i=e("./ReactDOM"),s=i.option,o=r.createClass({displayName:"ReactDOMOption",componentWillMount:function(){this.props.selected!=null&&console.warn("Use the `defaultValue` or `value` props on <select> instead of setting `selected` on <option>.")},render:function(){return s(this.props,this.props.children)}});t.exports=o},{"./ReactCompositeComponent":29,"./ReactDOM":32}],40:[function(e,t,n){function l(e,t,n){if(e[t]==null)return;e.multiple?u(Array.isArray(e[t]),"The `%s` prop supplied to <select> must be an array if `multiple` is true.",t):u(!Array.isArray(e[t]),"The `%s` prop supplied to <select> must be a scalar value if `multiple` is false.",t)}function c(e,t){var n=e.props.multiple,r=t!=null?t:e.state.value,i=e.getDOMNode().options,s,o,u;if(n){s={};for(o=0,u=r.length;o<u;++o)s[""+r[o]]=!0}else s=""+r;for(o=0,u=i.length;o<u;o++){var a=n?s.hasOwnProperty(i[o].value):i[o].value===s;a!==i[o].selected&&(i[o].selected=a)}}var r=e("./AutoFocusMixin"),i=e("./LinkedValueUtils"),s=e("./ReactCompositeComponent"),o=e("./ReactDOM"),u=e("./invariant"),a=e("./merge"),f=o.select,h=s.createClass({displayName:"ReactDOMSelect",mixins:[r,i.Mixin],propTypes:{defaultValue:l,value:l},getInitialState:function(){return{value:this.props.defaultValue||(this.props.multiple?[]:"")}},componentWillReceiveProps:function(e){!this.props.multiple&&e.multiple?this.setState({value:[this.state.value]}):this.props.multiple&&!e.multiple&&this.setState({value:this.state.value[0]})},shouldComponentUpdate:function(){return!this._isChanging},render:function(){var e=a(this.props);return e.onChange=this._handleChange,e.value=null,f(e,this.props.children)},componentDidMount:function(){c(this,i.getValue(this))},componentDidUpdate:function(){var e=i.getValue(this);e!=null&&c(this,e)},_handleChange:function(e){var t,n=i.getOnChange(this);n&&(this._isChanging=!0,t=n.call(this,e),this._isChanging=!1);var r;if(this.props.multiple){r=[];var s=e.target.options;for(var o=0,u=s.length;o<u;o++)s[o].selected&&r.push(s[o].value)}else r=e.target.value;return this.setState({value:r}),t}});t.exports=h},{"./AutoFocusMixin":1,"./LinkedValueUtils":21,"./ReactCompositeComponent":29,"./ReactDOM":32,"./invariant":108,"./merge":117}],41:[function(e,t,n){function s(e){var t=document.selection,n=t.createRange(),r=n.text.length,i=n.duplicate();i.moveToElementText(e),i.setEndPoint("EndToStart",n);var s=i.text.length,o=s+r;return{start:s,end:o}}function o(e){var t=window.getSelection();if(t.rangeCount===0)return null;var n=t.anchorNode,r=t.anchorOffset,i=t.focusNode,s=t.focusOffset,o=t.getRangeAt(0),u=o.toString().length,a=o.cloneRange();a.selectNodeContents(e),a.setEnd(o.startContainer,o.startOffset);var f=a.toString().length,l=f+u,c=document.createRange();c.setStart(n,r),c.setEnd(i,s);var h=c.collapsed;return c.detach(),{start:h?l:f,end:h?f:l}}function u(e,t){var n=document.selection.createRange().duplicate(),r,i;typeof t.end=="undefined"?(r=t.start,i=r):t.start>t.end?(r=t.end,i=t.start):(r=t.start,i=t.end),n.moveToElementText(e),n.moveStart("character",r),n.setEndPoint("EndToStart",n),n.moveEnd("character",i-r),n.select()}function a(e,t){var n=window.getSelection(),s=e[i()].length,o=Math.min(t.start,s),u=typeof t.end=="undefined"?o:Math.min(t.end,s);if(!n.extend&&o>u){var a=u;u=o,o=a}var f=r(e,o),l=r(e,u);if(f&&l){var c=document.createRange();c.setStart(f.node,f.offset),n.removeAllRanges(),o>u?(n.addRange(c),n.extend(l.node,l.offset)):(c.setEnd(l.node,l.offset),n.addRange(c)),c.detach()}}var r=e("./getNodeForCharacterOffset"),i=e("./getTextContentAccessor"),f={getOffsets:function(e){var t=document.selection?s:o;return t(e)},setOffsets:function(e,t){var n=document.selection?u:a;n(e,t)}};t.exports=f},{"./getNodeForCharacterOffset":103,"./getTextContentAccessor":105}],42:[function(e,t,n){var r=e("./AutoFocusMixin"),i=e("./DOMPropertyOperations"),s=e("./LinkedValueUtils"),o=e("./ReactCompositeComponent"),u=e("./ReactDOM"),a=e("./invariant"),f=e("./merge"),l=u.textarea,c=o.createClass({displayName:"ReactDOMTextarea",mixins:[r,s.Mixin],getInitialState:function(){var e=this.props.defaultValue,t=this.props.children;t!=null&&(console.warn("Use the `defaultValue` or `value` props instead of setting children on <textarea>."),a(e==null,"If you supply `defaultValue` on a <textarea>, do not pass children."),Array.isArray(t)&&(a(t.length<=1,"<textarea> can only have at most one child."),t=t[0]),e=""+t),e==null&&(e="");var n=s.getValue(this);return{initialValue:""+(n!=null?n:e),value:e}},shouldComponentUpdate:function(){return!this._isChanging},render:function(){var e=f(this.props),t=s.getValue(this);return a(e.dangerouslySetInnerHTML==null,"`dangerouslySetInnerHTML` does not make sense on <textarea>."),e.defaultValue=null,e.value=t!=null?t:this.state.value,e.onChange=this._handleChange,l(e,this.state.initialValue)},componentDidUpdate:function(e,t,n){var r=s.getValue(this);if(r!=null){var o=this.getDOMNode();i.setValueForProperty(o,"value",""+r)}},_handleChange:function(e){var t,n=s.getOnChange(this);return n&&(this._isChanging=!0,t=n.call(this,e),this._isChanging=!1),this.setState({value:e.target.value}),t}});t.exports=c},{"./AutoFocusMixin":1,"./DOMPropertyOperations":9,"./LinkedValueUtils":21,"./ReactCompositeComponent":29,"./ReactDOM":32,"./invariant":108,"./merge":117}],43:[function(e,t,n){function l(){this.reinitializeTransaction()}var r=e("./ReactUpdates"),i=e("./Transaction"),s=e("./emptyFunction"),o=e("./mixInto"),u={initialize:s,close:function(){h.isBatchingUpdates=!1}},a={initialize:s,close:r.flushBatchedUpdates.bind(r)},f=[a,u];o(l,i.Mixin),o(l,{getTransactionWrappers:function(){return f}});var c=new l,h={isBatchingUpdates:!1,batchedUpdates:function(e,t){var n=h.isBatchingUpdates;h.isBatchingUpdates=!0,n?e(t):c.perform(e,null,t)}};t.exports=h},{"./ReactUpdates":70,"./Transaction":84,"./emptyFunction":95,"./mixInto":120}],44:[function(e,t,n){function L(){r.EventEmitter.injectTopLevelCallbackCreator(h),r.EventPluginHub.injectEventPluginOrder(f),r.EventPluginHub.injectInstanceHandle(E),r.EventPluginHub.injectMount(S),r.EventPluginHub.injectEventPluginsByName({SimpleEventPlugin:N,EnterLeaveEventPlugin:l,ChangeEventPlugin:o,CompositionEventPlugin:a,MobileSafariClickEventPlugin:c,SelectEventPlugin:x}),r.DOM.injectComponentClasses({button:d,form:v,img:m,input:g,option:y,select:b,textarea:w,html:k(p.html),head:k(p.head),title:k(p.title),body:k(p.body)}),r.DOMProperty.injectDOMPropertyConfig(s),r.Updates.injectBatchingStrategy(C),r.RootIndex.injectCreateReactRootIndex(i.canUseDOM?u.createReactRootIndex:T.createReactRootIndex);var t=i.canUseDOM&&window.location.href||"";if(/[?&]react_perf\b/.test(t)){var n=e("./ReactDefaultPerf");n.start()}}var r=e("./ReactInjection"),i=e("./ExecutionEnvironment"),s=e("./DefaultDOMPropertyConfig"),o=e("./ChangeEventPlugin"),u=e("./ClientReactRootIndex"),a=e("./CompositionEventPlugin"),f=e("./DefaultEventPluginOrder"),l=e("./EnterLeaveEventPlugin"),c=e("./MobileSafariClickEventPlugin"),h=e("./ReactEventTopLevelCallback"),p=e("./ReactDOM"),d=e("./ReactDOMButton"),v=e("./ReactDOMForm"),m=e("./ReactDOMImg"),g=e("./ReactDOMInput"),y=e("./ReactDOMOption"),b=e("./ReactDOMSelect"),w=e("./ReactDOMTextarea"),E=e("./ReactInstanceHandles"),S=e("./ReactMount"),x=e("./SelectEventPlugin"),T=e("./ServerReactRootIndex"),N=e("./SimpleEventPlugin"),C=e("./ReactDefaultBatchingStrategy"),k=e("./createFullPageComponent");t.exports={inject:L}},{"./ChangeEventPlugin":4,"./ClientReactRootIndex":5,"./CompositionEventPlugin":6,"./DefaultDOMPropertyConfig":11,"./DefaultEventPluginOrder":12,"./EnterLeaveEventPlugin":13,"./ExecutionEnvironment":20,"./MobileSafariClickEventPlugin":22,"./ReactDOM":32,"./ReactDOMButton":33,"./ReactDOMForm":35,"./ReactDOMImg":37,"./ReactDOMInput":38,"./ReactDOMOption":39,"./ReactDOMSelect":40,"./ReactDOMTextarea":42,"./ReactDefaultBatchingStrategy":43,"./ReactDefaultPerf":45,"./ReactEventTopLevelCallback":50,"./ReactInjection":51,"./ReactInstanceHandles":53,"./ReactMount":55,"./SelectEventPlugin":71,"./ServerReactRootIndex":72,"./SimpleEventPlugin":73,"./createFullPageComponent":91}],45:[function(e,t,n){function a(e){return Math.floor(e*100)/100}var r=e("./DOMProperty"),i=e("./ReactDefaultPerfAnalysis"),s=e("./ReactMount"),o=e("./ReactPerf"),u=e("./performanceNow"),f={_allMeasurements:[],_injected:!1,start:function(){f._injected||o.injection.injectMeasure(f.measure),f._allMeasurements.length=0,o.enableMeasure=!0},stop:function(){o.enableMeasure=!1},getLastMeasurements:function(){return f._allMeasurements},printExclusive:function(e){e=e||f._allMeasurements;var t=i.getExclusiveSummary(e);console.table(t.map(function(e){return{"Component class name":e.componentName,"Total inclusive time (ms)":a(e.inclusive),"Total exclusive time (ms)":a(e.exclusive),"Exclusive time per instance (ms)":a(e.exclusive/e.count),Instances:e.count}})),console.log("Total time:",i.getTotalTime(e).toFixed(2)+" ms")},printInclusive:function(e){e=e||f._allMeasurements;var t=i.getInclusiveSummary(e);console.table(t.map(function(e){return{"Owner > component":e.componentName,"Inclusive time (ms)":a(e.time),Instances:e.count}})),console.log("Total time:",i.getTotalTime(e).toFixed(2)+" ms")},printWasted:function(e){e=e||f._allMeasurements;var t=i.getInclusiveSummary(e,!0);console.table(t.map(function(e){return{"Owner > component":e.componentName,"Wasted time (ms)":e.time,Instances:e.count}})),console.log("Total time:",i.getTotalTime(e).toFixed(2)+" ms")},printDOM:function(e){e=e||f._allMeasurements;var t=i.getDOMSummary(e);console.table(t.map(function(e){var t={};return t[r.ID_ATTRIBUTE_NAME]=e.id,t.type=e.type,t.args=JSON.stringify(e.args),t})),console.log("Total time:",i.getTotalTime(e).toFixed(2)+" ms")},_recordWrite:function(e,t,n,r){var i=f._allMeasurements[f._allMeasurements.length-1].writes;i[e]=i[e]||[],i[e].push({type:t,time:n,args:r})},measure:function(e,t,n){return function(){var r=Array.prototype.slice.call(arguments,0),i,o,a;if(t==="_renderNewRootComponent"||t==="flushBatchedUpdates")return f._allMeasurements.push({exclusive:{},inclusive:{},counts:{},writes:{},displayNames:{},totalTime:0}),a=u(),o=n.apply(this,r),f._allMeasurements[f._allMeasurements.length-1].totalTime=u()-a,o;if(e==="ReactDOMIDOperations"||e==="ReactComponentBrowserEnvironment"){a=u(),o=n.apply(this,r),i=u()-a;if(t==="mountImageIntoNode"){var l=s.getID(r[1]);f._recordWrite(l,t,i,r[0])}else t==="dangerouslyProcessChildrenUpdates"?r[0].forEach(function(e){var t={};e.fromIndex!==null&&(t.fromIndex=e.fromIndex),e.toIndex!==null&&(t.toIndex=e.toIndex),e.textContent!==null&&(t.textContent=e.textContent),e.markupIndex!==null&&(t.markup=r[1][e.markupIndex]),f._recordWrite(e.parentID,e.type,i,t)}):f._recordWrite(r[0],t,i,Array.prototype.slice.call(r,1));return o}if(e!=="ReactCompositeComponent"||t!=="mountComponent"&&t!=="updateComponent"&&t!=="_renderValidatedComponent")return n.apply(this,r);var c=t==="mountComponent"?r[0]:this._rootNodeID,h=t==="_renderValidatedComponent",p=f._allMeasurements[f._allMeasurements.length-1];h&&(p.counts[c]=p.counts[c]||0,p.counts[c]+=1),a=u(),o=n.apply(this,r),i=u()-a;var d=h?p.exclusive:p.inclusive;return d[c]=d[c]||0,d[c]+=i,p.displayNames[c]={current:this.constructor.displayName,owner:this._owner?this._owner.constructor.displayName:"<root>"},o}}};t.exports=f},{"./DOMProperty":8,"./ReactDefaultPerfAnalysis":46,"./ReactMount":55,"./ReactPerf":60,"./performanceNow":124}],46:[function(e,t,n){function o(e){var t=0;for(var n=0;n<e.length;n++){var r=e[n];t+=r.totalTime}return t}function u(e){var t=[];for(var n=0;n<e.length;n++){var r=e[n],i;for(i in r.writes)r.writes[i].forEach(function(e){t.push({id:i,type:s[e.type]||e.type,args:e.args})})}return t}function a(e){var t={},n;for(var s=0;s<e.length;s++){var o=e[s],u=r(o.exclusive,o.inclusive);for(var a in u)n=o.displayNames[a].current,t[n]=t[n]||{componentName:n,inclusive:0,exclusive:0,count:0},o.exclusive[a]&&(t[n].exclusive+=o.exclusive[a]),o.inclusive[a]&&(t[n].inclusive+=o.inclusive[a]),o.counts[a]&&(t[n].count+=o.counts[a])}var f=[];for(n in t)t[n].exclusive>=i&&f.push(t[n]);return f.sort(function(e,t){return t.exclusive-e.exclusive}),f}function f(e,t){var n={},s;for(var o=0;o<e.length;o++){var u=e[o],a=r(u.exclusive,u.inclusive),f;t&&(f=l(u));for(var c in a){if(t&&!f[c])continue;var h=u.displayNames[c];s=h.owner+" > "+h.current,n[s]=n[s]||{componentName:s,time:0,count:0},u.inclusive[c]&&(n[s].time+=u.inclusive[c]),u.counts[c]&&(n[s].count+=u.counts[c])}}var p=[];for(s in n)n[s].time>=i&&p.push(n[s]);return p.sort(function(e,t){return t.time-e.time}),p}function l(e){var t={},n=Object.keys(e.writes),i=r(e.exclusive,e.inclusive);for(var s in i){var o=!1;for(var u=0;u<n.length;u++)if(n[u].indexOf(s)===0){o=!0;break}!o&&e.counts[s]>0&&(t[s]=!0)}return t}var r=e("./merge"),i=1.2,s={mountImageIntoNode:"set innerHTML",INSERT_MARKUP:"set innerHTML",MOVE_EXISTING:"move",REMOVE_NODE:"remove",TEXT_CONTENT:"set textContent",updatePropertyByID:"update attribute",deletePropertyByID:"delete attribute",updateStylesByID:"update styles",updateInnerHTMLByID:"set innerHTML",dangerouslyReplaceNodeWithMarkupByID:"replace"},c={getExclusiveSummary:a,getInclusiveSummary:f,getDOMSummary:u,getTotalTime:o};t.exports=c},{"./merge":117}],47:[function(e,t,n){var r={guard:function(e,t){return e}};t.exports=r},{}],48:[function(e,t,n){function y(e){return e[g]==null&&(e[g]=v++,p[e[g]]={}),p[e[g]]}function b(e,t,n){i.listen(n,t,E.TopLevelCallbackCreator.createTopLevelCallback(e))}function w(e,t,n){i.capture(n,t,E.TopLevelCallbackCreator.createTopLevelCallback(e))}var r=e("./EventConstants"),i=e("./EventListener"),s=e("./EventPluginHub"),o=e("./EventPluginRegistry"),u=e("./ExecutionEnvironment"),a=e("./ReactEventEmitterMixin"),f=e("./ViewportMetrics"),l=e("./invariant"),c=e("./isEventSupported"),h=e("./merge"),p={},d=!1,v=0,m={topBlur:"blur",topChange:"change",topClick:"click",topCompositionEnd:"compositionend",topCompositionStart:"compositionstart",topCompositionUpdate:"compositionupdate",topContextMenu:"contextmenu",topCopy:"copy",topCut:"cut",topDoubleClick:"dblclick",topDrag:"drag",topDragEnd:"dragend",topDragEnter:"dragenter",topDragExit:"dragexit",topDragLeave:"dragleave",topDragOver:"dragover",topDragStart:"dragstart",topDrop:"drop",topFocus:"focus",topInput:"input",topKeyDown:"keydown",topKeyPress:"keypress",topKeyUp:"keyup",topMouseDown:"mousedown",topMouseMove:"mousemove",topMouseOut:"mouseout",topMouseOver:"mouseover",topMouseUp:"mouseup",topPaste:"paste",topScroll:"scroll",topSelectionChange:"selectionchange",topTouchCancel:"touchcancel",topTouchEnd:"touchend",topTouchMove:"touchmove",topTouchStart:"touchstart",topWheel:"wheel"},g="_reactListenersID"+String(Math.random()).slice(2),E=h(a,{TopLevelCallbackCreator:null,injection:{injectTopLevelCallbackCreator:function(e){E.TopLevelCallbackCreator=e}},setEnabled:function(e){l(u.canUseDOM,"setEnabled(...): Cannot toggle event listening in a Worker thread. This is likely a bug in the framework. Please report immediately."),E.TopLevelCallbackCreator&&E.TopLevelCallbackCreator.setEnabled(e)},isEnabled:function(){return!!E.TopLevelCallbackCreator&&!!E.TopLevelCallbackCreator.isEnabled()},listenTo:function(e,t){var n=t,i=y(n),s=o.registrationNameDependencies[e],u=r.topLevelTypes;for(var a=0,f=s.length;a<f;a++){var l=s[a];if(!i[l]){var h=u[l];h===u.topWheel?c("wheel")?b(u.topWheel,"wheel",n):c("mousewheel")?b(u.topWheel,"mousewheel",n):b(u.topWheel,"DOMMouseScroll",n):h===u.topScroll?c("scroll",!0)?w(u.topScroll,"scroll",n):b(u.topScroll,"scroll",window):h===u.topFocus||h===u.topBlur?(c("focus",!0)?(w(u.topFocus,"focus",n),w(u.topBlur,"blur",n)):c("focusin")&&(b(u.topFocus,"focusin",n),b(u.topBlur,"focusout",n)),i[u.topBlur]=!0,i[u.topFocus]=!0):m[l]&&b(h,m[l],n),i[l]=!0}}},ensureScrollValueMonitoring:function(){if(!d){var e=f.refreshScrollValues;i.listen(window,"scroll",e),i.listen(window,"resize",e),d=!0}},eventNameDispatchConfigs:s.eventNameDispatchConfigs,registrationNameModules:s.registrationNameModules,putListener:s.putListener,getListener:s.getListener,deleteListener:s.deleteListener,deleteAllListeners:s.deleteAllListeners,trapBubbledEvent:b,trapCapturedEvent:w});t.exports=E},{"./EventConstants":14,"./EventListener":15,"./EventPluginHub":16,"./EventPluginRegistry":17,"./ExecutionEnvironment":20,"./ReactEventEmitterMixin":49,"./ViewportMetrics":85,"./invariant":108,"./isEventSupported":109,"./merge":117}],49:[function(e,t,n){function s(e){r.enqueueEvents(e),r.processEventQueue()}var r=e("./EventPluginHub"),i=e("./ReactUpdates"),o={handleTopLevel:function(e,t,n,o){var u=r.extractEvents(e,t,n,o);i.batchedUpdates(s,u)}};t.exports=o},{"./EventPluginHub":16,"./ReactUpdates":70}],50:[function(e,t,n){function l(e){var t=o.getID(e),n=s.getReactRootIDFromNodeID(t),r=o.findReactContainerForID(n),i=o.getFirstReactDOM(r);return i}function c(e,t,n){var r=o.getFirstReactDOM(u(t))||window,s=r;while(s)n.ancestors.push(s),s=l(s);for(var a=0,f=n.ancestors.length;a<f;a++){r=n.ancestors[a];var c=o.getID(r)||"";i.handleTopLevel(e,r,c,t)}}function h(){this.ancestors=[]}var r=e("./PooledClass"),i=e("./ReactEventEmitter"),s=e("./ReactInstanceHandles"),o=e("./ReactMount"),u=e("./getEventTarget"),a=e("./mixInto"),f=!0;a(h,{destructor:function(){this.ancestors.length=0}}),r.addPoolingTo(h);var p={setEnabled:function(e){f=!!e},isEnabled:function(){return f},createTopLevelCallback:function(e){return function(t){if(!f)return;var n=h.getPooled();try{c(e,t,n)}finally{h.release(n)}}}};t.exports=p},{"./PooledClass":23,"./ReactEventEmitter":48,"./ReactInstanceHandles":53,"./ReactMount":55,"./getEventTarget":101,"./mixInto":120}],51:[function(e,t,n){var r=e("./DOMProperty"),i=e("./EventPluginHub"),s=e("./ReactDOM"),o=e("./ReactEventEmitter"),u=e("./ReactPerf"),a=e("./ReactRootIndex"),f=e("./ReactUpdates"),l={DOMProperty:r.injection,EventPluginHub:i.injection,DOM:s.injection,EventEmitter:o.injection,Perf:u.injection,RootIndex:a.injection,Updates:f.injection};t.exports=l},{"./DOMProperty":8,"./EventPluginHub":16,"./ReactDOM":32,"./ReactEventEmitter":48,"./ReactPerf":60,"./ReactRootIndex":67,"./ReactUpdates":70}],52:[function(e,t,n){function o(e){return i(document.documentElement,e)}var r=e("./ReactDOMSelection"),i=e("./containsNode"),s=e("./getActiveElement"),u={hasSelectionCapabilities:function(e){return e&&(e.nodeName==="INPUT"&&e.type==="text"||e.nodeName==="TEXTAREA"||e.contentEditable==="true")},getSelectionInformation:function(){var e=s();return{focusedElem:e,selectionRange:u.hasSelectionCapabilities(e)?u.getSelection(e):null}},restoreSelection:function(e){var t=s(),n=e.focusedElem,r=e.selectionRange;t!==n&&o(n)&&(u.hasSelectionCapabilities(n)&&u.setSelection(n,r),n.focus())},getSelection:function(e){var t;if("selectionStart"in e)t={start:e.selectionStart,end:e.selectionEnd};else if(document.selection&&e.nodeName==="INPUT"){var n=document.selection.createRange();n.parentElement()===e&&(t={start:-n.moveStart("character",-e.value.length),end:-n.moveEnd("character",-e.value.length)})}else t=r.getOffsets(e);return t||{start:0,end:0}},setSelection:function(e,t){var n=t.start,i=t.end;typeof i=="undefined"&&(i=n);if("selectionStart"in e)e.selectionStart=n,e.selectionEnd=Math.min(i,e.value.length);else if(document.selection&&e.nodeName==="INPUT"){var s=e.createTextRange();s.collapse(!0),s.moveStart("character",n),s.moveEnd("character",i-n),s.select()}else r.setOffsets(e,t)}};t.exports=u},{"./ReactDOMSelection":41,"./containsNode":88,"./getActiveElement":99}],53:[function(e,t,n){function a(e){return s+e.toString(36)}function f(e,t){return e.charAt(t)===s||t===e.length}function l(e){return e===""||e.charAt(0)===s&&e.charAt(e.length-1)!==s}function c(e,t){return t.indexOf(e)===0&&f(t,e.length)}function h(e){return e?e.substr(0,e.lastIndexOf(s)):""}function p(e,t){i(l(e)&&l(t),"getNextDescendantID(%s, %s): Received an invalid React DOM ID.",e,t),i(c(e,t),"getNextDescendantID(...): React has made an invalid assumption about the DOM hierarchy. Expected `%s` to be an ancestor of `%s`.",e,t);if(e===t)return e;var n=e.length+o;for(var r=n;r<t.length;r++)if(f(t,r))break;return t.substr(0,r)}function d(e,t){var n=Math.min(e.length,t.length);if(n===0)return"";var r=0;for(var s=0;s<=n;s++)if(f(e,s)&&f(t,s))r=s;else if(e.charAt(s)!==t.charAt(s))break;var o=e.substr(0,r);return i(l(o),"getFirstCommonAncestorID(%s, %s): Expected a valid React DOM ID: %s",e,t,o),o}function v(e,t,n,r,s,o){e=e||"",t=t||"",i(e!==t,"traverseParentPath(...): Cannot traverse from and to the same ID, `%s`.",e);var a=c(t,e);i(a||c(e,t),"traverseParentPath(%s, %s, ...): Cannot traverse from two IDs that do not have a parent path.",e,t);var f=0,l=a?h:p;for(var d=e;;d=l(d,t)){var v;(!s||d!==e)&&(!o||d!==t)&&(v=n(d,a,r));if(v===!1||d===t)break;i(f++<u,"traverseParentPath(%s, %s, ...): Detected an infinite loop while traversing the React DOM ID tree. This may be due to malformed IDs: %s",e,t)}}var r=e("./ReactRootIndex"),i=e("./invariant"),s=".",o=s.length,u=100,m={createReactRootID:function(){return a(r.createReactRootIndex())},createReactID:function(e,t){return e+t},getReactRootIDFromNodeID:function(e){if(e&&e.charAt(0)===s&&e.length>1){var t=e.indexOf(s,1);return t>-1?e.substr(0,t):e}return null},traverseEnterLeave:function(e,t,n,r,i){var s=d(e,t);s!==e&&v(e,s,n,r,!1,!0),s!==t&&v(s,t,n,i,!0,!1)},traverseTwoPhase:function(e,t,n){e&&(v("",e,t,n,!0,!1),v(e,"",t,n,!1,!0))},traverseAncestors:function(e,t,n){v("",e,t,n,!0,!1)},_getFirstCommonAncestorID:d,_getNextDescendantID:p,isAncestorIDOf:c,SEPARATOR:s};t.exports=m},{"./ReactRootIndex":67,"./invariant":108}],54:[function(e,t,n){var r=e("./adler32"),i={CHECKSUM_ATTR_NAME:"data-react-checksum",addChecksumToMarkup:function(e){var t=r(e);return e.replace(">"," "+i.CHECKSUM_ATTR_NAME+'="'+t+'">')},canReuseMarkup:function(e,t){var n=t.getAttribute(i.CHECKSUM_ATTR_NAME);n=n&&parseInt(n,10);var s=r(e);return s===n}};t.exports=i},{"./adler32":87}],55:[function(e,t,n){function w(e){var t=a(e);return t&&O.getID(t)}function E(e){var t=S(e);if(t)if(p.hasOwnProperty(t)){var n=p[t];n!==e&&(f(!N(n,t),"ReactMount: Two valid but unequal nodes with the same `%s`: %s",h,t),p[t]=e)}else p[t]=e;return t}function S(e){return e&&e.getAttribute&&e.getAttribute(h)||""}function x(e,t){var n=S(e);n!==t&&delete p[n],e.setAttribute(h,t),p[t]=e}function T(e){if(!p.hasOwnProperty(e)||!N(p[e],e))p[e]=O.findReactNodeByID(e);return p[e]}function N(e,t){if(e){f(S(e)===t,"ReactMount: Unexpected modification of `%s`",h);var n=O.findReactContainerForID(t);if(n&&u(n,e))return!0}return!1}function C(e){delete p[e]}function L(e){var t=p[e];if(!t||!N(t,e))return!1;k=t}function A(e){k=null,s.traverseAncestors(e,L);var t=k;return k=null,t}var r=e("./DOMProperty"),i=e("./ReactEventEmitter"),s=e("./ReactInstanceHandles"),o=e("./ReactPerf"),u=e("./containsNode"),a=e("./getReactRootElementInContainer"),f=e("./invariant"),l=e("./shouldUpdateReactComponent"),c=s.SEPARATOR,h=r.ID_ATTRIBUTE_NAME,p={},d=1,v=9,m={},g={},y={},b=[],k=null,O={totalInstantiationTime:0,totalInjectionTime:0,useTouchEvents:!1,_instancesByReactRootID:m,scrollMonitor:function(e,t){t()},_updateRootComponent:function(e,t,n,r){var i=t.props;return O.scrollMonitor(n,function(){e.replaceProps(i,r)}),y[w(n)]=a(n),e},_registerComponent:function(e,t){f(t&&(t.nodeType===d||t.nodeType===v),"_registerComponent(...): Target container is not a DOM element."),i.ensureScrollValueMonitoring();var n=O.registerContainer(t);return m[n]=e,n},_renderNewRootComponent:o.measure("ReactMount","_renderNewRootComponent",function(e,t,n){var r=O._registerComponent(e,t);return e.mountComponentIntoNode(r,t,n),y[r]=a(t),e}),renderComponent:function(e,t,n){var r=m[w(t)];if(r){if(l(r,e))return O._updateRootComponent(r,e,t,n);O.unmountComponentAtNode(t)}var i=a(t),s=i&&O.isRenderedByReact(i),o=s&&!r,u=O._renderNewRootComponent(e,t,o);return n&&n.call(u),u},constructAndRenderComponent:function(e,t,n){return O.renderComponent(e(t),n)},constructAndRenderComponentByID:function(e,t,n){var r=document.getElementById(n);return f(r,'Tried to get element with id of "%s" but it is not present on the page.',n),O.constructAndRenderComponent(e,t,r)},registerContainer:function(e){var t=w(e);return t&&(t=s.getReactRootIDFromNodeID(t)),t||(t=s.createReactRootID()),g[t]=e,t},unmountComponentAtNode:function(e){var t=w(e),n=m[t];return n?(O.unmountComponentFromNode(n,e),delete m[t],delete g[t],delete y[t],!0):!1},unmountComponentFromNode:function(e,t){e.unmountComponent(),t.nodeType===v&&(t=t.documentElement);while(t.lastChild)t.removeChild(t.lastChild)},findReactContainerForID:function(e){var t=s.getReactRootIDFromNodeID(e),n=g[t],r=y[t];if(r&&r.parentNode!==n){f(S(r)===t,"ReactMount: Root element ID differed from reactRootID.");var i=n.firstChild;i&&t===S(i)?y[t]=i:console.warn("ReactMount: Root element has been removed from its original container. New container:",r.parentNode)}return n},findReactNodeByID:function(e){var t=O.findReactContainerForID(e);return O.findComponentRoot(t,e)},isRenderedByReact:function(e){if(e.nodeType!==1)return!1;var t=O.getID(e);return t?t.charAt(0)===c:!1},getFirstReactDOM:function(e){var t=e;while(t&&t.parentNode!==t){if(O.isRenderedByReact(t))return t;t=t.parentNode}return null},findComponentRoot:function(e,t){var n=b,r=0,i=A(t)||e;n[0]=i.firstChild,n.length=1;while(r<n.length){var o=n[r++],u;while(o){var a=O.getID(o);a?t===a?u=o:s.isAncestorIDOf(a,t)&&(n.length=r=0,n.push(o.firstChild)):n.push(o.firstChild),o=o.nextSibling}if(u)return n.length=0,u}n.length=0,f(!1,"findComponentRoot(..., %s): Unable to find element. This probably means the DOM was unexpectedly mutated (e.g., by the browser). Try inspecting the child nodes of the element with React ID `%s`.",t,O.getID(e))},getReactRootID:w,getID:E,setID:x,getNode:T,purgeID:C};t.exports=O},{"./DOMProperty":8,"./ReactEventEmitter":48,"./ReactInstanceHandles":53,"./ReactPerf":60,"./containsNode":88,"./getReactRootElementInContainer":104,"./invariant":108,"./shouldUpdateReactComponent":126}],56:[function(e,t,n){function s(e){this._queue=e||null}var r=e("./PooledClass"),i=e("./mixInto");i(s,{enqueue:function(e,t){this._queue=this._queue||[],this._queue.push({component:e,callback:t})},notifyAll:function(){var e=this._queue;if(e){this._queue=null;for(var t=0,n=e.length;t<n;t++){var r=e[t].component,i=e[t].callback;i.call(r)}e.length=0}},reset:function(){this._queue=null},destructor:function(){this.reset()}}),r.addPoolingTo(s),t.exports=s},{"./PooledClass":23,"./mixInto":120}],57:[function(e,t,n){function l(e,t,n){a.push({parentID:e,parentNode:null,type:i.INSERT_MARKUP,markupIndex:f.push(t)-1,textContent:null,fromIndex:null,toIndex:n})}function c(e,t,n){a.push({parentID:e,parentNode:null,type:i.MOVE_EXISTING,markupIndex:null,textContent:null,fromIndex:t,toIndex:n})}function h(e,t){a.push({parentID:e,parentNode:null,type:i.REMOVE_NODE,markupIndex:null,textContent:null,fromIndex:t,toIndex:null})}function p(e,t){a.push({parentID:e,parentNode:null,type:i.TEXT_CONTENT,markupIndex:null,textContent:t,fromIndex:null,toIndex:null})}function d(){a.length&&(r.BackendIDOperations.dangerouslyProcessChildrenUpdates(a,f),v())}function v(){a.length=0,f.length=0}var r=e("./ReactComponent"),i=e("./ReactMultiChildUpdateTypes"),s=e("./flattenChildren"),o=e("./shouldUpdateReactComponent"),u=0,a=[],f=[],m={Mixin:{mountChildren:function(e,t){var n=s(e),r=[],i=0;this._renderedChildren=n;for(var o in n){var u=n[o];if(n.hasOwnProperty(o)){var a=this._rootNodeID+o,f=u.mountComponent(a,t,this._mountDepth+1);u._mountIndex=i,r.push(f),i++}}return r},updateTextContent:function(e){u++;var t=!0;try{var n=this._renderedChildren;for(var r in n)n.hasOwnProperty(r)&&this._unmountChildByName(n[r],r);this.setTextContent(e),t=!1}finally{u--,u||(t?v():d())}},updateChildren:function(e,t){u++;var n=!0;try{this._updateChildren(e,t),n=!1}finally{u--,u||(n?v():d())}},_updateChildren:function(e,t){var n=s(e),r=this._renderedChildren;if(!n&&!r)return;var i,u=0,a=0;for(i in n){if(!n.hasOwnProperty(i))continue;var f=r&&r[i],l=n[i];o(f,l)?(this.moveChild(f,a,u),u=Math.max(f._mountIndex,u),f.receiveComponent(l,t),f._mountIndex=a):(f&&(u=Math.max(f._mountIndex,u),this._unmountChildByName(f,i)),this._mountChildByNameAtIndex(l,i,a,t)),a++}for(i in r)r.hasOwnProperty(i)&&(!n||!n[i])&&this._unmountChildByName(r[i],i)},unmountChildren:function(){var e=this._renderedChildren;for(var t in e){var n=e[t];n.unmountComponent&&n.unmountComponent()}this._renderedChildren=null},moveChild:function(e,t,n){e._mountIndex<n&&c(this._rootNodeID,e._mountIndex,t)},createChild:function(e,t){l(this._rootNodeID,t,e._mountIndex)},removeChild:function(e){h(this._rootNodeID,e._mountIndex)},setTextContent:function(e){p(this._rootNodeID,e)},_mountChildByNameAtIndex:function(e,t,n,r){var i=this._rootNodeID+t,s=e.mountComponent(i,r,this._mountDepth+1);e._mountIndex=n,this.createChild(e,s),this._renderedChildren=this._renderedChildren||{},this._renderedChildren[t]=e},_unmountChildByName:function(e,t){r.isValidComponent(e)&&(this.removeChild(e),e._mountIndex=null,e.unmountComponent(),delete this._renderedChildren[t])}}};t.exports=m},{"./ReactComponent":26,"./ReactMultiChildUpdateTypes":58,"./flattenChildren":97,"./shouldUpdateReactComponent":126}],58:[function(e,t,n){var r=e("./keyMirror"),i=r({INSERT_MARKUP:null,MOVE_EXISTING:null,REMOVE_NODE:null,TEXT_CONTENT:null});t.exports=i},{"./keyMirror":114}],59:[function(e,t,n){var r=e("./invariant"),i={isValidOwner:function(e){return!!e&&typeof e.attachRef=="function"&&typeof e.detachRef=="function"},addComponentAsRefTo:function(e,t,n){r(i.isValidOwner(n),"addComponentAsRefTo(...): Only a ReactOwner can have refs. This usually means that you're trying to add a ref to a component that doesn't have an owner (that is, was not created inside of another component's `render` method). Try rendering this component inside of a new top-level component which will hold the ref."),n.attachRef(t,e)},removeComponentAsRefFrom:function(e,t,n){r(i.isValidOwner(n),"removeComponentAsRefFrom(...): Only a ReactOwner can have refs. This usually means that you're trying to remove a ref to a component that doesn't have an owner (that is, was not created inside of another component's `render` method). Try rendering this component inside of a new top-level component which will hold the ref."),n.refs[t]===e&&n.detachRef(t)},Mixin:{attachRef:function(e,t){r(t.isOwnedBy(this),"attachRef(%s, ...): Only a component's owner can store a ref to it.",e);var n=this.refs||(this.refs={});n[e]=t},detachRef:function(e){delete this.refs[e]}}};t.exports=i},{"./invariant":108}],60:[function(e,t,n){function i(e,t,n){return n}var r={enableMeasure:!1,storedMeasure:i,measure:function(e,t,n){var i=null;return function(){return r.enableMeasure?(i||(i=r.storedMeasure(e,t,n)),i.apply(this,arguments)):n.apply(this,arguments)}},injection:{injectMeasure:function(e){r.storedMeasure=e}}};t.exports=r},{}],61:[function(e,t,n){function u(e){return function(t,n,r){t.hasOwnProperty(n)?t[n]=e(t[n],r):t[n]=r}}var r=e("./emptyFunction"),i=e("./invariant"),s=e("./joinClasses"),o=e("./merge"),a={children:r,className:u(s),key:r,ref:r,style:u(o)},f={TransferStrategies:a,mergeProps:function(e,t){var n=o(e);for(var r in t){if(!t.hasOwnProperty(r))continue;var i=a[r];i?i(n,r,t[r]):n.hasOwnProperty(r)||(n[r]=t[r])}return n},Mixin:{transferPropsTo:function(e){return i(e._owner===this,"%s: You can't call transferPropsTo() on a component that you don't own, %s. This usually means you are calling transferPropsTo() on a component passed in as props or children.",this.constructor.displayName,e.constructor.displayName),e.props=f.mergeProps(e.props,this.props),e}}};t.exports=f},{"./emptyFunction":95,"./invariant":108,"./joinClasses":113,"./merge":117}],62:[function(e,t,n){var r={};r={prop:"prop",context:"context",childContext:"child context"},t.exports=r},{}],63:[function(e,t,n){var r=e("./keyMirror"),i=r({prop:null,context:null,childContext:null});t.exports=i},{"./keyMirror":114}],64:[function(e,t,n){function f(e){switch(typeof e){case"number":case"string":return!0;case"object":if(Array.isArray(e))return e.every(f);if(r.isValidComponent(e))return!0;for(var t in e)if(!f(e[t]))return!1;return!0;default:return!1}}function l(e){var t=typeof e;return t==="object"&&Array.isArray(e)?"array":t}function c(){function e(e,t,n,r,i){return!0}return w(e)}function h(e){function t(t,n,r,o,u){var a=l(n),f=a===e;return t&&s(f,"Invalid %s `%s` of type `%s` supplied to `%s`, expected `%s`.",i[u],r,a,o,e),f}return w(t)}function p(e){function n(e,n,r,o,u){var a=t[n];return e&&s(a,"Invalid %s `%s` supplied to `%s`, expected one of %s.",i[u],r,o,JSON.stringify(Object.keys(t))),a}var t=o(e);return w(n)}function d(e){function t(t,n,r,o,u){var a=l(n),f=a==="object";if(f)for(var c in e){var h=e[c];if(h&&!h(n,c,o,u))return!1}return t&&s(f,"Invalid %s `%s` of type `%s` supplied to `%s`, expected `object`.",i[u],r,a,o),f}return w(t)}function v(e){function t(t,n,r,o,u){var f=n instanceof e;return t&&s(f,"Invalid %s `%s` supplied to `%s`, expected instance of `%s`.",i[u],r,o,e.name||a),f}return w(t)}function m(e){function t(t,n,r,o,u){var a=Array.isArray(n);if(a)for(var f=0;f<n.length;f++)if(!e(n,f,o,u))return!1;return t&&s(a,"Invalid %s `%s` supplied to `%s`, expected an array.",i[u],r,o),a}return w(t)}function g(){function e(e,t,n,r,o){var u=f(t);return e&&s(u,"Invalid %s `%s` supplied to `%s`, expected a renderable prop.",i[o],n,r),u}return w(e)}function y(){function e(e,t,n,o,u){var a=r.isValidComponent(t);return e&&s(a,"Invalid %s `%s` supplied to `%s`, expected a React component.",i[u],n,o),a}return w(e)}function b(e){return function(t,n,r,o){var u=!1;for(var f=0;f<e.length;f++){var l=e[f];typeof l.weak=="function"&&(l=l.weak);if(l(t,n,r,o)){u=!0;break}}return s(u,"Invalid %s `%s` supplied to `%s`.",i[o],n,r||a),u}}function w(e){function t(t,n,r,o,u,f){var l=r[o];if(l!=null)return e(n,l,o,u||a,f);var c=!t;return n&&s(c,"Required %s `%s` was not specified in `%s`.",i[f],o,u||a),c}var n=t.bind(null,!1,!0);return n.weak=t.bind(null,!1,!1),n.isRequired=t.bind(null,!0,!0),n.weak.isRequired=t.bind(null,!0,!1),n.isRequired.weak=n.weak.isRequired,n}var r=e("./ReactComponent"),i=e("./ReactPropTypeLocationNames"),s=e("./warning"),o=e("./createObjectFrom"),u={array:h("array"),bool:h("boolean"),func:h("function"),number:h("number"),object:h("object"),string:h("string"),shape:d,oneOf:p,oneOfType:b,arrayOf:m,instanceOf:v,renderable:g(),component:y(),any:c()},a="<<anonymous>>";t.exports=u},{"./ReactComponent":26,"./ReactPropTypeLocationNames":62,"./createObjectFrom":93,"./warning":129}],65:[function(e,t,n){function o(){this.listenersToPut=[]}var r=e("./PooledClass"),i=e("./ReactEventEmitter"),s=e("./mixInto");s(o,{enqueuePutListener:function(e,t,n){this.listenersToPut.push({rootNodeID:e,propKey:t,propValue:n})},putListeners:function(){for(var e=0;e<this.listenersToPut.length;e++){var t=this.listenersToPut[e];i.putListener(t.rootNodeID,t.propKey,t.propValue)}},reset:function(){this.listenersToPut.length=0},destructor:function(){this.reset()}}),r.addPoolingTo(o),t.exports=o},{"./PooledClass":23,"./ReactEventEmitter":48,"./mixInto":120}],66:[function(e,t,n){function m(){this.reinitializeTransaction(),this.reactMountReady=u.getPooled(null),this.putListenerQueue=a.getPooled()}var r=e("./ExecutionEnvironment"),i=e("./PooledClass"),s=e("./ReactEventEmitter"),o=e("./ReactInputSelection"),u=e("./ReactMountReady"),a=e("./ReactPutListenerQueue"),f=e("./Transaction"),l=e("./mixInto"),c={initialize:o.getSelectionInformation,close:o.restoreSelection},h={initialize:function(){var e=s.isEnabled();return s.setEnabled(!1),e},close:function(e){s.setEnabled(e)}},p={initialize:function(){this.reactMountReady.reset()},close:function(){this.reactMountReady.notifyAll()}},d={initialize:function(){this.putListenerQueue.reset()},close:function(){this.putListenerQueue.putListeners()}},v=[d,c,h,p],g={getTransactionWrappers:function(){return r.canUseDOM?v:[]},getReactMountReady:function(){return this.reactMountReady},getPutListenerQueue:function(){return this.putListenerQueue},destructor:function(){u.release(this.reactMountReady),this.reactMountReady=null,a.release(this.putListenerQueue),this.putListenerQueue=null}};l(m,f.Mixin),l(m,g),i.addPoolingTo(m),t.exports=m},{"./ExecutionEnvironment":20,"./PooledClass":23,"./ReactEventEmitter":48,"./ReactInputSelection":52,"./ReactMountReady":56,"./ReactPutListenerQueue":65,"./Transaction":84,"./mixInto":120}],67:[function(e,t,n){var r={injectCreateReactRootIndex:function(e){i.createReactRootIndex=e}},i={createReactRootIndex:null,injection:r};t.exports=i},{}],68:[function(e,t,n){function a(e){u(r.isValidComponent(e),"renderComponentToString(): You must pass a valid ReactComponent."),u(arguments.length!==2||typeof arguments[1]!="function","renderComponentToString(): This function became synchronous and now returns the generated markup. Please remove the second parameter.");var t=i.createReactRootID(),n=o.getPooled();n.reinitializeTransaction();try{return n.perform(function(){var r=e.mountComponent(t,n,0);return s.addChecksumToMarkup(r)},null)}finally{o.release(n)}}var r=e("./ReactComponent"),i=e("./ReactInstanceHandles"),s=e("./ReactMarkupChecksum"),o=e("./ReactReconcileTransaction"),u=e("./invariant");t.exports={renderComponentToString:a}},{"./ReactComponent":26,"./ReactInstanceHandles":53,"./ReactMarkupChecksum":54,"./ReactReconcileTransaction":66,"./invariant":108}],69:[function(e,t,n){var r=e("./DOMPropertyOperations"),i=e("./ReactComponent"),s=e("./escapeTextForBrowser"),o=e("./mixInto"),u=function(e){this.construct({text:e})};o(u,i.Mixin),o(u,{mountComponent:function(e,t,n){return i.Mixin.mountComponent.call(this,e,t,n),"<span "+r.createMarkupForID(e)+">"+s(this.props.text)+"</span>"},receiveComponent:function(e,t){var n=e.props;n.text!==this.props.text&&(this.props.text=n.text,i.BackendIDOperations.updateTextContentByID(this._rootNodeID,n.text))}}),u.type=u,u.prototype.type=u,t.exports=u},{"./DOMPropertyOperations":9,"./ReactComponent":26,"./escapeTextForBrowser":96,"./mixInto":120}],70:[function(e,t,n){function u(){i(o,"ReactUpdates: must inject a batching strategy")}function a(e,t){u(),o.batchedUpdates(e,t)}function f(e,t){return e._mountDepth-t._mountDepth}function l(){s.sort(f);for(var e=0;e<s.length;e++){var t=s[e];if(t.isMounted()){var n=t._pendingCallbacks;t._pendingCallbacks=null,t.performUpdateIfNecessary();if(n)for(var r=0;r<n.length;r++)n[r].call(t)}}}function c(){s.length=0}function p(e,t){i(!t||typeof t=="function","enqueueUpdate(...): You called `setProps`, `replaceProps`, `setState`, `replaceState`, or `forceUpdate` with a callback that isn't callable."),u();if(!o.isBatchingUpdates){e.performUpdateIfNecessary(),t&&t.call(e);return}s.push(e),t&&(e._pendingCallbacks?e._pendingCallbacks.push(t):e._pendingCallbacks=[t])}var r=e("./ReactPerf"),i=e("./invariant"),s=[],o=null,h=r.measure("ReactUpdates","flushBatchedUpdates",function(){try{l()}finally{c()}}),d={injectBatchingStrategy:function(e){i(e,"ReactUpdates: must provide a batching strategy"),i(typeof e.batchedUpdates=="function","ReactUpdates: must provide a batchedUpdates() function"),i(typeof e.isBatchingUpdates=="boolean","ReactUpdates: must provide an isBatchingUpdates boolean attribute"),o=e}},v={batchedUpdates:a,enqueueUpdate:p,flushBatchedUpdates:h,injection:d};t.exports=v},{"./ReactPerf":60,"./invariant":108}],71:[function(e,t,n){function g(e){if("selectionStart"in e&&s.hasSelectionCapabilities(e))return{start:e.selectionStart,end:e.selectionEnd};if(document.selection){var t=document.selection.createRange();return{parentElement:t.parentElement(),text:t.text,top:t.boundingTop,left:t.boundingLeft}}var n=window.getSelection();return{anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}}function y(e){if(m||p==null||p!=u())return;var t=g(p);if(!v||!l(v,t)){v=t;var n=o.getPooled(h.select,d,e);return n.type="select",n.target=p,i.accumulateTwoPhaseDispatches(n),n}}var r=e("./EventConstants"),i=e("./EventPropagators"),s=e("./ReactInputSelection"),o=e("./SyntheticEvent"),u=e("./getActiveElement"),a=e("./isTextInputElement"),f=e("./keyOf"),l=e("./shallowEqual"),c=r.topLevelTypes,h={select:{phasedRegistrationNames:{bubbled:f({onSelect:null}),captured:f({onSelectCapture:null})},dependencies:[c.topBlur,c.topContextMenu,c.topFocus,c.topKeyDown,c.topMouseDown,c.topMouseUp,c.topSelectionChange]}},p=null,d=null,v=null,m=!1,b={eventTypes:h,extractEvents:function(e,t,n,r){switch(e){case c.topFocus:if(a(t)||t.contentEditable==="true")p=t,d=n,v=null;break;case c.topBlur:p=null,d=null,v=null;break;case c.topMouseDown:m=!0;break;case c.topContextMenu:case c.topMouseUp:return m=!1,y(r);case c.topSelectionChange:case c.topKeyDown:case c.topKeyUp:return y(r)}}};t.exports=b},{"./EventConstants":14,"./EventPropagators":19,"./ReactInputSelection":52,"./SyntheticEvent":77,"./getActiveElement":99,"./isTextInputElement":111,"./keyOf":115,"./shallowEqual":125}],72:[function(e,t,n){var r=Math.pow(2,53),i={createReactRootIndex:function(){return Math.ceil(Math.random()*r)}};t.exports=i},{}],73:[function(e,t,n){var r=e("./EventConstants"),i=e("./EventPluginUtils"),s=e("./EventPropagators"),o=e("./SyntheticClipboardEvent"),u=e("./SyntheticEvent"),a=e("./SyntheticFocusEvent"),f=e("./SyntheticKeyboardEvent"),l=e("./SyntheticMouseEvent"),c=e("./SyntheticDragEvent"),h=e("./SyntheticTouchEvent"),p=e("./SyntheticUIEvent"),d=e("./SyntheticWheelEvent"),v=e("./invariant"),m=e("./keyOf"),g=r.topLevelTypes,y={blur:{phasedRegistrationNames:{bubbled:m({onBlur:!0}),captured:m({onBlurCapture:!0})}},click:{phasedRegistrationNames:{bubbled:m({onClick:!0}),captured:m({onClickCapture:!0})}},contextMenu:{phasedRegistrationNames:{bubbled:m({onContextMenu:!0}),captured:m({onContextMenuCapture:!0})}},copy:{phasedRegistrationNames:{bubbled:m({onCopy:!0}),captured:m({onCopyCapture:!0})}},cut:{phasedRegistrationNames:{bubbled:m({onCut:!0}),captured:m({onCutCapture:!0})}},doubleClick:{phasedRegistrationNames:{bubbled:m({onDoubleClick:!0}),captured:m({onDoubleClickCapture:!0})}},drag:{phasedRegistrationNames:{bubbled:m({onDrag:!0}),captured:m({onDragCapture:!0})}},dragEnd:{phasedRegistrationNames:{bubbled:m({onDragEnd:!0}),captured:m({onDragEndCapture:!0})}},dragEnter:{phasedRegistrationNames:{bubbled:m({onDragEnter:!0}),captured:m({onDragEnterCapture:!0})}},dragExit:{phasedRegistrationNames:{bubbled:m({onDragExit:!0}),captured:m({onDragExitCapture:!0})}},dragLeave:{phasedRegistrationNames:{bubbled:m({onDragLeave:!0}),captured:m({onDragLeaveCapture:!0})}},dragOver:{phasedRegistrationNames:{bubbled:m({onDragOver:!0}),captured:m({onDragOverCapture:!0})}},dragStart:{phasedRegistrationNames:{bubbled:m({onDragStart:!0}),captured:m({onDragStartCapture:!0})}},drop:{phasedRegistrationNames:{bubbled:m({onDrop:!0}),captured:m({onDropCapture:!0})}},focus:{phasedRegistrationNames:{bubbled:m({onFocus:!0}),captured:m({onFocusCapture:!0})}},input:{phasedRegistrationNames:{bubbled:m({onInput:!0}),captured:m({onInputCapture:!0})}},keyDown:{phasedRegistrationNames:{bubbled:m({onKeyDown:!0}),captured:m({onKeyDownCapture:!0})}},keyPress:{phasedRegistrationNames:{bubbled:m({onKeyPress:!0}),captured:m({onKeyPressCapture:!0})}},keyUp:{phasedRegistrationNames:{bubbled:m({onKeyUp:!0}),captured:m({onKeyUpCapture:!0})}},load:{phasedRegistrationNames:{bubbled:m({onLoad:!0}),captured:m({onLoadCapture:!0})}},error:{phasedRegistrationNames:{bubbled:m({onError:!0}),captured:m({onErrorCapture:!0})}},mouseDown:{phasedRegistrationNames:{bubbled:m({onMouseDown:!0}),captured:m({onMouseDownCapture:!0})}},mouseMove:{phasedRegistrationNames:{bubbled:m({onMouseMove:!0}),captured:m({onMouseMoveCapture:!0})}},mouseOut:{phasedRegistrationNames:{bubbled:m({onMouseOut:!0}),captured:m({onMouseOutCapture:!0})}},mouseOver:{phasedRegistrationNames:{bubbled:m({onMouseOver:!0}),captured:m({onMouseOverCapture:!0})}},mouseUp:{phasedRegistrationNames:{bubbled:m({onMouseUp:!0}),captured:m({onMouseUpCapture:!0})}},paste:{phasedRegistrationNames:{bubbled:m({onPaste:!0}),captured:m({onPasteCapture:!0})}},reset:{phasedRegistrationNames:{bubbled:m({onReset:!0}),captured:m({onResetCapture:!0})}},scroll:{phasedRegistrationNames:{bubbled:m({onScroll:!0}),captured:m({onScrollCapture:!0})}},submit:{phasedRegistrationNames:{bubbled:m({onSubmit:!0}),captured:m({onSubmitCapture:!0})}},touchCancel:{phasedRegistrationNames:{bubbled:m({onTouchCancel:!0}),captured:m({onTouchCancelCapture:!0})}},touchEnd:{phasedRegistrationNames:{bubbled:m({onTouchEnd:!0}),captured:m({onTouchEndCapture:!0})}},touchMove:{phasedRegistrationNames:{bubbled:m({onTouchMove:!0}),captured:m({onTouchMoveCapture:!0})}},touchStart:{phasedRegistrationNames:{bubbled:m({onTouchStart:!0}),captured:m({onTouchStartCapture:!0})}},wheel:{phasedRegistrationNames:{bubbled:m({onWheel:!0}),captured:m({onWheelCapture:!0})}}},b={topBlur:y.blur,topClick:y.click,topContextMenu:y.contextMenu,topCopy:y.copy,topCut:y.cut,topDoubleClick:y.doubleClick,topDrag:y.drag,topDragEnd:y.dragEnd,topDragEnter:y.dragEnter,topDragExit:y.dragExit,topDragLeave:y.dragLeave,topDragOver:y.dragOver,topDragStart:y.dragStart,topDrop:y.drop,topError:y.error,topFocus:y.focus,topInput:y.input,topKeyDown:y.keyDown,topKeyPress:y.keyPress,topKeyUp:y.keyUp,topLoad:y.load,topMouseDown:y.mouseDown,topMouseMove:y.mouseMove,topMouseOut:y.mouseOut,topMouseOver:y.mouseOver,topMouseUp:y.mouseUp,topPaste:y.paste,topReset:y.reset,topScroll:y.scroll,topSubmit:y.submit,topTouchCancel:y.touchCancel,topTouchEnd:y.touchEnd,topTouchMove:y.touchMove,topTouchStart:y.touchStart,topWheel:y.wheel};for(var w in b)b[w].dependencies=[w];var E={eventTypes:y,executeDispatch:function(e,t,n){var r=i.executeDispatch(e,t,n);r===!1&&(e.stopPropagation(),e.preventDefault())},extractEvents:function(e,t,n,r){var i=b[e];if(!i)return null;var m;switch(e){case g.topInput:case g.topLoad:case g.topError:case g.topReset:case g.topSubmit:m=u;break;case g.topKeyDown:case g.topKeyPress:case g.topKeyUp:m=f;break;case g.topBlur:case g.topFocus:m=a;break;case g.topClick:if(r.button===2)return null;case g.topContextMenu:case g.topDoubleClick:case g.topMouseDown:case g.topMouseMove:case g.topMouseOut:case g.topMouseOver:case g.topMouseUp:m=l;break;case g.topDrag:case g.topDragEnd:case g.topDragEnter:case g.topDragExit:case g.topDragLeave:case g.topDragOver:case g.topDragStart:case g.topDrop:m=c;break;case g.topTouchCancel:case g.topTouchEnd:case g.topTouchMove:case g.topTouchStart:m=h;break;case g.topScroll:m=p;break;case g.topWheel:m=d;break;case g.topCopy:case g.topCut:case g.topPaste:m=o}v(m,"SimpleEventPlugin: Unhandled event type, `%s`.",e);var y=m.getPooled(i,n,r);return s.accumulateTwoPhaseDispatches(y),y}};t.exports=E},{"./EventConstants":14,"./EventPluginUtils":18,"./EventPropagators":19,"./SyntheticClipboardEvent":74,"./SyntheticDragEvent":76,"./SyntheticEvent":77,"./SyntheticFocusEvent":78,"./SyntheticKeyboardEvent":79,"./SyntheticMouseEvent":80,"./SyntheticTouchEvent":81,"./SyntheticUIEvent":82,"./SyntheticWheelEvent":83,"./invariant":108,"./keyOf":115}],74:[function(e,t,n){function s(e,t,n){r.call(this,e,t,n)}var r=e("./SyntheticEvent"),i={clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}};r.augmentClass(s,i),t.exports=s},{"./SyntheticEvent":77}],75:[function(e,t,n){function s(e,t,n){r.call(this,e,t,n)}var r=e("./SyntheticEvent"),i={data:null};r.augmentClass(s,i),t.exports=s},{"./SyntheticEvent":77}],76:[function(e,t,n){function s(e,t,n){r.call(this,e,t,n)}var r=e("./SyntheticMouseEvent"),i={dataTransfer:null};r.augmentClass(s,i),t.exports=s},{"./SyntheticMouseEvent":80}],77:[function(e,t,n){function f(e,t,n){this.dispatchConfig=e,this.dispatchMarker=t,this.nativeEvent=n;var r=this.constructor.Interface;for(var s in r){if(!r.hasOwnProperty(s))continue;var o=r[s];o?this[s]=o(n):this[s]=n[s]}var u=n.defaultPrevented!=null?n.defaultPrevented:n.returnValue===!1;u?this.isDefaultPrevented=i.thatReturnsTrue:this.isDefaultPrevented=i.thatReturnsFalse,this.isPropagationStopped=i.thatReturnsFalse}var r=e("./PooledClass"),i=e("./emptyFunction"),s=e("./getEventTarget"),o=e("./merge"),u=e("./mergeInto"),a={type:null,target:s,currentTarget:i.thatReturnsNull,eventPhase:null,bubbles:null,cancelable:null,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:null,isTrusted:null};u(f.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e.preventDefault?e.preventDefault():e.returnValue=!1,this.isDefaultPrevented=i.thatReturnsTrue},stopPropagation:function(){var e=this.nativeEvent;e.stopPropagation?e.stopPropagation():e.cancelBubble=!0,this.isPropagationStopped=i.thatReturnsTrue},persist:function(){this.isPersistent=i.thatReturnsTrue},isPersistent:i.thatReturnsFalse,destructor:function(){var e=this.constructor.Interface;for(var t in e)this[t]=null;this.dispatchConfig=null,this.dispatchMarker=null,this.nativeEvent=null}}),f.Interface=a,f.augmentClass=function(e,t){var n=this,i=Object.create(n.prototype);u(i,e.prototype),e.prototype=i,e.prototype.constructor=e,e.Interface=o(n.Interface,t),e.augmentClass=n.augmentClass,r.addPoolingTo(e,r.threeArgumentPooler)},r.addPoolingTo(f,r.threeArgumentPooler),t.exports=f},{"./PooledClass":23,"./emptyFunction":95,"./getEventTarget":101,"./merge":117,"./mergeInto":119}],78:[function(e,t,n){function s(e,t,n){r.call(this,e,t,n)}var r=e("./SyntheticUIEvent"),i={relatedTarget:null};r.augmentClass(s,i),t.exports=s},{"./SyntheticUIEvent":82}],79:[function(e,t,n){function o(e,t,n){r.call(this,e,t,n)}var r=e("./SyntheticUIEvent"),i=e("./getEventKey"),s={key:i,location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,"char":null,charCode:null,keyCode:null,which:null};r.augmentClass(o,s),t.exports=o},{"./SyntheticUIEvent":82,"./getEventKey":100}],80:[function(e,t,n){function o(e,t,n){r.call(this,e,t,n)}var r=e("./SyntheticUIEvent"),i=e("./ViewportMetrics"),s={screenX:null,screenY:null,clientX:null,clientY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,button:function(e){var t=e.button;return"which"in e?t:t===2?2:t===4?1:0},buttons:null,relatedTarget:function(e){return e.relatedTarget||(e.fromElement===e.srcElement?e.toElement:e.fromElement)},pageX:function(e){return"pageX"in e?e.pageX:e.clientX+i.currentScrollLeft},pageY:function(e){return"pageY"in e?e.pageY:e.clientY+i.currentScrollTop}};r.augmentClass(o,s),t.exports=o},{"./SyntheticUIEvent":82,"./ViewportMetrics":85}],81:[function(e,t,n){function s(e,t,n){r.call(this,e,t,n)}var r=e("./SyntheticUIEvent"),i={touches:null,targetTouches:null,changedTouches:null,altKey:null,metaKey:null,ctrlKey:null,shiftKey:null};r.augmentClass(s,i),t.exports=s},{"./SyntheticUIEvent":82}],82:[function(e,t,n){function s(e,t,n){r.call(this,e,t,n)}var r=e("./SyntheticEvent"),i={view:null,detail:null};r.augmentClass(s,i),t.exports=s},{"./SyntheticEvent":77}],83:[function(e,t,n){function s(e,t,n){r.call(this,e,t,n)}var r=e("./SyntheticMouseEvent"),i={deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:null,deltaMode:null};r.augmentClass(s,i),t.exports=s},{"./SyntheticMouseEvent":80}],84:[function(e,t,n){var r=e("./invariant"),i={reinitializeTransaction:function(){this.transactionWrappers=this.getTransactionWrappers(),this.wrapperInitData?this.wrapperInitData.length=0:this.wrapperInitData=[],this.timingMetrics||(this.timingMetrics={}),this.timingMetrics.methodInvocationTime=0,this.timingMetrics.wrapperInitTimes?this.timingMetrics.wrapperInitTimes.length=0:this.timingMetrics.wrapperInitTimes=[],this.timingMetrics.wrapperCloseTimes?this.timingMetrics.wrapperCloseTimes.length=0:this.timingMetrics.wrapperCloseTimes=[],this._isInTransaction=!1},_isInTransaction:!1,getTransactionWrappers:null,isInTransaction:function(){return!!this._isInTransaction},perform:function(e,t,n,i,s,o,u,a){r(!this.isInTransaction(),"Transaction.perform(...): Cannot initialize a transaction when there is already an outstanding transaction.");var f=Date.now(),l,c;try{this._isInTransaction=!0,l=!0,this.initializeAll(0),c=e.call(t,n,i,s,o,u,a),l=!1}finally{var h=Date.now();this.methodInvocationTime+=h-f;try{if(l)try{this.closeAll(0)}catch(p){}else this.closeAll(0)}finally{this._isInTransaction=!1}}return c},initializeAll:function(e){var t=this.transactionWrappers,n=this.timingMetrics.wrapperInitTimes;for(var r=e;r<t.length;r++){var i=Date.now(),o=t[r];try{this.wrapperInitData[r]=s.OBSERVED_ERROR,this.wrapperInitData[r]=o.initialize?o.initialize.call(this):null}finally{var u=n[r],a=Date.now();n[r]=(u||0)+(a-i);if(this.wrapperInitData[r]===s.OBSERVED_ERROR)try{this.initializeAll(r+1)}catch(f){}}}},closeAll:function(e){r(this.isInTransaction(),"Transaction.closeAll(): Cannot close transaction when none are open.");var t=this.transactionWrappers,n=this.timingMetrics.wrapperCloseTimes;for(var i=e;i<t.length;i++){var o=t[i],u=Date.now(),a=this.wrapperInitData[i],f;try{f=!0,a!==s.OBSERVED_ERROR&&o.close&&o.close.call(this,a),f=!1}finally{var l=Date.now(),c=n[i];n[i]=(c||0)+(l-u);if(f)try{this.closeAll(i+1)}catch(h){}}}this.wrapperInitData.length=0}},s={Mixin:i,OBSERVED_ERROR:{}};t.exports=s},{"./invariant":108}],85:[function(e,t,n){var r=e("./getUnboundedScrollPosition"),i={currentScrollLeft:0,currentScrollTop:0,refreshScrollValues:function(){var e=r(window);i.currentScrollLeft=e.x,i.currentScrollTop=e.y}};t.exports=i},{"./getUnboundedScrollPosition":106}],86:[function(e,t,n){function i(e,t){r(t!=null,"accumulate(...): Accumulated items must be not be null or undefined.");if(e==null)return t;var n=Array.isArray(e),i=Array.isArray(t);return n?e.concat(t):i?[e].concat(t):[e,t]}var r=e("./invariant");t.exports=i},{"./invariant":108}],87:[function(e,t,n){function i(e){var t=1,n=0;for(var i=0;i<e.length;i++)t=(t+e.charCodeAt(i))%r,n=(n+t)%r;return t|n<<16}var r=65521;t.exports=i},{}],88:[function(e,t,n){function i(e,t){return!e||!t?!1:e===t?!0:r(e)?!1:r(t)?i(e,t.parentNode):e.contains?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1}var r=e("./isTextNode");t.exports=i},{"./isTextNode":112}],89:[function(e,t,n){function r(e,t,n,r,i,s,o){e=e||{};if(o)throw new Error("Too many arguments passed to copyProperties");var u=[t,n,r,i,s],a=0,f;while(u[a]){f=u[a++];for(var l in f)e[l]=f[l];f.hasOwnProperty&&f.hasOwnProperty("toString")&&typeof f.toString!="undefined"&&e.toString!==f.toString&&(e.toString=f.toString)}return e}t.exports=r},{}],90:[function(e,t,n){function i(e){return!!e&&(typeof e=="object"||typeof e=="function")&&"length"in e&&!("setInterval"in e)&&typeof e.nodeType!="number"&&(Array.isArray(e)||"callee"in e||"item"in e)}function s(e){return i(e)?Array.isArray(e)?e.slice():r(e):[e]}var r=e("./toArray");t.exports=s},{"./toArray":127}],91:[function(e,t,n){function s(e){var t=r.createClass({displayName:"ReactFullPageComponent"+(e.componentConstructor.displayName||""),componentWillUnmount:function(){i(!1,"%s tried to unmount. Because of cross-browser quirks it is impossible to unmount some top-level components (eg <html>, <head>, and <body>) reliably and efficiently. To fix this, have a single top-level component that never unmounts render these elements.",this.constructor.displayName)},render:function(){return this.transferPropsTo(e(null,this.props.children))}});return t}var r=e("./ReactCompositeComponent"),i=e("./invariant");t.exports=s},{"./ReactCompositeComponent":29,"./invariant":108}],92:[function(e,t,n){function f(e){var t=e.match(a);return t&&t[1].toLowerCase()}function l(e,t){var n=u;o(!!u,"createNodesFromMarkup dummy not initialized");var r=f(e),a=r&&s(r);if(a){n.innerHTML=a[1]+e+a[2];var l=a[0];while(l--)n=n.lastChild}else n.innerHTML=e;var c=n.getElementsByTagName("script");c.length&&(o(t,"createNodesFromMarkup(...): Unexpected <script> element rendered."),i(c).forEach(t));var h=i(n.childNodes);while(n.lastChild)n.removeChild(n.lastChild);return h}var r=e("./ExecutionEnvironment"),i=e("./createArrayFrom"),s=e("./getMarkupWrap"),o=e("./invariant"),u=r.canUseDOM?document.createElement("div"):null,a=/^\s*<(\w+)/;t.exports=l},{"./ExecutionEnvironment":20,"./createArrayFrom":90,"./getMarkupWrap":102,"./invariant":108}],93:[function(e,t,n){function r(e,t){if(!Array.isArray(e))throw new TypeError("Must pass an array of keys.");var n={},r=Array.isArray(t);typeof t=="undefined"&&(t=!0);for(var i=e.length;i--;)n[e[i]]=r?t[i]:t;return n}t.exports=r},{}],94:[function(e,t,n){function i(e,t){var n=t==null||typeof t=="boolean"||t==="";if(n)return"";var i=isNaN(t);return i||t===0||r.isUnitlessNumber[e]?""+t:t+"px"}var r=e("./CSSProperty");t.exports=i},{"./CSSProperty":2}],95:[function(e,t,n){function i(e){return function(){return e}}function s(){}var r=e("./copyProperties");r(s,{thatReturns:i,thatReturnsFalse:i(!1),thatReturnsTrue:i(!0),thatReturnsNull:i(null),thatReturnsThis:function(){return this},thatReturnsArgument:function(e){return e}}),t.exports=s},{"./copyProperties":89}],96:[function(e,t,n){function s(e){return r[e]}function o(e){return(""+e).replace(i,s)}var r={"&":"&amp;",">":"&gt;","<":"&lt;",'"':"&quot;","'":"&#x27;","/":"&#x2f;"},i=/[&><"'\/]/g;t.exports=o},{}],97:[function(e,t,n){function s(e,t,n){var i=e;r(!i.hasOwnProperty(n),"flattenChildren(...): Encountered two children with the same key, `%s`. Children keys must be unique.",n),t!=null&&(i[n]=t)}function o(e){if(e==null)return e;var t={};return i(e,s,t),t}var r=e("./invariant"),i=e("./traverseAllChildren");t.exports=o},{"./invariant":108,"./traverseAllChildren":128}],98:[function(e,t,n){var r=function(e,t,n){Array.isArray(e)?e.forEach(t,n):e&&t.call(n,e)};t.exports=r},{}],99:[function(e,t,n){function r(){try{return document.activeElement||document.body}catch(e){return document.body}}t.exports=r},{}],100:[function(e,t,n){function s(e){return"key"in e?r[e.key]||e.key:i[e.which||e.keyCode]||"Unidentified"}var r={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},i={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"};t.exports=s},{}],101:[function(e,t,n){function r(e){var t=e.target||e.srcElement||window;return t.nodeType===3?t.parentNode:t}t.exports=r},{}],102:[function(e,t,n){function h(e){return i(!!s,"Markup wrapping node not initialized"),c.hasOwnProperty(e)||(e="*"),o.hasOwnProperty(e)||(e==="*"?s.innerHTML="<link />":s.innerHTML="<"+e+"></"+e+">",o[e]=!s.firstChild),o[e]?c[e]:null}var r=e("./ExecutionEnvironment"),i=e("./invariant"),s=r.canUseDOM?document.createElement("div"):null,o={circle:!0,defs:!0,g:!0,line:!0,linearGradient:!0,path:!0,polygon:!0,polyline:!0,radialGradient:!0,rect:!0,stop:!0,text:!0},u=[1,'<select multiple="true">',"</select>"],a=[1,"<table>","</table>"],f=[3,"<table><tbody><tr>","</tr></tbody></table>"],l=[1,"<svg>","</svg>"],c={"*":[1,"?<div>","</div>"],area:[1,"<map>","</map>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],legend:[1,"<fieldset>","</fieldset>"],param:[1,"<object>","</object>"],tr:[2,"<table><tbody>","</tbody></table>"],optgroup:u,option:u,caption:a,colgroup:a,tbody:a,tfoot:a,thead:a,td:f,th:f,circle:l,defs:l,g:l,line:l,linearGradient:l,path:l,polygon:l,polyline:l,radialGradient:l,rect:l,stop:l,text:l};t.exports=h},{"./ExecutionEnvironment":20,"./invariant":108}],103:[function(e,t,n){function r(e){while(e&&e.firstChild)e=e.firstChild;return e}function i(e){while(e){if(e.nextSibling)return e.nextSibling;e=e.parentNode}}function s(e,t){var n=r(e),s=0,o=0;while(n){if(n.nodeType==3){o=s+n.textContent.length;if(s<=t&&o>=t)return{node:n,offset:t-s};s=o}n=r(i(n))}}t.exports=s},{}],104:[function(e,t,n){function i(e){return e?e.nodeType===r?e.documentElement:e.firstChild:null}var r=9;t.exports=i},{}],105:[function(e,t,n){function s(){return!i&&r.canUseDOM&&(i="textContent"in document.createElement("div")?"textContent":"innerText"),i}var r=e("./ExecutionEnvironment"),i=null;t.exports=s},{"./ExecutionEnvironment":20}],106:[function(e,t,n){function r(e){return e===window?{x:window.pageXOffset||document.documentElement.scrollLeft,y:window.pageYOffset||document.documentElement.scrollTop}:{x:e.scrollLeft,y:e.scrollTop}}t.exports=r},{}],107:[function(e,t,n){function i(e){return e.replace(r,"-$1").toLowerCase()}var r=/([A-Z])/g;t.exports=i},{}],108:[function(e,t,n){var r=function(e){if(!e){var t=new Error("Minified exception occured; use the non-minified dev environment for the full error message and additional helpful warnings.");throw t.framesToPop=1,t}};r=function(e,t,n,r,i,s,o,u){if(t===undefined)throw new Error("invariant requires an error message argument");if(!e){var a=[n,r,i,s,o,u],f=0,l=new Error("Invariant Violation: "+t.replace(/%s/g,function(){return a[f++]}));throw l.framesToPop=1,l}},t.exports=r},{}],109:[function(e,t,n){function s(e,t){if(!r.canUseDOM||t&&!("addEventListener"in document))return!1;var n="on"+e,s=n in document;if(!s){var o=document.createElement("div");o.setAttribute(n,"return;"),s=typeof o[n]=="function"}return!s&&i&&e==="wheel"&&(s=document.implementation.hasFeature("Events.wheel","3.0")),s}var r=e("./ExecutionEnvironment"),i;r.canUseDOM&&(i=document.implementation&&document.implementation.hasFeature&&document.implementation.hasFeature("","")!==!0),t.exports=s},{"./ExecutionEnvironment":20}],110:[function(e,t,n){function r(e){return!!e&&(typeof Node!="undefined"?e instanceof Node:typeof e=="object"&&typeof e.nodeType=="number"&&typeof e.nodeName=="string")}t.exports=r},{}],111:[function(e,t,n){function i(e){return e&&(e.nodeName==="INPUT"&&r[e.type]||e.nodeName==="TEXTAREA")}var r={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};t.exports=i},{}],112:[function(e,t,n){function i(e){return r(e)&&e.nodeType==3}var r=e("./isNode");t.exports=i},{"./isNode":110}],113:[function(e,t,n){function r(e){e||(e="");var t,n=arguments.length;if(n>1)for(var r=1;r<n;r++)t=arguments[r],t&&(e+=" "+t);return e}t.exports=r},{}],114:[function(e,t,n){var r=e("./invariant"),i=function(e){var t={},n;r(e instanceof Object&&!Array.isArray(e),"keyMirror(...): Argument must be an object.");for(n in e){if(!e.hasOwnProperty(n))continue;t[n]=n}return t};t.exports=i},{"./invariant":108}],115:[function(e,t,n){var r=function(e){var t;for(t in e){if(!e.hasOwnProperty(t))continue;return t}return null};t.exports=r},{}],116:[function(e,t,n){function r(e){var t={};return function(n){return t.hasOwnProperty(n)?t[n]:t[n]=e.call(this,n)}}t.exports=r},{}],117:[function(e,t,n){var r=e("./mergeInto"),i=function(e,t){var n={};return r(n,e),r(n,t),n};t.exports=i},{"./mergeInto":119}],118:[function(e,t,n){var r=e("./invariant"),i=e("./keyMirror"),s=36,o=function(e){return typeof e!="object"||e===null},u={MAX_MERGE_DEPTH:s,isTerminal:o,normalizeMergeArg:function(e){return e===undefined||e===null?{}:e},checkMergeArrayArgs:function(e,t){r(Array.isArray(e)&&Array.isArray(t),"Tried to merge arrays, instead got %s and %s.",e,t)},checkMergeObjectArgs:function(e,t){u.checkMergeObjectArg(e),u.checkMergeObjectArg(t)},checkMergeObjectArg:function(e){r(!o(e)&&!Array.isArray(e),"Tried to merge an object, instead got %s.",e)},checkMergeLevel:function(e){r(e<s,"Maximum deep merge depth exceeded. You may be attempting to merge circular structures in an unsupported way.")},checkArrayStrategy:function(e){r(e===undefined||e in u.ArrayStrategies,"You must provide an array strategy to deep merge functions to instruct the deep merge how to resolve merging two arrays.")},ArrayStrategies:i({Clobber:!0,IndexByIndex:!0})};t.exports=u},{"./invariant":108,"./keyMirror":114}],119:[function(e,t,n){function s(e,t){i(e);if(t!=null){i(t);for(var n in t){if(!t.hasOwnProperty(n))continue;e[n]=t[n]}}}var r=e("./mergeHelpers"),i=r.checkMergeObjectArg;t.exports=s},{"./mergeHelpers":118}],120:[function(e,t,n){var r=function(e,t){var n;for(n in t){if(!t.hasOwnProperty(n))continue;e.prototype[n]=t[n]}};t.exports=r},{}],121:[function(e,t,n){function r(e,t,n){if(!e)return null;var r=0,i={};for(var s in e)e.hasOwnProperty(s)&&(i[s]=t.call(n,e[s],s,r++));return i}t.exports=r},{}],122:[function(e,t,n){function r(e,t,n){if(!e)return null;var r=0,i={};for(var s in e)e.hasOwnProperty(s)&&(i[s]=t.call(n,s,e[s],r++));return i}t.exports=r},{}],123:[function(e,t,n){function s(e){return i(r.isValidComponent(e),"onlyChild must be passed a children with exactly one child."),e}var r=e("./ReactComponent"),i=e("./invariant");t.exports=s},{"./ReactComponent":26,"./invariant":108}],124:[function(e,t,n){var r=e("./ExecutionEnvironment"),i=null;r.canUseDOM&&(i=window.performance||window.webkitPerformance);if(!i||!i.now)i=Date;var s=i.now.bind(i);t.exports=s},{"./ExecutionEnvironment":20}],125:[function(e,t,n){function r(e,t){if(e===t)return!0;var n;for(n in e)if(e.hasOwnProperty(n)&&(!t.hasOwnProperty(n)||e[n]!==t[n]))return!1;for(n in t)if(t.hasOwnProperty(n)&&!e.hasOwnProperty(n))return!1;return!0}t.exports=r},{}],126:[function(e,t,n){function r(e,t){if(e&&t&&e.constructor===t.constructor&&(e.props&&e.props.key)===(t.props&&t.props.key)){if(e._owner===t._owner)return!0;e.state&&console.warn("A recent change to React has been found to impact your code. A mounted component will now be unmounted and replaced by a component (of the same class) if their owners are different. Previously, ownership was not considered when updating.",e,t)}return!1}t.exports=r},{}],127:[function(e,t,n){function i(e){var t=e.length;r(!Array.isArray(e)&&(typeof e=="object"||typeof e=="function"),"toArray: Array-like object expected"),r(typeof t=="number","toArray: Object needs a length property"),r(t===0||t-1 in e,"toArray: Object should have keys for indices");if(e.hasOwnProperty)try{return Array.prototype.slice.call(e)}catch(n){}var i=Array(t);for(var s=0;s<t;s++)i[s]=e[s];return i}var r=e("./invariant");t.exports=i},{"./invariant":108}],128:[function(e,t,n){function l(e){return a[e]}function c(e,t){return e&&e.props&&e.props.key!=null?p(e.props.key):t.toString(36)}function h(e){return(""+e).replace(f,l)}function p(e){return"$"+h(e)}function v(e,t,n){e!==null&&e!==undefined&&d(e,"",0,t,n)}var r=e("./ReactInstanceHandles"),i=e("./ReactTextComponent"),s=e("./invariant"),o=r.SEPARATOR,u=":",a={"=":"=0",".":"=1",":":"=2"},f=/[=.:]/g,d=function(e,t,n,r,a){var f=0;if(Array.isArray(e))for(var l=0;l<e.length;l++){var h=e[l],v=t+(t?u:o)+c(h,l),m=n+f;f+=d(h,v,m,r,a)}else{var g=typeof e,y=t==="",b=y?o+c(e,0):t;if(e==null||g==="boolean")r(a,null,b,n),f=1;else if(e.mountComponentIntoNode)r(a,e,b,n),f=1;else if(g==="object"){s(!e||e.nodeType!==1,"traverseAllChildren(...): Encountered an invalid child; DOM elements are not valid children of React components.");for(var w in e)e.hasOwnProperty(w)&&(f+=d(e[w],t+(t?u:o)+p(w)+u+c(e[w],0),n+f,r,a))}else if(g==="string"){var E=new i(e);r(a,E,b,n),f+=1}else if(g==="number"){var S=new i(""+e);r(a,S,b,n),f+=1}}return f};t.exports=v},{"./ReactInstanceHandles":53,"./ReactTextComponent":69,"./invariant":108}],129:[function(e,t,n){var r=e("./emptyFunction"),i=r;i=function(e,t){var n=Array.prototype.slice.call(arguments,2);if(t===undefined)throw new Error("`warning(condition, format, ...args)` requires a warning message argument");if(!e){var r=0;console.warn("Warning: "+t.replace(/%s/g,function(){return n[r++]}))}},t.exports=i},{"./emptyFunction":95}]},{},[24])(24)}),function(){function x(e,t,n){var r=(n||0)-1,i=e?e.length:0;while(++r<i)if(e[r]===t)return r;return-1}function T(e,t){var n=e.criteria,r=t.criteria,i=-1,s=n.length;while(++i<s){var o=n[i],u=r[i];if(o!==u){if(o>u||typeof o=="undefined")return 1;if(o<u||typeof u=="undefined")return-1}}return e.index-t.index}function N(e){return"\\"+g[e]}function C(e,t,n){t||(t=0),typeof n=="undefined"&&(n=e?e.length:0);var r=-1,i=n-t||0,s=Array(i<0?0:i);while(++r<i)s[r]=e[t+r];return s}function X(e){return e instanceof X?e:new V(e)}function V(e,t){this.__chain__=!!t,this.__wrapped__=e}function J(e){function i(){if(n){var e=C(n);H.apply(e,arguments)}if(this instanceof i){var s=K(t.prototype),o=t.apply(s,e||arguments);return _t(o)?o:s}return t.apply(r,e||arguments)}var t=e[0],n=e[2],r=e[4];return i}function K(e,t){return _t(e)?j(e):{}}function Q(e,t,n){if(typeof e!="function")return Vn;if(typeof t!="undefined"&&"prototype"in e){switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,i){return e.call(t,n,r,i)};case 4:return function(n,r,i,s){return e.call(t,n,r,i,s)}}return Dn(e,t)}return e}function G(e){function h(){var e=u?s:this;if(r){var p=C(r);H.apply(p,arguments)}if(i||f){p||(p=C(arguments)),i&&H.apply(p,i);if(f&&p.length<o)return n|=16,G([t,l?n:n&-4,p,null,s,o])}p||(p=arguments),a&&(t=e[c]);if(this instanceof h){e=K(t.prototype);var d=t.apply(e,p);return _t(d)?d:e}return t.apply(e,p)}var t=e[0],n=e[1],r=e[2],i=e[3],s=e[4],o=e[5],u=n&1,a=n&2,f=n&4,l=n&8,c=t;return h}function Y(e,t){var n=-1,r=ot(),i=e?e.length:0,s=[];while(++n<i){var o=e[n];r(t,o)<0&&s.push(o)}return s}function Z(e,t,n,r){var i=(r||0)-1,s=e?e.length:0,o=[];while(++i<s){var u=e[i];if(u&&typeof u=="object"&&typeof u.length=="number"&&(lt(u)||ft(u))){t||(u=Z(u,t,n));var a=-1,f=u.length,l=o.length;o.length+=f;while(++a<f)o[l++]=u[a]}else n||o.push(u)}return o}function et(e,t,r,i){if(e===t)return e!==0||1/e==1/t;var s=typeof e,o=typeof t;if(e===e&&(!e||!m[s])&&(!t||!m[o]))return!1;if(e==null||t==null)return e===t;var u=O.call(e),c=O.call(t);if(u!=c)return!1;switch(u){case f:case l:return+e==+t;case h:return e!=+e?t!=+t:e==0?1/e==1/t:e==+t;case d:case v:return e==String(t)}var g=u==a;if(!g){var y=e instanceof X,b=t instanceof X;if(y||b)return et(y?e.__wrapped__:e,b?t.__wrapped__:t,r,i);if(u!=p)return!1;var w=e.constructor,E=t.constructor;if(w!=E&&!(Mt(w)&&w instanceof w&&Mt(E)&&E instanceof E)&&"constructor"in e&&"constructor"in t)return!1}r||(r=[]),i||(i=[]);var S=r.length;while(S--)if(r[S]==e)return i[S]==t;var x=!0,T=0;r.push(e),i.push(t);if(g){T=t.length,x=T==e.length;if(x)while(T--)if(!(x=et(e[T],t[T],r,i)))break}else wt(t,function(t,s,o){if(P.call(o,s))return T++,!(x=P.call(e,s)&&et(e[s],t,r,i))&&n}),x&&wt(e,function(e,t,r){if(P.call(r,t))return!(x=--T>-1)&&n});return r.pop(),i.pop(),x}function tt(e,t){return e+D(W()*(t-e+1))}function nt(e,t,n){var r=-1,i=ot(),s=e?e.length:0,o=[],u=n?[]:o;while(++r<s){var a=e[r],f=n?n(a,r,e):a;if(t?!r||u[u.length-1]!==f:i(u,f)<0)n&&u.push(f),o.push(a)}return o}function rt(e){return function(t,n,r){var i={};n=Wn(n,r,3);var s=-1,o=t?t.length:0;if(typeof o=="number")while(++s<o){var u=t[s];e(i,u,n(u,s,t),t)}else Et(t,function(t,r,s){e(i,t,n(t,r,s),s)});return i}}function it(e,t,n,r,i,s){var o=t&1,u=t&2,a=t&4,f=t&8,l=t&16,c=t&32;if(!u&&!Mt(e))throw new TypeError;l&&!n.length&&(t&=-17,l=n=!1),c&&!r.length&&(t&=-33,c=r=!1);var h=t==1||t===17?J:G;return h([e,t,n,r,i,s])}function st(e){return pt[e]}function ot(){var e=(e=X.indexOf)===bn?x:e;return e}function ut(e){return typeof e=="function"&&M.test(e)}function at(e){return dt[e]}function ft(e){return e&&typeof e=="object"&&typeof e.length=="number"&&O.call(e)==u||!1}function gt(e){if(!e)return e;for(var t=1,n=arguments.length;t<n;t++){var r=arguments[t];if(r)for(var i in r)e[i]=r[i]}return e}function yt(e){return _t(e)?lt(e)?C(e):gt({},e):e}function bt(e){if(!e)return e;for(var t=1,n=arguments.length;t<n;t++){var r=arguments[t];if(r)for(var i in r)typeof e[i]=="undefined"&&(e[i]=r[i])}return e}function St(e){var t=[];return wt(e,function(e,n){Mt(e)&&t.push(n)}),t.sort()}function xt(e,t){return e?P.call(e,t):!1}function Tt(e){var t=-1,n=ht(e),r=n.length,i={};while(++t<r){var s=n[t];i[e[s]]=s}return i}function Nt(e){return e===!0||e===!1||e&&typeof e=="object"&&O.call(e)==f||!1}function Ct(e){return e&&typeof e=="object"&&O.call(e)==l||!1}function kt(e){return e&&e.nodeType===1||!1}function Lt(e){if(!e)return!0;if(lt(e)||jt(e))return!e.length;for(var t in e)if(P.call(e,t))return!1;return!0}function At(e,t){return et(e,t)}function Ot(e){return I(e)&&!q(parseFloat(e))}function Mt(e){return typeof e=="function"}function _t(e){return!!e&&!!m[typeof e]}function Dt(e){return Ht(e)&&e!=+e}function Pt(e){return e===null}function Ht(e){return typeof e=="number"||e&&typeof e=="object"&&O.call(e)==h||!1}function Bt(e){return e&&m[typeof e]&&O.call(e)==d||!1}function jt(e){return typeof e=="string"||e&&typeof e=="object"&&O.call(e)==v||!1}function Ft(e){return typeof e=="undefined"}function It(e){var t=[];wt(e,function(e,n){t.push(n)}),t=Y(t,Z(arguments,!0,!1,1));var n=-1,r=t.length,i={};while(++n<r){var s=t[n];i[s]=e[s]}return i}function qt(e){var t=-1,n=ht(e),r=n.length,i=Array(r);while(++t<r){var s=n[t];i[t]=[s,e[s]]}return i}function Rt(e){var t=-1,n=Z(arguments,!0,!1,1),r=n.length,i={};while(++t<r){var s=n[t];s in e&&(i[s]=e[s])}return i}function Ut(e){var t=-1,n=ht(e),r=n.length,i=Array(r);while(++t<r)i[t]=e[n[t]];return i}function zt(e,t){var r=ot(),i=e?e.length:0,s=!1;return i&&typeof i=="number"?s=r(e,t)>-1:Et(e,function(e){return(s=e===t)&&n}),s}function Xt(e,t,r){var i=!0;t=Wn(t,r,3);var s=-1,o=e?e.length:0;if(typeof o=="number"){while(++s<o)if(!(i=!!t(e[s],s,e)))break}else Et(e,function(e,r,s){return!(i=!!t(e,r,s))&&n});return i}function Vt(e,t,n){var r=[];t=Wn(t,n,3);var i=-1,s=e?e.length:0;if(typeof s=="number")while(++i<s){var o=e[i];t(o,i,e)&&r.push(o)}else Et(e,function(e,n,i){t(e,n,i)&&r.push(e)});return r}function $t(e,t,r){t=Wn(t,r,3);var i=-1,s=e?e.length:0;if(typeof s!="number"){var u;return Et(e,function(e,r,i){if(t(e,r,i))return u=e,n}),u}while(++i<s){var o=e[i];if(t(o,i,e))return o}}function Jt(e,t){return dn(e,t,!0)}function Kt(e,t,r){var i=-1,s=e?e.length:0;t=t&&typeof r=="undefined"?t:Q(t,r,3);if(typeof s=="number"){while(++i<s)if(t(e[i],i,e)===n)break}else Et(e,t)}function Qt(e,t){var r=e?e.length:0;if(typeof r=="number"){while(r--)if(t(e[r],r,e)===!1)break}else{var i=ht(e);r=i.length,Et(e,function(e,s,o){return s=i?i[--r]:--r,t(o[s],s,o)===!1&&n})}}function Zt(e,t){var n=C(arguments,2),r=-1,i=typeof t=="function",s=e?e.length:0,o=Array(typeof s=="number"?s:0);return Kt(e,function(e){o[++r]=(i?t:e[t]).apply(e,n)}),o}function en(e,t,n){var r=-1,i=e?e.length:0;t=Wn(t,n,3);if(typeof i=="number"){var s=Array(i);while(++r<i)s[r]=t(e[r],r,e)}else s=[],Et(e,function(e,n,i){s[++r]=t(e,n,i)});return s}function tn(e,t,n){var r=-Infinity,i=r;typeof t!="function"&&n&&n[t]===e&&(t=null);var s=-1,o=e?e.length:0;if(t==null&&typeof o=="number")while(++s<o){var u=e[s];u>i&&(i=u)}else t=Wn(t,n,3),Kt(e,function(e,n,s){var o=t(e,n,s);o>r&&(r=o,i=e)});return i}function nn(e,t,n){var r=Infinity,i=r;typeof t!="function"&&n&&n[t]===e&&(t=null);var s=-1,o=e?e.length:0;if(t==null&&typeof o=="number")while(++s<o){var u=e[s];u<i&&(i=u)}else t=Wn(t,n,3),Kt(e,function(e,n,s){var o=t(e,n,s);o<r&&(r=o,i=e)});return i}function sn(e,t,n,r){if(!e)return n;var i=arguments.length<3;t=Wn(t,r,4);var s=-1,o=e.length;if(typeof o=="number"){i&&(n=e[++s]);while(++s<o)n=t(n,e[s],s,e)}else Et(e,function(e,r,s){n=i?(i=!1,e):t(n,e,r,s)});return n}function on(e,t,n,r){var i=arguments.length<3;return t=Wn(t,r,4),Qt(e,function(e,r,s){n=i?(i=!1,e):t(n,e,r,s)}),n}function un(e,t,n){return t=Wn(t,n,3),Vt(e,function(e,n,r){return!t(e,n,r)})}function an(t,n,r){t&&typeof t.length!="number"&&(t=Ut(t));if(n==null||r)return t?t[tt(0,t.length-1)]:e;var i=fn(t);return i.length=z(U(0,n),i.length),i}function fn(e){var t=-1,n=e?e.length:0,r=Array(typeof n=="number"?n:0);return Kt(e,function(e){var n=tt(0,++t);r[t]=r[n],r[n]=e}),r}function ln(e){var t=e?e.length:0;return typeof t=="number"?t:ht(e).length}function cn(e,t,r){var i;t=Wn(t,r,3);var s=-1,o=e?e.length:0;if(typeof o=="number"){while(++s<o)if(i=t(e[s],s,e))break}else Et(e,function(e,r,s){return(i=t(e,r,s))&&n});return!!i}function hn(e,t,n){var r=-1,i=e?e.length:0,s=Array(typeof i=="number"?i:0);t=Wn(t,n,3),Kt(e,function(e,n,i){s[++r]={criteria:[t(e,n,i)],index:r,value:e}}),i=s.length,s.sort(T);while(i--)s[i]=s[i].value;return s}function pn(e){return lt(e)?C(e):e&&typeof e.length=="number"?en(e):Ut(e)}function dn(t,n,r){return r&&Lt(n)?e:(r?$t:Vt)(t,n)}function vn(e){var t=-1,n=e?e.length:0,r=[];while(++t<n){var i=e[t];i&&r.push(i)}return r}function mn(e){return Y(e,Z(arguments,!0,!0,1))}function gn(t,n,r){var i=0,s=t?t.length:0;if(typeof n!="number"&&n!=null){var o=-1;n=Wn(n,r,3);while(++o<s&&n(t[o],o,t))i++}else{i=n;if(i==null||r)return t?t[0]:e}return C(t,0,z(U(0,i),s))}function yn(e,t){return Z(e,t)}function bn(e,t,n){if(typeof n=="number"){var r=e?e.length:0;n=n<0?U(0,r+n):n||0}else if(n){var i=Cn(e,t);return e[i]===t?i:-1}return x(e,t,n)}function wn(e,t,n){var r=0,i=e?e.length:0;if(typeof t!="number"&&t!=null){var s=i;t=Wn(t,n,3);while(s--&&t(e[s],s,e))r++}else r=t==null||n?1:t||r;return C(e,0,z(U(0,i-r),i))}function En(){var e=[],t=-1,n=arguments.length;while(++t<n){var r=arguments[t];(lt(r)||ft(r))&&e.push(r)}var i=e[0],s=-1,o=ot(),u=i?i.length:0,a=[];e:while(++s<u){r=i[s];if(o(a,r)<0){var t=n;while(--t)if(o(e[t],r)<0)continue e;a.push(r)}}return a}function Sn(t,n,r){var i=0,s=t?t.length:0;if(typeof n!="number"&&n!=null){var o=s;n=Wn(n,r,3);while(o--&&n(t[o],o,t))i++}else{i=n;if(i==null||r)return t?t[s-1]:e}return C(t,U(0,s-i))}function xn(e,t,n){var r=e?e.length:0;typeof n=="number"&&(r=(n<0?U(0,r+n):z(n,r-1))+1);while(r--)if(e[r]===t)return r;return-1}function Tn(e,t,n){e=+e||0,n=+n||1,t==null&&(t=e,e=0);var r=-1,i=U(0,_((t-e)/n)),s=Array(i);while(++r<i)s[r]=e,e+=n;return s}function Nn(e,t,n){if(typeof t!="number"&&t!=null){var r=0,i=-1,s=e?e.length:0;t=Wn(t,n,3);while(++i<s&&t(e[i],i,e))r++}else r=t==null||n?1:U(0,t);return C(e,r)}function Cn(e,t,n,r){var i=0,s=e?e.length:i;n=n?Wn(n,r,1):Vn,t=n(t);while(i<s){var o=i+s>>>1;n(e[o])<t?i=o+1:s=o}return i}function kn(){return nt(Z(arguments,!0,!0))}function Ln(e,t,n,r){return typeof t!="boolean"&&t!=null&&(r=n,n=typeof t!="function"&&r&&r[t]===e?null:t,t=!1),n!=null&&(n=Wn(n,r,3)),nt(e,t,n)}function An(e){return Y(e,C(arguments,1))}function On(){var e=-1,t=tn(rn(arguments,"length")),n=Array(t<0?0:t);while(++e<t)n[e]=rn(arguments,e);return n}function Mn(e,t){var n=-1,r=e?e.length:0,i={};!t&&r&&!lt(e[0])&&(t=[]);while(++n<r){var s=e[n];t?i[s]=t[n]:s&&(i[s[0]]=s[1])}return i}function _n(e,t){if(!Mt(t))throw new TypeError;return function(){if(--e<1)return t.apply(this,arguments)}}function Dn(e,t){return arguments.length>2?it(e,17,C(arguments,2),null,t):it(e,1,null,null,t)}function Pn(e){var t=arguments.length>1?Z(arguments,!0,!1,1):St(e),n=-1,r=t.length;while(++n<r){var i=t[n];e[i]=it(e[i],1,null,null,e)}return e}function Hn(){var e=arguments,t=e.length;while(t--)if(!Mt(e[t]))throw new TypeError;return function(){var t=arguments,n=e.length;while(n--)t=[e[n].apply(this,t)];return t[0]}}function Bn(t,n,r){var i,s,o,u,a,f,l,c=0,h=!1,p=!0;if(!Mt(t))throw new TypeError;n=U(0,n)||0;if(r===!0){var d=!0;p=!1}else _t(r)&&(d=r.leading,h="maxWait"in r&&(U(n,r.maxWait)||0),p="trailing"in r?r.trailing:p);var v=function(){var r=n-(Qn()-u);if(r<=0){s&&clearTimeout(s);var h=l;s=f=l=e,h&&(c=Qn(),o=t.apply(a,i),!f&&!s&&(i=a=null))}else f=setTimeout(v,r)},m=function(){f&&clearTimeout(f),s=f=l=e;if(p||h!==n)c=Qn(),o=t.apply(a,i),!f&&!s&&(i=a=null)};return function(){i=arguments,u=Qn(),a=this,l=p&&(f||!d);if(h===!1)var e=d&&!f;else{!s&&!d&&(c=u);var r=h-(u-c),g=r<=0;g?(s&&(s=clearTimeout(s)),c=u,o=t.apply(a,i)):s||(s=setTimeout(m,r))}return g&&f?f=clearTimeout(f):!f&&n!==h&&(f=setTimeout(v,n)),e&&(g=!0,o=t.apply(a,i)),g&&!f&&!s&&(i=a=null),o}}function jn(t){if(!Mt(t))throw new TypeError;var n=C(arguments,1);return setTimeout(function(){t.apply(e,n)},1)}function Fn(t,n){if(!Mt(t))throw new TypeError;var r=C(arguments,2);return setTimeout(function(){t.apply(e,r)},n)}function In(e,t){var n={};return function(){var i=t?t.apply(this,arguments):r+arguments[0];return P.call(n,i)?n[i]:n[i]=e.apply(this,arguments)}}function qn(e){var t,n;if(!Mt(e))throw new TypeError;return function(){return t?n:(t=!0,n=e.apply(this,arguments),e=null,n)}}function Rn(e){return it(e,16,C(arguments,1))}function Un(e,t,n){var r=!0,i=!0;if(!Mt(e))throw new TypeError;return n===!1?r=!1:_t(n)&&(r="leading"in n?n.leading:r,i="trailing"in n?n.trailing:i),n={},n.leading=r,n.maxWait=t,n.trailing=i,Bn(e,t,n)}function zn(e,t){return it(t,16,[e])}function Wn(e,t,n){var r=typeof e;if(e==null||r=="function")return Q(e,t,n);if(r!="object")return Gn(e);var i=ht(e);return function(t){var n=i.length,r=!1;while(n--)if(!(r=t[i[n]]===e[i[n]]))break;return r}}function Xn(e){return e==null?"":String(e).replace(mt,st)}function Vn(e){return e}function $n(e){Kt(St(e),function(t){var n=X[t]=e[t];X.prototype[t]=function(){var e=[this.__wrapped__];H.apply(e,arguments);var t=n.apply(X,e);return this.__chain__?new V(t,!0):t}})}function Jn(){return y._=A,this}function Kn(){}function Gn(e){return function(t){return t[e]}}function Yn(e,t){return e==null&&t==null&&(t=1),e=+e||0,t==null?(t=e,e=0):t=+t||0,e+D(W()*(t-e+1))}function Zn(e,t){if(e){var n=e[t];return Mt(n)?e[t]():n}}function er(e,t,n){var r=X,i=r.templateSettings;e=String(e||""),n=bt({},n,i);var u=0,a="__p += '",f=n.variable,l=RegExp((n.escape||s).source+"|"+(n.interpolate||s).source+"|"+(n.evaluate||s).source+"|$","g");e.replace(l,function(t,n,r,i,s){return a+=e.slice(u,s).replace(o,N),n&&(a+="' +\n_.escape("+n+") +\n'"),i&&(a+="';\n"+i+";\n__p += '"),r&&(a+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),u=s+t.length,t}),a+="';\n",f||(f="obj",a="with ("+f+" || {}) {\n"+a+"\n}\n"),a="function("+f+") {\n"+"var __t, __p = '', __j = Array.prototype.join;\n"+"function print() { __p += __j.call(arguments, '') }\n"+a+"return __p\n}";try{var c=Function("_","return "+a)(r)}catch(h){throw h.source=a,h}return t?c(t):(c.source=a,c)}function tr(e,t,n){e=(e=+e)>-1?e:0;var r=-1,i=Array(e);t=Q(t,n,1);while(++r<e)i[r]=t(r);return i}function nr(e){return e==null?"":String(e).replace(vt,at)}function rr(e){var n=++t+"";return e?e+n:n}function ir(e){return e=new V(e),e.__chain__=!0,e}function sr(e,t){return t(e),e}function or(){return this.__chain__=!0,this}function ur(){return this.__wrapped__}var e,t=0,n={},r=+(new Date)+"",i=/<%=([\s\S]+?)%>/g,s=/($^)/,o=/['\n\r\t\u2028\u2029\\]/g,u="[object Arguments]",a="[object Array]",f="[object Boolean]",l="[object Date]",c="[object Function]",h="[object Number]",p="[object Object]",d="[object RegExp]",v="[object String]",m={"boolean":!1,"function":!0,object:!0,number:!1,string:!1,"undefined":!1},g={"\\":"\\","'":"'","\n":"n","\r":"r","	":"t","\u2028":"u2028","\u2029":"u2029"},y=m[typeof window]&&window||this,b=m[typeof exports]&&exports&&!exports.nodeType&&exports,w=m[typeof module]&&module&&!module.nodeType&&module,E=w&&w.exports===b&&b,S=m[typeof global]&&global;S&&(S.global===S||S.window===S)&&(y=S);var k=[],L=Object.prototype,A=y._,O=L.toString,M=RegExp("^"+String(O).replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/toString| for [^\]]+/g,".*?")+"$"),_=Math.ceil,D=Math.floor,P=L.hasOwnProperty,H=k.push,B=L.propertyIsEnumerable,j=ut(j=Object.create)&&j,F=ut(F=Array.isArray)&&F,I=y.isFinite,q=y.isNaN,R=ut(R=Object.keys)&&R,U=Math.max,z=Math.min,W=Math.random;V.prototype=X.prototype;var $={};(function(){var e={0:1,length:1};$.spliceObjects=(k.splice.call(e,0,1),!e[0])})(1),X.templateSettings={escape:/<%-([\s\S]+?)%>/g,evaluate:/<%([\s\S]+?)%>/g,interpolate:i,variable:""},j||(K=function(){function e(){}return function(t){if(_t(t)){e.prototype=t;var n=new e;e.prototype=null}return n||y.Object()}}()),ft(arguments)||(ft=function(e){return e&&typeof e=="object"&&typeof e.length=="number"&&P.call(e,"callee")&&!B.call(e,"callee")||!1});var lt=F||function(e){return e&&typeof e=="object"&&typeof e.length=="number"&&O.call(e)==a||!1},ct=function(e){var t,n=e,r=[];if(!n)return r;if(!m[typeof e])return r;for(t in n)P.call(n,t)&&r.push(t);return r},ht=R?function(e){return _t(e)?R(e):[]}:ct,pt={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"},dt=Tt(pt),vt=RegExp("("+ht(dt).join("|")+")","g"),mt=RegExp("["+ht(pt).join("")+"]","g"),wt=function(e,t){var r,i=e,s=i;if(!i)return s;if(!m[typeof i])return s;for(r in i)if(t(i[r],r,e)===n)return s;return s},Et=function(e,t){var r,i=e,s=i;if(!i)return s;if(!m[typeof i])return s;for(r in i)if(P.call(i,r)&&t(i[r],r,e)===n)return s;return s};Mt(/x/)&&(Mt=function(e){return typeof e=="function"&&O.call(e)==c});var Wt=rt(function(e,t,n){P.call(e,n)?e[n]++:e[n]=1}),Gt=rt(function(e,t,n){(P.call(e,n)?e[n]:e[n]=[]).push(t)}),Yt=rt(function(e,t,n){e[n]=t}),rn=en,Qn=ut(Qn=Date.now)&&Qn||function(){return(new Date).getTime()};X.after=_n,X.bind=Dn,X.bindAll=Pn,X.chain=ir,X.compact=vn,X.compose=Hn,X.countBy=Wt,X.debounce=Bn,X.defaults=bt,X.defer=jn,X.delay=Fn,X.difference=mn,X.filter=Vt,X.flatten=yn,X.forEach=Kt,X.functions=St,X.groupBy=Gt,X.indexBy=Yt,X.initial=wn,X.intersection=En,X.invert=Tt,X.invoke=Zt,X.keys=ht,X.map=en,X.max=tn,X.memoize=In,X.min=nn,X.omit=It,X.once=qn,X.pairs=qt,X.partial=Rn,X.pick=Rt,X.pluck=rn,X.range=Tn,X.reject=un,X.rest=Nn,X.shuffle=fn,X.sortBy=hn,X.tap=sr,X.throttle=Un,X.times=tr,X.toArray=pn,X.union=kn,X.uniq=Ln,X.values=Ut,X.where=dn,X.without=An,X.wrap=zn,X.zip=On,X.collect=en,X.drop=Nn,X.each=Kt,X.extend=gt,X.methods=St,X.object=Mn,X.select=Vt,X.tail=Nn,X.unique=Ln,X.clone=yt,X.contains=zt,X.escape=Xn,X.every=Xt,X.find=$t,X.has=xt,X.identity=Vn,X.indexOf=bn,X.isArguments=ft,X.isArray=lt,X.isBoolean=Nt,X.isDate=Ct,X.isElement=kt,X.isEmpty=Lt,X.isEqual=At,X.isFinite=Ot,X.isFunction=Mt,X.isNaN=Dt,X.isNull=Pt,X.isNumber=Ht,X.isObject=_t,X.isRegExp=Bt,X.isString=jt,X.isUndefined=Ft,X.lastIndexOf=xn,X.mixin=$n,X.noConflict=Jn,X.random=Yn,X.reduce=sn,X.reduceRight=on,X.result=Zn,X.size=ln,X.some=cn,X.sortedIndex=Cn,X.template=er,X.unescape=nr,X.uniqueId=rr,X.all=Xt,X.any=cn,X.detect=$t,X.findWhere=Jt,X.foldl=sn,X.foldr=on,X.include=zt,X.inject=sn,X.first=gn,X.last=Sn,X.sample=an,X.take=gn,X.head=gn,$n(X),X.VERSION="2.4.1",X.prototype.chain=or,X.prototype.value=ur,Kt(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=k[e];X.prototype[e]=function(){var e=this.__wrapped__;return t.apply(e,arguments),!$.spliceObjects&&e.length===0&&delete e[0],this}}),Kt(["concat","join","slice"],function(e){var t=k[e];X.prototype[e]=function(){var e=this.__wrapped__,n=t.apply(e,arguments);return this.__chain__&&(n=new V(n),n.__chain__=!0),n}}),typeof define=="function"&&typeof define.amd=="object"&&define.amd?(y._=X,define("underscore",[],function(){return X})):b&&w?E?(w.exports=X)._=X:b._=X:y._=X}.call(this),function(e,t){if(typeof define=="function"&&define.amd)define("backbone",["underscore","jquery","exports"],function(n,r,i){e.Backbone=t(e,i,n,r)});else if(typeof exports!="undefined"){var n=require("underscore");t(e,exports,n)}else e.Backbone=t(e,{},e._,e.jQuery||e.Zepto||e.ender||e.$)}(this,function(e,t,n,r){var i=e.Backbone,s=[],o=s.push,u=s.slice,a=s.splice;t.VERSION="1.1.2",t.$=r,t.noConflict=function(){return e.Backbone=i,this},t.emulateHTTP=!1,t.emulateJSON=!1;var f=t.Events={on:function(e,t,n){if(!c(this,"on",e,[t,n])||!t)return this;this._events||(this._events={});var r=this._events[e]||(this._events[e]=[]);return r.push({callback:t,context:n,ctx:n||this}),this},once:function(e,t,r){if(!c(this,"once",e,[t,r])||!t)return this;var i=this,s=n.once(function(){i.off(e,s),t.apply(this,arguments)});return s._callback=t,this.on(e,s,r)},off:function(e,t,r){var i,s,o,u,a,f,l,h;if(!this._events||!c(this,"off",e,[t,r]))return this;if(!e&&!t&&!r)return this._events=void 0,this;u=e?[e]:n.keys(this._events);for(a=0,f=u.length;a<f;a++){e=u[a];if(o=this._events[e]){this._events[e]=i=[];if(t||r)for(l=0,h=o.length;l<h;l++)s=o[l],(t&&t!==s.callback&&t!==s.callback._callback||r&&r!==s.context)&&i.push(s);i.length||delete this._events[e]}}return this},trigger:function(e){if(!this._events)return this;var t=u.call(arguments,1);if(!c(this,"trigger",e,t))return this;var n=this._events[e],r=this._events.all;return n&&h(n,t),r&&h(r,arguments),this},stopListening:function(e,t,r){var i=this._listeningTo;if(!i)return this;var s=!t&&!r;!r&&typeof t=="object"&&(r=this),e&&((i={})[e._listenId]=e);for(var o in i)e=i[o],e.off(t,r,this),(s||n.isEmpty(e._events))&&delete this._listeningTo[o];return this}},l=/\s+/,c=function(e,t,n,r){if(!n)return!0;if(typeof n=="object"){for(var i in n)e[t].apply(e,[i,n[i]].concat(r));return!1}if(l.test(n)){var s=n.split(l);for(var o=0,u=s.length;o<u;o++)e[t].apply(e,[s[o]].concat(r));return!1}return!0},h=function(e,t){var n,r=-1,i=e.length,s=t[0],o=t[1],u=t[2];switch(t.length){case 0:while(++r<i)(n=e[r]).callback.call(n.ctx);return;case 1:while(++r<i)(n=e[r]).callback.call(n.ctx,s);return;case 2:while(++r<i)(n=e[r]).callback.call(n.ctx,s,o);return;case 3:while(++r<i)(n=e[r]).callback.call(n.ctx,s,o,u);return;default:while(++r<i)(n=e[r]).callback.apply(n.ctx,t);return}},p={listenTo:"on",listenToOnce:"once"};n.each(p,function(e,t){f[t]=function(t,r,i){var s=this._listeningTo||(this._listeningTo={}),o=t._listenId||(t._listenId=n.uniqueId("l"));return s[o]=t,!i&&typeof r=="object"&&(i=this),t[e](r,i,this),this}}),f.bind=f.on,f.unbind=f.off,n.extend(t,f);var d=t.Model=function(e,t){var r=e||{};t||(t={}),this.cid=n.uniqueId("c"),this.attributes={},t.collection&&(this.collection=t.collection),t.parse&&(r=this.parse(r,t)||{}),r=n.defaults({},r,n.result(this,"defaults")),this.set(r,t),this.changed={},this.initialize.apply(this,arguments)};n.extend(d.prototype,f,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(e){return n.clone(this.attributes)},sync:function(){return t.sync.apply(this,arguments)},get:function(e){return this.attributes[e]},escape:function(e){return n.escape(this.get(e))},has:function(e){return this.get(e)!=null},set:function(e,t,r){var i,s,o,u,a,f,l,c;if(e==null)return this;typeof e=="object"?(s=e,r=t):(s={})[e]=t,r||(r={});if(!this._validate(s,r))return!1;o=r.unset,a=r.silent,u=[],f=this._changing,this._changing=!0,f||(this._previousAttributes=n.clone(this.attributes),this.changed={}),c=this.attributes,l=this._previousAttributes,this.idAttribute in s&&(this.id=s[this.idAttribute]);for(i in s)t=s[i],n.isEqual(c[i],t)||u.push(i),n.isEqual(l[i],t)?delete this.changed[i]:this.changed[i]=t,o?delete c[i]:c[i]=t;if(!a){u.length&&(this._pending=r);for(var h=0,p=u.length;h<p;h++)this.trigger("change:"+u[h],this,c[u[h]],r)}if(f)return this;if(!a)while(this._pending)r=this._pending,this._pending=!1,this.trigger("change",this,r);return this._pending=!1,this._changing=!1,this},unset:function(e,t){return this.set(e,void 0,n.extend({},t,{unset:!0}))},clear:function(e){var t={};for(var r in this.attributes)t[r]=void 0;return this.set(t,n.extend({},e,{unset:!0}))},hasChanged:function(e){return e==null?!n.isEmpty(this.changed):n.has(this.changed,e)},changedAttributes:function(e){if(!e)return this.hasChanged()?n.clone(this.changed):!1;var t,r=!1,i=this._changing?this._previousAttributes:this.attributes;for(var s in e){if(n.isEqual(i[s],t=e[s]))continue;(r||(r={}))[s]=t}return r},previous:function(e){return e==null||!this._previousAttributes?null:this._previousAttributes[e]},previousAttributes:function(){return n.clone(this._previousAttributes)},fetch:function(e){e=e?n.clone(e):{},e.parse===void 0&&(e.parse=!0);var t=this,r=e.success;return e.success=function(n){if(!t.set(t.parse(n,e),e))return!1;r&&r(t,n,e),t.trigger("sync",t,n,e)},I(this,e),this.sync("read",this,e)},save:function(e,t,r){var i,s,o,u=this.attributes;e==null||typeof e=="object"?(i=e,r=t):(i={})[e]=t,r=n.extend({validate:!0},r);if(i&&!r.wait){if(!this.set(i,r))return!1}else if(!this._validate(i,r))return!1;i&&r.wait&&(this.attributes=n.extend({},u,i)),r.parse===void 0&&(r.parse=!0);var a=this,f=r.success;return r.success=function(e){a.attributes=u;var t=a.parse(e,r);r.wait&&(t=n.extend(i||{},t));if(n.isObject(t)&&!a.set(t,r))return!1;f&&f(a,e,r),a.trigger("sync",a,e,r)},I(this,r),s=this.isNew()?"create":r.patch?"patch":"update",s==="patch"&&(r.attrs=i),o=this.sync(s,this,r),i&&r.wait&&(this.attributes=u),o},destroy:function(e){e=e?n.clone(e):{};var t=this,r=e.success,i=function(){t.trigger("destroy",t,t.collection,e)};e.success=function(n){(e.wait||t.isNew())&&i(),r&&r(t,n,e),t.isNew()||t.trigger("sync",t,n,e)};if(this.isNew())return e.success(),!1;I(this,e);var s=this.sync("delete",this,e);return e.wait||i(),s},url:function(){var e=n.result(this,"urlRoot")||n.result(this.collection,"url")||F();return this.isNew()?e:e.replace(/([^\/])$/,"$1/")+encodeURIComponent(this.id)},parse:function(e,t){return e},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(e){return this._validate({},n.extend(e||{},{validate:!0}))},_validate:function(e,t){if(!t.validate||!this.validate)return!0;e=n.extend({},this.attributes,e);var r=this.validationError=this.validate(e,t)||null;return r?(this.trigger("invalid",this,r,n.extend(t,{validationError:r})),!1):!0}});var v=["keys","values","pairs","invert","pick","omit"];n.each(v,function(e){d.prototype[e]=function(){var t=u.call(arguments);return t.unshift(this.attributes),n[e].apply(n,t)}});var m=t.Collection=function(e,t){t||(t={}),t.model&&(this.model=t.model),t.comparator!==void 0&&(this.comparator=t.comparator),this._reset(),this.initialize.apply(this,arguments),e&&this.reset(e,n.extend({silent:!0},t))},g={add:!0,remove:!0,merge:!0},y={add:!0,remove:!1};n.extend(m.prototype,f,{model:d,initialize:function(){},toJSON:function(e){return this.map(function(t){return t.toJSON(e)})},sync:function(){return t.sync.apply(this,arguments)},add:function(e,t){return this.set(e,n.extend({merge:!1},t,y))},remove:function(e,t){var r=!n.isArray(e);e=r?[e]:n.clone(e),t||(t={});var i,s,o,u;for(i=0,s=e.length;i<s;i++){u=e[i]=this.get(e[i]);if(!u)continue;delete this._byId[u.id],delete this._byId[u.cid],o=this.indexOf(u),this.models.splice(o,1),this.length--,t.silent||(t.index=o,u.trigger("remove",u,this,t)),this._removeReference(u,t)}return r?e[0]:e},set:function(e,t){t=n.defaults({},t,g),t.parse&&(e=this.parse(e,t));var r=!n.isArray(e);e=r?e?[e]:[]:n.clone(e);var i,s,o,u,a,f,l,c=t.at,h=this.model,p=this.comparator&&c==null&&t.sort!==!1,v=n.isString(this.comparator)?this.comparator:null,m=[],y=[],b={},w=t.add,E=t.merge,S=t.remove,x=!p&&w&&S?[]:!1;for(i=0,s=e.length;i<s;i++){a=e[i]||{},a instanceof d?o=u=a:o=a[h.prototype.idAttribute||"id"];if(f=this.get(o))S&&(b[f.cid]=!0),E&&(a=a===u?u.attributes:a,t.parse&&(a=f.parse(a,t)),f.set(a,t),p&&!l&&f.hasChanged(v)&&(l=!0)),e[i]=f;else if(w){u=e[i]=this._prepareModel(a,t);if(!u)continue;m.push(u),this._addReference(u,t)}u=f||u,x&&(u.isNew()||!b[u.id])&&x.push(u),b[u.id]=!0}if(S){for(i=0,s=this.length;i<s;++i)b[(u=this.models[i]).cid]||y.push(u);y.length&&this.remove(y,t)}if(m.length||x&&x.length){p&&(l=!0),this.length+=m.length;if(c!=null)for(i=0,s=m.length;i<s;i++)this.models.splice(c+i,0,m[i]);else{x&&(this.models.length=0);var T=x||m;for(i=0,s=T.length;i<s;i++)this.models.push(T[i])}}l&&this.sort({silent:!0});if(!t.silent){for(i=0,s=m.length;i<s;i++)(u=m[i]).trigger("add",u,this,t);(l||x&&x.length)&&this.trigger("sort",this,t)}return r?e[0]:e},reset:function(e,t){t||(t={});for(var r=0,i=this.models.length;r<i;r++)this._removeReference(this.models[r],t);return t.previousModels=this.models,this._reset(),e=this.add(e,n.extend({silent:!0},t)),t.silent||this.trigger("reset",this,t),e},push:function(e,t){return this.add(e,n.extend({at:this.length},t))},pop:function(e){var t=this.at(this.length-1);return this.remove(t,e),t},unshift:function(e,t){return this.add(e,n.extend({at:0},t))},shift:function(e){var t=this.at(0);return this.remove(t,e),t},slice:function(){return u.apply(this.models,arguments)},get:function(e){return e==null?void 0:this._byId[e]||this._byId[e.id]||this._byId[e.cid]},at:function(e){return this.models[e]},where:function(e,t){return n.isEmpty(e)?t?void 0:[]:this[t?"find":"filter"](function(t){for(var n in e)if(e[n]!==t.get(n))return!1;return!0})},findWhere:function(e){return this.where(e,!0)},sort:function(e){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");return e||(e={}),n.isString(this.comparator)||this.comparator.length===1?this.models=this.sortBy(this.comparator,this):this.models.sort(n.bind(this.comparator,this)),e.silent||this.trigger("sort",this,e),this},pluck:function(e){return n.invoke(this.models,"get",e)},fetch:function(e){e=e?n.clone(e):{},e.parse===void 0&&(e.parse=!0);var t=e.success,r=this;return e.success=function(n){var i=e.reset?"reset":"set";r[i](n,e),t&&t(r,n,e),r.trigger("sync",r,n,e)},I(this,e),this.sync("read",this,e)},create:function(e,t){t=t?n.clone(t):{};if(!(e=this._prepareModel(e,t)))return!1;t.wait||this.add(e,t);var r=this,i=t.success;return t.success=function(e,n){t.wait&&r.add(e,t),i&&i(e,n,t)},e.save(null,t),e},parse:function(e,t){return e},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(e,t){if(e instanceof d)return e;t=t?n.clone(t):{},t.collection=this;var r=new this.model(e,t);return r.validationError?(this.trigger("invalid",this,r.validationError,t),!1):r},_addReference:function(e,t){this._byId[e.cid]=e,e.id!=null&&(this._byId[e.id]=e),e.collection||(e.collection=this),e.on("all",this._onModelEvent,this)},_removeReference:function(e,t){this===e.collection&&delete e.collection,e.off("all",this._onModelEvent,this)},_onModelEvent:function(e,t,n,r){if((e==="add"||e==="remove")&&n!==this)return;e==="destroy"&&this.remove(t,r),t&&e==="change:"+t.idAttribute&&(delete this._byId[t.previous(t.idAttribute)],t.id!=null&&(this._byId[t.id]=t)),this.trigger.apply(this,arguments)}});var b=["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","difference","indexOf","shuffle","lastIndexOf","isEmpty","chain","sample"];n.each(b,function(e){m.prototype[e]=function(){var t=u.call(arguments);return t.unshift(this.models),n[e].apply(n,t)}});var w=["groupBy","countBy","sortBy","indexBy"];n.each(w,function(e){m.prototype[e]=function(t,r){var i=n.isFunction(t)?t:function(e){return e.get(t)};return n[e](this.models,i,r)}});var E=t.View=function(e){this.cid=n.uniqueId("view"),e||(e={}),n.extend(this,n.pick(e,x)),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()},S=/^(\S+)\s*(.*)$/,x=["model","collection","el","id","attributes","className","tagName","events"];n.extend(E.prototype,f,{tagName:"div",$:function(e){return this.$el.find(e)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this.stopListening(),this},setElement:function(e,n){return this.$el&&this.undelegateEvents(),this.$el=e instanceof t.$?e:t.$(e),this.el=this.$el[0],n!==!1&&this.delegateEvents(),this},delegateEvents:function(e){if(!e&&!(e=n.result(this,"events")))return this;this.undelegateEvents();for(var t in e){var r=e[t];n.isFunction(r)||(r=this[e[t]]);if(!r)continue;var i=t.match(S),s=i[1],o=i[2];r=n.bind(r,this),s+=".delegateEvents"+this.cid,o===""?this.$el.on(s,r):this.$el.on(s,o,r)}return this},undelegateEvents:function(){return this.$el.off(".delegateEvents"+this.cid),this},_ensureElement:function(){if(!this.el){var e=n.extend({},n.result(this,"attributes"));this.id&&(e.id=n.result(this,"id")),this.className&&(e["class"]=n.result(this,"className"));var r=t.$("<"+n.result(this,"tagName")+">").attr(e);this.setElement(r,!1)}else this.setElement(n.result(this,"el"),!1)}}),t.sync=function(e,r,i){var s=N[e];n.defaults(i||(i={}),{emulateHTTP:t.emulateHTTP,emulateJSON:t.emulateJSON});var o={type:s,dataType:"json"};i.url||(o.url=n.result(r,"url")||F()),i.data==null&&r&&(e==="create"||e==="update"||e==="patch")&&(o.contentType="application/json",o.data=JSON.stringify(i.attrs||r.toJSON(i))),i.emulateJSON&&(o.contentType="application/x-www-form-urlencoded",o.data=o.data?{model:o.data}:{});if(i.emulateHTTP&&(s==="PUT"||s==="DELETE"||s==="PATCH")){o.type="POST",i.emulateJSON&&(o.data._method=s);var u=i.beforeSend;i.beforeSend=function(e){e.setRequestHeader("X-HTTP-Method-Override",s);if(u)return u.apply(this,arguments)}}o.type!=="GET"&&!i.emulateJSON&&(o.processData=!1),o.type==="PATCH"&&T&&(o.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP")});var a=i.xhr=t.ajax(n.extend(o,i));return r.trigger("request",r,a,i),a};var T=typeof window!="undefined"&&!!window.ActiveXObject&&(!window.XMLHttpRequest||!(new XMLHttpRequest).dispatchEvent),N={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};t.ajax=function(){return t.$.ajax.apply(t.$,arguments)};var C=t.Router=function(e){e||(e={}),e.routes&&(this.routes=e.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},k=/\((.*?)\)/g,L=/(\(\?)?:\w+/g,A=/\*\w+/g,O=/[\-{}\[\]+?.,\\\^$|#\s]/g;n.extend(C.prototype,f,{initialize:function(){},route:function(e,r,i){n.isRegExp(e)||(e=this._routeToRegExp(e)),n.isFunction(r)&&(i=r,r=""),i||(i=this[r]);var s=this;return t.history.route(e,function(n){var o=s._extractParameters(e,n);s.execute(i,o),s.trigger.apply(s,["route:"+r].concat(o)),s.trigger("route",r,o),t.history.trigger("route",s,r,o)}),this},execute:function(e,t){e&&e.apply(this,t)},navigate:function(e,n){return t.history.navigate(e,n),this},_bindRoutes:function(){if(!this.routes)return;this.routes=n.result(this,"routes");var e,t=n.keys(this.routes);while((e=t.pop())!=null)this.route(e,this.routes[e])},_routeToRegExp:function(e){return e=e.replace(O,"\\$&").replace(k,"(?:$1)?").replace(L,function(e,t){return t?e:"([^/?]+)"}).replace(A,"([^?]*?)"),new RegExp("^"+e+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(e,t){var r=e.exec(t).slice(1);return n.map(r,function(e,t){return t===r.length-1?e||null:e?decodeURIComponent(e):null})}});var M=t.History=function(){this.handlers=[],n.bindAll(this,"checkUrl"),typeof window!="undefined"&&(this.location=window.location,this.history=window.history)},_=/^[#\/]|\s+$/g,D=/^\/+|\/+$/g,P=/msie [\w.]+/,H=/\/$/,B=/#.*$/;M.started=!1,n.extend(M.prototype,f,{interval:50,atRoot:function(){return this.location.pathname.replace(/[^\/]$/,"$&/")===this.root},getHash:function(e){var t=(e||this).location.href.match(/#(.*)$/);return t?t[1]:""},getFragment:function(e,t){if(e==null)if(this._hasPushState||!this._wantsHashChange||t){e=decodeURI(this.location.pathname+this.location.search);var n=this.root.replace(H,"");e.indexOf(n)||(e=e.slice(n.length))}else e=this.getHash();return e.replace(_,"")},start:function(e){if(M.started)throw new Error("Backbone.history has already been started");M.started=!0,this.options=n.extend({root:"/"},this.options,e),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);var r=this.getFragment(),i=document.documentMode,s=P.exec(navigator.userAgent.toLowerCase())&&(!i||i<=7);this.root=("/"+this.root+"/").replace(D,"/");if(s&&this._wantsHashChange){var o=t.$('<iframe src="javascript:0" tabindex="-1">');this.iframe=o.hide().appendTo("body")[0].contentWindow,this.navigate(r)}this._hasPushState?t.$(window).on("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!s?t.$(window).on("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=r;var u=this.location;if(this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot())return this.fragment=this.getFragment(null,!0),this.location.replace(this.root+"#"+this.fragment),!0;this._hasPushState&&this.atRoot()&&u.hash&&(this.fragment=this.getHash().replace(_,""),this.history.replaceState({},document.title,this.root+this.fragment))}if(!this.options.silent)return this.loadUrl()},stop:function(){t.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl),this._checkUrlInterval&&clearInterval(this._checkUrlInterval),M.started=!1},route:function(e,t){this.handlers.unshift({route:e,callback:t})},checkUrl:function(e){var t=this.getFragment();t===this.fragment&&this.iframe&&(t=this.getFragment(this.getHash(this.iframe)));if(t===this.fragment)return!1;this.iframe&&this.navigate(t),this.loadUrl()},loadUrl:function(e){return e=this.fragment=this.getFragment(e),n.any(this.handlers,function(t){if(t.route.test(e))return t.callback(e),!0})},navigate:function(e,t){if(!M.started)return!1;if(!t||t===!0)t={trigger:!!t};var n=this.root+(e=this.getFragment(e||""));e=e.replace(B,"");if(this.fragment===e)return;this.fragment=e,e===""&&n!=="/"&&(n=n.slice(0,-1));if(this._hasPushState)this.history[t.replace?"replaceState":"pushState"]({},document.title,n);else{if(!this._wantsHashChange)return this.location.assign(n);this._updateHash(this.location,e,t.replace),this.iframe&&e!==this.getFragment(this.getHash(this.iframe))&&(t.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,e,t.replace))}if(t.trigger)return this.loadUrl(e)},_updateHash:function(e,t,n){if(n){var r=e.href.replace(/(javascript:|#).*$/,"");e.replace(r+"#"+t)}else e.hash="#"+t}}),t.history=new M;var j=function(e,t){var r=this,i;e&&n.has(e,"constructor")?i=e.constructor:i=function(){return r.apply(this,arguments)},n.extend(i,r,t);var s=function(){this.constructor=i};return s.prototype=r.prototype,i.prototype=new s,e&&n.extend(i.prototype,e),i.__super__=r.prototype,i};d.extend=m.extend=C.extend=E.extend=M.extend=j;var F=function(){throw new Error('A "url" property or function must be specified')},I=function(e,t){var n=t.error;t.error=function(r){n&&n(e,r,t),e.trigger("error",e,r,t)}};return t}),define("mockup-docs-navigation",["react","backbone"],function(e,t){var n=e.DOM.ul,r=e.DOM.li,i=e.DOM.a,s=e.createClass({propTypes:{position:e.PropTypes.oneOf(["left","right"])},getDefaultProps:function(){return{position:"left"}},render:function(){var e=t.history.location.hash.substr(1).split("/")[0];return n({className:"nav navbar-nav navbar-"+this.props.position},_.filter(this.props.pages,function(e){return e.id!==this.props.defaultPage&&(e.position||"left")===this.props.position},this).map(function(t){return r({key:t.id,className:e===t.id?"active":""},i({href:"#"+t.id,alt:t.description},t.title))},this))}});return s}),function(){function t(t){this.tokens=[],this.tokens.links={},this.options=t||c.defaults,this.rules=e.normal,this.options.gfm&&(this.options.tables?this.rules=e.tables:this.rules=e.gfm)}function r(e,t){this.options=t||c.defaults,this.links=e,this.rules=n.normal,this.renderer=this.options.renderer||new i,this.renderer.options=this.options;if(!this.links)throw new Error("Tokens array requires a `links` property.");this.options.gfm?this.options.breaks?this.rules=n.breaks:this.rules=n.gfm:this.options.pedantic&&(this.rules=n.pedantic)}function i(e){this.options=e||{}}function s(e){this.tokens=[],this.token=null,this.options=e||c.defaults,this.options.renderer=this.options.renderer||new i,this.renderer=this.options.renderer,this.renderer.options=this.options}function o(e,t){return e.replace(t?/&/g:/&(?!#?\w+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}function u(e){return e.replace(/&([#\w]+);/g,function(e,t){return t=t.toLowerCase(),t==="colon"?":":t.charAt(0)==="#"?t.charAt(1)==="x"?String.fromCharCode(parseInt(t.substring(2),16)):String.fromCharCode(+t.substring(1)):""})}function a(e,t){return e=e.source,t=t||"",function n(r,i){return r?(i=i.source||i,i=i.replace(/(^|[^\[])\^/g,"$1"),e=e.replace(r,i),n):new RegExp(e,t)}}function f(){}function l(e){var t=1,n,r;for(;t<arguments.length;t++){n=arguments[t];for(r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}function c(e,n,r){if(r||typeof n=="function"){r||(r=n,n=null),n=l({},c.defaults,n||{});var i=n.highlight,u,a,f=0;try{u=t.lex(e,n)}catch(h){return r(h)}a=u.length;var p=function(){var e,t;try{e=s.parse(u,n)}catch(o){t=o}return n.highlight=i,t?r(t):r(null,e)};if(!i||i.length<3)return p();delete n.highlight;if(!a)return p();for(;f<u.length;f++)(function(e){return e.type!=="code"?--a||p():i(e.text,e.lang,function(t,n){if(n==null||n===e.text)return--a||p();e.text=n,e.escaped=!0,--a||p()})})(u[f]);return}try{return n&&(n=l({},c.defaults,n)),s.parse(t.lex(e,n),n)}catch(h){h.message+="\nPlease report this to https://github.com/chjj/marked.";if((n||c.defaults).silent)return"<p>An error occured:</p><pre>"+o(h.message+"",!0)+"</pre>";throw h}}var e={newline:/^\n+/,code:/^( {4}[^\n]+\n*)+/,fences:f,hr:/^( *[-*_]){3,} *(?:\n+|$)/,heading:/^ *(#{1,6}) *([^\n]+?) *#* *(?:\n+|$)/,nptable:f,lheading:/^([^\n]+)\n *(=|-){2,} *(?:\n+|$)/,blockquote:/^( *>[^\n]+(\n(?!def)[^\n]+)*\n*)+/,list:/^( *)(bull) [\s\S]+?(?:hr|def|\n{2,}(?! )(?!\1bull )\n*|\s*$)/,html:/^ *(?:comment|closed|closing) *(?:\n{2,}|\s*$)/,def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +["(]([^\n]+)[")])? *(?:\n+|$)/,table:f,paragraph:/^((?:[^\n]+\n?(?!hr|heading|lheading|blockquote|tag|def))+)\n*/,text:/^[^\n]+/};e.bullet=/(?:[*+-]|\d+\.)/,e.item=/^( *)(bull) [^\n]*(?:\n(?!\1bull )[^\n]*)*/,e.item=a(e.item,"gm")(/bull/g,e.bullet)(),e.list=a(e.list)(/bull/g,e.bullet)("hr","\\n+(?=\\1?(?:[-*_] *){3,}(?:\\n+|$))")("def","\\n+(?="+e.def.source+")")(),e.blockquote=a(e.blockquote)("def",e.def)(),e._tag="(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:/|[^\\w\\s@]*@)\\b",e.html=a(e.html)("comment",/<!--[\s\S]*?-->/)("closed",/<(tag)[\s\S]+?<\/\1>/)("closing",/<tag(?:"[^"]*"|'[^']*'|[^'">])*?>/)(/tag/g,e._tag)(),e.paragraph=a(e.paragraph)("hr",e.hr)("heading",e.heading)("lheading",e.lheading)("blockquote",e.blockquote)("tag","<"+e._tag)("def",e.def)(),e.normal=l({},e),e.gfm=l({},e.normal,{fences:/^ *(`{3,}|~{3,}) *(\S+)? *\n([\s\S]+?)\s*\1 *(?:\n+|$)/,paragraph:/^/}),e.gfm.paragraph=a(e.paragraph)("(?!","(?!"+e.gfm.fences.source.replace("\\1","\\2")+"|"+e.list.source.replace("\\1","\\3")+"|")(),e.tables=l({},e.gfm,{nptable:/^ *(\S.*\|.*)\n *([-:]+ *\|[-| :]*)\n((?:.*\|.*(?:\n|$))*)\n*/,table:/^ *\|(.+)\n *\|( *[-:]+[-| :]*)\n((?: *\|.*(?:\n|$))*)\n*/}),t.rules=e,t.lex=function(e,n){var r=new t(n);return r.lex(e)},t.prototype.lex=function(e){return e=e.replace(/\r\n|\r/g,"\n").replace(/\t/g,"    ").replace(/\u00a0/g," ").replace(/\u2424/g,"\n"),this.token(e,!0)},t.prototype.token=function(t,n,r){var t=t.replace(/^ +$/gm,""),i,s,o,u,a,f,l,c,h;while(t){if(o=this.rules.newline.exec(t))t=t.substring(o[0].length),o[0].length>1&&this.tokens.push({type:"space"});if(o=this.rules.code.exec(t)){t=t.substring(o[0].length),o=o[0].replace(/^ {4}/gm,""),this.tokens.push({type:"code",text:this.options.pedantic?o:o.replace(/\n+$/,"")});continue}if(o=this.rules.fences.exec(t)){t=t.substring(o[0].length),this.tokens.push({type:"code",lang:o[2],text:o[3]});continue}if(o=this.rules.heading.exec(t)){t=t.substring(o[0].length),this.tokens.push({type:"heading",depth:o[1].length,text:o[2]});continue}if(n&&(o=this.rules.nptable.exec(t))){t=t.substring(o[0].length),f={type:"table",header:o[1].replace(/^ *| *\| *$/g,"").split(/ *\| */),align:o[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:o[3].replace(/\n$/,"").split("\n")};for(c=0;c<f.align.length;c++)/^ *-+: *$/.test(f.align[c])?f.align[c]="right":/^ *:-+: *$/.test(f.align[c])?f.align[c]="center":/^ *:-+ *$/.test(f.align[c])?f.align[c]="left":f.align[c]=null;for(c=0;c<f.cells.length;c++)f.cells[c]=f.cells[c].split(/ *\| */);this.tokens.push(f);continue}if(o=this.rules.lheading.exec(t)){t=t.substring(o[0].length),this.tokens.push({type:"heading",depth:o[2]==="="?1:2,text:o[1]});continue}if(o=this.rules.hr.exec(t)){t=t.substring(o[0].length),this.tokens.push({type:"hr"});continue}if(o=this.rules.blockquote.exec(t)){t=t.substring(o[0].length),this.tokens.push({type:"blockquote_start"}),o=o[0].replace(/^ *> ?/gm,""),this.token(o,n,!0),this.tokens.push({type:"blockquote_end"});continue}if(o=this.rules.list.exec(t)){t=t.substring(o[0].length),u=o[2],this.tokens.push({type:"list_start",ordered:u.length>1}),o=o[0].match(this.rules.item),i=!1,h=o.length,c=0;for(;c<h;c++)f=o[c],l=f.length,f=f.replace(/^ *([*+-]|\d+\.) +/,""),~f.indexOf("\n ")&&(l-=f.length,f=this.options.pedantic?f.replace(/^ {1,4}/gm,""):f.replace(new RegExp("^ {1,"+l+"}","gm"),"")),this.options.smartLists&&c!==h-1&&(a=e.bullet.exec(o[c+1])[0],u!==a&&!(u.length>1&&a.length>1)&&(t=o.slice(c+1).join("\n")+t,c=h-1)),s=i||/\n\n(?!\s*$)/.test(f),c!==h-1&&(i=f.charAt(f.length-1)==="\n",s||(s=i)),this.tokens.push({type:s?"loose_item_start":"list_item_start"}),this.token(f,!1,r),this.tokens.push({type:"list_item_end"});this.tokens.push({type:"list_end"});continue}if(o=this.rules.html.exec(t)){t=t.substring(o[0].length),this.tokens.push({type:this.options.sanitize?"paragraph":"html",pre:o[1]==="pre"||o[1]==="script"||o[1]==="style",text:o[0]});continue}if(!r&&n&&(o=this.rules.def.exec(t))){t=t.substring(o[0].length),this.tokens.links[o[1].toLowerCase()]={href:o[2],title:o[3]};continue}if(n&&(o=this.rules.table.exec(t))){t=t.substring(o[0].length),f={type:"table",header:o[1].replace(/^ *| *\| *$/g,"").split(/ *\| */),align:o[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:o[3].replace(/(?: *\| *)?\n$/,"").split("\n")};for(c=0;c<f.align.length;c++)/^ *-+: *$/.test(f.align[c])?f.align[c]="right":/^ *:-+: *$/.test(f.align[c])?f.align[c]="center":/^ *:-+ *$/.test(f.align[c])?f.align[c]="left":f.align[c]=null;for(c=0;c<f.cells.length;c++)f.cells[c]=f.cells[c].replace(/^ *\| *| *\| *$/g,"").split(/ *\| */);this.tokens.push(f);continue}if(n&&(o=this.rules.paragraph.exec(t))){t=t.substring(o[0].length),this.tokens.push({type:"paragraph",text:o[1].charAt(o[1].length-1)==="\n"?o[1].slice(0,-1):o[1]});continue}if(o=this.rules.text.exec(t)){t=t.substring(o[0].length),this.tokens.push({type:"text",text:o[0]});continue}if(t)throw new Error("Infinite loop on byte: "+t.charCodeAt(0))}return this.tokens};var n={escape:/^\\([\\`*{}\[\]()#+\-.!_>])/,autolink:/^<([^ >]+(@|:\/)[^ >]+)>/,url:f,tag:/^<!--[\s\S]*?-->|^<\/?\w+(?:"[^"]*"|'[^']*'|[^'">])*?>/,link:/^!?\[(inside)\]\(href\)/,reflink:/^!?\[(inside)\]\s*\[([^\]]*)\]/,nolink:/^!?\[((?:\[[^\]]*\]|[^\[\]])*)\]/,strong:/^__([\s\S]+?)__(?!_)|^\*\*([\s\S]+?)\*\*(?!\*)/,em:/^\b_((?:__|[\s\S])+?)_\b|^\*((?:\*\*|[\s\S])+?)\*(?!\*)/,code:/^(`+)\s*([\s\S]*?[^`])\s*\1(?!`)/,br:/^ {2,}\n(?!\s*$)/,del:f,text:/^[\s\S]+?(?=[\\<!\[_*`]| {2,}\n|$)/};n._inside=/(?:\[[^\]]*\]|[^\[\]]|\](?=[^\[]*\]))*/,n._href=/\s*<?([\s\S]*?)>?(?:\s+['"]([\s\S]*?)['"])?\s*/,n.link=a(n.link)("inside",n._inside)("href",n._href)(),n.reflink=a(n.reflink)("inside",n._inside)(),n.normal=l({},n),n.pedantic=l({},n.normal,{strong:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,em:/^_(?=\S)([\s\S]*?\S)_(?!_)|^\*(?=\S)([\s\S]*?\S)\*(?!\*)/}),n.gfm=l({},n.normal,{escape:a(n.escape)("])","~|])")(),url:/^(https?:\/\/[^\s<]+[^<.,:;"')\]\s])/,del:/^~~(?=\S)([\s\S]*?\S)~~/,text:a(n.text)("]|","~]|")("|","|https?://|")()}),n.breaks=l({},n.gfm,{br:a(n.br)("{2,}","*")(),text:a(n.gfm.text)("{2,}","*")()}),r.rules=n,r.output=function(e,t,n){var i=new r(t,n);return i.output(e)},r.prototype.output=function(e){var t="",n,r,i,s;while(e){if(s=this.rules.escape.exec(e)){e=e.substring(s[0].length),t+=s[1];continue}if(s=this.rules.autolink.exec(e)){e=e.substring(s[0].length),s[2]==="@"?(r=s[1].charAt(6)===":"?this.mangle(s[1].substring(7)):this.mangle(s[1]),i=this.mangle("mailto:")+r):(r=o(s[1]),i=r),t+=this.renderer.link(i,null,r);continue}if(!this.inLink&&(s=this.rules.url.exec(e))){e=e.substring(s[0].length),r=o(s[1]),i=r,t+=this.renderer.link(i,null,r);continue}if(s=this.rules.tag.exec(e)){!this.inLink&&/^<a /i.test(s[0])?this.inLink=!0:this.inLink&&/^<\/a>/i.test(s[0])&&(this.inLink=!1),e=e.substring(s[0].length),t+=this.options.sanitize?o(s[0]):s[0];continue}if(s=this.rules.link.exec(e)){e=e.substring(s[0].length),this.inLink=!0,t+=this.outputLink(s,{href:s[2],title:s[3]}),this.inLink=!1;continue}if((s=this.rules.reflink.exec(e))||(s=this.rules.nolink.exec(e))){e=e.substring(s[0].length),n=(s[2]||s[1]).replace(/\s+/g," "),n=this.links[n.toLowerCase()];if(!n||!n.href){t+=s[0].charAt(0),e=s[0].substring(1)+e;continue}this.inLink=!0,t+=this.outputLink(s,n),this.inLink=!1;continue}if(s=this.rules.strong.exec(e)){e=e.substring(s[0].length),t+=this.renderer.strong(this.output(s[2]||s[1]));continue}if(s=this.rules.em.exec(e)){e=e.substring(s[0].length),t+=this.renderer.em(this.output(s[2]||s[1]));continue}if(s=this.rules.code.exec(e)){e=e.substring(s[0].length),t+=this.renderer.codespan(o(s[2],!0));continue}if(s=this.rules.br.exec(e)){e=e.substring(s[0].length),t+=this.renderer.br();continue}if(s=this.rules.del.exec(e)){e=e.substring(s[0].length),t+=this.renderer.del(this.output(s[1]));continue}if(s=this.rules.text.exec(e)){e=e.substring(s[0].length),t+=o(this.smartypants(s[0]));continue}if(e)throw new Error("Infinite loop on byte: "+e.charCodeAt(0))}return t},r.prototype.outputLink=function(e,t){var n=o(t.href),r=t.title?o(t.title):null;return e[0].charAt(0)!=="!"?this.renderer.link(n,r,this.output(e[1])):this.renderer.image(n,r,o(e[1]))},r.prototype.smartypants=function(e){return this.options.smartypants?e.replace(/--/g,"").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1").replace(/'/g,"").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1").replace(/"/g,"").replace(/\.{3}/g,""):e},r.prototype.mangle=function(e){var t="",n=e.length,r=0,i;for(;r<n;r++)i=e.charCodeAt(r),Math.random()>.5&&(i="x"+i.toString(16)),t+="&#"+i+";";return t},i.prototype.code=function(e,t,n){if(this.options.highlight){var r=this.options.highlight(e,t);r!=null&&r!==e&&(n=!0,e=r)}return t?'<pre><code class="'+this.options.langPrefix+o(t,!0)+'">'+(n?e:o(e,!0))+"\n</code></pre>\n":"<pre><code>"+(n?e:o(e,!0))+"\n</code></pre>"},i.prototype.blockquote=function(e){return"<blockquote>\n"+e+"</blockquote>\n"},i.prototype.html=function(e){return e},i.prototype.heading=function(e,t,n){return"<h"+t+' id="'+this.options.headerPrefix+n.toLowerCase().replace(/[^\w]+/g,"-")+'">'+e+"</h"+t+">\n"},i.prototype.hr=function(){return this.options.xhtml?"<hr/>\n":"<hr>\n"},i.prototype.list=function(e,t){var n=t?"ol":"ul";return"<"+n+">\n"+e+"</"+n+">\n"},i.prototype.listitem=function(e){return"<li>"+e+"</li>\n"},i.prototype.paragraph=function(e){return"<p>"+e+"</p>\n"},i.prototype.table=function(e,t){return"<table>\n<thead>\n"+e+"</thead>\n"+"<tbody>\n"+t+"</tbody>\n"+"</table>\n"},i.prototype.tablerow=function(e){return"<tr>\n"+e+"</tr>\n"},i.prototype.tablecell=function(e,t){var n=t.header?"th":"td",r=t.align?"<"+n+' style="text-align:'+t.align+'">':"<"+n+">";return r+e+"</"+n+">\n"},i.prototype.strong=function(e){return"<strong>"+e+"</strong>"},i.prototype.em=function(e){return"<em>"+e+"</em>"},i.prototype.codespan=function(e){return"<code>"+e+"</code>"},i.prototype.br=function(){return this.options.xhtml?"<br/>":"<br>"},i.prototype.del=function(e){return"<del>"+e+"</del>"},i.prototype.link=function(e,t,n){if(this.options.sanitize){try{var r=decodeURIComponent(u(e)).replace(/[^\w:]/g,"").toLowerCase()}catch(i){return""}if(r.indexOf("javascript:")===0)return""}var s='<a href="'+e+'"';return t&&(s+=' title="'+t+'"'),s+=">"+n+"</a>",s},i.prototype.image=function(e,t,n){var r='<img src="'+e+'" alt="'+n+'"';return t&&(r+=' title="'+t+'"'),r+=this.options.xhtml?"/>":">",r},s.parse=function(e,t,n){var r=new s(t,n);return r.parse(e)},s.prototype.parse=function(e){this.inline=new r(e.links,this.options,this.renderer),this.tokens=e.reverse();var t="";while(this.next())t+=this.tok();return t},s.prototype.next=function(){return this.token=this.tokens.pop()},s.prototype.peek=function(){return this.tokens[this.tokens.length-1]||0},s.prototype.parseText=function(){var e=this.token.text;while(this.peek().type==="text")e+="\n"+this.next().text;return this.inline.output(e)},s.prototype.tok=function(){switch(this.token.type){case"space":return"";case"hr":return this.renderer.hr();case"heading":return this.renderer.heading(this.inline.output(this.token.text),this.token.depth,this.token.text);case"code":return this.renderer.code(this.token.text,this.token.lang,this.token.escaped);case"table":var e="",t="",n,r,i,s,o;i="";for(n=0;n<this.token.header.length;n++)s={header:!0,align:this.token.align[n]},i+=this.renderer.tablecell(this.inline.output(this.token.header[n]),{header:!0,align:this.token.align[n]});e+=this.renderer.tablerow(i);for(n=0;n<this.token.cells.length;n++){r=this.token.cells[n],i="";for(o=0;o<r.length;o++)i+=this.renderer.tablecell(this.inline.output(r[o]),{header:!1,align:this.token.align[o]});t+=this.renderer.tablerow(i)}return this.renderer.table(e,t);case"blockquote_start":var t="";while(this.next().type!=="blockquote_end")t+=this.tok();return this.renderer.blockquote(t);case"list_start":var t="",u=this.token.ordered;while(this.next().type!=="list_end")t+=this.tok();return this.renderer.list(t,u);case"list_item_start":var t="";while(this.next().type!=="list_item_end")t+=this.token.type==="text"?this.parseText():this.tok();return this.renderer.listitem(t);case"loose_item_start":var t="";while(this.next().type!=="list_item_end")t+=this.tok();return this.renderer.listitem(t);case"html":var a=!this.token.pre&&!this.options.pedantic?this.inline.output(this.token.text):this.token.text;return this.renderer.html(a);case"paragraph":return this.renderer.paragraph(this.inline.output(this.token.text));case"text":return this.renderer.paragraph(this.parseText())}},f.exec=f,c.options=c.setOptions=function(e){return l(c.defaults,e),c},c.defaults={gfm:!0,tables:!0,breaks:!1,pedantic:!1,sanitize:!1,smartLists:!1,silent:!1,highlight:null,langPrefix:"lang-",smartypants:!1,headerPrefix:"",renderer:new i,xhtml:!1},c.Parser=s,c.parser=s.parse,c.Renderer=i,c.Lexer=t,c.lexer=t.lex,c.InlineLexer=r,c.inlineLexer=r.output,c.parse=c,typeof exports=="object"?module.exports=c:typeof define=="function"&&define.amd?define("marked",[],function(){return c}):this.marked=c}.call(function(){return this||(typeof window!="undefined"?window:global)}()),define("mockup-registry",["jquery"],function(e,t){var n={patterns:{},warn:function(e){window.DEBUG&&window.console&&console.warn(e)},getOptions:function(t,r,i){i=i||{},t.length!==0&&!e.nodeName(t[0],"body")&&(i=n.getOptions(t.parent(),r,i));var s={};if(t.length!==0){s=t.data("pat-"+r);if(s&&typeof s=="string"){var o={};e.each(s.split(";"),function(e,t){t=t.split(":"),t.reverse();var n=t.pop();n=n.replace(/^\s+|\s+$/g,""),t.reverse();var r=t.join(":");r=r.replace(/^\s+|\s+$/g,""),o[n]=r}),s=o}}return e.extend(!0,{},i,s)},init:function(e,r,i){var s=e.data("pattern-"+r);if(s===t&&n.patterns[r]){if(window.DEBUG)s=new n.patterns[r](e,n.getOptions(e,r,i));else try{s=new n.patterns[r](e,n.getOptions(e,r,i))}catch(o){n.warn('Failed while initializing "'+r+'" pattern.')}e.data("pattern-"+r,s)}return s},scan:function(t){var r=e(t),i=[];i=e.merge(i,r.filter('[class*="pat-"]')),i=e.merge(i,e('[class*="pat-"]',r)),e.each(i,function(t,r){r=e(r),e.each(r.attr("class").split(" "),function(e,t){t.indexOf("pat-")===0&&n.init(r,t.substr(4))})})},register:function(r){if(!r.prototype.name)return n.warn("Pattern didn't specified a name."),!1;r.prototype.jqueryPlugin===t&&(r.prototype.jqueryPlugin="pattern"+r.prototype.name.charAt(0).toUpperCase()+r.prototype.name.slice(1)),e.fn[r.prototype.jqueryPlugin]=function(i,s){return e(this).each(function(){typeof i=="object"&&(s=i,i=t);var o=e(this),u=n.init(o,r.prototype.name,s);if(i){if(u[i]===t)return n.warn('Method "'+i+'" does not exists.'),!1;if(i.charAt(0)==="_")return n.warn('Method "'+i+'" is private.'),!1;u[i].apply(u,[s])}}),this},n.patterns[r.prototype.name]=r}};return n}),define("mockup-docs-pattern",["marked","react","mockup-registry"],function(e,t,n){var r=t.DOM.div,i=t.DOM.a,s=t.DOM.h2,o=t.DOM.tr;th=t.DOM.th,td=t.DOM.td,tbody=t.DOM.tbody,thead=t.DOM.thead,table=t.DOM.table;var u=t.createClass({getDefaultProps:function(){return{id:"",url:""}},getInitialState:function(){return{pattern:undefined}},parsePattern:function(t){var n=/(.*)\((.*)\): (.*) \((.*)\)$/,r=/^Options:|^Documentation:|^License:|^Example:/,i,s,o,u={},a={};return t=t.substring(1,t.length-1),_.each(t.split("\n"),function(e,t){e=e.substring(e.indexOf("*")+2).replace("\r",""),r.exec(e)!==null?(o=r.exec(e)[0].toLowerCase(),o=o.substring(0,o.length-1),o==="example"&&(s=e.substring(8).trim())):o&&(o==="options"?(i=n.exec(e),i&&(a.options||(a.options={}),a.options[i[1].trim()]={type:i[2].trim(),description:i[3].trim(),defaultValue:i[4].trim()})):s&&o==="example"?(u[s]||(u[s]=""),u[s]+=e+"\n"):(a[o]||(a[o]=""),a[o]+=e+"\n"))}),_.each(a,function(t,n){if(typeof t=="string"){a[n]="";var r=t.split("\n"),i=r[0].length-r[0].replace(/^\s+/,"").length;_.each(t.split("\n"),function(e,t){a[n]+=e.substring(i)+"\n"}),a[n]=e(a[n]),_.each(u,function(e,t){e='<div class="mockup-pattern-example">'+e+"<p><pre>"+_.escape(e)+"</pre><p>"+"</div>",a[n]=a[n].replace("{{ "+t+" }}",e)})}}),a},componentWillMount:function(){var e=this;this.props.url&&require(["text!"+this.props.url,"mockup-patterns-"+this.props.id],function(t){t=/\/\*[\s\S]*?\*\//gm.exec(t)[0],e.setState({pattern:e.parsePattern(t)})})},componentDidUpdate:function(){n.scan(this.getDOMNode())},render:function(){if(!this.state.pattern)return r({className:"mockup-pattern"});var e=this.state.pattern.documentation,t=this.state.pattern.options,n=this.state.pattern.license;return r({className:"mockup-pattern"},[s({},"Documentation"),r({className:"mockup-pattern-documentation",dangerouslySetInnerHTML:{__html:e}}),s({},"Configuration"),r({className:"table-responsive mockup-pattern-configuration"},table({className:"table table-stripped table-condensed"},[thead({},o({},[th({},"Option"),th({},"Type"),th({},"Default"),th({},"Description")])),tbody({},Object.keys(t).map(function(e){return o({key:e},[td({},e),td({},t[e].type),td({},t[e].defaultValue),td({},t[e].description)])}))])),s({},"License"),r({className:"mockup-pattern-license",dangerouslySetInnerHTML:{__html:n}})])}});return u}),define("mockup-docs-page",["jquery","underscore","backbone","marked","react","mockup-docs-pattern"],function(e,t,n,r,i,s){var o=i.DOM.div,u=i.DOM.a,a=i.DOM.p,f=i.DOM.h1,l=i.DOM.h2,c=i.DOM.li,h=i.DOM.ul,p=i.createClass({getDefaultProps:function(){return{title:"",description:"",autotoc:!0,text:""}},componentDidUpdate:function(){var t=n.history.location.hash.substr(1).split("/");t.length>1&&e(window).scrollTop(e("#"+t[1]).offset().top-e(".mockup-header").outerHeight(!0))},render:function(){var t=this.props,i,p,d;typeof t.text=="string"&&t.text.trim().substr(0,1)!=="<"?i=r(t.text):i=t.text;if(t.autotoc){var v=[],m,g=e("<div>"+i+"</div>");g.find("h1,h2").each(function(t){m="mockup-autotoc_"+t,e(this).attr("id",m),e.nodeName(this,"h1")?v.push({id:m,title:e(this).text(),submenu:[]}):v[v.length-1].submenu.push({id:m,title:e(this).text()})}),p=o({className:"row"},[o({className:"col-md-3"},[o({className:"mockup-autotoc hidden-print",role:"complementary"},[h({className:"nav"},v.map(function(e){return c({key:t.id+"/"+e.id},[u({href:"#"+t.id+"/"+e.id},e.title),e.submenu?h({className:"nav"},e.submenu.map(function(e){return c({key:t.id+"/"+e.id},u({href:"#"+t.id+"/"+e.id},e.title))})):undefined])}))])]),o({className:"col-md-9",dangerouslySetInnerHTML:{__html:g.html()}})])}else t.patterns?(n.history.location.hash.substr(1).split("/").length>1&&(d=n.history.location.hash.substr(1).split("/")[1]),p=o({className:"row mockup-patterns"},t.patterns.map(function(e){return o({},[o({key:e.id,className:"col-xs-12 col-sm-4 col-md-3"},u({className:d===e.id?"mockup-pattern-tile active":"mockup-pattern-tile",href:"#"+t.id+"/"+e.id},[l({},e.title),a({},e.description)])),d===e.id?s(e):""])}))):typeof i=="string"&&(p=o({dangerouslySetInnerHTML:{__html:i}}));return o({className:"mockup-content",id:"content"},[o({className:"page-header"},o({className:"container"},[f({},t.title),a({},t.description)])),o({className:"container"},o({key:t.id,className:"page-content"},p))])}});return p}),+function(e){var t=function(n,r){this.$element=e(n),this.options=e.extend({},t.DEFAULTS,r),this.transitioning=null,this.options.parent&&(this.$parent=e(this.options.parent)),this.options.toggle&&this.toggle()};t.DEFAULTS={toggle:!0},t.prototype.dimension=function(){var e=this.$element.hasClass("width");return e?"width":"height"},t.prototype.show=function(){if(this.transitioning||this.$element.hasClass("in"))return;var t=e.Event("show.bs.collapse");this.$element.trigger(t);if(t.isDefaultPrevented())return;var n=this.$parent&&this.$parent.find("> .panel > .in");if(n&&n.length){var r=n.data("bs.collapse");if(r&&r.transitioning)return;n.collapse("hide"),r||n.data("bs.collapse",null)}var i=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[i](0),this.transitioning=1;var s=function(){this.$element.removeClass("collapsing").addClass("collapse in")[i]("auto"),this.transitioning=0,this.$element.trigger("shown.bs.collapse")};if(!e.support.transition)return s.call(this);var o=e.camelCase(["scroll",i].join("-"));this.$element.one(e.support.transition.end,e.proxy(s,this)).emulateTransitionEnd(350)[i](this.$element[0][o])},t.prototype.hide=function(){if(this.transitioning||!this.$element.hasClass("in"))return;var t=e.Event("hide.bs.collapse");this.$element.trigger(t);if(t.isDefaultPrevented())return;var n=this.dimension();this.$element[n](this.$element[n]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse").removeClass("in"),this.transitioning=1;var r=function(){this.transitioning=0,this.$element.trigger("hidden.bs.collapse").removeClass("collapsing").addClass("collapse")};if(!e.support.transition)return r.call(this);this.$element[n](0).one(e.support.transition.end,e.proxy(r,this)).emulateTransitionEnd(350)},t.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()};var n=e.fn.collapse;e.fn.collapse=function(n){return this.each(function(){var r=e(this),i=r.data("bs.collapse"),s=e.extend({},t.DEFAULTS,r.data(),typeof n=="object"&&n);!i&&s.toggle&&n=="show"&&(n=!n),i||r.data("bs.collapse",i=new t(this,s)),typeof n=="string"&&i[n]()})},e.fn.collapse.Constructor=t,e.fn.collapse.noConflict=function(){return e.fn.collapse=n,this},e(document).on("click.bs.collapse.data-api","[data-toggle=collapse]",function(t){var n=e(this),r,i=n.attr("data-target")||t.preventDefault()||(r=n.attr("href"))&&r.replace(/.*(?=#[^\s]+$)/,""),s=e(i),o=s.data("bs.collapse"),u=o?"toggle":n.data(),a=n.attr("data-parent"),f=a&&e(a);if(!o||!o.transitioning)f&&f.find('[data-toggle=collapse][data-parent="'+a+'"]').not(n).addClass("collapsed"),n[s.hasClass("in")?"addClass":"removeClass"]("collapsed");s.collapse(u)})}(jQuery),define("bootstrap-collapse",["jquery"],function(e){return function(){var t,n;return t||e.window.jQuery.fn.collapse.Constructor}}(this)),+function(e){function t(){var e=document.createElement("bootstrap"),t={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var n in t)if(e.style[n]!==undefined)return{end:t[n]};return!1}e.fn.emulateTransitionEnd=function(t){var n=!1,r=this;e(this).one(e.support.transition.end,function(){n=!0});var i=function(){n||e(r).trigger(e.support.transition.end)};return setTimeout(i,t),this},e(function(){e.support.transition=t()})}(jQuery),define("bootstrap-transition",["jquery"],function(e){return function(){var t,n;return t||e.window.jQuery.support.transition}}(this)),define("mockup-docs-view",["underscore","react","mockup-docs-navigation","mockup-docs-page","bootstrap-collapse","bootstrap-transition"],function(e,t,n,r){var i=t.DOM.div,s=t.DOM.a,o=t.DOM.p,u=t.DOM.li,a=t.DOM.ul,f=t.DOM.nav,l=t.DOM.span,c=t.DOM.button,h=t.DOM.iframe,p=t.DOM.header,d=t.DOM.footer,v=t.createClass({propTypes:{pages:t.PropTypes.array},getDefaultProps:function(){var e=this;return{defaultPage:"index",pages:[]}},getInitialState:function(){return{page:"index"}},render:function(){var t=this.state.page.split("/")[0],v=r(e.findWhere(this.props.pages,{id:t}));return i({className:"wrapper page-"+t},[s({href:"#content",className:"sr-only"},"Skip to main content"),p({className:"navbar navbar-inverse navbar-fixed-top mockup-header"},i({className:"header container"},[i({className:"navbar-header"},[c({type:"button",className:"navbar-toggle","data-toggle":"collapse","data-target":"#navigation"},[l({className:"sr-only"},"Toggle navigation"),l({className:"icon0bar"},""),l({className:"icon0bar"},""),l({className:"icon0bar"},"")]),s({className:"navbar-brand",href:"#"},"Mockup")]),f({className:"collapse navbar-collapse",id:"navigation"},[this.transferPropsTo(n()),this.transferPropsTo(n({position:"right"}))])])),v,d({className:"navbar navbar-inverse mockup-footer"},i({className:"container"},[i({className:"row"},[i({className:"col-xs-12 col-sm-6 mockup-credits"},[o({},["Build by ",s({href:"http://plone.org"},"Plone")," community."]),o({},["Code and documentation licensed under ",s({href:"http://www.opensource.org/licenses/mit-license.php"},"MIT"),"."])]),i({className:"col-xs-12 col-sm-6"},a({className:"mockup-links"},[u({},s({href:"https://github.com/plone/mockup/issues"},"Issues")),u({},s({href:"https://github.com/plone/mockup/releases"},"Releases"))]))]),i({className:"row"},i({className:"col-xs-12 mockup-github"},[h({src:"http://ghbtns.com/github-btn.html?user=plone&amp;repo=mockup&amp;type=watch&amp;count=true",className:"github-btn",width:"100",height:"20",title:"Star on GitHub"}),h({src:"http://ghbtns.com/github-btn.html?user=plone&amp;repo=mockup&amp;type=fork&amp;count=true",className:"github-btn",width:"102",height:"20",title:"Fork on GitHub"}),h({src:"http://ghbtns.com/github-btn.html?user=plone&amp;type=follow&amp;count=true",className:"github-btn",width:"130",height:"20",title:"Follow on GitHub"})]))]))])}});return v}),define("mockup-docs",["jquery","react","backbone","mockup-docs-view"],function(e,t,n,r){var i=n.Router.extend({routes:{"*id":"openPage"},initialize:function(e){this.options=e||{},this._view=new r({pages:this.options.pages,app:this}),t.renderComponent(this._view,document.body),n.history.start({pushState:!1})},openPage:function(e){e===null&&(e=this.options.defaultPage||"index"),this._view.setState({page:e})}});return i}),define("text",["module"],function(e){var t,n,r,i,s,o=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],u=/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,a=/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im,f=typeof location!="undefined"&&location.href,l=f&&location.protocol&&location.protocol.replace(/\:/,""),c=f&&location.hostname,h=f&&(location.port||undefined),p={},d=e.config&&e.config()||{};t={version:"2.0.10",strip:function(e){if(e){e=e.replace(u,"");var t=e.match(a);t&&(e=t[1])}else e="";return e},jsEscape:function(e){return e.replace(/(['\\])/g,"\\$1").replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r").replace(/[\u2028]/g,"\\u2028").replace(/[\u2029]/g,"\\u2029")},createXhr:d.createXhr||function(){var e,t,n;if(typeof XMLHttpRequest!="undefined")return new XMLHttpRequest;if(typeof ActiveXObject!="undefined")for(t=0;t<3;t+=1){n=o[t];try{e=new ActiveXObject(n)}catch(r){}if(e){o=[n];break}}return e},parseName:function(e){var t,n,r,i=!1,s=e.indexOf("."),o=e.indexOf("./")===0||e.indexOf("../")===0;return s!==-1&&(!o||s>1)?(t=e.substring(0,s),n=e.substring(s+1,e.length)):t=e,r=n||t,s=r.indexOf("!"),s!==-1&&(i=r.substring(s+1)==="strip",r=r.substring(0,s),n?n=r:t=r),{moduleName:t,ext:n,strip:i}},xdRegExp:/^((\w+)\:)?\/\/([^\/\\]+)/,useXhr:function(e,n,r,i){var s,o,u,a=t.xdRegExp.exec(e);return a?(s=a[2],o=a[3],o=o.split(":"),u=o[1],o=o[0],(!s||s===n)&&(!o||o.toLowerCase()===r.toLowerCase())&&(!u&&!o||u===i)):!0},finishLoad:function(e,n,r,i){r=n?t.strip(r):r,d.isBuild&&(p[e]=r),i(r)},load:function(e,n,r,i){if(i.isBuild&&!i.inlineText){r();return}d.isBuild=i.isBuild;var s=t.parseName(e),o=s.moduleName+(s.ext?"."+s.ext:""),u=n.toUrl(o),a=d.useXhr||t.useXhr;if(u.indexOf("empty:")===0){r();return}!f||a(u,l,c,h)?t.get(u,function(n){t.finishLoad(e,s.strip,n,r)},function(e){r.error&&r.error(e)}):n([o],function(e){t.finishLoad(s.moduleName+"."+s.ext,s.strip,e,r)})},write:function(e,n,r,i){if(p.hasOwnProperty(n)){var s=t.jsEscape(p[n]);r.asModule(e+"!"+n,"define(function () { return '"+s+"';});\n")}},writeFile:function(e,n,r,i,s){var o=t.parseName(n),u=o.ext?"."+o.ext:"",a=o.moduleName+u,f=r.toUrl(o.moduleName+u)+".js";t.load(a,r,function(n){var r=function(e){return i(f,e)};r.asModule=function(e,t){return i.asModule(e,f,t)},t.write(e,a,r,s)},s)}};if(d.env==="node"||!d.env&&typeof process!="undefined"&&process.versions&&!!process.versions.node&&!process.versions["node-webkit"])n=require.nodeRequire("fs"),t.get=function(e,t,r){try{var i=n.readFileSync(e,"utf8");i.indexOf("")===0&&(i=i.substring(1)),t(i)}catch(s){r(s)}};else if(d.env==="xhr"||!d.env&&t.createXhr())t.get=function(e,n,r,i){var s=t.createXhr(),o;s.open("GET",e,!0);if(i)for(o in i)i.hasOwnProperty(o)&&s.setRequestHeader(o.toLowerCase(),i[o]);d.onXhr&&d.onXhr(s,e),s.onreadystatechange=function(t){var i,o;s.readyState===4&&(i=s.status,i>399&&i<600?(o=new Error(e+" HTTP status: "+i),o.xhr=s,r(o)):n(s.responseText),d.onXhrComplete&&d.onXhrComplete(s,e))},s.send(null)};else if(d.env==="rhino"||!d.env&&typeof Packages!="undefined"&&typeof java!="undefined")t.get=function(e,t){var n,r,i="utf-8",s=new java.io.File(e),o=java.lang.System.getProperty("line.separator"),u=new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(s),i)),a="";try{n=new java.lang.StringBuffer,r=u.readLine(),r&&r.length()&&r.charAt(0)===65279&&(r=r.substring(1)),r!==null&&n.append(r);while((r=u.readLine())!==null)n.append(o),n.append(r);a=String(n.toString())}finally{u.close()}t(a)};else if(d.env==="xpconnect"||!d.env&&typeof Components!="undefined"&&Components.classes&&Components.interfaces)r=Components.classes,i=Components.interfaces,Components.utils["import"]("resource://gre/modules/FileUtils.jsm"),s="@mozilla.org/windows-registry-key;1"in r,t.get=function(e,t){var n,o,u,a={};s&&(e=e.replace(/\//g,"\\")),u=new FileUtils.File(e);try{n=r["@mozilla.org/network/file-input-stream;1"].createInstance(i.nsIFileInputStream),n.init(u,1,0,!1),o=r["@mozilla.org/intl/converter-input-stream;1"].createInstance(i.nsIConverterInputStream),o.init(n,"utf-8",n.available(),i.nsIConverterInputStream.DEFAULT_REPLACEMENT_CHARACTER),o.readString(n.available(),a),o.close(),n.close(),t(a.value)}catch(f){throw new Error((u&&u.path||"")+": "+f)}};return t}),define("text!docs-getting-started",[],function(){return'# Quick-start\n\nInstall Git.\n\nInstall Node (v0.10.20) / NPM.:\n\n    $ git clone git://github.com/plone/mockup.git\n    $ cd mockup\n    $ make bootstrap\n\nAnd your environment is ready to start working on testable, modular,\nJavaScript!\n\n# Slower-start\n\n## Step 1: Get the tools\n\nDownload and install the latest versions of [git](http://git-scm.org "git") and\n[Node/NPM](http://www.nodejs.org/ "node and npm").\n\nAlso make certain your system supports the `make` command.  Right now\ndevelopment of this project is being done primarily on Linux and OS X, so\nsetting up the tooling on MS Windows might be an adventure for you to\nexplore -- though, all of the tools used have equivalent versions for that\nplatform, so with a little effort, it should work!\n\n\n## Step 2: Checkout the Mockup project from GitHub\n\nThis will give you a starting point, and a lot of example code. It\'s used to\nbuild *bundles* which are then added to various Plone products.  You do\nnot need to develop code for the existing Plone products when you use the\nMockup project.:\n\n    git clone git://github.com/plone/mockup.git\n\n## Step 3: Bootstrap the environment\n\nRun the following commands::\n\n    cd mockup\n    make bootstrap\n\nThis will use Node/NPM to download and install all the requirements for\nbuilding and bundling, as well as all the external libraries needed to build\nthe patterns developed within the framework of the mockup project.\n\n## Step 4: Get hacking!\n\n### Mockup Project Structure\n\n * `build/` : All combined, optimized, and minimized JavaScript code, as well\n   as compiled less and media are copied and placed here\n\n * `docs/` : Documentation files built with `make docs`\n\n * `js/` : This directory contains all of the modularized JavaScript code\n\n    * `js/config.js` : This file contains the RequireJS configuration\n\n    * `js/bundles` : This is where a bundle is defined -- it is a set of\n      requirements and code that provide the features being packaged into\n      a Plone product\n\n    * `js/patterns` : This is a directory that contains all individual,\n      encapsulated patterns (i.e. widgets/JavaScript)\n\n * `less/` : This directory contains all the [less](http://lesscss.org/) code\n   for all the patterns and bundles\n\n * `lib/` : This directory contains external libraries not necessarily found in\n   the bower repositories\n\n * `tests/` : This directory contains all tests for patterns and bundles,\n   including general setup and configuration code\n\n * `Gruntfile.js` : This file contains the directives for compiling less, and\n   combining/optimizing/minimizing JavaScript for the defined bundles\n\n * `index.html` : This is the main source of documentation for the mockup\n   project.\n\n * `Makefile` :  This is the Makefile used to define what tasks should run when\n   you want to build a bundle, or bootstrap the environment\n\n### What\'s a Pattern? What Are Bundles? How do they relate?\n\n`Patterns` are units of JavaScript, defined by a RequireJS/AMD style module.\nPatterns may require other patterns to operate, and may require third party\nlibraries. Think of patterns as a module -- encapsulated and separate, and\nproviding a widget or tool to use by other patterns or in html.\n\n`Bundles` are defined similar to <em>Patterns</em> -- they are encapsulated\nbits of JavaScript that define requirements for a bundle, and have some extra\ncode in them that\'s useful for integrating the required patterns into Plone\nproducts.\n\nSo, the end result is that a front-end developer might spend their time\ncreating patterns, while a Plone developer might create a bundle and integrate\nit into a Plone product.\n\nFor more information how to create patterns please read [Hello\nworld](#hello-world) example.\n\n## Step 5: Bundling\n\nTo build bundles::\n\n    make bundle\n\n## Step 6: Testing\n\nYou can run tests with::\n\n    make test\n\nThis will start a continuous process that will rerun the tests when you change\nany of the js files.\n\nIf you want to run tests on once and then quick::\n\n    make test-once\n\nIf you have Chrome installed you can alternatively run your tests with::\n\n    make test-dev\n\nRunning tests in Chrome is useful when you want to debug them.\n\nIf you want to just run the tests for the pattern you are working on you can\nrun tests with::\n\n    make test pattern=foobar\n\nor:\n\n    make test-once pattern=foobar\n\nor:\n\n    make test-dev pattern=foobar\n\nThese will run only the tests that end with foobar-test.js\n'}),define("text!docs-tutorial",[],function(){return'# Introduction\n\nCAUTION: this is a work in progress. Things might change without advance notice\nand errors in the docs are possible. You have been warned. ;-)\n\nAssuming you successfully set up your development environment as described\nunder the [Getting Started](#getting-started) section, you are now ready to\nwrite your first pattern!\n\nUnless stated otherwise the <em>mockup</em> directory (the one that you\ncloned the repository into) will be our root working directory throughout this\ntutorial and all the paths and filenames are specified **relative** to it.\n\nThe mockup directory on your filesystem filesystem should look like the\nfollowing (NOTE: most of the files and folders have been omitted for brevity):\n\n<pre>\nmockup/\n  js/\n    bundles/\n      widgets.js\n    patterns/\n    ui/\n    config.js\n  less/\n  lib/\n  plone/\n    mockup/\n  tests/\n  bower.json\n  Gruntfile.js\n  package.json\n  &hellip;\n</pre>\n<strong>(XXX: test on a fresh instance if correct!)<br>\nXXX: needed at all? it just occupies a lot of space ...</strong>\n\n\n<h2>Creating a New Pattern</h2>\n<p>Our Hello World pattern will be very simple - all it will do is change the text\nof some HTML label to "Hello, World!". So let\'s get started!</p>\n\n<h3>Defining the Pattern</h3>\n\n<p> The first step is to go to the <em>js/patterns</em> subdirectory and create\na file called <em>hello.js</em> in it with the following contents:</p>\n\n<pre>\n<strong>define</strong>([\n    \'jquery\',\n    <strong>\'mockup-patterns-base\'</strong>\n], function ($, Base) {\n    \n\n    var HelloWorld = <strong>Base.extend</strong>({\n        name: \'helloworld\',\n        <strong>init</strong>: function () {\n            var $label = <strong>this.$el</strong>;\n            $label.text("Hello, world!");\n        }\n    });\n\n    <strong>return HelloWorld;</strong>\n});\n</pre>\n<strong>XXX: syntax highlighting?</strong>\n\n<p>\nThe file contains a call to the RequireJS\'s\n<a href="http://requirejs.org/docs/api.html#define">define()</a> function, which\n(unsurprisingly) defines a new JavaScript code module. We pass two parameters\nto it:</p>\n<ol>\n  <li>An array containing the names of module\'s dependencies. We state that we\n  depend on jQuery and the base Mockup pattern module.</li>\n  <li>A function which returns an object that defines our <em>Hello World</em>\n  module.</li>\n</ol>\n\n<p>When called this function is passed all the objects representing the module\'s\ndependencies (in the same order as defined in the dependency list). This allows us\nto use these dependencies in our module\'s code.</p>\n\n<p>The way to actually create a new module is to call the <strong>Base.extend()</strong>\nmethod and pass the module definition to it. The latter is just an object with\nsome properties, and as you can see the object describing our Hello World pattern is\nin fact very simple. It only contains a <var>name</var> property definining its name\nand an <strong>init()</strong> method. The latter does the actual work of changing\nthe label\'s text to <em>"Hello, world!"</em>.</p>\n\n<p>You might be wondering what the <code>this.$el</code> construct stands for. It is\njust a reference to the DOM element on which the pattern has been invoked. In this\ncontext <code>this</code> points to the pattern object itself, while its attribute\n<code>$el</code> is a jQuery object wrapping that DOM element (or sometimes a subtree\nof DOM elements).</p>\n\n\n<h3>Pattern Registration</h3>\n\n<p>In order to use the pattern we need to tell the bundling machinery where to find\nit and to start including it in the JavaScript bundles we create. So first open the\nfile <em>js/config.js</em> and add the following line under <em>paths</em>\ndefinitions (omit the trailing comma if adding to the end of the paths list):</p>\n<pre>\n\'mockup-patterns-helloworld\': \'js/patterns/hello\',\n</pre>\n\n<p>This tells the bundling/packaging machinery that a module called\n<em>mockup-patterns-helloworld</em> is defined in the file <em>hello.js</em> under the\n<em>js/patterns</em> subdirectory (relative to where config.js is located). Note that\nwe omit the file\'s .js suffix in the path definition.</p>\n\n<p>To tell the machinery to include our pattern in the bundles, open the\n<em>js/bundles/widgets.js</em> file and add the <em>mockup-patterns-helloworld</em>\nto the list of dependencies passed to the <em>define()</em> function.\n<br>\n<strong>XXX: this is probably widgets-specific and will change after refactoring.\nUpdate this section at that point.</strong>\n</p>\n\n<pre>\ndefine([\n  \'jquery\',\n  &hellip;\n  <strong>\'mockup-patterns-helloworld\',</strong>\n  &hellip;\n], &hellip;)\n</pre>\n\n<p>For the dependency we use the same name as already used in the pattern path\ndefinition.<br>\nAs we learned in the Defining a Pattern section above, we also have to add a\ncorresponding HelloWorld parameter to the function passed to the <em>define()</em>\nas the second argument. Make sure that parameter\'s relative position matches the\nrelative position of the <em>mockup-patterns-helloworld</em> in the dependency list.\n</p>\n\n<pre>\nfunction($, Registry, &hellip;, <strong>HelloWorld</strong>, &hellip;) {\n    &hellip;\n}\n</pre>\n\n<p>We now have everything ready to create a JavaScript bundle containing our\nHello World pattern. From the &lt;mockup&gt; directory run the following console\ncommand:</p>\n\n<pre>\n$ make bundle-widgets\n</pre>\n\n<p>This determines all the dependecies and bundles them up into a single\nfile called <em>build/widgets.min.js</em>. It also copies some additional\nresources (e.g. images and CSS files) to the same <em>build</em> directory.</p>\n\n\n<h3>Using the Pattern on a Page</h3>\n\n<p>Now that we have defined, configured and bundled our Hello World pattern, it\'s time\nto use it and see how it works. Inside the root "mockup" directory create a simple HTML\nfile called <em>hello.html</em> with the following contents:</p>\n\n<pre>\n&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n  &lt;head&gt;\n    &lt;meta charset="utf-8"&gt;\n    &lt;title&gt;Hello World Pattern&lt;/title&gt;\n    &lt;script type="text/javascript" src="bower_components/jquery/jquery.js"&gt;&lt;/script&gt;\n    &lt;script type="text/javascript" src="<strong>build/widgets.min.js</strong>"&gt;&lt;/script&gt;\n  &lt;/head&gt;\n\n  &lt;body&gt;\n    &lt;label class="<strong>pat-helloworld</strong>"&gt;(no greeting yet)&lt;/label&gt;\n  &lt;/body&gt;\n&lt;/html&gt;</pre>\n<strong>XXX: markup highlighting?</strong>\n\n<p>In the head we first include jQuery and <em>widgets.min.js</em> generated in the\nprevious step. The body of the document contains a label with some placeholder text.\nThe important thing here is its <strong>pat-helloworld</strong> CSS class. It tells\nthe <em>helloworld</em> pattern that it should perform its work on this particular\nDOM element. This, by the way, is the general way of triggering the patterns - you\nadd a CSS class pat-&lt;pattern-name&gt; to the desired elements and the pattern\n&lt;pattern-name&gt; will be executed on them.</p>\n\n<p>In case we want to apply more than one pattern to a single DOM element, we can\nsimply assign multiple <em>pat-*</em> CSS classes to it.</p>\n\n<p>To test the Hello World pattern open the <em>hello.html</em> file with your\nbrowser directly from the filesystem and you should see "Hello, world!" displayed.\nThis text is different from the original label text - our Hello World pattern\nautomatically changed it.</p>\n\n\n<h2>Adding Configuration Options to a Pattern</h2>\n\n<p>Patterns can provide various configuration options for customizing their\nappearance and/or behavior. Let\'s modify our Hello World pattern so that it will\nallow us to change the label\'s font color and its background color.</p>\n\n<p>We first need to update the pattern definition in <em>js/patterns/hello.js</em>:</p>\n\n<pre>\nvar HelloWorld = Base.extend({\n    name: \'helloworld\',\n    <strong>defaults: {\n        \'color\': \'black\',\n        \'bgcolor\': \'yellow\'\n    },</strong>\n    init: function () {\n        var $label = this.$el;\n        $label.text("Hello, world!");\n        <strong>$label.css({\n            \'color\': this.options.color,\n            \'background\': this.options.bgcolor\n        });</strong>\n    }\n});\n</pre>\n\n<p>We added a new attribute called <strong>defaults</strong> to the object\ndescribing the Hello World pattern. The value of this attribute is another object\ncontaining the <em>&lt;option-name&gt;: &lt;default-value&gt;</em> pairs, which\nshould be pretty self-explanatory.</p>\n\n<p>In the <em>init()</em> method we added a code which sets the label\'s font and\nbackground color as defined by the pattern configuration options. Option values can be\nread through the <em>this.options</em> object (with <em>this</em> pointing to the\nobject describing the pattern).</p>\n\n<p>NOTE: Since we have changed the pattern\'s code we need to run the\n<code>make bundle-widgets</code> command from the console again, so that the JavaScript\nbundle will contain the enhanced version of the Hello World pattern we just created.</p>\n\n<h3>The <em>data-pat-&lt;pattern-name&gt;</em> Attribute</h3>\n\n<p>To see the changes in action, we slightly modify the <em>hello.html</em> file. The\n&lt;body&gt; should now contain the following:</p>\n\n<pre>\n&lt;label class="pat-helloworld"\n    <strong>data-pat-helloworld="color:white; bgcolor:black"</strong>&gt;(no greeting yet)&lt;/label&gt;\n&lt;br&gt;\n&lt;label class="pat-helloworld"\n    <strong>data-pat-helloworld="color:green"</strong>&gt;(no greeting yet)&lt;/label&gt;\n</pre>\n\n<p>And the result of the change:</p>\n<span style="color:white; background:black; cursor:default">Hello, world!</span><br>\n<span style="color:green; background:yellow; cursor:default">Hello, world!</span><br><br>\n\n\n<p>We added another label and defined the <strong>data-pat-helloworld</strong>\nattribute on both. The <em>data-pat-&lt;pattern-name&gt;</em> attribute is used\nto pass configuration options to the pattern (<em>color</em> and <em>bgcolor</em>\nin our case). If some of the options are not provided, their corresponding default\nvalues are used (as defined by the pattern). This is why the second label gets\na yellow background even though we haven\'t explicitly specified it.</p>\n\n<p>If you wonder whether it is possible for a DOM element to have more than\none <em>data-pat-*</em> attribute defined, the answer is of course YES, because\nmultiple patterns can be applied to a single DOM element at the same time.</p>\n\n<h3>Options Format</h3>\n\n<p>There are two different ways to specify the option values in <em>data-pat-*</em>\nattributes, the key:value format and the JSON dictionary format.</p>\n\n<h4>Key : Value</h4>\n<p>This is the format we used in the example above. Each key represents the option\nwith the same name, while the corresponding value is, well, the option\'s value. The\nkey and the value are separated with a colon (:) and a semicolon (;) is used to\nseparate multiple <em>key:value</em> pairs.</p>\n\n<h4>JSON Dictionary</h4>\n<p>This format, too, uses the <em>key:value</em> pairs, but they are passed in\na JSON dictionary, like this: <code>data-pat-helloworld="{color:white, bgcolor:black}"</code></p>\n\n<p>Generally it doesn\'t really matter which of the two formats you use. In most\ncases it is simply a matter of personal preference. There is, however, one notable\nadvantage of the JSON format - the option values are not limited to just strings and\nnumbers, they can also be arbitrary JSON-compatible structures (even nested).\nSometimes when a pattern expects a complex configuration, JSON format is your\nonly choice.</p>\n\n<h3>Nesting the Options</h3>\n<p>Setting the same options for many different elements over and over again can be a\ntedious task. It also makes it more difficult to globally change such options later.\nLuckily the patterns provide a mechanism to avoid problems like these and that is\n<em>option nesting</em>. It works as follows - you can define a <em>data-pat-*</em>\nattribute on an element somewhere in the DOM hierarchy and all its descendants\n(at all levels) will <em>inherit the option values</em> listed there! This is\nquite a useful feature indeed.</p>\n\n<p>Suppose we modify the <em>&lt;body&gt;</em> tag in our <em>hello.html</em>\npage and add <em>data-pat-helloworld</em> attribute to it:</p>\n\n<pre>\n&lt;body <strong>data-pat-helloworld="bgcolor:orange"</strong>&gt;\n</pre>\n\n<p>Suddenly all the elements using the Hello World pattern will get an orange\nbackground by default, even though the true default background color as defined by\nthe pattern is yellow. Elements can override this behavior by explicitly providing\nther own value for the <em>bgcolor</em> option.</p>\n\n<p>If you now reload the <em>hello.html</em> file in your browser, you should see\nthe following:</p>\n<span style="color:white; background:black; cursor:default">Hello, world!</span><br>\n<span style="color:green; background:orange; cursor:default">Hello, world!</span><br><br>\n\n<p>The bottom of the two labels now indeed has an orange background, because that\'s\nthe option value that an element further up the hierarchy provides. On the other\nhand the background color of the upper label remains black, because that label\nprovides its own value for the <em>bgcolor</em> option, overriding the value set\nby the <em>&lt;body&gt;</em> tag. We can see that the option values defined at lower\nlevels have precedence over those defined higher up the DOM tree.</p>\n\n\n\n<h2>Writing Tests</h2>\n<p>It\'s true that our Hello World pattern is very simple and doesn\'t contain\nany obscure bugs, but with more complex patterns you can never be sure. And even\nif they work flawlessly at the moment, there\'s always a chance of introducing bugs\nwhen adding new features or refactoring the existing ones. This is where the tests\ncome in. They can automatically run the patterns in different usecase scenarios and\nmake sure they behave as expected.</p>\n\n<h3>Defining a Test Module</h3>\n\n<p>All tests are placed in the <em>tests</em> subdirectory and the names of the files\ncontaining them must match the <em>*-test.js</em> pattern. It is a good practice to\nname the files after the pattern they test. Since we want to test the Hello World\npattern, we create a file called <em>tests/pattern-helloworld-test.js</em> and put\nthe following code into it:</p>\n\n<pre>\ndefine([\n    <strong>\'chai\',</strong>\n    \'jquery\',\n    <strong>\'mockup-registry\',</strong>\n    <strong>\'mockup-patterns-helloworld\'</strong>\n], function (chai, $, registry, HelloWorld) {\n    \n\n    var expect = chai.expect,\n        <strong>mocha = window.mocha;</strong>\n\n    <strong>mocha.setup(\'bdd\');</strong>\n\n    <strong>$.fx.off = true;</strong>  //disable jQuery animations for various reasons\n\n    <strong>describe</strong>("HelloWorld", function () {\n        <strong>beforeEach</strong>(function () {\n            this.$el = $(\n                \'&lt;label class="pat-helloworld"&gt;(no greeting yet)&lt;/label&gt;\'\n            );\n        });\n\n        <strong>it</strong>(\'should change label text to "Hello, world!"\', function () {\n            expect(this.$el.text()).to.not.be.equal("Hello, world!");\n            <strong>registry.scan(this.$el);</strong>\n            expect(this.$el.text()).to.be.equal("Hello, world!");\n        });\n    });\n\n});</pre>\n<strong>XXX: we really need syntax highlighting and line numbers &hellip;</strong>\n\n<p>Test modules are defined in a similar way to patterns. We call the <em>define()</em>\nfunction, list the module dependencies and provide a function which contains the actual\ntest code. Let\'s first explain some of the dependencies:</p>\n\n<ul>\n  <li>\n  <strong>chai</strong> - <a href="http://chaijs.com/">Chai</a> is an assertion\n  library complementing the <a href="http://visionmedia.github.io/mocha/">Mocha</a>\n  test framework, which is what Plone Mockup project uses for tests. The Chai\n  library is quite flexible as it allows you to choose your preferred style for\n  making assertions in tests. In our example we use the so-called <em>BDD</em> style,\n  allowing for assertions such as <code>expect(result).to.be.above(0).and.not.equal(7)</code>.\n </li>\n\n  <li><strong>mockup-registry</strong> - the <em>registry</em> is a collection of tools\n  used for managing the patterns. It also keeps track of which patterns have\n  been registered, hence its name.<br>\n  In our example we use its <strong>scan()</strong> method, which scans the given\n  DOM (sub)tree and applies patterns to all DOM elements in the tree where\n  applicable.</li>\n\n  <li><strong>mockup-patterns-helloworld</strong> - the pattern under test must\n  always be listed among the test dependencies, even if we don\'t use it directly in\n  the test code (as is the case here with our example). The reason is that the\n  <em>registry.scan($element)</em> method will apply our pattern to the\n  <var>$element</var> only if the pattern is present in the test module\'s dependency\n  list.</li>\n</ul>\n\n\n\n<p>In the body of the test module we choose the aforementioned\n<a href="http://chaijs.com/api/bdd/">BDD style</a> for our assertion statements:\n<code>mocha.setup(\'bdd\')</code>. We also disable jQuery animations\n(<code>$.fx.off = true</code>) for a couple of good reasons:</p>\n\n<ul>\n  <li>Asynchronous animations on DOM elements might finish only after the test case\n  has already come to an end. If the latter expects that a pattern changes\n  some property of an element, but the change is delayed due to animation, an\n  assertion in the test might erroneously fail.</li>\n  <li>Speed - in most cases animations are just an eye candy for the users, and\n  as such, are not needed during the test runs. Disabling them can sometimes\n  considerably cut down the time needed to complete the tests.</li>\n</ul>\n\n<h4>The <em>describe()</em> Function</h4>\n\n<p>We define a group of test cases by using the\n<a href="http://visionmedia.github.io/mocha/#interfaces">describe()</a> function\nfound in the aforementioned Mocha test framework. The first parameter is the\nname for the test case group, which could be anything, really (and not necessarily\n<em>"HelloWorld"</em>). The second parameter is a function containing the actual test\ncase definitions and/or the definitions of the test case subgroups (yes, we can nest\nthe <em>describe()</em> function).</p>\n\n<p>In our example we only have a single test case and it is defined by a call to the\n<strong>it()</strong> function. We first provide a descriptive name for the test\ncase, which makes it very easy to see, what this test case expects from the\npattern under test (<em>\'It should change label text to "Hello, world!"\'</em>).\nThe second parameter is a function containing the actual test case code. It first\nverifies that the label does not yet have the expected text. Then it invokes\nthe <em>registry.scan()</em> method (to apply the pattern) and after that it checks\nagain to see, whether the pattern has indeed changed the text to\n<em>"Hello, world!"</em>.</p>\n\n<p>The last thing to mention is the <strong>beforeEach()</strong> function. The test\nframework calls this function before each test case is run, giving us the\nopportunity to perform some initialization and setup work in it. This way we don\'t\nhave to repeat the same common initializiation tasks separately in each test case,\nresulting in a more readable and maintainable code. In our concrete example, all\nthat we do in <em>beforeEach()</em> is create a jQuery object representing an HTML\nlabel, which later serves as a convenient test polygon for the Hello World pattern.</p>\n\n<p>Note that regarding the tests, we have only scratched the surface here. Describing\nall the options the test framework provides is beyond the scope of this tutorial.\nTo learn more about how to write tests, please consult Mocha\'s\n<a href="http://visionmedia.github.io/mocha/">documentation</a>.</p>\n\n\n<h3>Running the Tests</h3>\n\n<p>To run our test run the following console command from the <em>&lt;mockup&gt;</em>\ndirectory:</p>\n\n<pre>\n$ make test pattern=helloworld\n</pre>\n\n<p>Ignore DEBUG messages and examine the last line of output. It should be\nsimilar to the following:</p>\n\n<pre>PhantomJS 1.9.2 (Linux): Executed 1 of 1 SUCCESS (0.4 secs / 0.008 secs)</pre>\n\n<p>The test runner informed us that our test passed. Yay!</p>\n\n<p>If you want to run the test for all patterns, run the <code>make test</code>\ncommand with no parameters:</p>\n\n<pre>\n$ make test\n</pre>\n\n<p>You might have noticed that when tests complete, the <code>make test</code> command\ndoes not terminate. That\'s because it ran\n<a href="http://karma-runner.github.io/">Karma</a>, a powerful JavaScript test runner,\nbehind the scenes. Karma launched a process which now monitors our pattern and\npattern test files for changes.</p>\n\n<p>With Karma still running, try changing the <em>js/patterns/hello.js</em> file so\nthat the Hello World pattern changes the label text to something else than\n<em>"Hello, world!"</em>. Karma will detect the change and automatically re-run the\ntest(s) which will now, of course, fail. If you now change the\n<em>tests/pattern-helloworld-test.js</em> so that it will accept the new behavior of\nthe Hello World pattern, Karma will once more re-run the tests, which will now again\npass.</p>\n\n<p>Another nice thing about Karma is that you can connect to the test runner with\na browser, too. Visit <a href="http://localhost:9876">http://localhost:9876</a> and\nwatch what happens in the console window. Search for a line resembling the one\nbelow:</p>\n\n<pre>\n&hellip;\nINFO [Firefox 25.0.0 (Ubuntu)]: Connected on socket IH_Zu1A3ZL27f5IBYKnr\n&hellip;\n</pre>\n\n<p>When Karma detects that a browser has connected to it, it runs all the tests\n<em>in that particular browser</em>! Isn\'t that great? It allows you to quickly\ntest the behavior of a pattern in many different browsers. When you make a change,\nKarma will automatically run the tests for all the browsers currently connected to\nit.</p>\n\n<p>Oh, just more more thing - at this point some of you might be wondering, what\nbrowser Karma used the first time we ran the <code>make test</code> command, when we\nhad not yet connected to <em>localhost:9876</em> with any of the browsers?</p>\n\n<p>The answer is <a href="http://phantomjs.org/">PhantomJS</a>. It\'s a WebKit-based\n"browser" without user interface, but with a JavaScript API for communicating\nwith it.</p>\n\n\n\n<h2>Deployment</h2>\n\n<p>To wrap up everything, we just need to add a couple of words on deployment. When\nyou\'re done with development, you somehow need to share your code with other people\nwho might want to use it in their projects or in production environments.</p>\n\n<p>We have already mentioned the <code>make bundle-widgets</code> command. It\nbundles all the patterns and their dependencies into a single JavaScript file\n<em>widgets.min.js</em> located in the <em>build</em> subdirectory. After a\nsuccessful build all you have to do is copy this file to wherever you need it\nand link to it in your HTML pages  - just like we did in <em>hello.html</em>\nearlier.</p>\n\n<p>If you want to develop patterns in the context of a larger project, you\nhave an option to include them in development mode. This way you will not have to\nre-bundle them every time you make a change. To achieve that, add Plone Mockup\nproject as a dependency to your <a href="http://www.buildout.org">buildout</a>\nconfig file, something like below:\n\n<pre>\n[buildout]\nextensions = mr.developer\n&hellip;\nparts +=\n    mockup\n&hellip;\nauto-checkout +=\n    mockup\n&hellip;\neggs +=\n    mockup\n&hellip;\n[mockup]\nrecipe = collective.recipe.cmd\non_install = true\non_update = true\nnix_path=~/.nix-defexpr/channels/\ncmds =\n    cd ${buildout:sources-dir}/mockup\n    make bootstrap NIX_PATH=${:nix_path}\n&hellip;\n[sources]\nmockup = git https://github.com/plone/mockup\n</pre>\n\n\n<h2>Additional Resources</h2>\n  <li>\n    <ul>\n     <p>\n     <a href="http://www.youtube.com/watch?v=RqUn3n4HuMM"\n     target ="_blank">An introductory overview</a>\n     of Plone Mockup - about the project and its goals, setting up a development\n     environment, Patterns explained, testing JavaScript with Mocha library,\n     compiling and deploying widgets, etc. (recorded Hangout session from the\n     Pacific Rim Sprint, Sep 13, 2013)</p>\n\n     <p>Video length: 58:05</p>\n    </ul>\n  </li>\n\n'}),define("text!docs-contribute",[],function(){return"# Code conventions\n\nIt's still on the TODO list to write this down, but for now make sure you keep\njshint happy.\n\nTo run jshint on mockup code you have to type: ```make jshint```.\n\n\n# Git workflow / branching model\n\nIt is important that you *NEVER* commit to master directly. Even for the\nsmallest and most trivial fix. *ALWAYS* open a pull request and ask somebody\nelse to merge your code. *NEVER* merge it yourself.\n\nIf you don't get feedback on your pull request in a day please come to\n```#plone-framework``` and ping ```@garbas``` or ```@vangheem``` about it.\n\nThe main goal of this process is not to boss developers around and make their\nlives harder, but to bring greater stability to the development of mockup and to\nmake releases smooth and predictable.\n\n\n# Pull request checklist\n\nChecklist of things that every person accepting pull request should follow (or\nelse @garbas will make you drink a Mongolian cocktail - I promise!).\n\n - The title and description of a pull request *MUST* be descriptive and need to\n   reflect the changes in code. Please review, line by line, and comment if the\n   code change was not mentioned in the description of the pull request.\n\n - Copy the title of the pull request to the current ticket tracking changes for\n   release under development. (example:\n   https://github.com/plone/mockup/issues/250)\n\n - The full test suite (which runs the tests on saucelabs against real browsers)\n   will only be triggered for the master branch and the pull requests. It is\n   important that the tests pass before you merge it.\n\n   Please note that the Travis job sometimes hangs (for various reasons) and\n   then you need to restart it.\n\n   Due to some bugs in Travis regarding reporting of the status, be sure to\n   always check on https://travis-ci.org/plone/mockup/pull_requests that the\n   tests really have passed.\n\n - It is important to never lower code coverage. Check [coveralls](\n   https://coveralls.io/r/plone/mockup) to see that coverage hasn't dropped. It\n   should be reported automatically once the tests pass.\n   \n   Make sure that every new function (or bigger chunk of code) that is added to\n   mockup is tested.\n\n - All commits need to be rebased on current master and squashed into one single\n   commit. The commit's title (first line) and description (row 3 and below)\n   should be identical to the pull request.\n\n - Once you've ensured that all the above is correct, go ahead and merge the\n   pull request. Make sure you always use a polite tone and explain why this is\n   needed by linking to this document.\n\n\n# Changing this page\n\nWhen changing this document, note that it must be done in public with the\npossibility for others to comment or at least be aware of the changes.\n\nCreate a pull request with your proposed changes and describe the reasoning\nbehind the changes.\n\n"}),this.sinon=function(){var buster=function(e,t){var n=typeof require=="function"&&typeof module=="object",r=typeof document!="undefined"&&document.createElement("div"),i=function(){},s={bind:function(t,n){var r=typeof n=="string"?t[n]:n,i=Array.prototype.slice.call(arguments,2);return function(){var e=i.concat(Array.prototype.slice.call(arguments));return r.apply(t,e)}},partial:function(t){var n=[].slice.call(arguments,1);return function(){return t.apply(this,n.concat([].slice.call(arguments)))}},create:function(t){return i.prototype=t,new i},extend:function(t){if(!t)return;for(var n=1,r=arguments.length,i;n<r;++n)for(i in arguments[n])t[i]=arguments[n][i];return t},nextTick:function(n){if(typeof process!="undefined"&&process.nextTick)return process.nextTick(n);e(n,0)},functionName:function(t){if(!t)return"";if(t.displayName)return t.displayName;if(t.name)return t.name;var n=t.toString().match(/function\s+([^\(]+)/m);return n&&n[1]||""},isNode:function(t){if(!r)return!1;try{t.appendChild(r),t.removeChild(r)}catch(n){return!1}return!0},isElement:function(t){return t&&t.nodeType===1&&s.isNode(t)},isArray:function(t){return Object.prototype.toString.call(t)=="[object Array]"},flatten:function a(e){var t=[],e=e||[];for(var n=0,r=e.length;n<r;++n)t=t.concat(s.isArray(e[n])?a(e[n]):e[n]);return t},each:function(t,n){for(var r=0,i=t.length;r<i;++r)n(t[r])},map:function(t,n){var r=[];for(var i=0,s=t.length;i<s;++i)r.push(n(t[i]));return r},parallel:function(t,n){function r(e,t){typeof n=="function"&&(n(e,t),n=null)}function o(e){return function(n,o){if(n)return r(n);s[e]=o,--i==0&&r(null,s)}}if(t.length==0)return r(null,[]);var i=t.length,s=[];for(var u=0,a=t.length;u<a;++u)t[u](o(u))},series:function(t,n){function r(e,t){typeof n=="function"&&n(e,t)}function u(){if(i.length==0)return r(null,o);var e=i.shift()(a);e&&typeof e.then=="function"&&e.then(s.partial(a,null),a)}function a(e,t){if(e)return r(e);o.push(t),u()}var i=t.slice(),o=[];u()},countdown:function(t,n){return function(){--t==0&&n()}}};if(typeof process=="object"&&typeof require=="function"&&typeof module=="object"){var o=require("crypto"),u=require("path");s.tmpFile=function(e){var t=o.createHash("sha1");t.update(e);var n=t.digest("hex");return process.platform=="win32"?u.join(process.env.TEMP,n):u.join("/tmp",n)}}return Array.prototype.some?s.some=function(e,t,n){return e.some(t,n)}:s.some=function(e,t,n){if(e==null)throw new TypeError;e=Object(e);var r=e.length>>>0;if(typeof t!="function")throw new TypeError;for(var i=0;i<r;i++)if(e.hasOwnProperty(i)&&t.call(n,e[i],i,e))return!0;return!1},Array.prototype.filter?s.filter=function(e,t,n){return e.filter(t,n)}:s.filter=function(e,t){if(this==null)throw new TypeError;var n=Object(this),r=n.length>>>0;if(typeof e!="function")throw new TypeError;var i=[];for(var s=0;s<r;s++)if(s in n){var o=n[s];e.call(t,o,s,n)&&i.push(o)}return i},n&&(module.exports=s,s.eventEmitter=require("./buster-event-emitter"),Object.defineProperty(s,"defineVersionGetter",{get:function(){return require("./define-version-getter")}})),s.extend(t||{},s)}(setTimeout,buster);if(typeof buster=="undefined")var buster={};typeof module=="object"&&typeof require=="function"&&(buster=require("buster-core")),buster.format=buster.format||{},buster.format.excludeConstructors=["Object",/^.$/],buster.format.quoteStrings=!0,buster.format.ascii=function(){function n(t){var n=Object.keys&&Object.keys(t)||[];if(n.length==0)for(var r in t)e.call(t,r)&&n.push(r);return n.sort()}function r(e,t){if(typeof e!="object")return!1;for(var n=0,r=t.length;n<r;++n)if(t[n]===e)return!0;return!1}function i(e,n,s){if(typeof e=="string"){var o=typeof this.quoteStrings!="boolean"||this.quoteStrings;return n||o?'"'+e+'"':e}if(typeof e!="function"||e instanceof RegExp){n=n||[];if(r(e,n))return"[Circular]";if(Object.prototype.toString.call(e)=="[object Array]")return i.array.call(this,e,n);if(!e)return""+e;if(buster.isElement(e))return i.element(e);if(typeof e.toString=="function"&&e.toString!==Object.prototype.toString)return e.toString();for(var u=0,a=t.length;u<a;u++)if(e===t[u].obj)return t[u].value;return i.object.call(this,e,n,s)}return i.func(e)}var e=Object.prototype.hasOwnProperty,t=[];return typeof global!="undefined"&&t.push({obj:global,value:"[object global]"}),typeof document!="undefined"&&t.push({obj:document,value:"[object HTMLDocument]"}),typeof window!="undefined"&&t.push({obj:window,value:"[object Window]"}),i.func=function(e){return"function "+buster.functionName(e)+"() {}"},i.array=function(e,t){t=t||[],t.push(e);var n=[];for(var r=0,s=e.length;r<s;++r)n.push(i.call(this,e[r],t));return"["+n.join(", ")+"]"},i.object=function(e,t,s){t=t||[],t.push(e),s=s||0;var o=[],u=n(e),a,f,l,c="",h=3;for(var p=0,d=s;p<d;++p)c+=" ";for(p=0,d=u.length;p<d;++p)a=u[p],l=e[a],r(l,t)?f="[Circular]":f=i.call(this,l,t,s+2),f=(/\s/.test(a)?'"'+a+'"':a)+": "+f,h+=f.length,o.push(f);var v=i.constructorName.call(this,e),m=v?"["+v+"] ":"";return h+s>80?m+"{\n  "+c+o.join(",\n  "+c)+"\n"+c+"}":m+"{ "+o.join(", ")+" }"},i.element=function(e){var t=e.tagName.toLowerCase(),n=e.attributes,r,i=[],s;for(var o=0,u=n.length;o<u;++o){r=n.item(o),s=r.nodeName.toLowerCase().replace("html:","");if(s=="contenteditable"&&r.nodeValue=="inherit")continue;!r.nodeValue||i.push(s+'="'+r.nodeValue+'"')}var a="<"+t+(i.length>0?" ":""),f=e.innerHTML;f.length>20&&(f=f.substr(0,20)+"[...]");var l=a+i.join(" ")+">"+f+"</"+t+">";return l.replace(/ contentEditable="inherit"/,"")},i.constructorName=function(e){var t=buster.functionName(e&&e.constructor),n=this.excludeConstructors||buster.format.excludeConstructors||[];for(var r=0,i=n.length;r<i;++r){if(typeof n[r]=="string"&&n[r]==t)return"";if(n[r].test&&n[r].test(t))return""}return t},i}(),typeof module!="undefined"&&(module.exports=buster.format);var sinon=function(e){function r(e){var n=!1;try{e.appendChild(t),n=t.parentNode==e}catch(r){return!1}finally{try{e.removeChild(t)}catch(r){}}return n}function i(e){return t&&e&&e.nodeType===1&&r(e)}function s(e){return typeof e=="function"||!!(e&&e.constructor&&e.call&&e.apply)}function o(e,t){for(var r in t)n.call(e,r)||(e[r]=t[r])}function u(e){return typeof e=="function"&&typeof e.restore=="function"&&e.restore.sinon}var t=typeof document!="undefined"&&document.createElement("div"),n=Object.prototype.hasOwnProperty,a={wrapMethod:function(t,r,i){if(!t)throw new TypeError("Should wrap property of object");if(typeof i!="function")throw new TypeError("Method wrapper should be function");var u=t[r];if(!s(u))throw new TypeError("Attempted to wrap "+typeof u+" property "+r+" as function");if(u.restore&&u.restore.sinon)throw new TypeError("Attempted to wrap "+r+" which is already wrapped");if(u.calledBefore){var a=u.returns?"stubbed":"spied on";throw new TypeError("Attempted to wrap "+r+" which is already "+a)}var f=n.call(t,r);return t[r]=i,i.displayName=r,i.restore=function(){f||delete t[r],t[r]===i&&(t[r]=u)},i.restore.sinon=!0,o(i,u),i},extend:function(t){for(var n=1,r=arguments.length;n<r;n+=1)for(var i in arguments[n])arguments[n].hasOwnProperty(i)&&(t[i]=arguments[n][i]),arguments[n].hasOwnProperty("toString")&&arguments[n].toString!=t.toString&&(t.toString=arguments[n].toString);return t},create:function(t){var n=function(){};return n.prototype=t,new n},deepEqual:function p(e,t){if(a.match&&a.match.isMatcher(e))return e.test(t);if(typeof e!="object"||typeof t!="object")return e===t;if(i(e)||i(t))return e===t;if(e===t)return!0;if(e===null&&t!==null||e!==null&&t===null)return!1;var n=Object.prototype.toString.call(e);if(n!=Object.prototype.toString.call(t))return!1;if(n=="[object Array]"){if(e.length!==t.length)return!1;for(var r=0,s=e.length;r<s;r+=1)if(!p(e[r],t[r]))return!1;return!0}if(n=="[object Date]")return e.valueOf()===t.valueOf();var o,u=0,f=0;for(o in e){u+=1;if(!p(e[o],t[o]))return!1}for(o in t)f+=1;return u==f},functionName:function(t){var n=t.displayName||t.name;if(!n){var r=t.toString().match(/function ([^\s\(]+)/);n=r&&r[1]}return n},functionToString:function d(){if(this.getCall&&this.callCount){var e,t,n=this.callCount;while(n--){e=this.getCall(n).thisValue;for(t in e)if(e[t]===this)return t}}return this.displayName||"sinon fake"},getConfig:function(e){var t={};e=e||{};var n=a.defaultConfig;for(var r in n)n.hasOwnProperty(r)&&(t[r]=e.hasOwnProperty(r)?e[r]:n[r]);return t},format:function(e){return""+e},defaultConfig:{injectIntoThis:!0,injectInto:null,properties:["spy","stub","mock","clock","server","requests"],useFakeTimers:!0,useFakeServer:!0},timesInWords:function(t){return t==1&&"once"||t==2&&"twice"||t==3&&"thrice"||(t||0)+" times"},calledInOrder:function(e){for(var t=1,n=e.length;t<n;t++)if(!e[t-1].calledBefore(e[t])||!e[t].called)return!1;return!0},orderByFirstCall:function(e){return e.sort(function(e,t){var n=e.getCall(0),r=t.getCall(0),i=n&&n.callId||-1,s=r&&r.callId||-1;return i<s?-1:1})},log:function(){},logError:function(e,t){var n=e+" threw exception: ";a.log(n+"["+t.name+"] "+t.message),t.stack&&a.log(t.stack),setTimeout(function(){throw t.message=n+t.message,t},0)},typeOf:function(e){if(e===null)return"null";if(e===undefined)return"undefined";var t=Object.prototype.toString.call(e);return t.substring(8,t.length-1).toLowerCase()},createStubInstance:function(e){if(typeof e!="function")throw new TypeError("The constructor should be a function.");return a.stub(a.create(e.prototype))},restore:function(e){if(e!==null&&typeof e=="object")for(var t in e)u(e[t])&&e[t].restore();else u(e)&&e.restore()}},f=typeof module=="object"&&typeof require=="function";if(f){try{e={format:require("buster-format")}}catch(l){}module.exports=a,module.exports.spy=require("./sinon/spy"),module.exports.stub=require("./sinon/stub"),module.exports.mock=require("./sinon/mock"),module.exports.collection=require("./sinon/collection"),module.exports.assert=require("./sinon/assert"),module.exports.sandbox=require("./sinon/sandbox"),module.exports.test=require("./sinon/test"),module.exports.testCase=require("./sinon/test_case"),module.exports.assert=require("./sinon/assert"),module.exports.match=require("./sinon/match")}if(e){var c=a.create(e.format);c.quoteStrings=!1,a.format=function(){return c.ascii.apply(c,arguments)}}else if(f)try{var h=require("util");a.format=function(e){return typeof e=="object"&&e.toString===Object.prototype.toString?h.inspect(e):e}}catch(l){}return a}(typeof buster=="object"&&buster);(function(e){function n(t,n,r){var i=e.typeOf(t);if(i!==n)throw new TypeError("Expected type of "+r+" to be "+n+", but was "+i)}function i(e){return r.isPrototypeOf(e)}function s(t,n){if(n===null||n===undefined)return!1;for(var r in t)if(t.hasOwnProperty(r)){var i=t[r],u=n[r];if(o.isMatcher(i)){if(!i.test(u))return!1}else if(e.typeOf(i)==="object"){if(!s(i,u))return!1}else if(!e.deepEqual(i,u))return!1}return!0}function u(t,r){return function(i,s){n(i,"string","property");var u=arguments.length===1,a=r+'("'+i+'"';return u||(a+=", "+s),a+=")",o(function(n){return n===undefined||n===null||!t(n,i)?!1:u||e.deepEqual(s,n[i])},a)}}var t=typeof module=="object"&&typeof require=="function";!e&&t&&(e=require("../sinon"));if(!e)return;var r={toString:function(){return this.message}};r.or=function(t){if(!i(t))throw new TypeError("Matcher expected");var n=this,s=e.create(r);return s.test=function(e){return n.test(e)||t.test(e)},s.message=n.message+".or("+t.message+")",s},r.and=function(t){if(!i(t))throw new TypeError("Matcher expected");var n=this,s=e.create(r);return s.test=function(e){return n.test(e)&&t.test(e)},s.message=n.message+".and("+t.message+")",s};var o=function(t,n){var i=e.create(r),o=e.typeOf(t);switch(o){case"object":if(typeof t.test=="function")return i.test=function(e){return t.test(e)===!0},i.message="match("+e.functionName(t.test)+")",i;var u=[];for(var a in t)t.hasOwnProperty(a)&&u.push(a+": "+t[a]);i.test=function(e){return s(t,e)},i.message="match("+u.join(", ")+")";break;case"number":i.test=function(e){return t==e};break;case"string":i.test=function(e){return typeof e!="string"?!1:e.indexOf(t)!==-1},i.message='match("'+t+'")';break;case"regexp":i.test=function(e){return typeof e!="string"?!1:t.test(e)};break;case"function":i.test=t,n?i.message=n:i.message="match("+e.functionName(t)+")";break;default:i.test=function(n){return e.deepEqual(t,n)}}return i.message||(i.message="match("+t+")"),i};o.isMatcher=i,o.any=o(function(){return!0},"any"),o.defined=o(function(e){return e!==null&&e!==undefined},"defined"),o.truthy=o(function(e){return!!e},"truthy"),o.falsy=o(function(e){return!e},"falsy"),o.same=function(e){return o(function(t){return e===t},"same("+e+")")},o.typeOf=function(t){return n(t,"string","type"),o(function(n){return e.typeOf(n)===t},'typeOf("'+t+'")')},o.instanceOf=function(t){return n(t,"function","type"),o(function(e){return e instanceof t},"instanceOf("+e.functionName(t)+")")},o.has=u(function(e,t){return typeof e=="object"?t in e:e[t]!==undefined},"has"),o.hasOwn=u(function(e,t){return e.hasOwnProperty(t)},"hasOwn"),o.bool=o.typeOf("boolean"),o.number=o.typeOf("number"),o.string=o.typeOf("string"),o.object=o.typeOf("object"),o.func=o.typeOf("function"),o.array=o.typeOf("array"),o.regexp=o.typeOf("regexp"),o.date=o.typeOf("date"),t?module.exports=o:e.match=o})(typeof sinon=="object"&&sinon||null);var commonJSModule=typeof module=="object"&&typeof require=="function";if(!this.sinon&&commonJSModule)var sinon=require("../sinon");(function(e){function t(t,r,i){var s=e.functionName(t)+r;throw i.length&&(s+=" Received ["+n.call(i).join(", ")+"]"),new Error(s)}function i(t,n,i,s,o,u){if(typeof u!="number")throw new TypeError("Call id is not a number");var a=e.create(r);return a.proxy=t,a.thisValue=n,a.args=i,a.returnValue=s,a.exception=o,a.callId=u,a}var n=Array.prototype.slice,r={calledOn:function(n){return e.match&&e.match.isMatcher(n)?n.test(this.thisValue):this.thisValue===n},calledWith:function(){for(var n=0,r=arguments.length;n<r;n+=1)if(!e.deepEqual(arguments[n],this.args[n]))return!1;return!0},calledWithMatch:function(){for(var n=0,r=arguments.length;n<r;n+=1){var i=this.args[n],s=arguments[n];if(!e.match||!e.match(s).test(i))return!1}return!0},calledWithExactly:function(){return arguments.length==this.args.length&&this.calledWith.apply(this,arguments)},notCalledWith:function(){return!this.calledWith.apply(this,arguments)},notCalledWithMatch:function(){return!this.calledWithMatch.apply(this,arguments)},returned:function(n){return e.deepEqual(n,this.returnValue)},threw:function(t){return typeof t=="undefined"||!this.exception?!!this.exception:this.exception===t||this.exception.name===t},calledWithNew:function(t){return this.thisValue instanceof this.proxy},calledBefore:function(e){return this.callId<e.callId},calledAfter:function(e){return this.callId>e.callId},callArg:function(e){this.args[e]()},callArgOn:function(e,t){this.args[e].apply(t)},callArgWith:function(e){this.callArgOnWith.apply(this,[e,null].concat(n.call(arguments,1)))},callArgOnWith:function(e,t){var r=n.call(arguments,2);this.args[e].apply(t,r)},yield:function(){this.yieldOn.apply(this,[null].concat(n.call(arguments,0)))},yieldOn:function(e){var r=this.args;for(var i=0,s=r.length;i<s;++i)if(typeof r[i]=="function"){r[i].apply(e,n.call(arguments,1));return}t(this.proxy," cannot yield since no callback was passed.",r)},yieldTo:function(e){this.yieldToOn.apply(this,[e,null].concat(n.call(arguments,1)))},yieldToOn:function(e,r){var i=this.args;for(var s=0,o=i.length;s<o;++s)if(i[s]&&typeof i[s][e]=="function"){i[s][e].apply(r,n.call(arguments,2));return}t(this.proxy," cannot yield to '"+e+"' since no callback was passed.",i)},toString:function(){var t=this.proxy.toString()+"(",n=[];for(var r=0,i=this.args.length;r<i;++r)n.push(e.format(this.args[r]));return t=t+n.join(", ")+")",typeof this.returnValue!="undefined"&&(t+=" => "+e.format(this.returnValue)),this.exception&&(t+=" !"+this.exception.name,this.exception.message&&(t+="("+this.exception.message+")")),t}};r.invokeCallback=r.yield,i.toString=r.toString,e.spyCall=i})(typeof sinon=="object"&&sinon||null),function(sinon){function spy(e,t){if(!t&&typeof e=="function")return spy.create(e);if(!e&&!t)return spy.create(function(){});var n=e[t];return sinon.wrapMethod(e,t,spy.create(n))}function matchingFake(e,t,n){if(!e)return;var r=t.length;for(var i=0,s=e.length;i<s;i++)if(e[i].matches(t,n))return e[i]}function incrementCallCount(){this.called=!0,this.callCount+=1,this.notCalled=!1,this.calledOnce=this.callCount==1,this.calledTwice=this.callCount==2,this.calledThrice=this.callCount==3}function createCallProperties(){this.firstCall=this.getCall(0),this.secondCall=this.getCall(1),this.thirdCall=this.getCall(2),this.lastCall=this.getCall(this.callCount-1)}function createProxy(func){var p;return func.length?eval("p = (function proxy("+vars.substring(0,func.length*2-1)+") { return p.invoke(func, this, slice.call(arguments)); });"):p=function(){return p.invoke(func,this,slice.call(arguments))},p}function delegateToCalls(e,t,n,r){spyApi[e]=function(){if(!this.called)return r?r.apply(this,arguments):!1;var i,s=0;for(var o=0,u=this.callCount;o<u;o+=1){i=this.getCall(o);if(i[n||e].apply(i,arguments)){s+=1;if(t)return!0}}return s===this.callCount}}var commonJSModule=typeof module=="object"&&typeof require=="function",push=Array.prototype.push,slice=Array.prototype.slice,callId=0,vars="a,b,c,d,e,f,g,h,i,j,k,l",uuid=0,spyApi={reset:function(){this.called=!1,this.notCalled=!0,this.calledOnce=!1,this.calledTwice=!1,this.calledThrice=!1,this.callCount=0,this.firstCall=null,this.secondCall=null,this.thirdCall=null,this.lastCall=null,this.args=[],this.returnValues=[],this.thisValues=[],this.exceptions=[],this.callIds=[];if(this.fakes)for(var e=0;e<this.fakes.length;e++)this.fakes[e].reset()},create:function(t){var n;typeof t!="function"?t=function(){}:n=sinon.functionName(t);var r=createProxy(t);return sinon.extend(r,spy),delete r.create,sinon.extend(r,t),r.reset(),r.prototype=t.prototype,r.displayName=n||"spy",r.toString=sinon.functionToString,r._create=sinon.spy.create,r.id="spy#"+uuid++,r},invoke:function(t,n,r){var i=matchingFake(this.fakes,r),s,o;incrementCallCount.call(this),push.call(this.thisValues,n),push.call(this.args,r),push.call(this.callIds,callId++);try{i?o=i.invoke(t,n,r):o=(this.func||t).apply(n,r)}catch(u){throw push.call(this.returnValues,undefined),s=u,u}finally{push.call(this.exceptions,s)}return push.call(this.returnValues,o),createCallProperties.call(this),o},getCall:function(t){return t<0||t>=this.callCount?null:sinon.spyCall(this,this.thisValues[t],this.args[t],this.returnValues[t],this.exceptions[t],this.callIds[t])},calledBefore:function(t){return this.called?t.called?this.callIds[0]<t.callIds[t.callIds.length-1]:!0:!1},calledAfter:function(t){return!this.called||!t.called?!1:this.callIds[this.callCount-1]>t.callIds[t.callCount-1]},withArgs:function(){var e=slice.call(arguments);if(this.fakes){var t=matchingFake(this.fakes,e,!0);if(t)return t}else this.fakes=[];var n=this,r=this._create();r.matchingAguments=e,push.call(this.fakes,r),r.withArgs=function(){return n.withArgs.apply(n,arguments)};for(var i=0;i<this.args.length;i++)r.matches(this.args[i])&&(incrementCallCount.call(r),push.call(r.thisValues,this.thisValues[i]),push.call(r.args,this.args[i]),push.call(r.returnValues,this.returnValues[i]),push.call(r.exceptions,this.exceptions[i]),push.call(r.callIds,this.callIds[i]));return createCallProperties.call(r),r},matches:function(e,t){var n=this.matchingAguments;if(n.length<=e.length&&sinon.deepEqual(n,e.slice(0,n.length)))return!t||n.length==e.length},printf:function(e){var t=this,n=slice.call(arguments,1),r;return(e||"").replace(/%(.)/g,function(e,i){return r=spyApi.formatters[i],typeof r=="function"?r.call(null,t,n):isNaN(parseInt(i),10)?"%"+i:sinon.format(n[i-1])})}};delegateToCalls("calledOn",!0),delegateToCalls("alwaysCalledOn",!1,"calledOn"),delegateToCalls("calledWith",!0),delegateToCalls("calledWithMatch",!0),delegateToCalls("alwaysCalledWith",!1,"calledWith"),delegateToCalls("alwaysCalledWithMatch",!1,"calledWithMatch"),delegateToCalls("calledWithExactly",!0),delegateToCalls("alwaysCalledWithExactly",!1,"calledWithExactly"),delegateToCalls("neverCalledWith",!1,"notCalledWith",function(){return!0}),delegateToCalls("neverCalledWithMatch",!1,"notCalledWithMatch",function(){return!0}),delegateToCalls("threw",!0),delegateToCalls("alwaysThrew",!1,"threw"),delegateToCalls("returned",!0),delegateToCalls("alwaysReturned",!1,"returned"),delegateToCalls("calledWithNew",!0),delegateToCalls("alwaysCalledWithNew",!1,"calledWithNew"),delegateToCalls("callArg",!1,"callArgWith",function(){throw new Error(this.toString()+" cannot call arg since it was not yet invoked.")}),spyApi.callArgWith=spyApi.callArg,delegateToCalls("callArgOn",!1,"callArgOnWith",function(){throw new Error(this.toString()+" cannot call arg since it was not yet invoked.")}),spyApi.callArgOnWith=spyApi.callArgOn,delegateToCalls("yield",!1,"yield",function(){throw new Error(this.toString()+" cannot yield since it was not yet invoked.")}),spyApi.invokeCallback=spyApi.yield,delegateToCalls("yieldOn",!1,"yieldOn",function(){throw new Error(this.toString()+" cannot yield since it was not yet invoked.")}),delegateToCalls("yieldTo",!1,"yieldTo",function(e){throw new Error(this.toString()+" cannot yield to '"+e+"' since it was not yet invoked.")}),delegateToCalls("yieldToOn",!1,"yieldToOn",function(e){throw new Error(this.toString()+" cannot yield to '"+e+"' since it was not yet invoked.")}),spyApi.formatters={c:function(e){return sinon.timesInWords(e.callCount)},n:function(e){return e.toString()},C:function(e){var t=[];for(var n=0,r=e.callCount;n<r;++n){var i="    "+e.getCall(n).toString();/\n/.test(t[n-1])&&(i="\n"+i),push.call(t,i)}return t.length>0?"\n"+t.join("\n"):""},t:function(e){var t=[];for(var n=0,r=e.callCount;n<r;++n)push.call(t,sinon.format(e.thisValues[n]));return t.join(", ")},"*":function(e,t){var n=[];for(var r=0,i=t.length;r<i;++r)push.call(n,sinon.format(t[r]));return n.join(", ")}},sinon.extend(spy,spyApi),spy.spyCall=sinon.spyCall,commonJSModule?module.exports=spy:sinon.spy=spy}(typeof sinon=="object"&&sinon||null),function(e){function n(t,r,i){if(!i||typeof i=="function"){var s;i?s=e.spy&&e.spy.create?e.spy.create(i):i:s=n.create();if(!t&&!r)return e.stub.create();if(!r&&!!t&&typeof t=="object"){for(var o in t)typeof t[o]=="function"&&n(t,o);return t}return e.wrapMethod(t,r,s)}throw new TypeError("Custom stub should be function")}function r(e,t){var n=e.callCount-1,r=e[t],i=n in r?r[n]:r[r.length-1];return e[t+"Last"]=i,i}function i(e,t){var n=r(e,"callArgAts");if(n<0){var i=r(e,"callArgProps");for(var s=0,o=t.length;s<o;++s){if(!i&&typeof t[s]=="function")return t[s];if(i&&t[s]&&typeof t[s][i]=="function")return t[s][i]}return null}return t[n]}function o(t,n,r){if(t.callArgAtsLast<0){var i;return t.callArgPropsLast?i=e.functionName(t)+" expected to yield to '"+t.callArgPropsLast+"', but no object with such a property was passed.":i=e.functionName(t)+" expected to yield, but no callback was passed.",r.length>0&&(i+=" Received ["+s.call(r,", ")+"]"),i}return"argument at index "+t.callArgAtsLast+" is not a function: "+n}function a(e,t){if(e.callArgAts.length>0){var n=i(e,t);if(typeof n!="function")throw new TypeError(o(e,n,t));var s=r(e,"callbackArguments"),a=r(e,"callbackContexts");e.callbackAsync?u(function(){n.apply(a,s)}):n.apply(a,s)}}var t=typeof module=="object"&&typeof require=="function";!e&&t&&(e=require("../sinon"));if(!e)return;var s=Array.prototype.join,u=function(){return typeof process=="object"&&typeof process.nextTick=="function"?process.nextTick:typeof setImmediate=="function"?setImmediate:function(e){setTimeout(e,0)}}(),f=0;e.extend(n,function(){function i(e,t){return typeof e=="string"?(this.exception=new Error(t||""),this.exception.name=e):e?this.exception=e:this.exception=new Error("Error"),this}var t=Array.prototype.slice,r;r={create:function(){var r=function(){a(r,arguments);if(r.exception)throw r.exception;return typeof r.returnArgAt=="number"?arguments[r.returnArgAt]:r.returnThis?this:r.returnValue};r.id="stub#"+f++;var i=r;return r=e.spy.create(r),r.func=i,r.callArgAts=[],r.callbackArguments=[],r.callbackContexts=[],r.callArgProps=[],e.extend(r,n),r._create=e.stub.create,r.displayName="stub",r.toString=e.functionToString,r},resetBehavior:function(){var e;this.callArgAts=[],this.callbackArguments=[],this.callbackContexts=[],this.callArgProps=[],delete this.returnValue,delete this.returnArgAt,this.returnThis=!1;if(this.fakes)for(e=0;e<this.fakes.length;e++)this.fakes[e].resetBehavior()},returns:function(t){return this.returnValue=t,this},returnsArg:function(t){if(typeof t!="number")throw new TypeError("argument index is not number");return this.returnArgAt=t,this},returnsThis:function(){return this.returnThis=!0,this},"throws":i,throwsException:i,callsArg:function(t){if(typeof t!="number")throw new TypeError("argument index is not number");return this.callArgAts.push(t),this.callbackArguments.push([]),this.callbackContexts.push(undefined),this.callArgProps.push(undefined),this},callsArgOn:function(t,n){if(typeof t!="number")throw new TypeError("argument index is not number");if(typeof n!="object")throw new TypeError("argument context is not an object");return this.callArgAts.push(t),this.callbackArguments.push([]),this.callbackContexts.push(n),this.callArgProps.push(undefined),this},callsArgWith:function(n){if(typeof n!="number")throw new TypeError("argument index is not number");return this.callArgAts.push(n),this.callbackArguments.push(t.call(arguments,1)),this.callbackContexts.push(undefined),this.callArgProps.push(undefined),this},callsArgOnWith:function(n,r){if(typeof n!="number")throw new TypeError("argument index is not number");if(typeof r!="object")throw new TypeError("argument context is not an object");return this.callArgAts.push(n),this.callbackArguments.push(t.call(arguments,2)),this.callbackContexts.push(r),this.callArgProps.push(undefined),this},yields:function(){return this.callArgAts.push(-1),this.callbackArguments.push(t.call(arguments,0)),this.callbackContexts.push(undefined),this.callArgProps.push(undefined),this},yieldsOn:function(e){if(typeof e!="object")throw new TypeError("argument context is not an object");return this.callArgAts.push(-1),this.callbackArguments.push(t.call(arguments,1)),this.callbackContexts.push(e),this.callArgProps.push(undefined),this},yieldsTo:function(e){return this.callArgAts.push(-1),this.callbackArguments.push(t.call(arguments,1)),this.callbackContexts.push(undefined),this.callArgProps.push(e),this},yieldsToOn:function(e,n){if(typeof n!="object")throw new TypeError("argument context is not an object");return this.callArgAts.push(-1),this.callbackArguments.push(t.call(arguments,2)),this.callbackContexts.push(n),this.callArgProps.push(e),this}};for(var s in r)r.hasOwnProperty(s)&&s.match(/^(callsArg|yields|thenYields$)/)&&!s.match(/Async/)&&(r[s+"Async"]=function(e){return function(){return this.callbackAsync=!0,this[e].apply(this,arguments)}}(s));return r}()),t?module.exports=n:e.stub=n}(typeof sinon=="object"&&sinon||null),function(e){function r(t){return t?r.create(t):e.expectation.create("Anonymous mock")}var t=typeof module=="object"&&typeof require=="function",n=[].push;!e&&t&&(e=require("../sinon"));if(!e)return;e.mock=r,e.extend(r,function(){function t(e,t){if(!e)return;for(var n=0,r=e.length;n<r;n+=1)t(e[n])}return{create:function(n){if(!n)throw new TypeError("object is null");var i=e.extend({},r);return i.object=n,delete i.create,i},expects:function(r){if(!r)throw new TypeError("method is falsy");this.expectations||(this.expectations={},this.proxies=[]);if(!this.expectations[r]){this.expectations[r]=[];var i=this;e.wrapMethod(this.object,r,function(){return i.invokeMethod(r,this,arguments)}),n.call(this.proxies,r)}var s=e.expectation.create(r);return n.call(this.expectations[r],s),s},restore:function(){var n=this.object;t(this.proxies,function(e){typeof n[e].restore=="function"&&n[e].restore()})},verify:function(){var i=this.expectations||{},s=[],o=[];return t(this.proxies,function(e){t(i[e],function(e){e.met()?n.call(o,e.toString()):n.call(s,e.toString())})}),this.restore(),s.length>0?e.expectation.fail(s.concat(o).join("\n")):e.expectation.pass(s.concat(o).join("\n")),!0},invokeMethod:function(r,i,s){var o=this.expectations&&this.expectations[r],u=o&&o.length||0,a;for(a=0;a<u;a+=1)if(!o[a].met()&&o[a].allowsCall(i,s))return o[a].apply(i,s);var f=[],l,c=0;for(a=0;a<u;a+=1)o[a].allowsCall(i,s)?l=l||o[a]:c+=1,n.call(f,"    "+o[a].toString());if(c===0)return l.apply(i,s);f.unshift("Unexpected call: "+e.spyCall.toString.call({proxy:r,args:s})),e.expectation.fail(f.join("\n"))}}}());var i=e.timesInWords;e.expectation=function(){function s(e){return e==0?"never called":"called "+i(e)}function o(e){var t=e.minCalls,n=e.maxCalls;if(typeof t=="number"&&typeof n=="number"){var r=i(t);return t!=n&&(r="at least "+r+" and at most "+i(n)),r}return typeof t=="number"?"at least "+i(t):"at most "+i(n)}function u(e){var t=typeof e.minCalls=="number";return!t||e.callCount>=e.minCalls}function a(e){return typeof e.maxCalls!="number"?!1:e.callCount==e.maxCalls}var t=Array.prototype.slice,r=e.spy.invoke;return{minCalls:1,maxCalls:1,create:function(n){var r=e.extend(e.stub.create(),e.expectation);return delete r.create,r.method=n,r},invoke:function(t,n,i){return this.verifyCallAllowed(n,i),r.apply(this,arguments)},atLeast:function(t){if(typeof t!="number")throw new TypeError("'"+t+"' is not number");return this.limitsSet||(this.maxCalls=null,this.limitsSet=!0),this.minCalls=t,this},atMost:function(t){if(typeof t!="number")throw new TypeError("'"+t+"' is not number");return this.limitsSet||(this.minCalls=null,this.limitsSet=!0),this.maxCalls=t,this},never:function(){return this.exactly(0)},once:function(){return this.exactly(1)},twice:function(){return this.exactly(2)},thrice:function(){return this.exactly(3)},exactly:function(t){if(typeof t!="number")throw new TypeError("'"+t+"' is not a number");return this.atLeast(t),this.atMost(t)},met:function(){return!this.failed&&u(this)},verifyCallAllowed:function(n,r){a(this)&&(this.failed=!0,e.expectation.fail(this.method+" already called "+i(this.maxCalls))),"expectedThis"in this&&this.expectedThis!==n&&e.expectation.fail(this.method+" called with "+n+" as thisValue, expected "+this.expectedThis);if(!("expectedArguments"in this))return;r||e.expectation.fail(this.method+" received no arguments, expected "+e.format(this.expectedArguments)),r.length<this.expectedArguments.length&&e.expectation.fail(this.method+" received too few arguments ("+e.format(r)+"), expected "+e.format(this.expectedArguments)),this.expectsExactArgCount&&r.length!=this.expectedArguments.length&&e.expectation.fail(this.method+" received too many arguments ("+e.format(r)+"), expected "+e.format(this.expectedArguments));for(var s=0,o=this.expectedArguments.length;s<o;s+=1)e.deepEqual(this.expectedArguments[s],r[s])||e.expectation.fail(this.method+" received wrong arguments "+e.format(r)+", expected "+e.format(this.expectedArguments))},allowsCall:function(n,r){if(this.met()&&a(this))return!1;if("expectedThis"in this&&this.expectedThis!==n)return!1;if("expectedArguments"in this){r=r||[];if(r.length<this.expectedArguments.length)return!1;if(this.expectsExactArgCount&&r.length!=this.expectedArguments.length)return!1;for(var i=0,s=this.expectedArguments.length;i<s;i+=1)if(!e.deepEqual(this.expectedArguments[i],r[i]))return!1;return!0}return!0},withArgs:function(){return this.expectedArguments=t.call(arguments),this},withExactArgs:function(){return this.withArgs.apply(this,arguments),this.expectsExactArgCount=!0,this},on:function(t){return this.expectedThis=t,this},toString:function(){var t=(this.expectedArguments||[]).slice();this.expectsExactArgCount||n.call(t,"[...]");var r=e.spyCall.toString.call({proxy:this.method||"anonymous mock expectation",args:t}),i=r.replace(", [...","[, ...")+" "+o(this);return this.met()?"Expectation met: "+i:"Expected "+i+" ("+s(this.callCount)+")"},verify:function(){return this.met()?e.expectation.pass(this.toString()):e.expectation.fail(this.toString()),!0},pass:function(t){e.assert.pass(t)},fail:function(e){var t=new Error(e);throw t.name="ExpectationError",t}}}(),t?module.exports=r:e.mock=r}(typeof sinon=="object"&&sinon||null),function(e){function i(e){return e.fakes||(e.fakes=[]),e.fakes}function s(e,t){var n=i(e);for(var r=0,s=n.length;r<s;r+=1)typeof n[r][t]=="function"&&n[r][t]()}function o(e){var t=i(e),n=0;while(n<t.length)t.splice(n,1)}var t=typeof module=="object"&&typeof require=="function",n=[].push,r=Object.prototype.hasOwnProperty;!e&&t&&(e=require("../sinon"));if(!e)return;var u={verify:function(){s(this,"verify")},restore:function(){s(this,"restore"),o(this)},verifyAndRestore:function(){var t;try{this.verify()}catch(n){t=n}this.restore();if(t)throw t},add:function(t){return n.call(i(this),t),t},spy:function(){return this.add(e.spy.apply(e,arguments))},stub:function(n,i,s){if(i){var o=n[i];if(typeof o!="function"){if(!r.call(n,i))throw new TypeError("Cannot stub non-existent own property "+i);return n[i]=s,this.add({restore:function(){n[i]=o}})}}if(!i&&!!n&&typeof n=="object"){var u=e.stub.apply(e,arguments);for(var a in u)typeof u[a]=="function"&&this.add(u[a]);return u}return this.add(e.stub.apply(e,arguments))},mock:function(){return this.add(e.mock.apply(e,arguments))},inject:function(t){var n=this;return t.spy=function(){return n.spy.apply(n,arguments)},t.stub=function(){return n.stub.apply(n,arguments)},t.mock=function(){return n.mock.apply(n,arguments)},t}};t?module.exports=u:e.collection=u}(typeof sinon=="object"&&sinon||null);if(typeof sinon=="undefined")var sinon={};(function(global){function addTimer(e,t){if(e.length===0)throw new Error("Function requires at least 1 parameter");var n=id++,r=e[1]||0;return this.timeouts||(this.timeouts={}),this.timeouts[n]={id:n,func:e[0],callAt:this.now+r,invokeArgs:Array.prototype.slice.call(e,2)},t===!0&&(this.timeouts[n].interval=r),n}function parseTime(e){if(!e)return 0;var t=e.split(":"),n=t.length,r=n,i=0,s;if(n>3||!/^(\d\d:){0,2}\d\d?$/.test(e))throw new Error("tick only understands numbers and 'h:m:s'");while(r--){s=parseInt(t[r],10);if(s>=60)throw new Error("Invalid time "+e);i+=s*Math.pow(60,n-r-1)}return i*1e3}function createObject(e){var t;if(Object.create)t=Object.create(e);else{var n=function(){};n.prototype=e,t=new n}return t.Date.clock=t,t}function mirrorDateProperties(e,t){return t.now?e.now=function(){return e.clock.now}:delete e.now,t.toSource?e.toSource=function(){return t.toSource()}:delete e.toSource,e.toString=function n(){return t.toString()},e.prototype=t.prototype,e.parse=t.parse,e.UTC=t.UTC,e.prototype.toUTCString=t.prototype.toUTCString,e}function restore(){var e;for(var t=0,n=this.methods.length;t<n;t++)e=this.methods[t],global[e].hadOwnProperty?global[e]=this["_"+e]:delete global[e];this.methods=[]}function stubGlobal(e,t){t[e].hadOwnProperty=Object.prototype.hasOwnProperty.call(global,e),t["_"+e]=global[e];if(e=="Date"){var n=mirrorDateProperties(t[e],global[e]);global[e]=n}else{global[e]=function(){return t[e].apply(t,arguments)};for(var r in t[e])t[e].hasOwnProperty(r)&&(global[e][r]=t[e][r])}global[e].clock=t}var id=1;sinon.clock={now:0,create:function(t){var n=createObject(this);typeof t=="number"&&(n.now=t);if(!t||typeof t!="object")return n;throw new TypeError("now should be milliseconds since UNIX epoch")},setTimeout:function(t,n){return addTimer.call(this,arguments,!1)},clearTimeout:function(t){this.timeouts||(this.timeouts=[]),t in this.timeouts&&delete this.timeouts[t]},setInterval:function(t,n){return addTimer.call(this,arguments,!0)},clearInterval:function(t){this.clearTimeout(t)},tick:function(t){t=typeof t=="number"?t:parseTime(t);var n=this.now,r=this.now+t,i=this.now,s=this.firstTimerInRange(n,r),o;while(s&&n<=r){if(this.timeouts[s.id]){n=this.now=s.callAt;try{this.callTimer(s)}catch(u){o=o||u}}s=this.firstTimerInRange(i,r),i=n}this.now=r;if(o)throw o;return this.now},firstTimerInRange:function(e,t){var n,r,i;for(var s in this.timeouts)if(this.timeouts.hasOwnProperty(s)){if(this.timeouts[s].callAt<e||this.timeouts[s].callAt>t)continue;if(!r||this.timeouts[s].callAt<r)i=this.timeouts[s],r=this.timeouts[s].callAt,n={func:this.timeouts[s].func,callAt:this.timeouts[s].callAt,interval:this.timeouts[s].interval,id:this.timeouts[s].id,invokeArgs:this.timeouts[s].invokeArgs}}return n||null},callTimer:function(timer){typeof timer.interval=="number"?this.timeouts[timer.id].callAt+=timer.interval:delete this.timeouts[timer.id];try{typeof timer.func=="function"?timer.func.apply(null,timer.invokeArgs):eval(timer.func)}catch(e){var exception=e}if(!this.timeouts[timer.id]){if(exception)throw exception;return}if(exception)throw exception},reset:function(){this.timeouts={}},Date:function(){function t(n,r,i,s,o,u,a){switch(arguments.length){case 0:return new e(t.clock.now);case 1:return new e(n);case 2:return new e(n,r);case 3:return new e(n,r,i);case 4:return new e(n,r,i,s);case 5:return new e(n,r,i,s,o);case 6:return new e(n,r,i,s,o,u);default:return new e(n,r,i,s,o,u,a)}}var e=Date;return mirrorDateProperties(t,e)}()};var methods=["Date","setTimeout","setInterval","clearTimeout","clearInterval"];sinon.useFakeTimers=function(t){var n=sinon.clock.create(t);n.restore=restore,n.methods=Array.prototype.slice.call(arguments,typeof t=="number"?1:0),n.methods.length===0&&(n.methods=methods);for(var r=0,i=n.methods.length;r<i;r++)stubGlobal(n.methods[r],n);return n}})(typeof global!="undefined"&&typeof global!="function"?global:this),sinon.timers={setTimeout:setTimeout,clearTimeout:clearTimeout,setInterval:setInterval,clearInterval:clearInterval,Date:Date},typeof module=="object"&&typeof require=="function"&&(module.exports=sinon),typeof sinon=="undefined"&&(this.sinon={}),function(){var e=[].push;sinon.Event=function(t,n,r,i){this.initEvent(t,n,r,i)},sinon.Event.prototype={initEvent:function(e,t,n,r){this.type=e,this.bubbles=t,this.cancelable=n,this.target=r},stopPropagation:function(){},preventDefault:function(){this.defaultPrevented=!0}},sinon.EventTarget={addEventListener:function(n,r,i){this.eventListeners=this.eventListeners||{},this.eventListeners[n]=this.eventListeners[n]||[],e.call(this.eventListeners[n],r)},removeEventListener:function(t,n,r){var i=this.eventListeners&&this.eventListeners[t]||[];for(var s=0,o=i.length;s<o;++s)if(i[s]==n)return i.splice(s,1)},dispatchEvent:function(t){var n=t.type,r=this.eventListeners&&this.eventListeners[n]||[];for(var i=0;i<r.length;i++)typeof r[i]=="function"?r[i].call(this,t):r[i].handleEvent(t);return!!t.defaultPrevented}}}(),typeof sinon=="undefined"&&(this.sinon={}),sinon.xhr={XMLHttpRequest:this.XMLHttpRequest},function(e){function r(){function n(t){e.addEventListener(t,function(n){var r=e["on"+t];r&&typeof r=="function"&&r(n)})}this.readyState=r.UNSENT,this.requestHeaders={},this.requestBody=null,this.status=0,this.statusText="";var e=this,t=["loadstart","load","abort","loadend"];for(var i=t.length-1;i>=0;i--)n(t[i]);typeof r.onCreate=="function"&&r.onCreate(this)}function i(e){if(e.readyState!==r.OPENED)throw new Error("INVALID_STATE_ERR");if(e.sendFlag)throw new Error("INVALID_STATE_ERR")}function s(e,t){if(!e)return;for(var n=0,r=e.length;n<r;n+=1)t(e[n])}function o(e,t){for(var n=0;n<e.length;n++)if(t(e[n])===!0)return!0;return!1}function f(e){if(e.readyState==r.DONE)throw new Error("Request done")}function l(e){if(e.async&&e.readyState!=r.HEADERS_RECEIVED)throw new Error("No headers received")}function c(e){if(typeof e!="string"){var t=new Error("Attempted to respond to fake XMLHttpRequest with "+e+", which is not a string.");throw t.name="InvalidBodyException",t}}var t=sinon.xhr;t.GlobalXMLHttpRequest=e.XMLHttpRequest,t.GlobalActiveXObject=e.ActiveXObject,t.supportsActiveX=typeof t.GlobalActiveXObject!="undefined",t.supportsXHR=typeof t.GlobalXMLHttpRequest!="undefined",t.workingXHR=t.supportsXHR?t.GlobalXMLHttpRequest:t.supportsActiveX?function(){return new t.GlobalActiveXObject("MSXML2.XMLHTTP.3.0")}:!1;var n={"Accept-Charset":!0,"Accept-Encoding":!0,Connection:!0,"Content-Length":!0,Cookie:!0,Cookie2:!0,"Content-Transfer-Encoding":!0,Date:!0,Expect:!0,Host:!0,"Keep-Alive":!0,Referer:!0,TE:!0,Trailer:!0,"Transfer-Encoding":!0,Upgrade:!0,"User-Agent":!0,Via:!0},u=function(e,t,n){switch(n.length){case 0:return e[t]();case 1:return e[t](n[0]);case 2:return e[t](n[0],n[1]);case 3:return e[t](n[0],n[1],n[2]);case 4:return e[t](n[0],n[1],n[2],n[3]);case 5:return e[t](n[0],n[1],n[2],n[3],n[4])}};r.filters=[],r.addFilter=function(e){this.filters.push(e)};var a=/MSIE 6/;r.defake=function(e,t){var n=new sinon.xhr.workingXHR;s(["open","setRequestHeader","send","abort","getResponseHeader","getAllResponseHeaders","addEventListener","overrideMimeType","removeEventListener"],function(t){e[t]=function(){return u(n,t,arguments)}});var i=function(t){s(t,function(t){try{e[t]=n[t]}catch(r){if(!a.test(navigator.userAgent))throw r}})},o=function(){e.readyState=n.readyState,n.readyState>=r.HEADERS_RECEIVED&&i(["status","statusText"]),n.readyState>=r.LOADING&&i(["responseText"]),n.readyState===r.DONE&&i(["responseXML"]),e.onreadystatechange&&e.onreadystatechange.call(e)};if(n.addEventListener){for(var f in e.eventListeners)e.eventListeners.hasOwnProperty(f)&&s(e.eventListeners[f],function(e){n.addEventListener(f,e)});n.addEventListener("readystatechange",o)}else n.onreadystatechange=o;u(n,"open",t)},r.useFilters=!1,sinon.extend(r.prototype,sinon.EventTarget,{async:!0,open:function(t,n,i,s,u){this.method=t,this.url=n,this.async=typeof i=="boolean"?i:!0,this.username=s,this.password=u,this.responseText=null,this.responseXML=null,this.requestHeaders={},this.sendFlag=!1;if(sinon.FakeXMLHttpRequest.useFilters===!0){var a=arguments,f=o(r.filters,function(e){return e.apply(this,a)});if(f)return sinon.FakeXMLHttpRequest.defake(this,arguments)}this.readyStateChange(r.OPENED)},readyStateChange:function(t){this.readyState=t;if(typeof this.onreadystatechange=="function")try{this.onreadystatechange()}catch(n){sinon.logError("Fake XHR onreadystatechange handler",n)}this.dispatchEvent(new sinon.Event("readystatechange"));switch(this.readyState){case r.DONE:this.dispatchEvent(new sinon.Event("load",!1,!1,this)),this.dispatchEvent(new sinon.Event("loadend",!1,!1,this))}},setRequestHeader:function(t,r){i(this);if(n[t]||/^(Sec-|Proxy-)/.test(t))throw new Error('Refused to set unsafe header "'+t+'"');this.requestHeaders[t]?this.requestHeaders[t]+=","+r:this.requestHeaders[t]=r},setResponseHeaders:function(t){this.responseHeaders={};for(var n in t)t.hasOwnProperty(n)&&(this.responseHeaders[n]=t[n]);this.async?this.readyStateChange(r.HEADERS_RECEIVED):this.readyState=r.HEADERS_RECEIVED},send:function(t){i(this);if(!/^(get|head)$/i.test(this.method)){if(this.requestHeaders["Content-Type"]){var n=this.requestHeaders["Content-Type"].split(";");this.requestHeaders["Content-Type"]=n[0]+";charset=utf-8"}else this.requestHeaders["Content-Type"]="text/plain;charset=utf-8";this.requestBody=t}this.errorFlag=!1,this.sendFlag=this.async,this.readyStateChange(r.OPENED),typeof this.onSend=="function"&&this.onSend(this),this.dispatchEvent(new sinon.Event("loadstart",!1,!1,this))},abort:function(){this.aborted=!0,this.responseText=null,this.errorFlag=!0,this.requestHeaders={},this.readyState>sinon.FakeXMLHttpRequest.UNSENT&&this.sendFlag&&(this.readyStateChange(sinon.FakeXMLHttpRequest.DONE),this.sendFlag=!1),this.readyState=sinon.FakeXMLHttpRequest.UNSENT,this.dispatchEvent(new sinon.Event("abort",!1,!1,this)),typeof this.onerror=="function"&&this.onerror()},getResponseHeader:function(t){if(this.readyState<r.HEADERS_RECEIVED)return null;if(/^Set-Cookie2?$/i.test(t))return null;t=t.toLowerCase();for(var n in this.responseHeaders)if(n.toLowerCase()==t)return this.responseHeaders[n];return null},getAllResponseHeaders:function(){if(this.readyState<r.HEADERS_RECEIVED)return"";var t="";for(var n in this.responseHeaders)this.responseHeaders.hasOwnProperty(n)&&!/^Set-Cookie2?$/i.test(n)&&(t+=n+": "+this.responseHeaders[n]+"\r\n");return t},setResponseBody:function(t){f(this),l(this),c(t);var n=this.chunkSize||10,i=0;this.responseText="";do this.async&&this.readyStateChange(r.LOADING),this.responseText+=t.substring(i,i+n),i+=n;while(i<t.length);var s=this.getResponseHeader("Content-Type");if(this.responseText&&(!s||/(text\/xml)|(application\/xml)|(\+xml)/.test(s)))try{this.responseXML=r.parseXML(this.responseText)}catch(o){}this.async?this.readyStateChange(r.DONE):this.readyState=r.DONE},respond:function(t,n,i){this.setResponseHeaders(n||{}),this.status=typeof t=="number"?t:200,this.statusText=r.statusCodes[this.status],this.setResponseBody(i||""),typeof this.onload=="function"&&this.onload()}}),sinon.extend(r,{UNSENT:0,OPENED:1,HEADERS_RECEIVED:2,LOADING:3,DONE:4}),r.parseXML=function(t){var n;if(typeof DOMParser!="undefined"){var r=new DOMParser;n=r.parseFromString(t,"text/xml")}else n=new ActiveXObject("Microsoft.XMLDOM"),n.async="false",n.loadXML(t);return n},r.statusCodes={100:"Continue",101:"Switching Protocols",200:"OK",201:"Created",202:"Accepted",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",300:"Multiple Choice",301:"Moved Permanently",302:"Found",303:"See Other",304:"Not Modified",305:"Use Proxy",307:"Temporary Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Timeout",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Request Entity Too Large",414:"Request-URI Too Long",415:"Unsupported Media Type",416:"Requested Range Not Satisfiable",417:"Expectation Failed",422:"Unprocessable Entity",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Timeout",505:"HTTP Version Not Supported"},sinon.useFakeXMLHttpRequest=function(){return sinon.FakeXMLHttpRequest.restore=function(r){t.supportsXHR&&(e.XMLHttpRequest=t.GlobalXMLHttpRequest),t.supportsActiveX&&(e.ActiveXObject=t.GlobalActiveXObject),delete sinon.FakeXMLHttpRequest.restore,r!==!0&&delete sinon.FakeXMLHttpRequest.onCreate},t.supportsXHR&&(e.XMLHttpRequest=sinon.FakeXMLHttpRequest),t.supportsActiveX&&(e.ActiveXObject=function(n){return n=="Microsoft.XMLHTTP"||/^Msxml2\.XMLHTTP/i.test(n)?new sinon.FakeXMLHttpRequest:new t.GlobalActiveXObject(n)}),sinon.FakeXMLHttpRequest},sinon.FakeXMLHttpRequest=r}(this),typeof module=="object"&&typeof require=="function"&&(module.exports=sinon);if(typeof sinon=="undefined")var sinon={};sinon.fakeServer=function(){function t(){}function n(e){return t.prototype=e,new t}function r(e){var t=e;Object.prototype.toString.call(e)!="[object Array]"&&(t=[200,{},e]);if(typeof t[2]!="string")throw new TypeError("Fake server response body should be string, but was "+typeof t[2]);return t}function o(e,t,n){var r=e.method,i=!r||r.toLowerCase()==t.toLowerCase(),s=e.url,o=!s||s==n||typeof s.test=="function"&&s.test(n);return i&&o}function u(e,t){var n=this.getHTTPMethod(t),r=t.url;if(!/^https?:\/\//.test(r)||s.test(r))r=r.replace(s,"");if(o(e,this.getHTTPMethod(t),r)){if(typeof e.response=="function"){var i=e.url,u=[t].concat(i?r.match(i).slice(1):[]);return e.response.apply(e,u)}return!0}return!1}function a(e,t){var n;n="Request:\n"+sinon.format(t)+"\n\n",n+="Response:\n"+sinon.format(e)+"\n\n",sinon.log(n)}var e=[].push,i=typeof window!="undefined"?window.location:{},s=new RegExp("^"+i.protocol+"//"+i.host);return{create:function(){var e=n(this);return this.xhr=sinon.useFakeXMLHttpRequest(),e.requests=[],this.xhr.onCreate=function(t){e.addRequest(t)},e},addRequest:function(n){var r=this;e.call(this.requests,n),n.onSend=function(){r.handleRequest(this)},this.autoRespond&&!this.responding&&(setTimeout(function(){r.responding=!1,r.respond()},this.autoRespondAfter||10),this.responding=!0)},getHTTPMethod:function(t){if(this.fakeHTTPMethods&&/post/i.test(t.method)){var n=(t.requestBody||"").match(/_method=([^\b;]+)/);return n?n[1]:t.method}return t.method},handleRequest:function(n){n.async?(this.queue||(this.queue=[]),e.call(this.queue,n)):this.processRequest(n)},respondWith:function(n,i,s){if(arguments.length==1&&typeof n!="function"){this.response=r(n);return}this.responses||(this.responses=[]),arguments.length==1&&(s=n,i=n=null),arguments.length==2&&(s=i,i=n,n=null),e.call(this.responses,{method:n,url:i,response:typeof s=="function"?s:r(s)})},respond:function(){arguments.length>0&&this.respondWith.apply(this,arguments);var t=this.queue||[],n;while(n=t.shift())this.processRequest(n)},processRequest:function(t){try{if(t.aborted)return;var n=this.response||[404,{},""];if(this.responses)for(var r=0,i=this.responses.length;r<i;r++)if(u.call(this,this.responses[r],t)){n=this.responses[r].response;break}t.readyState!=4&&(a(n,t),t.respond(n[0],n[1],n[2]))}catch(s){sinon.logError("Fake server request processing",s)}},restore:function(){return this.xhr.restore&&this.xhr.restore.apply(this.xhr,arguments)}}}(),typeof module=="object"&&typeof require=="function"&&(module.exports=sinon),function(){function e(){}e.prototype=sinon.fakeServer,sinon.fakeServerWithClock=new e,sinon.fakeServerWithClock.addRequest=function(t){if(t.async){typeof setTimeout.clock=="object"?this.clock=setTimeout.clock:(this.clock=sinon.useFakeTimers(),this.resetClock=!0);if(!this.longestTimeout){var n=this.clock.setTimeout,r=this.clock.setInterval,i=this;this.clock.setTimeout=function(e,t){return i.longestTimeout=Math.max(t,i.longestTimeout||0),n.apply(this,arguments)},this.clock.setInterval=function(e,t){return i.longestTimeout=Math.max(t,i.longestTimeout||0),r.apply(this,arguments)}}}return sinon.fakeServer.addRequest.call(this,t)},sinon.fakeServerWithClock.respond=function(){var t=sinon.fakeServer.respond.apply(this,arguments);return this.clock&&(this.clock.tick(this.longestTimeout||0),this.longestTimeout=0,this.resetClock&&(this.clock.restore(),this.resetClock=!1)),t},sinon.fakeServerWithClock.restore=function(){return this.clock&&this.clock.restore(),sinon.fakeServer.restore.apply(this,arguments)}}();if(typeof module=="object"&&typeof require=="function"){var sinon=require("../sinon");sinon.extend(sinon,require("./util/fake_timers"))}return function(){function t(t,n,r,i){if(!i)return;n.injectInto?n.injectInto[r]=i:e.call(t.args,i)}function n(e){var t=sinon.create(sinon.sandbox);return e.useFakeServer&&(typeof e.useFakeServer=="object"&&(t.serverPrototype=e.useFakeServer),t.useFakeServer()),e.useFakeTimers&&(typeof e.useFakeTimers=="object"?t.useFakeTimers.apply(t,e.useFakeTimers):t.useFakeTimers()),t}var e=[].push;sinon.sandbox=sinon.extend(sinon.create(sinon.collection),{useFakeTimers:function(){return this.clock=sinon.useFakeTimers.apply(sinon,arguments),this.add(this.clock)},serverPrototype:sinon.fakeServer,useFakeServer:function(){var t=this.serverPrototype||sinon.fakeServer;return!t||!t.create?null:(this.server=t.create(),this.add(this.server))},inject:function(e){return sinon.collection.inject.call(this,e),this.clock&&(e.clock=this.clock),this.server&&(e.server=this.server,e.requests=this.server.requests),e},create:function(e){if(!e)return sinon.create(sinon.sandbox);var r=n(e);r.args=r.args||[];var i,s,o=r.inject({});if(e.properties)for(var u=0,a=e.properties.length;u<a;u++)i=e.properties[u],s=o[i]||i=="sandbox"&&r,t(r,e,i,s);else t(r,e,"sandbox",s);return r}}),sinon.sandbox.useFakeXMLHttpRequest=sinon.sandbox.useFakeServer,typeof module=="object"&&typeof require=="function"&&(module.exports=sinon.sandbox)}(),function(e){function n(t){var n=typeof t;if(n!="function")throw new TypeError("sinon.test needs to wrap a test function, got "+n);return function(){var n=e.getConfig(e.config);n.injectInto=n.injectIntoThis&&this||n.injectInto;var r=e.sandbox.create(n),i,s,o=Array.prototype.slice.call(arguments).concat(r.args);try{s=t.apply(this,o)}catch(u){i=u}if(typeof i!="undefined")throw r.restore(),i;return r.verifyAndRestore(),s}}var t=typeof module=="object"&&typeof require=="function";!e&&t&&(e=require("../sinon"));if(!e)return;n.config={injectIntoThis:!0,injectInto:null,properties:["spy","stub","mock","clock","server","requests"],useFakeTimers:!0,useFakeServer:!0},t?module.exports=n:e.test=n}(typeof sinon=="object"&&sinon||null),function(e){function n(e,t,n){return function(){t&&t.apply(this,arguments);var r,i;try{i=e.apply(this,arguments)}catch(s){r=s}n&&n.apply(this,arguments);if(r)throw r;return i}}function r(t,r){if(!t||typeof t!="object")throw new TypeError("sinon.testCase needs an object with test functions");r=r||"test";var i=new RegExp("^"+r),s={},o,u,a,f=t.setUp,l=t.tearDown;for(o in t)if(t.hasOwnProperty(o)){u=t[o];if(/^(setUp|tearDown)$/.test(o))continue;if(typeof u=="function"&&i.test(o)){a=u;if(f||l)a=n(u,f,l);s[o]=e.test(a)}else s[o]=t[o]}return s}var t=typeof module=="object"&&typeof require=="function";!e&&t&&(e=require("../sinon"));if(!e||!Object.prototype.hasOwnProperty)return;t?module.exports=r:e.testCase=r}(typeof sinon=="object"&&sinon||null),function(e,t){function s(){var e;for(var t=0,n=arguments.length;t<n;++t)e=arguments[t],e||i.fail("fake is not a spy"),typeof e!="function"&&i.fail(e+" is not a function"),typeof e.getCall!="function"&&i.fail(e+" is not stubbed")}function o(e,n){e=e||t;var r=e.fail||i.fail;r.call(e,n)}function u(e,t,n){arguments.length==2&&(n=t,t=e),i[e]=function(u){s(u);var a=r.call(arguments,1),f=!1;typeof t=="function"?f=!t(u):f=typeof u[t]=="function"?!u[t].apply(u,a):!u[t],f?o(this,u.printf.apply(u,[n].concat(a))):i.pass(e)}}function a(e,t){return!e||/^fail/.test(t)?t:e+t.slice(0,1).toUpperCase()+t.slice(1)}var n=typeof module=="object"&&typeof require=="function",r=Array.prototype.slice,i;!e&&n&&(e=require("../sinon"));if(!e)return;i={failException:"AssertError",fail:function(t){var n=new Error(t);throw n.name=this.failException||i.failException,n},pass:function(t){},callOrder:function(){s.apply(null,arguments);var n="",u="";if(!e.calledInOrder(arguments)){try{n=[].join.call(arguments,", ");var a=r.call(arguments),f=a.length;while(f)a[--f].called||a.splice(f,1);u=e.orderByFirstCall(a).join(", ")}catch(l){}o(this,"expected "+n+" to be "+"called in order but were called as "+u)}else i.pass("callOrder")},callCount:function(n,r){s(n);if(n.callCount!=r){var u="expected %n to be called "+e.timesInWords(r)+" but was called %c%C";o(this,n.printf(u))}else i.pass("callCount")},expose:function(t,n){if(!t)throw new TypeError("target is null or undefined");var r=n||{},i=typeof r.prefix=="undefined"&&"assert"||r.prefix,s=typeof r.includeFail=="undefined"||!!r.includeFail;for(var o in this)o!="export"&&(s||!/^(fail)/.test(o))&&(t[a(i,o)]=this[o]);return t}},u("called","expected %n to have been called at least once but was never called"),u("notCalled",function(e){return!e.called},"expected %n to not have been called but was called %c%C"),u("calledOnce","expected %n to be called once but was called %c%C"),u("calledTwice","expected %n to be called twice but was called %c%C"),u("calledThrice","expected %n to be called thrice but was called %c%C"),u("calledOn","expected %n to be called with %1 as this but was called with %t"),u("alwaysCalledOn","expected %n to always be called with %1 as this but was called with %t"),u("calledWithNew","expected %n to be called with new"),u("alwaysCalledWithNew","expected %n to always be called with new"),u("calledWith","expected %n to be called with arguments %*%C"),u("calledWithMatch","expected %n to be called with match %*%C"),u("alwaysCalledWith","expected %n to always be called with arguments %*%C"),u("alwaysCalledWithMatch","expected %n to always be called with match %*%C"),u("calledWithExactly","expected %n to be called with exact arguments %*%C"),u("alwaysCalledWithExactly","expected %n to always be called with exact arguments %*%C"),u("neverCalledWith","expected %n to never be called with arguments %*%C"),u("neverCalledWithMatch","expected %n to never be called with match %*%C"),u("threw","%n did not throw exception%C"),u("alwaysThrew","%n did not always throw exception%C"),n?module.exports=i:e.assert=i}(typeof sinon=="object"&&sinon||null,typeof window!="undefined"?window:typeof self!="undefined"?self:global),sinon}.call(typeof window!="undefined"&&window||{}),define("sinon",function(e){return function(){var t,n;return t||e.window.sinon}}(this)),define("mockup-fakeserver",["sinon","jquery","underscore"],function(e,t,n){function r(e,t){var n=e.split("?")[1];if(n===undefined)return null;var r=n.split("&");for(var i=0;i<r.length;i+=1){var s=r[i].split("=");if(decodeURIComponent(s[0])===t)return decodeURIComponent(s[1])}return null}function l(e){e||(e=30);var t="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";for(var r=0;r<e;r+=1)t+=n.charAt(Math.floor(Math.random()*n.length));return t}var i=e.fakeServer.create();i.xhr.useFilters=!0;var s=[];i.xhr.addFilter(function(e,t){return t.indexOf("tests/json/")!==-1||t.indexOf("ace/lib")!==-1||t.indexOf(".xml")!==-1||/.*\.js$/i.test(t)}),i.autoRespond=!0,i.autoRespondAfter=200,i.respondWith("GET",/select2-test\.json/,function(e,t){var n=[{id:"red",text:"Red"},{id:"green",text:"Green"},{id:"blue",text:"Blue"},{id:"orange",text:"Orange"},{id:"yellow",text:"Yellow"}];e.respond(200,{"Content-Type":"application/json"},JSON.stringify({total:n.length,results:n}))}),i.respondWith("GET",/search\.json/,function(e,t){var n=[{UID:"123sdfasdf",getURL:"http://localhost:8081/news/aggregator",Type:"Collection",Description:"Site News",Title:"News"},{UID:"fooasdfasdf1123asZ",getURL:"http://localhost:8081/news/aggregator",Type:"Collection",Description:"Site News",Title:"Another Item"},{UID:"fooasdfasdf1231as",getURL:"http://localhost:8081/news/aggregator",Type:"Collection",Description:"Site News",Title:"News"},{UID:"fooasdfasdf12231451",getURL:"http://localhost:8081/news/aggregator",Type:"Collection",Description:"Site News",Title:"Another Item"},{UID:"fooasdfasdf1235dsd",getURL:"http://localhost:8081/news/aggregator",Type:"Collection",Description:"Site News",Title:"News"},{UID:"fooasdfasd345345f",getURL:"http://localhost:8081/news/aggregator",Type:"Collection",Description:"Site News",Title:"Another Item"},{UID:"fooasdfasdf465",getURL:"http://localhost:8081/news/aggregator",Type:"Collection",Description:"Site News",Title:"News"},{UID:"fooaewrwsdfasdf",getURL:"http://localhost:8081/news/aggregator",Type:"Collection",Description:"Site News",Title:"Another Item"},{UID:"fooasdfasd123f",getURL:"http://localhost:8081/news/aggregator",Type:"Collection",Description:"Site News",Title:"News"},{UID:"fooasdfasdas123f",getURL:"http://localhost:8081/news/aggregator",Type:"Collection",Description:"Site News",Title:"Another Item"},{UID:"fooasdfasdfsdf",getURL:"http://localhost:8081/news/aggregator",Type:"Collection",Description:"Site News",Title:"News"},{UID:"fooasdfasdf",getURL:"http://localhost:8081/news/aggregator",Type:"Collection",Description:"Site News",Title:"Another Item"}],i=[],s=JSON.parse(r(e.url,"batch")),o=JSON.parse(r(e.url,"query"));if(o.criteria[0].v==="none*")i=[];else if(s){var u,a;u=(s.page-1)*s.size,a=u+s.size,i=n.slice(u,a)}e.respond(200,{"Content-Type":"application/json"},JSON.stringify({total:i.length,results:i}))});var o=[],u=["/","/news/","/projects/","/about/"],a=["Page","News Item","Info","Blog Item"],f=["one","two","three","four"];for(var c=0;c<u.length;c+=1){var h=u[c];for(var p=0;p<1e3;p+=1)o.push({UID:l(),Title:a[Math.floor(Math.random()*a.length)]+" "+p,path:h+l(8),Type:"Document"})}i.respondWith(/relateditems-test\.json/,function(e,i){function y(e,t){a=[];if(t===undefined)return s;n.each(e,function(e){var n,r=(e.UID+" "+e.Title+" "+e.path+" "+e.Type).toLowerCase();if(typeof t=="object")for(var i=0;i<t.length;i+=1){n=t[i].toLowerCase();if(r.indexOf(n)>-1){a.push(e);break}}else n=t.toLowerCase().replace("*",""),r.indexOf(n)>-1&&a.push(e)})}function b(e,t,r){a=[];var i=r.substring(0,r.length-1),s=i.split("/"),o=[];n.each(e,function(e){var t=e.path.split("/");e.path.indexOf(i)===0&&t.length-1===s.length&&o.push(e)});if(t===undefined)return o;y(o,t)}var s=[{UID:"jasdlfdlkdkjasdf",Title:"Some Image",path:"/test.png",Type:"Image"},{UID:"asdlfkjasdlfkjasdf",Title:"News",path:"/news",Type:"Folder"},{UID:"124asdfasasdaf34",Title:"About",path:"/about",Type:"Folder"},{UID:"asdf1234",Title:"Projects",path:"/projects",Type:"Folder"},{UID:"asdf1234gsad",Title:"Contact",path:"/contact",Type:"Document"},{UID:"asdv34sdfs",Title:"Privacy Policy",path:"/policy",Type:"Document"},{UID:"asdfasdf234sdf",Title:"Our Process",path:"/our-process",Type:"Folder"},{UID:"asdhsfghyt45",Title:"Donate",path:"/donate-now",Type:"Document"},{UID:"gfn5634f",Title:"About Us",path:"/about/about-us",Type:"Document"},{UID:"45dsfgsdcd",Title:"Philosophy",path:"/about/philosophy",Type:"Document"},{UID:"dfgsdfgj675",Title:"Staff",path:"/about/staff",Type:"Folder"},{UID:"sdfbsfdh345",Title:"Board of Directors",path:"/about/board-of-directors",Type:"Document"},{UID:"asdfasdf9sdf",Title:"Mike",path:"/about/staff/mike",Type:"Document"},{UID:"cvbcvb82345",Title:"Joe",path:"/about/staff/joe",Type:"Document"}];s=s.concat(o);var u=function(e){var t=["January 1, 2011","February 10, 2012","March 12, 2013","April 1, 2012","May 20, 2013"];for(var n=0;n<e.length;n+=1){var r=e[n];r.getURL=window.location.origin+r.path,r.review_state=["published","private","review"][Math.floor(Math.random()*3)],r.CreationDate=t[Math.floor(Math.random()*t.length)],r.ModificationDate=t[Math.floor(Math.random()*t.length)],r.EffectiveDate=t[Math.floor(Math.random()*t.length)],r.Subject=[f[Math.floor(Math.random()*f.length)],f[Math.floor(Math.random()*f.length)]],r.id=r.Title.replace(" ","-").toLowerCase(),r.Type==="Folder"?r.is_folderish=!0:r.is_folderish=!1}};u(s),s[0].getURL=window.location.origin+"/tests/images/plone.png",s[0].path="/tests/images/plone.png";var a=[],l=r(e.url,"batch"),c=1,h=10;l&&(l=t.parseJSON(l),c=l.page,h=l.size),c-=1;var p=r(e.url,"query"),d=null,v="";if(p){p=t.parseJSON(p);for(var m=0;m<p.criteria.length;m+=1){var g=p.criteria[m];g.i==="path"?d=g.v.split("::")[0]:v=g.v}}d?b(s,v,d):y(s,v),e.respond(200,{"Content-Type":"application/json"},JSON.stringify({total:a.length,results:a.slice(c*h,c*h+(h-1))}))}),i.respondWith("GET",/something\.html/,[200,{"Content-Type":"text/html"},'<html> <head></head><body> <div id="content"><h1>Content from AJAX</h1><p>Ah, it is a rock, though. Should beat everything.</p></body> </html>']),i.respondWith("GET",/something-link\.html/,[200,{"Content-Type":"text/html"},'<html> <head></head><body> <div id="content"><h1>Content from AJAX with a link</h1><p>Ah, it is a rock, though. Should beat <a href="something-else.html">link</a> everything.</p></body> </html>']),i.respondWith("GET",/something-else\.html/,[200,{"Content-Type":"text/html"},'<html> <head></head><body> <div id="content"><h1>Something else</h1><p>We loaded a link.</p></body> </html>']),i.respondWith("GET",/modal-form\.html/,[200,{"Content-Type":"text/html"},'<html> <head></head><body> <div id="content"><h1>Modal with Form</h1><p>This modal contains a form.</p><form method="POST" action="/modal-submit.html">  <label for="name">Name:</label><input type="text" name="name" />  <div class="formControls">     <input type="submit" class="btn btn-primary" value="Submit" name="submit" />  </div> </form></body> </html>']),i.respondWith("POST",/modal-submit\.html/,function(e,t){var i=r("?"+e.requestBody,"name");e.respond(200,{"content-Type":"text/html"},'<html>   <head></head>  <body>     <div id="content">      <h1>Hello, '+n.escape(i)+"</h1>"+"      <p>Thanks!</p>"+"  </body> "+"</html>")}),i.respondWith("POST",/upload/,function(e,t){e.respond(200,{"content-Type":"application/json"},JSON.stringify({url:"http://localhost:8000/blah.png",uid:"sldlfkjsldkjlskdjf",name:"blah.png",filename:"blah.png",type:"Image",size:239292}))}),i.respondWith("GET",/portal_factory\/@@querybuilder_html_results/,function(e,n){var r=t("#querystring-example-results").text();e.respond(200,{"content-Type":"text/html"},r)}),i.respondWith("GET",/portal_factory\/@@querybuildernumberofresults/,function(e,n){var r=t("#querystring-number-results-example-results").text();e.respond(200,{"content-Type":"text/html"},r)});var d=["/moveitem","/copy","/cut","/delete","/workflow","/tags","/properties","/paste","/order","/rename","/rearrange"],v={"/copy":function(e){var t=JSON.parse(r("?"+e.requestBody,"selection"));return{status:"success",msg:t.length+" items copied"}},"/cut":function(e){var t=JSON.parse(r("?"+e.requestBody,"selection"));return{status:"success",msg:t.length+" items cut"}},"/paste":function(e){var t=JSON.parse(r("?"+e.requestBody,"selection"));return{status:"success",msg:"pasted "+t.length+" items"}},"/order":function(e){return{status:"success",msg:"Folder ordering set"}},"/tags":function(e){var t=JSON.parse(r("?"+e.requestBody,"selection"));return{status:"success",msg:"Tags updated for "+t.length+" items"}},"/properties":function(e){var t=JSON.parse(r("?"+e.requestBody,"selection"));return{status:"success",msg:"Properties updated for "+t.length+" items"}},"/rename":function(e){var t=JSON.parse(r("?"+e.requestBody,"torename"));return{status:"success",msg:"Renamed "+t.length+" items"}},"/workflow":function(e){var t=JSON.parse(r("?"+e.requestBody,"selection"));if(e.requestBody.indexOf("transitions")!==-1){var n=JSON.parse(r("?"+e.requestBody,"transitions"));return{status:"success",transitions:[{id:"publish",title:"Publish"},{id:"retract",title:"Retract"}]}}return{status:"success",msg:"Workflow updated for "+t.length+" items"}},"/delete":function(e){var t=JSON.parse(r("?"+e.requestBody,"selection"));return{status:"success",msg:"Deleted "+t.length+" items"}},"/rearrange":function(e){var t=JSON.parse(r("?"+e.requestBody,"selection"));return{status:"success",msg:"Rearranged items"}}};return n.each(d,function(e){i.respondWith("POST",e,function(t,n){i.autoRespondAfter=200;var r={status:"success"};v[e]&&(r=v[e](t)),t.respond(200,{"Content-Type":"application/json"},JSON.stringify(r))})}),i.respondWith("GET",/context-info/,function(e,t){i.autoRespondAfter=200;var r={breadcrumbs:[]};e.url.indexOf("http://")===-1&&(n.each(e.url.split("/"),function(e){e!==""&&e!=="context-info"&&(e=e.charAt(0).toUpperCase()+e.slice(1),r.breadcrumbs.push({title:e}))}),r.object={UID:"asdlfkjasdlfkjasdf",Title:"News",path:"/news",Type:"Folder"}),e.respond(200,{"Content-Type":"application/json"},JSON.stringify(r))}),i}),require(["mockup-docs","text!docs-getting-started","text!docs-tutorial","text!docs-contribute","bootstrap-collapse","mockup-fakeserver"],function(e,t,n,r){var i=new e({pages:[{id:"index",title:"Mockup",description:"Collection of patterns for faster and easier web development.",text:"[See it in action!](#pattern)",autotoc:!1},{id:"getting-started",title:"Getting Started",description:"An overview of Mockup, how to install it and start using patterns.",text:t},{id:"tutorial",title:"Tutorial",description:"How to start developing with Mockup.",text:n},{id:"pattern",title:"Patterns",description:"All patterns you'll ever need.",autotoc:!1,patterns:[{id:"accessibility",title:"Accessibility",description:"Easily change text size on a page.",url:"./js/patterns/accessibility.js"},{id:"ace",title:"Ace Editor",description:"Edit files in the browser.",url:"./js/patterns/ace.js"},{id:"autotoc",title:"Autotoc",description:"Automatically generate a table of contents.",url:"./js/patterns/autotoc.js"},{id:"backdrop",title:"Backdrop",description:"TODO",url:"js/patterns/backdrop.js"},{id:"cookiedirective",title:"Cookie Directive",description:"A pattern that checks cookies enabled and asks permission for the user to allow cookies or not.",url:"js/patterns/cookiedirective.js"},{id:"dropzone",title:"DropZone",description:"File upload with drag and drop support.",url:"js/patterns/dropzone.js"},{id:"expose",title:"Expose",description:"Exposes the focused element by darkening everything else on the page. Useful to focus the user attention on a particular area.",url:"js/patterns/expose.js"},{id:"filemanager",title:"Filemanager",description:"TODO",url:"js/patterns/filemanager/pattern.js"},{id:"formautofocus",title:"Form Auto Focus",description:"TODO",url:"js/patterns/formautofocus.js"},{id:"formunloadalert",title:"Form Unload Alert",description:"A pattern to warn user when changes are unsaved and they try to navigate away from page.",url:"js/patterns/formunloadalert.js"},{id:"livesearch",title:"Live Search",description:"Dynamically query the server and display results.",url:"js/patterns/livesearch.js"},{id:"modal",title:"Modal",description:"Creates a modal dialog (also called overlay).",url:"js/patterns/modal.js"},{id:"moment",title:"Moment",description:"Human date representation of dates.",url:"js/patterns/moment.js"},{id:"pickadate",title:"Pick-A-Date",description:"Allows the user to select a date (with or without time) through a calendar.",url:"./js/patterns/pickadate.js"},{id:"preventdoublesubmit",title:"Prevent Double Submit",description:"A pattern to prevent submitting a form twice.",url:"js/patterns/preventdoublesubmit.js"},{id:"querystring",title:"Querystring",description:"A widget for creating queries for collections.",url:"js/patterns/querystring.js"},{id:"relateditems",title:"Related Items",description:"An advanced widget for selecting related items.",url:"js/patterns/relateditems.js"},{id:"select2",title:"Select2",description:"Autocompletes, multiple or single selections from any kind of data source (with search!).",url:"js/patterns/select2.js"},{id:"sortable",title:"Sortable",description:"Sort items in list using drag and drop.",url:"js/patterns/sortable.js"},{id:"structure",title:"Structure",description:"Managing a folder of items.",url:"js/patterns/structure/pattern.js"},{id:"tablesorter",title:"Table Sorter",description:"A pattern you can apply to a table so it can have its items rearranged when clicking the header.",url:"js/patterns/tablesorter.js"},{id:"tinymce",title:"TinyMCE",description:"Rich text editor.",url:"js/patterns/tinymce/pattern.js"},{id:"toggle",title:"Toggle",description:"Toggles any attribute value after some event is fired.",url:"./js/patterns/toggle.js"},{id:"tooltip",title:"Tooltip",description:"A pattern to show a tooltip on hover.",url:"js/patterns/tooltip.js"},{id:"tree",title:"Tree",description:"Manage tree of items.",url:"js/patterns/tree.js"}]},{id:"contribute",title:"Contribute",description:"How to start contributing.",position:"right",text:r}]});return i}),define("mockup-bundles-docs",function(){}),define("mockup-patterns-base",["jquery","mockup-registry"],function(e,t){var n=function(t,n){this.$el=t,this.options=e.extend(!0,{},this.defaults||{},n||{}),this.init(),this.trigger("init")};return n.prototype={constructor:n,on:function(e,t){this.$el.on(e+"."+this.name+".patterns",t)},trigger:function(e,t){t===undefined&&(t=[]),this.$el.trigger(e+"."+this.name+".patterns",t)}},n.extend=function(n){var r=this,i;n&&n.hasOwnProperty("constructor")?i=n.constructor:i=function(){r.apply(this,arguments)};var s=function(){this.constructor=i};return s.prototype=r.prototype,i.prototype=new s,i.extend=r.extend,e.extend(!0,i.prototype,n),i.__super__=r.prototype,t.register(i),i},n}),function(e){typeof define=="function"&&define.amd?define("jquery.cookie",["jquery"],e):e(jQuery)}(function(e){function n(e){return u.raw?e:encodeURIComponent(e)}function r(e){return u.raw?e:decodeURIComponent(e)}function i(e){return n(u.json?JSON.stringify(e):String(e))}function s(e){e.indexOf('"')===0&&(e=e.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\"));try{e=decodeURIComponent(e.replace(t," "))}catch(n){return}try{return u.json?JSON.parse(e):e}catch(n){}}function o(t,n){var r=u.raw?t:s(t);return e.isFunction(n)?n(r):r}var t=/\+/g,u=e.cookie=function(t,s,a){if(s!==undefined&&!e.isFunction(s)){a=e.extend({},u.defaults,a);if(typeof a.expires=="number"){var f=a.expires,l=a.expires=new Date;l.setDate(l.getDate()+f)}return document.cookie=[n(t),"=",i(s),a.expires?"; expires="+a.expires.toUTCString():"",a.path?"; path="+a.path:"",a.domain?"; domain="+a.domain:"",a.secure?"; secure":""].join("")}var c=t?undefined:{},h=document.cookie?document.cookie.split("; "):[];for(var p=0,d=h.length;p<d;p++){var v=h[p].split("="),m=r(v.shift()),g=v.join("=");if(t&&t===m){c=o(g,s);break}!t&&(g=o(g))!==undefined&&(c[m]=g)}return c};u.defaults={},e.removeCookie=function(t,n){return e.cookie(t)!==undefined?(e.cookie(t,"",e.extend({},n,{expires:-1})),!0):!1}}),define("mockup-patterns-accessibility",["jquery","mockup-patterns-base","jquery.cookie"],function(e,t){var n=t.extend({name:"accessibility",defaults:{smallbtn:null,normalbtn:null,largebtn:null},setBaseFontSize:function(t,n){n&&(this.$el.removeClass("smallText").removeClass("largeText").removeClass("mediumText"),e.cookie("fontsize",t,{expires:365,path:"/"})),this.$el.addClass(t)},initBtn:function(e){var t=this;e.el.click(function(n){n.preventDefault(),t.setBaseFontSize(e.name+"Text",1)})},init:function(){var t=this,n=e.cookie("fontsize");n&&t.setBaseFontSize(n,0);var r=["smallbtn","normalbtn","largebtn"];e.each(r,function(n,r){var i=r.replace("btn",""),s=t.options[r];if(s!==null){var o=e(s,t.$el);o&&(r={name:i,el:o},t[i]=r,t.initBtn(r))}})}});return n}),define("text!js/patterns/accessibility.js",[],function(){return"/* Pattern which provides accessibility support\n *\n * Options:\n *    smallbtn(string):	Selector used to activate small text on click. (null)\n *    normalbtn(string): Selector used to activate normal text on click. (null)\n *    largebtn(string):	Selector used to activate large text on click. (null)\n *\n * Documentation:\n *    # Example\n *\n *    {{ example-1 }}\n *\n * Example: example-1\n *    <ul id=\"textAdjust\"\n *        class=\"pat-accessibility\"\n *        data-pat-accessibility=\"smallbtn:.decrease-text;\n *                                normalbtn:.normal-text;\n *                                largebtn:.increase-text;\">\n *      <li>\n *        <a href=\".\" class=\"decrease-text\">\n *          <i class=\"icon-minus-sign\"></i>\n *          Decrease Text Size\n *        </a>\n *      </li>\n *      <li>\n *        <a href=\".\" class=\"normal-text\">\n *          <i class=\"icon-circle\"></i>\n *          Normal Text Size\n *        </a>\n *      </li>\n *      <li>\n *        <a href=\".\" class=\"increase-text\">\n *          <i class=\"icon-plus-sign\"></i>\n *          Increase Text Size\n *        </a>\n *      </li>\n *    </ul>\n *\n * License:\n *    Copyright (C) 2010 Plone Foundation\n *\n *    This program is free software; you can redistribute it and/or modify it\n *    under the terms of the GNU General Public License as published by the\n *    Free Software Foundation; either version 2 of the License.\n *\n *    This program is distributed in the hope that it will be useful, but\n *    WITHOUT ANY WARRANTY; without even the implied warranty of\n *    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General\n *    Public License for more details.\n *\n *    You should have received a copy of the GNU General Public License along\n *    with this program; if not, write to the Free Software Foundation, Inc.,\n *    51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA.\n */\n\n\ndefine([\n  'jquery',\n  'mockup-patterns-base',\n  'jquery.cookie'\n], function($, Base) {\n  'use strict';\n\n  var Accessibility = Base.extend({\n    name: 'accessibility',\n    defaults: {\n      'smallbtn': null,\n      'normalbtn': null,\n      'largebtn': null\n    },\n    setBaseFontSize: function($fontsize, $reset) {\n      if ($reset) {\n        this.$el.removeClass('smallText').removeClass('largeText').\n            removeClass('mediumText');\n        $.cookie('fontsize', $fontsize, { expires: 365, path: '/' });\n      }\n      this.$el.addClass($fontsize);\n    },\n    initBtn: function(btn) {\n      var self = this;\n      btn.el.click(function(e) {\n        e.preventDefault();\n        self.setBaseFontSize(btn.name + 'Text', 1);\n      });\n    },\n    init: function() {\n      var self = this;\n      var $fontsize = $.cookie('fontsize');\n      if ($fontsize) {\n        self.setBaseFontSize($fontsize, 0);\n      }\n      var btns = ['smallbtn', 'normalbtn', 'largebtn'];\n      $.each(btns, function(idx, btn) {\n        var btnName = btn.replace('btn', '');\n        var btnSelector = self.options[btn];\n        if (btnSelector !== null) {\n          var el = $(btnSelector, self.$el);\n          if (el) {\n            btn = {\n              name: btnName,\n              el: el\n            };\n            self[btnName] = btn;\n            self.initBtn(btn);\n          }\n        }\n      });\n    }\n  });\n\n  return Accessibility;\n\n});\n\n"}),define("mockup-utils",["jquery"],function(e){var t=function(t){var n=this,r={pattern:null,vocabularyUrl:null,searchParam:"SearchableText",attributes:["UID","Title","Description","getURL","Type"],batchSize:10,baseCriteria:[],pathDepth:1};n.options=e.extend({},r,t),n.pattern=n.options.pattern;if(n.pattern===undefined||n.pattern===null)n.pattern={browsing:!1,basePath:"/"};return n.options.url&&!n.options.vocabularyUrl?n.options.vocabularyUrl=n.options.url:n.pattern.vocabularyUrl&&(n.options.vocabularyUrl=n.pattern.vocabularyUrl),n.options.vocabularyUrl!==undefined&&n.options.vocabularyUrl!==null?n.valid=!0:n.valid=!1,n.getCurrentPath=function(){var e=n.pattern,t;n.currentPath?t=n.currentPath:t=e.currentPath,typeof t=="function"&&(t=t());var r=t;return r||(e.basePath?r=e.basePath:e.options.basePath?r=e.options.basePath:r="/"),r},n.getCriterias=function(t,r){r===undefined&&(r={}),r=e.extend({},{useBaseCriteria:!0,additionalCriterias:[]},r);var i=[];return r.useBaseCriteria&&(i=n.options.baseCriteria.slice(0)),t&&(t+="*",i.push({i:n.options.searchParam,o:"plone.app.querystring.operation.string.contains",v:t})),n.pattern.browsing&&i.push({i:"path",o:"plone.app.querystring.operation.string.path",v:n.getCurrentPath()+"::"+n.options.pathDepth}),i=i.concat(r.additionalCriterias),i},n.getBatch=function(e){return e||(e=1),{page:e,size:n.options.batchSize}},n.selectAjax=function(){return{url:n.options.vocabularyUrl,dataType:"JSON",quietMillis:100,data:function(e,t){return n.getQueryData(e,t)},results:function(e,t){var n=t*10<e.total;return{results:e.results,more:n}}}},n.getUrl=function(){var t=n.options.vocabularyUrl;return t.indexOf("?")===-1?t+="?":t+="&",t+e.param(n.getQueryData())},n.getQueryData=function(e,t){var r={query:JSON.stringify({criteria:n.getCriterias(e)}),attributes:JSON.stringify(n.options.attributes)};return t&&(r.batch=JSON.stringify(n.getBatch(t))),r},n.search=function(t,r,i,s,o){o===undefined&&(o=!0);var u=[];o&&(u=n.options.baseCriteria.slice(0)),u.push({i:t,o:r,v:i});var a={query:JSON.stringify({criteria:u}),attributes:JSON.stringify(n.options.attributes)};e.ajax({url:n.options.vocabularyUrl,dataType:"JSON",data:a,success:s})},n},n=function(t){var n=this,r={className:"progress-indicator",container:null,backdrop:null,wrapper:null,zIndex:10005};return t||(t={}),n.options=e.extend({},r,t),n.options.container===null&&(n.options.container=e("body")),n.$loading=e("> ."+n.options.className,n.options.container),n.$loading.size()===0&&(n.$loading=e("<div/>").hide().addClass(n.options.className).appendTo(n.options.container)),n.$wrapper=n.options.wrapper,n.$wrapper===null&&(n.$wrapper=n.options.container),n.show=function(e){e===undefined&&(e=!0),n.options.backdrop&&(n.options.backdrop.closeOnClick=e,n.options.backdrop.closeOnEsc=e,n.options.backdrop.init()),n.$wrapper.parent().css("overflow","hidden"),n.$wrapper.show(),n.options.backdrop&&n.options.backdrop.show(),n.$loading.show(),n.position()},n.position=function(){n.$loading.css({"margin-left":n.$wrapper.width()/2-n.$loading.width()/2,"margin-top":n.$wrapper.height()/2-n.$loading.height()/2,position:"absolute",bottom:"0",left:"0",right:"0",top:"0"});var e=n.options.zIndex;typeof e=="function"&&(e=e()),n.$loading.css("zIndex",e)},n.hide=function(){n.$loading.hide(),n.$wrapper.parent().css("overflow","")},n};return{parseBodyTag:function(t){return e(/<body[^>]*>((.|[\n\r])*)<\/body>/im.exec(t)[0].replace("<body","<div").replace("</body>","</div>")).eq(0).html()},setId:function(e,t){t===undefined&&(t="id");var n=e.attr("id");return n===undefined?n=t+Math.floor((1+Math.random())*65536).toString(16).substring(1):n=n.replace(/\./g,"-"),e.attr("id",n),n},bool:function(t){return typeof t=="string"&&(t=e.trim(t).toLowerCase()),["true",!0,1].indexOf(t)!==-1},QueryHelper:t,ProgressIndicator:n}}),function(){function o(e){var i=function(e,t){return r("",e,t)},s=t;e&&(t[e]||(t[e]={}),s=t[e]);if(!s.define||!s.define.packaged)n.original=s.define,s.define=n,s.define.packaged=!0;if(!s.require||!s.require.packaged)r.original=s.require,s.require=i,s.require.packaged=!0}var e="",t=function(){return this}();if(!e&&typeof requirejs!="undefined")return;var n=function(e,t,r){if(typeof e!="string"){n.original?n.original.apply(window,arguments):(console.error("dropping module because define wasn't a string."),console.trace());return}arguments.length==2&&(r=t),n.modules||(n.modules={},n.payloads={}),n.payloads[e]=r,n.modules[e]=null},r=function(e,t,n){if(Object.prototype.toString.call(t)==="[object Array]"){var i=[];for(var o=0,u=t.length;o<u;++o){var a=s(e,t[o]);if(!a&&r.original)return r.original.apply(window,arguments);i.push(a)}n&&n.apply(null,i)}else{if(typeof t=="string"){var f=s(e,t);return!f&&r.original?r.original.apply(window,arguments):(n&&n(),f)}if(r.original)return r.original.apply(window,arguments)}},i=function(e,t){if(t.indexOf("!")!==-1){var n=t.split("!");return i(e,n[0])+"!"+i(e,n[1])}if(t.charAt(0)=="."){var r=e.split("/").slice(0,-1).join("/");t=r+"/"+t;while(t.indexOf(".")!==-1&&s!=t){var s=t;t=t.replace(/\/\.\//,"/").replace(/[^\/]+\/\.\.\//,"")}}return t},s=function(e,t){t=i(e,t);var s=n.modules[t];if(!s){s=n.payloads[t];if(typeof s=="function"){var o={},u={id:t,uri:"",exports:o,packaged:!0},a=function(e,n){return r(t,e,n)},f=s(a,o,u);o=f||u.exports,n.modules[t]=o,delete n.payloads[t]}s=n.modules[t]=o||s}return s};o(e)}(),define("ace/ace",["require","exports","module","ace/lib/fixoldbrowsers","ace/lib/dom","ace/lib/event","ace/editor","ace/edit_session","ace/undomanager","ace/virtual_renderer","ace/multi_select","ace/worker/worker_client","ace/keyboard/hash_handler","ace/placeholder","ace/mode/folding/fold_mode","ace/theme/textmate","ace/ext/error_marker","ace/config"],function(e,t,n){e("./lib/fixoldbrowsers");var r=e("./lib/dom"),i=e("./lib/event"),s=e("./editor").Editor,o=e("./edit_session").EditSession,u=e("./undomanager").UndoManager,a=e("./virtual_renderer").VirtualRenderer,f=e("./multi_select").MultiSelect;e("./worker/worker_client"),e("./keyboard/hash_handler"),e("./placeholder"),e("./mode/folding/fold_mode"),e("./theme/textmate"),e("./ext/error_marker"),t.config=e("./config"),t.require=e,t.edit=function(e){if(typeof e=="string"){var n=e,e=document.getElementById(n);if(!e)throw new Error("ace.edit can't find div #"+n)}if(e.env&&e.env.editor instanceof s)return e.env.editor;var o=t.createEditSession(r.getInnerText(e));e.innerHTML="";var u=new s(new a(e));new f(u),u.setSession(o);var l={document:o,editor:u,onResize:u.resize.bind(u,null)};return i.addListener(window,"resize",l.onResize),u.on("destroy",function(){i.removeListener(window,"resize",l.onResize)}),e.env=u.env=l,u},t.createEditSession=function(e,t){var n=new o(e,t);return n.setUndoManager(new u),n},t.EditSession=o,t.UndoManager=u}),define("ace/mode/behaviour",["require","exports","module"],function(e,t,n){var r=function(){this.$behaviours={}};(function(){this.add=function(e,t,n){switch(undefined){case this.$behaviours:this.$behaviours={};case this.$behaviours[e]:this.$behaviours[e]={}}this.$behaviours[e][t]=n},this.addBehaviours=function(e){for(var t in e)for(var n in e[t])this.add(t,n,e[t][n])},this.remove=function(e){this.$behaviours&&this.$behaviours[e]&&delete this.$behaviours[e]},this.inherit=function(e,t){if(typeof e=="function")var n=(new e).getBehaviours(t);else var n=e.getBehaviours(t);this.addBehaviours(n)},this.getBehaviours=function(e){if(!e)return this.$behaviours;var t={};for(var n=0;n<e.length;n++)this.$behaviours[e[n]]&&(t[e[n]]=this.$behaviours[e[n]]);return t}}).call(r.prototype),t.Behaviour=r}),define("ace/unicode",["require","exports","module"],function(e,t,n){function r(e){var n=/\w{4}/g;for(var r in e)t.packages[r]=e[r].replace(n,"\\u$&")}t.packages={},r({L:"0041-005A0061-007A00AA00B500BA00C0-00D600D8-00F600F8-02C102C6-02D102E0-02E402EC02EE0370-037403760377037A-037D03860388-038A038C038E-03A103A3-03F503F7-0481048A-05250531-055605590561-058705D0-05EA05F0-05F20621-064A066E066F0671-06D306D506E506E606EE06EF06FA-06FC06FF07100712-072F074D-07A507B107CA-07EA07F407F507FA0800-0815081A082408280904-0939093D09500958-0961097109720979-097F0985-098C098F09900993-09A809AA-09B009B209B6-09B909BD09CE09DC09DD09DF-09E109F009F10A05-0A0A0A0F0A100A13-0A280A2A-0A300A320A330A350A360A380A390A59-0A5C0A5E0A72-0A740A85-0A8D0A8F-0A910A93-0AA80AAA-0AB00AB20AB30AB5-0AB90ABD0AD00AE00AE10B05-0B0C0B0F0B100B13-0B280B2A-0B300B320B330B35-0B390B3D0B5C0B5D0B5F-0B610B710B830B85-0B8A0B8E-0B900B92-0B950B990B9A0B9C0B9E0B9F0BA30BA40BA8-0BAA0BAE-0BB90BD00C05-0C0C0C0E-0C100C12-0C280C2A-0C330C35-0C390C3D0C580C590C600C610C85-0C8C0C8E-0C900C92-0CA80CAA-0CB30CB5-0CB90CBD0CDE0CE00CE10D05-0D0C0D0E-0D100D12-0D280D2A-0D390D3D0D600D610D7A-0D7F0D85-0D960D9A-0DB10DB3-0DBB0DBD0DC0-0DC60E01-0E300E320E330E40-0E460E810E820E840E870E880E8A0E8D0E94-0E970E99-0E9F0EA1-0EA30EA50EA70EAA0EAB0EAD-0EB00EB20EB30EBD0EC0-0EC40EC60EDC0EDD0F000F40-0F470F49-0F6C0F88-0F8B1000-102A103F1050-1055105A-105D106110651066106E-10701075-1081108E10A0-10C510D0-10FA10FC1100-1248124A-124D1250-12561258125A-125D1260-1288128A-128D1290-12B012B2-12B512B8-12BE12C012C2-12C512C8-12D612D8-13101312-13151318-135A1380-138F13A0-13F41401-166C166F-167F1681-169A16A0-16EA1700-170C170E-17111720-17311740-17511760-176C176E-17701780-17B317D717DC1820-18771880-18A818AA18B0-18F51900-191C1950-196D1970-19741980-19AB19C1-19C71A00-1A161A20-1A541AA71B05-1B331B45-1B4B1B83-1BA01BAE1BAF1C00-1C231C4D-1C4F1C5A-1C7D1CE9-1CEC1CEE-1CF11D00-1DBF1E00-1F151F18-1F1D1F20-1F451F48-1F4D1F50-1F571F591F5B1F5D1F5F-1F7D1F80-1FB41FB6-1FBC1FBE1FC2-1FC41FC6-1FCC1FD0-1FD31FD6-1FDB1FE0-1FEC1FF2-1FF41FF6-1FFC2071207F2090-209421022107210A-211321152119-211D212421262128212A-212D212F-2139213C-213F2145-2149214E218321842C00-2C2E2C30-2C5E2C60-2CE42CEB-2CEE2D00-2D252D30-2D652D6F2D80-2D962DA0-2DA62DA8-2DAE2DB0-2DB62DB8-2DBE2DC0-2DC62DC8-2DCE2DD0-2DD62DD8-2DDE2E2F300530063031-3035303B303C3041-3096309D-309F30A1-30FA30FC-30FF3105-312D3131-318E31A0-31B731F0-31FF3400-4DB54E00-9FCBA000-A48CA4D0-A4FDA500-A60CA610-A61FA62AA62BA640-A65FA662-A66EA67F-A697A6A0-A6E5A717-A71FA722-A788A78BA78CA7FB-A801A803-A805A807-A80AA80C-A822A840-A873A882-A8B3A8F2-A8F7A8FBA90A-A925A930-A946A960-A97CA984-A9B2A9CFAA00-AA28AA40-AA42AA44-AA4BAA60-AA76AA7AAA80-AAAFAAB1AAB5AAB6AAB9-AABDAAC0AAC2AADB-AADDABC0-ABE2AC00-D7A3D7B0-D7C6D7CB-D7FBF900-FA2DFA30-FA6DFA70-FAD9FB00-FB06FB13-FB17FB1DFB1F-FB28FB2A-FB36FB38-FB3CFB3EFB40FB41FB43FB44FB46-FBB1FBD3-FD3DFD50-FD8FFD92-FDC7FDF0-FDFBFE70-FE74FE76-FEFCFF21-FF3AFF41-FF5AFF66-FFBEFFC2-FFC7FFCA-FFCFFFD2-FFD7FFDA-FFDC",Ll:"0061-007A00AA00B500BA00DF-00F600F8-00FF01010103010501070109010B010D010F01110113011501170119011B011D011F01210123012501270129012B012D012F01310133013501370138013A013C013E014001420144014601480149014B014D014F01510153015501570159015B015D015F01610163016501670169016B016D016F0171017301750177017A017C017E-0180018301850188018C018D019201950199-019B019E01A101A301A501A801AA01AB01AD01B001B401B601B901BA01BD-01BF01C601C901CC01CE01D001D201D401D601D801DA01DC01DD01DF01E101E301E501E701E901EB01ED01EF01F001F301F501F901FB01FD01FF02010203020502070209020B020D020F02110213021502170219021B021D021F02210223022502270229022B022D022F02310233-0239023C023F0240024202470249024B024D024F-02930295-02AF037103730377037B-037D039003AC-03CE03D003D103D5-03D703D903DB03DD03DF03E103E303E503E703E903EB03ED03EF-03F303F503F803FB03FC0430-045F04610463046504670469046B046D046F04710473047504770479047B047D047F0481048B048D048F04910493049504970499049B049D049F04A104A304A504A704A904AB04AD04AF04B104B304B504B704B904BB04BD04BF04C204C404C604C804CA04CC04CE04CF04D104D304D504D704D904DB04DD04DF04E104E304E504E704E904EB04ED04EF04F104F304F504F704F904FB04FD04FF05010503050505070509050B050D050F05110513051505170519051B051D051F0521052305250561-05871D00-1D2B1D62-1D771D79-1D9A1E011E031E051E071E091E0B1E0D1E0F1E111E131E151E171E191E1B1E1D1E1F1E211E231E251E271E291E2B1E2D1E2F1E311E331E351E371E391E3B1E3D1E3F1E411E431E451E471E491E4B1E4D1E4F1E511E531E551E571E591E5B1E5D1E5F1E611E631E651E671E691E6B1E6D1E6F1E711E731E751E771E791E7B1E7D1E7F1E811E831E851E871E891E8B1E8D1E8F1E911E931E95-1E9D1E9F1EA11EA31EA51EA71EA91EAB1EAD1EAF1EB11EB31EB51EB71EB91EBB1EBD1EBF1EC11EC31EC51EC71EC91ECB1ECD1ECF1ED11ED31ED51ED71ED91EDB1EDD1EDF1EE11EE31EE51EE71EE91EEB1EED1EEF1EF11EF31EF51EF71EF91EFB1EFD1EFF-1F071F10-1F151F20-1F271F30-1F371F40-1F451F50-1F571F60-1F671F70-1F7D1F80-1F871F90-1F971FA0-1FA71FB0-1FB41FB61FB71FBE1FC2-1FC41FC61FC71FD0-1FD31FD61FD71FE0-1FE71FF2-1FF41FF61FF7210A210E210F2113212F21342139213C213D2146-2149214E21842C30-2C5E2C612C652C662C682C6A2C6C2C712C732C742C76-2C7C2C812C832C852C872C892C8B2C8D2C8F2C912C932C952C972C992C9B2C9D2C9F2CA12CA32CA52CA72CA92CAB2CAD2CAF2CB12CB32CB52CB72CB92CBB2CBD2CBF2CC12CC32CC52CC72CC92CCB2CCD2CCF2CD12CD32CD52CD72CD92CDB2CDD2CDF2CE12CE32CE42CEC2CEE2D00-2D25A641A643A645A647A649A64BA64DA64FA651A653A655A657A659A65BA65DA65FA663A665A667A669A66BA66DA681A683A685A687A689A68BA68DA68FA691A693A695A697A723A725A727A729A72BA72DA72F-A731A733A735A737A739A73BA73DA73FA741A743A745A747A749A74BA74DA74FA751A753A755A757A759A75BA75DA75FA761A763A765A767A769A76BA76DA76FA771-A778A77AA77CA77FA781A783A785A787A78CFB00-FB06FB13-FB17FF41-FF5A",Lu:"0041-005A00C0-00D600D8-00DE01000102010401060108010A010C010E01100112011401160118011A011C011E01200122012401260128012A012C012E01300132013401360139013B013D013F0141014301450147014A014C014E01500152015401560158015A015C015E01600162016401660168016A016C016E017001720174017601780179017B017D018101820184018601870189-018B018E-0191019301940196-0198019C019D019F01A001A201A401A601A701A901AC01AE01AF01B1-01B301B501B701B801BC01C401C701CA01CD01CF01D101D301D501D701D901DB01DE01E001E201E401E601E801EA01EC01EE01F101F401F6-01F801FA01FC01FE02000202020402060208020A020C020E02100212021402160218021A021C021E02200222022402260228022A022C022E02300232023A023B023D023E02410243-02460248024A024C024E03700372037603860388-038A038C038E038F0391-03A103A3-03AB03CF03D2-03D403D803DA03DC03DE03E003E203E403E603E803EA03EC03EE03F403F703F903FA03FD-042F04600462046404660468046A046C046E04700472047404760478047A047C047E0480048A048C048E04900492049404960498049A049C049E04A004A204A404A604A804AA04AC04AE04B004B204B404B604B804BA04BC04BE04C004C104C304C504C704C904CB04CD04D004D204D404D604D804DA04DC04DE04E004E204E404E604E804EA04EC04EE04F004F204F404F604F804FA04FC04FE05000502050405060508050A050C050E05100512051405160518051A051C051E0520052205240531-055610A0-10C51E001E021E041E061E081E0A1E0C1E0E1E101E121E141E161E181E1A1E1C1E1E1E201E221E241E261E281E2A1E2C1E2E1E301E321E341E361E381E3A1E3C1E3E1E401E421E441E461E481E4A1E4C1E4E1E501E521E541E561E581E5A1E5C1E5E1E601E621E641E661E681E6A1E6C1E6E1E701E721E741E761E781E7A1E7C1E7E1E801E821E841E861E881E8A1E8C1E8E1E901E921E941E9E1EA01EA21EA41EA61EA81EAA1EAC1EAE1EB01EB21EB41EB61EB81EBA1EBC1EBE1EC01EC21EC41EC61EC81ECA1ECC1ECE1ED01ED21ED41ED61ED81EDA1EDC1EDE1EE01EE21EE41EE61EE81EEA1EEC1EEE1EF01EF21EF41EF61EF81EFA1EFC1EFE1F08-1F0F1F18-1F1D1F28-1F2F1F38-1F3F1F48-1F4D1F591F5B1F5D1F5F1F68-1F6F1FB8-1FBB1FC8-1FCB1FD8-1FDB1FE8-1FEC1FF8-1FFB21022107210B-210D2110-211221152119-211D212421262128212A-212D2130-2133213E213F214521832C00-2C2E2C602C62-2C642C672C692C6B2C6D-2C702C722C752C7E-2C802C822C842C862C882C8A2C8C2C8E2C902C922C942C962C982C9A2C9C2C9E2CA02CA22CA42CA62CA82CAA2CAC2CAE2CB02CB22CB42CB62CB82CBA2CBC2CBE2CC02CC22CC42CC62CC82CCA2CCC2CCE2CD02CD22CD42CD62CD82CDA2CDC2CDE2CE02CE22CEB2CEDA640A642A644A646A648A64AA64CA64EA650A652A654A656A658A65AA65CA65EA662A664A666A668A66AA66CA680A682A684A686A688A68AA68CA68EA690A692A694A696A722A724A726A728A72AA72CA72EA732A734A736A738A73AA73CA73EA740A742A744A746A748A74AA74CA74EA750A752A754A756A758A75AA75CA75EA760A762A764A766A768A76AA76CA76EA779A77BA77DA77EA780A782A784A786A78BFF21-FF3A",Lt:"01C501C801CB01F21F88-1F8F1F98-1F9F1FA8-1FAF1FBC1FCC1FFC",Lm:"02B0-02C102C6-02D102E0-02E402EC02EE0374037A0559064006E506E607F407F507FA081A0824082809710E460EC610FC17D718431AA71C78-1C7D1D2C-1D611D781D9B-1DBF2071207F2090-20942C7D2D6F2E2F30053031-3035303B309D309E30FC-30FEA015A4F8-A4FDA60CA67FA717-A71FA770A788A9CFAA70AADDFF70FF9EFF9F",Lo:"01BB01C0-01C3029405D0-05EA05F0-05F20621-063F0641-064A066E066F0671-06D306D506EE06EF06FA-06FC06FF07100712-072F074D-07A507B107CA-07EA0800-08150904-0939093D09500958-096109720979-097F0985-098C098F09900993-09A809AA-09B009B209B6-09B909BD09CE09DC09DD09DF-09E109F009F10A05-0A0A0A0F0A100A13-0A280A2A-0A300A320A330A350A360A380A390A59-0A5C0A5E0A72-0A740A85-0A8D0A8F-0A910A93-0AA80AAA-0AB00AB20AB30AB5-0AB90ABD0AD00AE00AE10B05-0B0C0B0F0B100B13-0B280B2A-0B300B320B330B35-0B390B3D0B5C0B5D0B5F-0B610B710B830B85-0B8A0B8E-0B900B92-0B950B990B9A0B9C0B9E0B9F0BA30BA40BA8-0BAA0BAE-0BB90BD00C05-0C0C0C0E-0C100C12-0C280C2A-0C330C35-0C390C3D0C580C590C600C610C85-0C8C0C8E-0C900C92-0CA80CAA-0CB30CB5-0CB90CBD0CDE0CE00CE10D05-0D0C0D0E-0D100D12-0D280D2A-0D390D3D0D600D610D7A-0D7F0D85-0D960D9A-0DB10DB3-0DBB0DBD0DC0-0DC60E01-0E300E320E330E40-0E450E810E820E840E870E880E8A0E8D0E94-0E970E99-0E9F0EA1-0EA30EA50EA70EAA0EAB0EAD-0EB00EB20EB30EBD0EC0-0EC40EDC0EDD0F000F40-0F470F49-0F6C0F88-0F8B1000-102A103F1050-1055105A-105D106110651066106E-10701075-1081108E10D0-10FA1100-1248124A-124D1250-12561258125A-125D1260-1288128A-128D1290-12B012B2-12B512B8-12BE12C012C2-12C512C8-12D612D8-13101312-13151318-135A1380-138F13A0-13F41401-166C166F-167F1681-169A16A0-16EA1700-170C170E-17111720-17311740-17511760-176C176E-17701780-17B317DC1820-18421844-18771880-18A818AA18B0-18F51900-191C1950-196D1970-19741980-19AB19C1-19C71A00-1A161A20-1A541B05-1B331B45-1B4B1B83-1BA01BAE1BAF1C00-1C231C4D-1C4F1C5A-1C771CE9-1CEC1CEE-1CF12135-21382D30-2D652D80-2D962DA0-2DA62DA8-2DAE2DB0-2DB62DB8-2DBE2DC0-2DC62DC8-2DCE2DD0-2DD62DD8-2DDE3006303C3041-3096309F30A1-30FA30FF3105-312D3131-318E31A0-31B731F0-31FF3400-4DB54E00-9FCBA000-A014A016-A48CA4D0-A4F7A500-A60BA610-A61FA62AA62BA66EA6A0-A6E5A7FB-A801A803-A805A807-A80AA80C-A822A840-A873A882-A8B3A8F2-A8F7A8FBA90A-A925A930-A946A960-A97CA984-A9B2AA00-AA28AA40-AA42AA44-AA4BAA60-AA6FAA71-AA76AA7AAA80-AAAFAAB1AAB5AAB6AAB9-AABDAAC0AAC2AADBAADCABC0-ABE2AC00-D7A3D7B0-D7C6D7CB-D7FBF900-FA2DFA30-FA6DFA70-FAD9FB1DFB1F-FB28FB2A-FB36FB38-FB3CFB3EFB40FB41FB43FB44FB46-FBB1FBD3-FD3DFD50-FD8FFD92-FDC7FDF0-FDFBFE70-FE74FE76-FEFCFF66-FF6FFF71-FF9DFFA0-FFBEFFC2-FFC7FFCA-FFCFFFD2-FFD7FFDA-FFDC",M:"0300-036F0483-04890591-05BD05BF05C105C205C405C505C70610-061A064B-065E067006D6-06DC06DE-06E406E706E806EA-06ED07110730-074A07A6-07B007EB-07F30816-0819081B-08230825-08270829-082D0900-0903093C093E-094E0951-0955096209630981-098309BC09BE-09C409C709C809CB-09CD09D709E209E30A01-0A030A3C0A3E-0A420A470A480A4B-0A4D0A510A700A710A750A81-0A830ABC0ABE-0AC50AC7-0AC90ACB-0ACD0AE20AE30B01-0B030B3C0B3E-0B440B470B480B4B-0B4D0B560B570B620B630B820BBE-0BC20BC6-0BC80BCA-0BCD0BD70C01-0C030C3E-0C440C46-0C480C4A-0C4D0C550C560C620C630C820C830CBC0CBE-0CC40CC6-0CC80CCA-0CCD0CD50CD60CE20CE30D020D030D3E-0D440D46-0D480D4A-0D4D0D570D620D630D820D830DCA0DCF-0DD40DD60DD8-0DDF0DF20DF30E310E34-0E3A0E47-0E4E0EB10EB4-0EB90EBB0EBC0EC8-0ECD0F180F190F350F370F390F3E0F3F0F71-0F840F860F870F90-0F970F99-0FBC0FC6102B-103E1056-1059105E-10601062-10641067-106D1071-10741082-108D108F109A-109D135F1712-17141732-1734175217531772177317B6-17D317DD180B-180D18A91920-192B1930-193B19B0-19C019C819C91A17-1A1B1A55-1A5E1A60-1A7C1A7F1B00-1B041B34-1B441B6B-1B731B80-1B821BA1-1BAA1C24-1C371CD0-1CD21CD4-1CE81CED1CF21DC0-1DE61DFD-1DFF20D0-20F02CEF-2CF12DE0-2DFF302A-302F3099309AA66F-A672A67CA67DA6F0A6F1A802A806A80BA823-A827A880A881A8B4-A8C4A8E0-A8F1A926-A92DA947-A953A980-A983A9B3-A9C0AA29-AA36AA43AA4CAA4DAA7BAAB0AAB2-AAB4AAB7AAB8AABEAABFAAC1ABE3-ABEAABECABEDFB1EFE00-FE0FFE20-FE26",Mn:"0300-036F0483-04870591-05BD05BF05C105C205C405C505C70610-061A064B-065E067006D6-06DC06DF-06E406E706E806EA-06ED07110730-074A07A6-07B007EB-07F30816-0819081B-08230825-08270829-082D0900-0902093C0941-0948094D0951-095509620963098109BC09C1-09C409CD09E209E30A010A020A3C0A410A420A470A480A4B-0A4D0A510A700A710A750A810A820ABC0AC1-0AC50AC70AC80ACD0AE20AE30B010B3C0B3F0B41-0B440B4D0B560B620B630B820BC00BCD0C3E-0C400C46-0C480C4A-0C4D0C550C560C620C630CBC0CBF0CC60CCC0CCD0CE20CE30D41-0D440D4D0D620D630DCA0DD2-0DD40DD60E310E34-0E3A0E47-0E4E0EB10EB4-0EB90EBB0EBC0EC8-0ECD0F180F190F350F370F390F71-0F7E0F80-0F840F860F870F90-0F970F99-0FBC0FC6102D-10301032-10371039103A103D103E10581059105E-10601071-1074108210851086108D109D135F1712-17141732-1734175217531772177317B7-17BD17C617C9-17D317DD180B-180D18A91920-19221927192819321939-193B1A171A181A561A58-1A5E1A601A621A65-1A6C1A73-1A7C1A7F1B00-1B031B341B36-1B3A1B3C1B421B6B-1B731B801B811BA2-1BA51BA81BA91C2C-1C331C361C371CD0-1CD21CD4-1CE01CE2-1CE81CED1DC0-1DE61DFD-1DFF20D0-20DC20E120E5-20F02CEF-2CF12DE0-2DFF302A-302F3099309AA66FA67CA67DA6F0A6F1A802A806A80BA825A826A8C4A8E0-A8F1A926-A92DA947-A951A980-A982A9B3A9B6-A9B9A9BCAA29-AA2EAA31AA32AA35AA36AA43AA4CAAB0AAB2-AAB4AAB7AAB8AABEAABFAAC1ABE5ABE8ABEDFB1EFE00-FE0FFE20-FE26",Mc:"0903093E-09400949-094C094E0982098309BE-09C009C709C809CB09CC09D70A030A3E-0A400A830ABE-0AC00AC90ACB0ACC0B020B030B3E0B400B470B480B4B0B4C0B570BBE0BBF0BC10BC20BC6-0BC80BCA-0BCC0BD70C01-0C030C41-0C440C820C830CBE0CC0-0CC40CC70CC80CCA0CCB0CD50CD60D020D030D3E-0D400D46-0D480D4A-0D4C0D570D820D830DCF-0DD10DD8-0DDF0DF20DF30F3E0F3F0F7F102B102C10311038103B103C105610571062-10641067-106D108310841087-108C108F109A-109C17B617BE-17C517C717C81923-19261929-192B193019311933-193819B0-19C019C819C91A19-1A1B1A551A571A611A631A641A6D-1A721B041B351B3B1B3D-1B411B431B441B821BA11BA61BA71BAA1C24-1C2B1C341C351CE11CF2A823A824A827A880A881A8B4-A8C3A952A953A983A9B4A9B5A9BAA9BBA9BD-A9C0AA2FAA30AA33AA34AA4DAA7BABE3ABE4ABE6ABE7ABE9ABEAABEC",Me:"0488048906DE20DD-20E020E2-20E4A670-A672",N:"0030-003900B200B300B900BC-00BE0660-066906F0-06F907C0-07C90966-096F09E6-09EF09F4-09F90A66-0A6F0AE6-0AEF0B66-0B6F0BE6-0BF20C66-0C6F0C78-0C7E0CE6-0CEF0D66-0D750E50-0E590ED0-0ED90F20-0F331040-10491090-10991369-137C16EE-16F017E0-17E917F0-17F91810-18191946-194F19D0-19DA1A80-1A891A90-1A991B50-1B591BB0-1BB91C40-1C491C50-1C5920702074-20792080-20892150-21822185-21892460-249B24EA-24FF2776-27932CFD30073021-30293038-303A3192-31953220-32293251-325F3280-328932B1-32BFA620-A629A6E6-A6EFA830-A835A8D0-A8D9A900-A909A9D0-A9D9AA50-AA59ABF0-ABF9FF10-FF19",Nd:"0030-00390660-066906F0-06F907C0-07C90966-096F09E6-09EF0A66-0A6F0AE6-0AEF0B66-0B6F0BE6-0BEF0C66-0C6F0CE6-0CEF0D66-0D6F0E50-0E590ED0-0ED90F20-0F291040-10491090-109917E0-17E91810-18191946-194F19D0-19DA1A80-1A891A90-1A991B50-1B591BB0-1BB91C40-1C491C50-1C59A620-A629A8D0-A8D9A900-A909A9D0-A9D9AA50-AA59ABF0-ABF9FF10-FF19",Nl:"16EE-16F02160-21822185-218830073021-30293038-303AA6E6-A6EF",No:"00B200B300B900BC-00BE09F4-09F90BF0-0BF20C78-0C7E0D70-0D750F2A-0F331369-137C17F0-17F920702074-20792080-20892150-215F21892460-249B24EA-24FF2776-27932CFD3192-31953220-32293251-325F3280-328932B1-32BFA830-A835",P:"0021-00230025-002A002C-002F003A003B003F0040005B-005D005F007B007D00A100AB00B700BB00BF037E0387055A-055F0589058A05BE05C005C305C605F305F40609060A060C060D061B061E061F066A-066D06D40700-070D07F7-07F90830-083E0964096509700DF40E4F0E5A0E5B0F04-0F120F3A-0F3D0F850FD0-0FD4104A-104F10FB1361-13681400166D166E169B169C16EB-16ED1735173617D4-17D617D8-17DA1800-180A1944194519DE19DF1A1E1A1F1AA0-1AA61AA8-1AAD1B5A-1B601C3B-1C3F1C7E1C7F1CD32010-20272030-20432045-20512053-205E207D207E208D208E2329232A2768-277527C527C627E6-27EF2983-299829D8-29DB29FC29FD2CF9-2CFC2CFE2CFF2E00-2E2E2E302E313001-30033008-30113014-301F3030303D30A030FBA4FEA4FFA60D-A60FA673A67EA6F2-A6F7A874-A877A8CEA8CFA8F8-A8FAA92EA92FA95FA9C1-A9CDA9DEA9DFAA5C-AA5FAADEAADFABEBFD3EFD3FFE10-FE19FE30-FE52FE54-FE61FE63FE68FE6AFE6BFF01-FF03FF05-FF0AFF0C-FF0FFF1AFF1BFF1FFF20FF3B-FF3DFF3FFF5BFF5DFF5F-FF65",Pd:"002D058A05BE140018062010-20152E172E1A301C303030A0FE31FE32FE58FE63FF0D",Ps:"0028005B007B0F3A0F3C169B201A201E2045207D208D23292768276A276C276E27702772277427C527E627E827EA27EC27EE2983298529872989298B298D298F299129932995299729D829DA29FC2E222E242E262E283008300A300C300E3010301430163018301A301DFD3EFE17FE35FE37FE39FE3BFE3DFE3FFE41FE43FE47FE59FE5BFE5DFF08FF3BFF5BFF5FFF62",Pe:"0029005D007D0F3B0F3D169C2046207E208E232A2769276B276D276F27712773277527C627E727E927EB27ED27EF298429862988298A298C298E2990299229942996299829D929DB29FD2E232E252E272E293009300B300D300F3011301530173019301B301E301FFD3FFE18FE36FE38FE3AFE3CFE3EFE40FE42FE44FE48FE5AFE5CFE5EFF09FF3DFF5DFF60FF63",Pi:"00AB2018201B201C201F20392E022E042E092E0C2E1C2E20",Pf:"00BB2019201D203A2E032E052E0A2E0D2E1D2E21",Pc:"005F203F20402054FE33FE34FE4D-FE4FFF3F",Po:"0021-00230025-0027002A002C002E002F003A003B003F0040005C00A100B700BF037E0387055A-055F058905C005C305C605F305F40609060A060C060D061B061E061F066A-066D06D40700-070D07F7-07F90830-083E0964096509700DF40E4F0E5A0E5B0F04-0F120F850FD0-0FD4104A-104F10FB1361-1368166D166E16EB-16ED1735173617D4-17D617D8-17DA1800-18051807-180A1944194519DE19DF1A1E1A1F1AA0-1AA61AA8-1AAD1B5A-1B601C3B-1C3F1C7E1C7F1CD3201620172020-20272030-2038203B-203E2041-20432047-205120532055-205E2CF9-2CFC2CFE2CFF2E002E012E06-2E082E0B2E0E-2E162E182E192E1B2E1E2E1F2E2A-2E2E2E302E313001-3003303D30FBA4FEA4FFA60D-A60FA673A67EA6F2-A6F7A874-A877A8CEA8CFA8F8-A8FAA92EA92FA95FA9C1-A9CDA9DEA9DFAA5C-AA5FAADEAADFABEBFE10-FE16FE19FE30FE45FE46FE49-FE4CFE50-FE52FE54-FE57FE5F-FE61FE68FE6AFE6BFF01-FF03FF05-FF07FF0AFF0CFF0EFF0FFF1AFF1BFF1FFF20FF3CFF61FF64FF65",S:"0024002B003C-003E005E0060007C007E00A2-00A900AC00AE-00B100B400B600B800D700F702C2-02C502D2-02DF02E5-02EB02ED02EF-02FF03750384038503F604820606-0608060B060E060F06E906FD06FE07F609F209F309FA09FB0AF10B700BF3-0BFA0C7F0CF10CF20D790E3F0F01-0F030F13-0F170F1A-0F1F0F340F360F380FBE-0FC50FC7-0FCC0FCE0FCF0FD5-0FD8109E109F13601390-139917DB194019E0-19FF1B61-1B6A1B74-1B7C1FBD1FBF-1FC11FCD-1FCF1FDD-1FDF1FED-1FEF1FFD1FFE20442052207A-207C208A-208C20A0-20B8210021012103-21062108210921142116-2118211E-2123212521272129212E213A213B2140-2144214A-214D214F2190-2328232B-23E82400-24262440-244A249C-24E92500-26CD26CF-26E126E326E8-26FF2701-27042706-2709270C-27272729-274B274D274F-27522756-275E2761-276727942798-27AF27B1-27BE27C0-27C427C7-27CA27CC27D0-27E527F0-29822999-29D729DC-29FB29FE-2B4C2B50-2B592CE5-2CEA2E80-2E992E9B-2EF32F00-2FD52FF0-2FFB300430123013302030363037303E303F309B309C319031913196-319F31C0-31E33200-321E322A-32503260-327F328A-32B032C0-32FE3300-33FF4DC0-4DFFA490-A4C6A700-A716A720A721A789A78AA828-A82BA836-A839AA77-AA79FB29FDFCFDFDFE62FE64-FE66FE69FF04FF0BFF1C-FF1EFF3EFF40FF5CFF5EFFE0-FFE6FFE8-FFEEFFFCFFFD",Sm:"002B003C-003E007C007E00AC00B100D700F703F60606-060820442052207A-207C208A-208C2140-2144214B2190-2194219A219B21A021A321A621AE21CE21CF21D221D421F4-22FF2308-230B23202321237C239B-23B323DC-23E125B725C125F8-25FF266F27C0-27C427C7-27CA27CC27D0-27E527F0-27FF2900-29822999-29D729DC-29FB29FE-2AFF2B30-2B442B47-2B4CFB29FE62FE64-FE66FF0BFF1C-FF1EFF5CFF5EFFE2FFE9-FFEC",Sc:"002400A2-00A5060B09F209F309FB0AF10BF90E3F17DB20A0-20B8A838FDFCFE69FF04FFE0FFE1FFE5FFE6",Sk:"005E006000A800AF00B400B802C2-02C502D2-02DF02E5-02EB02ED02EF-02FF0375038403851FBD1FBF-1FC11FCD-1FCF1FDD-1FDF1FED-1FEF1FFD1FFE309B309CA700-A716A720A721A789A78AFF3EFF40FFE3",So:"00A600A700A900AE00B000B60482060E060F06E906FD06FE07F609FA0B700BF3-0BF80BFA0C7F0CF10CF20D790F01-0F030F13-0F170F1A-0F1F0F340F360F380FBE-0FC50FC7-0FCC0FCE0FCF0FD5-0FD8109E109F13601390-1399194019E0-19FF1B61-1B6A1B74-1B7C210021012103-21062108210921142116-2118211E-2123212521272129212E213A213B214A214C214D214F2195-2199219C-219F21A121A221A421A521A7-21AD21AF-21CD21D021D121D321D5-21F32300-2307230C-231F2322-2328232B-237B237D-239A23B4-23DB23E2-23E82400-24262440-244A249C-24E92500-25B625B8-25C025C2-25F72600-266E2670-26CD26CF-26E126E326E8-26FF2701-27042706-2709270C-27272729-274B274D274F-27522756-275E2761-276727942798-27AF27B1-27BE2800-28FF2B00-2B2F2B452B462B50-2B592CE5-2CEA2E80-2E992E9B-2EF32F00-2FD52FF0-2FFB300430123013302030363037303E303F319031913196-319F31C0-31E33200-321E322A-32503260-327F328A-32B032C0-32FE3300-33FF4DC0-4DFFA490-A4C6A828-A82BA836A837A839AA77-AA79FDFDFFE4FFE8FFEDFFEEFFFCFFFD",Z:"002000A01680180E2000-200A20282029202F205F3000",Zs:"002000A01680180E2000-200A202F205F3000",Zl:"2028",Zp:"2029",C:"0000-001F007F-009F00AD03780379037F-0383038B038D03A20526-05300557055805600588058B-059005C8-05CF05EB-05EF05F5-0605061C061D0620065F06DD070E070F074B074C07B2-07BF07FB-07FF082E082F083F-08FF093A093B094F095609570973-097809800984098D098E0991099209A909B109B3-09B509BA09BB09C509C609C909CA09CF-09D609D8-09DB09DE09E409E509FC-0A000A040A0B-0A0E0A110A120A290A310A340A370A3A0A3B0A3D0A43-0A460A490A4A0A4E-0A500A52-0A580A5D0A5F-0A650A76-0A800A840A8E0A920AA90AB10AB40ABA0ABB0AC60ACA0ACE0ACF0AD1-0ADF0AE40AE50AF00AF2-0B000B040B0D0B0E0B110B120B290B310B340B3A0B3B0B450B460B490B4A0B4E-0B550B58-0B5B0B5E0B640B650B72-0B810B840B8B-0B8D0B910B96-0B980B9B0B9D0BA0-0BA20BA5-0BA70BAB-0BAD0BBA-0BBD0BC3-0BC50BC90BCE0BCF0BD1-0BD60BD8-0BE50BFB-0C000C040C0D0C110C290C340C3A-0C3C0C450C490C4E-0C540C570C5A-0C5F0C640C650C70-0C770C800C810C840C8D0C910CA90CB40CBA0CBB0CC50CC90CCE-0CD40CD7-0CDD0CDF0CE40CE50CF00CF3-0D010D040D0D0D110D290D3A-0D3C0D450D490D4E-0D560D58-0D5F0D640D650D76-0D780D800D810D840D97-0D990DB20DBC0DBE0DBF0DC7-0DC90DCB-0DCE0DD50DD70DE0-0DF10DF5-0E000E3B-0E3E0E5C-0E800E830E850E860E890E8B0E8C0E8E-0E930E980EA00EA40EA60EA80EA90EAC0EBA0EBE0EBF0EC50EC70ECE0ECF0EDA0EDB0EDE-0EFF0F480F6D-0F700F8C-0F8F0F980FBD0FCD0FD9-0FFF10C6-10CF10FD-10FF1249124E124F12571259125E125F1289128E128F12B112B612B712BF12C112C612C712D7131113161317135B-135E137D-137F139A-139F13F5-13FF169D-169F16F1-16FF170D1715-171F1737-173F1754-175F176D17711774-177F17B417B517DE17DF17EA-17EF17FA-17FF180F181A-181F1878-187F18AB-18AF18F6-18FF191D-191F192C-192F193C-193F1941-1943196E196F1975-197F19AC-19AF19CA-19CF19DB-19DD1A1C1A1D1A5F1A7D1A7E1A8A-1A8F1A9A-1A9F1AAE-1AFF1B4C-1B4F1B7D-1B7F1BAB-1BAD1BBA-1BFF1C38-1C3A1C4A-1C4C1C80-1CCF1CF3-1CFF1DE7-1DFC1F161F171F1E1F1F1F461F471F4E1F4F1F581F5A1F5C1F5E1F7E1F7F1FB51FC51FD41FD51FDC1FF01FF11FF51FFF200B-200F202A-202E2060-206F20722073208F2095-209F20B9-20CF20F1-20FF218A-218F23E9-23FF2427-243F244B-245F26CE26E226E4-26E727002705270A270B2728274C274E2753-2755275F27602795-279727B027BF27CB27CD-27CF2B4D-2B4F2B5A-2BFF2C2F2C5F2CF2-2CF82D26-2D2F2D66-2D6E2D70-2D7F2D97-2D9F2DA72DAF2DB72DBF2DC72DCF2DD72DDF2E32-2E7F2E9A2EF4-2EFF2FD6-2FEF2FFC-2FFF3040309730983100-3104312E-3130318F31B8-31BF31E4-31EF321F32FF4DB6-4DBF9FCC-9FFFA48D-A48FA4C7-A4CFA62C-A63FA660A661A674-A67BA698-A69FA6F8-A6FFA78D-A7FAA82C-A82FA83A-A83FA878-A87FA8C5-A8CDA8DA-A8DFA8FC-A8FFA954-A95EA97D-A97FA9CEA9DA-A9DDA9E0-A9FFAA37-AA3FAA4EAA4FAA5AAA5BAA7C-AA7FAAC3-AADAAAE0-ABBFABEEABEFABFA-ABFFD7A4-D7AFD7C7-D7CAD7FC-F8FFFA2EFA2FFA6EFA6FFADA-FAFFFB07-FB12FB18-FB1CFB37FB3DFB3FFB42FB45FBB2-FBD2FD40-FD4FFD90FD91FDC8-FDEFFDFEFDFFFE1A-FE1FFE27-FE2FFE53FE67FE6C-FE6FFE75FEFD-FF00FFBF-FFC1FFC8FFC9FFD0FFD1FFD8FFD9FFDD-FFDFFFE7FFEF-FFFBFFFEFFFF",Cc:"0000-001F007F-009F",Cf:"00AD0600-060306DD070F17B417B5200B-200F202A-202E2060-2064206A-206FFEFFFFF9-FFFB",Co:"E000-F8FF",Cs:"D800-DFFF",Cn:"03780379037F-0383038B038D03A20526-05300557055805600588058B-059005C8-05CF05EB-05EF05F5-05FF06040605061C061D0620065F070E074B074C07B2-07BF07FB-07FF082E082F083F-08FF093A093B094F095609570973-097809800984098D098E0991099209A909B109B3-09B509BA09BB09C509C609C909CA09CF-09D609D8-09DB09DE09E409E509FC-0A000A040A0B-0A0E0A110A120A290A310A340A370A3A0A3B0A3D0A43-0A460A490A4A0A4E-0A500A52-0A580A5D0A5F-0A650A76-0A800A840A8E0A920AA90AB10AB40ABA0ABB0AC60ACA0ACE0ACF0AD1-0ADF0AE40AE50AF00AF2-0B000B040B0D0B0E0B110B120B290B310B340B3A0B3B0B450B460B490B4A0B4E-0B550B58-0B5B0B5E0B640B650B72-0B810B840B8B-0B8D0B910B96-0B980B9B0B9D0BA0-0BA20BA5-0BA70BAB-0BAD0BBA-0BBD0BC3-0BC50BC90BCE0BCF0BD1-0BD60BD8-0BE50BFB-0C000C040C0D0C110C290C340C3A-0C3C0C450C490C4E-0C540C570C5A-0C5F0C640C650C70-0C770C800C810C840C8D0C910CA90CB40CBA0CBB0CC50CC90CCE-0CD40CD7-0CDD0CDF0CE40CE50CF00CF3-0D010D040D0D0D110D290D3A-0D3C0D450D490D4E-0D560D58-0D5F0D640D650D76-0D780D800D810D840D97-0D990DB20DBC0DBE0DBF0DC7-0DC90DCB-0DCE0DD50DD70DE0-0DF10DF5-0E000E3B-0E3E0E5C-0E800E830E850E860E890E8B0E8C0E8E-0E930E980EA00EA40EA60EA80EA90EAC0EBA0EBE0EBF0EC50EC70ECE0ECF0EDA0EDB0EDE-0EFF0F480F6D-0F700F8C-0F8F0F980FBD0FCD0FD9-0FFF10C6-10CF10FD-10FF1249124E124F12571259125E125F1289128E128F12B112B612B712BF12C112C612C712D7131113161317135B-135E137D-137F139A-139F13F5-13FF169D-169F16F1-16FF170D1715-171F1737-173F1754-175F176D17711774-177F17DE17DF17EA-17EF17FA-17FF180F181A-181F1878-187F18AB-18AF18F6-18FF191D-191F192C-192F193C-193F1941-1943196E196F1975-197F19AC-19AF19CA-19CF19DB-19DD1A1C1A1D1A5F1A7D1A7E1A8A-1A8F1A9A-1A9F1AAE-1AFF1B4C-1B4F1B7D-1B7F1BAB-1BAD1BBA-1BFF1C38-1C3A1C4A-1C4C1C80-1CCF1CF3-1CFF1DE7-1DFC1F161F171F1E1F1F1F461F471F4E1F4F1F581F5A1F5C1F5E1F7E1F7F1FB51FC51FD41FD51FDC1FF01FF11FF51FFF2065-206920722073208F2095-209F20B9-20CF20F1-20FF218A-218F23E9-23FF2427-243F244B-245F26CE26E226E4-26E727002705270A270B2728274C274E2753-2755275F27602795-279727B027BF27CB27CD-27CF2B4D-2B4F2B5A-2BFF2C2F2C5F2CF2-2CF82D26-2D2F2D66-2D6E2D70-2D7F2D97-2D9F2DA72DAF2DB72DBF2DC72DCF2DD72DDF2E32-2E7F2E9A2EF4-2EFF2FD6-2FEF2FFC-2FFF3040309730983100-3104312E-3130318F31B8-31BF31E4-31EF321F32FF4DB6-4DBF9FCC-9FFFA48D-A48FA4C7-A4CFA62C-A63FA660A661A674-A67BA698-A69FA6F8-A6FFA78D-A7FAA82C-A82FA83A-A83FA878-A87FA8C5-A8CDA8DA-A8DFA8FC-A8FFA954-A95EA97D-A97FA9CEA9DA-A9DDA9E0-A9FFAA37-AA3FAA4EAA4FAA5AAA5BAA7C-AA7FAAC3-AADAAAE0-ABBFABEEABEFABFA-ABFFD7A4-D7AFD7C7-D7CAD7FC-D7FFFA2EFA2FFA6EFA6FFADA-FAFFFB07-FB12FB18-FB1CFB37FB3DFB3FFB42FB45FBB2-FBD2FD40-FD4FFD90FD91FDC8-FDEFFDFEFDFFFE1A-FE1FFE27-FE2FFE53FE67FE6C-FE6FFE75FEFDFEFEFF00FFBF-FFC1FFC8FFC9FFD0FFD1FFD8FFD9FFDD-FFDFFFE7FFEF-FFF8FFFEFFFF"})}),define("ace/token_iterator",["require","exports","module"],function(e,t,n){var r=function(e,t,n){this.$session=e,this.$row=t,this.$rowTokens=e.getTokens(t);var r=e.getTokenAt(t,n);this.$tokenIndex=r?r.index:-1};(function(){this.stepBackward=function(){this.$tokenIndex-=1;while(this.$tokenIndex<0){this.$row-=1;if(this.$row<0)return this.$row=0,null;this.$rowTokens=this.$session.getTokens(this.$row),this.$tokenIndex=this.$rowTokens.length-1}return this.$rowTokens[this.$tokenIndex]},this.stepForward=function(){this.$tokenIndex+=1;var e;while(this.$tokenIndex>=this.$rowTokens.length){this.$row+=1,e||(e=this.$session.getLength());if(this.$row>=e)return this.$row=e-1,null;this.$rowTokens=this.$session.getTokens(this.$row),this.$tokenIndex=0}return this.$rowTokens[this.$tokenIndex]},this.getCurrentToken=function(){return this.$rowTokens[this.$tokenIndex]},this.getCurrentTokenRow=function(){return this.$row},this.getCurrentTokenColumn=function(){var e=this.$rowTokens,t=this.$tokenIndex,n=e[t].start;if(n!==undefined)return n;n=0;while(t>0)t-=1,n+=e[t].value.length;return n}}).call(r.prototype),t.TokenIterator=r}),define("ace/mode/text_highlight_rules",["require","exports","module","ace/lib/lang"],function(e,t,n){var r=e("../lib/lang"),i=function(){this.$rules={start:[{token:"empty_line",regex:"^$"},{defaultToken:"text"}]}};(function(){this.addRules=function(e,t){if(!t){for(var n in e)this.$rules[n]=e[n];return}for(var n in e){var r=e[n];for(var i=0;i<r.length;i++){var s=r[i];s.next&&(typeof s.next!="string"?s.nextState&&s.nextState.indexOf(t)!==0&&(s.nextState=t+s.nextState):s.next.indexOf(t)!==0&&(s.next=t+s.next))}this.$rules[t+n]=r}},this.getRules=function(){return this.$rules},this.embedRules=function(e,t,n,i,s){var o=typeof e=="function"?(new e).getRules():e;if(i)for(var u=0;u<i.length;u++)i[u]=t+i[u];else{i=[];for(var a in o)i.push(t+a)}this.addRules(o,t);if(n){var f=Array.prototype[s?"push":"unshift"];for(var u=0;u<i.length;u++)f.apply(this.$rules[i[u]],r.deepCopy(n))}this.$embeds||(this.$embeds=[]),this.$embeds.push(t)},this.getEmbeds=function(){return this.$embeds};var e=function(e,t){return(e!="start"||t.length)&&t.unshift(this.nextState,e),this.nextState},t=function(e,t){return t.shift(),t.shift()||"start"};this.normalizeRules=function(){function i(s){var o=r[s];o.processed=!0;for(var u=0;u<o.length;u++){var a=o[u];!a.regex&&a.start&&(a.regex=a.start,a.next||(a.next=[]),a.next.push({defaultToken:a.token},{token:a.token+".end",regex:a.end||a.start,next:"pop"}),a.token=a.token+".start",a.push=!0);var f=a.next||a.push;if(f&&Array.isArray(f)){var l=a.stateName;l||(l=a.token,typeof l!="string"&&(l=l[0]||""),r[l]&&(l+=n++)),r[l]=f,a.next=l,i(l)}else f=="pop"&&(a.next=t);a.push&&(a.nextState=a.next||a.push,a.next=e,delete a.push);if(a.rules)for(var c in a.rules)r[c]?r[c].push&&r[c].push.apply(r[c],a.rules[c]):r[c]=a.rules[c];if(a.include||typeof a=="string")var h=a.include||a,p=r[h];else Array.isArray(a)&&(p=a);if(p){var d=[u,1].concat(p);a.noEscape&&(d=d.filter(function(e){return!e.next})),o.splice.apply(o,d),u--,p=null}a.keywordMap&&(a.token=this.createKeywordMapper(a.keywordMap,a.defaultToken||"text",a.caseInsensitive),delete a.defaultToken)}}var n=0,r=this.$rules;Object.keys(r).forEach(i,this)},this.createKeywordMapper=function(e,t,n,r){var i=Object.create(null);return Object.keys(e).forEach(function(t){var s=e[t];n&&(s=s.toLowerCase());var o=s.split(r||"|");for(var u=o.length;u--;)i[o[u]]=t}),Object.getPrototypeOf(i)&&(i.__proto__=null),this.$keywordList=Object.keys(i),e=null,n?function(e){return i[e.toLowerCase()]||t}:function(e){return i[e]||t}},this.getKeywords=function(){return this.$keywords}}).call(i.prototype),t.TextHighlightRules=i}),define("ace/anchor",["require","exports","module","ace/lib/oop","ace/lib/event_emitter"],function(e,t,n){var r=e("./lib/oop"),i=e("./lib/event_emitter").EventEmitter,s=t.Anchor=function(e,t,n){this.$onChange=this.onChange.bind(this),this.attach(e),typeof n=="undefined"?this.setPosition(t.row,t.column):this.setPosition(t,n)};(function(){r.implement(this,i),this.getPosition=function(){return this.$clipPositionToDocument(this.row,this.column)},this.getDocument=function(){return this.document},this.$insertRight=!1,this.onChange=function(e){var t=e.data,n=t.range;if(n.start.row==n.end.row&&n.start.row!=this.row)return;if(n.start.row>this.row)return;if(n.start.row==this.row&&n.start.column>this.column)return;var r=this.row,i=this.column,s=n.start,o=n.end;if(t.action==="insertText")if(s.row===r&&s.column<=i){if(s.column!==i||!this.$insertRight)s.row===o.row?i+=o.column-s.column:(i-=s.column,r+=o.row-s.row)}else s.row!==o.row&&s.row<r&&(r+=o.row-s.row);else t.action==="insertLines"?s.row<=r&&(r+=o.row-s.row):t.action==="removeText"?s.row===r&&s.column<i?o.column>=i?i=s.column:i=Math.max(0,i-(o.column-s.column)):s.row!==o.row&&s.row<r?(o.row===r&&(i=Math.max(0,i-o.column)+s.column),r-=o.row-s.row):o.row===r&&(r-=o.row-s.row,i=Math.max(0,i-o.column)+s.column):t.action=="removeLines"&&s.row<=r&&(o.row<=r?r-=o.row-s.row:(r=s.row,i=0));this.setPosition(r,i,!0)},this.setPosition=function(e,t,n){var r;n?r={row:e,column:t}:r=this.$clipPositionToDocument(e,t);if(this.row==r.row&&this.column==r.column)return;var i={row:this.row,column:this.column};this.row=r.row,this.column=r.column,this._signal("change",{old:i,value:r})},this.detach=function(){this.document.removeEventListener("change",this.$onChange)},this.attach=function(e){this.document=e||this.document,this.document.on("change",this.$onChange)},this.$clipPositionToDocument=function(e,t){var n={};return e>=this.document.getLength()?(n.row=Math.max(0,this.document.getLength()-1),n.column=this.document.getLine(n.row).length):e<0?(n.row=0,n.column=0):(n.row=e,n.column=Math.min(this.document.getLine(n.row).length,Math.max(0,t))),t<0&&(n.column=0),n}}).call(s.prototype)}),define("ace/background_tokenizer",["require","exports","module","ace/lib/oop","ace/lib/event_emitter"],function(e,t,n){var r=e("./lib/oop"),i=e("./lib/event_emitter").EventEmitter,s=function(e,t){this.running=!1,this.lines=[],this.states=[],this.currentLine=0,this.tokenizer=e;var n=this;this.$worker=function(){if(!n.running)return;var e=new Date,t=n.currentLine,r=-1,i=n.doc;while(n.lines[t])t++;var s=t,o=i.getLength(),u=0;n.running=!1;while(t<o){n.$tokenizeRow(t),r=t;do t++;while(n.lines[t]);u++;if(u%5==0&&new Date-e>20){n.running=setTimeout(n.$worker,20),n.currentLine=t;return}}n.currentLine=t,s<=r&&n.fireUpdateEvent(s,r)}};(function(){r.implement(this,i),this.setTokenizer=function(e){this.tokenizer=e,this.lines=[],this.states=[],this.start(0)},this.setDocument=function(e){this.doc=e,this.lines=[],this.states=[],this.stop()},this.fireUpdateEvent=function(e,t){var n={first:e,last:t};this._signal("update",{data:n})},this.start=function(e){this.currentLine=Math.min(e||0,this.currentLine,this.doc.getLength()),this.lines.splice(this.currentLine,this.lines.length),this.states.splice(this.currentLine,this.states.length),this.stop(),this.running=setTimeout(this.$worker,700)},this.scheduleStart=function(){this.running||(this.running=setTimeout(this.$worker,700))},this.$updateOnChange=function(e){var t=e.range,n=t.start.row,r=t.end.row-n;if(r===0)this.lines[n]=null;else if(e.action=="removeText"||e.action=="removeLines")this.lines.splice(n,r+1,null),this.states.splice(n,r+1,null);else{var i=Array(r+1);i.unshift(n,1),this.lines.splice.apply(this.lines,i),this.states.splice.apply(this.states,i)}this.currentLine=Math.min(n,this.currentLine,this.doc.getLength()),this.stop()},this.stop=function(){this.running&&clearTimeout(this.running),this.running=!1},this.getTokens=function(e){return this.lines[e]||this.$tokenizeRow(e)},this.getState=function(e){return this.currentLine==e&&this.$tokenizeRow(e),this.states[e]||"start"},this.$tokenizeRow=function(e){var t=this.doc.getLine(e),n=this.states[e-1],r=this.tokenizer.getLineTokens(t,n,e);return this.states[e]+""!=r.state+""?(this.states[e]=r.state,this.lines[e+1]=null,this.currentLine>e+1&&(this.currentLine=e+1)):this.currentLine==e&&(this.currentLine=e+1),this.lines[e]=r.tokens}}).call(s.prototype),t.BackgroundTokenizer=s}),define("ace/search_highlight",["require","exports","module","ace/lib/lang","ace/lib/oop","ace/range"],function(e,t,n){var r=e("./lib/lang"),i=e("./lib/oop"),s=e("./range").Range,o=function(e,t,n){this.setRegexp(e),this.clazz=t,this.type=n||"text"};(function(){this.MAX_RANGES=500,this.setRegexp=function(e){if(this.regExp+""==e+"")return;this.regExp=e,this.cache=[]},this.update=function(e,t,n,i){if(!this.regExp)return;var o=i.firstRow,u=i.lastRow;for(var a=o;a<=u;a++){var f=this.cache[a];f==null&&(f=r.getMatchOffsets(n.getLine(a),this.regExp),f.length>this.MAX_RANGES&&(f=f.slice(0,this.MAX_RANGES)),f=f.map(function(e){return new s(a,e.offset,a,e.offset+e.length)}),this.cache[a]=f.length?f:"");for(var l=f.length;l--;)t.drawSingleLineMarker(e,f[l].toScreenRange(n),this.clazz,i)}}}).call(o.prototype),t.SearchHighlight=o}),define("ace/edit_session/folding",["require","exports","module","ace/range","ace/edit_session/fold_line","ace/edit_session/fold","ace/token_iterator"],function(e,t,n){function u(){this.getFoldAt=function(e,t,n){var r=this.getFoldLine(e);if(!r)return null;var i=r.folds;for(var s=0;s<i.length;s++){var o=i[s];if(o.range.contains(e,t)){if(n==1&&o.range.isEnd(e,t))continue;if(n==-1&&o.range.isStart(e,t))continue;return o}}},this.getFoldsInRange=function(e){var t=e.start,n=e.end,r=this.$foldData,i=[];t.column+=1,n.column-=1;for(var s=0;s<r.length;s++){var o=r[s].range.compareRange(e);if(o==2)continue;if(o==-2)break;var u=r[s].folds;for(var a=0;a<u.length;a++){var f=u[a];o=f.range.compareRange(e);if(o==-2)break;if(o==2)continue;if(o==42)break;i.push(f)}}return t.column-=1,n.column+=1,i},this.getFoldsInRangeList=function(e){if(Array.isArray(e)){var t=[];e.forEach(function(e){t=t.concat(this.getFoldsInRange(e))},this)}else var t=this.getFoldsInRange(e);return t},this.getAllFolds=function(){var e=[],t=this.$foldData;for(var n=0;n<t.length;n++)for(var r=0;r<t[n].folds.length;r++)e.push(t[n].folds[r]);return e},this.getFoldStringAt=function(e,t,n,r){r=r||this.getFoldLine(e);if(!r)return null;var i={end:{column:0}},s,o;for(var u=0;u<r.folds.length;u++){o=r.folds[u];var a=o.range.compareEnd(e,t);if(a==-1){s=this.getLine(o.start.row).substring(i.end.column,o.start.column);break}if(a===0)return null;i=o}return s||(s=this.getLine(o.start.row).substring(i.end.column)),n==-1?s.substring(0,t-i.end.column):n==1?s.substring(t-i.end.column):s},this.getFoldLine=function(e,t){var n=this.$foldData,r=0;t&&(r=n.indexOf(t)),r==-1&&(r=0);for(r;r<n.length;r++){var i=n[r];if(i.start.row<=e&&i.end.row>=e)return i;if(i.end.row>e)return null}return null},this.getNextFoldLine=function(e,t){var n=this.$foldData,r=0;t&&(r=n.indexOf(t)),r==-1&&(r=0);for(r;r<n.length;r++){var i=n[r];if(i.end.row>=e)return i}return null},this.getFoldedRowCount=function(e,t){var n=this.$foldData,r=t-e+1;for(var i=0;i<n.length;i++){var s=n[i],o=s.end.row,u=s.start.row;if(o>=t){u<t&&(u>=e?r-=t-u:r=0);break}o>=e&&(u>=e?r-=o-u:r-=o-e+1)}return r},this.$addFoldLine=function(e){return this.$foldData.push(e),this.$foldData.sort(function(e,t){return e.start.row-t.start.row}),e},this.addFold=function(e,t){var n=this.$foldData,r=!1,o;e instanceof s?o=e:(o=new s(t,e),o.collapseChildren=t.collapseChildren),this.$clipRangeToDocument(o.range);var u=o.start.row,a=o.start.column,f=o.end.row,l=o.end.column;if(u<f||u==f&&a<=l-2){var c=this.getFoldAt(u,a,1),h=this.getFoldAt(f,l,-1);if(c&&h==c)return c.addSubFold(o);if(c&&!c.range.isStart(u,a)||h&&!h.range.isEnd(f,l))throw new Error("A fold can't intersect already existing fold"+o.range+c.range);var p=this.getFoldsInRange(o.range);p.length>0&&(this.removeFolds(p),p.forEach(function(e){o.addSubFold(e)}));for(var d=0;d<n.length;d++){var v=n[d];if(f==v.start.row){v.addFold(o),r=!0;break}if(u==v.end.row){v.addFold(o),r=!0;if(!o.sameRow){var m=n[d+1];if(m&&m.start.row==f){v.merge(m);break}}break}if(f<=v.start.row)break}return r||(v=this.$addFoldLine(new i(this.$foldData,o))),this.$useWrapMode?this.$updateWrapData(v.start.row,v.start.row):this.$updateRowLengthCache(v.start.row,v.start.row),this.$modified=!0,this._emit("changeFold",{data:o,action:"add"}),o}throw new Error("The range has to be at least 2 characters width")},this.addFolds=function(e){e.forEach(function(e){this.addFold(e)},this)},this.removeFold=function(e){var t=e.foldLine,n=t.start.row,r=t.end.row,i=this.$foldData,s=t.folds;if(s.length==1)i.splice(i.indexOf(t),1);else if(t.range.isEnd(e.end.row,e.end.column))s.pop(),t.end.row=s[s.length-1].end.row,t.end.column=s[s.length-1].end.column;else if(t.range.isStart(e.start.row,e.start.column))s.shift(),t.start.row=s[0].start.row,t.start.column=s[0].start.column;else if(e.sameRow)s.splice(s.indexOf(e),1);else{var o=t.split(e.start.row,e.start.column);s=o.folds,s.shift(),o.start.row=s[0].start.row,o.start.column=s[0].start.column}this.$updating||(this.$useWrapMode?this.$updateWrapData(n,r):this.$updateRowLengthCache(n,r)),this.$modified=!0,this._emit("changeFold",{data:e,action:"remove"})},this.removeFolds=function(e){var t=[];for(var n=0;n<e.length;n++)t.push(e[n]);t.forEach(function(e){this.removeFold(e)},this),this.$modified=!0},this.expandFold=function(e){this.removeFold(e),e.subFolds.forEach(function(t){e.restoreRange(t),this.addFold(t)},this),e.collapseChildren>0&&this.foldAll(e.start.row+1,e.end.row,e.collapseChildren-1),e.subFolds=[]},this.expandFolds=function(e){e.forEach(function(e){this.expandFold(e)},this)},this.unfold=function(e,t){var n,i;e==null?(n=new r(0,0,this.getLength(),0),t=!0):typeof e=="number"?n=new r(e,0,e,this.getLine(e).length):"row"in e?n=r.fromPoints(e,e):n=e,i=this.getFoldsInRangeList(n);if(t)this.removeFolds(i);else{var s=i;while(s.length)this.expandFolds(s),s=this.getFoldsInRangeList(n)}if(i.length)return i},this.isRowFolded=function(e,t){return!!this.getFoldLine(e,t)},this.getRowFoldEnd=function(e,t){var n=this.getFoldLine(e,t);return n?n.end.row:e},this.getRowFoldStart=function(e,t){var n=this.getFoldLine(e,t);return n?n.start.row:e},this.getFoldDisplayLine=function(e,t,n,r,i){r==null&&(r=e.start.row,i=0),t==null&&(t=e.end.row,n=this.getLine(t).length);var s=this.doc,o="";return e.walk(function(e,t,n,u){if(t<r)return;if(t==r){if(n<i)return;u=Math.max(i,u)}e!=null?o+=e:o+=s.getLine(t).substring(u,n)},t,n),o},this.getDisplayLine=function(e,t,n,r){var i=this.getFoldLine(e);if(!i){var s;return s=this.doc.getLine(e),s.substring(r||0,t||s.length)}return this.getFoldDisplayLine(i,e,t,n,r)},this.$cloneFoldData=function(){var e=[];return e=this.$foldData.map(function(t){var n=t.folds.map(function(e){return e.clone()});return new i(e,n)}),e},this.toggleFold=function(e){var t=this.selection,n=t.getRange(),r,i;if(n.isEmpty()){var s=n.start;r=this.getFoldAt(s.row,s.column);if(r){this.expandFold(r);return}(i=this.findMatchingBracket(s))?n.comparePoint(i)==1?n.end=i:(n.start=i,n.start.column++,n.end.column--):(i=this.findMatchingBracket({row:s.row,column:s.column+1}))?(n.comparePoint(i)==1?n.end=i:n.start=i,n.start.column++):n=this.getCommentFoldRange(s.row,s.column)||n}else{var o=this.getFoldsInRange(n);if(e&&o.length){this.expandFolds(o);return}o.length==1&&(r=o[0])}r||(r=this.getFoldAt(n.start.row,n.start.column));if(r&&r.range.toString()==n.toString()){this.expandFold(r);return}var u="...";if(!n.isMultiLine()){u=this.getTextRange(n);if(u.length<4)return;u=u.trim().substring(0,2)+".."}this.addFold(u,n)},this.getCommentFoldRange=function(e,t,n){var i=new o(this,e,t),s=i.getCurrentToken();if(s&&/^comment|string/.test(s.type)){var u=new r,a=new RegExp(s.type.replace(/\..*/,"\\."));if(n!=1){do s=i.stepBackward();while(s&&a.test(s.type));i.stepForward()}u.start.row=i.getCurrentTokenRow(),u.start.column=i.getCurrentTokenColumn()+2,i=new o(this,e,t);if(n!=-1){do s=i.stepForward();while(s&&a.test(s.type));s=i.stepBackward()}else s=i.getCurrentToken();return u.end.row=i.getCurrentTokenRow(),u.end.column=i.getCurrentTokenColumn()+s.value.length-2,u}},this.foldAll=function(e,t,n){n==undefined&&(n=1e5);var r=this.foldWidgets;if(!r)return;t=t||this.getLength(),e=e||0;for(var i=e;i<t;i++){r[i]==null&&(r[i]=this.getFoldWidget(i));if(r[i]!="start")continue;var s=this.getFoldWidgetRange(i);if(s&&s.isMultiLine()&&s.end.row<=t&&s.start.row>=e){i=s.end.row;try{var o=this.addFold("...",s);o&&(o.collapseChildren=n)}catch(u){}}}},this.$foldStyles={manual:1,markbegin:1,markbeginend:1},this.$foldStyle="markbegin",this.setFoldStyle=function(e){if(!this.$foldStyles[e])throw new Error("invalid fold style: "+e+"["+Object.keys(this.$foldStyles).join(", ")+"]");if(this.$foldStyle==e)return;this.$foldStyle=e,e=="manual"&&this.unfold();var t=this.$foldMode;this.$setFolding(null),this.$setFolding(t)},this.$setFolding=function(e){if(this.$foldMode==e)return;this.$foldMode=e,this.removeListener("change",this.$updateFoldWidgets),this._emit("changeAnnotation");if(!e||this.$foldStyle=="manual"){this.foldWidgets=null;return}this.foldWidgets=[],this.getFoldWidget=e.getFoldWidget.bind(e,this,this.$foldStyle),this.getFoldWidgetRange=e.getFoldWidgetRange.bind(e,this,this.$foldStyle),this.$updateFoldWidgets=this.updateFoldWidgets.bind(this),this.on("change",this.$updateFoldWidgets)},this.getParentFoldRangeData=function(e,t){var n=this.foldWidgets;if(!n||t&&n[e])return{};var r=e-1,i;while(r>=0){var s=n[r];s==null&&(s=n[r]=this.getFoldWidget(r));if(s=="start"){var o=this.getFoldWidgetRange(r);i||(i=o);if(o&&o.end.row>=e)break}r--}return{range:r!==-1&&o,firstRange:i}},this.onFoldWidgetClick=function(e,t){t=t.domEvent;var n={children:t.shiftKey,all:t.ctrlKey||t.metaKey,siblings:t.altKey},r=this.$toggleFoldWidget(e,n);if(!r){var i=t.target||t.srcElement;i&&/ace_fold-widget/.test(i.className)&&(i.className+=" ace_invalid")}},this.$toggleFoldWidget=function(e,t){if(!this.getFoldWidget)return;var n=this.getFoldWidget(e),r=this.getLine(e),i=n==="end"?-1:1,s=this.getFoldAt(e,i===-1?0:r.length,i);if(s){t.children||t.all?this.removeFold(s):this.expandFold(s);return}var o=this.getFoldWidgetRange(e,!0);if(o&&!o.isMultiLine()){s=this.getFoldAt(o.start.row,o.start.column,1);if(s&&o.isEqual(s.range)){this.removeFold(s);return}}if(t.siblings){var u=this.getParentFoldRangeData(e);if(u.range)var a=u.range.start.row+1,f=u.range.end.row;this.foldAll(a,f,t.all?1e4:0)}else t.children?(f=o?o.end.row:this.getLength(),this.foldAll(e+1,o.end.row,t.all?1e4:0)):o&&(t.all&&(o.collapseChildren=1e4),this.addFold("...",o));return o},this.toggleFoldWidget=function(e){var t=this.selection.getCursor().row;t=this.getRowFoldStart(t);var n=this.$toggleFoldWidget(t,{});if(n)return;var r=this.getParentFoldRangeData(t,!0);n=r.range||r.firstRange;if(n){t=n.start.row;var i=this.getFoldAt(t,this.getLine(t).length,1);i?this.removeFold(i):this.addFold("...",n)}},this.updateFoldWidgets=function(e){var t=e.data,n=t.range,r=n.start.row,i=n.end.row-r;if(i===0)this.foldWidgets[r]=null;else if(t.action=="removeText"||t.action=="removeLines")this.foldWidgets.splice(r,i+1,null);else{var s=Array(i+1);s.unshift(r,1),this.foldWidgets.splice.apply(this.foldWidgets,s)}}}var r=e("../range").Range,i=e("./fold_line").FoldLine,s=e("./fold").Fold,o=e("../token_iterator").TokenIterator;t.Folding=u}),define("ace/edit_session/fold_line",["require","exports","module","ace/range"],function(e,t,n){function i(e,t){this.foldData=e,Array.isArray(t)?this.folds=t:t=this.folds=[t];var n=t[t.length-1];this.range=new r(t[0].start.row,t[0].start.column,n.end.row,n.end.column),this.start=this.range.start,this.end=this.range.end,this.folds.forEach(function(e){e.setFoldLine(this)},this)}var r=e("../range").Range;(function(){this.shiftRow=function(e){this.start.row+=e,this.end.row+=e,this.folds.forEach(function(t){t.start.row+=e,t.end.row+=e})},this.addFold=function(e){if(e.sameRow){if(e.start.row<this.startRow||e.endRow>this.endRow)throw new Error("Can't add a fold to this FoldLine as it has no connection");this.folds.push(e),this.folds.sort(function(e,t){return-e.range.compareEnd(t.start.row,t.start.column)}),this.range.compareEnd(e.start.row,e.start.column)>0?(this.end.row=e.end.row,this.end.column=e.end.column):this.range.compareStart(e.end.row,e.end.column)<0&&(this.start.row=e.start.row,this.start.column=e.start.column)}else if(e.start.row==this.end.row)this.folds.push(e),this.end.row=e.end.row,this.end.column=e.end.column;else{if(e.end.row!=this.start.row)throw new Error("Trying to add fold to FoldRow that doesn't have a matching row");this.folds.unshift(e),this.start.row=e.start.row,this.start.column=e.start.column}e.foldLine=this},this.containsRow=function(e){return e>=this.start.row&&e<=this.end.row},this.walk=function(e,t,n){var r=0,i=this.folds,s,o,u,a=!0;t==null&&(t=this.end.row,n=this.end.column);for(var f=0;f<i.length;f++){s=i[f],o=s.range.compareStart(t,n);if(o==-1){e(null,t,n,r,a);return}u=e(null,s.start.row,s.start.column,r,a),u=!u&&e(s.placeholder,s.start.row,s.start.column,r);if(u||o==0)return;a=!s.sameRow,r=s.end.column}e(null,t,n,r,a)},this.getNextFoldTo=function(e,t){var n,r;for(var i=0;i<this.folds.length;i++){n=this.folds[i],r=n.range.compareEnd(e,t);if(r==-1)return{fold:n,kind:"after"};if(r==0)return{fold:n,kind:"inside"}}return null},this.addRemoveChars=function(e,t,n){var r=this.getNextFoldTo(e,t),i,s;if(r){i=r.fold;if(r.kind=="inside"&&i.start.column!=t&&i.start.row!=e)window.console&&window.console.log(e,t,i);else if(i.start.row==e){s=this.folds;var o=s.indexOf(i);o==0&&(this.start.column+=n);for(o;o<s.length;o++){i=s[o],i.start.column+=n;if(!i.sameRow)return;i.end.column+=n}this.end.column+=n}}},this.split=function(e,t){var n=this.getNextFoldTo(e,t).fold,r=this.folds,s=this.foldData;if(!n)return null;var o=r.indexOf(n),u=r[o-1];this.end.row=u.end.row,this.end.column=u.end.column,r=r.splice(o,r.length-o);var a=new i(s,r);return s.splice(s.indexOf(this)+1,0,a),a},this.merge=function(e){var t=e.folds;for(var n=0;n<t.length;n++)this.addFold(t[n]);var r=this.foldData;r.splice(r.indexOf(e),1)},this.toString=function(){var e=[this.range.toString()+": ["];return this.folds.forEach(function(t){e.push("  "+t.toString())}),e.push("]"),e.join("\n")},this.idxToPosition=function(e){var t=0,n;for(var r=0;r<this.folds.length;r++){var n=this.folds[r];e-=n.start.column-t;if(e<0)return{row:n.start.row,column:n.start.column+e};e-=n.placeholder.length;if(e<0)return n.start;t=n.end.column}return{row:this.end.row,column:this.end.column+e}}}).call(i.prototype),t.FoldLine=i}),define("ace/tokenizer",["require","exports","module"],function(e,t,n){var r=1e3,i=function(e){this.states=e,this.regExps={},this.matchMappings={};for(var t in this.states){var n=this.states[t],r=[],i=0,s=this.matchMappings[t]={defaultToken:"text"},o="g",u=[];for(var a=0;a<n.length;a++){var f=n[a];f.defaultToken&&(s.defaultToken=f.defaultToken),f.caseInsensitive&&(o="gi");if(f.regex==null)continue;f.regex instanceof RegExp&&(f.regex=f.regex.toString().slice(1,-1));var l=f.regex,c=(new RegExp("(?:("+l+")|(.))")).exec("a").length-2;if(Array.isArray(f.token))if(f.token.length==1||c==1)f.token=f.token[0];else{if(c-1!=f.token.length)throw new Error("number of classes and regexp groups in '"+f.token+"'\n'"+f.regex+"' doesn't match\n"+(c-1)+"!="+f.token.length);f.tokenArray=f.token,f.token=null,f.onMatch=this.$arrayTokens}else typeof f.token=="function"&&!f.onMatch&&(c>1?f.onMatch=this.$applyToken:f.onMatch=f.token);c>1&&(/\\\d/.test(f.regex)?l=f.regex.replace(/\\([0-9]+)/g,function(e,t){return"\\"+(parseInt(t,10)+i+1)}):(c=1,l=this.removeCapturingGroups(f.regex)),!f.splitRegex&&typeof f.token!="string"&&u.push(f)),s[i]=a,i+=c,r.push(l),f.onMatch||(f.onMatch=null),f.__proto__=null}u.forEach(function(e){e.splitRegex=this.createSplitterRegexp(e.regex,o)},this),this.regExps[t]=new RegExp("("+r.join(")|(")+")|($)",o)}};(function(){this.$setMaxTokenCount=function(e){r=e|0},this.$applyToken=function(e){var t=this.splitRegex.exec(e).slice(1),n=this.token.apply(this,t);if(typeof n=="string")return[{type:n,value:e}];var r=[];for(var i=0,s=n.length;i<s;i++)t[i]&&(r[r.length]={type:n[i],value:t[i]});return r},this.$arrayTokens=function(e){if(!e)return[];var t=this.splitRegex.exec(e);if(!t)return"text";var n=[],r=this.tokenArray;for(var i=0,s=r.length;i<s;i++)t[i+1]&&(n[n.length]={type:r[i],value:t[i+1]});return n},this.removeCapturingGroups=function(e){var t=e.replace(/\[(?:\\.|[^\]])*?\]|\\.|\(\?[:=!]|(\()/g,function(e,t){return t?"(?:":e});return t},this.createSplitterRegexp=function(e,t){if(e.indexOf("(?=")!=-1){var n=0,r=!1,i={};e.replace(/(\\.)|(\((?:\?[=!])?)|(\))|([\[\]])/g,function(e,t,s,o,u,a){return r?r=u!="]":u?r=!0:o?(n==i.stack&&(i.end=a+1,i.stack=-1),n--):s&&(n++,s.length!=1&&(i.stack=n,i.start=a)),e}),i.end!=null&&/^\)*$/.test(e.substr(i.end))&&(e=e.substring(0,i.start)+e.substr(i.end))}return new RegExp(e,(t||"").replace("g",""))},this.getLineTokens=function(e,t){if(t&&typeof t!="string"){var n=t.slice(0);t=n[0]}else var n=[];var i=t||"start",s=this.states[i];s||(i="start",s=this.states[i]);var o=this.matchMappings[i],u=this.regExps[i];u.lastIndex=0;var a,f=[],l=0,c={type:null,value:""};while(a=u.exec(e)){var h=o.defaultToken,p=null,d=a[0],v=u.lastIndex;if(v-d.length>l){var m=e.substring(l,v-d.length);c.type==h?c.value+=m:(c.type&&f.push(c),c={type:h,value:m})}for(var g=0;g<a.length-2;g++){if(a[g+1]===undefined)continue;p=s[o[g]],p.onMatch?h=p.onMatch(d,i,n):h=p.token,p.next&&(typeof p.next=="string"?i=p.next:i=p.next(i,n),s=this.states[i],s||(window.console&&console.error&&console.error(i,"doesn't exist"),i="start",s=this.states[i]),o=this.matchMappings[i],l=v,u=this.regExps[i],u.lastIndex=v);break}if(d)if(typeof h=="string")!!p&&p.merge===!1||c.type!==h?(c.type&&f.push(c),c={type:h,value:d}):c.value+=d;else if(h){c.type&&f.push(c),c={type:null,value:""};for(var g=0;g<h.length;g++)f.push(h[g])}if(l==e.length)break;l=v;if(f.length>r){while(l<e.length)c.type&&f.push(c),c={value:e.substring(l,l+=2e3),type:"overflow"};i="start",n=[];break}}return c.type&&f.push(c),n.length>1&&n[0]!==i&&n.unshift(i),{tokens:f,state:n.length?n:i}}}).call(i.prototype),t.Tokenizer=i}),define("ace/edit_session/fold",["require","exports","module","ace/range","ace/range_list","ace/lib/oop"],function(e,t,n){function u(e,t){e.row-=t.row,e.row==0&&(e.column-=t.column)}function a(e,t){u(e.start,t),u(e.end,t)}function f(e,t){e.row==0&&(e.column+=t.column),e.row+=t.row}function l(e,t){f(e.start,t),f(e.end,t)}var r=e("../range").Range,i=e("../range_list").RangeList,s=e("../lib/oop"),o=t.Fold=function(e,t){this.foldLine=null,this.placeholder=t,this.range=e,this.start=e.start,this.end=e.end,this.sameRow=e.start.row==e.end.row,this.subFolds=this.ranges=[]};s.inherits(o,i),function(){this.toString=function(){return'"'+this.placeholder+'" '+this.range.toString()},this.setFoldLine=function(e){this.foldLine=e,this.subFolds.forEach(function(t){t.setFoldLine(e)})},this.clone=function(){var e=this.range.clone(),t=new o(e,this.placeholder);return this.subFolds.forEach(function(e){t.subFolds.push(e.clone())}),t.collapseChildren=this.collapseChildren,t},this.addSubFold=function(e){if(this.range.isEqual(e))return;if(!this.range.containsRange(e))throw new Error("A fold can't intersect already existing fold"+e.range+this.range);a(e,this.start);var t=e.start.row,n=e.start.column;for(var r=0,i=-1;r<this.subFolds.length;r++){i=this.subFolds[r].range.compare(t,n);if(i!=1)break}var s=this.subFolds[r];if(i==0)return s.addSubFold(e);var t=e.range.end.row,n=e.range.end.column;for(var o=r,i=-1;o<this.subFolds.length;o++){i=this.subFolds[o].range.compare(t,n);if(i!=1)break}var u=this.subFolds[o];if(i==0)throw new Error("A fold can't intersect already existing fold"+e.range+this.range);var f=this.subFolds.splice(r,o-r,e);return e.setFoldLine(this.foldLine),e},this.restoreRange=function(e){return l(e,this.start)}}.call(o.prototype)}),define("ace/mode/text",["require","exports","module","ace/tokenizer","ace/mode/text_highlight_rules","ace/mode/behaviour","ace/unicode","ace/lib/lang","ace/token_iterator","ace/range"],function(e,t,n){var r=e("../tokenizer").Tokenizer,i=e("./text_highlight_rules").TextHighlightRules,s=e("./behaviour").Behaviour,o=e("../unicode"),u=e("../lib/lang"),a=e("../token_iterator").TokenIterator,f=e("../range").Range,l=function(){this.HighlightRules=i,this.$behaviour=new s};(function(){this.tokenRe=new RegExp("^["+o.packages.L+o.packages.Mn+o.packages.Mc+o.packages.Nd+o.packages.Pc+"\\$_]+","g"),this.nonTokenRe=new RegExp("^(?:[^"+o.packages.L+o.packages.Mn+o.packages.Mc+o.packages.Nd+o.packages.Pc+"\\$_]|\\s])+","g"),this.getTokenizer=function(){return this.$tokenizer||(this.$highlightRules=new this.HighlightRules,this.$tokenizer=new r(this.$highlightRules.getRules())),this.$tokenizer},this.lineCommentStart="",this.blockComment="",this.toggleCommentLines=function(e,t,n,r){function w(e){for(var t=n;t<=r;t++)e(i.getLine(t),t)}var i=t.doc,s=!0,o=!0,a=Infinity,f=t.getTabSize(),l=!1;if(!this.lineCommentStart){if(!this.blockComment)return!1;var c=this.blockComment.start,h=this.blockComment.end,p=new RegExp("^(\\s*)(?:"+u.escapeRegExp(c)+")"),d=new RegExp("(?:"+u.escapeRegExp(h)+")\\s*$"),v=function(e,t){if(g(e,t))return;if(!s||/\S/.test(e))i.insertInLine({row:t,column:e.length},h),i.insertInLine({row:t,column:a},c)},m=function(e,t){var n;(n=e.match(d))&&i.removeInLine(t,e.length-n[0].length,e.length),(n=e.match(p))&&i.removeInLine(t,n[1].length,n[0].length)},g=function(e,n){if(p.test(e))return!0;var r=t.getTokens(n);for(var i=0;i<r.length;i++)if(r[i].type==="comment")return!0}}else{if(Array.isArray(this.lineCommentStart))var p=this.lineCommentStart.map(u.escapeRegExp).join("|"),c=this.lineCommentStart[0];else var p=u.escapeRegExp(this.lineCommentStart),c=this.lineCommentStart;p=new RegExp("^(\\s*)(?:"+p+") ?"),l=t.getUseSoftTabs();var m=function(e,t){var n=e.match(p);if(!n)return;var r=n[1].length,s=n[0].length;!b(e,r,s)&&n[0][s-1]==" "&&s--,i.removeInLine(t,r,s)},y=c+" ",v=function(e,t){if(!s||/\S/.test(e))b(e,a,a)?i.insertInLine({row:t,column:a},y):i.insertInLine({row:t,column:a},c)},g=function(e,t){return p.test(e)},b=function(e,t,n){var r=0;while(t--&&e.charAt(t)==" ")r++;if(r%f!=0)return!1;var r=0;while(e.charAt(n++)==" ")r++;return f>2?r%f!=f-1:r%f==0}}var E=Infinity;w(function(e,t){var n=e.search(/\S/);n!==-1?(n<a&&(a=n),o&&!g(e,t)&&(o=!1)):E>e.length&&(E=e.length)}),a==Infinity&&(a=E,s=!1,o=!1),l&&a%f!=0&&(a=Math.floor(a/f)*f),w(o?m:v)},this.toggleBlockComment=function(e,t,n,r){var i=this.blockComment;if(!i)return;!i.start&&i[0]&&(i=i[0]);var s=new a(t,r.row,r.column),o=s.getCurrentToken(),u=t.selection,l=t.selection.toOrientedRange(),c,h;if(o&&/comment/.test(o.type)){var p,d;while(o&&/comment/.test(o.type)){var v=o.value.indexOf(i.start);if(v!=-1){var m=s.getCurrentTokenRow(),g=s.getCurrentTokenColumn()+v;p=new f(m,g,m,g+i.start.length);break}o=s.stepBackward()}var s=new a(t,r.row,r.column),o=s.getCurrentToken();while(o&&/comment/.test(o.type)){var v=o.value.indexOf(i.end);if(v!=-1){var m=s.getCurrentTokenRow(),g=s.getCurrentTokenColumn()+v;d=new f(m,g,m,g+i.end.length);break}o=s.stepForward()}d&&t.remove(d),p&&(t.remove(p),c=p.start.row,h=-i.start.length)}else h=i.start.length,c=n.start.row,t.insert(n.end,i.end),t.insert(n.start,i.start);l.start.row==c&&(l.start.column+=h),l.end.row==c&&(l.end.column+=h),t.selection.fromOrientedRange(l)},this.getNextLineIndent=function(e,t,n){return this.$getIndent(t)},this.checkOutdent=function(e,t,n){return!1},this.autoOutdent=function(e,t,n){},this.$getIndent=function(e){return e.match(/^\s*/)[0]},this.createWorker=function(e){return null},this.createModeDelegates=function(e){this.$embeds=[],this.$modes={};for(var t in e)e[t]&&(this.$embeds.push(t),this.$modes[t]=new e[t]);var n=["toggleBlockComment","toggleCommentLines","getNextLineIndent","checkOutdent","autoOutdent","transformAction","getCompletions"];for(var t=0;t<n.length;t++)(function(e){var r=n[t],i=e[r];e[n[t]]=function(){return this.$delegator(r,arguments,i)}})(this)},this.$delegator=function(e,t,n){var r=t[0];typeof r!="string"&&(r=r[0]);for(var i=0;i<this.$embeds.length;i++){if(!this.$modes[this.$embeds[i]])continue;var s=r.split(this.$embeds[i]);if(!s[0]&&s[1]){t[0]=s[1];var o=this.$modes[this.$embeds[i]];return o[e].apply(o,t)}}var u=n.apply(this,t);return n?u:undefined},this.transformAction=function(e,t,n,r,i){if(this.$behaviour){var s=this.$behaviour.getBehaviours();for(var o in s)if(s[o][t]){var u=s[o][t].apply(this,arguments);if(u)return u}}},this.getKeywords=function(e){if(!this.completionKeywords){var t=this.$tokenizer.rules,n=[];for(var r in t){var i=t[r];for(var s=0,o=i.length;s<o;s++)if(typeof i[s].token=="string")/keyword|support|storage/.test(i[s].token)&&n.push(i[s].regex);else if(typeof i[s].token=="object")for(var u=0,a=i[s].token.length;u<a;u++)if(/keyword|support|storage/.test(i[s].token[u])){var r=i[s].regex.match(/\(.+?\)/g)[u];n.push(r.substr(1,r.length-2))}}this.completionKeywords=n}return e?n.concat(this.$keywordList||[]):this.$keywordList},this.$createKeywordList=function(){return this.$highlightRules||this.getTokenizer(),this.$keywordList=this.$highlightRules.$keywordList||[]},this.getCompletions=function(e,t,n,r){var i=this.$keywordList||this.$createKeywordList();return i.map(function(e){return{name:e,value:e,score:0,meta:"keyword"}})},this.$id="ace/mode/text"}).call(l.prototype),t.Mode=l}),define("ace/range_list",["require","exports","module","ace/range"],function(e,t,n){var r=e("./range").Range,i=r.comparePoints,s=function(){this.ranges=[]};(function(){this.comparePoints=i,this.pointIndex=function(e,t,n){var r=this.ranges;for(var s=n||0;s<r.length;s++){var o=r[s],u=i(e,o.end);if(u>0)continue;var a=i(e,o.start);return u===0?t&&a!==0?-s-2:s:a>0||a===0&&!t?s:-s-1}return-s-1},this.add=function(e){var t=!e.isEmpty(),n=this.pointIndex(e.start,t);n<0&&(n=-n-1);var r=this.pointIndex(e.end,t,n);return r<0?r=-r-1:r++,this.ranges.splice(n,r-n,e)},this.addList=function(e){var t=[];for(var n=e.length;n--;)t.push.call(t,this.add(e[n]));return t},this.substractPoint=function(e){var t=this.pointIndex(e);if(t>=0)return this.ranges.splice(t,1)},this.merge=function(){var e=[],t=this.ranges;t=t.sort(function(e,t){return i(e.start,t.start)});var n=t[0],r;for(var s=1;s<t.length;s++){r=n,n=t[s];var o=i(r.end,n.start);if(o<0)continue;if(o==0&&!r.isEmpty()&&!n.isEmpty())continue;i(r.end,n.end)<0&&(r.end.row=n.end.row,r.end.column=n.end.column),t.splice(s,1),e.push(n),n=r,s--}return this.ranges=t,e},this.contains=function(e,t){return this.pointIndex({row:e,column:t})>=0},this.containsPoint=function(e){return this.pointIndex(e)>=0},this.rangeAtPoint=function(e){var t=this.pointIndex(e);if(t>=0)return this.ranges[t]},this.clipRows=function(e,t){var n=this.ranges;if(n[0].start.row>t||n[n.length-1].start.row<e)return[];var r=this.pointIndex({row:e,column:0});r<0&&(r=-r-1);var i=this.pointIndex({row:t,column:0},r);i<0&&(i=-i-1);var s=[];for(var o=r;o<i;o++)s.push(n[o]);return s},this.removeAll=function(){return this.ranges.splice(0,this.ranges.length)},this.attach=function(e){this.session&&this.detach(),this.session=e,this.onChange=this.$onChange.bind(this),this.session.on("change",this.onChange)},this.detach=function(){if(!this.session)return;this.session.removeListener("change",this.onChange),this.session=null},this.$onChange=function(e){var t=e.data.range;if(e.data.action[0]=="i")var n=t.start,r=t.end;else var r=t.start,n=t.end;var i=n.row,s=r.row,o=s-i,u=-n.column+r.column,a=this.ranges;for(var f=0,l=a.length;f<l;f++){var c=a[f];if(c.end.row<i)continue;if(c.start.row>i)break;c.start.row==i&&c.start.column>=n.column&&(c.start.column!=n.column||!this.$insertRight)&&(c.start.column+=u,c.start.row+=o);if(c.end.row==i&&c.end.column>=n.column){if(c.end.column==n.column&&this.$insertRight)continue;c.end.column==n.column&&u>0&&f<l-1&&c.end.column>c.start.column&&c.end.column==a[f+1].start.column&&(c.end.column-=u),c.end.column+=u,c.end.row+=o}}if(o!=0&&f<l)for(;f<l;f++){var c=a[f];c.start.row+=o,c.end.row+=o}}}).call(s.prototype),t.RangeList=s}),define("ace/range",["require","exports","module"],function(e,t,n){var r=function(e,t){return e.row-t.row||e.column-t.column},i=function(e,t,n,r){this.start={row:e,column:t},this.end={row:n,column:r}};(function(){this.isEqual=function(e){return this.start.row===e.start.row&&this.end.row===e.end.row&&this.start.column===e.start.column&&this.end.column===e.end.column},this.toString=function(){return"Range: ["+this.start.row+"/"+this.start.column+"] -> ["+this.end.row+"/"+this.end.column+"]"},this.contains=function(e,t){return this.compare(e,t)==0},this.compareRange=function(e){var t,n=e.end,r=e.start;return t=this.compare(n.row,n.column),t==1?(t=this.compare(r.row,r.column),t==1?2:t==0?1:0):t==-1?-2:(t=this.compare(r.row,r.column),t==-1?-1:t==1?42:0)},this.comparePoint=function(e){return this.compare(e.row,e.column)},this.containsRange=function(e){return this.comparePoint(e.start)==0&&this.comparePoint(e.end)==0},this.intersects=function(e){var t=this.compareRange(e);return t==-1||t==0||t==1},this.isEnd=function(e,t){return this.end.row==e&&this.end.column==t},this.isStart=function(e,t){return this.start.row==e&&this.start.column==t},this.setStart=function(e,t){typeof e=="object"?(this.start.column=e.column,this.start.row=e.row):(this.start.row=e,this.start.column=t)},this.setEnd=function(e,t){typeof e=="object"?(this.end.column=e.column,this.end.row=e.row):(this.end.row=e,this.end.column=t)},this.inside=function(e,t){return this.compare(e,t)==0?this.isEnd(e,t)||this.isStart(e,t)?!1:!0:!1},this.insideStart=function(e,t){return this.compare(e,t)==0?this.isEnd(e,t)?!1:!0:!1},this.insideEnd=function(e,t){return this.compare(e,t)==0?this.isStart(e,t)?!1:!0:!1},this.compare=function(e,t){return!this.isMultiLine()&&e===this.start.row?t<this.start.column?-1:t>this.end.column?1:0:e<this.start.row?-1:e>this.end.row?1:this.start.row===e?t>=this.start.column?0:-1:this.end.row===e?t<=this.end.column?0:1:0},this.compareStart=function(e,t){return this.start.row==e&&this.start.column==t?-1:this.compare(e,t)},this.compareEnd=function(e,t){return this.end.row==e&&this.end.column==t?1:this.compare(e,t)},this.compareInside=function(e,t){return this.end.row==e&&this.end.column==t?1:this.start.row==e&&this.start.column==t?-1:this.compare(e,t)},this.clipRows=function(e,t){if(this.end.row>t)var n={row:t+1,column:0};else if(this.end.row<e)var n={row:e,column:0};if(this.start.row>t)var r={row:t+1,column:0};else if(this.start.row<e)var r={row:e,column:0};return i.fromPoints(r||this.start,n||this.end)},this.extend=function(e,t){var n=this.compare(e,t);if(n==0)return this;if(n==-1)var r={row:e,column:t};else var s={row:e,column:t};return i.fromPoints(r||this.start,s||this.end)},this.isEmpty=function(){return this.start.row===this.end.row&&this.start.column===this.end.column},this.isMultiLine=function(){return this.start.row!==this.end.row},this.clone=function(){return i.fromPoints(this.start,this.end)},this.collapseRows=function(){return this.end.column==0?new i(this.start.row,0,Math.max(this.start.row,this.end.row-1),0):new i(this.start.row,0,this.end.row,0)},this.toScreenRange=function(e){var t=e.documentToScreenPosition(this.start),n=e.documentToScreenPosition(this.end);return new i(t.row,t.column,n.row,n.column)},this.moveBy=function(e,t){this.start.row+=e,this.start.column+=t,this.end.row+=e,this.end.column+=t}}).call(i.prototype),i.fromPoints=function(e,t){return new i(e.row,e.column,t.row,t.column)},i.comparePoints=r,i.comparePoints=function(e,t){return e.row-t.row||e.column-t.column},t.Range=i}),define("ace/edit_session/bracket_match",["require","exports","module","ace/token_iterator","ace/range"],function(e,t,n){function s(){this.findMatchingBracket=function(e,t){if(e.column==0)return null;var n=t||this.getLine(e.row).charAt(e.column-1);if(n=="")return null;var r=n.match(/([\(\[\{])|([\)\]\}])/);return r?r[1]?this.$findClosingBracket(r[1],e):this.$findOpeningBracket(r[2],e):null},this.getBracketRange=function(e){var t=this.getLine(e.row),n=!0,r,s=t.charAt(e.column-1),o=s&&s.match(/([\(\[\{])|([\)\]\}])/);o||(s=t.charAt(e.column),e={row:e.row,column:e.column+1},o=s&&s.match(/([\(\[\{])|([\)\]\}])/),n=!1);if(!o)return null;if(o[1]){var u=this.$findClosingBracket(o[1],e);if(!u)return null;r=i.fromPoints(e,u),n||(r.end.column++,r.start.column--),r.cursor=r.end}else{var u=this.$findOpeningBracket(o[2],e);if(!u)return null;r=i.fromPoints(u,e),n||(r.start.column++,r.end.column--),r.cursor=r.start}return r},this.$brackets={")":"(","(":")","]":"[","[":"]","{":"}","}":"{"},this.$findOpeningBracket=function(e,t,n){var i=this.$brackets[e],s=1,o=new r(this,t.row,t.column),u=o.getCurrentToken();u||(u=o.stepForward());if(!u)return;n||(n=new RegExp("(\\.?"+u.type.replace(".","\\.").replace("rparen",".paren")+")+"));var a=t.column-o.getCurrentTokenColumn()-2,f=u.value;for(;;){while(a>=0){var l=f.charAt(a);if(l==i){s-=1;if(s==0)return{row:o.getCurrentTokenRow(),column:a+o.getCurrentTokenColumn()}}else l==e&&(s+=1);a-=1}do u=o.stepBackward();while(u&&!n.test(u.type));if(u==null)break;f=u.value,a=f.length-1}return null},this.$findClosingBracket=function(e,t,n){var i=this.$brackets[e],s=1,o=new r(this,t.row,t.column),u=o.getCurrentToken();u||(u=o.stepForward());if(!u)return;n||(n=new RegExp("(\\.?"+u.type.replace(".","\\.").replace("lparen",".paren")+")+"));var a=t.column-o.getCurrentTokenColumn();for(;;){var f=u.value,l=f.length;while(a<l){var c=f.charAt(a);if(c==i){s-=1;if(s==0)return{row:o.getCurrentTokenRow(),column:a+o.getCurrentTokenColumn()}}else c==e&&(s+=1);a+=1}do u=o.stepForward();while(u&&!n.test(u.type));if(u==null)break;a=0}return null}}var r=e("../token_iterator").TokenIterator,i=e("../range").Range;t.BracketMatch=s}),define("ace/selection",["require","exports","module","ace/lib/oop","ace/lib/lang","ace/lib/event_emitter","ace/range"],function(e,t,n){var r=e("./lib/oop"),i=e("./lib/lang"),s=e("./lib/event_emitter").EventEmitter,o=e("./range").Range,u=function(e){this.session=e,this.doc=e.getDocument(),this.clearSelection(),this.lead=this.selectionLead=this.doc.createAnchor(0,0),this.anchor=this.selectionAnchor=this.doc.createAnchor(0,0);var t=this;this.lead.on("change",function(e){t._emit("changeCursor"),t.$isEmpty||t._emit("changeSelection"),!t.$keepDesiredColumnOnChange&&e.old.column!=e.value.column&&(t.$desiredColumn=null)}),this.selectionAnchor.on("change",function(){t.$isEmpty||t._emit("changeSelection")})};(function(){r.implement(this,s),this.isEmpty=function(){return this.$isEmpty||this.anchor.row==this.lead.row&&this.anchor.column==this.lead.column},this.isMultiLine=function(){return this.isEmpty()?!1:this.getRange().isMultiLine()},this.getCursor=function(){return this.lead.getPosition()},this.setSelectionAnchor=function(e,t){this.anchor.setPosition(e,t),this.$isEmpty&&(this.$isEmpty=!1,this._emit("changeSelection"))},this.getSelectionAnchor=function(){return this.$isEmpty?this.getSelectionLead():this.anchor.getPosition()},this.getSelectionLead=function(){return this.lead.getPosition()},this.shiftSelection=function(e){if(this.$isEmpty){this.moveCursorTo(this.lead.row,this.lead.column+e);return}var t=this.getSelectionAnchor(),n=this.getSelectionLead(),r=this.isBackwards();(!r||t.column!==0)&&this.setSelectionAnchor(t.row,t.column+e),(r||n.column!==0)&&this.$moveSelection(function(){this.moveCursorTo(n.row,n.column+e)})},this.isBackwards=function(){var e=this.anchor,t=this.lead;return e.row>t.row||e.row==t.row&&e.column>t.column},this.getRange=function(){var e=this.anchor,t=this.lead;return this.isEmpty()?o.fromPoints(t,t):this.isBackwards()?o.fromPoints(t,e):o.fromPoints(e,t)},this.clearSelection=function(){this.$isEmpty||(this.$isEmpty=!0,this._emit("changeSelection"))},this.selectAll=function(){var e=this.doc.getLength()-1;this.setSelectionAnchor(0,0),this.moveCursorTo(e,this.doc.getLine(e).length)},this.setRange=this.setSelectionRange=function(e,t){t?(this.setSelectionAnchor(e.end.row,e.end.column),this.selectTo(e.start.row,e.start.column)):(this.setSelectionAnchor(e.start.row,e.start.column),this.selectTo(e.end.row,e.end.column)),this.getRange().isEmpty()&&(this.$isEmpty=!0),this.$desiredColumn=null},this.$moveSelection=function(e){var t=this.lead;this.$isEmpty&&this.setSelectionAnchor(t.row,t.column),e.call(this)},this.selectTo=function(e,t){this.$moveSelection(function(){this.moveCursorTo(e,t)})},this.selectToPosition=function(e){this.$moveSelection(function(){this.moveCursorToPosition(e)})},this.moveTo=function(e,t){this.clearSelection(),this.moveCursorTo(e,t)},this.moveToPosition=function(e){this.clearSelection(),this.moveCursorToPosition(e)},this.selectUp=function(){this.$moveSelection(this.moveCursorUp)},this.selectDown=function(){this.$moveSelection(this.moveCursorDown)},this.selectRight=function(){this.$moveSelection(this.moveCursorRight)},this.selectLeft=function(){this.$moveSelection(this.moveCursorLeft)},this.selectLineStart=function(){this.$moveSelection(this.moveCursorLineStart)},this.selectLineEnd=function(){this.$moveSelection(this.moveCursorLineEnd)},this.selectFileEnd=function(){this.$moveSelection(this.moveCursorFileEnd)},this.selectFileStart=function(){this.$moveSelection(this.moveCursorFileStart)},this.selectWordRight=function(){this.$moveSelection(this.moveCursorWordRight)},this.selectWordLeft=function(){this.$moveSelection(this.moveCursorWordLeft)},this.getWordRange=function(e,t){if(typeof t=="undefined"){var n=e||this.lead;e=n.row,t=n.column}return this.session.getWordRange(e,t)},this.selectWord=function(){this.setSelectionRange(this.getWordRange())},this.selectAWord=function(){var e=this.getCursor(),t=this.session.getAWordRange(e.row,e.column);this.setSelectionRange(t)},this.getLineRange=function(e,t){var n=typeof e=="number"?e:this.lead.row,r,i=this.session.getFoldLine(n);return i?(n=i.start.row,r=i.end.row):r=n,t===!0?new o(n,0,r,this.session.getLine(r).length):new o(n,0,r+1,0)},this.selectLine=function(){this.setSelectionRange(this.getLineRange())},this.moveCursorUp=function(){this.moveCursorBy(-1,0)},this.moveCursorDown=function(){this.moveCursorBy(1,0)},this.moveCursorLeft=function(){var e=this.lead.getPosition(),t;if(t=this.session.getFoldAt(e.row,e.column,-1))this.moveCursorTo(t.start.row,t.start.column);else if(e.column==0)e.row>0&&this.moveCursorTo(e.row-1,this.doc.getLine(e.row-1).length);else{var n=this.session.getTabSize();this.session.isTabStop(e)&&this.doc.getLine(e.row).slice(e.column-n,e.column).split(" ").length-1==n?this.moveCursorBy(0,-n):this.moveCursorBy(0,-1)}},this.moveCursorRight=function(){var e=this.lead.getPosition(),t;if(t=this.session.getFoldAt(e.row,e.column,1))this.moveCursorTo(t.end.row,t.end.column);else if(this.lead.column==this.doc.getLine(this.lead.row).length)this.lead.row<this.doc.getLength()-1&&this.moveCursorTo(this.lead.row+1,0);else{var n=this.session.getTabSize(),e=this.lead;this.session.isTabStop(e)&&this.doc.getLine(e.row).slice(e.column,e.column+n).split(" ").length-1==n?this.moveCursorBy(0,n):this.moveCursorBy(0,1)}},this.moveCursorLineStart=function(){var e=this.lead.row,t=this.lead.column,n=this.session.documentToScreenRow(e,t),r=this.session.screenToDocumentPosition(n,0),i=this.session.getDisplayLine(e,null,r.row,r.column),s=i.match(/^\s*/);s[0].length!=t&&!this.session.$useEmacsStyleLineStart&&(r.column+=s[0].length),this.moveCursorToPosition(r)},this.moveCursorLineEnd=function(){var e=this.lead,t=this.session.getDocumentLastRowColumnPosition(e.row,e.column);if(this.lead.column==t.column){var n=this.session.getLine(t.row);if(t.column==n.length){var r=n.search(/\s+$/);r>0&&(t.column=r)}}this.moveCursorTo(t.row,t.column)},this.moveCursorFileEnd=function(){var e=this.doc.getLength()-1,t=this.doc.getLine(e).length;this.moveCursorTo(e,t)},this.moveCursorFileStart=function(){this.moveCursorTo(0,0)},this.moveCursorLongWordRight=function(){var e=this.lead.row,t=this.lead.column,n=this.doc.getLine(e),r=n.substring(t),i;this.session.nonTokenRe.lastIndex=0,this.session.tokenRe.lastIndex=0;var s=this.session.getFoldAt(e,t,1);if(s){this.moveCursorTo(s.end.row,s.end.column);return}if(i=this.session.nonTokenRe.exec(r))t+=this.session.nonTokenRe.lastIndex,this.session.nonTokenRe.lastIndex=0,r=n.substring(t);if(t>=n.length){this.moveCursorTo(e,n.length),this.moveCursorRight(),e<this.doc.getLength()-1&&this.moveCursorWordRight();return}if(i=this.session.tokenRe.exec(r))t+=this.session.tokenRe.lastIndex,this.session.tokenRe.lastIndex=0;this.moveCursorTo(e,t)},this.moveCursorLongWordLeft=function(){var e=this.lead.row,t=this.lead.column,n;if(n=this.session.getFoldAt(e,t,-1)){this.moveCursorTo(n.start.row,n.start.column);return}var r=this.session.getFoldStringAt(e,t,-1);r==null&&(r=this.doc.getLine(e).substring(0,t));var s=i.stringReverse(r),o;this.session.nonTokenRe.lastIndex=0,this.session.tokenRe.lastIndex=0;if(o=this.session.nonTokenRe.exec(s))t-=this.session.nonTokenRe.lastIndex,s=s.slice(this.session.nonTokenRe.lastIndex),this.session.nonTokenRe.lastIndex=0;if(t<=0){this.moveCursorTo(e,0),this.moveCursorLeft(),e>0&&this.moveCursorWordLeft();return}if(o=this.session.tokenRe.exec(s))t-=this.session.tokenRe.lastIndex,this.session.tokenRe.lastIndex=0;this.moveCursorTo(e,t)},this.$shortWordEndIndex=function(e){var t,n=0,r,i=/\s/,s=this.session.tokenRe;s.lastIndex=0;if(t=this.session.tokenRe.exec(e))n=this.session.tokenRe.lastIndex;else{while((r=e[n])&&i.test(r))n++;if(n<1){s.lastIndex=0;while((r=e[n])&&!s.test(r)){s.lastIndex=0,n++;if(i.test(r)){if(n>2){n--;break}while((r=e[n])&&i.test(r))n++;if(n>2)break}}}}return s.lastIndex=0,n},this.moveCursorShortWordRight=function(){var e=this.lead.row,t=this.lead.column,n=this.doc.getLine(e),r=n.substring(t),i=this.session.getFoldAt(e,t,1);if(i)return this.moveCursorTo(i.end.row,i.end.column);if(t==n.length){var s=this.doc.getLength();do e++,r=this.doc.getLine(e);while(e<s&&/^\s*$/.test(r));/^\s+/.test(r)||(r=""),t=0}var o=this.$shortWordEndIndex(r);this.moveCursorTo(e,t+o)},this.moveCursorShortWordLeft=function(){var e=this.lead.row,t=this.lead.column,n;if(n=this.session.getFoldAt(e,t,-1))return this.moveCursorTo(n.start.row,n.start.column);var r=this.session.getLine(e).substring(0,t);if(t==0){do e--,r=this.doc.getLine(e);while(e>0&&/^\s*$/.test(r));t=r.length,/\s+$/.test(r)||(r="")}var s=i.stringReverse(r),o=this.$shortWordEndIndex(s);return this.moveCursorTo(e,t-o)},this.moveCursorWordRight=function(){this.session.$selectLongWords?this.moveCursorLongWordRight():this.moveCursorShortWordRight()},this.moveCursorWordLeft=function(){this.session.$selectLongWords?this.moveCursorLongWordLeft():this.moveCursorShortWordLeft()},this.moveCursorBy=function(e,t){var n=this.session.documentToScreenPosition(this.lead.row,this.lead.column);t===0&&(this.$desiredColumn?n.column=this.$desiredColumn:this.$desiredColumn=n.column);var r=this.session.screenToDocumentPosition(n.row+e,n.column);e!==0&&t===0&&r.row===this.lead.row&&r.column===this.lead.column&&this.session.lineWidgets&&this.session.lineWidgets[r.row]&&r.row++,this.moveCursorTo(r.row,r.column+t,t===0)},this.moveCursorToPosition=function(e){this.moveCursorTo(e.row,e.column)},this.moveCursorTo=function(e,t,n){var r=this.session.getFoldAt(e,t,1);r&&(e=r.start.row,t=r.start.column),this.$keepDesiredColumnOnChange=!0,this.lead.setPosition(e,t),this.$keepDesiredColumnOnChange=!1,n||(this.$desiredColumn=null)},this.moveCursorToScreen=function(e,t,n){var r=this.session.screenToDocumentPosition(e,t);this.moveCursorTo(r.row,r.column,n)},this.detach=function(){this.lead.detach(),this.anchor.detach(),this.session=this.doc=null},this.fromOrientedRange=function(e){this.setSelectionRange(e,e.cursor==e.start),this.$desiredColumn=e.desiredColumn||this.$desiredColumn},this.toOrientedRange=function(e){var t=this.getRange();return e?(e.start.column=t.start.column,e.start.row=t.start.row,e.end.column=t.end.column,e.end.row=t.end.row):e=t,e.cursor=this.isBackwards()?e.start:e.end,e.desiredColumn=this.$desiredColumn,e},this.toJSON=function(){if(this.rangeCount)var e=this.ranges.map(function(e){var t=e.clone();return t.isBackwards=e.cursor==e.start,t});else{var e=this.getRange();e.isBackwards=this.isBackwards()}return e},this.fromJSON=function(e){if(e.start==undefined){if(this.rangeList){this.toSingleRange(e[0]);for(var t=e.length;t--;){var n=o.fromPoints(e[t].start,e[t].end);e.isBackwards&&(n.cursor=n.start),this.addRange(n,!0)}return}e=e[0]}this.rangeList&&this.toSingleRange(e),this.setSelectionRange(e,e.isBackwards)},this.isEqual=function(e){if((e.length||this.rangeCount)&&e.length!=this.rangeCount)return!1;if(!e.length||!this.ranges)return this.getRange().isEqual(e);for(var t=this.ranges.length;t--;)if(!this.ranges[t].isEqual(e[t]))return!1;return!0}}).call(u.prototype),t.Selection=u}),define("ace/search",["require","exports","module","ace/lib/lang","ace/lib/oop","ace/range"],function(e,t,n){var r=e("./lib/lang"),i=e("./lib/oop"),s=e("./range").Range,o=function(){this.$options={}};(function(){this.set=function(e){return i.mixin(this.$options,e),this},this.getOptions=function(){return r.copyObject(this.$options)},this.setOptions=function(e){this.$options=e},this.find=function(e){var t=this.$matchIterator(e,this.$options);if(!t)return!1;var n=null;return t.forEach(function(e,t,r){if(!e.start){var i=e.offset+(r||0);n=new s(t,i,t,i+e.length)}else n=e;return!0}),n},this.findAll=function(e){var t=this.$options;if(!t.needle)return[];this.$assembleRegExp(t);var n=t.range,i=n?e.getLines(n.start.row,n.end.row):e.doc.getAllLines(),o=[],u=t.re;if(t.$isMultiLine){var a=u.length,f=i.length-a,l;e:for(var c=u.offset||0;c<=f;c++){for(var h=0;h<a;h++)if(i[c+h].search(u[h])==-1)continue e;var p=i[c],d=i[c+a-1],v=p.length-p.match(u[0])[0].length,m=d.match(u[a-1])[0].length;if(l&&l.end.row===c&&l.end.column>v)continue;o.push(l=new s(c,v,c+a-1,m)),a>2&&(c=c+a-2)}}else for(var g=0;g<i.length;g++){var y=r.getMatchOffsets(i[g],u);for(var h=0;h<y.length;h++){var b=y[h];o.push(new s(g,b.offset,g,b.offset+b.length))}}if(n){var w=n.start.column,E=n.start.column,g=0,h=o.length-1;while(g<h&&o[g].start.column<w&&o[g].start.row==n.start.row)g++;while(g<h&&o[h].end.column>E&&o[h].end.row==n.end.row)h--;o=o.slice(g,h+1);for(g=0,h=o.length;g<h;g++)o[g].start.row+=n.start.row,o[g].end.row+=n.start.row}return o},this.replace=function(e,t){var n=this.$options,r=this.$assembleRegExp(n);if(n.$isMultiLine)return t;if(!r)return;var i=r.exec(e);if(!i||i[0].length!=e.length)return null;t=e.replace(r,t);if(n.preserveCase){t=t.split("");for(var s=Math.min(e.length,e.length);s--;){var o=e[s];o&&o.toLowerCase()!=o?t[s]=t[s].toUpperCase():t[s]=t[s].toLowerCase()}t=t.join("")}return t},this.$matchIterator=function(e,t){var n=this.$assembleRegExp(t);if(!n)return!1;var i=this,o,u=t.backwards;if(t.$isMultiLine)var a=n.length,f=function(t,r,i){var u=t.search(n[0]);if(u==-1)return;for(var f=1;f<a;f++){t=e.getLine(r+f);if(t.search(n[f])==-1)return}var l=t.match(n[a-1])[0].length,c=new s(r,u,r+a-1,l);n.offset==1?(c.start.row--,c.start.column=Number.MAX_VALUE):i&&(c.start.column+=i);if(o(c))return!0};else if(u)var f=function(e,t,i){var s=r.getMatchOffsets(e,n);for(var u=s.length-1;u>=0;u--)if(o(s[u],t,i))return!0};else var f=function(e,t,i){var s=r.getMatchOffsets(e,n);for(var u=0;u<s.length;u++)if(o(s[u],t,i))return!0};return{forEach:function(n){o=n,i.$lineIterator(e,t).forEach(f)}}},this.$assembleRegExp=function(e,t){if(e.needle instanceof RegExp)return e.re=e.needle;var n=e.needle;if(!e.needle)return e.re=!1;e.regExp||(n=r.escapeRegExp(n)),e.wholeWord&&(n="\\b"+n+"\\b");var i=e.caseSensitive?"g":"gi";e.$isMultiLine=!t&&/[\n\r]/.test(n);if(e.$isMultiLine)return e.re=this.$assembleMultilineRegExp(n,i);try{var s=new RegExp(n,i)}catch(o){s=!1}return e.re=s},this.$assembleMultilineRegExp=function(e,t){var n=e.replace(/\r\n|\r|\n/g,"$\n^").split("\n"),r=[];for(var i=0;i<n.length;i++)try{r.push(new RegExp(n[i],t))}catch(s){return!1}return n[0]==""?(r.shift(),r.offset=1):r.offset=0,r},this.$lineIterator=function(e,t){var n=t.backwards==1,r=t.skipCurrent!=0,i=t.range,s=t.start;s||(s=i?i[n?"end":"start"]:e.selection.getRange()),s.start&&(s=s[r!=n?"end":"start"]);var o=i?i.start.row:0,u=i?i.end.row:e.getLength()-1,a=n?function(n){var r=s.row,i=e.getLine(r).substring(0,s.column);if(n(i,r))return;for(r--;r>=o;r--)if(n(e.getLine(r),r))return;if(t.wrap==0)return;for(r=u,o=s.row;r>=o;r--)if(n(e.getLine(r),r))return}:function(n){var r=s.row,i=e.getLine(r).substr(s.column);if(n(i,r,s.column))return;for(r+=1;r<=u;r++)if(n(e.getLine(r),r))return;if(t.wrap==0)return;for(r=o,u=s.row;r<=u;r++)if(n(e.getLine(r),r))return};return{forEach:a}}}).call(o.prototype),t.Search=o}),define("ace/edit_session",["require","exports","module","ace/lib/oop","ace/lib/lang","ace/config","ace/lib/event_emitter","ace/selection","ace/mode/text","ace/range","ace/document","ace/background_tokenizer","ace/search_highlight","ace/edit_session/folding","ace/edit_session/bracket_match"],function(e,t,n){var r=e("./lib/oop"),i=e("./lib/lang"),s=e("./config"),o=e("./lib/event_emitter").EventEmitter,u=e("./selection").Selection,a=e("./mode/text").Mode,f=e("./range").Range,l=e("./document").Document,c=e("./background_tokenizer").BackgroundTokenizer,h=e("./search_highlight").SearchHighlight,p=function(e,t){this.$breakpoints=[],this.$decorations=[],this.$frontMarkers={},this.$backMarkers={},this.$markerId=1,this.$undoSelect=!0,this.$foldData=[],this.$foldData.toString=function(){return this.join("\n")},this.on("changeFold",this.onChangeFold.bind(this)),this.$onChange=this.onChange.bind(this);if(typeof e!="object"||!e.getLine)e=new l(e);this.setDocument(e),this.selection=new u(this),s.resetOptions(this),this.setMode(t),s._signal("session",this)};(function(){function g(e){return e<4352?!1:e>=4352&&e<=4447||e>=4515&&e<=4519||e>=4602&&e<=4607||e>=9001&&e<=9002||e>=11904&&e<=11929||e>=11931&&e<=12019||e>=12032&&e<=12245||e>=12272&&e<=12283||e>=12288&&e<=12350||e>=12353&&e<=12438||e>=12441&&e<=12543||e>=12549&&e<=12589||e>=12593&&e<=12686||e>=12688&&e<=12730||e>=12736&&e<=12771||e>=12784&&e<=12830||e>=12832&&e<=12871||e>=12880&&e<=13054||e>=13056&&e<=19903||e>=19968&&e<=42124||e>=42128&&e<=42182||e>=43360&&e<=43388||e>=44032&&e<=55203||e>=55216&&e<=55238||e>=55243&&e<=55291||e>=63744&&e<=64255||e>=65040&&e<=65049||e>=65072&&e<=65106||e>=65108&&e<=65126||e>=65128&&e<=65131||e>=65281&&e<=65376||e>=65504&&e<=65510}r.implement(this,o),this.setDocument=function(e){this.doc&&this.doc.removeListener("change",this.$onChange),this.doc=e,e.on("change",this.$onChange),this.bgTokenizer&&this.bgTokenizer.setDocument(this.getDocument()),this.resetCaches()},this.getDocument=function(){return this.doc},this.$resetRowCache=function(e){if(!e){this.$docRowCache=[],this.$screenRowCache=[];return}var t=this.$docRowCache.length,n=this.$getRowCacheIndex(this.$docRowCache,e)+1;t>n&&(this.$docRowCache.splice(n,t),this.$screenRowCache.splice(n,t))},this.$getRowCacheIndex=function(e,t){var n=0,r=e.length-1;while(n<=r){var i=n+r>>1,s=e[i];if(t>s)n=i+1;else{if(!(t<s))return i;r=i-1}}return n-1},this.resetCaches=function(){this.$modified=!0,this.$wrapData=[],this.$rowLengthCache=[],this.$resetRowCache(0),this.bgTokenizer&&this.bgTokenizer.start(0)},this.onChangeFold=function(e){var t=e.data;this.$resetRowCache(t.start.row)},this.onChange=function(e){var t=e.data;this.$modified=!0,this.$resetRowCache(t.range.start.row);var n=this.$updateInternalDataOnChange(e);!this.$fromUndo&&this.$undoManager&&!t.ignore&&(this.$deltasDoc.push(t),n&&n.length!=0&&this.$deltasFold.push({action:"removeFolds",folds:n}),this.$informUndoManager.schedule()),this.bgTokenizer.$updateOnChange(t),this._signal("change",e)},this.setValue=function(e){this.doc.setValue(e),this.selection.moveTo(0,0),this.$resetRowCache(0),this.$deltas=[],this.$deltasDoc=[],this.$deltasFold=[],this.setUndoManager(this.$undoManager),this.getUndoManager().reset()},this.getValue=this.toString=function(){return this.doc.getValue()},this.getSelection=function(){return this.selection},this.getState=function(e){return this.bgTokenizer.getState(e)},this.getTokens=function(e){return this.bgTokenizer.getTokens(e)},this.getTokenAt=function(e,t){var n=this.bgTokenizer.getTokens(e),r,i=0;if(t==null)s=n.length-1,i=this.getLine(e).length;else for(var s=0;s<n.length;s++){i+=n[s].value.length;if(i>=t)break}return r=n[s],r?(r.index=s,r.start=i-r.value.length,r):null},this.setUndoManager=function(e){this.$undoManager=e,this.$deltas=[],this.$deltasDoc=[],this.$deltasFold=[],this.$informUndoManager&&this.$informUndoManager.cancel();if(e){var t=this;this.$syncInformUndoManager=function(){t.$informUndoManager.cancel(),t.$deltasFold.length&&(t.$deltas.push({group:"fold",deltas:t.$deltasFold}),t.$deltasFold=[]),t.$deltasDoc.length&&(t.$deltas.push({group:"doc",deltas:t.$deltasDoc}),t.$deltasDoc=[]),t.$deltas.length>0&&e.execute({action:"aceupdate",args:[t.$deltas,t],merge:t.mergeUndoDeltas}),t.mergeUndoDeltas=!1,t.$deltas=[]},this.$informUndoManager=i.delayedCall(this.$syncInformUndoManager)}},this.markUndoGroup=function(){this.$syncInformUndoManager&&this.$syncInformUndoManager()},this.$defaultUndoManager={undo:function(){},redo:function(){},reset:function(){}},this.getUndoManager=function(){return this.$undoManager||this.$defaultUndoManager},this.getTabString=function(){return this.getUseSoftTabs()?i.stringRepeat(" ",this.getTabSize()):"	"},this.setUseSoftTabs=function(e){this.setOption("useSoftTabs",e)},this.getUseSoftTabs=function(){return this.$useSoftTabs&&!this.$mode.$indentWithTabs},this.setTabSize=function(e){this.setOption("tabSize",e)},this.getTabSize=function(){return this.$tabSize},this.isTabStop=function(e){return this.$useSoftTabs&&e.column%this.$tabSize===0},this.$overwrite=!1,this.setOverwrite=function(e){this.setOption("overwrite",e)},this.getOverwrite=function(){return this.$overwrite},this.toggleOverwrite=function(){this.setOverwrite(!this.$overwrite)},this.addGutterDecoration=function(e,t){this.$decorations[e]||(this.$decorations[e]=""),this.$decorations[e]+=" "+t,this._signal("changeBreakpoint",{})},this.removeGutterDecoration=function(e,t){this.$decorations[e]=(this.$decorations[e]||"").replace(" "+t,""),this._signal("changeBreakpoint",{})},this.getBreakpoints=function(){return this.$breakpoints},this.setBreakpoints=function(e){this.$breakpoints=[];for(var t=0;t<e.length;t++)this.$breakpoints[e[t]]="ace_breakpoint";this._signal("changeBreakpoint",{})},this.clearBreakpoints=function(){this.$breakpoints=[],this._signal("changeBreakpoint",{})},this.setBreakpoint=function(e,t){t===undefined&&(t="ace_breakpoint"),t?this.$breakpoints[e]=t:delete this.$breakpoints[e],this._signal("changeBreakpoint",{})},this.clearBreakpoint=function(e){delete this.$breakpoints[e],this._signal("changeBreakpoint",{})},this.addMarker=function(e,t,n,r){var i=this.$markerId++,s={range:e,type:n||"line",renderer:typeof n=="function"?n:null,clazz:t,inFront:!!r,id:i};return r?(this.$frontMarkers[i]=s,this._signal("changeFrontMarker")):(this.$backMarkers[i]=s,this._signal("changeBackMarker")),i},this.addDynamicMarker=function(e,t){if(!e.update)return;var n=this.$markerId++;return e.id=n,e.inFront=!!t,t?(this.$frontMarkers[n]=e,this._signal("changeFrontMarker")):(this.$backMarkers[n]=e,this._signal("changeBackMarker")),e},this.removeMarker=function(e){var t=this.$frontMarkers[e]||this.$backMarkers[e];if(!t)return;var n=t.inFront?this.$frontMarkers:this.$backMarkers;t&&(delete n[e],this._signal(t.inFront?"changeFrontMarker":"changeBackMarker"))},this.getMarkers=function(e){return e?this.$frontMarkers:this.$backMarkers},this.highlight=function(e){if(!this.$searchHighlight){var t=new h(null,"ace_selected-word","text");this.$searchHighlight=this.addDynamicMarker(t)}this.$searchHighlight.setRegexp(e)},this.highlightLines=function(e,t,n,r){typeof t!="number"&&(n=t,t=e),n||(n="ace_step");var i=new f(e,0,t,Infinity);return i.id=this.addMarker(i,n,"fullLine",r),i},this.setAnnotations=function(e){this.$annotations=e,this._signal("changeAnnotation",{})},this.getAnnotations=function(){return this.$annotations||[]},this.clearAnnotations=function(){this.setAnnotations([])},this.$detectNewLine=function(e){var t=e.match(/^.*?(\r?\n)/m);t?this.$autoNewLine=t[1]:this.$autoNewLine="\n"},this.getWordRange=function(e,t){var n=this.getLine(e),r=!1;t>0&&(r=!!n.charAt(t-1).match(this.tokenRe)),r||(r=!!n.charAt(t).match(this.tokenRe));if(r)var i=this.tokenRe;else if(/^\s+$/.test(n.slice(t-1,t+1)))var i=/\s/;else var i=this.nonTokenRe;var s=t;if(s>0){do s--;while(s>=0&&n.charAt(s).match(i));s++}var o=t;while(o<n.length&&n.charAt(o).match(i))o++;return new f(e,s,e,o)},this.getAWordRange=function(e,t){var n=this.getWordRange(e,t),r=this.getLine(n.end.row);while(r.charAt(n.end.column).match(/[ \t]/))n.end.column+=1;return n},this.setNewLineMode=function(e){this.doc.setNewLineMode(e)},this.getNewLineMode=function(){return this.doc.getNewLineMode()},this.setUseWorker=function(e){this.setOption("useWorker",e)},this.getUseWorker=function(){return this.$useWorker},this.onReloadTokenizer=function(e){var t=e.data;this.bgTokenizer.start(t.first),this._signal("tokenizerUpdate",e)},this.$modes={},this.$mode=null,this.$modeId=null,this.setMode=function(e,t){if(e&&typeof e=="object"){if(e.getTokenizer)return this.$onChangeMode(e);var n=e,r=n.path}else r=e||"ace/mode/text";this.$modes["ace/mode/text"]||(this.$modes["ace/mode/text"]=new a);if(this.$modes[r]&&!n){this.$onChangeMode(this.$modes[r]),t&&t();return}this.$modeId=r,s.loadModule(["mode",r],function(e){if(this.$modeId!==r)return t&&t();if(this.$modes[r]&&!n)return this.$onChangeMode(this.$modes[r]);e&&e.Mode&&(e=new e.Mode(n),n||(this.$modes[r]=e,e.$id=r),this.$onChangeMode(e),t&&t())}.bind(this)),this.$mode||this.$onChangeMode(this.$modes["ace/mode/text"],!0)},this.$onChangeMode=function(e,t){t||(this.$modeId=e.$id);if(this.$mode===e)return;this.$mode=e,this.$stopWorker(),this.$useWorker&&this.$startWorker();var n=e.getTokenizer();if(n.addEventListener!==undefined){var r=this.onReloadTokenizer.bind(this);n.addEventListener("update",r)}if(!this.bgTokenizer){this.bgTokenizer=new c(n);var i=this;this.bgTokenizer.addEventListener("update",function(e){i._signal("tokenizerUpdate",e)})}else this.bgTokenizer.setTokenizer(n);this.bgTokenizer.setDocument(this.getDocument()),this.tokenRe=e.tokenRe,this.nonTokenRe=e.nonTokenRe,t||(this.$options.wrapMethod.set.call(this,this.$wrapMethod),this.$setFolding(e.foldingRules),this.bgTokenizer.start(0),this._emit("changeMode"))},this.$stopWorker=function(){this.$worker&&this.$worker.terminate(),this.$worker=null},this.$startWorker=function(){if(typeof Worker!="undefined"&&!e.noWorker)try{this.$worker=this.$mode.createWorker(this)}catch(t){console.log("Could not load worker"),console.log(t),this.$worker=null}else this.$worker=null},this.getMode=function(){return this.$mode},this.$scrollTop=0,this.setScrollTop=function(e){if(this.$scrollTop===e||isNaN(e))return;this.$scrollTop=e,this._signal("changeScrollTop",e)},this.getScrollTop=function(){return this.$scrollTop},this.$scrollLeft=0,this.setScrollLeft=function(e){if(this.$scrollLeft===e||isNaN(e))return;this.$scrollLeft=e,this._signal("changeScrollLeft",e)},this.getScrollLeft=function(){return this.$scrollLeft},this.getScreenWidth=function(){return this.$computeWidth(),this.lineWidgets?Math.max(this.getLineWidgetMaxWidth(),this.screenWidth):this.screenWidth},this.getLineWidgetMaxWidth=function(){if(this.lineWidgetsWidth!=null)return this.lineWidgetsWidth;var e=0;return this.lineWidgets.forEach(function(t){t&&t.screenWidth>e&&(e=t.screenWidth)}),this.lineWidgetWidth=e},this.$computeWidth=function(e){if(this.$modified||e){this.$modified=!1;if(this.$useWrapMode)return this.screenWidth=this.$wrapLimit;var t=this.doc.getAllLines(),n=this.$rowLengthCache,r=0,i=0,s=this.$foldData[i],o=s?s.start.row:Infinity,u=t.length;for(var a=0;a<u;a++){if(a>o){a=s.end.row+1;if(a>=u)break;s=this.$foldData[i++],o=s?s.start.row:Infinity}n[a]==null&&(n[a]=this.$getStringScreenWidth(t[a])[0]),n[a]>r&&(r=n[a])}this.screenWidth=r}},this.getLine=function(e){return this.doc.getLine(e)},this.getLines=function(e,t){return this.doc.getLines(e,t)},this.getLength=function(){return this.doc.getLength()},this.getTextRange=function(e){return this.doc.getTextRange(e||this.selection.getRange())},this.insert=function(e,t){return this.doc.insert(e,t)},this.remove=function(e){return this.doc.remove(e)},this.undoChanges=function(e,t){if(!e.length)return;this.$fromUndo=!0;var n=null;for(var r=e.length-1;r!=-1;r--){var i=e[r];i.group=="doc"?(this.doc.revertDeltas(i.deltas),n=this.$getUndoSelection(i.deltas,!0,n)):i.deltas.forEach(function(e){this.addFolds(e.folds)},this)}return this.$fromUndo=!1,n&&this.$undoSelect&&!t&&this.selection.setSelectionRange(n),n},this.redoChanges=function(e,t){if(!e.length)return;this.$fromUndo=!0;var n=null;for(var r=0;r<e.length;r++){var i=e[r];i.group=="doc"&&(this.doc.applyDeltas(i.deltas),n=this.$getUndoSelection(i.deltas,!1,n))}return this.$fromUndo=!1,n&&this.$undoSelect&&!t&&this.selection.setSelectionRange(n),n},this.setUndoSelect=function(e){this.$undoSelect=e},this.$getUndoSelection=function(e,t,n){function r(e){var n=e.action==="insertText"||e.action==="insertLines";return t?!n:n}var i=e[0],s,o,u=!1;r(i)?(s=f.fromPoints(i.range.start,i.range.end),u=!0):(s=f.fromPoints(i.range.start,i.range.start),u=!1);for(var a=1;a<e.length;a++)i=e[a],r(i)?(o=i.range.start,s.compare(o.row,o.column)==-1&&s.setStart(i.range.start),o=i.range.end,s.compare(o.row,o.column)==1&&s.setEnd(i.range.end),u=!0):(o=i.range.start,s.compare(o.row,o.column)==-1&&(s=f.fromPoints(i.range.start,i.range.start)),u=!1);if(n!=null){f.comparePoints(n.start,s.start)===0&&(n.start.column+=s.end.column-s.start.column,n.end.column+=s.end.column-s.start.column);var l=n.compareRange(s);l==1?s.setStart(n.start):l==-1&&s.setEnd(n.end)}return s},this.replace=function(e,t){return this.doc.replace(e,t)},this.moveText=function(e,t,n){var r=this.getTextRange(e),i=this.getFoldsInRange(e),s=f.fromPoints(t,t);if(!n){this.remove(e);var o=e.start.row-e.end.row,u=o?-e.end.column:e.start.column-e.end.column;u&&(s.start.row==e.end.row&&s.start.column>e.end.column&&(s.start.column+=u),s.end.row==e.end.row&&s.end.column>e.end.column&&(s.end.column+=u)),o&&s.start.row>=e.end.row&&(s.start.row+=o,s.end.row+=o)}s.end=this.insert(s.start,r);if(i.length){var a=e.start,l=s.start,o=l.row-a.row,u=l.column-a.column;this.addFolds(i.map(function(e){return e=e.clone(),e.start.row==a.row&&(e.start.column+=u),e.end.row==a.row&&(e.end.column+=u),e.start.row+=o,e.end.row+=o,e}))}return s},this.indentRows=function(e,t,n){n=n.replace(/\t/g,this.getTabString());for(var r=e;r<=t;r++)this.insert({row:r,column:0},n)},this.outdentRows=function(e){var t=e.collapseRows(),n=new f(0,0,0,0),r=this.getTabSize();for(var i=t.start.row;i<=t.end.row;++i){var s=this.getLine(i);n.start.row=i,n.end.row=i;for(var o=0;o<r;++o)if(s.charAt(o)!=" ")break;o<r&&s.charAt(o)=="	"?(n.start.column=o,n.end.column=o+1):(n.start.column=0,n.end.column=o),this.remove(n)}},this.$moveLines=function(e,t,n){e=this.getRowFoldStart(e),t=this.getRowFoldEnd(t);if(n<0){var r=this.getRowFoldStart(e+n);if(r<0)return 0;var i=r-e}else if(n>0){var r=this.getRowFoldEnd(t+n);if(r>this.doc.getLength()-1)return 0;var i=r-t}else{e=this.$clipRowToDocument(e),t=this.$clipRowToDocument(t);var i=t-e+1}var s=new f(e,0,t,Number.MAX_VALUE),o=this.getFoldsInRange(s).map(function(e){return e=e.clone(),e.start.row+=i,e.end.row+=i,e}),u=n==0?this.doc.getLines(e,t):this.doc.removeLines(e,t);return this.doc.insertLines(e+i,u),o.length&&this.addFolds(o),i},this.moveLinesUp=function(e,t){return this.$moveLines(e,t,-1)},this.moveLinesDown=function(e,t){return this.$moveLines(e,t,1)},this.duplicateLines=function(e,t){return this.$moveLines(e,t,0)},this.$clipRowToDocument=function(e){return Math.max(0,Math.min(e,this.doc.getLength()-1))},this.$clipColumnToRow=function(e,t){return t<0?0:Math.min(this.doc.getLine(e).length,t)},this.$clipPositionToDocument=function(e,t){t=Math.max(0,t);if(e<0)e=0,t=0;else{var n=this.doc.getLength();e>=n?(e=n-1,t=this.doc.getLine(n-1).length):t=Math.min(this.doc.getLine(e).length,t)}return{row:e,column:t}},this.$clipRangeToDocument=function(e){e.start.row<0?(e.start.row=0,e.start.column=0):e.start.column=this.$clipColumnToRow(e.start.row,e.start.column);var t=this.doc.getLength()-1;return e.end.row>t?(e.end.row=t,e.end.column=this.doc.getLine(t).length):e.end.column=this.$clipColumnToRow(e.end.row,e.end.column),e},this.$wrapLimit=80,this.$useWrapMode=!1,this.$wrapLimitRange={min:null,max:null},this.setUseWrapMode=function(e){if(e!=this.$useWrapMode){this.$useWrapMode=e,this.$modified=!0,this.$resetRowCache(0);if(e){var t=this.getLength();this.$wrapData=Array(t),this.$updateWrapData(0,t-1)}this._signal("changeWrapMode")}},this.getUseWrapMode=function(){return this.$useWrapMode},this.setWrapLimitRange=function(e,t){if(this.$wrapLimitRange.min!==e||this.$wrapLimitRange.max!==t)this.$wrapLimitRange={min:e,max:t},this.$modified=!0,this._signal("changeWrapMode")},this.adjustWrapLimit=function(e,t){var n=this.$wrapLimitRange;n.max<0&&(n={min:t,max:t});var r=this.$constrainWrapLimit(e,n.min,n.max);return r!=this.$wrapLimit&&r>1?(this.$wrapLimit=r,this.$modified=!0,this.$useWrapMode&&(this.$updateWrapData(0,this.getLength()-1),this.$resetRowCache(0),this._signal("changeWrapLimit")),!0):!1},this.$constrainWrapLimit=function(e,t,n){return t&&(e=Math.max(t,e)),n&&(e=Math.min(n,e)),e},this.getWrapLimit=function(){return this.$wrapLimit},this.setWrapLimit=function(e){this.setWrapLimitRange(e,e)},this.getWrapLimitRange=function(){return{min:this.$wrapLimitRange.min,max:this.$wrapLimitRange.max}},this.$updateInternalDataOnChange=function(e){var t=this.$useWrapMode,n,r=e.data.action,i=e.data.range.start.row,s=e.data.range.end.row,o=e.data.range.start,u=e.data.range.end,a=null;r.indexOf("Lines")!=-1?(r=="insertLines"?s=i+e.data.lines.length:s=i,n=e.data.lines?e.data.lines.length:s-i):n=s-i,this.$updating=!0;if(n!=0)if(r.indexOf("remove")!=-1){this[t?"$wrapData":"$rowLengthCache"].splice(i,n);var f=this.$foldData;a=this.getFoldsInRange(e.data.range),this.removeFolds(a);var l=this.getFoldLine(u.row),c=0;if(l){l.addRemoveChars(u.row,u.column,o.column-u.column),l.shiftRow(-n);var h=this.getFoldLine(i);h&&h!==l&&(h.merge(l),l=h),c=f.indexOf(l)+1}for(c;c<f.length;c++){var l=f[c];l.start.row>=u.row&&l.shiftRow(-n)}s=i}else{var p=Array(n);p.unshift(i,0);var d=t?this.$wrapData:this.$rowLengthCache;d.splice.apply(d,p);var f=this.$foldData,l=this.getFoldLine(i),c=0;if(l){var v=l.range.compareInside(o.row,o.column);v==0?(l=l.split(o.row,o.column),l.shiftRow(n),l.addRemoveChars(s,0,u.column-o.column)):v==-1&&(l.addRemoveChars(i,0,u.column-o.column),l.shiftRow(n)),c=f.indexOf(l)+1}for(c;c<f.length;c++){var l=f[c];l.start.row>=i&&l.shiftRow(n)}}else{n=Math.abs(e.data.range.start.column-e.data.range.end.column),r.indexOf("remove")!=-1&&(a=this.getFoldsInRange(e.data.range),this.removeFolds(a),n=-n);var l=this.getFoldLine(i);l&&l.addRemoveChars(i,o.column,n)}return t&&this.$wrapData.length!=this.doc.getLength()&&console.error("doc.getLength() and $wrapData.length have to be the same!"),this.$updating=!1,t?this.$updateWrapData(i,s):this.$updateRowLengthCache(i,s),a},this.$updateRowLengthCache=function(e,t,n){this.$rowLengthCache[e]=null,this.$rowLengthCache[t]=null},this.$updateWrapData=function(e,t){var n=this.doc.getAllLines(),r=this.getTabSize(),i=this.$wrapData,s=this.$wrapLimit,o,a,f=e;t=Math.min(t,n.length-1);while(f<=t)a=this.getFoldLine(f,a),a?(o=[],a.walk(function(e,t,r,i){var s;if(e!=null){s=this.$getDisplayTokens(e,o.length),s[0]=u;for(var a=1;a<s.length;a++)s[a]=l}else s=this.$getDisplayTokens(n[t].substring(i,r),o.length);o=o.concat(s)}.bind(this),a.end.row,n[a.end.row].length+1),i[a.start.row]=this.$computeWrapSplits(o,s,r),f=a.end.row+1):(o=this.$getDisplayTokens(n[f]),i[f]=this.$computeWrapSplits(o,s,r),f++)};var t=1,n=2,u=3,l=4,p=9,d=10,v=11,m=12;this.$computeWrapSplits=function(e,t){function a(t){var r=e.slice(i,t),o=r.length;r.join("").replace(/12/g,function(){o-=1}).replace(/2/g,function(){o-=1}),s+=o,n.push(s),i=t}if(e.length==0)return[];var n=[],r=e.length,i=0,s=0,o=this.$wrapAsCode;while(r-i>t){var f=i+t;if(e[f-1]>=d&&e[f]>=d){a(f);continue}if(e[f]==u||e[f]==l){for(f;f!=i-1;f--)if(e[f]==u)break;if(f>i){a(f);continue}f=i+t;for(f;f<e.length;f++)if(e[f]!=l)break;if(f==e.length)break;a(f);continue}var c=Math.max(f-(o?10:t-(t>>2)),i-1);while(f>c&&e[f]<u)f--;if(o){while(f>c&&e[f]<u)f--;while(f>c&&e[f]==p)f--}else while(f>c&&e[f]<d)f--;if(f>c){a(++f);continue}f=i+t,a(f)}return n},this.$getDisplayTokens=function(e,r){var i=[],s;r=r||0;for(var o=0;o<e.length;o++){var u=e.charCodeAt(o);if(u==9){s=this.getScreenTabSize(i.length+r),i.push(v);for(var a=1;a<s;a++)i.push(m)}else u==32?i.push(d):u>39&&u<48||u>57&&u<64?i.push(p):u>=4352&&g(u)?i.push(t,n):i.push(t)}return i},this.$getStringScreenWidth=function(e,t,n){if(t==0)return[0,0];t==null&&(t=Infinity),n=n||0;var r,i;for(i=0;i<e.length;i++){r=e.charCodeAt(i),r==9?n+=this.getScreenTabSize(n):r>=4352&&g(r)?n+=2:n+=1;if(n>t)break}return[n,i]},this.lineWidgets=null,this.getRowLength=function(e){if(this.lineWidgets)var t=this.lineWidgets[e]&&this.lineWidgets[e].rowCount||0;else t=0;return!this.$useWrapMode||!this.$wrapData[e]?1+t:this.$wrapData[e].length+1+t},this.getRowLineCount=function(e){return!this.$useWrapMode||!this.$wrapData[e]?1:this.$wrapData[e].length+1},this.getScreenLastRowColumn=function(e){var t=this.screenToDocumentPosition(e,Number.MAX_VALUE);return this.documentToScreenColumn(t.row,t.column)},this.getDocumentLastRowColumn=function(e,t){var n=this.documentToScreenRow(e,t);return this.getScreenLastRowColumn(n)},this.getDocumentLastRowColumnPosition=function(e,t){var n=this.documentToScreenRow(e,t);return this.screenToDocumentPosition(n,Number.MAX_VALUE/10)},this.getRowSplitData=function(e){return this.$useWrapMode?this.$wrapData[e]:undefined},this.getScreenTabSize=function(e){return this.$tabSize-e%this.$tabSize},this.screenToDocumentRow=function(e,t){return this.screenToDocumentPosition(e,t).row},this.screenToDocumentColumn=function(e,t){return this.screenToDocumentPosition(e,t).column},this.screenToDocumentPosition=function(e,t){if(e<0)return{row:0,column:0};var n,r=0,i=0,s,o=0,u=0,a=this.$screenRowCache,f=this.$getRowCacheIndex(a,e),l=a.length;if(l&&f>=0)var o=a[f],r=this.$docRowCache[f],c=e>a[l-1];else var c=!l;var h=this.getLength()-1,p=this.getNextFoldLine(r),d=p?p.start.row:Infinity;while(o<=e){u=this.getRowLength(r);if(o+u>e||r>=h)break;o+=u,r++,r>d&&(r=p.end.row+1,p=this.getNextFoldLine(r,p),d=p?p.start.row:Infinity),c&&(this.$docRowCache.push(r),this.$screenRowCache.push(o))}if(p&&p.start.row<=r)n=this.getFoldDisplayLine(p),r=p.start.row;else{if(o+u<=e||r>h)return{row:h,column:this.getLine(h).length};n=this.getLine(r),p=null}if(this.$useWrapMode){var v=this.$wrapData[r];if(v){var m=Math.floor(e-o);s=v[m],m>0&&v.length&&(i=v[m-1]||v[v.length-1],n=n.substring(i))}}return i+=this.$getStringScreenWidth(n,t)[1],this.$useWrapMode&&i>=s&&(i=s-1),p?p.idxToPosition(i):{row:r,column:i}},this.documentToScreenPosition=function(e,t){if(typeof t=="undefined")var n=this.$clipPositionToDocument(e.row,e.column);else n=this.$clipPositionToDocument(e,t);e=n.row,t=n.column;var r=0,i=null,s=null;s=this.getFoldAt(e,t,1),s&&(e=s.start.row,t=s.start.column);var o,u=0,a=this.$docRowCache,f=this.$getRowCacheIndex(a,e),l=a.length;if(l&&f>=0)var u=a[f],r=this.$screenRowCache[f],c=e>a[l-1];else var c=!l;var h=this.getNextFoldLine(u),p=h?h.start.row:Infinity;while(u<e){if(u>=p){o=h.end.row+1;if(o>e)break;h=this.getNextFoldLine(o,h),p=h?h.start.row:Infinity}else o=u+1;r+=this.getRowLength(u),u=o,c&&(this.$docRowCache.push(u),this.$screenRowCache.push(r))}var d="";h&&u>=p?(d=this.getFoldDisplayLine(h,e,t),i=h.start.row):(d=this.getLine(e).substring(0,t),i=e);if(this.$useWrapMode){var v=this.$wrapData[i];if(v){var m=0;while(d.length>=v[m])r++,m++;d=d.substring(v[m-1]||0,d.length)}}return{row:r,column:this.$getStringScreenWidth(d)[0]}},this.documentToScreenColumn=function(e,t){return this.documentToScreenPosition(e,t).column},this.documentToScreenRow=function(e,t){return this.documentToScreenPosition(e,t).row},this.getScreenLength=function(){var e=0,t=null;if(!this.$useWrapMode){e=this.getLength();var n=this.$foldData;for(var r=0;r<n.length;r++)t=n[r],e-=t.end.row-t.start.row}else{var i=this.$wrapData.length,s=0,r=0,t=this.$foldData[r++],o=t?t.start.row:Infinity;while(s<i){var u=this.$wrapData[s];e+=u?u.length+1:1,s++,s>o&&(s=t.end.row+1,t=this.$foldData[r++],o=t?t.start.row:Infinity)}}return this.lineWidgets&&(e+=this.$getWidgetScreenLength()),e},this.$setFontMetrics=function(e){}}).call(p.prototype),e("./edit_session/folding").Folding.call(p.prototype),e("./edit_session/bracket_match").BracketMatch.call(p.prototype),s.defineOptions(p.prototype,"session",{wrap:{set:function(e){!e||e=="off"?e=!1:e=="free"?e=!0:e=="printMargin"?e=-1:typeof e=="string"&&(e=parseInt(e,10)||!1);if(this.$wrap==e)return;if(!e)this.setUseWrapMode(!1);else{var t=typeof e=="number"?e:null;this.setWrapLimitRange(t,t),this.setUseWrapMode(!0)}this.$wrap=e},get:function(){return this.getUseWrapMode()?this.$wrap==-1?"printMargin":this.getWrapLimitRange().min?this.$wrap:"free":"off"},handlesSet:!0},wrapMethod:{set:function(e){e=e=="auto"?this.$mode.type!="text":e!="text",e!=this.$wrapAsCode&&(this.$wrapAsCode=e,this.$useWrapMode&&(this.$modified=!0,this.$resetRowCache(0),this.$updateWrapData(0,this.getLength()-1)))},initialValue:"auto"},firstLineNumber:{set:function(){this._signal("changeBreakpoint")},initialValue:1},useWorker:{set:function(e){this.$useWorker=e,this.$stopWorker(),e&&this.$startWorker()},initialValue:!0},useSoftTabs:{initialValue:!0},tabSize:{set:function(e){if(isNaN(e)||this.$tabSize===e)return;this.$modified=!0,this.$rowLengthCache=[],this.$tabSize=e,this._signal("changeTabSize")},initialValue:4,handlesSet:!0},overwrite:{set:function(e){this._signal("changeOverwrite")},initialValue:!1},newLineMode:{set:function(e){this.doc.setNewLineMode(e)},get:function(){return this.doc.getNewLineMode()},handlesSet:!0},mode:{set:function(e){this.setMode(e)},get:function(){return this.$modeId}}}),t.EditSession=p}),define("ace/commands/command_manager",["require","exports","module","ace/lib/oop","ace/keyboard/hash_handler","ace/lib/event_emitter"],function(e,t,n){var r=e("../lib/oop"),i=e("../keyboard/hash_handler").HashHandler,s=e("../lib/event_emitter").EventEmitter,o=function(e,t){i.call(this,t,e),this.byName=this.commands,this.setDefaultHandler("exec",function(e){return e.command.exec(e.editor,e.args||{})})};r.inherits(o,i),function(){r.implement(this,s),this.exec=function(e,t,n){typeof e=="string"&&(e=this.commands[e]);if(!e)return!1;if(t&&t.$readOnly&&!e.readOnly)return!1;var r={editor:t,command:e,args:n},i=this._emit("exec",r);return this._signal("afterExec",r),i===!1?!1:!0},this.toggleRecording=function(e){if(this.$inReplay)return;return e&&e._emit("changeStatus"),this.recording?(this.macro.pop(),this.removeEventListener("exec",this.$addCommandToMacro),this.macro.length||(this.macro=this.oldMacro),this.recording=!1):(this.$addCommandToMacro||(this.$addCommandToMacro=function(e){this.macro.push([e.command,e.args])}.bind(this)),this.oldMacro=this.macro,this.macro=[],this.on("exec",this.$addCommandToMacro),this.recording=!0)},this.replay=function(e){if(this.$inReplay||!this.macro)return;if(this.recording)return this.toggleRecording(e);try{this.$inReplay=!0,this.macro.forEach(function(t){typeof t=="string"?this.exec(t,e):this.exec(t[0],e,t[1])},this)}finally{this.$inReplay=!1}},this.trimMacro=function(e){return e.map(function(e){return typeof e[0]!="string"&&(e[0]=e[0].name),e[1]||(e=e[0]),e})}}.call(o.prototype),t.CommandManager=o}),define("ace/keyboard/keybinding",["require","exports","module","ace/lib/keys","ace/lib/event"],function(e,t,n){var r=e("../lib/keys"),i=e("../lib/event"),s=function(e){this.$editor=e,this.$data={},this.$handlers=[],this.setDefaultHandler(e.commands)};(function(){this.setDefaultHandler=function(e){this.removeKeyboardHandler(this.$defaultHandler),this.$defaultHandler=e,this.addKeyboardHandler(e,0),this.$data={editor:this.$editor}},this.setKeyboardHandler=function(e){var t=this.$handlers;if(t[t.length-1]==e)return;while(t[t.length-1]&&t[t.length-1]!=this.$defaultHandler)this.removeKeyboardHandler(t[t.length-1]);this.addKeyboardHandler(e,1)},this.addKeyboardHandler=function(e,t){if(!e)return;typeof e=="function"&&!e.handleKeyboard&&(e.handleKeyboard=e);var n=this.$handlers.indexOf(e);n!=-1&&this.$handlers.splice(n,1),t==undefined?this.$handlers.push(e):this.$handlers.splice(t,0,e),n==-1&&e.attach&&e.attach(this.$editor)},this.removeKeyboardHandler=function(e){var t=this.$handlers.indexOf(e);return t==-1?!1:(this.$handlers.splice(t,1),e.detach&&e.detach(this.$editor),!0)},this.getKeyboardHandler=function(){return this.$handlers[this.$handlers.length-1]},this.$callKeyboardHandlers=function(e,t,n,r){var s,o=!1,u=this.$editor.commands;for(var a=this.$handlers.length;a--;){s=this.$handlers[a].handleKeyboard(this.$data,e,t,n,r);if(!s||!s.command)continue;s.command=="null"?o=!0:o=u.exec(s.command,this.$editor,s.args,r),o&&r&&e!=-1&&s.passEvent!=1&&s.command.passEvent!=1&&i.stopEvent(r);if(o)break}return o},this.onCommandKey=function(e,t,n){var i=r.keyCodeToString(n);this.$callKeyboardHandlers(t,i,n,e)},this.onTextInput=function(e){var t=this.$callKeyboardHandlers(-1,e);t||this.$editor.commands.exec("insertstring",this.$editor,e)}}).call(s.prototype),t.KeyBinding=s}),define("ace/keyboard/hash_handler",["require","exports","module","ace/lib/keys","ace/lib/useragent"],function(e,t,n){function s(e,t){this.platform=t||(i.isMac?"mac":"win"),this.commands={},this.commandKeyBinding={};if(this.__defineGetter__&&this.__defineSetter__&&typeof console!="undefined"&&console.error){var n=!1,r=function(){n||(n=!0,console.error("commmandKeyBinding has too many m's. use commandKeyBinding"))};this.__defineGetter__("commmandKeyBinding",function(){return r(),this.commandKeyBinding}),this.__defineSetter__("commmandKeyBinding",function(e){return r(),this.commandKeyBinding=e})}else this.commmandKeyBinding=this.commandKeyBinding;this.addCommands(e)}var r=e("../lib/keys"),i=e("../lib/useragent");(function(){this.addCommand=function(e){this.commands[e.name]&&this.removeCommand(e),this.commands[e.name]=e,e.bindKey&&this._buildKeyHash(e)},this.removeCommand=function(e){var t=typeof e=="string"?e:e.name;e=this.commands[t],delete this.commands[t];var n=this.commandKeyBinding;for(var r in n)for(var i in n[r])n[r][i]==e&&delete n[r][i]},this.bindKey=function(e,t){if(!e)return;if(typeof t=="function"){this.addCommand({exec:t,bindKey:e,name:t.name||e});return}var n=this.commandKeyBinding;e.split("|").forEach(function(e){var r=this.parseKeys(e,t),i=r.hashId;(n[i]||(n[i]={}))[r.key]=t},this)},this.addCommands=function(e){e&&Object.keys(e).forEach(function(t){var n=e[t];if(!n)return;if(typeof n=="string")return this.bindKey(n,t);typeof n=="function"&&(n={exec:n});if(typeof n!="object")return;n.name||(n.name=t),this.addCommand(n)},this)},this.removeCommands=function(e){Object.keys(e).forEach(function(t){this.removeCommand(e[t])},this)},this.bindKeys=function(e){Object.keys(e).forEach(function(t){this.bindKey(t,e[t])},this)},this._buildKeyHash=function(e){var t=e.bindKey;if(!t)return;var n=typeof t=="string"?t:t[this.platform];this.bindKey(n,e)},this.parseKeys=function(e){e.indexOf(" ")!=-1&&(e=e.split(/\s+/).pop());var t=e.toLowerCase().split(/[\-\+]([\-\+])?/).filter(function(e){return e}),n=t.pop(),i=r[n];if(r.FUNCTION_KEYS[i])n=r.FUNCTION_KEYS[i].toLowerCase();else{if(!t.length)return{key:n,hashId:-1};if(t.length==1&&t[0]=="shift")return{key:n.toUpperCase(),hashId:-1}}var s=0;for(var o=t.length;o--;){var u=r.KEY_MODS[t[o]];if(u==null)return typeof console!="undefined"&&console.error("invalid modifier "+t[o]+" in "+e),!1;s|=u}return{key:n,hashId:s}},this.findKeyCommand=function(t,n){var r=this.commandKeyBinding;return r[t]&&r[t][n]},this.handleKeyboard=function(e,t,n,r){return{command:this.findKeyCommand(t,n)}}}).call(s.prototype),t.HashHandler=s}),define("ace/mouse/fold_handler",["require","exports","module"],function(e,t,n){function r(e){e.on("click",function(t){var n=t.getDocumentPosition(),r=e.session,i=r.getFoldAt(n.row,n.column,1);i&&(t.getAccelKey()?r.removeFold(i):r.expandFold(i),t.stop())}),e.on("gutterclick",function(t){var n=e.renderer.$gutterLayer.getRegion(t);if(n=="foldWidgets"){var r=t.getDocumentPosition().row,i=e.session;i.foldWidgets&&i.foldWidgets[r]&&e.session.onFoldWidgetClick(r,t),e.isFocused()||e.focus(),t.stop()}}),e.on("gutterdblclick",function(t){var n=e.renderer.$gutterLayer.getRegion(t);if(n=="foldWidgets"){var r=t.getDocumentPosition().row,i=e.session,s=i.getParentFoldRangeData(r,!0),o=s.range||s.firstRange;if(o){r=o.start.row;var u=i.getFoldAt(r,i.getLine(r).length,1);u?i.removeFold(u):(i.addFold("...",o),e.renderer.scrollCursorIntoView({row:o.start.row,column:0}))}t.stop()}})}t.FoldHandler=r}),define("ace/commands/default_commands",["require","exports","module","ace/lib/lang","ace/config"],function(e,t,n){function s(e,t){return{win:e,mac:t}}var r=e("../lib/lang"),i=e("../config");t.commands=[{name:"showSettingsMenu",bindKey:s("Ctrl-,","Command-,"),exec:function(e){i.loadModule("ace/ext/settings_menu",function(t){t.init(e),e.showSettingsMenu()})},readOnly:!0},{name:"goToNextError",bindKey:s("Alt-E","Ctrl-E"),exec:function(e){i.loadModule("ace/ext/error_marker",function(t){t.showErrorMarker(e,1)})},scrollIntoView:"animate",readOnly:!0},{name:"goToPreviousError",bindKey:s("Alt-Shift-E","Ctrl-Shift-E"),exec:function(e){i.loadModule("ace/ext/error_marker",function(t){t.showErrorMarker(e,-1)})},scrollIntoView:"animate",readOnly:!0},{name:"selectall",bindKey:s("Ctrl-A","Command-A"),exec:function(e){e.selectAll()},readOnly:!0},{name:"centerselection",bindKey:s(null,"Ctrl-L"),exec:function(e){e.centerSelection()},readOnly:!0},{name:"gotoline",bindKey:s("Ctrl-L","Command-L"),exec:function(e){var t=parseInt(prompt("Enter line number:"),10);isNaN(t)||e.gotoLine(t)},readOnly:!0},{name:"fold",bindKey:s("Alt-L|Ctrl-F1","Command-Alt-L|Command-F1"),exec:function(e){e.session.toggleFold(!1)},scrollIntoView:"center",readOnly:!0},{name:"unfold",bindKey:s("Alt-Shift-L|Ctrl-Shift-F1","Command-Alt-Shift-L|Command-Shift-F1"),exec:function(e){e.session.toggleFold(!0)},scrollIntoView:"center",readOnly:!0},{name:"toggleFoldWidget",bindKey:s("F2","F2"),exec:function(e){e.session.toggleFoldWidget()},scrollIntoView:"center",readOnly:!0},{name:"toggleParentFoldWidget",bindKey:s("Alt-F2","Alt-F2"),exec:function(e){e.session.toggleFoldWidget(!0)},scrollIntoView:"center",readOnly:!0},{name:"foldall",bindKey:s("Ctrl-Alt-0","Ctrl-Command-Option-0"),exec:function(e){e.session.foldAll()},scrollIntoView:"center",readOnly:!0},{name:"foldOther",bindKey:s("Alt-0","Command-Option-0"),exec:function(e){e.session.foldAll(),e.session.unfold(e.selection.getAllRanges())},scrollIntoView:"center",readOnly:!0},{name:"unfoldall",bindKey:s("Alt-Shift-0","Command-Option-Shift-0"),exec:function(e){e.session.unfold()},scrollIntoView:"center",readOnly:!0},{name:"findnext",bindKey:s("Ctrl-K","Command-G"),exec:function(e){e.findNext()},readOnly:!0},{name:"findprevious",bindKey:s("Ctrl-Shift-K","Command-Shift-G"),exec:function(e){e.findPrevious()},readOnly:!0},{name:"selectOrFindNext",bindKey:s("ALt-K","Ctrl-G"),exec:function(e){e.selection.isEmpty()?e.selection.selectWord():e.findNext()},readOnly:!0},{name:"selectOrFindPrevious",bindKey:s("Alt-Shift-K","Ctrl-Shift-G"),exec:function(e){e.selection.isEmpty()?e.selection.selectWord():e.findPrevious()},readOnly:!0},{name:"find",bindKey:s("Ctrl-F","Command-F"),exec:function(e){i.loadModule("ace/ext/searchbox",function(t){t.Search(e)})},readOnly:!0},{name:"overwrite",bindKey:"Insert",exec:function(e){e.toggleOverwrite()},readOnly:!0},{name:"selecttostart",bindKey:s("Ctrl-Shift-Home","Command-Shift-Up"),exec:function(e){e.getSelection().selectFileStart()},multiSelectAction:"forEach",readOnly:!0,scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"gotostart",bindKey:s("Ctrl-Home","Command-Home|Command-Up"),exec:function(e){e.navigateFileStart()},multiSelectAction:"forEach",readOnly:!0,scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"selectup",bindKey:s("Shift-Up","Shift-Up"),exec:function(e){e.getSelection().selectUp()},multiSelectAction:"forEach",readOnly:!0},{name:"golineup",bindKey:s("Up","Up|Ctrl-P"),exec:function(e,t){e.navigateUp(t.times)},multiSelectAction:"forEach",readOnly:!0},{name:"selecttoend",bindKey:s("Ctrl-Shift-End","Command-Shift-Down"),exec:function(e){e.getSelection().selectFileEnd()},multiSelectAction:"forEach",readOnly:!0,scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"gotoend",bindKey:s("Ctrl-End","Command-End|Command-Down"),exec:function(e){e.navigateFileEnd()},multiSelectAction:"forEach",readOnly:!0,scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"selectdown",bindKey:s("Shift-Down","Shift-Down"),exec:function(e){e.getSelection().selectDown()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"golinedown",bindKey:s("Down","Down|Ctrl-N"),exec:function(e,t){e.navigateDown(t.times)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectwordleft",bindKey:s("Ctrl-Shift-Left","Option-Shift-Left"),exec:function(e){e.getSelection().selectWordLeft()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotowordleft",bindKey:s("Ctrl-Left","Option-Left"),exec:function(e){e.navigateWordLeft()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selecttolinestart",bindKey:s("Alt-Shift-Left","Command-Shift-Left"),exec:function(e){e.getSelection().selectLineStart()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotolinestart",bindKey:s("Alt-Left|Home","Command-Left|Home|Ctrl-A"),exec:function(e){e.navigateLineStart()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectleft",bindKey:s("Shift-Left","Shift-Left"),exec:function(e){e.getSelection().selectLeft()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotoleft",bindKey:s("Left","Left|Ctrl-B"),exec:function(e,t){e.navigateLeft(t.times)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectwordright",bindKey:s("Ctrl-Shift-Right","Option-Shift-Right"),exec:function(e){e.getSelection().selectWordRight()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotowordright",bindKey:s("Ctrl-Right","Option-Right"),exec:function(e){e.navigateWordRight()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selecttolineend",bindKey:s("Alt-Shift-Right","Command-Shift-Right"),exec:function(e){e.getSelection().selectLineEnd()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotolineend",bindKey:s("Alt-Right|End","Command-Right|End|Ctrl-E"),exec:function(e){e.navigateLineEnd()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectright",bindKey:s("Shift-Right","Shift-Right"),exec:function(e){e.getSelection().selectRight()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotoright",bindKey:s("Right","Right|Ctrl-F"),exec:function(e,t){e.navigateRight(t.times)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectpagedown",bindKey:"Shift-PageDown",exec:function(e){e.selectPageDown()},readOnly:!0},{name:"pagedown",bindKey:s(null,"Option-PageDown"),exec:function(e){e.scrollPageDown()},readOnly:!0},{name:"gotopagedown",bindKey:s("PageDown","PageDown|Ctrl-V"),exec:function(e){e.gotoPageDown()},readOnly:!0},{name:"selectpageup",bindKey:"Shift-PageUp",exec:function(e){e.selectPageUp()},readOnly:!0},{name:"pageup",bindKey:s(null,"Option-PageUp"),exec:function(e){e.scrollPageUp()},readOnly:!0},{name:"gotopageup",bindKey:"PageUp",exec:function(e){e.gotoPageUp()},readOnly:!0},{name:"scrollup",bindKey:s("Ctrl-Up",null),exec:function(e){e.renderer.scrollBy(0,-2*e.renderer.layerConfig.lineHeight)},readOnly:!0},{name:"scrolldown",bindKey:s("Ctrl-Down",null),exec:function(e){e.renderer.scrollBy(0,2*e.renderer.layerConfig.lineHeight)},readOnly:!0},{name:"selectlinestart",bindKey:"Shift-Home",exec:function(e){e.getSelection().selectLineStart()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectlineend",bindKey:"Shift-End",exec:function(e){e.getSelection().selectLineEnd()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"togglerecording",bindKey:s("Ctrl-Alt-E","Command-Option-E"),exec:function(e){e.commands.toggleRecording(e)},readOnly:!0},{name:"replaymacro",bindKey:s("Ctrl-Shift-E","Command-Shift-E"),exec:function(e){e.commands.replay(e)},readOnly:!0},{name:"jumptomatching",bindKey:s("Ctrl-P","Ctrl-Shift-P"),exec:function(e){e.jumpToMatching()},multiSelectAction:"forEach",readOnly:!0},{name:"selecttomatching",bindKey:s("Ctrl-Shift-P",null),exec:function(e){e.jumpToMatching(!0)},multiSelectAction:"forEach",readOnly:!0},{name:"cut",exec:function(e){var t=e.getSelectionRange();e._emit("cut",t),e.selection.isEmpty()||(e.session.remove(t),e.clearSelection())},scrollIntoView:"cursor",multiSelectAction:"forEach"},{name:"removeline",bindKey:s("Ctrl-D","Command-D"),exec:function(e){e.removeLines()},scrollIntoView:"cursor",multiSelectAction:"forEachLine"},{name:"duplicateSelection",bindKey:s("Ctrl-Shift-D","Command-Shift-D"),exec:function(e){e.duplicateSelection()},scrollIntoView:"cursor",multiSelectAction:"forEach"},{name:"sortlines",bindKey:s("Ctrl-Alt-S","Command-Alt-S"),exec:function(e){e.sortLines()},scrollIntoView:"selection",multiSelectAction:"forEachLine"},{name:"togglecomment",bindKey:s("Ctrl-/","Command-/"),exec:function(e){e.toggleCommentLines()},multiSelectAction:"forEachLine",scrollIntoView:"selectionPart"},{name:"toggleBlockComment",bindKey:s("Ctrl-Shift-/","Command-Shift-/"),exec:function(e){e.toggleBlockComment()},multiSelectAction:"forEach",scrollIntoView:"selectionPart"},{name:"modifyNumberUp",bindKey:s("Ctrl-Shift-Up","Alt-Shift-Up"),exec:function(e){e.modifyNumber(1)},multiSelectAction:"forEach"},{name:"modifyNumberDown",bindKey:s("Ctrl-Shift-Down","Alt-Shift-Down"),exec:function(e){e.modifyNumber(-1)},multiSelectAction:"forEach"},{name:"replace",bindKey:s("Ctrl-H","Command-Option-F"),exec:function(e){i.loadModule("ace/ext/searchbox",function(t){t.Search(e,!0)})}},{name:"undo",bindKey:s("Ctrl-Z","Command-Z"),exec:function(e){e.undo()}},{name:"redo",bindKey:s("Ctrl-Shift-Z|Ctrl-Y","Command-Shift-Z|Command-Y"),exec:function(e){e.redo()}},{name:"copylinesup",bindKey:s("Alt-Shift-Up","Command-Option-Up"),exec:function(e){e.copyLinesUp()},scrollIntoView:"cursor"},{name:"movelinesup",bindKey:s("Alt-Up","Option-Up"),exec:function(e){e.moveLinesUp()},scrollIntoView:"cursor"},{name:"copylinesdown",bindKey:s("Alt-Shift-Down","Command-Option-Down"),exec:function(e){e.copyLinesDown()},scrollIntoView:"cursor"},{name:"movelinesdown",bindKey:s("Alt-Down","Option-Down"),exec:function(e){e.moveLinesDown()},scrollIntoView:"cursor"},{name:"del",bindKey:s("Delete","Delete|Ctrl-D|Shift-Delete"),exec:function(e){e.remove("right")},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"backspace",bindKey:s("Shift-Backspace|Backspace","Ctrl-Backspace|Shift-Backspace|Backspace|Ctrl-H"),exec:function(e){e.remove("left")},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"cut_or_delete",bindKey:s("Shift-Delete",null),exec:function(e){if(!e.selection.isEmpty())return!1;e.remove("left")},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removetolinestart",bindKey:s("Alt-Backspace","Command-Backspace"),exec:function(e){e.removeToLineStart()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removetolineend",bindKey:s("Alt-Delete","Ctrl-K"),exec:function(e){e.removeToLineEnd()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removewordleft",bindKey:s("Ctrl-Backspace","Alt-Backspace|Ctrl-Alt-Backspace"),exec:function(e){e.removeWordLeft()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removewordright",bindKey:s("Ctrl-Delete","Alt-Delete"),exec:function(e){e.removeWordRight()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"outdent",bindKey:s("Shift-Tab","Shift-Tab"),exec:function(e){e.blockOutdent()},multiSelectAction:"forEach",scrollIntoView:"selectionPart"},{name:"indent",bindKey:s("Tab","Tab"),exec:function(e){e.indent()},multiSelectAction:"forEach",scrollIntoView:"selectionPart"},{name:"blockoutdent",bindKey:s("Ctrl-[","Ctrl-["),exec:function(e){e.blockOutdent()},multiSelectAction:"forEachLine",scrollIntoView:"selectionPart"},{name:"blockindent",bindKey:s("Ctrl-]","Ctrl-]"),exec:function(e){e.blockIndent()},multiSelectAction:"forEachLine",scrollIntoView:"selectionPart"},{name:"insertstring",exec:function(e,t){e.insert(t)},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"inserttext",exec:function(e,t){e.insert(r.stringRepeat(t.text||"",t.times||1))},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"splitline",bindKey:s(null,"Ctrl-O"),exec:function(e){e.splitLine()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"transposeletters",bindKey:s("Ctrl-T","Ctrl-T"),exec:function(e){e.transposeLetters()},multiSelectAction:function(e){e.transposeSelections(1)},scrollIntoView:"cursor"},{name:"touppercase",bindKey:s("Ctrl-U","Ctrl-U"),exec:function(e){e.toUpperCase()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"tolowercase",bindKey:s("Ctrl-Shift-U","Ctrl-Shift-U"),exec:function(e){e.toLowerCase()},multiSelectAction:"forEach",scrollIntoView:"cursor"}]}),define("ace/lib/event_emitter",["require","exports","module"],function(e,t,n){var r={},i=function(){this.propagationStopped=!0},s=function(){this.defaultPrevented=!0};r._emit=r._dispatchEvent=function(e,t){this._eventRegistry||(this._eventRegistry={}),this._defaultHandlers||(this._defaultHandlers={});var n=this._eventRegistry[e]||[],r=this._defaultHandlers[e];if(!n.length&&!r)return;if(typeof t!="object"||!t)t={};t.type||(t.type=e),t.stopPropagation||(t.stopPropagation=i),t.preventDefault||(t.preventDefault=s),n=n.slice();for(var o=0;o<n.length;o++){n[o](t,this);if(t.propagationStopped)break}if(r&&!t.defaultPrevented)return r(t,this)},r._signal=function(e,t){var n=(this._eventRegistry||{})[e];if(!n)return;n=n.slice();for(var r=0;r<n.length;r++)n[r](t,this)},r.once=function(e,t){var n=this;t&&this.addEventListener(e,function r(){n.removeEventListener(e,r),t.apply(null,arguments)})},r.setDefaultHandler=function(e,t){var n=this._defaultHandlers;n||(n=this._defaultHandlers={_disabled_:{}});if(n[e]){var r=n[e],i=n._disabled_[e];i||(n._disabled_[e]=i=[]),i.push(r);var s=i.indexOf(t);s!=-1&&i.splice(s,1)}n[e]=t},r.removeDefaultHandler=function(e,t){var n=this._defaultHandlers;if(!n)return;var r=n._disabled_[e];if(n[e]==t){var i=n[e];r&&this.setDefaultHandler(e,r.pop())}else if(r){var s=r.indexOf(t);s!=-1&&r.splice(s,1)}},r.on=r.addEventListener=function(e,t,n){this._eventRegistry=this._eventRegistry||{};var r=this._eventRegistry[e];return r||(r=this._eventRegistry[e]=[]),r.indexOf(t)==-1&&r[n?"unshift":"push"](t),t},r.off=r.removeListener=r.removeEventListener=function(e,t){this._eventRegistry=this._eventRegistry||{};var n=this._eventRegistry[e];if(!n)return;var r=n.indexOf(t);r!==-1&&n.splice(r,1)},r.removeAllListeners=function(e){this._eventRegistry&&(this._eventRegistry[e]=[])},t.EventEmitter=r}),define("ace/undomanager",["require","exports","module"],function(e,t,n){var r=function(){this.reset()};(function(){this.execute=function(e){var t=e.args[0];this.$doc=e.args[1],e.merge&&this.hasUndo()&&(this.dirtyCounter--,t=this.$undoStack.pop().concat(t)),this.$undoStack.push(t),this.$redoStack=[],this.dirtyCounter<0&&(this.dirtyCounter=NaN),this.dirtyCounter++},this.undo=function(e){var t=this.$undoStack.pop(),n=null;return t&&(n=this.$doc.undoChanges(t,e),this.$redoStack.push(t),this.dirtyCounter--),n},this.redo=function(e){var t=this.$redoStack.pop(),n=null;return t&&(n=this.$doc.redoChanges(t,e),this.$undoStack.push(t),this.dirtyCounter++),n},this.reset=function(){this.$undoStack=[],this.$redoStack=[],this.dirtyCounter=0},this.hasUndo=function(){return this.$undoStack.length>0},this.hasRedo=function(){return this.$redoStack.length>0},this.markClean=function(){this.dirtyCounter=0},this.isClean=function(){return this.dirtyCounter===0}}).call(r.prototype),t.UndoManager=r}),define("ace/lib/net",["require","exports","module","ace/lib/dom"],function(e,t,n){var r=e("./dom");t.get=function(e,t){var n=new XMLHttpRequest;n.open("GET",e,!0),n.onreadystatechange=function(){n.readyState===4&&t(n.responseText)},n.send(null)},t.loadScript=function(e,t){var n=r.getDocumentHead(),i=document.createElement("script");i.src=e,n.appendChild(i),i.onload=i.onreadystatechange=function(e,n){if(n||!i.readyState||i.readyState=="loaded"||i.readyState=="complete")i=i.onload=i.onreadystatechange=null,n||t()}}}),define("ace/virtual_renderer",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/config","ace/layer/gutter","ace/layer/marker","ace/layer/text","ace/layer/cursor","ace/scrollbar","ace/renderloop","ace/layer/font_metrics","ace/lib/event_emitter"],function(e,t,n){var r=e("./lib/oop"),i=e("./lib/dom"),s=e("./config"),o=e("./layer/gutter").Gutter,u=e("./layer/marker").Marker,a=e("./layer/text").Text,f=e("./layer/cursor").Cursor,l=e("./scrollbar").HScrollBar,c=e("./scrollbar").VScrollBar,h=e("./renderloop").RenderLoop,p=e("./layer/font_metrics").FontMetrics,d=e("./lib/event_emitter").EventEmitter,v='.ace_editor {position: relative;overflow: hidden;font-family: \'Monaco\', \'Menlo\', \'Ubuntu Mono\', \'Consolas\', \'source-code-pro\', monospace;font-size: 12px;line-height: normal;direction: ltr;}.ace_scroller {position: absolute;overflow: hidden;top: 0;bottom: 0;background-color: inherit;-ms-user-select: none;-moz-user-select: none;-webkit-user-select: none;user-select: none;}.ace_content {position: absolute;-moz-box-sizing: border-box;-webkit-box-sizing: border-box;box-sizing: border-box;cursor: text;min-width: 100%;}.ace_dragging, .ace_dragging * {cursor: move !important;}.ace_dragging .ace_scroller:before{position: absolute;top: 0;left: 0;right: 0;bottom: 0;content: \'\';background: rgba(250, 250, 250, 0.01);z-index: 1000;}.ace_dragging.ace_dark .ace_scroller:before{background: rgba(0, 0, 0, 0.01);}.ace_selecting, .ace_selecting * {cursor: text !important;}.ace_gutter {position: absolute;overflow : hidden;width: auto;top: 0;bottom: 0;left: 0;cursor: default;z-index: 4;-ms-user-select: none;-moz-user-select: none;-webkit-user-select: none;user-select: none;}.ace_gutter-active-line {position: absolute;left: 0;right: 0;}.ace_scroller.ace_scroll-left {box-shadow: 17px 0 16px -16px rgba(0, 0, 0, 0.4) inset;}.ace_gutter-cell {padding-left: 19px;padding-right: 6px;background-repeat: no-repeat;}.ace_gutter-cell.ace_error {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAABOFBMVEX/////////QRswFAb/Ui4wFAYwFAYwFAaWGAfDRymzOSH/PxswFAb/SiUwFAYwFAbUPRvjQiDllog5HhHdRybsTi3/Tyv9Tir+Syj/UC3////XurebMBIwFAb/RSHbPx/gUzfdwL3kzMivKBAwFAbbvbnhPx66NhowFAYwFAaZJg8wFAaxKBDZurf/RB6mMxb/SCMwFAYwFAbxQB3+RB4wFAb/Qhy4Oh+4QifbNRcwFAYwFAYwFAb/QRzdNhgwFAYwFAbav7v/Uy7oaE68MBK5LxLewr/r2NXewLswFAaxJw4wFAbkPRy2PyYwFAaxKhLm1tMwFAazPiQwFAaUGAb/QBrfOx3bvrv/VC/maE4wFAbRPBq6MRO8Qynew8Dp2tjfwb0wFAbx6eju5+by6uns4uH9/f36+vr/GkHjAAAAYnRSTlMAGt+64rnWu/bo8eAA4InH3+DwoN7j4eLi4xP99Nfg4+b+/u9B/eDs1MD1mO7+4PHg2MXa347g7vDizMLN4eG+Pv7i5evs/v79yu7S3/DV7/498Yv24eH+4ufQ3Ozu/v7+y13sRqwAAADLSURBVHjaZc/XDsFgGIBhtDrshlitmk2IrbHFqL2pvXf/+78DPokj7+Fz9qpU/9UXJIlhmPaTaQ6QPaz0mm+5gwkgovcV6GZzd5JtCQwgsxoHOvJO15kleRLAnMgHFIESUEPmawB9ngmelTtipwwfASilxOLyiV5UVUyVAfbG0cCPHig+GBkzAENHS0AstVF6bacZIOzgLmxsHbt2OecNgJC83JERmePUYq8ARGkJx6XtFsdddBQgZE2nPR6CICZhawjA4Fb/chv+399kfR+MMMDGOQAAAABJRU5ErkJggg==");background-repeat: no-repeat;background-position: 2px center;}.ace_gutter-cell.ace_warning {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAAmVBMVEX///8AAAD///8AAAAAAABPSzb/5sAAAAB/blH/73z/ulkAAAAAAAD85pkAAAAAAAACAgP/vGz/rkDerGbGrV7/pkQICAf////e0IsAAAD/oED/qTvhrnUAAAD/yHD/njcAAADuv2r/nz//oTj/p064oGf/zHAAAAA9Nir/tFIAAAD/tlTiuWf/tkIAAACynXEAAAAAAAAtIRW7zBpBAAAAM3RSTlMAABR1m7RXO8Ln31Z36zT+neXe5OzooRDfn+TZ4p3h2hTf4t3k3ucyrN1K5+Xaks52Sfs9CXgrAAAAjklEQVR42o3PbQ+CIBQFYEwboPhSYgoYunIqqLn6/z8uYdH8Vmdnu9vz4WwXgN/xTPRD2+sgOcZjsge/whXZgUaYYvT8QnuJaUrjrHUQreGczuEafQCO/SJTufTbroWsPgsllVhq3wJEk2jUSzX3CUEDJC84707djRc5MTAQxoLgupWRwW6UB5fS++NV8AbOZgnsC7BpEAAAAABJRU5ErkJggg==");background-position: 2px center;}.ace_gutter-cell.ace_info {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAAAAAA6mKC9AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAAJ0Uk5TAAB2k804AAAAPklEQVQY02NgIB68QuO3tiLznjAwpKTgNyDbMegwisCHZUETUZV0ZqOquBpXj2rtnpSJT1AEnnRmL2OgGgAAIKkRQap2htgAAAAASUVORK5CYII=");background-position: 2px center;}.ace_dark .ace_gutter-cell.ace_info {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQBAMAAADt3eJSAAAAJFBMVEUAAAChoaGAgIAqKiq+vr6tra1ZWVmUlJSbm5s8PDxubm56enrdgzg3AAAAAXRSTlMAQObYZgAAAClJREFUeNpjYMAPdsMYHegyJZFQBlsUlMFVCWUYKkAZMxZAGdxlDMQBAG+TBP4B6RyJAAAAAElFTkSuQmCC");}.ace_scrollbar {position: absolute;right: 0;bottom: 0;z-index: 6;}.ace_scrollbar-inner {position: absolute;cursor: text;left: 0;top: 0;}.ace_scrollbar-v{overflow-x: hidden;overflow-y: scroll;top: 0;}.ace_scrollbar-h {overflow-x: scroll;overflow-y: hidden;left: 0;}.ace_print-margin {position: absolute;height: 100%;}.ace_text-input {position: absolute;z-index: 0;width: 0.5em;height: 1em;opacity: 0;background: transparent;-moz-appearance: none;appearance: none;border: none;resize: none;outline: none;overflow: hidden;font: inherit;padding: 0 1px;margin: 0 -1px;text-indent: -1em;-ms-user-select: text;-moz-user-select: text;-webkit-user-select: text;user-select: text;}.ace_text-input.ace_composition {background: #f8f8f8;color: #111;z-index: 1000;opacity: 1;text-indent: 0;}.ace_layer {z-index: 1;position: absolute;overflow: hidden;white-space: pre;height: 100%;width: 100%;-moz-box-sizing: border-box;-webkit-box-sizing: border-box;box-sizing: border-box;/* setting pointer-events: auto; on node under the mouse, which changesduring scroll, will break mouse wheel scrolling in Safari */pointer-events: none;}.ace_gutter-layer {position: relative;width: auto;text-align: right;pointer-events: auto;}.ace_text-layer {font: inherit !important;}.ace_cjk {display: inline-block;text-align: center;}.ace_cursor-layer {z-index: 4;}.ace_cursor {z-index: 4;position: absolute;-moz-box-sizing: border-box;-webkit-box-sizing: border-box;box-sizing: border-box;border-left: 2px solid}.ace_slim-cursors .ace_cursor {border-left-width: 1px;}.ace_overwrite-cursors .ace_cursor {border-left-width: 0px;border-bottom: 1px solid;}.ace_hidden-cursors .ace_cursor {opacity: 0.2;}.ace_smooth-blinking .ace_cursor {-moz-transition: opacity 0.18s;-webkit-transition: opacity 0.18s;-o-transition: opacity 0.18s;-ms-transition: opacity 0.18s;transition: opacity 0.18s;}.ace_editor.ace_multiselect .ace_cursor {border-left-width: 1px;}.ace_marker-layer .ace_step, .ace_marker-layer .ace_stack {position: absolute;z-index: 3;}.ace_marker-layer .ace_selection {position: absolute;z-index: 5;}.ace_marker-layer .ace_bracket {position: absolute;z-index: 6;}.ace_marker-layer .ace_active-line {position: absolute;z-index: 2;}.ace_marker-layer .ace_selected-word {position: absolute;z-index: 4;-moz-box-sizing: border-box;-webkit-box-sizing: border-box;box-sizing: border-box;}.ace_line .ace_fold {-moz-box-sizing: border-box;-webkit-box-sizing: border-box;box-sizing: border-box;display: inline-block;height: 11px;margin-top: -2px;vertical-align: middle;background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAAJCAYAAADU6McMAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJpJREFUeNpi/P//PwOlgAXGYGRklAVSokD8GmjwY1wasKljQpYACtpCFeADcHVQfQyMQAwzwAZI3wJKvCLkfKBaMSClBlR7BOQikCFGQEErIH0VqkabiGCAqwUadAzZJRxQr/0gwiXIal8zQQPnNVTgJ1TdawL0T5gBIP1MUJNhBv2HKoQHHjqNrA4WO4zY0glyNKLT2KIfIMAAQsdgGiXvgnYAAAAASUVORK5CYII="),url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAA3CAYAAADNNiA5AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAACJJREFUeNpi+P//fxgTAwPDBxDxD078RSX+YeEyDFMCIMAAI3INmXiwf2YAAAAASUVORK5CYII=");background-repeat: no-repeat, repeat-x;background-position: center center, top left;color: transparent;border: 1px solid black;-moz-border-radius: 2px;-webkit-border-radius: 2px;border-radius: 2px;cursor: pointer;pointer-events: auto;}.ace_dark .ace_fold {}.ace_fold:hover{background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAAJCAYAAADU6McMAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJpJREFUeNpi/P//PwOlgAXGYGRklAVSokD8GmjwY1wasKljQpYACtpCFeADcHVQfQyMQAwzwAZI3wJKvCLkfKBaMSClBlR7BOQikCFGQEErIH0VqkabiGCAqwUadAzZJRxQr/0gwiXIal8zQQPnNVTgJ1TdawL0T5gBIP1MUJNhBv2HKoQHHjqNrA4WO4zY0glyNKLT2KIfIMAAQsdgGiXvgnYAAAAASUVORK5CYII="),url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAA3CAYAAADNNiA5AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAACBJREFUeNpi+P//fz4TAwPDZxDxD5X4i5fLMEwJgAADAEPVDbjNw87ZAAAAAElFTkSuQmCC");}.ace_tooltip {background-color: #FFF;background-image: -webkit-linear-gradient(top, transparent, rgba(0, 0, 0, 0.1));background-image: linear-gradient(to bottom, transparent, rgba(0, 0, 0, 0.1));border: 1px solid gray;border-radius: 1px;box-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);color: black;display: block;max-width: 100%;padding: 3px 4px;position: fixed;z-index: 999999;-moz-box-sizing: border-box;-webkit-box-sizing: border-box;box-sizing: border-box;cursor: default;white-space: pre;word-wrap: break-word;line-height: normal;font-style: normal;font-weight: normal;letter-spacing: normal;pointer-events: none;}.ace_folding-enabled > .ace_gutter-cell {padding-right: 13px;}.ace_fold-widget {-moz-box-sizing: border-box;-webkit-box-sizing: border-box;box-sizing: border-box;margin: 0 -12px 0 1px;display: none;width: 11px;vertical-align: top;background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAANElEQVR42mWKsQ0AMAzC8ixLlrzQjzmBiEjp0A6WwBCSPgKAXoLkqSot7nN3yMwR7pZ32NzpKkVoDBUxKAAAAABJRU5ErkJggg==");background-repeat: no-repeat;background-position: center;border-radius: 3px;border: 1px solid transparent;cursor: pointer;}.ace_folding-enabled .ace_fold-widget {display: inline-block;   }.ace_fold-widget.ace_end {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAANElEQVR42m3HwQkAMAhD0YzsRchFKI7sAikeWkrxwScEB0nh5e7KTPWimZki4tYfVbX+MNl4pyZXejUO1QAAAABJRU5ErkJggg==");}.ace_fold-widget.ace_closed {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAMAAAAGCAYAAAAG5SQMAAAAOUlEQVR42jXKwQkAMAgDwKwqKD4EwQ26sSOkVWjgIIHAzPiCgaqiqnJHZnKICBERHN194O5b9vbLuAVRL+l0YWnZAAAAAElFTkSuQmCCXA==");}.ace_fold-widget:hover {border: 1px solid rgba(0, 0, 0, 0.3);background-color: rgba(255, 255, 255, 0.2);-moz-box-shadow: 0 1px 1px rgba(255, 255, 255, 0.7);-webkit-box-shadow: 0 1px 1px rgba(255, 255, 255, 0.7);box-shadow: 0 1px 1px rgba(255, 255, 255, 0.7);}.ace_fold-widget:active {border: 1px solid rgba(0, 0, 0, 0.4);background-color: rgba(0, 0, 0, 0.05);-moz-box-shadow: 0 1px 1px rgba(255, 255, 255, 0.8);-webkit-box-shadow: 0 1px 1px rgba(255, 255, 255, 0.8);box-shadow: 0 1px 1px rgba(255, 255, 255, 0.8);}/*** Dark version for fold widgets*/.ace_dark .ace_fold-widget {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAHklEQVQIW2P4//8/AzoGEQ7oGCaLLAhWiSwB146BAQCSTPYocqT0AAAAAElFTkSuQmCC");}.ace_dark .ace_fold-widget.ace_end {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAH0lEQVQIW2P4//8/AxQ7wNjIAjDMgC4AxjCVKBirIAAF0kz2rlhxpAAAAABJRU5ErkJggg==");}.ace_dark .ace_fold-widget.ace_closed {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAMAAAAFCAYAAACAcVaiAAAAHElEQVQIW2P4//+/AxAzgDADlOOAznHAKgPWAwARji8UIDTfQQAAAABJRU5ErkJggg==");}.ace_dark .ace_fold-widget:hover {box-shadow: 0 1px 1px rgba(255, 255, 255, 0.2);background-color: rgba(255, 255, 255, 0.1);}.ace_dark .ace_fold-widget:active {-moz-box-shadow: 0 1px 1px rgba(255, 255, 255, 0.2);-webkit-box-shadow: 0 1px 1px rgba(255, 255, 255, 0.2);box-shadow: 0 1px 1px rgba(255, 255, 255, 0.2);}.ace_fold-widget.ace_invalid {background-color: #FFB4B4;border-color: #DE5555;}.ace_fade-fold-widgets .ace_fold-widget {-moz-transition: opacity 0.4s ease 0.05s;-webkit-transition: opacity 0.4s ease 0.05s;-o-transition: opacity 0.4s ease 0.05s;-ms-transition: opacity 0.4s ease 0.05s;transition: opacity 0.4s ease 0.05s;opacity: 0;}.ace_fade-fold-widgets:hover .ace_fold-widget {-moz-transition: opacity 0.05s ease 0.05s;-webkit-transition: opacity 0.05s ease 0.05s;-o-transition: opacity 0.05s ease 0.05s;-ms-transition: opacity 0.05s ease 0.05s;transition: opacity 0.05s ease 0.05s;opacity:1;}.ace_underline {text-decoration: underline;}.ace_bold {font-weight: bold;}.ace_nobold .ace_bold {font-weight: normal;}.ace_italic {font-style: italic;}.ace_error-marker {background-color: rgba(255, 0, 0,0.2);position: absolute;z-index: 9;}.ace_highlight-marker {background-color: rgba(255, 255, 0,0.2);position: absolute;z-index: 8;}';i.importCssString(v,"ace_editor");var m=function(e,t){var n=this;this.container=e||i.createElement("div"),this.$keepTextAreaAtCursor=!0,i.addCssClass(this.container,"ace_editor"),this.setTheme(t),this.$gutter=i.createElement("div"),this.$gutter.className="ace_gutter",this.container.appendChild(this.$gutter),this.scroller=i.createElement("div"),this.scroller.className="ace_scroller",this.container.appendChild(this.scroller),this.content=i.createElement("div"),this.content.className="ace_content",this.scroller.appendChild(this.content),this.$gutterLayer=new o(this.$gutter),this.$gutterLayer.on("changeGutterWidth",this.onGutterResize.bind(this)),this.$markerBack=new u(this.content);var r=this.$textLayer=new a(this.content);this.canvas=r.element,this.$markerFront=new u(this.content),this.$cursorLayer=new f(this.content),this.$horizScroll=!1,this.$vScroll=!1,this.scrollBar=this.scrollBarV=new c(this.container,this),this.scrollBarH=new l(this.container,this),this.scrollBarV.addEventListener("scroll",function(e){n.$scrollAnimation||n.session.setScrollTop(e.data-n.scrollMargin.top)}),this.scrollBarH.addEventListener("scroll",function(e){n.$scrollAnimation||n.session.setScrollLeft(e.data-n.scrollMargin.left)}),this.scrollTop=0,this.scrollLeft=0,this.cursorPos={row:0,column:0},this.$fontMetrics=new p(this.container,500),this.$textLayer.$setFontMetrics(this.$fontMetrics),this.$textLayer.addEventListener("changeCharacterSize",function(e){n.updateCharacterSize(),n.onResize(!0,n.gutterWidth,n.$size.width,n.$size.height),n._signal("changeCharacterSize",e)}),this.$size={width:0,height:0,scrollerHeight:0,scrollerWidth:0,$dirty:!0},this.layerConfig={width:1,padding:0,firstRow:0,firstRowScreen:0,lastRow:0,lineHeight:0,characterWidth:0,minHeight:1,maxHeight:1,offset:0,height:1,gutterOffset:1},this.scrollMargin={left:0,right:0,top:0,bottom:0,v:0,h:0},this.$loop=new h(this.$renderChanges.bind(this),this.container.ownerDocument.defaultView),this.$loop.schedule(this.CHANGE_FULL),this.updateCharacterSize(),this.setPadding(4),s.resetOptions(this),s._emit("renderer",this)};(function(){this.CHANGE_CURSOR=1,this.CHANGE_MARKER=2,this.CHANGE_GUTTER=4,this.CHANGE_SCROLL=8,this.CHANGE_LINES=16,this.CHANGE_TEXT=32,this.CHANGE_SIZE=64,this.CHANGE_MARKER_BACK=128,this.CHANGE_MARKER_FRONT=256,this.CHANGE_FULL=512,this.CHANGE_H_SCROLL=1024,r.implement(this,d),this.updateCharacterSize=function(){this.$textLayer.allowBoldFonts!=this.$allowBoldFonts&&(this.$allowBoldFonts=this.$textLayer.allowBoldFonts,this.setStyle("ace_nobold",!this.$allowBoldFonts)),this.layerConfig.characterWidth=this.characterWidth=this.$textLayer.getCharacterWidth(),this.layerConfig.lineHeight=this.lineHeight=this.$textLayer.getLineHeight(),this.$updatePrintMargin()},this.setSession=function(e){this.session&&this.session.doc.off("changeNewLineMode",this.onChangeNewLineMode),this.session=e;if(!e)return;this.scrollMargin.top&&e.getScrollTop()<=0&&e.setScrollTop(-this.scrollMargin.top),this.$cursorLayer.setSession(e),this.$markerBack.setSession(e),this.$markerFront.setSession(e),this.$gutterLayer.setSession(e),this.$textLayer.setSession(e),this.$loop.schedule(this.CHANGE_FULL),this.session.$setFontMetrics(this.$fontMetrics),this.onChangeNewLineMode=this.onChangeNewLineMode.bind(this),this.onChangeNewLineMode(),this.session.doc.on("changeNewLineMode",this.onChangeNewLineMode)},this.updateLines=function(e,t){t===undefined&&(t=Infinity),this.$changedLines?(this.$changedLines.firstRow>e&&(this.$changedLines.firstRow=e),this.$changedLines.lastRow<t&&(this.$changedLines.lastRow=t)):this.$changedLines={firstRow:e,lastRow:t};if(this.$changedLines.firstRow>this.layerConfig.lastRow||this.$changedLines.lastRow<this.layerConfig.firstRow)return;this.$loop.schedule(this.CHANGE_LINES)},this.onChangeNewLineMode=function(){this.$loop.schedule(this.CHANGE_TEXT),this.$textLayer.$updateEolChar()},this.onChangeTabSize=function(){this.$loop.schedule(this.CHANGE_TEXT|this.CHANGE_MARKER),this.$textLayer.onChangeTabSize()},this.updateText=function(){this.$loop.schedule(this.CHANGE_TEXT)},this.updateFull=function(e){e?this.$renderChanges(this.CHANGE_FULL,!0):this.$loop.schedule(this.CHANGE_FULL)},this.updateFontSize=function(){this.$textLayer.checkForSizeChanges()},this.$changes=0,this.$updateSizeAsync=function(){this.$loop.pending?this.$size.$dirty=!0:this.onResize()},this.onResize=function(e,t,n,r){if(this.resizing>2)return;this.resizing>0?this.resizing++:this.resizing=e?1:0;var i=this.container;r||(r=i.clientHeight||i.scrollHeight),n||(n=i.clientWidth||i.scrollWidth);var s=this.$updateCachedSize(e,t,n,r);if(!this.$size.scrollerHeight||!n&&!r)return this.resizing=0;e&&(this.$gutterLayer.$padding=null),e?this.$renderChanges(s|this.$changes,!0):this.$loop.schedule(s|this.$changes),this.resizing&&(this.resizing=0)},this.$updateCachedSize=function(e,t,n,r){r-=this.$extraHeight||0;var i=0,s=this.$size,o={width:s.width,height:s.height,scrollerHeight:s.scrollerHeight,scrollerWidth:s.scrollerWidth};r&&(e||s.height!=r)&&(s.height=r,i|=this.CHANGE_SIZE,s.scrollerHeight=s.height,this.$horizScroll&&(s.scrollerHeight-=this.scrollBarH.getHeight()),this.scrollBarV.element.style.bottom=this.scrollBarH.getHeight()+"px",i|=this.CHANGE_SCROLL);if(n&&(e||s.width!=n)){i|=this.CHANGE_SIZE,s.width=n,t==null&&(t=this.$showGutter?this.$gutter.offsetWidth:0),this.gutterWidth=t,this.scrollBarH.element.style.left=this.scroller.style.left=t+"px",s.scrollerWidth=Math.max(0,n-t-this.scrollBarV.getWidth()),this.scrollBarH.element.style.right=this.scroller.style.right=this.scrollBarV.getWidth()+"px",this.scroller.style.bottom=this.scrollBarH.getHeight()+"px";if(this.session&&this.session.getUseWrapMode()&&this.adjustWrapLimit()||e)i|=this.CHANGE_FULL}return s.$dirty=!n||!r,i&&this._signal("resize",o),i},this.onGutterResize=function(){var e=this.$showGutter?this.$gutter.offsetWidth:0;e!=this.gutterWidth&&(this.$changes|=this.$updateCachedSize(!0,e,this.$size.width,this.$size.height)),this.session.getUseWrapMode()&&this.adjustWrapLimit()?this.$loop.schedule(this.CHANGE_FULL):this.$size.$dirty?this.$loop.schedule(this.CHANGE_FULL):(this.$computeLayerConfig(),this.$loop.schedule(this.CHANGE_MARKER))},this.adjustWrapLimit=function(){var e=this.$size.scrollerWidth-this.$padding*2,t=Math.floor(e/this.characterWidth);return this.session.adjustWrapLimit(t,this.$showPrintMargin&&this.$printMarginColumn)},this.setAnimatedScroll=function(e){this.setOption("animatedScroll",e)},this.getAnimatedScroll=function(){return this.$animatedScroll},this.setShowInvisibles=function(e){this.setOption("showInvisibles",e)},this.getShowInvisibles=function(){return this.getOption("showInvisibles")},this.getDisplayIndentGuides=function(){return this.getOption("displayIndentGuides")},this.setDisplayIndentGuides=function(e){this.setOption("displayIndentGuides",e)},this.setShowPrintMargin=function(e){this.setOption("showPrintMargin",e)},this.getShowPrintMargin=function(){return this.getOption("showPrintMargin")},this.setPrintMarginColumn=function(e){this.setOption("printMarginColumn",e)},this.getPrintMarginColumn=function(){return this.getOption("printMarginColumn")},this.getShowGutter=function(){return this.getOption("showGutter")},this.setShowGutter=function(e){return this.setOption("showGutter",e)},this.getFadeFoldWidgets=function(){return this.getOption("fadeFoldWidgets")},this.setFadeFoldWidgets=function(e){this.setOption("fadeFoldWidgets",e)},this.setHighlightGutterLine=function(e){this.setOption("highlightGutterLine",e)},this.getHighlightGutterLine=function(){return this.getOption("highlightGutterLine")},this.$updateGutterLineHighlight=function(){var e=this.$cursorLayer.$pixelPos,t=this.layerConfig.lineHeight;if(this.session.getUseWrapMode()){var n=this.session.selection.getCursor();n.column=0,e=this.$cursorLayer.getPixelPosition(n,!0),t*=this.session.getRowLength(n.row)}this.$gutterLineHighlight.style.top=e.top-this.layerConfig.offset+"px",this.$gutterLineHighlight.style.height=t+"px"},this.$updatePrintMargin=function(){if(!this.$showPrintMargin&&!this.$printMarginEl)return;if(!this.$printMarginEl){var e=i.createElement("div");e.className="ace_layer ace_print-margin-layer",this.$printMarginEl=i.createElement("div"),this.$printMarginEl.className="ace_print-margin",e.appendChild(this.$printMarginEl),this.content.insertBefore(e,this.content.firstChild)}var t=this.$printMarginEl.style;t.left=this.characterWidth*this.$printMarginColumn+this.$padding+"px",t.visibility=this.$showPrintMargin?"visible":"hidden",this.session&&this.session.$wrap==-1&&this.adjustWrapLimit()},this.getContainerElement=function(){return this.container},this.getMouseEventTarget=function(){return this.content},this.getTextAreaContainer=function(){return this.container},this.$moveTextAreaToCursor=function(){if(!this.$keepTextAreaAtCursor)return;var e=this.layerConfig,t=this.$cursorLayer.$pixelPos.top,n=this.$cursorLayer.$pixelPos.left;t-=e.offset;var r=this.lineHeight;if(t<0||t>e.height-r)return;var i=this.characterWidth;if(this.$composition){var s=this.textarea.value.replace(/^\x01+/,"");i*=this.session.$getStringScreenWidth(s)[0]+2,r+=2,t-=1}n-=this.scrollLeft,n>this.$size.scrollerWidth-i&&(n=this.$size.scrollerWidth-i),n-=this.scrollBar.width,this.textarea.style.height=r+"px",this.textarea.style.width=i+"px",this.textarea.style.right=Math.max(0,this.$size.scrollerWidth-n-i)+"px",this.textarea.style.bottom=Math.max(0,this.$size.height-t-r)+"px"},this.getFirstVisibleRow=function(){return this.layerConfig.firstRow},this.getFirstFullyVisibleRow=function(){return this.layerConfig.firstRow+(this.layerConfig.offset===0?0:1)},this.getLastFullyVisibleRow=function(){var e=Math.floor((this.layerConfig.height+this.layerConfig.offset)/this.layerConfig.lineHeight);return this.layerConfig.firstRow-1+e},this.getLastVisibleRow=function(){return this.layerConfig.lastRow},this.$padding=null,this.setPadding=function(e){this.$padding=e,this.$textLayer.setPadding(e),this.$cursorLayer.setPadding(e),this.$markerFront.setPadding(e),this.$markerBack.setPadding(e),this.$loop.schedule(this.CHANGE_FULL),this.$updatePrintMargin()},this.setScrollMargin=function(e,t,n,r){var i=this.scrollMargin;i.top=e|0,i.bottom=t|0,i.right=r|0,i.left=n|0,i.v=i.top+i.bottom,i.h=i.left+i.right,i.top&&this.scrollTop<=0&&this.session&&this.session.setScrollTop(-i.top),this.updateFull()},this.getHScrollBarAlwaysVisible=function(){return this.$hScrollBarAlwaysVisible},this.setHScrollBarAlwaysVisible=function(e){this.setOption("hScrollBarAlwaysVisible",e)},this.getVScrollBarAlwaysVisible=function(){return this.$hScrollBarAlwaysVisible},this.setVScrollBarAlwaysVisible=function(e){this.setOption("vScrollBarAlwaysVisible",e)},this.$updateScrollBarV=function(){this.scrollBarV.setScrollHeight(this.layerConfig.maxHeight+this.scrollMargin.v),this.scrollBarV.setScrollTop(this.scrollTop+this.scrollMargin.top)},this.$updateScrollBarH=function(){this.scrollBarH.setScrollWidth(this.layerConfig.width+2*this.$padding+this.scrollMargin.h),this.scrollBarH.setScrollLeft(this.scrollLeft+this.scrollMargin.left)},this.$frozen=!1,this.freeze=function(){this.$frozen=!0},this.unfreeze=function(){this.$frozen=!1},this.$renderChanges=function(e,t){this.$changes&&(e|=this.$changes,this.$changes=0);if(!this.session||!this.container.offsetWidth||this.$frozen||!e&&!t){this.$changes|=e;return}if(this.$size.$dirty)return this.$changes|=e,this.onResize(!0);this.lineHeight||this.$textLayer.checkForSizeChanges(),this._signal("beforeRender");var n=this.layerConfig;if(e&this.CHANGE_FULL||e&this.CHANGE_SIZE||e&this.CHANGE_TEXT||e&this.CHANGE_LINES||e&this.CHANGE_SCROLL||e&this.CHANGE_H_SCROLL)e|=this.$computeLayerConfig(),n=this.layerConfig,this.$updateScrollBarV(),e&this.CHANGE_H_SCROLL&&this.$updateScrollBarH(),this.$gutterLayer.element.style.marginTop=-n.offset+"px",this.content.style.marginTop=-n.offset+"px",this.content.style.width=n.width+2*this.$padding+"px",this.content.style.height=n.minHeight+"px";e&this.CHANGE_H_SCROLL&&(this.content.style.marginLeft=-this.scrollLeft+"px",this.scroller.className=this.scrollLeft<=0?"ace_scroller":"ace_scroller ace_scroll-left");if(e&this.CHANGE_FULL){this.$textLayer.update(n),this.$showGutter&&this.$gutterLayer.update(n),this.$markerBack.update(n),this.$markerFront.update(n),this.$cursorLayer.update(n),this.$moveTextAreaToCursor(),this.$highlightGutterLine&&this.$updateGutterLineHighlight(),this._signal("afterRender");return}if(e&this.CHANGE_SCROLL){e&this.CHANGE_TEXT||e&this.CHANGE_LINES?this.$textLayer.update(n):this.$textLayer.scrollLines(n),this.$showGutter&&this.$gutterLayer.update(n),this.$markerBack.update(n),this.$markerFront.update(n),this.$cursorLayer.update(n),this.$highlightGutterLine&&this.$updateGutterLineHighlight(),this.$moveTextAreaToCursor(),this._signal("afterRender");return}e&this.CHANGE_TEXT?(this.$textLayer.update(n),this.$showGutter&&this.$gutterLayer.update(n)):e&this.CHANGE_LINES?(this.$updateLines()||e&this.CHANGE_GUTTER&&this.$showGutter)&&this.$gutterLayer.update(n):(e&this.CHANGE_TEXT||e&this.CHANGE_GUTTER)&&this.$showGutter&&this.$gutterLayer.update(n),e&this.CHANGE_CURSOR&&(this.$cursorLayer.update(n),this.$moveTextAreaToCursor(),this.$highlightGutterLine&&this.$updateGutterLineHighlight()),e&(this.CHANGE_MARKER|this.CHANGE_MARKER_FRONT)&&this.$markerFront.update(n),e&(this.CHANGE_MARKER|this.CHANGE_MARKER_BACK)&&this.$markerBack.update(n),this._signal("afterRender")},this.$autosize=function(){var e=this.session.getScreenLength()*this.lineHeight,t=this.$maxLines*this.lineHeight,n=Math.max((this.$minLines||1)*this.lineHeight,Math.min(t,e))+this.scrollMargin.v+(this.$extraHeight||0),r=e>t;if(n!=this.desiredHeight||this.$size.height!=this.desiredHeight||r!=this.$vScroll){r!=this.$vScroll&&(this.$vScroll=r,this.scrollBarV.setVisible(r));var i=this.container.clientWidth;this.container.style.height=n+"px",this.$updateCachedSize(!0,this.$gutterWidth,i,n),this.desiredHeight=n}},this.$computeLayerConfig=function(){this.$maxLines&&this.lineHeight>1&&this.$autosize();var e=this.session,t=this.$size,n=t.height<=2*this.lineHeight,r=this.session.getScreenLength(),i=r*this.lineHeight,s=this.scrollTop%this.lineHeight,o=t.scrollerHeight+this.lineHeight,u=this.$getLongestLine(),a=!n&&(this.$hScrollBarAlwaysVisible||t.scrollerWidth-u-2*this.$padding<0),f=this.$horizScroll!==a;f&&(this.$horizScroll=a,this.scrollBarH.setVisible(a)),!this.$maxLines&&this.$scrollPastEnd&&this.scrollTop>i-t.scrollerHeight&&(i+=Math.min((t.scrollerHeight-this.lineHeight)*this.$scrollPastEnd,this.scrollTop-i+t.scrollerHeight));var l=!n&&(this.$vScrollBarAlwaysVisible||t.scrollerHeight-i<0),c=this.$vScroll!==l;c&&(this.$vScroll=l,this.scrollBarV.setVisible(l)),this.session.setScrollTop(Math.max(-this.scrollMargin.top,Math.min(this.scrollTop,i-t.scrollerHeight+this.scrollMargin.bottom))),this.session.setScrollLeft(Math.max(-this.scrollMargin.left,Math.min(this.scrollLeft,u+2*this.$padding-t.scrollerWidth+this.scrollMargin.right)));var h=Math.ceil(o/this.lineHeight)-1,p=Math.max(0,Math.round((this.scrollTop-s)/this.lineHeight)),d=p+h,v,m,g=this.lineHeight;p=e.screenToDocumentRow(p,0);var y=e.getFoldLine(p);y&&(p=y.start.row),v=e.documentToScreenRow(p,0),m=e.getRowLength(p)*g,d=Math.min(e.screenToDocumentRow(d,0),e.getLength()-1),o=t.scrollerHeight+e.getRowLength(d)*g+m,s=this.scrollTop-v*g;var b=0;this.layerConfig.width!=u&&(b=this.CHANGE_H_SCROLL);if(f||c)b=this.$updateCachedSize(!0,this.gutterWidth,t.width,t.height),this._signal("scrollbarVisibilityChanged"),c&&(u=this.$getLongestLine());return this.layerConfig={width:u,padding:this.$padding,firstRow:p,firstRowScreen:v,lastRow:d,lineHeight:g,characterWidth:this.characterWidth,minHeight:o,maxHeight:i,offset:s,gutterOffset:Math.max(0,Math.ceil((s+t.height-t.scrollerHeight)/g)),height:this.$size.scrollerHeight},b},this.$updateLines=function(){var e=this.$changedLines.firstRow,t=this.$changedLines.lastRow;this.$changedLines=null;var n=this.layerConfig;if(e>n.lastRow+1)return;if(t<n.firstRow)return;if(t===Infinity){this.$showGutter&&this.$gutterLayer.update(n),this.$textLayer.update(n);return}return this.$textLayer.updateLines(n,e,t),!0},this.$getLongestLine=function(){var e=this.session.getScreenWidth();return this.showInvisibles&&!this.session.$useWrapMode&&(e+=1),Math.max(this.$size.scrollerWidth-2*this.$padding,Math.round(e*this.characterWidth))},this.updateFrontMarkers=function(){this.$markerFront.setMarkers(this.session.getMarkers(!0)),this.$loop.schedule(this.CHANGE_MARKER_FRONT)},this.updateBackMarkers=function(){this.$markerBack.setMarkers(this.session.getMarkers()),this.$loop.schedule(this.CHANGE_MARKER_BACK)},this.addGutterDecoration=function(e,t){this.$gutterLayer.addGutterDecoration(e,t)},this.removeGutterDecoration=function(e,t){this.$gutterLayer.removeGutterDecoration(e,t)},this.updateBreakpoints=function(e){this.$loop.schedule(this.CHANGE_GUTTER)},this.setAnnotations=function(e){this.$gutterLayer.setAnnotations(e),this.$loop.schedule(this.CHANGE_GUTTER)},this.updateCursor=function(){this.$loop.schedule(this.CHANGE_CURSOR)},this.hideCursor=function(){this.$cursorLayer.hideCursor()},this.showCursor=function(){this.$cursorLayer.showCursor()},this.scrollSelectionIntoView=function(e,t,n){this.scrollCursorIntoView(e,n),this.scrollCursorIntoView(t,n)},this.scrollCursorIntoView=function(e,t,n){if(this.$size.scrollerHeight===0)return;var r=this.$cursorLayer.getPixelPosition(e),i=r.left,s=r.top,o=n&&n.top||0,u=n&&n.bottom||0,a=this.$scrollAnimation?this.session.getScrollTop():this.scrollTop;a+o>s?(t&&(s-=t*this.$size.scrollerHeight),s===0&&(s=-this.scrollMargin.top),this.session.setScrollTop(s)):a+this.$size.scrollerHeight-u<s+this.lineHeight&&(t&&(s+=t*this.$size.scrollerHeight),this.session.setScrollTop(s+this.lineHeight-this.$size.scrollerHeight));var f=this.scrollLeft;f>i?(i<this.$padding+2*this.layerConfig.characterWidth&&(i=-this.scrollMargin.left),this.session.setScrollLeft(i)):f+this.$size.scrollerWidth<i+this.characterWidth?this.session.setScrollLeft(Math.round(i+this.characterWidth-this.$size.scrollerWidth)):f<=this.$padding&&i-f<this.characterWidth&&this.session.setScrollLeft(0)},this.getScrollTop=function(){return this.session.getScrollTop()},this.getScrollLeft=function(){return this.session.getScrollLeft()},this.getScrollTopRow=function(){return this.scrollTop/this.lineHeight},this.getScrollBottomRow=function(){return Math.max(0,Math.floor((this.scrollTop+this.$size.scrollerHeight)/this.lineHeight)-1)},this.scrollToRow=function(e){this.session.setScrollTop(e*this.lineHeight)},this.alignCursor=function(e,t){typeof e=="number"&&(e={row:e,column:0});var n=this.$cursorLayer.getPixelPosition(e),r=this.$size.scrollerHeight-this.lineHeight,i=n.top-r*(t||0);return this.session.setScrollTop(i),i},this.STEPS=8,this.$calcSteps=function(e,t){var n=0,r=this.STEPS,i=[],s=function(e,t,n){return n*(Math.pow(e-1,3)+1)+t};for(n=0;n<r;++n)i.push(s(n/this.STEPS,e,t-e));return i},this.scrollToLine=function(e,t,n,r){var i=this.$cursorLayer.getPixelPosition({row:e,column:0}),s=i.top;t&&(s-=this.$size.scrollerHeight/2);var o=this.scrollTop;this.session.setScrollTop(s),n!==!1&&this.animateScrolling(o,r)},this.animateScrolling=function(e,t){var n=this.scrollTop;if(!this.$animatedScroll)return;var r=this;if(e==n)return;if(this.$scrollAnimation){var i=this.$scrollAnimation.steps;if(i.length){e=i[0];if(e==n)return}}var s=r.$calcSteps(e,n);this.$scrollAnimation={from:e,to:n,steps:s},clearInterval(this.$timer),r.session.setScrollTop(s.shift()),r.session.$scrollTop=n,this.$timer=setInterval(function(){s.length?(r.session.setScrollTop(s.shift()),r.session.$scrollTop=n):n!=null?(r.session.$scrollTop=-1,r.session.setScrollTop(n),n=null):(r.$timer=clearInterval(r.$timer),r.$scrollAnimation=null,t&&t())},10)},this.scrollToY=function(e){this.scrollTop!==e&&(this.$loop.schedule(this.CHANGE_SCROLL),this.scrollTop=e)},this.scrollToX=function(e){this.scrollLeft!==e&&(this.scrollLeft=e),this.$loop.schedule(this.CHANGE_H_SCROLL)},this.scrollTo=function(e,t){this.session.setScrollTop(t),this.session.setScrollLeft(t)},this.scrollBy=function(e,t){t&&this.session.setScrollTop(this.session.getScrollTop()+t),e&&this.session.setScrollLeft(this.session.getScrollLeft()+e)},this.isScrollableBy=function(e,t){if(t<0&&this.session.getScrollTop()>=1-this.scrollMargin.top)return!0;if(t>0&&this.session.getScrollTop()+this.$size.scrollerHeight-this.layerConfig.maxHeight-(this.$size.scrollerHeight-this.lineHeight)*this.$scrollPastEnd<-1+this.scrollMargin.bottom)return!0;if(e<0&&this.session.getScrollLeft()>=1-this.scrollMargin.left)return!0;if(e>0&&this.session.getScrollLeft()+this.$size.scrollerWidth-this.layerConfig.width<-1+this.scrollMargin.right)return!0},this.pixelToScreenCoordinates=function(e,t){var n=this.scroller.getBoundingClientRect(),r=(e+this.scrollLeft-n.left-this.$padding)/this.characterWidth,i=Math.floor((t+this.scrollTop-n.top)/this.lineHeight),s=Math.round(r);return{row:i,column:s,side:r-s>0?1:-1}},this.screenToTextCoordinates=function(e,t){var n=this.scroller.getBoundingClientRect(),r=Math.round((e+this.scrollLeft-n.left-this.$padding)/this.characterWidth),i=(t+this.scrollTop-n.top)/this.lineHeight;return this.session.screenToDocumentPosition(i,Math.max(r,0))},this.textToScreenCoordinates=function(e,t){var n=this.scroller.getBoundingClientRect(),r=this.session.documentToScreenPosition(e,t),i=this.$padding+Math.round(r.column*this.characterWidth),s=r.row*this.lineHeight;return{pageX:n.left+i-this.scrollLeft,pageY:n.top+s-this.scrollTop}},this.visualizeFocus=function(){i.addCssClass(this.container,"ace_focus")},this.visualizeBlur=function(){i.removeCssClass(this.container,"ace_focus")},this.showComposition=function(e){this.$composition||(this.$composition={keepTextAreaAtCursor:this.$keepTextAreaAtCursor,cssText:this.textarea.style.cssText}),this.$keepTextAreaAtCursor=!0,i.addCssClass(this.textarea,"ace_composition"),this.textarea.style.cssText="",this.$moveTextAreaToCursor()},this.setCompositionText=function(e){this.$moveTextAreaToCursor()},this.hideComposition=function(){if(!this.$composition)return;i.removeCssClass(this.textarea,"ace_composition"),this.$keepTextAreaAtCursor=this.$composition.keepTextAreaAtCursor,this.textarea.style.cssText=this.$composition.cssText,this.$composition=null},this.setTheme=function(e,t){function o(r){if(n.$themeId!=e)return t&&t();if(!r.cssClass)return;i.importCssString(r.cssText,r.cssClass,n.container.ownerDocument),n.theme&&i.removeCssClass(n.container,n.theme.cssClass);var s="padding"in r?r.padding:"padding"in(n.theme||{})?4:n.$padding;n.$padding&&s!=n.$padding&&n.setPadding(s),n.$theme=r.cssClass,n.theme=r,i.addCssClass(n.container,r.cssClass),i.setCssClass(n.container,"ace_dark",r.isDark),n.$size&&(n.$size.width=0,n.$updateSizeAsync()),n._dispatchEvent("themeLoaded",{theme:r}),t&&t()}var n=this;this.$themeId=e,n._dispatchEvent("themeChange",{theme:e});if(!e||typeof e=="string"){var r=e||this.$options.theme.initialValue;s.loadModule(["theme",r],o)}else o(e)},this.getTheme=function(){return this.$themeId},this.setStyle=function(e,t){i.setCssClass(this.container,e,t!==!1)},this.unsetStyle=function(e){i.removeCssClass(this.container,e)},this.setCursorStyle=function(e){this.content.style.cursor!=e&&(this.content.style.cursor=e)},this.setMouseCursor=function(e){this.content.style.cursor=e},this.destroy=function(){this.$textLayer.destroy(),this.$cursorLayer.destroy()}}).call(m.prototype),s.defineOptions(m.prototype,"renderer",{animatedScroll:{initialValue:!1},showInvisibles:{set:function(e){this.$textLayer.setShowInvisibles(e)&&this.$loop.schedule(this.CHANGE_TEXT)},initialValue:!1},showPrintMargin:{set:function(){this.$updatePrintMargin()},initialValue:!0},printMarginColumn:{set:function(){this.$updatePrintMargin()},initialValue:80},printMargin:{set:function(e){typeof e=="number"&&(this.$printMarginColumn=e),this.$showPrintMargin=!!e,this.$updatePrintMargin()},get:function(){return this.$showPrintMargin&&this.$printMarginColumn}},showGutter:{set:function(e){this.$gutter.style.display=e?"block":"none",this.$loop.schedule(this.CHANGE_FULL),this.onGutterResize()},initialValue:!0},fadeFoldWidgets:{set:function(e){i.setCssClass(this.$gutter,"ace_fade-fold-widgets",e)},initialValue:!1},showFoldWidgets:{set:function(e){this.$gutterLayer.setShowFoldWidgets(e)},initialValue:!0},showLineNumbers:{set:function(e){this.$gutterLayer.setShowLineNumbers(e),this.$loop.schedule(this.CHANGE_GUTTER)},initialValue:!0},displayIndentGuides:{set:function(e){this.$textLayer.setDisplayIndentGuides(e)&&this.$loop.schedule(this.CHANGE_TEXT)},initialValue:!0},highlightGutterLine:{set:function(e){if(!this.$gutterLineHighlight){this.$gutterLineHighlight=i.createElement("div"),this.$gutterLineHighlight.className="ace_gutter-active-line",this.$gutter.appendChild(this.$gutterLineHighlight);return}this.$gutterLineHighlight.style.display=e?"":"none",this.$cursorLayer.$pixelPos&&this.$updateGutterLineHighlight()},initialValue:!1,value:!0},hScrollBarAlwaysVisible:{set:function(e){(!this.$hScrollBarAlwaysVisible||!this.$horizScroll)&&this.$loop.schedule(this.CHANGE_SCROLL)},initialValue:!1},vScrollBarAlwaysVisible:{set:function(e){(!this.$vScrollBarAlwaysVisible||!this.$vScroll)&&this.$loop.schedule(this.CHANGE_SCROLL)},initialValue:!1},fontSize:{set:function(e){typeof e=="number"&&(e+="px"),this.container.style.fontSize=e,this.updateFontSize()},initialValue:12},fontFamily:{set:function(e){this.container.style.fontFamily=e,this.updateFontSize()}},maxLines:{set:function(e){this.updateFull()}},minLines:{set:function(e){this.updateFull()}},scrollPastEnd:{set:function(e){e=+e||0;if(this.$scrollPastEnd==e)return;this.$scrollPastEnd=e,this.$loop.schedule(this.CHANGE_SCROLL)},initialValue:0,handlesSet:!0},fixedWidthGutter:{set:function(e){this.$gutterLayer.$fixedWidth=!!e,this.$loop.schedule(this.CHANGE_GUTTER)}},theme:{set:function(e){this.setTheme(e)},get:function(){return this.$themeId||this.theme},initialValue:"./theme/textmate",handlesSet:!0}}),t.VirtualRenderer=m}),define("ace/config",["require","exports","module","ace/lib/lang","ace/lib/oop","ace/lib/net","ace/lib/event_emitter"],function(e,t,n){"no use strict";function f(r){a.packaged=r||e.packaged||n.packaged||u.define&&define.packaged;if(!u.document)return"";var i={},s="",o=document.getElementsByTagName("script");for(var f=0;f<o.length;f++){var c=o[f],h=c.src||c.getAttribute("src");if(!h)continue;var p=c.attributes;for(var d=0,v=p.length;d<v;d++){var m=p[d];m.name.indexOf("data-ace-")===0&&(i[l(m.name.replace(/^data-ace-/,""))]=m.value)}var g=h.match(/^(.*)\/ace(\-\w+)?\.js(\?|$)/);g&&(s=g[1])}s&&(i.base=i.base||s,i.packaged=!0),i.basePath=i.base,i.workerPath=i.workerPath||i.base,i.modePath=i.modePath||i.base,i.themePath=i.themePath||i.base,delete i.base;for(var y in i)typeof i[y]!="undefined"&&t.set(y,i[y])}function l(e){return e.replace(/-(.)/g,function(e,t){return t.toUpperCase()})}var r=e("./lib/lang"),i=e("./lib/oop"),s=e("./lib/net"),o=e("./lib/event_emitter").EventEmitter,u=function(){return this}(),a={packaged:!1,workerPath:null,modePath:null,themePath:null,basePath:"",suffix:".js",$moduleUrls:{}};t.get=function(e){if(!a.hasOwnProperty(e))throw new Error("Unknown config key: "+e);return a[e]},t.set=function(e,t){if(!a.hasOwnProperty(e))throw new Error("Unknown config key: "+e);a[e]=t},t.all=function(){return r.copyObject(a)},i.implement(t,o),t.moduleUrl=function(e,t){if(a.$moduleUrls[e])return a.$moduleUrls[e];var n=e.split("/");t=t||n[n.length-2]||"";var r=t=="snippets"?"/":"-",i=n[n.length-1];if(r=="-"){var s=new RegExp("^"+t+"[\\-_]|[\\-_]"+t+"$","g");i=i.replace(s,"")}(!i||i==t)&&n.length>1&&(i=n[n.length-2]);var o=a[t+"Path"];return o==null?o=a.basePath:r=="/"&&(t=r=""),o&&o.slice(-1)!="/"&&(o+="/"),o+t+r+i+this.get("suffix")},t.setModuleUrl=function(e,t){return a.$moduleUrls[e]=t},t.$loading={},t.loadModule=function(n,r){var i,o;Array.isArray(n)&&(o=n[0],n=n[1]);try{i=e(n)}catch(u){}if(i&&!t.$loading[n])return r&&r(i);t.$loading[n]||(t.$loading[n]=[]),t.$loading[n].push(r);if(t.$loading[n].length>1)return;var a=function(){e([n],function(e){t._emit("load.module",{name:n,module:e});var r=t.$loading[n];t.$loading[n]=null,r.forEach(function(t){t&&t(e)})})};if(!t.get("packaged"))return a();s.loadScript(t.moduleUrl(n,o),a)},f(!0),t.init=f;var c={setOptions:function(e){Object.keys(e).forEach(function(t){this.setOption(t,e[t])},this)},getOptions:function(e){var t={};return e?Array.isArray(e)||(t=e,e=Object.keys(t)):e=Object.keys(this.$options),e.forEach(function(e){t[e]=this.getOption(e)},this),t},setOption:function(e,t){if(this["$"+e]===t)return;var n=this.$options[e];if(!n)return typeof console!="undefined"&&console.warn&&console.warn('misspelled option "'+e+'"'),undefined;if(n.forwardTo)return this[n.forwardTo]&&this[n.forwardTo].setOption(e,t);n.handlesSet||(this["$"+e]=t),n&&n.set&&n.set.call(this,t)},getOption:function(e){var t=this.$options[e];return t?t.forwardTo?this[t.forwardTo]&&this[t.forwardTo].getOption(e):t&&t.get?t.get.call(this):this["$"+e]:(typeof console!="undefined"&&console.warn&&console.warn('misspelled option "'+e+'"'),undefined)}},h={};t.defineOptions=function(e,t,n){return e.$options||(h[t]=e.$options={}),Object.keys(n).forEach(function(t){var r=n[t];typeof r=="string"&&(r={forwardTo:r}),r.name||(r.name=t),e.$options[r.name]=r,"initialValue"in r&&(e["$"+r.name]=r.initialValue)}),i.implement(e,c),this},t.resetOptions=function(e){Object.keys(e.$options).forEach(function(t){var n=e.$options[t];"value"in n&&e.setOption(t,n.value)})},t.setDefaultValue=function(e,n,r){var i=h[e]||(h[e]={});i[n]&&(i.forwardTo?t.setDefaultValue(i.forwardTo,n,r):i[n].value=r)},t.setDefaultValues=function(e,n){Object.keys(n).forEach(function(r){t.setDefaultValue(e,r,n[r])})}}),define("ace/layer/gutter",["require","exports","module","ace/lib/dom","ace/lib/oop","ace/lib/lang","ace/lib/event_emitter"],function(e,t,n){var r=e("../lib/dom"),i=e("../lib/oop"),s=e("../lib/lang"),o=e("../lib/event_emitter").EventEmitter,u=function(e){this.element=r.createElement("div"),this.element.className="ace_layer ace_gutter-layer",e.appendChild(this.element),this.setShowFoldWidgets(this.$showFoldWidgets),this.gutterWidth=0,this.$annotations=[],this.$updateAnnotations=this.$updateAnnotations.bind(this),this.$cells=[]};(function(){i.implement(this,o),this.setSession=function(e){this.session&&this.session.removeEventListener("change",this.$updateAnnotations),this.session=e,e.on("change",this.$updateAnnotations)},this.addGutterDecoration=function(e,t){window.console&&console.warn&&console.warn("deprecated use session.addGutterDecoration"),this.session.addGutterDecoration(e,t)},this.removeGutterDecoration=function(e,t){window.console&&console.warn&&console.warn("deprecated use session.removeGutterDecoration"),this.session.removeGutterDecoration(e,t)},this.setAnnotations=function(e){this.$annotations=[];for(var t=0;t<e.length;t++){var n=e[t],r=n.row,i=this.$annotations[r];i||(i=this.$annotations[r]={text:[]});var o=n.text;o=o?s.escapeHTML(o):n.html||"",i.text.indexOf(o)===-1&&i.text.push(o);var u=n.type;u=="error"?i.className=" ace_error":u=="warning"&&i.className!=" ace_error"?i.className=" ace_warning":u=="info"&&!i.className&&(i.className=" ace_info")}},this.$updateAnnotations=function(e){if(!this.$annotations.length)return;var t=e.data,n=t.range,r=n.start.row,i=n.end.row-r;if(i!==0)if(t.action=="removeText"||t.action=="removeLines")this.$annotations.splice(r,i+1,null);else{var s=new Array(i+1);s.unshift(r,1),this.$annotations.splice.apply(this.$annotations,s)}},this.update=function(e){var t=this.session,n=e.firstRow,i=Math.min(e.lastRow+e.gutterOffset,t.getLength()-1),s=t.getNextFoldLine(n),o=s?s.start.row:Infinity,u=this.$showFoldWidgets&&t.foldWidgets,a=t.$breakpoints,f=t.$decorations,l=t.$firstLineNumber,c=0,h=t.gutterRenderer||this.$renderer,p=null,d=-1,v=n;for(;;){v>o&&(v=s.end.row+1,s=t.getNextFoldLine(v,s),o=s?s.start.row:Infinity);if(v>i){while(this.$cells.length>d+1)p=this.$cells.pop(),this.element.removeChild(p.element);break}p=this.$cells[++d],p||(p={element:null,textNode:null,foldWidget:null},p.element=r.createElement("div"),p.textNode=document.createTextNode(""),p.element.appendChild(p.textNode),this.element.appendChild(p.element),this.$cells[d]=p);var m="ace_gutter-cell ";a[v]&&(m+=a[v]),f[v]&&(m+=f[v]),this.$annotations[v]&&(m+=this.$annotations[v].className),p.element.className!=m&&(p.element.className=m);var g=t.getRowLength(v)*e.lineHeight+"px";g!=p.element.style.height&&(p.element.style.height=g);if(u){var y=u[v];y==null&&(y=u[v]=t.getFoldWidget(v))}if(y){p.foldWidget||(p.foldWidget=r.createElement("span"),p.element.appendChild(p.foldWidget));var m="ace_fold-widget ace_"+y;y=="start"&&v==o&&v<s.end.row?m+=" ace_closed":m+=" ace_open",p.foldWidget.className!=m&&(p.foldWidget.className=m);var g=e.lineHeight+"px";p.foldWidget.style.height!=g&&(p.foldWidget.style.height=g)}else p.foldWidget&&(p.element.removeChild(p.foldWidget),p.foldWidget=null);var b=c=h?h.getText(t,v):v+l;b!=p.textNode.data&&(p.textNode.data=b),v++}this.element.style.height=e.minHeight+"px";if(this.$fixedWidth||t.$useWrapMode)c=t.getLength()+l;var w=h?h.getWidth(t,c,e):c.toString().length*e.characterWidth,E=this.$padding||this.$computePadding();w+=E.left+E.right,w!==this.gutterWidth&&!isNaN(w)&&(this.gutterWidth=w,this.element.style.width=Math.ceil(this.gutterWidth)+"px",this._emit("changeGutterWidth",w))},this.$fixedWidth=!1,this.$showLineNumbers=!0,this.$renderer="",this.setShowLineNumbers=function(e){this.$renderer=!e&&{getWidth:function(){return""},getText:function(){return""}}},this.getShowLineNumbers=function(){return this.$showLineNumbers},this.$showFoldWidgets=!0,this.setShowFoldWidgets=function(e){e?r.addCssClass(this.element,"ace_folding-enabled"):r.removeCssClass(this.element,"ace_folding-enabled"),this.$showFoldWidgets=e,this.$padding=null},this.getShowFoldWidgets=function(){return this.$showFoldWidgets},this.$computePadding=function(){if(!this.element.firstChild)return{left:0,right:0};var e=r.computedStyle(this.element.firstChild);return this.$padding={},this.$padding.left=parseInt(e.paddingLeft)+1||0,this.$padding.right=parseInt(e.paddingRight)||0,this.$padding},this.getRegion=function(e){var t=this.$padding||this.$computePadding(),n=this.element.getBoundingClientRect();if(e.x<t.left+n.left)return"markers";if(this.$showFoldWidgets&&e.x>n.right-t.right)return"foldWidgets"}}).call(u.prototype),t.Gutter=u}),define("ace/mouse/dragdrop_handler",["require","exports","module","ace/lib/dom","ace/lib/event","ace/lib/useragent"],function(e,t,n){function f(e){function T(e,n){var r=Date.now(),i=!n||e.row!=n.row,s=!n||e.column!=n.column;if(!S||i||s)t.$blockScrolling+=1,t.moveCursorToPosition(e),t.$blockScrolling-=1,S=r,x={x:p,y:d};else{var o=l(x.x,x.y,p,d);o>a?S=null:r-S>=u&&(t.renderer.scrollCursorIntoView(),S=null)}}function N(e,n){var r=Date.now(),i=t.renderer.layerConfig.lineHeight,s=t.renderer.layerConfig.characterWidth,u=t.renderer.scroller.getBoundingClientRect(),a={x:{left:p-u.left,right:u.right-p},y:{top:d-u.top,bottom:u.bottom-d}},f=Math.min(a.x.left,a.x.right),l=Math.min(a.y.top,a.y.bottom),c={row:e.row,column:e.column};f/s<=2&&(c.column+=a.x.left<a.x.right?-3:2),l/i<=1&&(c.row+=a.y.top<a.y.bottom?-1:1);var h=e.row!=c.row,v=e.column!=c.column,m=!n||e.row!=n.row;h||v&&!m?E?r-E>=o&&t.renderer.scrollCursorIntoView(c):E=r:E=null}function C(){var e=g;g=t.renderer.screenToTextCoordinates(p,d),T(g,e),N(g,e)}function k(){m=t.selection.toOrientedRange(),h=t.session.addMarker(m,"ace_selection",t.getSelectionStyle()),t.clearSelection(),t.isFocused()&&t.renderer.$cursorLayer.setBlinking(!1),clearInterval(v),v=setInterval(C,20),y=0,i.addListener(document,"mousemove",O)}function L(){clearInterval(v),t.session.removeMarker(h),h=null,t.$blockScrolling+=1,t.selection.fromOrientedRange(m),t.$blockScrolling-=1,t.isFocused()&&!w&&t.renderer.$cursorLayer.setBlinking(!t.getReadOnly()),m=null,y=0,E=null,S=null,i.removeListener(document,"mousemove",O)}function O(){A==null&&(A=setTimeout(function(){A!=null&&h&&L()},20))}function M(e){var t=e.types;return!t||Array.prototype.some.call(t,function(e){return e=="text/plain"||e=="Text"})}function _(e){var t=["copy","copymove","all","uninitialized"],n=["move","copymove","linkmove","all","uninitialized"],r=s.isMac?e.altKey:e.ctrlKey,i="uninitialized";try{i=e.dataTransfer.effectAllowed.toLowerCase()}catch(e){}var o="none";return r&&t.indexOf(i)>=0?o="copy":n.indexOf(i)>=0?o="move":t.indexOf(i)>=0&&(o="copy"),o}var t=e.editor,n=r.createElement("img");n.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",s.isOpera&&(n.style.cssText="width:1px;height:1px;position:fixed;top:0;left:0;z-index:2147483647;opacity:0;");var f=["dragWait","dragWaitEnd","startDrag","dragReadyEnd","onMouseDrag"];f.forEach(function(t){e[t]=this[t]},this),t.addEventListener("mousedown",this.onMouseDown.bind(e));var c=t.container,h,p,d,v,m,g,y=0,b,w,E,S,x;this.onDragStart=function(e){if(this.cancelDrag||!c.draggable){var r=this;return setTimeout(function(){r.startSelect(),r.captureMouse(e)},0),e.preventDefault()}m=t.getSelectionRange();var i=e.dataTransfer;i.effectAllowed=t.getReadOnly()?"copy":"copyMove",s.isOpera&&(t.container.appendChild(n),n._top=n.offsetTop),i.setDragImage&&i.setDragImage(n,0,0),s.isOpera&&t.container.removeChild(n),i.clearData(),i.setData("Text",t.session.getTextRange()),w=!0,this.setState("drag")},this.onDragEnd=function(e){c.draggable=!1,w=!1,this.setState(null);if(!t.getReadOnly()){var n=e.dataTransfer.dropEffect;!b&&n=="move"&&t.session.remove(t.getSelectionRange()),t.renderer.$cursorLayer.setBlinking(!0)}this.editor.unsetStyle("ace_dragging")},this.onDragEnter=function(e){if(t.getReadOnly()||!M(e.dataTransfer))return;return h||k(),y++,e.dataTransfer.dropEffect=b=_(e),i.preventDefault(e)},this.onDragOver=function(e){if(t.getReadOnly()||!M(e.dataTransfer))return;return h||(k(),y++),A!==null&&(A=null),p=e.clientX,d=e.clientY,e.dataTransfer.dropEffect=b=_(e),i.preventDefault(e)},this.onDragLeave=function(e){y--;if(y<=0&&h)return L(),b=null,i.preventDefault(e)},this.onDrop=function(e){if(!h)return;var n=e.dataTransfer;if(w)switch(b){case"move":m.contains(g.row,g.column)?m={start:g,end:g}:m=t.moveText(m,g);break;case"copy":m=t.moveText(m,g,!0)}else{var r=n.getData("Text");m={start:g,end:t.session.insert(g,r)},t.focus(),b=null}return L(),i.preventDefault(e)},i.addListener(c,"dragstart",this.onDragStart.bind(e)),i.addListener(c,"dragend",this.onDragEnd.bind(e)),i.addListener(c,"dragenter",this.onDragEnter.bind(e)),i.addListener(c,"dragover",this.onDragOver.bind(e)),i.addListener(c,"dragleave",this.onDragLeave.bind(e)),i.addListener(c,"drop",this.onDrop.bind(e));var A=null}function l(e,t,n,r){return Math.sqrt(Math.pow(n-e,2)+Math.pow(r-t,2))}var r=e("../lib/dom"),i=e("../lib/event"),s=e("../lib/useragent"),o=200,u=200,a=5;(function(){this.dragWait=function(){var e=Date.now()-this.mousedownEvent.time;e>this.editor.getDragDelay()&&this.startDrag()},this.dragWaitEnd=function(){var e=this.editor.container;e.draggable=!1,this.startSelect(this.mousedownEvent.getDocumentPosition()),this.selectEnd()},this.dragReadyEnd=function(e){this.editor.renderer.$cursorLayer.setBlinking(!this.editor.getReadOnly()),this.editor.unsetStyle("ace_dragging"),this.dragWaitEnd()},this.startDrag=function(){this.cancelDrag=!1;var e=this.editor.container;e.draggable=!0,this.editor.renderer.$cursorLayer.setBlinking(!1),this.editor.setStyle("ace_dragging"),this.setState("dragReady")},this.onMouseDrag=function(e){var t=this.editor.container;if(s.isIE&&this.state=="dragReady"){var n=l(this.mousedownEvent.x,this.mousedownEvent.y,this.x,this.y);n>3&&t.dragDrop()}if(this.state==="dragWait"){var n=l(this.mousedownEvent.x,this.mousedownEvent.y,this.x,this.y);n>0&&(t.draggable=!1,this.startSelect(this.mousedownEvent.getDocumentPosition()))}},this.onMouseDown=function(e){if(!this.$dragEnabled)return;this.mousedownEvent=e;var t=this.editor,n=e.inSelection(),r=e.getButton(),i=e.domEvent.detail||1;if(i===1&&r===0&&n){if(e.editor.inMultiSelectMode&&(e.getAccelKey()||e.getShiftKey()))return;this.mousedownEvent.time=Date.now();var o=e.domEvent.target||e.domEvent.srcElement;"unselectable"in o&&(o.unselectable="on");if(t.getDragDelay()){if(s.isWebKit){this.cancelDrag=!0;var u=t.container;u.draggable=!0}this.setState("dragWait")}else this.startDrag();this.captureMouse(e,this.onMouseDrag.bind(this)),e.defaultPrevented=!0}}}).call(f.prototype),t.DragdropHandler=f}),define("ace/layer/marker",["require","exports","module","ace/range","ace/lib/dom"],function(e,t,n){var r=e("../range").Range,i=e("../lib/dom"),s=function(e){this.element=i.createElement("div"),this.element.className="ace_layer ace_marker-layer",e.appendChild(this.element)};(function(){this.$padding=0,this.setPadding=function(e){this.$padding=e},this.setSession=function(e){this.session=e},this.setMarkers=function(e){this.markers=e},this.update=function(e){var e=e||this.config;if(!e)return;this.config=e;var t=[];for(var n in this.markers){var r=this.markers[n];if(!r.range){r.update(t,this,this.session,e);continue}var s=r.range.clipRows(e.firstRow,e.lastRow);if(s.isEmpty())continue;s=s.toScreenRange(this.session);if(r.renderer){var o=this.$getTop(s.start.row,e),u=this.$padding+s.start.column*e.characterWidth;r.renderer(t,s,u,o,e)}else r.type=="fullLine"?this.drawFullLineMarker(t,s,r.clazz,e):r.type=="screenLine"?this.drawScreenLineMarker(t,s,r.clazz,e):s.isMultiLine()?r.type=="text"?this.drawTextMarker(t,s,r.clazz,e):this.drawMultiLineMarker(t,s,r.clazz,e):this.drawSingleLineMarker(t,s,r.clazz+" ace_start",e)}this.element=i.setInnerHtml(this.element,t.join(""))},this.$getTop=function(e,t){return(e-t.firstRowScreen)*t.lineHeight},this.drawTextMarker=function(e,t,n,i,s){var o=t.start.row,u=new r(o,t.start.column,o,this.session.getScreenLastRowColumn(o));this.drawSingleLineMarker(e,u,n+" ace_start",i,1,s),o=t.end.row,u=new r(o,0,o,t.end.column),this.drawSingleLineMarker(e,u,n,i,0,s);for(o=t.start.row+1;o<t.end.row;o++)u.start.row=o,u.end.row=o,u.end.column=this.session.getScreenLastRowColumn(o),this.drawSingleLineMarker(e,u,n,i,1,s)},this.drawMultiLineMarker=function(e,t,n,r,i){var s=this.$padding,o=r.lineHeight,u=this.$getTop(t.start.row,r),a=s+t.start.column*r.characterWidth;i=i||"",e.push("<div class='",n," ace_start' style='","height:",o,"px;","right:0;","top:",u,"px;","left:",a,"px;",i,"'></div>"),u=this.$getTop(t.end.row,r);var f=t.end.column*r.characterWidth;e.push("<div class='",n,"' style='","height:",o,"px;","width:",f,"px;","top:",u,"px;","left:",s,"px;",i,"'></div>"),o=(t.end.row-t.start.row-1)*r.lineHeight;if(o<0)return;u=this.$getTop(t.start.row+1,r),e.push("<div class='",n,"' style='","height:",o,"px;","right:0;","top:",u,"px;","left:",s,"px;",i,"'></div>")},this.drawSingleLineMarker=function(e,t,n,r,i,s){var o=r.lineHeight,u=(t.end.column+(i||0)-t.start.column)*r.characterWidth,a=this.$getTop(t.start.row,r),f=this.$padding+t.start.column*r.characterWidth;e.push("<div class='",n,"' style='","height:",o,"px;","width:",u,"px;","top:",a,"px;","left:",f,"px;",s||"","'></div>")},this.drawFullLineMarker=function(e,t,n,r,i){var s=this.$getTop(t.start.row,r),o=r.lineHeight;t.start.row!=t.end.row&&(o+=this.$getTop(t.end.row,r)-s),e.push("<div class='",n,"' style='","height:",o,"px;","top:",s,"px;","left:0;right:0;",i||"","'></div>")},this.drawScreenLineMarker=function(e,t,n,r,i){var s=this.$getTop(t.start.row,r),o=r.lineHeight;e.push("<div class='",n,"' style='","height:",o,"px;","top:",s,"px;","left:0;right:0;",i||"","'></div>")}}).call(s.prototype),t.Marker=s}),define("ace/mouse/mouse_event",["require","exports","module","ace/lib/event","ace/lib/useragent"],function(e,t,n){var r=e("../lib/event"),i=e("../lib/useragent"),s=t.MouseEvent=function(e,t){this.domEvent=e,this.editor=t,this.x=this.clientX=e.clientX,this.y=this.clientY=e.clientY,this.$pos=null,this.$inSelection=null,this.propagationStopped=!1,this.defaultPrevented=!1};(function(){this.stopPropagation=function(){r.stopPropagation(this.domEvent),this.propagationStopped=!0},this.preventDefault=function(){r.preventDefault(this.domEvent),this.defaultPrevented=!0},this.stop=function(){this.stopPropagation(),this.preventDefault()},this.getDocumentPosition=function(){return this.$pos?this.$pos:(this.$pos=this.editor.renderer.screenToTextCoordinates(this.clientX,this.clientY),this.$pos)},this.inSelection=function(){if(this.$inSelection!==null)return this.$inSelection;var e=this.editor,t=e.getSelectionRange();if(t.isEmpty())this.$inSelection=!1;else{var n=this.getDocumentPosition();this.$inSelection=t.contains(n.row,n.column)}return this.$inSelection},this.getButton=function(){return r.getButton(this.domEvent)},this.getShiftKey=function(){return this.domEvent.shiftKey},this.getAccelKey=i.isMac?function(){return this.domEvent.metaKey}:function(){return this.domEvent.ctrlKey}}).call(s.prototype)}),define("ace/layer/text",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/lang","ace/lib/useragent","ace/lib/event_emitter"],function(e,t,n){var r=e("../lib/oop"),i=e("../lib/dom"),s=e("../lib/lang"),o=e("../lib/useragent"),u=e("../lib/event_emitter").EventEmitter,a=function(e){this.element=i.createElement("div"),this.element.className="ace_layer ace_text-layer",e.appendChild(this.element),this.$updateEolChar=this.$updateEolChar.bind(this)};(function(){r.implement(this,u),this.EOF_CHAR="",this.EOL_CHAR_LF="",this.EOL_CHAR_CRLF="",this.EOL_CHAR=this.EOL_CHAR_LF,this.TAB_CHAR="",this.SPACE_CHAR="",this.$padding=0,this.$updateEolChar=function(){var e=this.session.doc.getNewLineCharacter()=="\n"?this.EOL_CHAR_LF:this.EOL_CHAR_CRLF;if(this.EOL_CHAR!=e)return this.EOL_CHAR=e,!0},this.setPadding=function(e){this.$padding=e,this.element.style.padding="0 "+e+"px"},this.getLineHeight=function(){return this.$fontMetrics.$characterSize.height||0},this.getCharacterWidth=function(){return this.$fontMetrics.$characterSize.width||0},this.$setFontMetrics=function(e){this.$fontMetrics=e,this.$fontMetrics.on("changeCharacterSize",function(e){this._signal("changeCharacterSize",e)}.bind(this)),this.$pollSizeChanges()},this.checkForSizeChanges=function(){this.$fontMetrics.checkForSizeChanges()},this.$pollSizeChanges=function(){return this.$pollSizeChangesTimer=this.$fontMetrics.$pollSizeChanges()},this.setSession=function(e){this.session=e,this.$computeTabString()},this.showInvisibles=!1,this.setShowInvisibles=function(e){return this.showInvisibles==e?!1:(this.showInvisibles=e,this.$computeTabString(),!0)},this.displayIndentGuides=!0,this.setDisplayIndentGuides=function(e){return this.displayIndentGuides==e?!1:(this.displayIndentGuides=e,this.$computeTabString(),!0)},this.$tabStrings=[],this.onChangeTabSize=this.$computeTabString=function(){var e=this.session.getTabSize();this.tabSize=e;var t=this.$tabStrings=[0];for(var n=1;n<e+1;n++)this.showInvisibles?t.push("<span class='ace_invisible'>"+this.TAB_CHAR+s.stringRepeat("",n-1)+"</span>"):t.push(s.stringRepeat("",n));if(this.displayIndentGuides){this.$indentGuideRe=/\s\S| \t|\t |\s$/;var r="ace_indent-guide";if(this.showInvisibles){r+=" ace_invisible";var i=s.stringRepeat(this.SPACE_CHAR,this.tabSize),o=this.TAB_CHAR+s.stringRepeat("",this.tabSize-1)}else var i=s.stringRepeat("",this.tabSize),o=i;this.$tabStrings[" "]="<span class='"+r+"'>"+i+"</span>",this.$tabStrings["	"]="<span class='"+r+"'>"+o+"</span>"}},this.updateLines=function(e,t,n){(this.config.lastRow!=e.lastRow||this.config.firstRow!=e.firstRow)&&this.scrollLines(e),this.config=e;var r=Math.max(t,e.firstRow),s=Math.min(n,e.lastRow),o=this.element.childNodes,u=0;for(var a=e.firstRow;a<r;a++){var f=this.session.getFoldLine(a);if(f){if(f.containsRow(r)){r=f.start.row;break}a=f.end.row}u++}var a=r,f=this.session.getNextFoldLine(a),l=f?f.start.row:Infinity;for(;;){a>l&&(a=f.end.row+1,f=this.session.getNextFoldLine(a,f),l=f?f.start.row:Infinity);if(a>s)break;var c=o[u++];if(c){var h=[];this.$renderLine(h,a,!this.$useLineGroups(),a==l?f:!1),c.style.height=e.lineHeight*this.session.getRowLength(a)+"px",i.setInnerHtml(c,h.join(""))}a++}},this.scrollLines=function(e){var t=this.config;this.config=e;if(!t||t.lastRow<e.firstRow)return this.update(e);if(e.lastRow<t.firstRow)return this.update(e);var n=this.element;if(t.firstRow<e.firstRow)for(var r=this.session.getFoldedRowCount(t.firstRow,e.firstRow-1);r>0;r--)n.removeChild(n.firstChild);if(t.lastRow>e.lastRow)for(var r=this.session.getFoldedRowCount(e.lastRow+1,t.lastRow);r>0;r--)n.removeChild(n.lastChild);if(e.firstRow<t.firstRow){var i=this.$renderLinesFragment(e,e.firstRow,t.firstRow-1);n.firstChild?n.insertBefore(i,n.firstChild):n.appendChild(i)}if(e.lastRow>t.lastRow){var i=this.$renderLinesFragment(e,t.lastRow+1,e.lastRow);n.appendChild(i)}},this.$renderLinesFragment=function(e,t,n){var r=this.element.ownerDocument.createDocumentFragment(),s=t,o=this.session.getNextFoldLine(s),u=o?o.start.row:Infinity;for(;;){s>u&&(s=o.end.row+1,o=this.session.getNextFoldLine(s,o),u=o?o.start.row:Infinity);if(s>n)break;var a=i.createElement("div"),f=[];this.$renderLine(f,s,!1,s==u?o:!1),a.innerHTML=f.join("");if(this.$useLineGroups())a.className="ace_line_group",r.appendChild(a),a.style.height=e.lineHeight*this.session.getRowLength(s)+"px";else while(a.firstChild)r.appendChild(a.firstChild);s++}return r},this.update=function(e){this.config=e;var t=[],n=e.firstRow,r=e.lastRow,s=n,o=this.session.getNextFoldLine(s),u=o?o.start.row:Infinity;for(;;){s>u&&(s=o.end.row+1,o=this.session.getNextFoldLine(s,o),u=o?o.start.row:Infinity);if(s>r)break;this.$useLineGroups()&&t.push("<div class='ace_line_group' style='height:",e.lineHeight*this.session.getRowLength(s),"px'>"),this.$renderLine(t,s,!1,s==u?o:!1),this.$useLineGroups()&&t.push("</div>"),s++}this.element=i.setInnerHtml(this.element,t.join(""))},this.$textToken={text:!0,rparen:!0,lparen:!0},this.$renderToken=function(e,t,n,r){var i=this,o=/\t|&|<|( +)|([\x00-\x1f\x80-\xa0\u1680\u180E\u2000-\u200f\u2028\u2029\u202F\u205F\u3000\uFEFF])|[\u1100-\u115F\u11A3-\u11A7\u11FA-\u11FF\u2329-\u232A\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u2FF0-\u2FFB\u3000-\u303E\u3041-\u3096\u3099-\u30FF\u3105-\u312D\u3131-\u318E\u3190-\u31BA\u31C0-\u31E3\u31F0-\u321E\u3220-\u3247\u3250-\u32FE\u3300-\u4DBF\u4E00-\uA48C\uA490-\uA4C6\uA960-\uA97C\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFAFF\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE66\uFE68-\uFE6B\uFF01-\uFF60\uFFE0-\uFFE6]/g,u=function(e,n,r,o,u){if(n)return i.showInvisibles?"<span class='ace_invisible'>"+s.stringRepeat(i.SPACE_CHAR,e.length)+"</span>":s.stringRepeat("",e.length);if(e=="&")return"&#38;";if(e=="<")return"&#60;";if(e=="	"){var a=i.session.getScreenTabSize(t+o);return t+=a-1,i.$tabStrings[a]}if(e==""){var f=i.showInvisibles?"ace_cjk ace_invisible":"ace_cjk",l=i.showInvisibles?i.SPACE_CHAR:"";return t+=1,"<span class='"+f+"' style='width:"+i.config.characterWidth*2+"px'>"+l+"</span>"}return r?"<span class='ace_invisible ace_invalid'>"+i.SPACE_CHAR+"</span>":(t+=1,"<span class='ace_cjk' style='width:"+i.config.characterWidth*2+"px'>"+e+"</span>")},a=r.replace(o,u);if(!this.$textToken[n.type]){var f="ace_"+n.type.replace(/\./g," ace_"),l="";n.type=="fold"&&(l=" style='width:"+n.value.length*this.config.characterWidth+"px;' "),e.push("<span class='",f,"'",l,">",a,"</span>")}else e.push(a);return t+r.length},this.renderIndentGuide=function(e,t,n){var r=t.search(this.$indentGuideRe);return r<=0||r>=n?t:t[0]==" "?(r-=r%this.tabSize,e.push(s.stringRepeat(this.$tabStrings[" "],r/this.tabSize)),t.substr(r)):t[0]=="	"?(e.push(s.stringRepeat(this.$tabStrings["	"],r)),t.substr(r)):t},this.$renderWrappedLine=function(e,t,n,r){var i=0,s=0,o=n[0],u=0;for(var a=0;a<t.length;a++){var f=t[a],l=f.value;if(a==0&&this.displayIndentGuides){i=l.length,l=this.renderIndentGuide(e,l,o);if(!l)continue;i-=l.length}if(i+l.length<o)u=this.$renderToken(e,u,f,l),i+=l.length;else{while(i+l.length>=o)u=this.$renderToken(e,u,f,l.substring(0,o-i)),l=l.substring(o-i),i=o,r||e.push("</div>","<div class='ace_line' style='height:",this.config.lineHeight,"px'>"),s++,u=0,o=n[s]||Number.MAX_VALUE;l.length!=0&&(i+=l.length,u=this.$renderToken(e,u,f,l))}}},this.$renderSimpleLine=function(e,t){var n=0,r=t[0],i=r.value;this.displayIndentGuides&&(i=this.renderIndentGuide(e,i)),i&&(n=this.$renderToken(e,n,r,i));for(var s=1;s<t.length;s++)r=t[s],i=r.value,n=this.$renderToken(e,n,r,i)},this.$renderLine=function(e,t,n,r){!r&&r!=0&&(r=this.session.getFoldLine(t));if(r)var i=this.$getFoldLineTokens(t,r);else var i=this.session.getTokens(t);n||e.push("<div class='ace_line' style='height:",this.config.lineHeight*(this.$useLineGroups()?1:this.session.getRowLength(t)),"px'>");if(i.length){var s=this.session.getRowSplitData(t);s&&s.length?this.$renderWrappedLine(e,i,s,n):this.$renderSimpleLine(e,i)}this.showInvisibles&&(r&&(t=r.end.row),e.push("<span class='ace_invisible'>",t==this.session.getLength()-1?this.EOF_CHAR:this.EOL_CHAR,"</span>")),n||e.push("</div>")},this.$getFoldLineTokens=function(e,t){function i(e,t,n){var i=0,s=0;while(s+e[i].value.length<t){s+=e[i].value.length,i++;if(i==e.length)return}if(s!=t){var o=e[i].value.substring(t-s);o.length>n-t&&(o=o.substring(0,n-t)),r.push({type:e[i].type,value:o}),s=t+o.length,i+=1}while(s<n&&i<e.length){var o=e[i].value;o.length+s>n?r.push({type:e[i].type,value:o.substring(0,n-s)}):r.push(e[i]),s+=o.length,i+=1}}var n=this.session,r=[],s=n.getTokens(e);return t.walk(function(e,t,o,u,a){e!=null?r.push({type:"fold",value:e}):(a&&(s=n.getTokens(t)),s.length&&i(s,u,o))},t.end.row,this.session.getLine(t.end.row).length),r},this.$useLineGroups=function(){return this.session.getUseWrapMode()},this.destroy=function(){clearInterval(this.$pollSizeChangesTimer),this.$measureNode&&this.$measureNode.parentNode.removeChild(this.$measureNode),delete this.$measureNode}}).call(a.prototype),t.Text=a}),define("ace/tooltip",["require","exports","module","ace/lib/oop","ace/lib/dom"],function(e,t,n){function s(e){this.isOpen=!1,this.$element=null,this.$parentNode=e}var r=e("./lib/oop"),i=e("./lib/dom");(function(){this.$init=function(){return this.$element=i.createElement("div"),this.$element.className="ace_tooltip",this.$element.style.display="none",this.$parentNode.appendChild(this.$element),this.$element},this.getElement=function(){return this.$element||this.$init()},this.setText=function(e){i.setInnerText(this.getElement(),e)},this.setHtml=function(e){this.getElement().innerHTML=e},this.setPosition=function(e,t){this.getElement().style.left=e+"px",this.getElement().style.top=t+"px"},this.setClassName=function(e){i.addCssClass(this.getElement(),e)},this.show=function(e,t,n){e!=null&&this.setText(e),t!=null&&n!=null&&this.setPosition(t,n),this.isOpen||(this.getElement().style.display="block",this.isOpen=!0)},this.hide=function(){this.isOpen&&(this.getElement().style.display="none",this.isOpen=!1)},this.getHeight=function(){return this.getElement().offsetHeight},this.getWidth=function(){return this.getElement().offsetWidth}}).call(s.prototype),t.Tooltip=s}),define("ace/layer/cursor",["require","exports","module","ace/lib/dom"],function(e,t,n){var r=e("../lib/dom"),i,s=function(e){this.element=r.createElement("div"),this.element.className="ace_layer ace_cursor-layer",e.appendChild(this.element),i===undefined&&(i="opacity"in this.element),this.isVisible=!1,this.isBlinking=!0,this.blinkInterval=1e3,this.smoothBlinking=!1,this.cursors=[],this.cursor=this.addCursor(),r.addCssClass(this.element,"ace_hidden-cursors"),this.$updateCursors=this.$updateVisibility.bind(this)};(function(){this.$updateVisibility=function(e){var t=this.cursors;for(var n=t.length;n--;)t[n].style.visibility=e?"":"hidden"},this.$updateOpacity=function(e){var t=this.cursors;for(var n=t.length;n--;)t[n].style.opacity=e?"":"0"},this.$padding=0,this.setPadding=function(e){this.$padding=e},this.setSession=function(e){this.session=e},this.setBlinking=function(e){e!=this.isBlinking&&(this.isBlinking=e,this.restartTimer())},this.setBlinkInterval=function(e){e!=this.blinkInterval&&(this.blinkInterval=e,this.restartTimer())},this.setSmoothBlinking=function(e){e!=this.smoothBlinking&&!i&&(this.smoothBlinking=e,r.setCssClass(this.element,"ace_smooth-blinking",e),this.$updateCursors(!0),this.$updateCursors=(e?this.$updateOpacity:this.$updateVisibility).bind(this),this.restartTimer())},this.addCursor=function(){var e=r.createElement("div");return e.className="ace_cursor",this.element.appendChild(e),this.cursors.push(e),e},this.removeCursor=function(){if(this.cursors.length>1){var e=this.cursors.pop();return e.parentNode.removeChild(e),e}},this.hideCursor=function(){this.isVisible=!1,r.addCssClass(this.element,"ace_hidden-cursors"),this.restartTimer()},this.showCursor=function(){this.isVisible=!0,r.removeCssClass(this.element,"ace_hidden-cursors"),this.restartTimer()},this.restartTimer=function(){var e=this.$updateCursors;clearInterval(this.intervalId),clearTimeout(this.timeoutId),this.smoothBlinking&&r.removeCssClass(this.element,"ace_smooth-blinking"),e(!0);if(!this.isBlinking||!this.blinkInterval||!this.isVisible)return;this.smoothBlinking&&setTimeout(function(){r.addCssClass(this.element,"ace_smooth-blinking")}.bind(this));var t=function(){this.timeoutId=setTimeout(function(){e(!1)},.6*this.blinkInterval)}.bind(this);this.intervalId=setInterval(function(){e(!0),t()},this.blinkInterval),t()},this.getPixelPosition=function(e,t){if(!this.config||!this.session)return{left:0,top:0};e||(e=this.session.selection.getCursor());var n=this.session.documentToScreenPosition(e),r=this.$padding+n.column*this.config.characterWidth,i=(n.row-(t?this.config.firstRowScreen:0))*this.config.lineHeight;return{left:r,top:i}},this.update=function(e){this.config=e;var t=this.session.$selectionMarkers,n=0,r=0;if(t===undefined||t.length===0)t=[{cursor:null}];for(var n=0,i=t.length;n<i;n++){var s=this.getPixelPosition(t[n].cursor,!0);if((s.top>e.height+e.offset||s.top<0)&&n>1)continue;var o=(this.cursors[r++]||this.addCursor()).style;o.left=s.left+"px",o.top=s.top+"px",o.width=e.characterWidth+"px",o.height=e.lineHeight+"px"}while(this.cursors.length>r)this.removeCursor();var u=this.session.getOverwrite();this.$setOverwrite(u),this.$pixelPos=s,this.restartTimer()},this.$setOverwrite=function(e){e!=this.overwrite&&(this.overwrite=e,e?r.addCssClass(this.element,"ace_overwrite-cursors"):r.removeCssClass(this.element,"ace_overwrite-cursors"))},this.destroy=function(){clearInterval(this.intervalId),clearTimeout(this.timeoutId)}}).call(s.prototype),t.Cursor=s}),define("ace/mouse/default_gutter_handler",["require","exports","module","ace/lib/dom","ace/lib/oop","ace/lib/event","ace/tooltip"],function(e,t,n){function u(e){function l(){var r=u.getDocumentPosition().row,s=n.$annotations[r];if(!s)return c();var o=t.session.getLength();if(r==o){var a=t.renderer.pixelToScreenCoordinates(0,u.y).row,l=u.$pos;if(a>t.session.documentToScreenRow(l.row,l.column))return c()}if(f==s)return;f=s.text.join("<br/>"),i.setHtml(f),i.show(),t.on("mousewheel",c);if(e.$tooltipFollowsMouse)h(u);else{var p=n.$cells[r].element,d=p.getBoundingClientRect(),v=i.getElement().style;v.left=d.right+"px",v.top=d.bottom+"px"}}function c(){o&&(o=clearTimeout(o)),f&&(i.hide(),f=null,t.removeEventListener("mousewheel",c))}function h(e){i.setPosition(e.x,e.y)}var t=e.editor,n=t.renderer.$gutterLayer,i=new a(t.container);e.editor.setDefaultHandler("guttermousedown",function(r){if(!t.isFocused()||r.getButton()!=0)return;var i=n.getRegion(r);if(i=="foldWidgets")return;var s=r.getDocumentPosition().row,o=t.session.selection;if(r.getShiftKey())o.selectTo(s,0);else{if(r.domEvent.detail==2)return t.selectAll(),r.preventDefault();e.$clickSelection=t.selection.getLineRange(s)}return e.setState("selectByLines"),e.captureMouse(r),r.preventDefault()});var o,u,f;e.editor.setDefaultHandler("guttermousemove",function(t){var n=t.domEvent.target||t.domEvent.srcElement;if(r.hasCssClass(n,"ace_fold-widget"))return c();f&&e.$tooltipFollowsMouse&&h(t),u=t;if(o)return;o=setTimeout(function(){o=null,u&&!e.isMousePressed?l():c()},50)}),s.addListener(t.renderer.$gutter,"mouseout",function(e){u=null;if(!f||o)return;o=setTimeout(function(){o=null,c()},50)}),t.on("changeSession",c)}function a(e){o.call(this,e)}var r=e("../lib/dom"),i=e("../lib/oop"),s=e("../lib/event"),o=e("../tooltip").Tooltip;i.inherits(a,o),function(){this.setPosition=function(e,t){var n=window.innerWidth||document.documentElement.clientWidth,r=window.innerHeight||document.documentElement.clientHeight,i=this.getWidth(),s=this.getHeight();e+=15,t+=15,e+i>n&&(e-=e+i-n),t+s>r&&(t-=20+s),o.prototype.setPosition.call(this,e,t)}}.call(a.prototype),t.GutterHandler=u}),define("ace/scrollbar",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/event","ace/lib/event_emitter"],function(e,t,n){var r=e("./lib/oop"),i=e("./lib/dom"),s=e("./lib/event"),o=e("./lib/event_emitter").EventEmitter,u=function(e){this.element=i.createElement("div"),this.element.className="ace_scrollbar ace_scrollbar"+this.classSuffix,this.inner=i.createElement("div"),this.inner.className="ace_scrollbar-inner",this.element.appendChild(this.inner),e.appendChild(this.element),this.setVisible(!1),this.skipEvent=!1,s.addListener(this.element,"scroll",this.onScroll.bind(this)),s.addListener(this.element,"mousedown",s.preventDefault)};(function(){r.implement(this,o),this.setVisible=function(e){this.element.style.display=e?"":"none",this.isVisible=e}}).call(u.prototype);var a=function(e,t){u.call(this,e),this.scrollTop=0,t.$scrollbarWidth=this.width=i.scrollbarWidth(e.ownerDocument),this.inner.style.width=this.element.style.width=(this.width||15)+5+"px"};r.inherits(a,u),function(){this.classSuffix="-v",this.onScroll=function(){this.skipEvent||(this.scrollTop=this.element.scrollTop,this._emit("scroll",{data:this.scrollTop})),this.skipEvent=!1},this.getWidth=function(){return this.isVisible?this.width:0},this.setHeight=function(e){this.element.style.height=e+"px"},this.setInnerHeight=function(e){this.inner.style.height=e+"px"},this.setScrollHeight=function(e){this.inner.style.height=e+"px"},this.setScrollTop=function(e){this.scrollTop!=e&&(this.skipEvent=!0,this.scrollTop=this.element.scrollTop=e)}}.call(a.prototype);var f=function(e,t){u.call(this,e),this.scrollLeft=0,this.height=t.$scrollbarWidth,this.inner.style.height=this.element.style.height=(this.height||15)+5+"px"};r.inherits(f,u),function(){this.classSuffix="-h",this.onScroll=function(){this.skipEvent||(this.scrollLeft=this.element.scrollLeft,this._emit("scroll",{data:this.scrollLeft})),this.skipEvent=!1},this.getHeight=function(){return this.isVisible?this.height:0},this.setWidth=function(e){this.element.style.width=e+"px"},this.setInnerWidth=function(e){this.inner.style.width=e+"px"},this.setScrollWidth=function(e){this.inner.style.width=e+"px"},this.setScrollLeft=function(e){this.scrollLeft!=e&&(this.skipEvent=!0,this.scrollLeft=this.element.scrollLeft=e)}}.call(f.prototype),t.ScrollBar=a,t.ScrollBarV=a,t.ScrollBarH=f,t.VScrollBar=a,t.HScrollBar=f}),define("ace/mouse/default_handlers",["require","exports","module","ace/lib/dom","ace/lib/event","ace/lib/useragent"],function(e,t,n){function u(e){e.$clickSelection=null;var t=e.editor;t.setDefaultHandler("mousedown",this.onMouseDown.bind(e)),t.setDefaultHandler("dblclick",this.onDoubleClick.bind(e)),t.setDefaultHandler("tripleclick",this.onTripleClick.bind(e)),t.setDefaultHandler("quadclick",this.onQuadClick.bind(e)),t.setDefaultHandler("mousewheel",this.onMouseWheel.bind(e));var n=["select","startSelect","selectEnd","selectAllEnd","selectByWordsEnd","selectByLinesEnd","dragWait","dragWaitEnd","focusWait"];n.forEach(function(t){e[t]=this[t]},this),e.selectByLines=this.extendSelectionBy.bind(e,"getLineRange"),e.selectByWords=this.extendSelectionBy.bind(e,"getWordRange")}function a(e,t,n,r){return Math.sqrt(Math.pow(n-e,2)+Math.pow(r-t,2))}function f(e,t){if(e.start.row==e.end.row)var n=2*t.column-e.start.column-e.end.column;else if(e.start.row==e.end.row-1&&!e.start.column&&!e.end.column)var n=t.column-4;else var n=2*t.row-e.start.row-e.end.row;return n<0?{cursor:e.start,anchor:e.end}:{cursor:e.end,anchor:e.start}}var r=e("../lib/dom"),i=e("../lib/event"),s=e("../lib/useragent"),o=0;(function(){this.onMouseDown=function(e){var t=e.inSelection(),n=e.getDocumentPosition();this.mousedownEvent=e;var r=this.editor,i=e.getButton();if(i!==0){var s=r.getSelectionRange(),o=s.isEmpty();o&&r.selection.moveToPosition(n),r.textInput.onContextMenu(e.domEvent);return}if(t&&!r.isFocused()){r.focus();if(this.$focusTimout&&!this.$clickSelection&&!r.inMultiSelectMode){this.mousedownEvent.time=Date.now(),this.setState("focusWait"),this.captureMouse(e);return}}return this.captureMouse(e),!t||this.$clickSelection||e.getShiftKey()||r.inMultiSelectMode?this.startSelect(n):t&&(this.mousedownEvent.time=Date.now(),this.startSelect(n)),e.preventDefault()},this.startSelect=function(e){e=e||this.editor.renderer.screenToTextCoordinates(this.x,this.y);var t=this.editor,n=this.mousedownEvent.getShiftKey();n?t.selection.selectToPosition(e):this.$clickSelection||t.selection.moveToPosition(e),t.renderer.scroller.setCapture&&t.renderer.scroller.setCapture(),t.setStyle("ace_selecting"),this.setState("select")},this.select=function(){var e,t=this.editor,n=t.renderer.screenToTextCoordinates(this.x,this.y);if(this.$clickSelection){var r=this.$clickSelection.comparePoint(n);if(r==-1)e=this.$clickSelection.end;else if(r==1)e=this.$clickSelection.start;else{var i=f(this.$clickSelection,n);n=i.cursor,e=i.anchor}t.selection.setSelectionAnchor(e.row,e.column)}t.selection.selectToPosition(n),t.renderer.scrollCursorIntoView()},this.extendSelectionBy=function(e){var t,n=this.editor,r=n.renderer.screenToTextCoordinates(this.x,this.y),i=n.selection[e](r.row,r.column);if(this.$clickSelection){var s=this.$clickSelection.comparePoint(i.start),o=this.$clickSelection.comparePoint(i.end);if(s==-1&&o<=0){t=this.$clickSelection.end;if(i.end.row!=r.row||i.end.column!=r.column)r=i.start}else if(o==1&&s>=0){t=this.$clickSelection.start;if(i.start.row!=r.row||i.start.column!=r.column)r=i.end}else if(s==-1&&o==1)r=i.end,t=i.start;else{var u=f(this.$clickSelection,r);r=u.cursor,t=u.anchor}n.selection.setSelectionAnchor(t.row,t.column)}n.selection.selectToPosition(r),n.renderer.scrollCursorIntoView()},this.selectEnd=this.selectAllEnd=this.selectByWordsEnd=this.selectByLinesEnd=function(){this.editor.unsetStyle("ace_selecting"),this.editor.renderer.scroller.releaseCapture&&this.editor.renderer.scroller.releaseCapture()},this.focusWait=function(){var e=a(this.mousedownEvent.x,this.mousedownEvent.y,this.x,this.y),t=Date.now();(e>o||t-this.mousedownEvent.time>this.$focusTimout)&&this.startSelect(this.mousedownEvent.getDocumentPosition())},this.onDoubleClick=function(e){var t=e.getDocumentPosition(),n=this.editor,r=n.session,i=r.getBracketRange(t);i?(i.isEmpty()&&(i.start.column--,i.end.column++),this.setState("select")):(i=n.selection.getWordRange(t.row,t.column),this.setState("selectByWords")),this.$clickSelection=i,this[this.state]&&this[this.state](e)},this.onTripleClick=function(e){var t=e.getDocumentPosition(),n=this.editor;this.setState("selectByLines"),this.$clickSelection=n.selection.getLineRange(t.row),this[this.state]&&this[this.state](e)},this.onQuadClick=function(e){var t=this.editor;t.selectAll(),this.$clickSelection=t.getSelectionRange(),this.setState("selectAll")},this.onMouseWheel=function(e){if(e.getAccelKey())return;e.getShiftKey()&&e.wheelY&&!e.wheelX&&(e.wheelX=e.wheelY,e.wheelY=0);var t=e.domEvent.timeStamp,n=t-(this.$lastScrollTime||0),r=this.editor,i=r.renderer.isScrollableBy(e.wheelX*e.speed,e.wheelY*e.speed);if(i||n<200)return this.$lastScrollTime=t,r.renderer.scrollBy(e.wheelX*e.speed,e.wheelY*e.speed),e.stop()}}).call(u.prototype),t.DefaultHandlers=u}),define("ace/renderloop",["require","exports","module","ace/lib/event"],function(e,t,n){var r=e("./lib/event"),i=function(e,t){this.onRender=e,this.pending=!1,this.changes=0,this.window=t||window};(function(){this.schedule=function(e){this.changes=this.changes|e;if(!this.pending&&this.changes){this.pending=!0;var t=this;r.nextFrame(function(){t.pending=!1;var e;while(e=t.changes)t.changes=0,t.onRender(e)},this.window)}}}).call(i.prototype),t.RenderLoop=i}),define("ace/mouse/mouse_handler",["require","exports","module","ace/lib/event","ace/lib/useragent","ace/mouse/default_handlers","ace/mouse/default_gutter_handler","ace/mouse/mouse_event","ace/mouse/dragdrop_handler","ace/config"],function(e,t,n){var r=e("../lib/event"),i=e("../lib/useragent"),s=e("./default_handlers").DefaultHandlers,o=e("./default_gutter_handler").GutterHandler,u=e("./mouse_event").MouseEvent,a=e("./dragdrop_handler").DragdropHandler,f=e("../config"),l=function(e){this.editor=e,new s(this),new o(this),new a(this);var t=e.renderer.getMouseEventTarget();r.addListener(t,"click",this.onMouseEvent.bind(this,"click")),r.addListener(t,"mousemove",this.onMouseMove.bind(this,"mousemove")),r.addMultiMouseDownListener(t,[300,300,250],this,"onMouseEvent"),e.renderer.scrollBarV&&(r.addMultiMouseDownListener(e.renderer.scrollBarV.inner,[300,300,250],this,"onMouseEvent"),r.addMultiMouseDownListener(e.renderer.scrollBarH.inner,[300,300,250],this,"onMouseEvent")),r.addMouseWheelListener(e.container,this.onMouseWheel.bind(this,"mousewheel"));var n=e.renderer.$gutter;r.addListener(n,"mousedown",this.onMouseEvent.bind(this,"guttermousedown")),r.addListener(n,"click",this.onMouseEvent.bind(this,"gutterclick")),r.addListener(n,"dblclick",this.onMouseEvent.bind(this,"gutterdblclick")),r.addListener(n,"mousemove",this.onMouseEvent.bind(this,"guttermousemove")),r.addListener(t,"mousedown",function(t){e.focus()}),r.addListener(n,"mousedown",function(t){return e.focus(),r.preventDefault(t)})};(function(){this.onMouseEvent=function(e,t){this.editor._emit(e,new u(t,this.editor))},this.onMouseMove=function(e,t){var n=this.editor._eventRegistry&&this.editor._eventRegistry.mousemove;if(!n||!n.length)return;this.editor._emit(e,new u(t,this.editor))},this.onMouseWheel=function(e,t){var n=new u(t,this.editor);n.speed=this.$scrollSpeed*2,n.wheelX=t.wheelX,n.wheelY=t.wheelY,this.editor._emit(e,n)},this.setState=function(e){this.state=e},this.captureMouse=function(e,t){this.x=e.x,this.y=e.y,this.isMousePressed=!0;var n=this.editor.renderer;n.$keepTextAreaAtCursor&&(n.$keepTextAreaAtCursor=null);var s=this,o=function(e){s.x=e.clientX,s.y=e.clientY,t&&t(e),s.mouseEvent=new u(e,s.editor),s.$mouseMoved=!0},a=function(e){clearInterval(l),f(),s[s.state+"End"]&&s[s.state+"End"](e),s.$clickSelection=null,n.$keepTextAreaAtCursor==null&&(n.$keepTextAreaAtCursor=!0,n.$moveTextAreaToCursor()),s.isMousePressed=!1,s.$onCaptureMouseMove=s.releaseMouse=null,s.onMouseEvent("mouseup",e)},f=function(){s[s.state]&&s[s.state](),s.$mouseMoved=!1};if(i.isOldIE&&e.domEvent.type=="dblclick")return setTimeout(function(){a(e)});s.$onCaptureMouseMove=o,s.releaseMouse=r.capture(this.editor.container,o,a);var l=setInterval(f,20)},this.releaseMouse=null}).call(l.prototype),f.defineOptions(l.prototype,"mouseHandler",{scrollSpeed:{initialValue:2},dragDelay:{initialValue:150},dragEnabled:{initialValue:!0},focusTimout:{initialValue:0},tooltipFollowsMouse:{initialValue:!0}}),t.MouseHandler=l}),define("ace/layer/font_metrics",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/lang","ace/lib/event_emitter"],function(e,t,n){var r=e("../lib/oop"),i=e("../lib/dom"),s=e("../lib/lang"),o=e("../lib/event_emitter").EventEmitter,u=0,a=t.FontMetrics=function(e,t){this.el=i.createElement("div"),this.$setMeasureNodeStyles(this.el.style,!0),this.$main=i.createElement("div"),this.$setMeasureNodeStyles(this.$main.style),this.$measureNode=i.createElement("div"),this.$setMeasureNodeStyles(this.$measureNode.style),this.el.appendChild(this.$main),this.el.appendChild(this.$measureNode),e.appendChild(this.el),u||this.$testFractionalRect(),this.$measureNode.textContent=s.stringRepeat("X",u),this.$characterSize={width:0,height:0},this.checkForSizeChanges()};(function(){r.implement(this,o),this.$characterSize={width:0,height:0},this.$testFractionalRect=function(){var e=i.createElement("div");this.$setMeasureNodeStyles(e.style),e.style.width="0.2px",document.documentElement.appendChild(e);var t=e.getBoundingClientRect().width;t>0&&t<1?u=1:u=100,e.parentNode.removeChild(e)},this.$setMeasureNodeStyles=function(e,t){e.width=e.height="auto",e.left=e.top="-100px",e.visibility="hidden",e.position="fixed",e.whiteSpace="pre",e.font="inherit",e.overflow=t?"hidden":"visible"},this.checkForSizeChanges=function(){var e=this.$measureSizes();if(e&&(this.$characterSize.width!==e.width||this.$characterSize.height!==e.height)){this.$measureNode.style.fontWeight="bold";var t=this.$measureSizes();this.$measureNode.style.fontWeight="",this.$characterSize=e,this.charSizes=Object.create(null),this.allowBoldFonts=t&&t.width===e.width&&t.height===e.height,this._emit("changeCharacterSize",{data:e})}},this.$pollSizeChanges=function(){if(this.$pollSizeChangesTimer)return this.$pollSizeChangesTimer;var e=this;return this.$pollSizeChangesTimer=setInterval(function(){e.checkForSizeChanges()},500)},this.setPolling=function(e){e?this.$pollSizeChanges():this.$pollSizeChangesTimer&&this.$pollSizeChangesTimer},this.$measureSizes=function(){var e=this.$measureNode.getBoundingClientRect(),t={height:e.height,width:e.width/u};return t.width===0||t.height===0?null:t},this.$measureCharWidth=function(e){this.$main.textContent=s.stringRepeat(e,u);var t=this.$main.getBoundingClientRect();return t.width/u},this.getCharacterWidth=function(e){var t=this.charSizes[e];return t===undefined&&(this.charSizes[e]=this.$measureCharWidth(e)/this.$characterSize.width),t},this.destroy=function(){clearInterval(this.$pollSizeChangesTimer),this.el&&this.el.parentNode&&this.el.parentNode.removeChild(this.el)}}).call(a.prototype)}),define("ace/keyboard/textinput",["require","exports","module","ace/lib/event","ace/lib/useragent","ace/lib/dom","ace/lib/lang"],function(e,t,n){var r=e("../lib/event"),i=e("../lib/useragent"),s=e("../lib/dom"),o=e("../lib/lang"),u=i.isChrome<18,a=function(e,t){function b(e){if(h)return;if(k)t=0,r=e?0:n.value.length-1;else var t=e?2:1,r=2;try{n.setSelectionRange(t,r)}catch(i){}}function w(){if(h)return;n.value=a,i.isWebKit&&y.schedule()}function F(){setTimeout(function(){p&&(n.style.cssText=p,p=""),t.renderer.$keepTextAreaAtCursor==null&&(t.renderer.$keepTextAreaAtCursor=!0,t.renderer.$moveTextAreaToCursor())},0)}var n=s.createElement("textarea");n.className="ace_text-input",i.isTouchPad&&n.setAttribute("x-palm-disable-auto-cap",!0),n.wrap="off",n.autocorrect="off",n.autocapitalize="off",n.spellcheck=!1,n.style.opacity="0",e.insertBefore(n,e.firstChild);var a="",f=!1,l=!1,c=!1,h=!1,p="",d=!0;try{var v=document.activeElement===n}catch(m){}r.addListener(n,"blur",function(){t.onBlur(),v=!1}),r.addListener(n,"focus",function(){v=!0,t.onFocus(),b()}),this.focus=function(){n.focus()},this.blur=function(){n.blur()},this.isFocused=function(){return v};var g=o.delayedCall(function(){v&&b(d)}),y=o.delayedCall(function(){h||(n.value=a,v&&b())});i.isWebKit||t.addEventListener("changeSelection",function(){t.selection.isEmpty()!=d&&(d=!d,g.schedule())}),w(),v&&t.onFocus();var E=function(e){return e.selectionStart===0&&e.selectionEnd===e.value.length};!n.setSelectionRange&&n.createTextRange&&(n.setSelectionRange=function(e,t){var n=this.createTextRange();n.collapse(!0),n.moveStart("character",e),n.moveEnd("character",t),n.select()},E=function(e){try{var t=e.ownerDocument.selection.createRange()}catch(n){}return!t||t.parentElement()!=e?!1:t.text==e.value});if(i.isOldIE){var S=!1,x=function(e){if(S)return;var t=n.value;if(h||!t||t==a)return;if(e&&t==a[0])return T.schedule();A(t),S=!0,w(),S=!1},T=o.delayedCall(x);r.addListener(n,"propertychange",x);var N={13:1,27:1};r.addListener(n,"keyup",function(e){h&&(!n.value||N[e.keyCode])&&setTimeout(B,0);if((n.value.charCodeAt(0)||0)<129)return T.call();h?H():P()}),r.addListener(n,"keydown",function(e){T.schedule(50)})}var C=function(e){f?f=!1:l?l=!1:E(n)?(t.selectAll(),b()):k&&b(t.selection.isEmpty())},k=null;this.setInputHandler=function(e){k=e},this.getInputHandler=function(){return k};var L=!1,A=function(e){k&&(e=k(e),k=null),c?(b(),e&&t.onPaste(e),c=!1):e==a.charAt(0)?L?t.execCommand("del",{source:"ace"}):t.execCommand("backspace",{source:"ace"}):(e.substring(0,2)==a?e=e.substr(2):e.charAt(0)==a.charAt(0)?e=e.substr(1):e.charAt(e.length-1)==a.charAt(0)&&(e=e.slice(0,-1)),e.charAt(e.length-1)==a.charAt(0)&&(e=e.slice(0,-1)),e&&t.onTextInput(e)),L&&(L=!1)},O=function(e){if(h)return;var t=n.value;A(t),w()},M=function(e){var i=t.getCopyText();if(!i){r.preventDefault(e);return}var s=e.clipboardData||window.clipboardData;if(s&&!u){var o=s.setData("Text",i);o&&(t.onCut(),r.preventDefault(e))}o||(f=!0,n.value=i,n.select(),setTimeout(function(){f=!1,w(),b(),t.onCut()}))},_=function(e){var i=t.getCopyText();if(!i){r.preventDefault(e);return}var s=e.clipboardData||window.clipboardData;if(s&&!u){var o=s.setData("Text",i);o&&(t.onCopy(),r.preventDefault(e))}o||(l=!0,n.value=i,n.select(),setTimeout(function(){l=!1,w(),b(),t.onCopy()}))},D=function(e){var s=e.clipboardData||window.clipboardData;if(s){var o=s.getData("Text");o&&t.onPaste(o),i.isIE&&setTimeout(b),r.preventDefault(e)}else n.value="",c=!0};r.addCommandKeyListener(n,t.onCommandKey.bind(t)),r.addListener(n,"select",C),r.addListener(n,"input",O),r.addListener(n,"cut",M),r.addListener(n,"copy",_),r.addListener(n,"paste",D),(!("oncut"in n)||!("oncopy"in n)||!("onpaste"in n))&&r.addListener(e,"keydown",function(e){if(i.isMac&&!e.metaKey||!e.ctrlKey)return;switch(e.keyCode){case 67:_(e);break;case 86:D(e);break;case 88:M(e)}});var P=function(e){if(h||!t.onCompositionStart)return;h={},t.onCompositionStart(),setTimeout(H,0),t.on("mousedown",B),t.selection.isEmpty()||(t.insert(""),t.session.markUndoGroup(),t.selection.clearSelection()),t.session.markUndoGroup()},H=function(){if(!h||!t.onCompositionUpdate)return;var e=n.value.replace(/\x01/g,"");if(h.lastValue===e)return;t.onCompositionUpdate(e),h.lastValue&&t.undo(),h.lastValue=e;if(h.lastValue){var r=t.selection.getRange();t.insert(h.lastValue),t.session.markUndoGroup(),h.range=t.selection.getRange(),t.selection.setRange(r),t.selection.clearSelection()}},B=function(e){if(!t.onCompositionEnd)return;var r=h;h=!1;var i=setTimeout(function(){i=null;var e=n.value.replace(/\x01/g,"");if(h)return;e==r.lastValue?w():!r.lastValue&&e&&(w(),A(e))});k=function(n){return i&&clearTimeout(i),n=n.replace(/\x01/g,""),n==r.lastValue?"":(r.lastValue&&i&&t.undo(),n)},t.onCompositionEnd(),t.removeListener("mousedown",B),e.type=="compositionend"&&r.range&&t.selection.setRange(r.range)},j=o.delayedCall(H,50);r.addListener(n,"compositionstart",P),i.isGecko?r.addListener(n,"text",function(){j.schedule()}):(r.addListener(n,"keyup",function(){j.schedule()}),r.addListener(n,"keydown",function(){j.schedule()})),r.addListener(n,"compositionend",B),this.getElement=function(){return n},this.setReadOnly=function(e){n.readOnly=e},this.onContextMenu=function(e){L=!0,p||(p=n.style.cssText),n.style.cssText="z-index:100000;"+(i.isIE?"opacity:0.1;":""),b(t.selection.isEmpty()),t._emit("nativecontextmenu",{target:t,domEvent:e});var o=t.container.getBoundingClientRect(),u=s.computedStyle(t.container),a=o.top+(parseInt(u.borderTopWidth)||0),f=o.left+(parseInt(o.borderLeftWidth)||0),l=o.bottom-a-n.clientHeight,c=function(e){n.style.left=e.clientX-f-2+"px",n.style.top=Math.min(e.clientY-a-2,l)+"px"};c(e);if(e.type!="mousedown")return;t.renderer.$keepTextAreaAtCursor&&(t.renderer.$keepTextAreaAtCursor=null),i.isWin&&r.capture(t.container,c,F)},this.onContextMenuClose=F;if(!i.isGecko||i.isMac){var I=function(e){t.textInput.onContextMenu(e),F()};r.addListener(t.renderer.scroller,"contextmenu",I),r.addListener(n,"contextmenu",I)}};t.TextInput=a}),define("ace/lib/lang",["require","exports","module"],function(e,t,n){t.last=function(e){return e[e.length-1]},t.stringReverse=function(e){return e.split("").reverse().join("")},t.stringRepeat=function(e,t){var n="";while(t>0){t&1&&(n+=e);if(t>>=1)e+=e}return n};var r=/^\s\s*/,i=/\s\s*$/;t.stringTrimLeft=function(e){return e.replace(r,"")},t.stringTrimRight=function(e){return e.replace(i,"")},t.copyObject=function(e){var t={};for(var n in e)t[n]=e[n];return t},t.copyArray=function(e){var t=[];for(var n=0,r=e.length;n<r;n++)e[n]&&typeof e[n]=="object"?t[n]=this.copyObject(e[n]):t[n]=e[n];return t},t.deepCopy=function(e){if(typeof e!="object"||!e)return e;var n=e.constructor;if(n===RegExp)return e;var r=n();for(var i in e)typeof e[i]=="object"?r[i]=t.deepCopy(e[i]):r[i]=e[i];return r},t.arrayToMap=function(e){var t={};for(var n=0;n<e.length;n++)t[e[n]]=1;return t},t.createMap=function(e){var t=Object.create(null);for(var n in e)t[n]=e[n];return t},t.arrayRemove=function(e,t){for(var n=0;n<=e.length;n++)t===e[n]&&e.splice(n,1)},t.escapeRegExp=function(e){return e.replace(/([.*+?^${}()|[\]\/\\])/g,"\\$1")},t.escapeHTML=function(e){return e.replace(/&/g,"&#38;").replace(/"/g,"&#34;").replace(/'/g,"&#39;").replace(/</g,"&#60;")},t.getMatchOffsets=function(e,t){var n=[];return e.replace(t,function(e){n.push({offset:arguments[arguments.length-2],length:e.length})}),n},t.deferredCall=function(e){var t=null,n=function(){t=null,e()},r=function(e){return r.cancel(),t=setTimeout(n,e||0),r};return r.schedule=r,r.call=function(){return this.cancel(),e(),r},r.cancel=function(){return clearTimeout(t),t=null,r},r.isPending=function(){return t},r},t.delayedCall=function(e,t){var n=null,r=function(){n=null,e()},i=function(e){n==null&&(n=setTimeout(r,e||t))};return i.delay=function(e){n&&clearTimeout(n),n=setTimeout(r,e||t)},i.schedule=i,i.call=function(){this.cancel(),e()},i.cancel=function(){n&&clearTimeout(n),n=null},i.isPending=function(){return n},i}}),define("ace/multi_select",["require","exports","module","ace/range_list","ace/range","ace/selection","ace/mouse/multi_select_handler","ace/lib/event","ace/lib/lang","ace/commands/multi_select_commands","ace/search","ace/edit_session","ace/editor","ace/config"],function(e,t,n){function h(e,t,n){return c.$options.wrap=!0,c.$options.needle=t,c.$options.backwards=n==-1,c.find(e)}function v(e,t){return e.row==t.row&&e.column==t.column}function m(e){if(e.$multiselectOnSessionChange)return;e.$onAddRange=e.$onAddRange.bind(e),e.$onRemoveRange=e.$onRemoveRange.bind(e),e.$onMultiSelect=e.$onMultiSelect.bind(e),e.$onSingleSelect=e.$onSingleSelect.bind(e),e.$multiselectOnSessionChange=t.onSessionChange.bind(e),e.$multiselectOnSessionChange(e),e.on("changeSession",e.$multiselectOnSessionChange),e.on("mousedown",o),e.commands.addCommands(f.defaultCommands),g(e)}function g(e){function r(t){n&&(e.renderer.setMouseCursor(""),n=!1)}var t=e.textInput.getElement(),n=!1;u.addListener(t,"keydown",function(t){t.keyCode==18&&!(t.ctrlKey||t.shiftKey||t.metaKey)?n||(e.renderer.setMouseCursor("crosshair"),n=!0):n&&r()}),u.addListener(t,"keyup",r),u.addListener(t,"blur",r)}var r=e("./range_list").RangeList,i=e("./range").Range,s=e("./selection").Selection,o=e("./mouse/multi_select_handler").onMouseDown,u=e("./lib/event"),a=e("./lib/lang"),f=e("./commands/multi_select_commands");t.commands=f.defaultCommands.concat(f.multiSelectCommands);var l=e("./search").Search,c=new l,p=e("./edit_session").EditSession;(function(){this.getSelectionMarkers=function(){return this.$selectionMarkers}}).call(p.prototype),function(){this.ranges=null,this.rangeList=null,this.addRange=function(e,t){if(!e)return;if(!this.inMultiSelectMode&&this.rangeCount==0){var n=this.toOrientedRange();this.rangeList.add(n),this.rangeList.add(e);if(this.rangeList.ranges.length!=2)return this.rangeList.removeAll(),t||this.fromOrientedRange(e);this.rangeList.removeAll(),this.rangeList.add(n),this.$onAddRange(n)}e.cursor||(e.cursor=e.end);var r=this.rangeList.add(e);return this.$onAddRange(e),r.length&&this.$onRemoveRange(r),this.rangeCount>1&&!this.inMultiSelectMode&&(this._signal("multiSelect"),this.inMultiSelectMode=!0,this.session.$undoSelect=!1,this.rangeList.attach(this.session)),t||this.fromOrientedRange(e)},this.toSingleRange=function(e){e=e||this.ranges[0];var t=this.rangeList.removeAll();t.length&&this.$onRemoveRange(t),e&&this.fromOrientedRange(e)},this.substractPoint=function(e){var t=this.rangeList.substractPoint(e);if(t)return this.$onRemoveRange(t),t[0]},this.mergeOverlappingRanges=function(){var e=this.rangeList.merge();e.length?this.$onRemoveRange(e):this.ranges[0]&&this.fromOrientedRange(this.ranges[0])},this.$onAddRange=function(e){this.rangeCount=this.rangeList.ranges.length,this.ranges.unshift(e),this._signal("addRange",{range:e})},this.$onRemoveRange=function(e){this.rangeCount=this.rangeList.ranges.length;if(this.rangeCount==1&&this.inMultiSelectMode){var t=this.rangeList.ranges.pop();e.push(t),this.rangeCount=0}for(var n=e.length;n--;){var r=this.ranges.indexOf(e[n]);this.ranges.splice(r,1)}this._signal("removeRange",{ranges:e}),this.rangeCount==0&&this.inMultiSelectMode&&(this.inMultiSelectMode=!1,this._signal("singleSelect"),this.session.$undoSelect=!0,this.rangeList.detach(this.session)),t=t||this.ranges[0],t&&!t.isEqual(this.getRange())&&this.fromOrientedRange(t)},this.$initRangeList=function(){if(this.rangeList)return;this.rangeList=new r,this.ranges=[],this.rangeCount=0},this.getAllRanges=function(){return this.rangeCount?this.rangeList.ranges.concat():[this.getRange()]},this.splitIntoLines=function(){if(this.rangeCount>1){var e=this.rangeList.ranges,t=e[e.length-1],n=i.fromPoints(e[0].start,t.end);this.toSingleRange(),this.setSelectionRange(n,t.cursor==t.start)}else{var n=this.getRange(),r=this.isBackwards(),s=n.start.row,o=n.end.row;if(s==o){if(r)var u=n.end,a=n.start;else var u=n.start,a=n.end;this.addRange(i.fromPoints(a,a)),this.addRange(i.fromPoints(u,u));return}var f=[],l=this.getLineRange(s,!0);l.start.column=n.start.column,f.push(l);for(var c=s+1;c<o;c++)f.push(this.getLineRange(c,!0));l=this.getLineRange(o,!0),l.end.column=n.end.column,f.push(l),f.forEach(this.addRange,this)}},this.toggleBlockSelection=function(){if(this.rangeCount>1){var e=this.rangeList.ranges,t=e[e.length-1],n=i.fromPoints(e[0].start,t.end);this.toSingleRange(),this.setSelectionRange(n,t.cursor==t.start)}else{var r=this.session.documentToScreenPosition(this.selectionLead),s=this.session.documentToScreenPosition(this.selectionAnchor),o=this.rectangularRangeBlock(r,s);o.forEach(this.addRange,this)}},this.rectangularRangeBlock=function(e,t,n){var r=[],s=e.column<t.column;if(s)var o=e.column,u=t.column;else var o=t.column,u=e.column;var a=e.row<t.row;if(a)var f=e.row,l=t.row;else var f=t.row,l=e.row;o<0&&(o=0),f<0&&(f=0),f==l&&(n=!0);for(var c=f;c<=l;c++){var h=i.fromPoints(this.session.screenToDocumentPosition(c,o),this.session.screenToDocumentPosition(c,u));if(h.isEmpty()){if(p&&v(h.end,p))break;var p=h.end}h.cursor=s?h.start:h.end,r.push(h)}a&&r.reverse();if(!n){var d=r.length-1;while(r[d].isEmpty()&&d>0)d--;if(d>0){var m=0;while(r[m].isEmpty())m++}for(var g=d;g>=m;g--)r[g].isEmpty()&&r.splice(g,1)}return r}}.call(s.prototype);var d=e("./editor").Editor;(function(){this.updateSelectionMarkers=function(){this.renderer.updateCursor(),this.renderer.updateBackMarkers()},this.addSelectionMarker=function(e){e.cursor||(e.cursor=e.end);var t=this.getSelectionStyle();return e.marker=this.session.addMarker(e,"ace_selection",t),this.session.$selectionMarkers.push(e),this.session.selectionMarkerCount=this.session.$selectionMarkers.length,e},this.removeSelectionMarker=function(e){if(!e.marker)return;this.session.removeMarker(e.marker);var t=this.session.$selectionMarkers.indexOf(e);t!=-1&&this.session.$selectionMarkers.splice(t,1),this.session.selectionMarkerCount=this.session.$selectionMarkers.length},this.removeSelectionMarkers=function(e){var t=this.session.$selectionMarkers;for(var n=e.length;n--;){var r=e[n];if(!r.marker)continue;this.session.removeMarker(r.marker);var i=t.indexOf(r);i!=-1&&t.splice(i,1)}this.session.selectionMarkerCount=t.length},this.$onAddRange=function(e){this.addSelectionMarker(e.range),this.renderer.updateCursor(),this.renderer.updateBackMarkers()},this.$onRemoveRange=function(e){this.removeSelectionMarkers(e.ranges),this.renderer.updateCursor(),this.renderer.updateBackMarkers()},this.$onMultiSelect=function(e){if(this.inMultiSelectMode)return;this.inMultiSelectMode=!0,this.setStyle("ace_multiselect"),this.keyBinding.addKeyboardHandler(f.keyboardHandler),this.commands.setDefaultHandler("exec",this.$onMultiSelectExec),this.renderer.updateCursor(),this.renderer.updateBackMarkers()},this.$onSingleSelect=function(e){if(this.session.multiSelect.inVirtualMode)return;this.inMultiSelectMode=!1,this.unsetStyle("ace_multiselect"),this.keyBinding.removeKeyboardHandler(f.keyboardHandler),this.commands.removeDefaultHandler("exec",this.$onMultiSelectExec),this.renderer.updateCursor(),this.renderer.updateBackMarkers(),this._emit("changeSelection")},this.$onMultiSelectExec=function(e){var t=e.command,n=e.editor;if(!n.multiSelect)return;if(!t.multiSelectAction){var r=t.exec(n,e.args||{});n.multiSelect.addRange(n.multiSelect.toOrientedRange()),n.multiSelect.mergeOverlappingRanges()}else t.multiSelectAction=="forEach"?r=n.forEachSelection(t,e.args):t.multiSelectAction=="forEachLine"?r=n.forEachSelection(t,e.args,!0):t.multiSelectAction=="single"?(n.exitMultiSelectMode(),r=t.exec(n,e.args||{})):r=t.multiSelectAction(n,e.args||{});return r},this.forEachSelection=function(e,t,n){if(this.inVirtualSelectionMode)return;var r=this.session,i=this.selection,o=i.rangeList,u,a=i._eventRegistry;i._eventRegistry={};var f=new s(r);this.inVirtualSelectionMode=!0;for(var l=o.ranges.length;l--;){if(n)while(l>0&&o.ranges[l].start.row==o.ranges[l-1].end.row)l--;f.fromOrientedRange(o.ranges[l]),f.id=o.ranges[l].marker,this.selection=r.selection=f;var c=e.exec(this,t||{});u!==undefined&&(u=c),f.toOrientedRange(o.ranges[l])}f.detach(),this.selection=r.selection=i,this.inVirtualSelectionMode=!1,i._eventRegistry=a,i.mergeOverlappingRanges();var h=this.renderer.$scrollAnimation;return this.onCursorChange(),this.onSelectionChange(),h&&h.from==h.to&&this.renderer.animateScrolling(h.from),u},this.exitMultiSelectMode=function(){if(!this.inMultiSelectMode||this.inVirtualSelectionMode)return;this.multiSelect.toSingleRange()},this.getSelectedText=function(){var e="";if(this.inMultiSelectMode&&!this.inVirtualSelectionMode){var t=this.multiSelect.rangeList.ranges,n=[];for(var r=0;r<t.length;r++)n.push(this.session.getTextRange(t[r]));var i=this.session.getDocument().getNewLineCharacter();e=n.join(i),e.length==(n.length-1)*i.length&&(e="")}else this.selection.isEmpty()||(e=this.session.getTextRange(this.getSelectionRange()));return e},this.onPaste=function(e){if(this.$readOnly)return;var t={text:e};this._signal("paste",t),e=t.text;if(!this.inMultiSelectMode||this.inVirtualSelectionMode)return this.insert(e);var n=e.split(/\r\n|\r|\n/),r=this.selection.rangeList.ranges;if(n.length>r.length||n.length<2||!n[1])return this.commands.exec("insertstring",this,e);for(var i=r.length;i--;){var s=r[i];s.isEmpty()||this.session.remove(s),this.session.insert(s.start,n[i])}},this.findAll=function(e,t,n){t=t||{},t.needle=e||t.needle,this.$search.set(t);var r=this.$search.findAll(this.session);if(!r.length)return 0;this.$blockScrolling+=1;var i=this.multiSelect;n||i.toSingleRange(r[0]);for(var s=r.length;s--;)i.addRange(r[s],!0);return this.$blockScrolling-=1,r.length},this.selectMoreLines=function(e,t){var n=this.selection.toOrientedRange(),r=n.cursor==n.end,s=this.session.documentToScreenPosition(n.cursor);this.selection.$desiredColumn&&(s.column=this.selection.$desiredColumn);var o=this.session.screenToDocumentPosition(s.row+e,s.column);if(!n.isEmpty())var u=this.session.documentToScreenPosition(r?n.end:n.start),a=this.session.screenToDocumentPosition(u.row+e,u.column);else var a=o;if(r){var f=i.fromPoints(o,a);f.cursor=f.start}else{var f=i.fromPoints(a,o);f.cursor=f.end}f.desiredColumn=s.column;if(!this.selection.inMultiSelectMode)this.selection.addRange(n);else if(t)var l=n.cursor;this.selection.addRange(f),l&&this.selection.substractPoint(l)},this.transposeSelections=function(e){var t=this.session,n=t.multiSelect,r=n.ranges;for(var i=r.length;i--;){var s=r[i];if(s.isEmpty()){var o=t.getWordRange(s.start.row,s.start.column);s.start.row=o.start.row,s.start.column=o.start.column,s.end.row=o.end.row,s.end.column=o.end.column}}n.mergeOverlappingRanges();var u=[];for(var i=r.length;i--;){var s=r[i];u.unshift(t.getTextRange(s))}e<0?u.unshift(u.pop()):u.push(u.shift());for(var i=r.length;i--;){var s=r[i],o=s.clone();t.replace(s,u[i]),s.start.row=o.start.row,s.start.column=o.start.column}},this.selectMore=function(e,t){var n=this.session,r=n.multiSelect,i=r.toOrientedRange();i.isEmpty()&&(i=n.getWordRange(i.start.row,i.start.column),i.cursor=e==-1?i.start:i.end,this.multiSelect.addRange(i));var s=n.getTextRange(i),o=h(n,s,e);o&&(o.cursor=e==-1?o.start:o.end,this.$blockScrolling+=1,this.session.unfold(o),this.multiSelect.addRange(o),this.$blockScrolling-=1,this.renderer.scrollCursorIntoView(null,.5)),t&&this.multiSelect.substractPoint(i.cursor)},this.alignCursors=function(){var e=this.session,t=e.multiSelect,n=t.ranges;if(!n.length){var r=this.selection.getRange(),s=r.start.row,o=r.end.row,u=s==o;if(u){var f=this.session.getLength(),l;do l=this.session.getLine(o);while(/[=:]/.test(l)&&++o<f);do l=this.session.getLine(s);while(/[=:]/.test(l)&&--s>0);s<0&&(s=0),o>=f&&(o=f-1)}var c=this.session.doc.removeLines(s,o);c=this.$reAlignText(c,u),this.session.doc.insert({row:s,column:0},c.join("\n")+"\n"),u||(r.start.column=0,r.end.column=c[c.length-1].length),this.selection.setRange(r)}else{var h=-1,p=n.filter(function(e){if(e.cursor.row==h)return!0;h=e.cursor.row});t.$onRemoveRange(p);var d=0,v=Infinity,m=n.map(function(t){var n=t.cursor,r=e.getLine(n.row),i=r.substr(n.column).search(/\S/g);return i==-1&&(i=0),n.column>d&&(d=n.column),i<v&&(v=i),i});n.forEach(function(t,n){var r=t.cursor,s=d-r.column,o=m[n]-v;s>o?e.insert(r,a.stringRepeat(" ",s-o)):e.remove(new i(r.row,r.column,r.row,r.column-s+o)),t.start.column=t.end.column=d,t.start.row=t.end.row=r.row,t.cursor=t.end}),t.fromOrientedRange(n[0]),this.renderer.updateCursor(),this.renderer.updateBackMarkers()}},this.$reAlignText=function(e,t){function u(e){return a.stringRepeat(" ",e)}function f(e){return e[2]?u(i)+e[2]+u(s-e[2].length+o)+e[4].replace(/^([=:])\s+/,"$1 "):e[0]}function l(e){return e[2]?u(i+s-e[2].length)+e[2]+u(o," ")+e[4].replace(/^([=:])\s+/,"$1 "):e[0]}function c(e){return e[2]?u(i)+e[2]+u(o)+e[4].replace(/^([=:])\s+/,"$1 "):e[0]}var n=!0,r=!0,i,s,o;return e.map(function(e){var t=e.match(/(\s*)(.*?)(\s*)([=:].*)/);return t?i==null?(i=t[1].length,s=t[2].length,o=t[3].length,t):(i+s+o!=t[1].length+t[2].length+t[3].length&&(r=!1),i!=t[1].length&&(n=!1),i>t[1].length&&(i=t[1].length),s<t[2].length&&(s=t[2].length),o>t[3].length&&(o=t[3].length),t):[e]}).map(t?f:n?r?l:f:c)}}).call(d.prototype),t.onSessionChange=function(e){var t=e.session;t.multiSelect||(t.$selectionMarkers=[],t.selection.$initRangeList(),t.multiSelect=t.selection),this.multiSelect=t.multiSelect;var n=e.oldSession;n&&(n.multiSelect.removeEventListener("addRange",this.$onAddRange),n.multiSelect.removeEventListener("removeRange",this.$onRemoveRange),n.multiSelect.removeEventListener("multiSelect",this.$onMultiSelect),n.multiSelect.removeEventListener("singleSelect",this.$onSingleSelect)),t.multiSelect.on("addRange",this.$onAddRange),t.multiSelect.on("removeRange",this.$onRemoveRange),t.multiSelect.on("multiSelect",this.$onMultiSelect),t.multiSelect.on("singleSelect",this.$onSingleSelect),this.inMultiSelectMode!=t.selection.inMultiSelectMode&&(t.selection.inMultiSelectMode?this.$onMultiSelect():this.$onSingleSelect())},t.MultiSelect=m,e("./config").defineOptions(d.prototype,"editor",{enableMultiselect:{set:function(e){m(this),e?(this.on("changeSession",this.$multiselectOnSessionChange),this.on("mousedown",o)):(this.off("changeSession",this.$multiselectOnSessionChange),this.off("mousedown",o))},value:!0}})}),define("ace/editor",["require","exports","module","ace/lib/fixoldbrowsers","ace/lib/oop","ace/lib/dom","ace/lib/lang","ace/lib/useragent","ace/keyboard/textinput","ace/mouse/mouse_handler","ace/mouse/fold_handler","ace/keyboard/keybinding","ace/edit_session","ace/search","ace/range","ace/lib/event_emitter","ace/commands/command_manager","ace/commands/default_commands","ace/config"],function(e,t,n){e("./lib/fixoldbrowsers");var r=e("./lib/oop"),i=e("./lib/dom"),s=e("./lib/lang"),o=e("./lib/useragent"),u=e("./keyboard/textinput").TextInput,a=e("./mouse/mouse_handler").MouseHandler,f=e("./mouse/fold_handler").FoldHandler,l=e("./keyboard/keybinding").KeyBinding,c=e("./edit_session").EditSession,h=e("./search").Search,p=e("./range").Range,d=e("./lib/event_emitter").EventEmitter,v=e("./commands/command_manager").CommandManager,m=e("./commands/default_commands").commands,g=e("./config"),y=function(e,t){var n=e.getContainerElement();this.container=n,this.renderer=e,this.commands=new v(o.isMac?"mac":"win",m),this.textInput=new u(e.getTextAreaContainer(),this),this.renderer.textarea=this.textInput.getElement(),this.keyBinding=new l(this),this.$mouseHandler=new a(this),new f(this),this.$blockScrolling=0,this.$search=(new h).set({wrap:!0}),this.$historyTracker=this.$historyTracker.bind(this),this.commands.on("exec",this.$historyTracker),this.$initOperationListeners(),this._$emitInputEvent=s.delayedCall(function(){this._signal("input",{}),this.session.bgTokenizer&&this.session.bgTokenizer.scheduleStart()}.bind(this)),this.on("change",function(e,t){t._$emitInputEvent.schedule(31)}),this.setSession(t||new c("")),g.resetOptions(this),g._signal("editor",this)};(function(){r.implement(this,d),this.$initOperationListeners=function(){function e(e){return e[e.length-1]}this.selections=[],this.commands.on("exec",function(t){this.startOperation(t);var n=t.command;if(n.aceCommandGroup=="fileJump"){var r=this.prevOp;if(!r||r.command.aceCommandGroup!="fileJump")this.lastFileJumpPos=e(this.selections)}else this.lastFileJumpPos=null}.bind(this),!0),this.commands.on("afterExec",function(e){var t=e.command;t.aceCommandGroup=="fileJump"&&this.lastFileJumpPos&&!this.curOp.selectionChanged&&this.selection.fromJSON(this.lastFileJumpPos),this.endOperation(e)}.bind(this),!0),this.$opResetTimer=s.delayedCall(this.endOperation.bind(this)),this.on("change",function(){this.curOp||this.startOperation(),this.curOp.docChanged=!0}.bind(this),!0),this.on("changeSelection",function(){this.curOp||this.startOperation(),this.curOp.selectionChanged=!0}.bind(this),!0)},this.curOp=null,this.prevOp={},this.startOperation=function(e){if(this.curOp){if(!e||this.curOp.command)return;this.prevOp=this.curOp}e||(this.previousCommand=null,e={}),this.$opResetTimer.schedule(),this.curOp={command:e.command||{},args:e.args,scrollTop:this.renderer.scrollTop};var t=this.curOp.command;t&&t.scrollIntoView&&this.$blockScrolling++,this.selections.push(this.selection.toJSON())},this.endOperation=function(){if(this.curOp){var e=this.curOp.command;if(e&&e.scrollIntoView){this.$blockScrolling--;switch(e.scrollIntoView){case"center":this.renderer.scrollCursorIntoView(null,.5);break;case"animate":case"cursor":this.renderer.scrollCursorIntoView();break;case"selectionPart":var t=this.selection.getRange(),n=this.renderer.layerConfig;(t.start.row>=n.lastRow||t.end.row<=n.firstRow)&&this.renderer.scrollSelectionIntoView(this.selection.anchor,this.selection.lead);break;default:}e.scrollIntoView=="animate"&&this.renderer.animateScrolling(this.curOp.scrollTop)}this.prevOp=this.curOp,this.curOp=null}},this.$historyTracker=function(e){if(!this.$mergeUndoDeltas)return;var t=this.prevOp,n=["backspace","del","insertstring"],r=t.command&&e.command.name==t.command.name;if(e.command.name=="insertstring"){var i=e.args;this.mergeNextCommand===undefined&&(this.mergeNextCommand=!0),r=r&&this.mergeNextCommand&&(!/\s/.test(i)||/\s/.test(t.args)),this.mergeNextCommand=!0}else r=r&&n.indexOf(e.command.name)!==-1;this.$mergeUndoDeltas!="always"&&Date.now()-this.sequenceStartTime>2e3&&(r=!1),r?this.session.mergeUndoDeltas=!0:n.indexOf(e.command.name)!==-1&&(this.sequenceStartTime=Date.now())},this.setKeyboardHandler=function(e){if(!e)this.keyBinding.setKeyboardHandler(null);else if(typeof e=="string"){this.$keybindingId=e;var t=this;g.loadModule(["keybinding",e],function(n){t.$keybindingId==e&&t.keyBinding.setKeyboardHandler(n&&n.handler)})}else this.$keybindingId=null,this.keyBinding.setKeyboardHandler(e)},this.getKeyboardHandler=function(){return this.keyBinding.getKeyboardHandler()},this.setSession=function(e){if(this.session==e)return;var t=this.session;if(t){this.session.removeEventListener("change",this.$onDocumentChange),this.session.removeEventListener("changeMode",this.$onChangeMode),this.session.removeEventListener("tokenizerUpdate",this.$onTokenizerUpdate),this.session.removeEventListener("changeTabSize",this.$onChangeTabSize),this.session.removeEventListener("changeWrapLimit",this.$onChangeWrapLimit),this.session.removeEventListener("changeWrapMode",this.$onChangeWrapMode),this.session.removeEventListener("onChangeFold",this.$onChangeFold),this.session.removeEventListener("changeFrontMarker",this.$onChangeFrontMarker),this.session.removeEventListener("changeBackMarker",this.$onChangeBackMarker),this.session.removeEventListener("changeBreakpoint",this.$onChangeBreakpoint),this.session.removeEventListener("changeAnnotation",this.$onChangeAnnotation),this.session.removeEventListener("changeOverwrite",this.$onCursorChange),this.session.removeEventListener("changeScrollTop",this.$onScrollTopChange),this.session.removeEventListener("changeScrollLeft",this.$onScrollLeftChange);var n=this.session.getSelection();n.removeEventListener("changeCursor",this.$onCursorChange),n.removeEventListener("changeSelection",this.$onSelectionChange)}this.session=e,e&&(this.$onDocumentChange=this.onDocumentChange.bind(this),e.addEventListener("change",this.$onDocumentChange),this.renderer.setSession(e),this.$onChangeMode=this.onChangeMode.bind(this),e.addEventListener("changeMode",this.$onChangeMode),this.$onTokenizerUpdate=this.onTokenizerUpdate.bind(this),e.addEventListener("tokenizerUpdate",this.$onTokenizerUpdate),this.$onChangeTabSize=this.renderer.onChangeTabSize.bind(this.renderer),e.addEventListener("changeTabSize",this.$onChangeTabSize),this.$onChangeWrapLimit=this.onChangeWrapLimit.bind(this),e.addEventListener("changeWrapLimit",this.$onChangeWrapLimit),this.$onChangeWrapMode=this.onChangeWrapMode.bind(this),e.addEventListener("changeWrapMode",this.$onChangeWrapMode),this.$onChangeFold=this.onChangeFold.bind(this),e.addEventListener("changeFold",this.$onChangeFold),this.$onChangeFrontMarker=this.onChangeFrontMarker.bind(this),this.session.addEventListener("changeFrontMarker",this.$onChangeFrontMarker),this.$onChangeBackMarker=this.onChangeBackMarker.bind(this),this.session.addEventListener("changeBackMarker",this.$onChangeBackMarker),this.$onChangeBreakpoint=this.onChangeBreakpoint.bind(this),this.session.addEventListener("changeBreakpoint",this.$onChangeBreakpoint),this.$onChangeAnnotation=this.onChangeAnnotation.bind(this),this.session.addEventListener("changeAnnotation",this.$onChangeAnnotation),this.$onCursorChange=this.onCursorChange.bind(this),this.session.addEventListener("changeOverwrite",this.$onCursorChange),this.$onScrollTopChange=this.onScrollTopChange.bind(this),this.session.addEventListener("changeScrollTop",this.$onScrollTopChange),this.$onScrollLeftChange=this.onScrollLeftChange.bind(this),this.session.addEventListener("changeScrollLeft",this.$onScrollLeftChange),this.selection=e.getSelection(),this.selection.addEventListener("changeCursor",this.$onCursorChange),this.$onSelectionChange=this.onSelectionChange.bind(this),this.selection.addEventListener("changeSelection",this.$onSelectionChange),this.onChangeMode(),this.$blockScrolling+=1,this.onCursorChange(),this.$blockScrolling-=1,this.onScrollTopChange(),this.onScrollLeftChange(),this.onSelectionChange(),this.onChangeFrontMarker(),this.onChangeBackMarker(),this.onChangeBreakpoint(),this.onChangeAnnotation(),this.session.getUseWrapMode()&&this.renderer.adjustWrapLimit(),this.renderer.updateFull()),this._signal("changeSession",{session:e,oldSession:t}),t&&t._signal("changeEditor",{oldEditor:this}),e&&e._signal("changeEditor",{editor:this})},this.getSession=function(){return this.session},this.setValue=function(e,t){return this.session.doc.setValue(e),t?t==1?this.navigateFileEnd():t==-1&&this.navigateFileStart():this.selectAll(),e},this.getValue=function(){return this.session.getValue()},this.getSelection=function(){return this.selection},this.resize=function(e){this.renderer.onResize(e)},this.setTheme=function(e,t){this.renderer.setTheme(e,t)},this.getTheme=function(){return this.renderer.getTheme()},this.setStyle=function(e){this.renderer.setStyle(e)},this.unsetStyle=function(e){this.renderer.unsetStyle(e)},this.getFontSize=function(){return this.getOption("fontSize")||i.computedStyle(this.container,"fontSize")},this.setFontSize=function(e){this.setOption("fontSize",e)},this.$highlightBrackets=function(){this.session.$bracketHighlight&&(this.session.removeMarker(this.session.$bracketHighlight),this.session.$bracketHighlight=null);if(this.$highlightPending)return;var e=this;this.$highlightPending=!0,setTimeout(function(){e.$highlightPending=!1;var t=e.session.findMatchingBracket(e.getCursorPosition());if(t)var n=new p(t.row,t.column,t.row,t.column+1);else if(e.session.$mode.getMatching)var n=e.session.$mode.getMatching(e.session);n&&(e.session.$bracketHighlight=e.session.addMarker(n,"ace_bracket","text"))},50)},this.focus=function(){var e=this;setTimeout(function(){e.textInput.focus()}),this.textInput.focus()},this.isFocused=function(){return this.textInput.isFocused()},this.blur=function(){this.textInput.blur()},this.onFocus=function(){if(this.$isFocused)return;this.$isFocused=!0,this.renderer.showCursor(),this.renderer.visualizeFocus(),this._emit("focus")},this.onBlur=function(){if(!this.$isFocused)return;this.$isFocused=!1,this.renderer.hideCursor(),this.renderer.visualizeBlur(),this._emit("blur")},this.$cursorChange=function(){this.renderer.updateCursor()},this.onDocumentChange=function(e){var t=e.data,n=t.range,r;n.start.row==n.end.row&&t.action!="insertLines"&&t.action!="removeLines"?r=n.end.row:r=Infinity,this.renderer.updateLines(n.start.row,r),this._signal("change",e),this.$cursorChange()},this.onTokenizerUpdate=function(e){var t=e.data;this.renderer.updateLines(t.first,t.last)},this.onScrollTopChange=function(){this.renderer.scrollToY(this.session.getScrollTop())},this.onScrollLeftChange=function(){this.renderer.scrollToX(this.session.getScrollLeft())},this.onCursorChange=function(){this.$cursorChange(),this.$blockScrolling||this.renderer.scrollCursorIntoView(),this.$highlightBrackets(),this.$updateHighlightActiveLine(),this._signal("changeSelection")},this.$updateHighlightActiveLine=function(){var e=this.getSession(),t;if(this.$highlightActiveLine){if(this.$selectionStyle!="line"||!this.selection.isMultiLine())t=this.getCursorPosition();this.renderer.$maxLines&&this.session.getLength()===1&&!(this.renderer.$minLines>1)&&(t=!1)}if(e.$highlightLineMarker&&!t)e.removeMarker(e.$highlightLineMarker.id),e.$highlightLineMarker=null;else if(!e.$highlightLineMarker&&t){var n=new p(t.row,t.column,t.row,Infinity);n.id=e.addMarker(n,"ace_active-line","screenLine"),e.$highlightLineMarker=n}else t&&(e.$highlightLineMarker.start.row=t.row,e.$highlightLineMarker.end.row=t.row,e.$highlightLineMarker.start.column=t.column,e._signal("changeBackMarker"))},this.onSelectionChange=function(e){var t=this.session;t.$selectionMarker&&t.removeMarker(t.$selectionMarker),t.$selectionMarker=null;if(!this.selection.isEmpty()){var n=this.selection.getRange(),r=this.getSelectionStyle();t.$selectionMarker=t.addMarker(n,"ace_selection",r)}else this.$updateHighlightActiveLine();var i=this.$highlightSelectedWord&&this.$getSelectionHighLightRegexp();this.session.highlight(i),this._signal("changeSelection")},this.$getSelectionHighLightRegexp=function(){var e=this.session,t=this.getSelectionRange();if(t.isEmpty()||t.isMultiLine())return;var n=t.start.column-1,r=t.end.column+1,i=e.getLine(t.start.row),s=i.length,o=i.substring(Math.max(n,0),Math.min(r,s));if(n>=0&&/^[\w\d]/.test(o)||r<=s&&/[\w\d]$/.test(o))return;o=i.substring(t.start.column,t.end.column);if(!/^[\w\d]+$/.test(o))return;var u=this.$search.$assembleRegExp({wholeWord:!0,caseSensitive:!0,needle:o});return u},this.onChangeFrontMarker=function(){this.renderer.updateFrontMarkers()},this.onChangeBackMarker=function(){this.renderer.updateBackMarkers()},this.onChangeBreakpoint=function(){this.renderer.updateBreakpoints()},this.onChangeAnnotation=function(){this.renderer.setAnnotations(this.session.getAnnotations())},this.onChangeMode=function(e){this.renderer.updateText(),this._emit("changeMode",e)},this.onChangeWrapLimit=function(){this.renderer.updateFull()},this.onChangeWrapMode=function(){this.renderer.onResize(!0)},this.onChangeFold=function(){this.$updateHighlightActiveLine(),this.renderer.updateFull()},this.getSelectedText=function(){return this.session.getTextRange(this.getSelectionRange())},this.getCopyText=function(){var e=this.getSelectedText();return this._signal("copy",e),e},this.onCopy=function(){this.commands.exec("copy",this)},this.onCut=function(){this.commands.exec("cut",this)},this.onPaste=function(e){if(this.$readOnly)return;var t={text:e};this._signal("paste",t),this.insert(t.text,!0)},this.execCommand=function(e,t){this.commands.exec(e,this,t)},this.insert=function(e,t){var n=this.session,r=n.getMode(),i=this.getCursorPosition();if(this.getBehavioursEnabled()&&!t){var s=r.transformAction(n.getState(i.row),"insertion",this,n,e);s&&(e!==s.text&&(this.session.mergeUndoDeltas=!1,this.$mergeNextCommand=!1),e=s.text)}e=="	"&&(e=this.session.getTabString());if(!this.selection.isEmpty()){var o=this.getSelectionRange();i=this.session.remove(o),this.clearSelection()}else if(this.session.getOverwrite()){var o=new p.fromPoints(i,i);o.end.column+=e.length,this.session.remove(o)}if(e=="\n"||e=="\r\n"){var u=n.getLine(i.row);if(i.column>u.search(/\S|$/)){var a=u.substr(i.column).search(/\S|$/);n.doc.removeInLine(i.row,i.column,i.column+a)}}this.clearSelection();var f=i.column,l=n.getState(i.row),u=n.getLine(i.row),c=r.checkOutdent(l,u,e),h=n.insert(i,e);s&&s.selection&&(s.selection.length==2?this.selection.setSelectionRange(new p(i.row,f+s.selection[0],i.row,f+s.selection[1])):this.selection.setSelectionRange(new p(i.row+s.selection[0],s.selection[1],i.row+s.selection[2],s.selection[3])));if(n.getDocument().isNewLine(e)){var d=r.getNextLineIndent(l,u.slice(0,i.column),n.getTabString());n.insert({row:i.row+1,column:0},d)}c&&r.autoOutdent(l,n,i.row)},this.onTextInput=function(e){this.keyBinding.onTextInput(e)},this.onCommandKey=function(e,t,n){this.keyBinding.onCommandKey(e,t,n)},this.setOverwrite=function(e){this.session.setOverwrite(e)},this.getOverwrite=function(){return this.session.getOverwrite()},this.toggleOverwrite=function(){this.session.toggleOverwrite()},this.setScrollSpeed=function(e){this.setOption("scrollSpeed",e)},this.getScrollSpeed=function(){return this.getOption("scrollSpeed")},this.setDragDelay=function(e){this.setOption("dragDelay",e)},this.getDragDelay=function(){return this.getOption("dragDelay")},this.setSelectionStyle=function(e){this.setOption("selectionStyle",e)},this.getSelectionStyle=function(){return this.getOption("selectionStyle")},this.setHighlightActiveLine=function(e){this.setOption("highlightActiveLine",e)},this.getHighlightActiveLine=function(){return this.getOption("highlightActiveLine")},this.setHighlightGutterLine=function(e){this.setOption("highlightGutterLine",e)},this.getHighlightGutterLine=function(){return this.getOption("highlightGutterLine")},this.setHighlightSelectedWord=function(e){this.setOption("highlightSelectedWord",e)},this.getHighlightSelectedWord=function(){return this.$highlightSelectedWord},this.setAnimatedScroll=function(e){this.renderer.setAnimatedScroll(e)},this.getAnimatedScroll=function(){return this.renderer.getAnimatedScroll()},this.setShowInvisibles=function(e){this.renderer.setShowInvisibles(e)},this.getShowInvisibles=function(){return this.renderer.getShowInvisibles()},this.setDisplayIndentGuides=function(e){this.renderer.setDisplayIndentGuides(e)},this.getDisplayIndentGuides=function(){return this.renderer.getDisplayIndentGuides()},this.setShowPrintMargin=function(e){this.renderer.setShowPrintMargin(e)},this.getShowPrintMargin=function(){return this.renderer.getShowPrintMargin()},this.setPrintMarginColumn=function(e){this.renderer.setPrintMarginColumn(e)},this.getPrintMarginColumn=function(){return this.renderer.getPrintMarginColumn()},this.setReadOnly=function(e){this.setOption("readOnly",e)},this.getReadOnly=function(){return this.getOption("readOnly")},this.setBehavioursEnabled=function(e){this.setOption("behavioursEnabled",e)},this.getBehavioursEnabled=function(){return this.getOption("behavioursEnabled")},this.setWrapBehavioursEnabled=function(e){this.setOption("wrapBehavioursEnabled",e)},this.getWrapBehavioursEnabled=function(){return this.getOption("wrapBehavioursEnabled")},this.setShowFoldWidgets=function(e){this.setOption("showFoldWidgets",e)},this.getShowFoldWidgets=function(){return this.getOption("showFoldWidgets")},this.setFadeFoldWidgets=function(e){this.setOption("fadeFoldWidgets",e)},this.getFadeFoldWidgets=function(){return this.getOption("fadeFoldWidgets")},this.remove=function(e){this.selection.isEmpty()&&(e=="left"?this.selection.selectLeft():this.selection.selectRight());var t=this.getSelectionRange();if(this.getBehavioursEnabled()){var n=this.session,r=n.getState(t.start.row),i=n.getMode().transformAction(r,"deletion",this,n,t);if(t.end.column===0){var s=n.getTextRange(t);if(s[s.length-1]=="\n"){var o=n.getLine(t.end.row);/^\s+$/.test(o)&&(t.end.column=o.length)}}i&&(t=i)}this.session.remove(t),this.clearSelection()},this.removeWordRight=function(){this.selection.isEmpty()&&this.selection.selectWordRight(),this.session.remove(this.getSelectionRange()),this.clearSelection()},this.removeWordLeft=function(){this.selection.isEmpty()&&this.selection.selectWordLeft(),this.session.remove(this.getSelectionRange()),this.clearSelection()},this.removeToLineStart=function(){this.selection.isEmpty()&&this.selection.selectLineStart(),this.session.remove(this.getSelectionRange()),this.clearSelection()},this.removeToLineEnd=function(){this.selection.isEmpty()&&this.selection.selectLineEnd();var e=this.getSelectionRange();e.start.column==e.end.column&&e.start.row==e.end.row&&(e.end.column=0,e.end.row++),this.session.remove(e),this.clearSelection()},this.splitLine=function(){this.selection.isEmpty()||(this.session.remove(this.getSelectionRange()),this.clearSelection());var e=this.getCursorPosition();this.insert("\n"),this.moveCursorToPosition(e)},this.transposeLetters=function(){if(!this.selection.isEmpty())return;var e=this.getCursorPosition(),t=e.column;if(t===0)return;var n=this.session.getLine(e.row),r,i;t<n.length?(r=n.charAt(t)+n.charAt(t-1),i=new p(e.row,t-1,e.row,t+1)):(r=n.charAt(t-1)+n.charAt(t-2),i=new p(e.row,t-2,e.row,t)),this.session.replace(i,r)},this.toLowerCase=function(){var e=this.getSelectionRange();this.selection.isEmpty()&&this.selection.selectWord();var t=this.getSelectionRange(),n=this.session.getTextRange(t);this.session.replace(t,n.toLowerCase()),this.selection.setSelectionRange(e)},this.toUpperCase=function(){var e=this.getSelectionRange();this.selection.isEmpty()&&this.selection.selectWord();var t=this.getSelectionRange(),n=this.session.getTextRange(t);this.session.replace(t,n.toUpperCase()),this.selection.setSelectionRange(e)},this.indent=function(){var e=this.session,t=this.getSelectionRange();if(t.start.row<t.end.row){var n=this.$getSelectedRows();e.indentRows(n.first,n.last,"	");return}if(t.start.column<t.end.column){var r=e.getTextRange(t);if(!/^\s+$/.test(r)){var n=this.$getSelectedRows();e.indentRows(n.first,n.last,"	");return}}var i=e.getLine(t.start.row),o=t.start,u=e.getTabSize(),a=e.documentToScreenColumn(o.row,o.column);if(this.session.getUseSoftTabs())var f=u-a%u,l=s.stringRepeat(" ",f);else{var f=a%u;while(i[t.start.column]==" "&&f)t.start.column--,f--;this.selection.setSelectionRange(t),l="	"}return this.insert(l)},this.blockIndent=function(){var e=this.$getSelectedRows();this.session.indentRows(e.first,e.last,"	")},this.blockOutdent=function(){var e=this.session.getSelection();this.session.outdentRows(e.getRange())},this.sortLines=function(){var e=this.$getSelectedRows(),t=this.session,n=[];for(i=e.first;i<=e.last;i++)n.push(t.getLine(i));n.sort(function(e,t){return e.toLowerCase()<t.toLowerCase()?-1:e.toLowerCase()>t.toLowerCase()?1:0});var r=new p(0,0,0,0);for(var i=e.first;i<=e.last;i++){var s=t.getLine(i);r.start.row=i,r.end.row=i,r.end.column=s.length,t.replace(r,n[i-e.first])}},this.toggleCommentLines=function(){var e=this.session.getState(this.getCursorPosition().row),t=this.$getSelectedRows();this.session.getMode().toggleCommentLines(e,this.session,t.first,t.last)},this.toggleBlockComment=function(){var e=this.getCursorPosition(),t=this.session.getState(e.row),n=this.getSelectionRange();this.session.getMode().toggleBlockComment(t,this.session,n,e)},this.getNumberAt=function(e,t){var n=/[\-]?[0-9]+(?:\.[0-9]+)?/g;n.lastIndex=0;var r=this.session.getLine(e);while(n.lastIndex<t){var i=n.exec(r);if(i.index<=t&&i.index+i[0].length>=t){var s={value:i[0],start:i.index,end:i.index+i[0].length};return s}}return null},this.modifyNumber=function(e){var t=this.selection.getCursor().row,n=this.selection.getCursor().column,r=new p(t,n-1,t,n),i=this.session.getTextRange(r);if(!isNaN(parseFloat(i))&&isFinite(i)){var s=this.getNumberAt(t,n);if(s){var o=s.value.indexOf(".")>=0?s.start+s.value.indexOf(".")+1:s.end,u=s.start+s.value.length-o,a=parseFloat(s.value);a*=Math.pow(10,u),o!==s.end&&n<o?e*=Math.pow(10,s.end-n-1):e*=Math.pow(10,s.end-n),a+=e,a/=Math.pow(10,u);var f=a.toFixed(u),l=new p(t,s.start,t,s.end);this.session.replace(l,f),this.moveCursorTo(t,Math.max(s.start+1,n+f.length-s.value.length))}}},this.removeLines=function(){var e=this.$getSelectedRows(),t;e.first===0||e.last+1<this.session.getLength()?t=new p(e.first,0,e.last+1,0):t=new p(e.first-1,this.session.getLine(e.first-1).length,e.last,this.session.getLine(e.last).length),this.session.remove(t),this.clearSelection()},this.duplicateSelection=function(){var e=this.selection,t=this.session,n=e.getRange(),r=e.isBackwards();if(n.isEmpty()){var i=n.start.row;t.duplicateLines(i,i)}else{var s=r?n.start:n.end,o=t.insert(s,t.getTextRange(n),!1);n.start=s,n.end=o,e.setSelectionRange(n,r)}},this.moveLinesDown=function(){this.$moveLines(function(e,t){return this.session.moveLinesDown(e,t)})},this.moveLinesUp=function(){this.$moveLines(function(e,t){return this.session.moveLinesUp(e,t)})},this.moveText=function(e,t,n){return this.session.moveText(e,t,n)},this.copyLinesUp=function(){this.$moveLines(function(e,t){return this.session.duplicateLines(e,t),0})},this.copyLinesDown=function(){this.$moveLines(function(e,t){return this.session.duplicateLines(e,t)})},this.$moveLines=function(e){var t=this.selection;if(!t.inMultiSelectMode||this.inVirtualSelectionMode){var n=t.toOrientedRange(),r=this.$getSelectedRows(n),i=e.call(this,r.first,r.last);n.moveBy(i,0),t.fromOrientedRange(n)}else{var s=t.rangeList.ranges;t.rangeList.detach(this.session);for(var o=s.length;o--;){var u=o,r=s[o].collapseRows(),a=r.end.row,f=r.start.row;while(o--){r=s[o].collapseRows();if(!(f-r.end.row<=1))break;f=r.end.row}o++;var i=e.call(this,f,a);while(u>=o)s[u].moveBy(i,0),u--}t.fromOrientedRange(t.ranges[0]),t.rangeList.attach(this.session)}},this.$getSelectedRows=function(){var e=this.getSelectionRange().collapseRows();return{first:this.session.getRowFoldStart(e.start.row),last:this.session.getRowFoldEnd(e.end.row)}},this.onCompositionStart=function(e){this.renderer.showComposition(this.getCursorPosition())},this.onCompositionUpdate=function(e){this.renderer.setCompositionText(e)},this.onCompositionEnd=function(){this.renderer.hideComposition()},this.getFirstVisibleRow=function(){return this.renderer.getFirstVisibleRow()},this.getLastVisibleRow=function(){return this.renderer.getLastVisibleRow()},this.isRowVisible=function(e){return e>=this.getFirstVisibleRow()&&e<=this.getLastVisibleRow()},this.isRowFullyVisible=function(e){return e>=this.renderer.getFirstFullyVisibleRow()&&e<=this.renderer.getLastFullyVisibleRow()},this.$getVisibleRowCount=function(){return this.renderer.getScrollBottomRow()-this.renderer.getScrollTopRow()+1},this.$moveByPage=function(e,t){var n=this.renderer,r=this.renderer.layerConfig,i=e*Math.floor(r.height/r.lineHeight);this.$blockScrolling++,t===!0?this.selection.$moveSelection(function(){this.moveCursorBy(i,0)}):t===!1&&(this.selection.moveCursorBy(i,0),this.selection.clearSelection()),this.$blockScrolling--;var s=n.scrollTop;n.scrollBy(0,i*r.lineHeight),t!=null&&n.scrollCursorIntoView(null,.5),n.animateScrolling(s)},this.selectPageDown=function(){this.$moveByPage(1,!0)},this.selectPageUp=function(){this.$moveByPage(-1,!0)},this.gotoPageDown=function(){this.$moveByPage(1,!1)},this.gotoPageUp=function(){this.$moveByPage(-1,!1)},this.scrollPageDown=function(){this.$moveByPage(1)},this.scrollPageUp=function(){this.$moveByPage(-1)},this.scrollToRow=function(e){this.renderer.scrollToRow(e)},this.scrollToLine=function(e,t,n,r){this.renderer.scrollToLine(e,t,n,r)},this.centerSelection=function(){var e=this.getSelectionRange(),t={row:Math.floor(e.start.row+(e.end.row-e.start.row)/2),column:Math.floor(e.start.column+(e.end.column-e.start.column)/2)};this.renderer.alignCursor(t,.5)},this.getCursorPosition=function(){return this.selection.getCursor()},this.getCursorPositionScreen=function(){return this.session.documentToScreenPosition(this.getCursorPosition())},this.getSelectionRange=function(){return this.selection.getRange()},this.selectAll=function(){this.$blockScrolling+=1,this.selection.selectAll(),this.$blockScrolling-=1},this.clearSelection=function(){this.selection.clearSelection()},this.moveCursorTo=function(e,t){this.selection.moveCursorTo(e,t)},this.moveCursorToPosition=function(e){this.selection.moveCursorToPosition(e)},this.jumpToMatching=function(e){var t=this.getCursorPosition(),n=this.session.getBracketRange(t);if(!n){n=this.find({needle:/[{}()\[\]]/g,preventScroll:!0,start:{row:t.row,column:t.column-1}});if(!n)return;var r=n.start;r.row==t.row&&Math.abs(r.column-t.column)<2&&(n=this.session.getBracketRange(r))}r=n&&n.cursor||r,r&&(e?n&&n.isEqual(this.getSelectionRange())?this.clearSelection():this.selection.selectTo(r.row,r.column):this.selection.moveTo(r.row,r.column))},this.gotoLine=function(e,t,n){this.selection.clearSelection(),this.session.unfold({row:e-1,column:t||0}),this.$blockScrolling+=1,this.exitMultiSelectMode&&this.exitMultiSelectMode(),this.moveCursorTo(e-1,t||0),this.$blockScrolling-=1,this.isRowFullyVisible(e-1)||this.scrollToLine(e-1,!0,n)},this.navigateTo=function(e,t){this.selection.moveTo(e,t)},this.navigateUp=function(e){if(this.selection.isMultiLine()&&!this.selection.isBackwards()){var t=this.selection.anchor.getPosition();return this.moveCursorToPosition(t)}this.selection.clearSelection(),this.selection.moveCursorBy(-e||-1,0)},this.navigateDown=function(e){if(this.selection.isMultiLine()&&this.selection.isBackwards()){var t=this.selection.anchor.getPosition();return this.moveCursorToPosition(t)}this.selection.clearSelection(),this.selection.moveCursorBy(e||1,0)},this.navigateLeft=function(e){if(!this.selection.isEmpty()){var t=this.getSelectionRange().start;this.moveCursorToPosition(t)}else{e=e||1;while(e--)this.selection.moveCursorLeft()}this.clearSelection()},this.navigateRight=function(e){if(!this.selection.isEmpty()){var t=this.getSelectionRange().end;this.moveCursorToPosition(t)}else{e=e||1;while(e--)this.selection.moveCursorRight()}this.clearSelection()},this.navigateLineStart=function(){this.selection.moveCursorLineStart(),this.clearSelection()},this.navigateLineEnd=function(){this.selection.moveCursorLineEnd(),this.clearSelection()},this.navigateFileEnd=function(){this.selection.moveCursorFileEnd(),this.clearSelection()},this.navigateFileStart=function(){this.selection.moveCursorFileStart(),this.clearSelection()},this.navigateWordRight=function(){this.selection.moveCursorWordRight(),this.clearSelection()},this.navigateWordLeft=function(){this.selection.moveCursorWordLeft(),this.clearSelection()},this.replace=function(e,t){t&&this.$search.set(t);var n=this.$search.find(this.session),r=0;return n?(this.$tryReplace(n,e)&&(r=1),n!==null&&(this.selection.setSelectionRange(n),this.renderer.scrollSelectionIntoView(n.start,n.end)),r):r},this.replaceAll=function(e,t){t&&this.$search.set(t);var n=this.$search.findAll(this.session),r=0;if(!n.length)return r;this.$blockScrolling+=1;var i=this.getSelectionRange();this.selection.moveTo(0,0);for(var s=n.length-1;s>=0;--s)this.$tryReplace(n[s],e)&&r++;return this.selection.setSelectionRange(i),this.$blockScrolling-=1,r},this.$tryReplace=function(e,t){var n=this.session.getTextRange(e);return t=this.$search.replace(n,t),t!==null?(e.end=this.session.replace(e,t),e):null},this.getLastSearchOptions=function(){return this.$search.getOptions()},this.find=function(e,t,n){t||(t={}),typeof e=="string"||e instanceof RegExp?t.needle=e:typeof e=="object"&&r.mixin(t,e);var i=this.selection.getRange();t.needle==null&&(e=this.session.getTextRange(i)||this.$search.$options.needle,e||(i=this.session.getWordRange(i.start.row,i.start.column),e=this.session.getTextRange(i)),this.$search.set({needle:e})),this.$search.set(t),t.start||this.$search.set({start:i});var s=this.$search.find(this.session);if(t.preventScroll)return s;if(s)return this.revealRange(s,n),s;t.backwards?i.start=i.end:i.end=i.start,this.selection.setRange(i)},this.findNext=function(e,t){this.find({skipCurrent:!0,backwards:!1},e,t)},this.findPrevious=function(e,t){this.find(e,{skipCurrent:!0,backwards:!0},t)},this.revealRange=function(e,t){this.$blockScrolling+=1,this.session.unfold(e),this.selection.setSelectionRange(e),this.$blockScrolling-=1;var n=this.renderer.scrollTop;this.renderer.scrollSelectionIntoView(e.start,e.end,.5),t!==!1&&this.renderer.animateScrolling(n)},this.undo=function(){this.$blockScrolling++,this.session.getUndoManager().undo(),this.$blockScrolling--,this.renderer.scrollCursorIntoView(null,.5)},this.redo=function(){this.$blockScrolling++,this.session.getUndoManager().redo(),this.$blockScrolling--,this.renderer.scrollCursorIntoView(null,.5)},this.destroy=function(){this.renderer.destroy(),this._signal("destroy",this)},this.setAutoScrollEditorIntoView=function(e){if(!e)return;var t,n=this,r=!1;this.$scrollAnchor||(this.$scrollAnchor=document.createElement("div"));var i=this.$scrollAnchor;i.style.cssText="position:absolute",this.container.insertBefore(i,this.container.firstChild);var s=this.on("changeSelection",function(){r=!0}),o=this.renderer.on("beforeRender",function(){r&&(t=n.renderer.container.getBoundingClientRect())}),u=this.renderer.on("afterRender",function(){if(r&&t&&n.isFocused()){var e=n.renderer,s=e.$cursorLayer.$pixelPos,o=e.layerConfig,u=s.top-o.offset;s.top>=0&&u+t.top<0?r=!0:s.top<o.height&&s.top+t.top+o.lineHeight>window.innerHeight?r=!1:r=null,r!=null&&(i.style.top=u+"px",i.style.left=s.left+"px",i.style.height=o.lineHeight+"px",i.scrollIntoView(r)),r=t=null}});this.setAutoScrollEditorIntoView=function(e){if(e)return;delete this.setAutoScrollEditorIntoView,this.removeEventListener("changeSelection",s),this.renderer.removeEventListener("afterRender",u),this.renderer.removeEventListener("beforeRender",o)}},this.$resetCursorStyle=function(){var e=this.$cursorStyle||"ace",t=this.renderer.$cursorLayer;if(!t)return;t.setSmoothBlinking(e=="smooth"),t.isBlinking=!this.$readOnly&&e!="wide"}}).call(y.prototype),g.defineOptions(y.prototype,"editor",{selectionStyle:{set:function(e){this.onSelectionChange(),this._signal("changeSelectionStyle",{data:e})},initialValue:"line"},highlightActiveLine:{set:function(){this.$updateHighlightActiveLine()},initialValue:!0},highlightSelectedWord:{set:function(e){this.$onSelectionChange()},initialValue:!0},readOnly:{set:function(e){this.textInput.setReadOnly(e),this.$resetCursorStyle()},initialValue:!1},cursorStyle:{set:function(e){this.$resetCursorStyle()},values:["ace","slim","smooth","wide"],initialValue:"ace"},mergeUndoDeltas:{values:[!1,!0,"always"],initialValue:!0},behavioursEnabled:{initialValue:!0},wrapBehavioursEnabled:{initialValue:!0},autoScrollEditorIntoView:{set:function(e){this.setAutoScrollEditorIntoView(e)}},hScrollBarAlwaysVisible:"renderer",vScrollBarAlwaysVisible:"renderer",highlightGutterLine:"renderer",animatedScroll:"renderer",showInvisibles:"renderer",showPrintMargin:"renderer",printMarginColumn:"renderer",printMargin:"renderer",fadeFoldWidgets:"renderer",showFoldWidgets:"renderer",showLineNumbers:"renderer",showGutter:"renderer",displayIndentGuides:"renderer",fontSize:"renderer",fontFamily:"renderer",maxLines:"renderer",minLines:"renderer",scrollPastEnd:"renderer",fixedWidthGutter:"renderer",theme:"renderer",scrollSpeed:"$mouseHandler",dragDelay:"$mouseHandler",dragEnabled:"$mouseHandler",focusTimout:"$mouseHandler",tooltipFollowsMouse:"$mouseHandler",firstLineNumber:"session",overwrite:"session",newLineMode:"session",useWorker:"session",useSoftTabs:"session",tabSize:"session",wrap:"session",foldStyle:"session",mode:"session"}),t.Editor=y}),define("ace/mouse/multi_select_handler",["require","exports","module","ace/lib/event"],function(e,t,n){function i(e,t){return e.row==t.row&&e.column==t.column}function s(e){var t=e.domEvent,n=t.altKey,s=t.shiftKey,o=e.getAccelKey(),u=e.getButton();if(e.editor.inMultiSelectMode&&u==2){e.editor.textInput.onContextMenu(e.domEvent);return}if(!o&&!n){u===0&&e.editor.inMultiSelectMode&&e.editor.exitMultiSelectMode();return}var a=e.editor,f=a.selection,l=a.inMultiSelectMode,c=e.getDocumentPosition(),h=f.getCursor(),p=e.inSelection()||f.isEmpty()&&i(c,h),d=e.x,v=e.y,m=function(e){d=e.clientX,v=e.clientY},g=function(){var e=a.renderer.pixelToScreenCoordinates(d,v),t=y.screenToDocumentPosition(e.row,e.column);if(i(w,e)&&i(t,f.selectionLead))return;w=e,a.selection.moveToPosition(t),a.renderer.scrollCursorIntoView(),a.removeSelectionMarkers(x),x=f.rectangularRangeBlock(w,b),x.forEach(a.addSelectionMarker,a),a.updateSelectionMarkers()},y=a.session,b=a.renderer.pixelToScreenCoordinates(d,v),w=b;if(o&&!n&&!s&&u===0){if(!l&&p)return;if(!l){var E=f.toOrientedRange();a.addSelectionMarker(E)}var S=f.rangeList.rangeAtPoint(c);a.$blockScrolling++,a.once("mouseup",function(){var e=f.toOrientedRange();S&&e.isEmpty()&&i(S.cursor,e.cursor)?f.substractPoint(e.cursor):(E&&(a.removeSelectionMarker(E),f.addRange(E)),f.addRange(e)),a.$blockScrolling--})}else if(n&&u===0){e.stop(),l&&!o?f.toSingleRange():!l&&o&&f.addRange();var x=[];s?(b=y.documentToScreenPosition(f.lead),g()):f.moveToPosition(c);var T=function(e){clearInterval(C),a.removeSelectionMarkers(x);for(var t=0;t<x.length;t++)f.addRange(x[t])},N=g;r.capture(a.container,m,T);var C=setInterval(function(){N()},20);return e.preventDefault()}}var r=e("../lib/event");t.onMouseDown=s}),define("ace/lib/useragent",["require","exports","module"],function(e,t,n){t.OS={LINUX:"LINUX",MAC:"MAC",WINDOWS:"WINDOWS"},t.getOS=function(){return t.isMac?t.OS.MAC:t.isLinux?t.OS.LINUX:t.OS.WINDOWS};if(typeof navigator!="object")return;var r=(navigator.platform.match(/mac|win|linux/i)||["other"])[0].toLowerCase(),i=navigator.userAgent;t.isWin=r=="win",t.isMac=r=="mac",t.isLinux=r=="linux",t.isIE=(navigator.appName=="Microsoft Internet Explorer"||navigator.appName.indexOf("MSAppHost")>=0)&&parseFloat(navigator.userAgent.match(/(?:Trident\/[0-9]+[\.0-9]+;.*rv:|MSIE )([0-9]+[\.0-9]+)/)[1]),t.isOldIE=t.isIE&&t.isIE<9,t.isGecko=t.isMozilla=window.controllers&&window.navigator.product==="Gecko",t.isOldGecko=t.isGecko&&parseInt((navigator.userAgent.match(/rv\:(\d+)/)||[])[1],10)<4,t.isOpera=window.opera&&Object.prototype.toString.call(window.opera)=="[object Opera]",t.isWebKit=parseFloat(i.split("WebKit/")[1])||undefined,t.isChrome=parseFloat(i.split(" Chrome/")[1])||undefined,t.isAIR=i.indexOf("AdobeAIR")>=0,t.isIPad=i.indexOf("iPad")>=0,t.isTouchPad=i.indexOf("TouchPad")>=0}),define("ace/commands/multi_select_commands",["require","exports","module","ace/keyboard/hash_handler"],function(e,t,n){t.defaultCommands=[{name:"addCursorAbove",exec:function(e){e.selectMoreLines(-1)},bindKey:{win:"Ctrl-Alt-Up",mac:"Ctrl-Alt-Up"},readonly:!0},{name:"addCursorBelow",exec:function(e){e.selectMoreLines(1)},bindKey:{win:"Ctrl-Alt-Down",mac:"Ctrl-Alt-Down"},readonly:!0},{name:"addCursorAboveSkipCurrent",exec:function(e){e.selectMoreLines(-1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Up",mac:"Ctrl-Alt-Shift-Up"},readonly:!0},{name:"addCursorBelowSkipCurrent",exec:function(e){e.selectMoreLines(1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Down",mac:"Ctrl-Alt-Shift-Down"},readonly:!0},{name:"selectMoreBefore",exec:function(e){e.selectMore(-1)},bindKey:{win:"Ctrl-Alt-Left",mac:"Ctrl-Alt-Left"},readonly:!0},{name:"selectMoreAfter",exec:function(e){e.selectMore(1)},bindKey:{win:"Ctrl-Alt-Right",mac:"Ctrl-Alt-Right"},readonly:!0},{name:"selectNextBefore",exec:function(e){e.selectMore(-1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Left",mac:"Ctrl-Alt-Shift-Left"},readonly:!0},{name:"selectNextAfter",exec:function(e){e.selectMore(1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Right",mac:"Ctrl-Alt-Shift-Right"},readonly:!0},{name:"splitIntoLines",exec:function(e){e.multiSelect.splitIntoLines()},bindKey:{win:"Ctrl-Alt-L",mac:"Ctrl-Alt-L"},readonly:!0},{name:"alignCursors",exec:function(e){e.alignCursors()},bindKey:{win:"Ctrl-Alt-A",mac:"Ctrl-Alt-A"}}],t.multiSelectCommands=[{name:"singleSelection",bindKey:"esc",exec:function(e){e.exitMultiSelectMode()},readonly:!0,isAvailable:function(e){return e&&e.inMultiSelectMode}}];var r=e("../keyboard/hash_handler").HashHandler;t.keyboardHandler=new r(t.multiSelectCommands)}),define("ace/lib/oop",["require","exports","module"],function(e,t,n){t.inherits=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})},t.mixin=function(e,t){for(var n in t)e[n]=t[n];return e},t.implement=function(e,n){t.mixin(e,n)}}),define("ace/worker/worker_client",["require","exports","module","ace/lib/oop","ace/lib/event_emitter","ace/config"],function(e,t,n){var r=e("../lib/oop"),i=e("../lib/event_emitter").EventEmitter,s=e("../config"),o=function(t,n,r,i){this.$sendDeltaQueue=this.$sendDeltaQueue.bind(this),this.changeListener=this.changeListener.bind(this),this.onMessage=this.onMessage.bind(this),e.nameToUrl&&!e.toUrl&&(e.toUrl=e.nameToUrl);if(s.get("packaged")||!e.toUrl)i=i||s.moduleUrl(n,"worker");else{var o=this.$normalizePath;i=i||o(e.toUrl("ace/worker/worker.js",null,"_"));var u={};t.forEach(function(t){u[t]=o(e.toUrl(t,null,"_").replace(/(\.js)?(\?.*)?$/,""))})}try{this.$worker=new Worker(i)}catch(a){if(!(a instanceof window.DOMException))throw a;var f=this.$workerBlob(i),l=window.URL||window.webkitURL,c=l.createObjectURL(f);this.$worker=new Worker(c),l.revokeObjectURL(c)}this.$worker.postMessage({init:!0,tlns:u,module:n,classname:r}),this.callbackId=1,this.callbacks={},this.$worker.onmessage=this.onMessage};(function(){r.implement(this,i),this.onMessage=function(e){var t=e.data;switch(t.type){case"log":window.console&&console.log&&console.log.apply(console,t.data);break;case"event":this._signal(t.name,{data:t.data});break;case"call":var n=this.callbacks[t.id];n&&(n(t.data),delete this.callbacks[t.id])}},this.$normalizePath=function(e){return location.host?(e=e.replace(/^[a-z]+:\/\/[^\/]+/,""),e=location.protocol+"//"+location.host+(e.charAt(0)=="/"?"":location.pathname.replace(/\/[^\/]*$/,""))+"/"+e.replace(/^[\/]+/,""),e):e},this.terminate=function(){this._signal("terminate",{}),this.deltaQueue=null,this.$worker.terminate(),this.$worker=null,this.$doc.removeEventListener("change",this.changeListener),this.$doc=null},this.send=function(e,t){this.$worker.postMessage({command:e,args:t})},this.call=function(e,t,n){if(n){var r=this.callbackId++;this.callbacks[r]=n,t.push(r)}this.send(e,t)},this.emit=function(e,t){try{this.$worker.postMessage({event:e,data:{data:t.data}})}catch(n){}},this.attachToDocument=function(e){this.$doc&&this.terminate(),this.$doc=e,this.call("setValue",[e.getValue()]),e.on("change",this.changeListener)},this.changeListener=function(e){this.deltaQueue?this.deltaQueue.push(e.data):(this.deltaQueue=[e.data],setTimeout(this.$sendDeltaQueue,0))},this.$sendDeltaQueue=function(){var e=this.deltaQueue;if(!e)return;this.deltaQueue=null,e.length>20&&e.length>this.$doc.getLength()>>1?this.call("setValue",[this.$doc.getValue()]):this.emit("change",{data:e})},this.$workerBlob=function(e){var t="importScripts('"+e+"');";try{return new Blob([t],{type:"application/javascript"})}catch(n){var r=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder,i=new r;return i.append(t),i.getBlob("application/javascript")}}}).call(o.prototype);var u=function(e,t,n){this.$sendDeltaQueue=this.$sendDeltaQueue.bind(this),this.changeListener=this.changeListener.bind(this),this.callbackId=1,this.callbacks={},this.messageBuffer=[];var r=null,o=!1,u=Object.create(i),a=this;this.$worker={},this.$worker.terminate=function(){},this.$worker.postMessage=function(e){a.messageBuffer.push(e),r&&(o?setTimeout(f):f())},this.setEmitSync=function(e){o=e};var f=function(){var e=a.messageBuffer.shift();e.command?r[e.command].apply(r,e.args):e.event&&u._signal(e.event,e.data)};u.postMessage=function(e){a.onMessage({data:e})},u.callback=function(e,t){this.postMessage({type:"call",id:t,data:e})},u.emit=function(e,t){this.postMessage({type:"event",name:e,data:t})},s.loadModule(["worker",t],function(e){r=new e[n](u);while(a.messageBuffer.length)f()})};u.prototype=o.prototype,t.UIWorkerClient=u,t.WorkerClient=o}),define("ace/lib/keys",["require","exports","module","ace/lib/oop"],function(e,t,n){var r=e("./oop"),i=function(){var e={MODIFIER_KEYS:{16:"Shift",17:"Ctrl",18:"Alt",224:"Meta"},KEY_MODS:{ctrl:1,alt:2,option:2,shift:4,"super":8,meta:8,command:8,cmd:8},FUNCTION_KEYS:{8:"Backspace",9:"Tab",13:"Return",19:"Pause",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"Print",45:"Insert",46:"Delete",96:"Numpad0",97:"Numpad1",98:"Numpad2",99:"Numpad3",100:"Numpad4",101:"Numpad5",102:"Numpad6",103:"Numpad7",104:"Numpad8",105:"Numpad9","-13":"NumpadEnter",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"Numlock",145:"Scrolllock"},PRINTABLE_KEYS:{32:" ",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",59:";",61:"=",65:"a",66:"b",67:"c",68:"d",69:"e",70:"f",71:"g",72:"h",73:"i",74:"j",75:"k",76:"l",77:"m",78:"n",79:"o",80:"p",81:"q",82:"r",83:"s",84:"t",85:"u",86:"v",87:"w",88:"x",89:"y",90:"z",107:"+",109:"-",110:".",188:",",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"}},t,n;for(n in e.FUNCTION_KEYS)t=e.FUNCTION_KEYS[n].toLowerCase(),e[t]=parseInt(n,10);for(n in e.PRINTABLE_KEYS)t=e.PRINTABLE_KEYS[n].toLowerCase(),e[t]=parseInt(n,10);return r.mixin(e,e.MODIFIER_KEYS),r.mixin(e,e.PRINTABLE_KEYS),r.mixin(e,e.FUNCTION_KEYS),e.enter=e["return"],e.escape=e.esc,e.del=e["delete"],e[173]="-",function(){var t=["cmd","ctrl","alt","shift"];for(var n=Math.pow(2,t.length);n--;)e.KEY_MODS[n]=t.filter(function(t){return n&e.KEY_MODS[t]}).join("-")+"-"}(),e}();r.mixin(t,i),t.keyCodeToString=function(e){return(i[e]||String.fromCharCode(e)).toLowerCase()}}),define("ace/placeholder",["require","exports","module","ace/range","ace/lib/event_emitter","ace/lib/oop"],function(e,t,n){var r=e("./range").Range,i=e("./lib/event_emitter").EventEmitter,s=e("./lib/oop"),o=function(e,t,n,r,i,s){var o=this;this.length=t,this.session=e,this.doc=e.getDocument(),this.mainClass=i,this.othersClass=s,this.$onUpdate=this.onUpdate.bind(this),this.doc.on("change",this.$onUpdate),this.$others=r,this.$onCursorChange=function(){setTimeout(function(){o.onCursorChange()})},this.$pos=n;var u=e.getUndoManager().$undoStack||e.getUndoManager().$undostack||{length:-1};this.$undoStackDepth=u.length,this.setup(),e.selection.on("changeCursor",this.$onCursorChange)};(function(){s.implement(this,i),this.setup=function(){var e=this,t=this.doc,n=this.session,i=this.$pos;this.pos=t.createAnchor(i.row,i.column),this.markerId=n.addMarker(new r(i.row,i.column,i.row,i.column+this.length),this.mainClass,null,!1),this.pos.on("change",function(t){n.removeMarker(e.markerId),e.markerId=n.addMarker(new r(t.value.row,t.value.column,t.value.row,t.value.column+e.length),e.mainClass,null,!1)}),this.others=[],this.$others.forEach(function(n){var r=t.createAnchor(n.row,n.column);e.others.push(r)}),n.setUndoSelect(!1)},this.showOtherMarkers=function(){if(this.othersActive)return;var e=this.session,t=this;this.othersActive=!0,this.others.forEach(function(n){n.markerId=e.addMarker(new r(n.row,n.column,n.row,n.column+t.length),t.othersClass,null,!1),n.on("change",function(i){e.removeMarker(n.markerId),n.markerId=e.addMarker(new r(i.value.row,i.value.column,i.value.row,i.value.column+t.length),t.othersClass,null,!1)})})},this.hideOtherMarkers=function(){if(!this.othersActive)return;this.othersActive=!1;for(var e=0;e<this.others.length;e++)this.session.removeMarker(this.others[e].markerId)},this.onUpdate=function(e){var t=e.data,n=t.range;if(n.start.row!==n.end.row)return;if(n.start.row!==this.pos.row)return;if(this.$updating)return;this.$updating=!0;var i=t.action==="insertText"?n.end.column-n.start.column:n.start.column-n.end.column;if(n.start.column>=this.pos.column&&n.start.column<=this.pos.column+this.length+1){var s=n.start.column-this.pos.column;this.length+=i;if(!this.session.$fromUndo){if(t.action==="insertText")for(var o=this.others.length-1;o>=0;o--){var u=this.others[o],a={row:u.row,column:u.column+s};u.row===n.start.row&&n.start.column<u.column&&(a.column+=i),this.doc.insert(a,t.text)}else if(t.action==="removeText")for(var o=this.others.length-1;o>=0;o--){var u=this.others[o],a={row:u.row,column:u.column+s};u.row===n.start.row&&n.start.column<u.column&&(a.column+=i),this.doc.remove(new r(a.row,a.column,a.row,a.column-i))}n.start.column===this.pos.column&&t.action==="insertText"?setTimeout(function(){this.pos.setPosition(this.pos.row,this.pos.column-i);for(var e=0;e<this.others.length;e++){var t=this.others[e],r={row:t.row,column:t.column-i};t.row===n.start.row&&n.start.column<t.column&&(r.column+=i),t.setPosition(r.row,r.column)}}.bind(this),0):n.start.column===this.pos.column&&t.action==="removeText"&&setTimeout(function(){for(var e=0;e<this.others.length;e++){var t=this.others[e];t.row===n.start.row&&n.start.column<t.column&&t.setPosition(t.row,t.column-i)}}.bind(this),0)}this.pos._emit("change",{value:this.pos});for(var o=0;o<this.others.length;o++)this.others[o]._emit("change",{value:this.others[o]})}this.$updating=!1},this.onCursorChange=function(e){if(this.$updating)return;var t=this.session.selection.getCursor();t.row===this.pos.row&&t.column>=this.pos.column&&t.column<=this.pos.column+this.length?(this.showOtherMarkers(),this._emit("cursorEnter",e)):(this.hideOtherMarkers(),this._emit("cursorLeave",e))},this.detach=function(){this.session.removeMarker(this.markerId),this.hideOtherMarkers(),this.doc.removeEventListener("change",this.$onUpdate),this.session.selection.removeEventListener("changeCursor",this.$onCursorChange),this.pos.detach();for(var e=0;e<this.others.length;e++)this.others[e].detach();this.session.setUndoSelect(!0)},this.cancel=function(){if(this.$undoStackDepth===-1)throw Error("Canceling placeholders only supported with undo manager attached to session.");var e=this.session.getUndoManager(),t=(e.$undoStack||e.$undostack).length-this.$undoStackDepth;for(var n=0;n<t;n++)e.undo(!0)}}).call(o.prototype),t.PlaceHolder=o}),define("ace/lib/event",["require","exports","module","ace/lib/keys","ace/lib/useragent"],function(e,t,n){function o(e,t,n){var o=s(t);if(!i.isMac&&u){if(u[91]||u[92])o|=8;if(u.altGr){if((3&o)==3)return;u.altGr=0}if(n===18||n===17){var f=t.location||t.keyLocation;if(n===17&&f===1)a=t.timeStamp;else if(n===18&&o===3&&f===2){var l=-a;a=t.timeStamp,l+=a,l<3&&(u.altGr=!0)}}}if(n in r.MODIFIER_KEYS){switch(r.MODIFIER_KEYS[n]){case"Alt":o=2;break;case"Shift":o=4;break;case"Ctrl":o=1;break;default:o=8}n=-1}o&8&&(n===91||n===93)&&(n=-1);if(!o&&n===13)if(t.location||t.keyLocation===3){e(t,o,-n);if(t.defaultPrevented)return}return!!o||n in r.FUNCTION_KEYS||n in r.PRINTABLE_KEYS?e(t,o,n):!1}var r=e("./keys"),i=e("./useragent");t.addListener=function(e,t,n){if(e.addEventListener)return e.addEventListener(t,n,!1);if(e.attachEvent){var r=function(){n.call(e,window.event)};n._wrapper=r,e.attachEvent("on"+t,r)}},t.removeListener=function(e,t,n){if(e.removeEventListener)return e.removeEventListener(t,n,!1);e.detachEvent&&e.detachEvent("on"+t,n._wrapper||n)},t.stopEvent=function(e){return t.stopPropagation(e),t.preventDefault(e),!1},t.stopPropagation=function(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0},t.preventDefault=function(e){e.preventDefault?e.preventDefault():e.returnValue=!1},t.getButton=function(e){return e.type=="dblclick"?0:e.type=="contextmenu"||e.ctrlKey&&i.isMac?2:e.preventDefault?e.button:{1:0,2:2,4:1}[e.button]},t.capture=function(e,n,r){function i(e){n&&n(e),r&&r(e),t.removeListener(document,"mousemove",n,!0),t.removeListener(document,"mouseup",i,!0),t.removeListener(document,"dragstart",i,!0)}return t.addListener(document,"mousemove",n,!0),t.addListener(document,"mouseup",i,!0),t.addListener(document,"dragstart",i,!0),i},t.addMouseWheelListener=function(e,n){"onmousewheel"in e?t.addListener(e,"mousewheel",function(e){var t=8;e.wheelDeltaX!==undefined?(e.wheelX=-e.wheelDeltaX/t,e.wheelY=-e.wheelDeltaY/t):(e.wheelX=0,e.wheelY=-e.wheelDelta/t),n(e)}):"onwheel"in e?t.addListener(e,"wheel",function(e){var t=.35;switch(e.deltaMode){case e.DOM_DELTA_PIXEL:e.wheelX=e.deltaX*t||0,e.wheelY=e.deltaY*t||0;break;case e.DOM_DELTA_LINE:case e.DOM_DELTA_PAGE:e.wheelX=(e.deltaX||0)*5,e.wheelY=(e.deltaY||0)*5}n(e)}):t.addListener(e,"DOMMouseScroll",function(e){e.axis&&e.axis==e.HORIZONTAL_AXIS?(e.wheelX=(e.detail||0)*5,e.wheelY=0):(e.wheelX=0,e.wheelY=(e.detail||0)*5),n(e)})},t.addMultiMouseDownListener=function(e,n,r,s){var o=0,u,a,f,l={2:"dblclick",3:"tripleclick",4:"quadclick"};t.addListener(e,"mousedown",function(e){t.getButton(e)!==0?o=0:e.detail>1?(o++,o>4&&(o=1)):o=1;if(i.isIE){var n=Math.abs(e.clientX-u)>5||Math.abs(e.clientY-a)>5;n&&(o=1),o==1&&(u=e.clientX,a=e.clientY)}r[s]("mousedown",e);if(o>4)o=0;else if(o>1)return r[s](l[o],e)}),i.isOldIE&&t.addListener(e,"dblclick",function(e){o=2,f&&clearTimeout(f),f=setTimeout(function(){f=null},n[o-1]||600),r[s]("mousedown",e),r[s](l[o],e)})};var s=!i.isMac||!i.isOpera||"KeyboardEvent"in window?function(e){return 0|(e.ctrlKey?1:0)|(e.altKey?2:0)|(e.shiftKey?4:0)|(e.metaKey?8:0)}:function(e){return 0|(e.metaKey?1:0)|(e.altKey?2:0)|(e.shiftKey?4:0)|(e.ctrlKey?8:0)};t.getModifierString=function(e){return r.KEY_MODS[s(e)]};var u=null,a=0;t.addCommandKeyListener=function(e,n){var r=t.addListener;if(i.isOldGecko||i.isOpera&&!("KeyboardEvent"in window)){var s=null;r(e,"keydown",function(e){s=e.keyCode}),r(e,"keypress",function(e){return o(n,e,s)})}else{var a=null;r(e,"keydown",function(e){u[e.keyCode]=!0;var t=o(n,e,e.keyCode);return a=e.defaultPrevented,t}),r(e,"keypress",function(e){a&&(e.ctrlKey||e.altKey||e.shiftKey||e.metaKey)&&(t.stopEvent(e),a=null)}),r(e,"keyup",function(e){u[e.keyCode]=null}),u||(u=Object.create(null),r(window,"focus",function(e){u=Object.create(null)}))}};if(window.postMessage&&!i.isOldIE){var f=1;t.nextTick=function(e,n){n=n||window;var r="zero-timeout-message-"+f;t.addListener(n,"message",function i(s){s.data==r&&(t.stopPropagation(s),t.removeListener(n,"message",i),e())}),n.postMessage(r,"*")}}t.nextFrame=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame||window.oRequestAnimationFrame,t.nextFrame?t.nextFrame=t.nextFrame.bind(window):t.nextFrame=function(e){setTimeout(e,17)}}),define("ace/mode/folding/fold_mode",["require","exports","module","ace/range"],function(e,t,n){var r=e("../../range").Range,i=t.FoldMode=function(){};(function(){this.foldingStartMarker=null,this.foldingStopMarker=null,this.getFoldWidget=function(e,t,n){var r=e.getLine(n);return this.foldingStartMarker.test(r)?"start":t=="markbeginend"&&this.foldingStopMarker&&this.foldingStopMarker.test(r)?"end":""},this.getFoldWidgetRange=function(e,t,n){return null},this.indentationBlock=function(e,t,n){var i=/\S/,s=e.getLine(t),o=s.search(i);if(o==-1)return;var u=n||s.length,a=e.getLength(),f=t,l=t;while(++t<a){var c=e.getLine(t).search(i);if(c==-1)continue;if(c<=o)break;l=t}if(l>f){var h=e.getLine(l).length;return new r(f,u,l,h)}},this.openingBracketBlock=function(e,t,n,i,s){var o={row:n,column:i+1},u=e.$findClosingBracket(t,o,s);if(!u)return;var a=e.foldWidgets[u.row];return a==null&&(a=e.getFoldWidget(u.row)),a=="start"&&u.row>o.row&&(u.row--,u.column=e.getLine(u.row).length),r.fromPoints(o,u)},this.closingBracketBlock=function(e,t,n,i,s){var o={row:n,column:i},u=e.$findOpeningBracket(t,o);if(!u)return;return u.column++,o.column--,r.fromPoints(u,o)}}).call(i.prototype)}),define("ace/lib/dom",["require","exports","module"],function(e,t,n){if(typeof document=="undefined")return;var r="http://www.w3.org/1999/xhtml";t.getDocumentHead=function(e){return e||(e=document),e.head||e.getElementsByTagName("head")[0]||e.documentElement},t.createElement=function(e,t){return document.createElementNS?document.createElementNS(t||r,e):document.createElement(e)},t.hasCssClass=function(e,t){var n=e.className.split(/\s+/g);return n.indexOf(t)!==-1},t.addCssClass=function(e,n){t.hasCssClass(e,n)||(e.className+=" "+n)},t.removeCssClass=function(e,t){var n=e.className.split(/\s+/g);for(;;){var r=n.indexOf(t);if(r==-1)break;n.splice(r,1)}e.className=n.join(" ")},t.toggleCssClass=function(e,t){var n=e.className.split(/\s+/g),r=!0;for(;;){var i=n.indexOf(t);if(i==-1)break;r=!1,n.splice(i,1)}return r&&n.push(t),e.className=n.join(" "),r},t.setCssClass=function(e,n,r){r?t.addCssClass(e,n):t.removeCssClass(e,n)},t.hasCssString=function(e,t){var n=0,r;t=t||document;if(t.createStyleSheet&&(r=t.styleSheets)){while(n<r.length)if(r[n++].owningElement.id===e)return!0}else if(r=t.getElementsByTagName("style"))while(n<r.length)if(r[n++].id===e)return!0;return!1},t.importCssString=function(n,i,s){s=s||document;if(i&&t.hasCssString(i,s))return null;var o;s.createStyleSheet?(o=s.createStyleSheet(),o.cssText=n,i&&(o.owningElement.id=i)):(o=s.createElementNS?s.createElementNS(r,"style"):s.createElement("style"),o.appendChild(s.createTextNode(n)),i&&(o.id=i),t.getDocumentHead(s).appendChild(o))},t.importCssStylsheet=function(e,n){if(n.createStyleSheet)n.createStyleSheet(e);else{var r=t.createElement("link");r.rel="stylesheet",r.href=e,t.getDocumentHead(n).appendChild(r)}},t.getInnerWidth=function(e){return parseInt(t.computedStyle(e,"paddingLeft"),10)+parseInt(t.computedStyle(e,"paddingRight"),10)+e.clientWidth},t.getInnerHeight=function(e){return parseInt(t.computedStyle(e,"paddingTop"),10)+parseInt(t.computedStyle(e,"paddingBottom"),10)+e.clientHeight},window.pageYOffset!==undefined?(t.getPageScrollTop=function(){return window.pageYOffset},t.getPageScrollLeft=function(){return window.pageXOffset}):(t.getPageScrollTop=function(){return document.body.scrollTop},t.getPageScrollLeft=function(){return document.body.scrollLeft}),window.getComputedStyle?t.computedStyle=function(e,t){return t?(window.getComputedStyle(e,"")||{})[t]||"":window.getComputedStyle(e,"")||{}}:t.computedStyle=function(e,t){return t?e.currentStyle[t]:e.currentStyle},t.scrollbarWidth=function(e){var n=t.createElement("ace_inner");n.style.width="100%",n.style.minWidth="0px",n.style.height="200px",n.style.display="block";var r=t.createElement("ace_outer"),i=r.style;i.position="absolute",i.left="-10000px",i.overflow="hidden",i.width="200px",i.minWidth="0px",i.height="150px",i.display="block",r.appendChild(n);var s=e.documentElement;s.appendChild(r);var o=n.offsetWidth;i.overflow="scroll";var u=n.offsetWidth;return o==u&&(u=r.clientWidth),s.removeChild(r),o-u},t.setInnerHtml=function(e,t){var n=e.cloneNode(!1);return n.innerHTML=t,e.parentNode.replaceChild(n,e),n},"textContent"in document.documentElement?(t.setInnerText=function(e,t){e.textContent=t},t.getInnerText=function(e){return e.textContent}):(t.setInnerText=function(e,t){e.innerText=t},t.getInnerText=function(e){return e.innerText}),t.getParentWindow=function(e){return e.defaultView||e.parentWindow}}),define("ace/theme/textmate",["require","exports","module","ace/lib/dom"],function(e,t,n){t.isDark=!1,t.cssClass="ace-tm",t.cssText='.ace-tm .ace_gutter {background: #f0f0f0;color: #333;}.ace-tm .ace_print-margin {width: 1px;background: #e8e8e8;}.ace-tm .ace_fold {background-color: #6B72E6;}.ace-tm {background-color: #FFFFFF;color: black;}.ace-tm .ace_cursor {color: black;}.ace-tm .ace_invisible {color: rgb(191, 191, 191);}.ace-tm .ace_storage,.ace-tm .ace_keyword {color: blue;}.ace-tm .ace_constant {color: rgb(197, 6, 11);}.ace-tm .ace_constant.ace_buildin {color: rgb(88, 72, 246);}.ace-tm .ace_constant.ace_language {color: rgb(88, 92, 246);}.ace-tm .ace_constant.ace_library {color: rgb(6, 150, 14);}.ace-tm .ace_invalid {background-color: rgba(255, 0, 0, 0.1);color: red;}.ace-tm .ace_support.ace_function {color: rgb(60, 76, 114);}.ace-tm .ace_support.ace_constant {color: rgb(6, 150, 14);}.ace-tm .ace_support.ace_type,.ace-tm .ace_support.ace_class {color: rgb(109, 121, 222);}.ace-tm .ace_keyword.ace_operator {color: rgb(104, 118, 135);}.ace-tm .ace_string {color: rgb(3, 106, 7);}.ace-tm .ace_comment {color: rgb(76, 136, 107);}.ace-tm .ace_comment.ace_doc {color: rgb(0, 102, 255);}.ace-tm .ace_comment.ace_doc.ace_tag {color: rgb(128, 159, 191);}.ace-tm .ace_constant.ace_numeric {color: rgb(0, 0, 205);}.ace-tm .ace_variable {color: rgb(49, 132, 149);}.ace-tm .ace_xml-pe {color: rgb(104, 104, 91);}.ace-tm .ace_entity.ace_name.ace_function {color: #0000A2;}.ace-tm .ace_heading {color: rgb(12, 7, 255);}.ace-tm .ace_list {color:rgb(185, 6, 144);}.ace-tm .ace_meta.ace_tag {color:rgb(0, 22, 142);}.ace-tm .ace_string.ace_regex {color: rgb(255, 0, 0)}.ace-tm .ace_marker-layer .ace_selection {background: rgb(181, 213, 255);}.ace-tm.ace_multiselect .ace_selection.ace_start {box-shadow: 0 0 3px 0px white;border-radius: 2px;}.ace-tm .ace_marker-layer .ace_step {background: rgb(252, 255, 0);}.ace-tm .ace_marker-layer .ace_stack {background: rgb(164, 229, 101);}.ace-tm .ace_marker-layer .ace_bracket {margin: -1px 0 0 -1px;border: 1px solid rgb(192, 192, 192);}.ace-tm .ace_marker-layer .ace_active-line {background: rgba(0, 0, 0, 0.07);}.ace-tm .ace_gutter-active-line {background-color : #dcdcdc;}.ace-tm .ace_marker-layer .ace_selected-word {background: rgb(250, 250, 255);border: 1px solid rgb(200, 200, 250);}.ace-tm .ace_indent-guide {background: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAE0lEQVQImWP4////f4bLly//BwAmVgd1/w11/gAAAABJRU5ErkJggg==") right repeat-y;}';var r=e("../lib/dom");r.importCssString(t.cssText,t.cssClass)}),define("ace/lib/es5-shim",["require","exports","module"],function(e,t,n){function r(){}function w(e){try{return Object.defineProperty(e,"sentinel",{}),"sentinel"in e}catch(t){}}function H(e){return e=+e,e!==e?e=0:e!==0&&e!==1/0&&e!==-1/0&&(e=(e>0||-1)*Math.floor(Math.abs(e))),e}function B(e){var t=typeof e;return e===null||t==="undefined"||t==="boolean"||t==="number"||t==="string"}function j(e){var t,n,r;if(B(e))return e;n=e.valueOf;if(typeof n=="function"){t=n.call(e);if(B(t))return t}r=e.toString;if(typeof r=="function"){t=r.call(e);if(B(t))return t}throw new TypeError}Function.prototype.bind||(Function.prototype.bind=function(t){var n=this;if(typeof n!="function")throw new TypeError("Function.prototype.bind called on incompatible "+n);var i=u.call(arguments,1),s=function(){if(this instanceof s){var e=n.apply(this,i.concat(u.call(arguments)));return Object(e)===e?e:this}return n.apply(t,i.concat(u.call(arguments)))};return n.prototype&&(r.prototype=n.prototype,s.prototype=new r,r.prototype=null),s});var i=Function.prototype.call,s=Array.prototype,o=Object.prototype,u=s.slice,a=i.bind(o.toString),f=i.bind(o.hasOwnProperty),l,c,h,p,d;if(d=f(o,"__defineGetter__"))l=i.bind(o.__defineGetter__),c=i.bind(o.__defineSetter__),h=i.bind(o.__lookupGetter__),p=i.bind(o.__lookupSetter__);if([1,2].splice(0).length!=2)if(!function(){function e(e){var t=new Array(e+2);return t[0]=t[1]=0,t}var t=[],n;t.splice.apply(t,e(20)),t.splice.apply(t,e(26)),n=t.length,t.splice(5,0,"XXX"),n+1==t.length;if(n+1==t.length)return!0}())Array.prototype.splice=function(e,t){var n=this.length;e>0?e>n&&(e=n):e==void 0?e=0:e<0&&(e=Math.max(n+e,0)),e+t<n||(t=n-e);var r=this.slice(e,e+t),i=u.call(arguments,2),s=i.length;if(e===n)s&&this.push.apply(this,i);else{var o=Math.min(t,n-e),a=e+o,f=a+s-o,l=n-a,c=n-o;if(f<a)for(var h=0;h<l;++h)this[f+h]=this[a+h];else if(f>a)for(h=l;h--;)this[f+h]=this[a+h];if(s&&e===c)this.length=c,this.push.apply(this,i);else{this.length=c+s;for(h=0;h<s;++h)this[e+h]=i[h]}}return r};else{var v=Array.prototype.splice;Array.prototype.splice=function(e,t){return arguments.length?v.apply(this,[e===void 0?0:e,t===void 0?this.length-e:t].concat(u.call(arguments,2))):[]}}Array.isArray||(Array.isArray=function(t){return a(t)=="[object Array]"});var m=Object("a"),g=m[0]!="a"||!(0 in m);Array.prototype.forEach||(Array.prototype.forEach=function(t){var n=F(this),r=g&&a(this)=="[object String]"?this.split(""):n,i=arguments[1],s=-1,o=r.length>>>0;if(a(t)!="[object Function]")throw new TypeError;while(++s<o)s in r&&t.call(i,r[s],s,n)}),Array.prototype.map||(Array.prototype.map=function(t){var n=F(this),r=g&&a(this)=="[object String]"?this.split(""):n,i=r.length>>>0,s=Array(i),o=arguments[1];if(a(t)!="[object Function]")throw new TypeError(t+" is not a function");for(var u=0;u<i;u++)u in r&&(s[u]=t.call(o,r[u],u,n));return s}),Array.prototype.filter||(Array.prototype.filter=function(t){var n=F(this),r=g&&a(this)=="[object String]"?this.split(""):n,i=r.length>>>0,s=[],o,u=arguments[1];if(a(t)!="[object Function]")throw new TypeError(t+" is not a function");for(var f=0;f<i;f++)f in r&&(o=r[f],t.call(u,o,f,n)&&s.push(o));return s}),Array.prototype.every||(Array.prototype.every=function(t){var n=F(this),r=g&&a(this)=="[object String]"?this.split(""):n,i=r.length>>>0,s=arguments[1];if(a(t)!="[object Function]")throw new TypeError(t+" is not a function");for(var o=0;o<i;o++)if(o in r&&!t.call(s,r[o],o,n))return!1;return!0}),Array.prototype.some||(Array.prototype.some=function(t){var n=F(this),r=g&&a(this)=="[object String]"?this.split(""):n,i=r.length>>>0,s=arguments[1];if(a(t)!="[object Function]")throw new TypeError(t+" is not a function");for(var o=0;o<i;o++)if(o in r&&t.call(s,r[o],o,n))return!0;return!1}),Array.prototype.reduce||(Array.prototype.reduce=function(t){var n=F(this),r=g&&a(this)=="[object String]"?this.split(""):n,i=r.length>>>0;if(a(t)!="[object Function]")throw new TypeError(t+" is not a function");if(!i&&arguments.length==1)throw new TypeError("reduce of empty array with no initial value");var s=0,o;if(arguments.length>=2)o=arguments[1];else do{if(s in r){o=r[s++];break}if(++s>=i)throw new TypeError("reduce of empty array with no initial value")}while(!0);for(;s<i;s++)s in r&&(o=t.call(void 0,o,r[s],s,n));return o}),Array.prototype.reduceRight||(Array.prototype.reduceRight=function(t){var n=F(this),r=g&&a(this)=="[object String]"?this.split(""):n,i=r.length>>>0;if(a(t)!="[object Function]")throw new TypeError(t+" is not a function");if(!i&&arguments.length==1)throw new TypeError("reduceRight of empty array with no initial value");var s,o=i-1;if(arguments.length>=2)s=arguments[1];else do{if(o in r){s=r[o--];break}if(--o<0)throw new TypeError("reduceRight of empty array with no initial value")}while(!0);do o in this&&(s=t.call(void 0,s,r[o],o,n));while(o--);return s});if(!Array.prototype.indexOf||[0,1].indexOf(1,2)!=-1)Array.prototype.indexOf=function(t){var n=g&&a(this)=="[object String]"?this.split(""):F(this),r=n.length>>>0;if(!r)return-1;var i=0;arguments.length>1&&(i=H(arguments[1])),i=i>=0?i:Math.max(0,r+i);for(;i<r;i++)if(i in n&&n[i]===t)return i;return-1};if(!Array.prototype.lastIndexOf||[0,1].lastIndexOf(0,-3)!=-1)Array.prototype.lastIndexOf=function(t){var n=g&&a(this)=="[object String]"?this.split(""):F(this),r=n.length>>>0;if(!r)return-1;var i=r-1;arguments.length>1&&(i=Math.min(i,H(arguments[1]))),i=i>=0?i:r-Math.abs(i);for(;i>=0;i--)if(i in n&&t===n[i])return i;return-1};Object.getPrototypeOf||(Object.getPrototypeOf=function(t){return t.__proto__||(t.constructor?t.constructor.prototype:o)});if(!Object.getOwnPropertyDescriptor){var y="Object.getOwnPropertyDescriptor called on a non-object: ";Object.getOwnPropertyDescriptor=function(t,n){if(typeof t!="object"&&typeof t!="function"||t===null)throw new TypeError(y+t);if(!f(t,n))return;var r,i,s;r={enumerable:!0,configurable:!0};if(d){var u=t.__proto__;t.__proto__=o;var i=h(t,n),s=p(t,n);t.__proto__=u;if(i||s)return i&&(r.get=i),s&&(r.set=s),r}return r.value=t[n],r}}Object.getOwnPropertyNames||(Object.getOwnPropertyNames=function(t){return Object.keys(t)});if(!Object.create){var b;Object.prototype.__proto__===null?b=function(){return{__proto__:null}}:b=function(){var e={};for(var t in e)e[t]=null;return e.constructor=e.hasOwnProperty=e.propertyIsEnumerable=e.isPrototypeOf=e.toLocaleString=e.toString=e.valueOf=e.__proto__=null,e},Object.create=function(t,n){var r;if(t===null)r=b();else{if(typeof t!="object")throw new TypeError("typeof prototype["+typeof t+"] != 'object'");var i=function(){};i.prototype=t,r=new i,r.__proto__=t}return n!==void 0&&Object.defineProperties(r,n),r}}if(Object.defineProperty){var E=w({}),S=typeof document=="undefined"||w(document.createElement("div"));if(!E||!S)var x=Object.defineProperty}if(!Object.defineProperty||x){var T="Property description must be an object: ",N="Object.defineProperty called on non-object: ",C="getters & setters can not be defined on this javascript engine";Object.defineProperty=function(t,n,r){if(typeof t!="object"&&typeof t!="function"||t===null)throw new TypeError(N+t);if(typeof r!="object"&&typeof r!="function"||r===null)throw new TypeError(T+r);if(x)try{return x.call(Object,t,n,r)}catch(i){}if(f(r,"value"))if(d&&(h(t,n)||p(t,n))){var s=t.__proto__;t.__proto__=o,delete t[n],t[n]=r.value,t.__proto__=s}else t[n]=r.value;else{if(!d)throw new TypeError(C);f(r,"get")&&l(t,n,r.get),f(r,"set")&&c(t,n,r.set)}return t}}Object.defineProperties||(Object.defineProperties=function(t,n){for(var r in n)f(n,r)&&Object.defineProperty(t,r,n[r]);return t}),Object.seal||(Object.seal=function(t){return t}),Object.freeze||(Object.freeze=function(t){return t});try{Object.freeze(function(){})}catch(k){Object.freeze=function(t){return function(n){return typeof n=="function"?n:t(n)}}(Object.freeze)}Object.preventExtensions||(Object.preventExtensions=function(t){return t}),Object.isSealed||(Object.isSealed=function(t){return!1}),Object.isFrozen||(Object.isFrozen=function(t){return!1}),Object.isExtensible||(Object.isExtensible=function(t){if(Object(t)===t)throw new TypeError;var n="";while(f(t,n))n+="?";t[n]=!0;var r=f(t,n);return delete t[n],r});if(!Object.keys){var L=!0,A=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],O=A.length;for(var M in{toString:null})L=!1;Object.keys=function I(e){if(typeof e!="object"&&typeof e!="function"||e===null)throw new TypeError("Object.keys called on a non-object");var I=[];for(var t in e)f(e,t)&&I.push(t);if(L)for(var n=0,r=O;n<r;n++){var i=A[n];f(e,i)&&I.push(i)}return I}}Date.now||(Date.now=function(){return(new Date).getTime()});var _="	\n\f\r \u2028\u2029";if(!String.prototype.trim||_.trim()){_="["+_+"]";var D=new RegExp("^"+_+_+"*"),P=new RegExp(_+_+"*$");String.prototype.trim=function(){return String(this).replace(D,"").replace(P,"")}}var F=function(e){if(e==null)throw new TypeError("can't convert "+e+" to object");return Object(e)}}),define("ace/lib/regexp",["require","exports","module"],function(e,t,n){function o(e){return(e.global?"g":"")+(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.extended?"x":"")+(e.sticky?"y":"")}function u(e,t,n){if(Array.prototype.indexOf)return e.indexOf(t,n);for(var r=n||0;r<e.length;r++)if(e[r]===t)return r;return-1}var r={exec:RegExp.prototype.exec,test:RegExp.prototype.test,match:String.prototype.match,replace:String.prototype.replace,split:String.prototype.split},i=r.exec.call(/()??/,"")[1]===undefined,s=function(){var e=/^/g;return r.test.call(e,""),!e.lastIndex}();if(s&&i)return;RegExp.prototype.exec=function(e){var t=r.exec.apply(this,arguments),n,a;if(typeof e=="string"&&t){!i&&t.length>1&&u(t,"")>-1&&(a=RegExp(this.source,r.replace.call(o(this),"g","")),r.replace.call(e.slice(t.index),a,function(){for(var e=1;e<arguments.length-2;e++)arguments[e]===undefined&&(t[e]=undefined)}));if(this._xregexp&&this._xregexp.captureNames)for(var f=1;f<t.length;f++)n=this._xregexp.captureNames[f-1],n&&(t[n]=t[f]);!s&&this.global&&!t[0].length&&this.lastIndex>t.index&&this.lastIndex--}return t},s||(RegExp.prototype.test=function(e){var t=r.exec.call(this,e);return t&&this.global&&!t[0].length&&this.lastIndex>t.index&&this.lastIndex--,!!t})}),define("ace/ext/error_marker",["require","exports","module","ace/line_widgets","ace/lib/dom","ace/range"],function(e,t,n){function o(e,t,n){var r=0,i=e.length-1;while(r<=i){var s=r+i>>1,o=n(t,e[s]);if(o>0)r=s+1;else{if(!(o<0))return s;i=s-1}}return-(r+1)}function u(e,t,n){var r=e.getAnnotations().sort(s.comparePoints);if(!r.length)return;var i=o(r,{row:t,column:-1},s.comparePoints);i<0&&(i=-i-1),i>=r.length-1?i=n>0?0:r.length-1:i===0&&n<0&&(i=r.length-1);var u=r[i];if(!u||!n)return;if(u.row===t){do u=r[i+=n];while(u&&u.row===t);if(!u)return r.slice()}var a=[];t=u.row;do a[n<0?"unshift":"push"](u),u=r[i+=n];while(u&&u.row==t);return a.length&&a}var r=e("ace/line_widgets").LineWidgets,i=e("ace/lib/dom"),s=e("ace/range").Range;t.showErrorMarker=function(e,t){var n=e.session;n.widgetManager||(n.widgetManager=new r(n),n.widgetManager.attach(e));var s=e.getCursorPosition(),o=s.row,a=n.lineWidgets&&n.lineWidgets[o];a?a.destroy():o-=t;var f=u(n,o,t),l;if(f){var c=f[0];s.column=(c.pos&&typeof c.column!="number"?c.pos.sc:c.column)||0,s.row=c.row,l=e.renderer.$gutterLayer.$annotations[s.row]}else{if(a)return;l={text:["Looks good!"],className:"ace_ok"}}e.session.unfold(s.row),e.selection.moveToPosition(s);var h={row:s.row,fixedWidth:!0,coverGutter:!0,el:i.createElement("div")},p=h.el.appendChild(i.createElement("div")),d=h.el.appendChild(i.createElement("div"));d.className="error_widget_arrow "+l.className;var v=e.renderer.$cursorLayer.getPixelPosition(s).left;d.style.left=v+e.renderer.gutterWidth-5+"px",h.el.className="error_widget_wrapper",p.className="error_widget "+l.className,p.innerHTML=l.text.join("<br>"),p.appendChild(i.createElement("div"));var m=function(e,t,n){if(t===0&&(n==="esc"||n==="return"))return h.destroy(),{command:"null"}};h.destroy=function(){if(e.$mouseHandler.isMousePressed)return;e.keyBinding.removeKeyboardHandler(m),n.widgetManager.removeLineWidget(h),e.off("changeSelection",h.destroy),e.off("changeSession",h.destroy),e.off("mouseup",h.destroy),e.off("change",h.destroy)},e.keyBinding.addKeyboardHandler(m),e.on("changeSelection",h.destroy),e.on("changeSession",h.destroy),e.on("mouseup",h.destroy),e.on("change",h.destroy),e.session.widgetManager.addLineWidget(h),h.el.onmousedown=e.focus.bind(e),e.renderer.scrollCursorIntoView(null,.5,{bottom:h.el.offsetHeight})},i.importCssString("    .error_widget_wrapper {        background: inherit;        color: inherit;        border:none    }    .error_widget {        border-top: solid 2px;        border-bottom: solid 2px;        margin: 5px 0;        padding: 10px 40px;        white-space: pre-wrap;    }    .error_widget.ace_error, .error_widget_arrow.ace_error{        border-color: #ff5a5a    }    .error_widget.ace_warning, .error_widget_arrow.ace_warning{        border-color: #F1D817    }    .error_widget.ace_info, .error_widget_arrow.ace_info{        border-color: #5a5a5a    }    .error_widget.ace_ok, .error_widget_arrow.ace_ok{        border-color: #5aaa5a    }    .error_widget_arrow {        position: absolute;        border: solid 5px;        border-top-color: transparent!important;        border-right-color: transparent!important;        border-left-color: transparent!important;        top: -5px;    }","")}),define("ace/lib/fixoldbrowsers",["require","exports","module","ace/lib/regexp","ace/lib/es5-shim"],function(e,t,n){e("./regexp"),e("./es5-shim")}),define("ace/line_widgets",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/range"],function(e,t,n){function o(e){this.session=e,this.session.widgetManager=this,this.session.getRowLength=this.getRowLength,this.session.$getWidgetScreenLength=this.$getWidgetScreenLength,this.updateOnChange=this.updateOnChange.bind(this),this.renderWidgets=this.renderWidgets.bind(this),this.measureWidgets=this.measureWidgets.bind(this),this.session._changedWidgets=[],this.detach=this.detach.bind(this),this.session.on("change",this.updateOnChange)}var r=e("./lib/oop"),i=e("./lib/dom"),s=e("./range").Range;(function(){this.getRowLength=function(e){var t;return this.lineWidgets?t=this.lineWidgets[e]&&this.lineWidgets[e].rowCount||0:t=0,!this.$useWrapMode||!this.$wrapData[e]?1+t:this.$wrapData[e].length+1+t},this.$getWidgetScreenLength=function(){var e=0;return this.lineWidgets.forEach(function(t){t&&t.rowCount&&(e+=t.rowCount)}),e},this.attach=function(e){e.widgetManager&&e.widgetManager!=this&&e.widgetManager.detach();if(this.editor==e)return;this.detach(),this.editor=e,this.editor.on("changeSession",this.detach),e.widgetManager=this,e.setOption("enableLineWidgets",!0),e.renderer.on("beforeRender",this.measureWidgets),e.renderer.on("afterRender",this.renderWidgets)},this.detach=function(e){if(e&&e.session==this.session)return;var t=this.editor;if(!t)return;t.off("changeSession",this.detach),this.editor=null,t.widgetManager=null,t.renderer.off("beforeRender",this.measureWidgets),t.renderer.off("afterRender",this.renderWidgets);var n=this.session.lineWidgets;n&&n.forEach(function(e){e&&e.el&&e.el.parentNode&&(e._inDocument=!1,e.el.parentNode.removeChild(e.el))})},this.updateOnChange=function(e){var t=this.session.lineWidgets;if(!t)return;var n=e.data,r=n.range,i=r.start.row,s=r.end.row-i;if(s!==0)if(n.action=="removeText"||n.action=="removeLines"){var o=t.splice(i+1,s);o.forEach(function(e){e&&this.removeLineWidget(e)},this),this.$updateRows()}else{var u=new Array(s);u.unshift(i,0),t.splice.apply(t,u),this.$updateRows()}},this.$updateRows=function(){var e=this.session.lineWidgets;if(!e)return;var t=!0;e.forEach(function(e,n){e&&(t=!1,e.row=n)}),t&&(this.session.lineWidgets=null)},this.addLineWidget=function(e){this.session.lineWidgets||(this.session.lineWidgets=new Array(this.session.getLength())),this.session.lineWidgets[e.row]=e;var t=this.editor.renderer;return e.html&&!e.el&&(e.el=i.createElement("div"),e.el.innerHTML=e.html),e.el&&(i.addCssClass(e.el,"ace_lineWidgetContainer"),e.el.style.position="absolute",e.el.style.zIndex=5,t.container.appendChild(e.el),e._inDocument=!0),e.coverGutter||(e.el.style.zIndex=3),e.pixelHeight||(e.pixelHeight=e.el.offsetHeight),e.rowCount==null&&(e.rowCount=e.pixelHeight/t.layerConfig.lineHeight),this.session._emit("changeFold",{data:{start:{row:e.row}}}),this.$updateRows(),this.renderWidgets(null,t),e},this.removeLineWidget=function(e){e._inDocument=!1,e.el&&e.el.parentNode&&e.el.parentNode.removeChild(e.el);if(e.editor&&e.editor.destroy)try{e.editor.destroy()}catch(t){}this.session.lineWidgets&&(this.session.lineWidgets[e.row]=undefined),this.session._emit("changeFold",{data:{start:{row:e.row}}}),this.$updateRows()},this.onWidgetChanged=function(e){this.session._changedWidgets.push(e),this.editor&&this.editor.renderer.updateFull()},this.measureWidgets=function(e,t){var n=this.session._changedWidgets,r=t.layerConfig;if(!n||!n.length)return;var i=Infinity;for(var s=0;s<n.length;s++){var o=n[s];o._inDocument||(o._inDocument=!0,t.container.appendChild(o.el)),o.h=o.el.offsetHeight,o.fixedWidth||(o.w=o.el.offsetWidth,o.screenWidth=Math.ceil(o.w/r.characterWidth));var u=o.h/r.lineHeight;o.coverLine&&(u-=this.session.getRowLineCount(o.row),u<0&&(u=0)),o.rowCount!=u&&(o.rowCount=u,o.row<i&&(i=o.row))}i!=Infinity&&(this.session._emit("changeFold",{data:{start:{row:i}}}),this.session.lineWidgetWidth=null),this.session._changedWidgets=[]},this.renderWidgets=function(e,t){var n=t.layerConfig,r=this.session.lineWidgets;if(!r)return;var i=Math.min(this.firstRow,n.firstRow),s=Math.max(this.lastRow,n.lastRow,r.length);while(i>0&&!r[i])i--;this.firstRow=n.firstRow,this.lastRow=n.lastRow,t.$cursorLayer.config=n;for(var o=i;o<=s;o++){var u=r[o];if(!u||!u.el)continue;u._inDocument||(u._inDocument=!0,t.container.appendChild(u.el));var a=t.$cursorLayer.getPixelPosition({row:o,column:0},!0).top;u.coverLine||(a+=n.lineHeight*this.session.getRowLineCount(u.row)),u.el.style.top=a-n.offset+"px";var f=u.coverGutter?0:t.gutterWidth;u.fixedWidth||(f-=t.scrollLeft),u.el.style.left=f+"px",u.fixedWidth?u.el.style.right=t.scrollBar.getWidth()+"px":u.el.style.right=""}}}).call(o.prototype),t.LineWidgets=o}),define("ace/document",["require","exports","module","ace/lib/oop","ace/lib/event_emitter","ace/range","ace/anchor"],function(e,t,n){var r=e("./lib/oop"),i=e("./lib/event_emitter").EventEmitter,s=e("./range").Range,o=e("./anchor").Anchor,u=function(e){this.$lines=[],e.length===0?this.$lines=[""]:Array.isArray(e)?this._insertLines(0,e):this.insert({row:0,column:0},e)};(function(){r.implement(this,i),this.setValue=function(e){var t=this.getLength();this.remove(new s(0,0,t,this.getLine(t-1).length)),this.insert({row:0,column:0},e)},this.getValue=function(){return this.getAllLines().join(this.getNewLineCharacter())},this.createAnchor=function(e,t){return new o(this,e,t)},"aaa".split(/a/).length===0?this.$split=function(e){return e.replace(/\r\n|\r/g,"\n").split("\n")}:this.$split=function(e){return e.split(/\r\n|\r|\n/)},this.$detectNewLine=function(e){var t=e.match(/^.*?(\r\n|\r|\n)/m);this.$autoNewLine=t?t[1]:"\n",this._signal("changeNewLineMode")},this.getNewLineCharacter=function(){switch(this.$newLineMode){case"windows":return"\r\n";case"unix":return"\n";default:return this.$autoNewLine||"\n"}},this.$autoNewLine="",this.$newLineMode="auto",this.setNewLineMode=function(e){if(this.$newLineMode===e)return;this.$newLineMode=e,this._signal("changeNewLineMode")},this.getNewLineMode=function(){return this.$newLineMode},this.isNewLine=function(e){return e=="\r\n"||e=="\r"||e=="\n"},this.getLine=function(e){return this.$lines[e]||""},this.getLines=function(e,t){return this.$lines.slice(e,t+1)},this.getAllLines=function(){return this.getLines(0,this.getLength())},this.getLength=function(){return this.$lines.length},this.getTextRange=function(e){if(e.start.row==e.end.row)return this.getLine(e.start.row).substring(e.start.column,e.end.column);var t=this.getLines(e.start.row,e.end.row);t[0]=(t[0]||"").substring(e.start.column);var n=t.length-1;return e.end.row-e.start.row==n&&(t[n]=t[n].substring(0,e.end.column)),t.join(this.getNewLineCharacter())},this.$clipPosition=function(e){var t=this.getLength();return e.row>=t?(e.row=Math.max(0,t-1),e.column=this.getLine(t-1).length):e.row<0&&(e.row=0),e},this.insert=function(e,t){if(!t||t.length===0)return e;e=this.$clipPosition(e),this.getLength()<=1&&this.$detectNewLine(t);var n=this.$split(t),r=n.splice(0,1)[0],i=n.length==0?null:n.splice(n.length-1,1)[0];return e=this.insertInLine(e,r),i!==null&&(e=this.insertNewLine(e),e=this._insertLines(e.row,n),e=this.insertInLine(e,i||"")),e},this.insertLines=function(e,t){return e>=this.getLength()?this.insert({row:e,column:0},"\n"+t.join("\n")):this._insertLines(Math.max(e,0),t)},this._insertLines=function(e,t){if(t.length==0)return{row:e,column:0};while(t.length>61440){var n=this._insertLines(e,t.slice(0,61440));t=t.slice(61440),e=n.row}var r=[e,0];r.push.apply(r,t),this.$lines.splice.apply(this.$lines,r);var i=new s(e,0,e+t.length,0),o={action:"insertLines",range:i,lines:t};return this._signal("change",{data:o}),i.end},this.insertNewLine=function(e){e=this.$clipPosition(e);var t=this.$lines[e.row]||"";this.$lines[e.row]=t.substring(0,e.column),this.$lines.splice(e.row+1,0,t.substring(e.column,t.length));var n={row:e.row+1,column:0},r={action:"insertText",range:s.fromPoints(e,n),text:this.getNewLineCharacter()};return this._signal("change",{data:r}),n},this.insertInLine=function(e,t){if(t.length==0)return e;var n=this.$lines[e.row]||"";this.$lines[e.row]=n.substring(0,e.column)+t+n.substring(e.column);var r={row:e.row,column:e.column+t.length},i={action:"insertText",range:s.fromPoints(e,r),text:t};return this._signal("change",{data:i}),r},this.remove=function(e){e instanceof s||(e=s.fromPoints(e.start,e.end)),e.start=this.$clipPosition(e.start),e.end=this.$clipPosition(e.end);if(e.isEmpty())return e.start;var t=e.start.row,n=e.end.row;if(e.isMultiLine()){var r=e.start.column==0?t:t+1,i=n-1;e.end.column>0&&this.removeInLine(n,0,e.end.column),i>=r&&this._removeLines(r,i),r!=t&&(this.removeInLine(t,e.start.column,this.getLine(t).length),this.removeNewLine(e.start.row))}else this.removeInLine(t,e.start.column,e.end.column);return e.start},this.removeInLine=function(e,t,n){if(t==n)return;var r=new s(e,t,e,n),i=this.getLine(e),o=i.substring(t,n),u=i.substring(0,t)+i.substring(n,i.length);this.$lines.splice(e,1,u);var a={action:"removeText",range:r,text:o};return this._signal("change",{data:a}),r.start},this.removeLines=function(e,t){return e<0||t>=this.getLength()?this.remove(new s(e,0,t+1,0)):this._removeLines(e,t)},this._removeLines=function(e,t){var n=new s(e,0,t+1,0),r=this.$lines.splice(e,t-e+1),i={action:"removeLines",range:n,nl:this.getNewLineCharacter(),lines:r};return this._signal("change",{data:i}),r},this.removeNewLine=function(e){var t=this.getLine(e),n=this.getLine(e+1),r=new s(e,t.length,e+1,0),i=t+n;this.$lines.splice(e,2,i);var o={action:"removeText",range:r,text:this.getNewLineCharacter()};this._signal("change",{data:o})},this.replace=function(e,t){e instanceof s||(e=s.fromPoints(e.start,e.end));if(t.length==0&&e.isEmpty())return e.start;if(t==this.getTextRange(e))return e.end;this.remove(e);if(t)var n=this.insert(e.start,t);else n=e.start;return n},this.applyDeltas=function(e){for(var t=0;t<e.length;t++){var n=e[t],r=s.fromPoints(n.range.start,n.range.end);n.action=="insertLines"?this.insertLines(r.start.row,n.lines):n.action=="insertText"?this.insert(r.start,n.text):n.action=="removeLines"?this._removeLines(r.start.row,r.end.row-1):n.action=="removeText"&&this.remove(r)}},this.revertDeltas=function(e){for(var t=e.length-1;t>=0;t--){var n=e[t],r=s.fromPoints(n.range.start,n.range.end);n.action=="insertLines"?this._removeLines(r.start.row,r.end.row-1):n.action=="insertText"?this.remove(r):n.action=="removeLines"?this._insertLines(r.start.row,n.lines):n.action=="removeText"&&this.insert(r.start,n.text)}},this.indexToPosition=function(e,t){var n=this.$lines||this.getAllLines(),r=this.getNewLineCharacter().length;for(var i=t||0,s=n.length;i<s;i++){e-=n[i].length+r;if(e<0)return{row:i,column:e+n[i].length+r}}return{row:s-1,column:n[s-1].length}},this.positionToIndex=function(e,t){var n=this.$lines||this.getAllLines(),r=this.getNewLineCharacter().length,i=0,s=Math.min(e.row,n.length);for(var o=t||0;o<s;++o)i+=n[o].length+r;return i+e.column}}).call(u.prototype),t.Document=u}),function(){window.require(["ace/ace"],function(e){e&&e.config.init(!0),window.ace||(window.ace=e);for(var t in e)e.hasOwnProperty(t)&&(ace[t]=e[t])})}(),define("ace",function(){}),define("ace/theme/monokai",["require","exports","module","ace/lib/dom"],function(e,t,n){t.isDark=!0,t.cssClass="ace-monokai",t.cssText=".ace-monokai .ace_gutter {background: #2F3129;color: #8F908A}.ace-monokai .ace_print-margin {width: 1px;background: #555651}.ace-monokai {background-color: #272822;color: #F8F8F2}.ace-monokai .ace_cursor {color: #F8F8F0}.ace-monokai .ace_marker-layer .ace_selection {background: #49483E}.ace-monokai.ace_multiselect .ace_selection.ace_start {box-shadow: 0 0 3px 0px #272822;border-radius: 2px}.ace-monokai .ace_marker-layer .ace_step {background: rgb(102, 82, 0)}.ace-monokai .ace_marker-layer .ace_bracket {margin: -1px 0 0 -1px;border: 1px solid #49483E}.ace-monokai .ace_marker-layer .ace_active-line {background: #202020}.ace-monokai .ace_gutter-active-line {background-color: #272727}.ace-monokai .ace_marker-layer .ace_selected-word {border: 1px solid #49483E}.ace-monokai .ace_invisible {color: #52524d}.ace-monokai .ace_entity.ace_name.ace_tag,.ace-monokai .ace_keyword,.ace-monokai .ace_meta.ace_tag,.ace-monokai .ace_storage {color: #F92672}.ace-monokai .ace_punctuation,.ace-monokai .ace_punctuation.ace_tag {color: #fff}.ace-monokai .ace_constant.ace_character,.ace-monokai .ace_constant.ace_language,.ace-monokai .ace_constant.ace_numeric,.ace-monokai .ace_constant.ace_other {color: #AE81FF}.ace-monokai .ace_invalid {color: #F8F8F0;background-color: #F92672}.ace-monokai .ace_invalid.ace_deprecated {color: #F8F8F0;background-color: #AE81FF}.ace-monokai .ace_support.ace_constant,.ace-monokai .ace_support.ace_function {color: #66D9EF}.ace-monokai .ace_fold {background-color: #A6E22E;border-color: #F8F8F2}.ace-monokai .ace_storage.ace_type,.ace-monokai .ace_support.ace_class,.ace-monokai .ace_support.ace_type {font-style: italic;color: #66D9EF}.ace-monokai .ace_entity.ace_name.ace_function,.ace-monokai .ace_entity.ace_other,.ace-monokai .ace_entity.ace_other.ace_attribute-name,.ace-monokai .ace_variable {color: #A6E22E}.ace-monokai .ace_variable.ace_parameter {font-style: italic;color: #FD971F}.ace-monokai .ace_string {color: #E6DB74}.ace-monokai .ace_comment {color: #75715E}.ace-monokai .ace_indent-guide {background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAEklEQVQImWPQ0FD0ZXBzd/wPAAjVAoxeSgNeAAAAAElFTkSuQmCC) right repeat-y}";var r=e("../lib/dom");r.importCssString(t.cssText,t.cssClass)}),define("ace-theme-monokai",function(){}),define("ace-mode-text",function(){}),define("mockup-patterns-ace",["jquery","mockup-patterns-base","mockup-utils","ace","ace-theme-monokai","ace-mode-text"],function(e,t,n,r){var i=t.extend({name:"ace",defaults:{theme:null,mode:"text",width:500,height:200,tabSize:4,softTabs:!0,wrapMode:!1,showGutter:!0,showPrintMargin:!1,readOnly:!1},init:function(){var t=this,i=n.setId(t.$el);t.$wrapper=e("<div/>").css({height:t.options.height+25,width:t.options.width,position:"relative"}),t.$el.wrap(t.$wrapper),t.$el.css({width:t.options.width,height:t.options.height,position:"absolute"}),t.editor=r.edit(i),t.options.theme&&t.setTheme(t.options.theme),t.editor.getSession().setMode("ace/mode/"+t.options.mode),t.editor.getSession().setTabSize(parseInt(t.options.tabSize,10)),t.editor.getSession().setUseSoftTabs(n.bool(t.options.softTabs)),t.editor.getSession().setUseWrapMode(n.bool(t.options.wrapMode)),t.editor.renderer.setShowGutter(n.bool(t.options.showGutter)),t.editor.setShowPrintMargin(n.bool(t.options.showPrintMargin)),t.editor.setReadOnly(n.bool(t.options.readOnly))},setTheme:function(e){var t=this;t.editor.setTheme("ace/theme/"+e)}});return i}),define("text!js/patterns/ace.js",[],function(){return"/* Ace editor pattern\n *\n * Options:\n *    theme(string): Theme to use with editor. defaults to whatever it ships with. (null)\n *    mode(string): What type of syntax is it? ('text')\n *    width(integer): Width of the editor. (500)\n *    height(integer): Height of the editor. (200)\n *    tabSize(integer): TODO (4)\n *    softTabs(boolean): Use spaces for tabs. (true)\n *    wrapMode(boolean): Wrap text. (false)\n *    showGutter(boolean): TODO (true),\n *    showPrintMargin(boolean): Show print margin. (false)\n *    readOnly(boolean): Read only editor. (false)\n *\n * Documentation:\n *    # Default\n *\n *    {{ example-1 }}\n *\n *    # Different theme\n *\n *    {{ example-2 }}\n *\n *    # Different options\n *\n *    {{ example-3 }}\n *\n * Example: example-1\n *    <pre class=\"pat-ace\" data-pat-ace=\"theme:clouds\">\n *    foobar\n *    </pre>\n *\n * Example: example-2\n *    <pre class=\"pat-ace\" data-pat-ace=\"mode:javascript;theme:dawn;\">\n *    var foo = 'bar';\n *    function foobar() {\n *      return foo;\n *    }\n *    </pre>\n *\n * Example: example-3\n *    <pre class=\"pat-ace\"\n *         data-pat-ace=\"mode:javascript;\n *                       theme:ambiance;\n *                       tabSize:2;\n *                       showGutter:false;\n *                       showPrintMargin:true;\">\n *    var foo = 'bar';\n *    function foobar() {\n *      return foo;\n *    }\n *    </pre>\n *\n * License:\n *    Copyright (C) 2010 Plone Foundation\n *\n *    This program is free software; you can redistribute it and/or modify it\n *    under the terms of the GNU General Public License as published by the\n *    Free Software Foundation; either version 2 of the License.\n *\n *    This program is distributed in the hope that it will be useful, but\n *    WITHOUT ANY WARRANTY; without even the implied warranty of\n *    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General\n *    Public License for more details.\n *\n *    You should have received a copy of the GNU General Public License along\n *    with this program; if not, write to the Free Software Foundation, Inc.,\n *    51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA.\n */\n\n\ndefine([\n  'jquery',\n  'mockup-patterns-base',\n  'mockup-utils',\n  'ace',\n  'ace-theme-monokai',\n  'ace-mode-text'\n], function($, Base, utils, ace) {\n  'use strict';\n\n  var AcePattern = Base.extend({\n    name: 'ace',\n    defaults: {\n      theme: null,\n      mode: 'text',\n      width: 500,\n      height: 200,\n      tabSize: 4,\n      softTabs: true,\n      wrapMode: false,\n      showGutter: true,\n      showPrintMargin: false,\n      readOnly: false\n    },\n    init: function() {\n      var self = this;\n      // set id on current element\n      var id = utils.setId(self.$el);\n      self.$wrapper = $('<div/>').css({\n        height: self.options.height + 25, // weird sizing issue here...\n        width: self.options.width,\n        position: 'relative'\n      });\n      self.$el.wrap(self.$wrapper);\n      self.$el.css({\n        width: self.options.width,\n        height: self.options.height,\n        position: 'absolute'\n      });\n\n      self.editor = ace.edit(id);\n      if (self.options.theme) {\n        self.setTheme(self.options.theme);\n      }\n      self.editor.getSession().setMode('ace/mode/' + self.options.mode);\n      self.editor.getSession().setTabSize(parseInt(self.options.tabSize, 10));\n      self.editor.getSession().setUseSoftTabs(utils.bool(self.options.softTabs));\n      self.editor.getSession().setUseWrapMode(utils.bool(self.options.wrapMode));\n      self.editor.renderer.setShowGutter(utils.bool(self.options.showGutter));\n      self.editor.setShowPrintMargin(utils.bool(self.options.showPrintMargin));\n      self.editor.setReadOnly(utils.bool(self.options.readOnly));\n    },\n    setTheme: function(theme) {\n      var self = this;\n      self.editor.setTheme('ace/theme/' + theme);\n    }\n  });\n\n  return AcePattern;\n\n});\n\n"}),define("mockup-patterns-autotoc",["jquery","mockup-patterns-base"],function(e,t){var n=t.extend({name:"autotoc",defaults:{section:"section",levels:"h1,h2,h3",IDPrefix:"autotoc-item-",classTOCName:"autotoc-nav",classSectionName:"autotoc-section",classLevelPrefixName:"autotoc-level-",classActiveName:"active",scrollDuration:"slow",scrollEasing:"swing"},init:function(){var t=this;t.$toc=e("<nav/>").addClass(t.options.classTOCName),t.options.prependTo?t.$toc.prependTo(t.options.prependTo):t.options.appendTo?t.$toc.appendTo(t.options.appendTo):t.$toc.prependTo(t.$el),t.options.className&&t.$el.addClass(t.options.className),e(t.options.section,t.$el).addClass(t.options.classSectionName);var n=t.$el.hasClass("autotabs");e(t.options.levels,t.$el).each(function(r){var i=e(this),s=i.prop("id")?"#"+i.prop("id"):i.parents(t.options.section).prop("id");s||(s=t.options.IDPrefix+t.name+"-"+r,i.prop("id",s)),e("<a/>").appendTo(t.$toc).text(i.text()).prop("href",s).addClass(t.options.classLevelPrefixName+t.getLevel(i)).on("click",function(r,s){r.stopPropagation(),r.preventDefault(),t.$toc.children("."+t.options.classActiveName).removeClass(t.options.classActiveName),t.$el.children("."+t.options.classActiveName).removeClass(t.options.classActiveName),e(r.target).addClass(t.options.classActiveName),i.parents(t.options.section).addClass(t.options.classActiveName),s!==!1&&t.options.scrollDuration&&i&&!n&&e("body,html").animate({scrollTop:i.offset().top},t.options.scrollDuration,t.options.scrollEasing),t.$el.parents(".modal").size()!==0&&t.$el.trigger("resize.modal.patterns"),e(this).trigger("clicked")})}),t.$toc.find("a").first().trigger("click",!1)},getLevel:function(t){var n=0;return e.each(this.options.levels.split(","),function(e,r){if(t.filter(r).size()===1)return n=e+1,!1}),n}});return n}),define("text!js/patterns/autotoc.js",[],function(){return"/* Autotoc pattern.\n *\n * Options:\n *    IDPrefix(string): Prefix used to generate ID. ('autotoc-item-')\n *    classActiveName(string): Class used for active level. ('active')\n *    classLevelPrefixName(string): Class prefix used for the TOC levels. ('autotoc-level-')\n *    classSectionName(string): Class used for section in TOC. ('autotoc-section')\n *    classTOCName(string): Class used for the TOC. ('autotoc-nav')\n *    levels(string): Selectors used to find levels. ('h1,h2,h3')\n *    scrollDuration(string): Speed of scrolling. ('slow')\n *    scrollEasing(string): Easing to use while scrolling. ('swing')\n *    section(string): Tag type to use for TOC. ('section')\n *\n * Documentation:\n *    # TOC\n *    {{ example-1 }}\n *\n *    # Tabs\n *    {{ example-2-tabs }}\n *\n * Example: example-1\n *    <div class=\"pat-autotoc\"\n *          data-pat-autotoc=\"scrollDuration:slow;levels:h4,h5,h6;\">\n *      <h4>Title 1</h4>\n *      <p>Mr. Zuckerkorn, you've been warned about touching. You said\n *         spanking. It walked on my pillow! How about a turtle? I've always\n *         loved those leathery little snappy faces.</p>\n *      <h5>Title 1.1</h5>\n *      <p>Ah coodle doodle do Caw ca caw, caw ca caw. Butterscotch!</p>\n *      <h6>Title 1.1.1</h6>\n *      <p>Want a lick? Okay, Lindsay, are you forgetting that I was\n *         a professional twice over - an analyst and a therapist.</p>\n *      <h4>Title 2</h4>\n *      <p>You boys know how to shovel coal? Don't worry, these young\n *      beauties have been nowhere near the bananas. I thought the two of\n *      us could talk man-on-man.</p>\n *    </div>\n *\n * Example: example-2-tabs\n *    <div class=\"pat-autotoc autotabs\"\n *          data-pat-autotoc=\"section:fieldset;levels:legend;\">\n *        <fieldset>\n *          <legend>Tab 1</legend>\n *          <div>\n *            Lorem ipsum dolor sit amet, ex nam odio ceteros fastidii,\n *            id porro lorem pro, homero facilisis in cum.\n *            At doming voluptua indoctum mel, natum noster similique ne mel.\n *          </div>\n *        </fieldset>\n *        <fieldset>\n *          <legend>Tab 2</legend>\n *          <div>\n *            Reque repudiare eum et. Prompta expetendis percipitur eu eam,\n *            et graece mandamus pro, eu vim harum audire tractatos.\n *            Ad perpetua salutandi mea, soluta delicata aliquando eam ne.\n *            Qui nostrum lucilius perpetua ut, eum suas stet oblique ut.\n *          </div>\n *        </fieldset>\n *        <fieldset>\n *          <legend>Tab 3</legend>\n *          <div>\n *            Vis mazim harum deterruisset ex, duo nemore nostro civibus ad,\n *            eros vituperata id cum. Vim at erat solet soleat,\n *            eum et iuvaret luptatum, pro an esse dolorum maiestatis.\n *          </div>\n *        </fieldset>\n *    </div>\n *\n * License:\n *    Copyright (C) 2010 Plone Foundation\n *\n *    This program is free software; you can redistribute it and/or modify it\n *    under the terms of the GNU General Public License as published by the\n *    Free Software Foundation; either version 2 of the License.\n *\n *    This program is distributed in the hope that it will be useful, but\n *    WITHOUT ANY WARRANTY; without even the implied warranty of\n *    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General\n *    Public License for more details.\n *\n *    You should have received a copy of the GNU General Public License along\n *    with this program; if not, write to the Free Software Foundation, Inc.,\n *    51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA.\n */\n\n\ndefine([\n  'jquery',\n  'mockup-patterns-base'\n], function($, Base) {\n  'use strict';\n\n  var AutoTOC = Base.extend({\n    name: 'autotoc',\n    defaults: {\n      section: 'section',\n      levels: 'h1,h2,h3',\n      IDPrefix: 'autotoc-item-',\n      classTOCName: 'autotoc-nav',\n      classSectionName: 'autotoc-section',\n      classLevelPrefixName: 'autotoc-level-',\n      classActiveName: 'active',\n      scrollDuration: 'slow',\n      scrollEasing: 'swing'\n    },\n    init: function() {\n      var self = this;\n\n      self.$toc = $('<nav/>').addClass(self.options.classTOCName);\n\n      if (self.options.prependTo) {\n        self.$toc.prependTo(self.options.prependTo);\n      } else if (self.options.appendTo) {\n        self.$toc.appendTo(self.options.appendTo);\n      } else {\n        self.$toc.prependTo(self.$el);\n      }\n\n      if (self.options.className) {\n        self.$el.addClass(self.options.className);\n      }\n\n      $(self.options.section, self.$el).addClass(self.options.classSectionName);\n\n      var asTabs = self.$el.hasClass('autotabs');\n\n      $(self.options.levels, self.$el).each(function(i) {\n        var $level = $(this),\n            id = $level.prop('id') ? '#' + $level.prop('id') :\n                 $level.parents(self.options.section).prop('id');\n        if (!id) {\n          id = self.options.IDPrefix + self.name + '-' + i;\n          $level.prop('id', id);\n        }\n        $('<a/>')\n          .appendTo(self.$toc)\n          .text($level.text())\n          .prop('href', id)\n          .addClass(self.options.classLevelPrefixName + self.getLevel($level))\n          .on('click', function(e, doScroll) {\n            e.stopPropagation();\n            e.preventDefault();\n            self.$toc.children('.' + self.options.classActiveName).removeClass(self.options.classActiveName);\n            self.$el.children('.' + self.options.classActiveName).removeClass(self.options.classActiveName);\n            $(e.target).addClass(self.options.classActiveName);\n            $level.parents(self.options.section).addClass(self.options.classActiveName);\n            if (doScroll !== false &&\n                self.options.scrollDuration &&\n                $level &&\n                !asTabs) {\n              $('body,html').animate({\n                scrollTop: $level.offset().top\n              }, self.options.scrollDuration, self.options.scrollEasing);\n            }\n            if (self.$el.parents('.modal').size() !== 0) {\n              self.$el.trigger('resize.modal.patterns');\n            }\n            $(this).trigger('clicked');\n          });\n      });\n\n      self.$toc.find('a').first().trigger('click', false);\n\n    },\n    getLevel: function($el) {\n      var elementLevel = 0;\n      $.each(this.options.levels.split(','), function(level, levelSelector) {\n        if ($el.filter(levelSelector).size() === 1) {\n          elementLevel = level + 1;\n          return false;\n        }\n      });\n      return elementLevel;\n    }\n  });\n\n  return AutoTOC;\n\n});\n"}),define("mockup-patterns-backdrop",["jquery","mockup-patterns-base"],function(e,t){var n=t.extend({name:"backdrop",defaults:{zIndex:null,opacity:.8,className:"backdrop",classActiveName:"backdrop-active",closeOnEsc:!0,closeOnClick:!0},init:function(){var t=this;t.$backdrop=e("> ."+t.options.className,t.$el),t.$backdrop.size()===0&&(t.$backdrop=e("<div/>").hide().appendTo(t.$el).addClass(t.options.className),t.options.zIndex!==null&&t.$backdrop.css("z-index",t.options.zIndex)),t.options.closeOnEsc===!0&&e(document).on("keydown",function(e,n){t.$el.is("."+t.options.classActiveName)&&e.keyCode===27&&t.hide()}),t.options.closeOnClick===!0&&t.$backdrop.on("click",function(){t.$el.is("."+t.options.classActiveName)&&t.hide()})},show:function(){var e=this;e.$el.hasClass(e.options.classActiveName)||(e.trigger("show"),e.$backdrop.css("opacity","0").show(),e.$el.addClass(e.options.classActiveName),e.$backdrop.animate({opacity:e.options.opacity},500),e.trigger("shown"))},hide:function(){var e=this;e.$el.hasClass(e.options.classActiveName)&&(e.trigger("hide"),e.$backdrop.animate({opacity:"0"},500).hide(),e.$el.removeClass(e.options.classActiveName),e.trigger("hidden"))}});return n}),define("text!js/patterns/backdrop.js",[],function(){return"/* Backdrop pattern.\n *\n * Options:\n *    zIndex(integer): z-index of backdrop element. (null)\n *    opacity(float): opacity level of backdrop element. (0.8)\n *    className(string): class name of backdrop element. ('backdrop')\n *    classActiveName(string): class name when backdrop is active. ('backdrop-active')\n *    closeOnEsc(boolean): should backdrop close when ESC key is pressed. (true)\n *    closeOnClick(boolean): should backdrop close when clicked on it. (true)\n *\n * Documentation:\n *    # TODO: we need example or this is not pattern :)\n *\n * Example: example-1\n *\n * License:\n *    Copyright (C) 2010 Plone Foundation\n *\n *    This program is free software; you can redistribute it and/or modify it\n *    under the terms of the GNU General Public License as published by the\n *    Free Software Foundation; either version 2 of the License.\n *\n *    This program is distributed in the hope that it will be useful, but\n *    WITHOUT ANY WARRANTY; without even the implied warranty of\n *    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General\n *    Public License for more details.\n *\n *    You should have received a copy of the GNU General Public License along\n *    with this program; if not, write to the Free Software Foundation, Inc.,\n *    51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA.\n */\n\n\ndefine([\n  'jquery',\n  'mockup-patterns-base'\n], function($, Base) {\n  'use strict';\n\n  var Backdrop = Base.extend({\n    name: 'backdrop',\n    defaults: {\n      zIndex: null,\n      opacity: 0.8,\n      className: 'backdrop',\n      classActiveName: 'backdrop-active',\n      closeOnEsc: true,\n      closeOnClick: true\n    },\n    init: function() {\n      var self = this;\n      self.$backdrop = $('> .' + self.options.className, self.$el);\n      if (self.$backdrop.size() === 0) {\n        self.$backdrop = $('<div/>')\n            .hide()\n            .appendTo(self.$el)\n            .addClass(self.options.className);\n        if (self.options.zIndex !== null) {\n          self.$backdrop.css('z-index', self.options.zIndex);\n        }\n      }\n      if (self.options.closeOnEsc === true) {\n        $(document).on('keydown', function(e, data) {\n          if (self.$el.is('.' + self.options.classActiveName)) {\n            if (e.keyCode === 27) {  // ESC key pressed\n              self.hide();\n            }\n          }\n        });\n      }\n      if (self.options.closeOnClick === true) {\n        self.$backdrop.on('click', function() {\n          if (self.$el.is('.' + self.options.classActiveName)) {\n            self.hide();\n          }\n        });\n      }\n    },\n    show: function() {\n      var self = this;\n      if (!self.$el.hasClass(self.options.classActiveName)) {\n        self.trigger('show');\n        self.$backdrop.css('opacity', '0').show();\n        self.$el.addClass(self.options.classActiveName);\n        self.$backdrop.animate({ opacity: self.options.opacity }, 500);\n        self.trigger('shown');\n      }\n    },\n    hide: function() {\n      var self = this;\n      if (self.$el.hasClass(self.options.classActiveName)) {\n        self.trigger('hide');\n        self.$backdrop.animate({ opacity: '0' }, 500).hide();\n        self.$el.removeClass(self.options.classActiveName);\n        self.trigger('hidden');\n      }\n    }\n  });\n\n  return Backdrop;\n\n});\n"}),define("text!bower_components/mockup-core/js/pattern.js",[],function(){return"// Patterns\n//\n// Author: Rok Garbas\n// Contact: rok@garbas.si\n// Version: 1.0\n// Depends: jquery.js\n//\n// Description:\n//\n// License:\n//\n// Copyright (C) 2010 Plone Foundation\n//\n// This program is free software; you can redistribute it and/or modify it\n// under the terms of the GNU General Public License as published by the Free\n// Software Foundation; either version 2 of the License.\n//\n// This program is distributed in the hope that it will be useful, but WITHOUT\n// ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or\n// FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for\n// more details.\n//\n// You should have received a copy of the GNU General Public License along with\n// this program; if not, write to the Free Software Foundation, Inc., 51\n// Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA.\n//\n\n\ndefine([\n  'jquery',\n  'mockup-registry'\n], function($, Registry) {\n  \n\n  // Base Pattern\n  var Base = function($el, options) {\n    this.$el = $el;\n    this.options = $.extend(true, {}, this.defaults || {}, options || {});\n    this.init();\n    this.trigger('init');\n  };\n  Base.prototype = {\n    constructor: Base,\n    on: function(eventName, eventCallback) {\n      this.$el.on(eventName + '.' + this.name + '.patterns', eventCallback);\n    },\n    trigger: function(eventName, args) {\n      // args should be a list\n      if (args === undefined) {\n        args = [];\n      }\n      this.$el.trigger(eventName + '.' + this.name + '.patterns', args);\n    }\n  };\n  Base.extend = function(NewPattern) {\n    var Base = this, Constructor;\n\n    if (NewPattern && NewPattern.hasOwnProperty('constructor')) {\n      Constructor = NewPattern.constructor;\n    } else {\n      Constructor = function() { Base.apply(this, arguments); };\n    }\n\n    var Surrogate = function() { this.constructor = Constructor; };\n    Surrogate.prototype = Base.prototype;\n    Constructor.prototype = new Surrogate();\n    Constructor.extend = Base.extend;\n\n    $.extend(true, Constructor.prototype, NewPattern);\n\n    Constructor.__super__ = Base.prototype;\n\n    Registry.register(Constructor);\n\n    return Constructor;\n  };\n\n  return Base;\n});\n"}),define("mockup-patterns-cookiedirective",["jquery","mockup-patterns-base","jquery.cookie"],function(e,t){var n=t.extend({name:"cookiedirective",defaults:{shouldEnable:!0,shouldEnableMsg:"You should enable cookies to be able to login.",shouldEnableSelector:".login",shouldAsk:!0,askPermissionMsg:"This site uses cookies to provide additional functionality, do you accept?",allowMsg:"Allow",denyMsg:"Deny",cookieName:"Allow_Cookies_For_Site"},cookiesEnabled:function(){return e.cookie("_cookiesEnabled",1),e.cookie("_cookiesEnabled")?(e.removeCookie("_cookiesEnabled"),!0):!1},acceptedCookies:function(){var t=e.cookie(this.options.cookieName);return t===undefined||t===null?undefined:t===1?!0:!1},acceptCookies:function(){e.cookie(this.options.cookieName,1)},denyCookies:function(){e.cookie(this.options.cookieName,0)},ensureBool:function(e){return typeof e=="string"?e==="true"?!0:!1:e},init:function(){var t=this;t.options.shouldAsk=t.ensureBool(t.options.shouldAsk);if(t.options.shouldAsk){var n=t.acceptedCookies();if(n===undefined){var r=e("<div></div>").addClass("cookiedirective"),i=e("<div><span>"+t.options.askPermissionMsg+"</span></div>").addClass("cookiemsg"),s=e("<div><span>"+t.options.allowMsg+"</span></div>").addClass("cookieallowbutton").addClass("btn").on("click",function(e){t.acceptCookies(),t.$el.find(".cookiedirective").hide("slow")}),o=e("<div><span>"+t.options.denyMsg+"</span></div>").addClass("cookiedenybutton").addClass("btn").on("click",function(e){t.denyCookies(),t.$el.find(".cookiedirective").hide("slow")});r.append(i).append(s).append(o),t.$el.prepend(r)}}t.options.shouldEnable=t.ensureBool(t.options.shouldEnable);if(t.options.shouldEnable&&t.$el.find(t.options.shouldEnableSelector).size()>0&&!t.cookiesEnabled()){var u=e("<div></div>").addClass("shouldenablecookies"),a=e("<div><span>"+t.options.shouldEnableMsg+"</span></div>").addClass("shouldenablecookiesmsg");u.append(a).append(a),t.$el.prepend(u)}}});return n}),define("text!js/patterns/cookiedirective.js",[],function(){return"/* Cookie Directive pattern.\n *\n * Options:\n *    allowMsg(string): Allow Text on button used to allow cookies.\n *    askPermissionMsg(string): A message about allowing cookies. (This site uses cookies to provide additional functionality, do you accept?)\n *    cookieName(string): Name of cookie used to store the value of this setting. ('Allow_Cookies_For_Site')\n *    denyMsg(string): Text on button used to deny cookies. (Deny)\n *    shouldAsk(boolean): Should user be prompted about cookies? (true)\n *    shouldEnable(boolean): Display a message about enabling cookies if they are disabled. (true)\n *    shouldEnableMsg(string): A message about enabling cookies if they are disabled, which will be displayed if shouldEnable is true. (You should enable cookies to be able to login.)\n *    shouldEnableSelector(string): shouldEnable message selector. ('.login')\n *\n * Documentation:\n *    # TODO: example is not working\n *\n *    {{ example-1 }}\n *\n * Example: example-1\n *    <div class=\"pat-cookiedirective\">\n *      <div class=\"login\">\n *      </div>\n *    </div>\n *\n * License:\n *    Copyright (C) 2010 Plone Foundation\n *\n *    This program is free software; you can redistribute it and/or modify it\n *    under the terms of the GNU General Public License as published by the\n *    Free Software Foundation; either version 2 of the License.\n *\n *    This program is distributed in the hope that it will be useful, but\n *    WITHOUT ANY WARRANTY; without even the implied warranty of\n *    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General\n *    Public License for more details.\n *\n *    You should have received a copy of the GNU General Public License along\n *    with this program; if not, write to the Free Software Foundation, Inc.,\n *    51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA.\n */\n\n\ndefine([\n  'jquery',\n  'mockup-patterns-base',\n  'jquery.cookie'\n], function($, Base) {\n  'use strict';\n\n  var CookieDirective = Base.extend({\n    name: 'cookiedirective',\n    defaults: {\n      'shouldEnable': true,\n      'shouldEnableMsg': 'You should enable cookies to be able to login.',\n      'shouldEnableSelector': '.login',\n      'shouldAsk': true,\n      'askPermissionMsg': 'This site uses cookies to provide additional functionality, do you accept?',\n      'allowMsg': 'Allow',\n      'denyMsg': 'Deny',\n      'cookieName': 'Allow_Cookies_For_Site'\n    },\n    cookiesEnabled: function() {\n      $.cookie('_cookiesEnabled', 1);\n      if (!$.cookie('_cookiesEnabled')) {\n        return false;\n      }\n      $.removeCookie('_cookiesEnabled');\n      return true;\n    },\n    acceptedCookies: function() {\n      /*jshint eqeqeq:false */\n      var cookie = $.cookie(this.options.cookieName);\n      if (cookie === undefined || cookie === null) {\n        return undefined;\n      }\n      if (cookie === 1) {\n        return true;\n      } else {\n        return false;\n      }\n    },\n    acceptCookies: function() {\n      $.cookie(this.options.cookieName, 1);\n    },\n    denyCookies: function() {\n      $.cookie(this.options.cookieName, 0);\n    },\n    ensureBool: function(value) {\n      if (typeof(value) === 'string') {\n        if (value === 'true') {\n          return true;\n        } else {\n          return false;\n        }\n      }\n      return value;\n    },\n    init: function() {\n      var self = this;\n      self.options.shouldAsk = self.ensureBool(self.options.shouldAsk);\n      if (self.options.shouldAsk) {\n        var accepted = self.acceptedCookies();\n        if (accepted === undefined) {\n          var div = $('<div></div>')\n            .addClass('cookiedirective');\n          var msg = $('<div><span>' + self.options.askPermissionMsg + '</span></div>')\n            .addClass('cookiemsg');\n          var buttonAllow = $('<div><span>' + self.options.allowMsg + '</span></div>')\n            .addClass('cookieallowbutton')\n            .addClass('btn')\n            .on('click', function(e) {\n              self.acceptCookies();\n              self.$el.find('.cookiedirective').hide('slow');\n            });\n          var buttonDeny = $('<div><span>' + self.options.denyMsg + '</span></div>')\n            .addClass('cookiedenybutton')\n            .addClass('btn')\n            .on('click', function(e) {\n              self.denyCookies();\n              self.$el.find('.cookiedirective').hide('slow');\n            });\n          div.append(msg).append(buttonAllow).append(buttonDeny);\n          self.$el.prepend(div);\n        }\n      }\n      self.options.shouldEnable = self.ensureBool(self.options.shouldEnable);\n      if (self.options.shouldEnable) {\n        if (self.$el.find(self.options.shouldEnableSelector).size() > 0) {\n          if (!self.cookiesEnabled()) {\n            var newDiv = $('<div></div>')\n              .addClass('shouldenablecookies');\n            var newMsg = $('<div><span>' + self.options.shouldEnableMsg + '</span></div>')\n              .addClass('shouldenablecookiesmsg');\n            newDiv.append(newMsg).append(newMsg);\n            self.$el.prepend(newDiv);\n          }\n        }\n      }\n    }\n  });\n\n  return CookieDirective;\n\n});\n\n"}),function(e){e.fn.drag=function(t,n,r){var i=typeof t=="string"?t:"",s=e.isFunction(t)?t:e.isFunction(n)?n:null;return i.indexOf("drag")!==0&&(i="drag"+i),r=(t==s?n:r)||{},s?this.bind(i,r,s):this.trigger(i)};var t=e.event,n=t.special,r=n.drag={defaults:{which:1,distance:0,not:":input",handle:null,relative:!1,drop:!0,click:!1},datakey:"dragdata",noBubble:!0,add:function(t){var n=e.data(this,r.datakey),i=t.data||{};n.related+=1,e.each(r.defaults,function(e,t){i[e]!==undefined&&(n[e]=i[e])})},remove:function(){e.data(this,r.datakey).related-=1},setup:function(){if(e.data(this,r.datakey))return;var n=e.extend({related:0},r.defaults);e.data(this,r.datakey,n),t.add(this,"touchstart mousedown",r.init,n),this.attachEvent&&this.attachEvent("ondragstart",r.dontstart)},teardown:function(){var n=e.data(this,r.datakey)||{};if(n.related)return;e.removeData(this,r.datakey),t.remove(this,"touchstart mousedown",r.init),r.textselect(!0),this.detachEvent&&this.detachEvent("ondragstart",r.dontstart)},init:function(i){if(r.touched)return;var s=i.data,o;if(i.which!=0&&s.which>0&&i.which!=s.which)return;if(e(i.target).is(s.not))return;if(s.handle&&!e(i.target).closest(s.handle,i.currentTarget).length)return;r.touched=i.type=="touchstart"?this:null,s.propagates=1,s.mousedown=this,s.interactions=[r.interaction(this,s)],s.target=i.target,s.pageX=i.pageX,s.pageY=i.pageY,s.dragging=null,o=r.hijack(i,"draginit",s);if(!s.propagates)return;o=r.flatten(o),o&&o.length&&(s.interactions=[],e.each(o,function(){s.interactions.push(r.interaction(this,s))})),s.propagates=s.interactions.length,s.drop!==!1&&n.drop&&n.drop.handler(i,s),r.textselect(!1),r.touched?t.add(r.touched,"touchmove touchend",r.handler,s):t.add(document,"mousemove mouseup",r.handler,s);if(!r.touched||s.live)return!1},interaction:function(t,n){var i=e(t)[n.relative?"position":"offset"]()||{top:0,left:0};return{drag:t,callback:new r.callback,droppable:[],offset:i}},handler:function(i){var s=i.data;switch(i.type){case!s.dragging&&"touchmove":i.preventDefault();case!s.dragging&&"mousemove":if(Math.pow(i.pageX-s.pageX,2)+Math.pow(i.pageY-s.pageY,2)<Math.pow(s.distance,2))break;i.target=s.target,r.hijack(i,"dragstart",s),s.propagates&&(s.dragging=!0);case"touchmove":i.preventDefault();case"mousemove":if(s.dragging){r.hijack(i,"drag",s);if(s.propagates){s.drop!==!1&&n.drop&&n.drop.handler(i,s);break}i.type="mouseup"};case"touchend":case"mouseup":default:r.touched?t.remove(r.touched,"touchmove touchend",r.handler):t.remove(document,"mousemove mouseup",r.handler),s.dragging&&(s.drop!==!1&&n.drop&&n.drop.handler(i,s),r.hijack(i,"dragend",s)),r.textselect(!0),s.click===!1&&s.dragging&&e.data(s.mousedown,"suppress.click",(new Date).getTime()+5),s.dragging=r.touched=!1}},hijack:function(n,i,s,o,u){if(!s)return;var a={event:n.originalEvent,type:n.type},f=i.indexOf("drop")?"drag":"drop",l,c=o||0,h,p,d,v=isNaN(o)?s.interactions.length:o;n.type=i,n.originalEvent=null,s.results=[];do if(h=s.interactions[c]){if(i!=="dragend"&&h.cancelled)continue;d=r.properties(n,s,h),h.results=[],e(u||h[f]||s.droppable).each(function(o,u){d.target=u,n.isPropagationStopped=function(){return!1},l=u?t.dispatch.call(u,n,d):null,l===!1?(f=="drag"&&(h.cancelled=!0,s.propagates-=1),i=="drop"&&(h[f][o]=null)):i=="dropinit"&&h.droppable.push(r.element(l)||u),i=="dragstart"&&(h.proxy=e(r.element(l)||h.drag)[0]),h.results.push(l),delete n.result;if(i!=="dropinit")return l}),s.results[c]=r.flatten(h.results),i=="dropinit"&&(h.droppable=r.flatten(h.droppable)),i=="dragstart"&&!h.cancelled&&d.update()}while(++c<v);return n.type=a.type,n.originalEvent=a.event,r.flatten(s.results)},properties:function(e,t,n){var i=n.callback;return i.drag=n.drag,i.proxy=n.proxy||n.drag,i.startX=t.pageX,i.startY=t.pageY,i.deltaX=e.pageX-t.pageX,i.deltaY=e.pageY-t.pageY,i.originalX=n.offset.left,i.originalY=n.offset.top,i.offsetX=i.originalX+i.deltaX,i.offsetY=i.originalY+i.deltaY,i.drop=r.flatten((n.drop||[]).slice()),i.available=r.flatten((n.droppable||[]).slice()),i},element:function(e){if(e&&(e.jquery||e.nodeType==1))return e},flatten:function(t){return e.map(t,function(t){return t&&t.jquery?e.makeArray(t):t&&t.length?r.flatten(t):t})},textselect:function(t){e(document)[t?"unbind":"bind"]("selectstart",r.dontstart).css("MozUserSelect",t?"":"none"),document.unselectable=t?"off":"on"},dontstart:function(){return!1},callback:function(){}};r.callback.prototype={update:function(){n.drop&&this.available.length&&e.each(this.available,function(e){n.drop.locate(this,e)})}};var i=t.dispatch;t.dispatch=function(t){if(e.data(this,"suppress."+t.type)-(new Date).getTime()>0){e.removeData(this,"suppress."+t.type);return}return i.apply(this,arguments)};var s=t.fixHooks.touchstart=t.fixHooks.touchmove=t.fixHooks.touchend=t.fixHooks.touchcancel={props:"clientX clientY pageX pageY screenX screenY".split(" "),filter:function(t,n){if(n){var r=n.touches&&n.touches[0]||n.changedTouches&&n.changedTouches[0]||null;r&&e.each(s.props,function(e,n){t[n]=r[n]})}return t}};n.draginit=n.dragstart=n.dragend=r}(jQuery),define("jquery.event.drag",["jquery"],function(){}),function(e){e.fn.drop=function(t,n,r){var i=typeof t=="string"?t:"",s=e.isFunction(t)?t:e.isFunction(n)?n:null;return i.indexOf("drop")!==0&&(i="drop"+i),r=(t==s?n:r)||{},s?this.bind(i,r,s):this.trigger(i)},e.drop=function(t){t=t||{},r.multi=t.multi===!0?Infinity:t.multi===!1?1:isNaN(t.multi)?r.multi:t.multi,r.delay=t.delay||r.delay,r.tolerance=e.isFunction(t.tolerance)?t.tolerance:t.tolerance===null?null:r.tolerance,r.mode=t.mode||r.mode||"intersect"};var t=e.event,n=t.special,r=e.event.special.drop={multi:1,delay:20,mode:"overlap",targets:[],datakey:"dropdata",noBubble:!0,add:function(t){var n=e.data(this,r.datakey);n.related+=1},remove:function(){e.data(this,r.datakey).related-=1},setup:function(){if(e.data(this,r.datakey))return;var t={related:0,active:[],anyactive:0,winner:0,location:{}};e.data(this,r.datakey,t),r.targets.push(this)},teardown:function(){var t=e.data(this,r.datakey)||{};if(t.related)return;e.removeData(this,r.datakey);var n=this;r.targets=e.grep(r.targets,function(e){return e!==n})},handler:function(t,i){var s,o;if(!i)return;switch(t.type){case"mousedown":case"touchstart":o=e(r.targets),typeof i.drop=="string"&&(o=o.filter(i.drop)),o.each(function(){var t=e.data(this,r.datakey);t.active=[],t.anyactive=0,t.winner=0}),i.droppable=o,n.drag.hijack(t,"dropinit",i);break;case"mousemove":case"touchmove":r.event=t,r.timer||r.tolerate(i);break;case"mouseup":case"touchend":r.timer=clearTimeout(r.timer),i.propagates&&(n.drag.hijack(t,"drop",i),n.drag.hijack(t,"dropend",i))}},locate:function(t,n){var i=e.data(t,r.datakey),s=e(t),o=s.offset()||{},u=s.outerHeight(),a=s.outerWidth(),f={elem:t,width:a,height:u,top:o.top,left:o.left,right:o.left+a,bottom:o.top+u};return i&&(i.location=f,i.index=n,i.elem=t),f},contains:function(e,t){return(t[0]||t.left)>=e.left&&(t[0]||t.right)<=e.right&&(t[1]||t.top)>=e.top&&(t[1]||t.bottom)<=e.bottom},modes:{intersect:function(e,t,n){return this.contains(n,[e.pageX,e.pageY])?1e9:this.modes.overlap.apply(this,arguments)},overlap:function(e,t,n){return Math.max(0,Math.min(n.bottom,t.bottom)-Math.max(n.top,t.top))*Math.max(0,Math.min(n.right,t.right)-Math.max(n.left,t.left))},fit:function(e,t,n){return this.contains(n,t)?1:0},middle:function(e,t,n){return this.contains(n,[t.left+t.width*.5,t.top+t.height*.5])?1:0}},sort:function(e,t){return t.winner-e.winner||e.index-t.index},tolerate:function(t){var i,s,o,u,a,f,l,c=0,h,p=t.interactions.length,d=[r.event.pageX,r.event.pageY],v=r.tolerance||r.modes[r.mode];do if(h=t.interactions[c]){if(!h)return;h.drop=[],a=[],f=h.droppable.length,v&&(o=r.locate(h.proxy)),i=0;do if(l=h.droppable[i]){u=e.data(l,r.datakey),s=u.location;if(!s)continue;u.winner=v?v.call(r,r.event,o,s):r.contains(s,d)?1:0,a.push(u)}while(++i<f);a.sort(r.sort),i=0;do if(u=a[i])u.winner&&h.drop.length<r.multi?(!u.active[c]&&!u.anyactive&&(n.drag.hijack(r.event,"dropstart",t,c,u.elem)[0]!==!1?(u.active[c]=1,u.anyactive+=1):u.winner=0),u.winner&&h.drop.push(u.elem)):u.active[c]&&u.anyactive==1&&(n.drag.hijack(r.event,"dropend",t,c,u.elem),u.active[c]=0,u.anyactive-=1);while(++i<f)}while(++c<p);r.last&&d[0]==r.last.pageX&&d[1]==r.last.pageY?delete r.timer:r.timer=setTimeout(function(){r.tolerate(t)},r.delay),r.last=r.event}};n.dropinit=n.dropstart=n.dropend=r}(jQuery),define("jquery.event.drop",["jquery"],function(e){return function(){var t,n;return t||e.$.drop}}(this)),define("mockup-patterns-sortable",["jquery","mockup-patterns-base","jquery.event.drag","jquery.event.drop"],function(e,t,n,r){var i=t.extend({name:"sortable",defaults:{selector:"li",dragClass:"item-dragging",cloneClass:"dragging",drop:null},init:function(){var t=this,n=0;t.$el.find(t.options.selector).drag("start",function(i,s){var o=this;return e(o).addClass(t.options.dragClass),r({tolerance:function(n,r,i){if(e(i.elem).closest(t.$el).length===0)return;var s=n.pageY>i.top+i.height/2;return e.data(i.elem,"drop+reorder",s?"insertAfter":"insertBefore"),this.contains(i,[n.pageX,n.pageY])}}),n=e(this).index(),e(this).clone().addClass(t.options.cloneClass).css({opacity:.75,position:"absolute"}).appendTo(document.body)}).drag(function(t,n){e(n.proxy).css({top:n.offsetY,left:n.offsetX});var r=n.drop[0],i=e.data(r||{},"drop+reorder");i&&r&&(r!=n.current||i!=n.method)&&(e(this)[i](r),n.current=r,n.method=i,n.update())}).drag("end",function(r,i){var s=e(this);s.removeClass(t.options.dragClass),e(i.proxy).remove(),t.options.drop&&t.options.drop(s,s.index()-n)}).drop("init",function(e,t){return this==t.drag?!1:!0})}});return i}),define("text!js/patterns/sortable.js",[],function(){return"/* Sortable pattern.\n *\n * Options:\n *    selector(string): Selector to use to draggable items in pattern ('li')\n *    dragClass(string): Class to apply to original item that is being dragged. ('item-dragging')\n *    cloneClass(string): Class to apply to cloned item that is dragged. ('dragging')\n *    drop(function): callback function for when item is dropped (null)\n *\n * Documentation:\n *    # Default\n *\n *    {{ example-1 }}\n *\n *    # Table\n *\n *    {{ example-2 }}\n *\n * Example: example-1\n *    <ul class=\"pat-sortable\">\n *      <li>One</li>\n *      <li>Two</li>\n *      <li>Three</li>\n *    </ul>\n *\n * Example: example-2\n *    <table class=\"table table-stripped pat-sortable\"\n *           data-pat-sortable=\"selector:tr;\">\n *      <tbody>\n *        <tr>\n *          <td>One One</td>\n *          <td>One Two</td>\n *        </tr>\n *        <tr>\n *          <td>Two One</td>\n *          <td>Two Two</td>\n *        </tr>\n *        <tr>\n *          <td>Three One</td>\n *          <td>Three Two</td>\n *        </tr>\n *      </tbody>\n *    </table>\n *\n * License:\n *    Copyright (C) 2010 Plone Foundation\n *\n *    This program is free software; you can redistribute it and/or modify it\n *    under the terms of the GNU General Public License as published by the\n *    Free Software Foundation; either version 2 of the License.\n *\n *    This program is distributed in the hope that it will be useful, but\n *    WITHOUT ANY WARRANTY; without even the implied warranty of\n *    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General\n *    Public License for more details.\n *\n *    You should have received a copy of the GNU General Public License along\n *    with this program; if not, write to the Free Software Foundation, Inc.,\n *    51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA.\n */\n\n\ndefine([\n  'jquery',\n  'mockup-patterns-base',\n  'jquery.event.drag',\n  'jquery.event.drop'\n], function($, Base, drag, drop) {\n  'use strict';\n\n  var SortablePattern = Base.extend({\n    name: 'sortable',\n    defaults: {\n      selector: 'li',\n      dragClass: 'item-dragging',\n      cloneClass: 'dragging',\n      drop: null // function to handle drop event\n    },\n    init: function() {\n      var self = this;\n      var start = 0;\n\n      self.$el.find(self.options.selector).drag('start', function(e, dd) {\n        var dragged = this;\n        $(dragged).addClass(self.options.dragClass);\n        drop({\n          tolerance: function(event, proxy, target) {\n            if ($(target.elem).closest(self.$el).length === 0) {\n              /* prevent dragging conflict over another drag area */\n              return;\n            }\n            var test = event.pageY > (target.top + target.height / 2);\n            $.data(target.elem, 'drop+reorder', test ? 'insertAfter' : 'insertBefore' );\n            return this.contains(target, [event.pageX, event.pageY]);\n          }\n        });\n        start = $(this).index();\n        return $( this ).clone().\n          addClass(self.options.cloneClass).\n          css({opacity: 0.75, position: 'absolute'}).\n          appendTo(document.body);\n      })\n      .drag(function(e, dd) {\n        /*jshint eqeqeq:false */\n        $( dd.proxy ).css({\n          top: dd.offsetY,\n          left: dd.offsetX\n        });\n        var drop = dd.drop[0],\n            method = $.data(drop || {}, 'drop+reorder');\n        /* XXX Cannot use triple equals here */\n        if (method && drop && (drop != dd.current || method != dd.method)) {\n          $(this)[method](drop);\n          dd.current = drop;\n          dd.method = method;\n          dd.update();\n        }\n      })\n      .drag('end', function(e, dd) {\n        var $el = $(this);\n        $el.removeClass(self.options.dragClass);\n        $(dd.proxy).remove();\n        if (self.options.drop) {\n          self.options.drop($el, $el.index() - start);\n        }\n      })\n      .drop('init', function(e, dd ) {\n        /*jshint eqeqeq:false */\n        /* XXX Cannot use triple equals here */\n        return (this == dd.drag) ? false: true;\n      });\n\n    }\n  });\n\n  return SortablePattern;\n\n});\n\n\n"}),function(e){typeof define=="function"&&define.amd?define("dropzone",["jquery"],e):e(jQuery)}(function(e){function n(e){if(e)return r(e)}function r(e){for(var t in n.prototype)e[t]=n.prototype[t];return e}var t={exports:{}};return t.exports=n,n.prototype.on=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks[e]=this._callbacks[e]||[]).push(t),this},n.prototype.once=function(e,t){function r(){n.off(e,r),t.apply(this,arguments)}var n=this;return this._callbacks=this._callbacks||{},t._off=r,this.on(e,r),this},n.prototype.off=n.prototype.removeListener=n.prototype.removeAllListeners=function(e,t){this._callbacks=this._callbacks||{};var n=this._callbacks[e];if(!n)return this;if(1==arguments.length)return delete this._callbacks[e],this;var r=n.indexOf(t._off||t);return~r&&n.splice(r,1),this},n.prototype.emit=function(e){this._callbacks=this._callbacks||{};var t=[].slice.call(arguments,1),n=this._callbacks[e];if(n){n=n.slice(0);for(var r=0,i=n.length;r<i;++r)n[r].apply(this,t)}return this},n.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks[e]||[]},n.prototype.hasListeners=function(e){return!!this.listeners(e).length},function(){var r,i,s,o,u,a,f,l,c={}.hasOwnProperty,h=function(e,t){function r(){this.constructor=e}for(var n in t)c.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},p=[].slice;i=typeof n!="undefined"&&n!==null?n:require("emitter"),f=function(){},r=function(e){function n(e,r){var i,s,o;this.element=e,this.version=n.version,this.defaultOptions.previewTemplate=this.defaultOptions.previewTemplate.replace(/\n*/g,""),this.clickableElements=[],this.listeners=[],this.files=[],typeof this.element=="string"&&(this.element=document.querySelector(this.element));if(!this.element||this.element.nodeType==null)throw new Error("Invalid dropzone element.");if(this.element.dropzone)throw new Error("Dropzone already attached.");n.instances.push(this),this.element.dropzone=this,i=(o=n.optionsForElement(this.element))!=null?o:{},this.options=t({},this.defaultOptions,i,r!=null?r:{});if(this.options.forceFallback||!n.isBrowserSupported())return this.options.fallback.call(this);this.options.url==null&&(this.options.url=this.element.getAttribute("action"));if(!this.options.url)throw new Error("No URL provided.");if(this.options.acceptedFiles&&this.options.acceptedMimeTypes)throw new Error("You can't provide both 'acceptedFiles' and 'acceptedMimeTypes'. 'acceptedMimeTypes' is deprecated.");this.options.acceptedMimeTypes&&(this.options.acceptedFiles=this.options.acceptedMimeTypes,delete this.options.acceptedMimeTypes),this.options.method=this.options.method.toUpperCase(),(s=this.getExistingFallback())&&s.parentNode&&s.parentNode.removeChild(s),this.options.previewsContainer?this.previewsContainer=n.getElement(this.options.previewsContainer,"previewsContainer"):this.previewsContainer=this.element,this.options.clickable&&(this.options.clickable===!0?this.clickableElements=[this.element]:this.clickableElements=n.getElements(this.options.clickable,"clickable")),this.init()}var t;return h(n,e),n.prototype.events=["drop","dragstart","dragend","dragenter","dragover","dragleave","addedfile","removedfile","thumbnail","error","errormultiple","processing","processingmultiple","uploadprogress","totaluploadprogress","sending","sendingmultiple","success","successmultiple","canceled","canceledmultiple","complete","completemultiple","reset","maxfilesexceeded","maxfilesreached"],n.prototype.defaultOptions={url:null,method:"post",withCredentials:!1,parallelUploads:2,uploadMultiple:!1,maxFilesize:256,paramName:"file",createImageThumbnails:!0,maxThumbnailFilesize:10,thumbnailWidth:100,thumbnailHeight:100,maxFiles:null,params:{},clickable:!0,ignoreHiddenFiles:!0,acceptedFiles:null,acceptedMimeTypes:null,autoProcessQueue:!0,addRemoveLinks:!1,previewsContainer:null,dictDefaultMessage:"Drop files here to upload",dictFallbackMessage:"Your browser does not support drag'n'drop file uploads.",dictFallbackText:"Please use the fallback form below to upload your files like in the olden days.",dictFileTooBig:"File is too big ({{filesize}}MiB). Max filesize: {{maxFilesize}}MiB.",dictInvalidFileType:"You can't upload files of this type.",dictResponseError:"Server responded with {{statusCode}} code.",dictCancelUpload:"Cancel upload",dictCancelUploadConfirmation:"Are you sure you want to cancel this upload?",dictRemoveFile:"Remove file",dictRemoveFileConfirmation:null,dictMaxFilesExceeded:"You can not upload any more files.",accept:function(e,t){return t()},init:function(){return f},forceFallback:!1,fallback:function(){var e,t,r,i,s,o;this.element.className=""+this.element.className+" dz-browser-not-supported",o=this.element.getElementsByTagName("div");for(i=0,s=o.length;i<s;i++){e=o[i];if(/(^| )dz-message($| )/.test(e.className)){t=e,e.className="dz-message";continue}}return t||(t=n.createElement('<div class="dz-message"><span></span></div>'),this.element.appendChild(t)),r=t.getElementsByTagName("span")[0],r&&(r.textContent=this.options.dictFallbackMessage),this.element.appendChild(this.getFallbackForm())},resize:function(e){var t,n,r;return t={srcX:0,srcY:0,srcWidth:e.width,srcHeight:e.height},n=e.width/e.height,r=this.options.thumbnailWidth/this.options.thumbnailHeight,e.height<this.options.thumbnailHeight||e.width<this.options.thumbnailWidth?(t.trgHeight=t.srcHeight,t.trgWidth=t.srcWidth):n>r?(t.srcHeight=e.height,t.srcWidth=t.srcHeight*r):(t.srcWidth=e.width,t.srcHeight=t.srcWidth/r),t.srcX=(e.width-t.srcWidth)/2,t.srcY=(e.height-t.srcHeight)/2,t},drop:function(e){return this.element.classList.remove("dz-drag-hover")},dragstart:f,dragend:function(e){return this.element.classList.remove("dz-drag-hover")},dragenter:function(e){return this.element.classList.add("dz-drag-hover")},dragover:function(e){return this.element.classList.add("dz-drag-hover")},dragleave:function(e){return this.element.classList.remove("dz-drag-hover")},paste:f,reset:function(){return this.element.classList.remove("dz-started")},addedfile:function(e){var t,r,i,s,o,u,a,f,l,c,h,p,d,v=this;this.element===this.previewsContainer&&this.element.classList.add("dz-started"),e.previewElement=n.createElement(this.options.previewTemplate.trim()),e.previewTemplate=e.previewElement,this.previewsContainer.appendChild(e.previewElement),c=e.previewElement.querySelectorAll("[data-dz-name]");for(s=0,a=c.length;s<a;s++)t=c[s],t.textContent=e.name;h=e.previewElement.querySelectorAll("[data-dz-size]");for(o=0,f=h.length;o<f;o++)t=h[o],t.innerHTML=this.filesize(e.size);this.options.addRemoveLinks&&(e._removeLink=n.createElement('<a class="dz-remove" href="javascript:undefined;" data-dz-remove>'+this.options.dictRemoveFile+"</a>"),e.previewElement.appendChild(e._removeLink)),r=function(t){return t.preventDefault(),t.stopPropagation(),e.status===n.UPLOADING?n.confirm(v.options.dictCancelUploadConfirmation,function(){return v.removeFile(e)}):v.options.dictRemoveFileConfirmation?n.confirm(v.options.dictRemoveFileConfirmation,function(){return v.removeFile(e)}):v.removeFile(e)},p=e.previewElement.querySelectorAll("[data-dz-remove]"),d=[];for(u=0,l=p.length;u<l;u++)i=p[u],d.push(i.addEventListener("click",r));return d},removedfile:function(e){var t;return(t=e.previewElement)!=null&&t.parentNode.removeChild(e.previewElement),this._updateMaxFilesReachedClass()},thumbnail:function(e,t){var n,r,i,s,o;e.previewElement.classList.remove("dz-file-preview"),e.previewElement.classList.add("dz-image-preview"),s=e.previewElement.querySelectorAll("[data-dz-thumbnail]"),o=[];for(r=0,i=s.length;r<i;r++)n=s[r],n.alt=e.name,o.push(n.src=t);return o},error:function(e,t){var n,r,i,s,o;e.previewElement.classList.add("dz-error"),typeof t!="String"&&t.error&&(t=t.error),s=e.previewElement.querySelectorAll("[data-dz-errormessage]"),o=[];for(r=0,i=s.length;r<i;r++)n=s[r],o.push(n.textContent=t);return o},errormultiple:f,processing:function(e){e.previewElement.classList.add("dz-processing");if(e._removeLink)return e._removeLink.textContent=this.options.dictCancelUpload},processingmultiple:f,uploadprogress:function(e,t,n){var r,i,s,o,u;o=e.previewElement.querySelectorAll("[data-dz-uploadprogress]"),u=[];for(i=0,s=o.length;i<s;i++)r=o[i],u.push(r.style.width=""+t+"%");return u},totaluploadprogress:f,sending:f,sendingmultiple:f,success:function(e){return e.previewElement.classList.add("dz-success")},successmultiple:f,canceled:function(e){return this.emit("error",e,"Upload canceled.")},canceledmultiple:f,complete:function(e){if(e._removeLink)return e._removeLink.textContent=this.options.dictRemoveFile},completemultiple:f,maxfilesexceeded:f,maxfilesreached:f,previewTemplate:'<div class="dz-preview dz-file-preview">\n  <div class="dz-details">\n    <div class="dz-filename"><span data-dz-name></span></div>\n    <div class="dz-size" data-dz-size></div>\n    <img data-dz-thumbnail />\n  </div>\n  <div class="dz-progress"><span class="dz-upload" data-dz-uploadprogress></span></div>\n  <div class="dz-success-mark"><span></span></div>\n  <div class="dz-error-mark"><span></span></div>\n  <div class="dz-error-message"><span data-dz-errormessage></span></div>\n</div>'},t=function(){var e,t,n,r,i,s,o;r=arguments[0],n=2<=arguments.length?p.call(arguments,1):[];for(s=0,o=n.length;s<o;s++){t=n[s];for(e in t)i=t[e],r[e]=i}return r},n.prototype.getAcceptedFiles=function(){var e,t,n,r,i;r=this.files,i=[];for(t=0,n=r.length;t<n;t++)e=r[t],e.accepted&&i.push(e);return i},n.prototype.getRejectedFiles=function(){var e,t,n,r,i;r=this.files,i=[];for(t=0,n=r.length;t<n;t++)e=r[t],e.accepted||i.push(e);return i},n.prototype.getQueuedFiles=function(){var e,t,r,i,s;i=this.files,s=[];for(t=0,r=i.length;t<r;t++)e=i[t],e.status===n.QUEUED&&s.push(e);return s},n.prototype.getUploadingFiles=function(){var e,t,r,i,s;i=this.files,s=[];for(t=0,r=i.length;t<r;t++)e=i[t],e.status===n.UPLOADING&&s.push(e);return s},n.prototype.init=function(){var e,t,r,i,s,o,u,a=this;this.element.tagName==="form"&&this.element.setAttribute("enctype","multipart/form-data"),this.element.classList.contains("dropzone")&&!this.element.querySelector(".dz-message")&&this.element.appendChild(n.createElement('<div class="dz-default dz-message"><span>'+this.options.dictDefaultMessage+"</span></div>")),this.clickableElements.length&&(r=function(){return a.hiddenFileInput&&document.body.removeChild(a.hiddenFileInput),a.hiddenFileInput=document.createElement("input"),a.hiddenFileInput.setAttribute("type","file"),(a.options.maxFiles==null||a.options.maxFiles>1)&&a.hiddenFileInput.setAttribute("multiple","multiple"),a.options.acceptedFiles!=null&&a.hiddenFileInput.setAttribute("accept",a.options.acceptedFiles),a.hiddenFileInput.style.visibility="hidden",a.hiddenFileInput.style.position="absolute",a.hiddenFileInput.style.top="0",a.hiddenFileInput.style.left="0",a.hiddenFileInput.style.height="0",a.hiddenFileInput.style.width="0",document.body.appendChild(a.hiddenFileInput),a.hiddenFileInput.addEventListener("change",function(){var e,t,n,i;t=a.hiddenFileInput.files;if(t.length)for(n=0,i=t.length;n<i;n++)e=t[n],a.addFile(e);return r()})},r()),this.URL=(o=window.URL)!=null?o:window.webkitURL,u=this.events;for(i=0,s=u.length;i<s;i++)e=u[i],this.on(e,this.options[e]);return this.on("uploadprogress",function(){return a.updateTotalUploadProgress()}),this.on("removedfile",function(){return a.updateTotalUploadProgress()}),this.on("canceled",function(e){return a.emit("complete",e)}),this.on("complete",function(e){if(a.getUploadingFiles().length===0&&a.getQueuedFiles().length===0)return setTimeout(function(){return a.emit("queuecomplete")},0)}),t=function(e){return e.stopPropagation(),e.preventDefault?e.preventDefault():e.returnValue=!1},this.listeners=[{element:this.element,events:{dragstart:function(e){return a.emit("dragstart",e)},dragenter:function(e){return t(e),a.emit("dragenter",e)},dragover:function(e){var n;try{n=e.dataTransfer.effectAllowed}catch(r){}return e.dataTransfer.dropEffect="move"===n||"linkMove"===n?"move":"copy",t(e),a.emit("dragover",e)},dragleave:function(e){return a.emit("dragleave",e)},drop:function(e){return t(e),a.drop(e)},dragend:function(e){return a.emit("dragend",e)}}}],this.clickableElements.forEach(function(e){return a.listeners.push({element:e,events:{click:function(t){if(e!==a.element||t.target===a.element||n.elementInside(t.target,a.element.querySelector(".dz-message")))return a.hiddenFileInput.click()}}})}),this.enable(),this.options.init.call(this)},n.prototype.destroy=function(){var e;this.disable(),this.removeAllFiles(!0);if((e=this.hiddenFileInput)!=null?e.parentNode:void 0)this.hiddenFileInput.parentNode.removeChild(this.hiddenFileInput),this.hiddenFileInput=null;return delete this.element.dropzone,n.instances.splice(n.instances.indexOf(this),1)},n.prototype.updateTotalUploadProgress=function(){var e,t,n,r,i,s,o,u;r=0,n=0,e=this.getAcceptedFiles();if(e.length){u=this.getAcceptedFiles();for(s=0,o=u.length;s<o;s++)t=u[s],r+=t.upload.bytesSent,n+=t.upload.total;i=100*r/n}else i=100;return this.emit("totaluploadprogress",i,n,r)},n.prototype.getFallbackForm=function(){var e,t,r,i;return(e=this.getExistingFallback())?e:(r='<div class="dz-fallback">',this.options.dictFallbackText&&(r+="<p>"+this.options.dictFallbackText+"</p>"),r+='<input type="file" name="'+this.options.paramName+(this.options.uploadMultiple?"[]":"")+'" '+(this.options.uploadMultiple?'multiple="multiple"':void 0)+' /><input type="submit" value="Upload!"></div>',t=n.createElement(r),this.element.tagName!=="FORM"?(i=n.createElement('<form action="'+this.options.url+'" enctype="multipart/form-data" method="'+this.options.method+'"></form>'),i.appendChild(t)):(this.element.setAttribute("enctype","multipart/form-data"),this.element.setAttribute("method",this.options.method)),i!=null?i:t)},n.prototype.getExistingFallback=function(){var e,t,n,r,i,s;t=function(e){var t,n,r;for(n=0,r=e.length;n<r;n++){t=e[n];if(/(^| )fallback($| )/.test(t.className))return t}},s=["div","form"];for(r=0,i=s.length;r<i;r++){n=s[r];if(e=t(this.element.getElementsByTagName(n)))return e}},n.prototype.setupEventListeners=function(){var e,t,n,r,i,s,o;s=this.listeners,o=[];for(r=0,i=s.length;r<i;r++)e=s[r],o.push(function(){var r,i;r=e.events,i=[];for(t in r)n=r[t],i.push(e.element.addEventListener(t,n,!1));return i}());return o},n.prototype.removeEventListeners=function(){var e,t,n,r,i,s,o;s=this.listeners,o=[];for(r=0,i=s.length;r<i;r++)e=s[r],o.push(function(){var r,i;r=e.events,i=[];for(t in r)n=r[t],i.push(e.element.removeEventListener(t,n,!1));return i}());return o},n.prototype.disable=function(){var e,t,n,r,i;this.clickableElements.forEach(function(e){return e.classList.remove("dz-clickable")}),this.removeEventListeners(),r=this.files,i=[];for(t=0,n=r.length;t<n;t++)e=r[t],i.push(this.cancelUpload(e));return i},n.prototype.enable=function(){return this.clickableElements.forEach(function(e){return e.classList.add("dz-clickable")}),this.setupEventListeners()},n.prototype.filesize=function(e){var t;return e>=109951162777.6?(e/=109951162777.6,t="TiB"):e>=107374182.4?(e/=107374182.4,t="GiB"):e>=104857.6?(e/=104857.6,t="MiB"):e>=102.4?(e/=102.4,t="KiB"):(e*=10,t="b"),"<strong>"+Math.round(e)/10+"</strong> "+t},n.prototype._updateMaxFilesReachedClass=function(){return this.options.maxFiles!=null&&this.getAcceptedFiles().length>=this.options.maxFiles?(this.getAcceptedFiles().length===this.options.maxFiles&&this.emit("maxfilesreached",this.files),this.element.classList.add("dz-max-files-reached")):this.element.classList.remove("dz-max-files-reached")},n.prototype.drop=function(e){var t,n;if(!e.dataTransfer)return;this.emit("drop",e),t=e.dataTransfer.files,t.length&&(n=e.dataTransfer.items,n&&n.length&&n[0].webkitGetAsEntry!=null?this._addFilesFromItems(n):this.handleFiles(t))},n.prototype.paste=function(e){var t,n;if((e!=null?(n=e.clipboardData)!=null?n.items:void 0:void 0)==null)return;this.emit("paste",e),t=e.clipboardData.items;if(t.length)return this._addFilesFromItems(t)},n.prototype.handleFiles=function(e){var t,n,r,i;i=[];for(n=0,r=e.length;n<r;n++)t=e[n],i.push(this.addFile(t));return i},n.prototype._addFilesFromItems=function(e){var t,n,r,i,s;s=[];for(r=0,i=e.length;r<i;r++)n=e[r],n.webkitGetAsEntry!=null&&(t=n.webkitGetAsEntry())?t.isFile?s.push(this.addFile(n.getAsFile())):t.isDirectory?s.push(this._addFilesFromDirectory(t,t.name)):s.push(void 0):n.getAsFile!=null?n.kind==null||n.kind==="file"?s.push(this.addFile(n.getAsFile())):s.push(void 0):s.push(void 0);return s},n.prototype._addFilesFromDirectory=function(e,t){var n,r,i=this;return n=e.createReader(),r=function(e){var n,r,s;for(r=0,s=e.length;r<s;r++)n=e[r],n.isFile?n.file(function(e){if(i.options.ignoreHiddenFiles&&e.name.substring(0,1)===".")return;return e.fullPath=""+t+"/"+e.name,i.addFile(e)}):n.isDirectory&&i._addFilesFromDirectory(n,""+t+"/"+n.name)},n.readEntries(r,function(e){return typeof console!="undefined"&&console!==null?typeof console.log=="function"?console.log(e):void 0:void 0})},n.prototype.accept=function(e,t){return e.size>this.options.maxFilesize*1024*1024?t(this.options.dictFileTooBig.replace("{{filesize}}",Math.round(e.size/1024/10.24)/100).replace("{{maxFilesize}}",this.options.maxFilesize)):n.isValidFile(e,this.options.acceptedFiles)?this.options.maxFiles!=null&&this.getAcceptedFiles().length>=this.options.maxFiles?(t(this.options.dictMaxFilesExceeded.replace("{{maxFiles}}",this.options.maxFiles)),this.emit("maxfilesexceeded",e)):this.options.accept.call(this,e,t):t(this.options.dictInvalidFileType)},n.prototype.addFile=function(e){var t=this;return e.upload={progress:0,total:e.size,bytesSent:0},this.files.push(e),e.status=n.ADDED,this.emit("addedfile",e),this._enqueueThumbnail(e),this.accept(e,function(n){return n?(e.accepted=!1,t._errorProcessing([e],n)):t.enqueueFile(e),t._updateMaxFilesReachedClass()})},n.prototype.enqueueFiles=function(e){var t,n,r;for(n=0,r=e.length;n<r;n++)t=e[n],this.enqueueFile(t);return null},n.prototype.enqueueFile=function(e){var t=this;e.accepted=!0;if(e.status!==n.ADDED)throw new Error("This file can't be queued because it has already been processed or was rejected.");e.status=n.QUEUED;if(this.options.autoProcessQueue)return setTimeout(function(){return t.processQueue()},0)},n.prototype._thumbnailQueue=[],n.prototype._processingThumbnail=!1,n.prototype._enqueueThumbnail=function(e){var t=this;if(this.options.createImageThumbnails&&e.type.match(/image.*/)&&e.size<=this.options.maxThumbnailFilesize*1024*1024)return this._thumbnailQueue.push(e),setTimeout(function(){return t._processThumbnailQueue()},0)},n.prototype._processThumbnailQueue=function(){var e=this;if(this._processingThumbnail||this._thumbnailQueue.length===0)return;return this._processingThumbnail=!0,this.createThumbnail(this._thumbnailQueue.shift(),function(){return e._processingThumbnail=!1,e._processThumbnailQueue()})},n.prototype.removeFile=function(e){e.status===n.UPLOADING&&this.cancelUpload(e),this.files=l(this.files,e),this.emit("removedfile",e);if(this.files.length===0)return this.emit("reset")},n.prototype.removeAllFiles=function(e){var t,r,i,s;e==null&&(e=!1),s=this.files.slice();for(r=0,i=s.length;r<i;r++)t=s[r],(t.status!==n.UPLOADING||e)&&this.removeFile(t);return null},n.prototype.createThumbnail=function(e,t){var n,r=this;return n=new FileReader,n.onload=function(){var i;return i=document.createElement("img"),i.onload=function(){var n,s,o,u,f,l,c,h;e.width=i.width,e.height=i.height,o=r.options.resize.call(r,e),o.trgWidth==null&&(o.trgWidth=r.options.thumbnailWidth),o.trgHeight==null&&(o.trgHeight=r.options.thumbnailHeight),n=document.createElement("canvas"),s=n.getContext("2d"),n.width=o.trgWidth,n.height=o.trgHeight,a(s,i,(f=o.srcX)!=null?f:0,(l=o.srcY)!=null?l:0,o.srcWidth,o.srcHeight,(c=o.trgX)!=null?c:0,(h=o.trgY)!=null?h:0,o.trgWidth,o.trgHeight),u=n.toDataURL("image/png"),r.emit("thumbnail",e,u);if(t!=null)return t()},i.src=n.result},n.readAsDataURL(e)},n.prototype.processQueue=function(){var e,t,n,r;t=this.options.parallelUploads,n=this.getUploadingFiles().length,e=n;if(n>=t)return;r=this.getQueuedFiles();if(!(r.length>0))return;if(this.options.uploadMultiple)return this.processFiles(r.slice(0,t-n));while(e<t){if(!r.length)return;this.processFile(r.shift()),e++}},n.prototype.processFile=function(e){return this.processFiles([e])},n.prototype.processFiles=function(e){var t,r,i;for(r=0,i=e.length;r<i;r++)t=e[r],t.processing=!0,t.status=n.UPLOADING,this.emit("processing",t);return this.options.uploadMultiple&&this.emit("processingmultiple",e),this.uploadFiles(e)},n.prototype._getFilesWithXhr=function(e){var t,n;return n=function(){var n,r,i,s;i=this.files,s=[];for(n=0,r=i.length;n<r;n++)t=i[n],t.xhr===e&&s.push(t);return s}.call(this)},n.prototype.cancelUpload=function(e){var t,r,i,s,o,u,a;if(e.status===n.UPLOADING){r=this._getFilesWithXhr(e.xhr);for(i=0,o=r.length;i<o;i++)t=r[i],t.status=n.CANCELED;e.xhr.abort();for(s=0,u=r.length;s<u;s++)t=r[s],this.emit("canceled",t);this.options.uploadMultiple&&this.emit("canceledmultiple",r)}else if((a=e.status)===n.ADDED||a===n.QUEUED)e.status=n.CANCELED,this.emit("canceled",e),this.options.uploadMultiple&&this.emit("canceledmultiple",[e]);if(this.options.autoProcessQueue)return this.processQueue()},n.prototype.uploadFile=function(e){return this.uploadFiles([e])},n.prototype.uploadFiles=function(e){var r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S,x,T,N,C,k,L,A,O,M,_,D,P=this;y=new XMLHttpRequest;for(b=0,x=e.length;b<x;b++)r=e[b],r.xhr=y;y.open(this.options.method,this.options.url,!0),y.withCredentials=!!this.options.withCredentials,v=null,s=function(){var t,n,i;i=[];for(t=0,n=e.length;t<n;t++)r=e[t],i.push(P._errorProcessing(e,v||P.options.dictResponseError.replace("{{statusCode}}",y.status),y));return i},m=function(t){var n,i,s,o,u,a,f,l,c;if(t!=null){i=100*t.loaded/t.total;for(s=0,a=e.length;s<a;s++)r=e[s],r.upload={progress:i,total:t.total,bytesSent:t.loaded}}else{n=!0,i=100;for(o=0,f=e.length;o<f;o++){r=e[o];if(r.upload.progress!==100||r.upload.bytesSent!==r.upload.total)n=!1;r.upload.progress=i,r.upload.bytesSent=r.upload.total}if(n)return}c=[];for(u=0,l=e.length;u<l;u++)r=e[u],c.push(P.emit("uploadprogress",r,i,r.upload.bytesSent));return c},y.onload=function(t){var r;if(e[0].status===n.CANCELED)return;if(y.readyState!==4)return;v=y.responseText;if(y.getResponseHeader("content-type")&&~y.getResponseHeader("content-type").indexOf("application/json"))try{v=JSON.parse(v)}catch(i){t=i,v="Invalid JSON response from server."}return m(),200<=(r=y.status)&&r<300?P._finished(e,v,t):s()},y.onerror=function(){if(e[0].status===n.CANCELED)return;return s()},d=(A=y.upload)!=null?A:y,d.onprogress=m,a={Accept:"application/json","Cache-Control":"no-cache","X-Requested-With":"XMLHttpRequest"},this.options.headers&&t(a,this.options.headers);for(o in a)u=a[o],y.setRequestHeader(o,u);i=new FormData;if(this.options.params){O=this.options.params;for(h in O)g=O[h],i.append(h,g)}for(w=0,T=e.length;w<T;w++)r=e[w],this.emit("sending",r,y,i);this.options.uploadMultiple&&this.emit("sendingmultiple",e,y,i);if(this.element.tagName==="FORM"){M=this.element.querySelectorAll("input, textarea, select, button");for(E=0,N=M.length;E<N;E++){f=M[E],l=f.getAttribute("name"),c=f.getAttribute("type");if(f.tagName==="SELECT"&&f.hasAttribute("multiple")){_=f.options;for(S=0,C=_.length;S<C;S++)p=_[S],p.selected&&i.append(l,p.value)}else(!c||(D=c.toLowerCase())!=="checkbox"&&D!=="radio"||f.checked)&&i.append(l,f.value)}}for(L=0,k=e.length;L<k;L++)r=e[L],i.append(""+this.options.paramName+(this.options.uploadMultiple?"[]":""),r,r.name);return y.send(i)},n.prototype._finished=function(e,t,r){var i,s,o;for(s=0,o=e.length;s<o;s++)i=e[s],i.status=n.SUCCESS,this.emit("success",i,t,r),this.emit("complete",i);this.options.uploadMultiple&&(this.emit("successmultiple",e,t,r),this.emit("completemultiple",e));if(this.options.autoProcessQueue)return this.processQueue()},n.prototype._errorProcessing=function(e,t,r){var i,s,o;for(s=0,o=e.length;s<o;s++)i=e[s],i.status=n.ERROR,this.emit("error",i,t,r),this.emit("complete",i);this.options.uploadMultiple&&(this.emit("errormultiple",e,t,r),this.emit("completemultiple",e));if(this.options.autoProcessQueue)return this.processQueue()},n}(i),r.version="3.8.4",r.options={},r.optionsForElement=function(e){return e.getAttribute("id")?r.options[s(e.getAttribute("id"))]:void 0},r.instances=[],r.forElement=function(e){typeof e=="string"&&(e=document.querySelector(e));if((e!=null?e.dropzone:void 0)==null)throw new Error("No Dropzone found for given element. This is probably because you're trying to access it before Dropzone had the time to initialize. Use the `init` option to setup any additional observers on your Dropzone.");return e.dropzone},r.autoDiscover=!0,r.discover=function(){var e,t,n,i,s,o;document.querySelectorAll?n=document.querySelectorAll(".dropzone"):(n=[],e=function(e){var t,r,i,s;s=[];for(r=0,i=e.length;r<i;r++)t=e[r],/(^| )dropzone($| )/.test(t.className)?s.push(n.push(t)):s.push(void 0);return s},e(document.getElementsByTagName("div")),e(document.getElementsByTagName("form"))),o=[];for(i=0,s=n.length;i<s;i++)t=n[i],r.optionsForElement(t)!==!1?o.push(new r(t)):o.push(void 0);return o},r.blacklistedBrowsers=[/opera.*Macintosh.*version\/12/i],r.isBrowserSupported=function(){var e,t,n,i,s;e=!0;if(window.File&&window.FileReader&&window.FileList&&window.Blob&&window.FormData&&document.querySelector)if("classList"in document.createElement("a")){s=r.blacklistedBrowsers;for(n=0,i=s.length;n<i;n++){t=s[n];if(t.test(navigator.userAgent)){e=!1;continue}}}else e=!1;else e=!1;return e},l=function(e,t){var n,r,i,s;s=[];for(r=0,i=e.length;r<i;r++)n=e[r],n!==t&&s.push(n);return s},s=function(e){return e.replace(/[\-_](\w)/g,function(e){return e[1].toUpperCase()})},r.createElement=function(e){var t;return t=document.createElement("div"),t.innerHTML=e,t.childNodes[0]},r.elementInside=function(e,t){if(e===t)return!0;while(e=e.parentNode)if(e===t)return!0;return!1},r.getElement=function(e,t){var n;typeof e=="string"?n=document.querySelector(e):e.nodeType!=null&&(n=e);if(n==null)throw new Error("Invalid `"+t+"` option provided. Please provide a CSS selector or a plain HTML element.");return n},r.getElements=function(e,t){var n,r,i,s,o,u,a,f;if(e instanceof Array){i=[];try{for(s=0,u=e.length;s<u;s++)r=e[s],i.push(this.getElement(r,t))}catch(l){n=l,i=null}}else if(typeof e=="string"){i=[],f=document.querySelectorAll(e);for(o=0,a=f.length;o<a;o++)r=f[o],i.push(r)}else e.nodeType!=null&&(i=[e]);if(i==null||!i.length)throw new Error("Invalid `"+t+"` option provided. Please provide a CSS selector, a plain HTML element or a list of those.");return i},r.confirm=function(e,t,n){if(window.confirm(e))return t();if(n!=null)return n()},r.isValidFile=function(e,t){var n,r,i,s,o;if(!t)return!0;t=t.split(","),r=e.type,n=r.replace(/\/.*$/,"");for(s=0,o=t.length;s<o;s++){i=t[s],i=i.trim();if(i.charAt(0)==="."){if(e.name.toLowerCase().indexOf(i.toLowerCase(),e.name.length-i.length)!==-1)return!0}else if(/\/\*$/.test(i)){if(n===i.replace(/\/.*$/,""))return!0}else if(r===i)return!0}return!1},typeof e!="undefined"&&e!==null&&(e.fn.dropzone=function(e){return this.each(function(){return new r(this,e)})}),typeof t!="undefined"&&t!==null?t.exports=r:window.Dropzone=r,r.ADDED="added",r.QUEUED="queued",r.ACCEPTED=r.QUEUED,r.UPLOADING="uploading",r.PROCESSING=r.UPLOADING,r.CANCELED="canceled",r.ERROR="error",r.SUCCESS="success",u=function(e){var t,n,r,i,s,o,u,a,f,l;u=e.naturalWidth,o=e.naturalHeight,n=document.createElement("canvas"),n.width=1,n.height=o,r=n.getContext("2d"),r.drawImage(e,0,0),i=r.getImageData(0,0,1,o).data,l=0,s=o,a=o;while(a>l)t=i[(a-1)*4+3],t===0?s=a:l=a,a=s+l>>1;return f=a/o,f===0?1:f},a=function(e,t,n,r,i,s,o,a,f,l){var c;return c=u(t),e.drawImage(t,n,r,i,s,o,a,f,l/c)},o=function(e,t){var n,r,i,s,o,u,a,f,l;i=!1,l=!0,r=e.document,f=r.documentElement,n=r.addEventListener?"addEventListener":"attachEvent",a=r.addEventListener?"removeEventListener":"detachEvent",u=r.addEventListener?"":"on",s=function(n){if(n.type==="readystatechange"&&r.readyState!=="complete")return;(n.type==="load"?e:r)[a](u+n.type,s,!1);if(!i&&(i=!0))return t.call(e,n.type||n)},o=function(){var e;try{f.doScroll("left")}catch(t){e=t,setTimeout(o,50);return}return s("poll")};if(r.readyState!=="complete"){if(r.createEventObject&&f.doScroll){try{l=!e.frameElement}catch(c){}l&&o()}return r[n](u+"DOMContentLoaded",s,!1),r[n](u+"readystatechange",s,!1),e[n](u+"load",s,!1)}},r._autoDiscoverFunction=function(){if(r.autoDiscover)return r.discover()},o(window,r._autoDiscoverFunction)}.call(this),t.exports}),define("mockup-patterns-dropzone",["jquery","mockup-patterns-base","dropzone","underscore"],function(e,t,n,r){n.autoDiscover=!1;var i=t.extend({name:"dropzone",defaults:{url:null,className:"dropzone",paramName:"file",uploadMultiple:!1,clickable:!1,wrap:!1,addRemoveLinks:!1,wrapperTemplate:'<div class="dropzone-container"/>',autoCleanResults:!1,previewsContainer:".dropzone-previews",previewsTemplate:'<div class="dropzone-previews"></div>',fileaddedClassName:"dropping",useTus:!1,maxFilesize:99999999},init:function(){function c(){l=!0;if(t.dropzone.files.length===0){l=!1,t.$dropzone.removeClass(o);return}var r=t.dropzone.files[0],i=e(r.previewElement);if([n.SUCCESS,n.ERROR,n.CANCELED].indexOf(r.status)!==-1)t.dropzone.removeFile(r),c();else if(r.status!==n.UPLOADING){if(u&&window.tus){var s=i.find("[data-dz-uploadprogress]");r.status=n.UPLOADING,window.tus.upload(r,{endpoint:t.options.url,headers:{FILENAME:r.name},chunkSize:5242880}).fail(function(){alert("Error uploading with TUS resumable uploads"),r.status=n.ERROR}).progress(function(e,n,r){var o=n/r*100;s.css("width",o+"%"),s.parent().css("display","block");var u=i.find(".dz-size");u.html("uploading...<br />"+t.formatBytes(n)+" / "+t.formatBytes(r))}).done(function(e,r){r.status=n.SUCCESS,t.dropzone.emit("success",r),t.dropzone.emit("complete",r)})}else t.dropzone.processFile(r);setTimeout(c,100)}else setTimeout(c,100)}var t=this;typeof t.options.clickable=="string"&&(t.options.clickable==="true"?t.options.clickable=!0:t.options.clickable=!1);if(!t.options.url&&t.$el[0].tagName==="FORM"){var r=t.$el.attr("action");r||(r=window.location.href),t.options.url=r}var i=t.$el;t.options.wrap&&(t.options.wrap==="inner"?(i.wrapInner(t.options.wrapperTemplate),i=i.children().eq(0)):(i.wrap(t.options.wrapperTemplate),i=i.parent())),i.append('<div class="dz-notice"><p>Drop files here...</p></div>'),t.options.previewsContainer===".dropzone-previews"&&i.append(t.options.previewsTemplate);var s=t.options.autoCleanResults;i.addClass(t.options.className);var o=t.options.fileaddedClassName,u=t.options.useTus,a=e.extend({},t.options);delete a.wrap,delete a.wrapperTemplate,delete a.resultTemplate,delete a.autoCleanResults,delete a.previewsTemplate,delete a.fileaddedClassName,delete a.useTus;if(t.options.previewsContainer){var f=i.find(t.options.previewsContainer);f.length>0&&(a.previewsContainer=f[0])}a.autoProcessQueue=!1,t.dropzone=new n(i[0],a),t.$dropzone=i,s&&t.dropzone.on("complete",function(t){setTimeout(function(){e(t.previewElement).fadeOut()},3e3)});var l=!1;t.dropzone.on("addedfile",function(){t.$dropzone.addClass(o),setTimeout(function(){l||c()},100)})},formatBytes:function(e){var t=Math.round(e/1024);if(t<1024)return t+" KiB";var n=Math.round(t/1024);return n<1024?n+" MB":Math.round(n/1024)+" GB"}});return i}),define("text!js/patterns/dropzone.js",[],function(){return"/* Dropzone pattern.\n *\n * Options:\n *    url(string): If not used with a form, this option must provide the URL to submit to (null)\n *    clickable(boolean): If you can click on container to also upload (false)\n *    className(string): value for class attribute in the form element ('dropzone')\n *    paramName(string): value for name attribute in the file input element ('file')\n *    uploadMultiple(boolean): condition value for multiple attribute in the file input element. If the value is 'true' and paramName is file, 'multiple=multiple' and 'name=file[]' will be added in the file input. (false)\n *    wrap(boolean): true or false for wrapping this element using the value of wrapperTemplate. If the value is 'inner', this element will wrap the wrapperTemplate value. (false)\n *    wrapperTemplate(string): HTML template for wrapping around with this element. ('<div class='dropzone-container\"/>')\n *    resultTemplate(string): HTML template for the element that will contain file information. ('<div class=\"dz-notice\"><p>Drop files here...</p></div><div class=\"dropzone-previews\"/>')\n *    autoCleanResults(boolean): condition value for the file preview in div element to fadeout after file upload is completed. (false)\n *    previewsContainer(selector): JavaScript selector for file preview in div element. (.dropzone-previews)\n *\n * Documentation:\n *    # On a form element\n *\n *    {{ example-1 }}\n *\n *    # On a div element\n *\n *    {{ example-2 }}\n *\n *    # With custom style\n *\n *    {{ example-3 }}\n *\n * Example: example-1\n *    <form method=\"post\" action=\"/upload\" enctype=\"multipart/form-data\"\n *          class=\"pat-dropzone\" data-pat-dropzone=\"clickable:true\">\n *    </form>\n *\n * Example: example-2\n *    <div class=\"pat-dropzone\" data-pat-dropzone=\"url: /upload\">\n *      <div>\n *        <p>Something here that is useful</p>\n *        <p>Something else here that is useful</p>\n *        <p>Another thing here that is useful</p>\n *      </div>\n *    </div>\n *\n * Example: example-3\n *    <style>\n *      .mydropzone{\n *        width: 400px;\n *        height: 100px;\n *        background-color: gray;\n *      }\n *      .mydropzone.dz-drag-hover{\n *        background-color: red;\n *      }\n *    </style>\n *    <div class=\"pat-dropzone\"\n *         data-pat-dropzone=\"url: /upload; className: mydropzone\">\n *      Drop here...\n *    </div>\n *\n * License:\n *    Copyright (C) 2010 Plone Foundation\n *\n *    This program is free software; you can redistribute it and/or modify it\n *    under the terms of the GNU General Public License as published by the\n *    Free Software Foundation; either version 2 of the License.\n *\n *    This program is distributed in the hope that it will be useful, but\n *    WITHOUT ANY WARRANTY; without even the implied warranty of\n *    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General\n *    Public License for more details.\n *\n *    You should have received a copy of the GNU General Public License along\n *    with this program; if not, write to the Free Software Foundation, Inc.,\n *    51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA.\n */\n\n /* globals alert:true */\n\ndefine([\n  'jquery',\n  'mockup-patterns-base',\n  'dropzone',\n  'underscore'\n], function($, Base, Dropzone, _) {\n  'use strict';\n\n  /* we do not want this plugin to auto discover */\n  Dropzone.autoDiscover = false;\n\n  var DropzonePattern = Base.extend({\n    name: 'dropzone',\n    defaults: {\n      url: null, // XXX MUST provide url to submit to OR be in a form\n      className: 'dropzone',\n      paramName: 'file',\n      uploadMultiple: false,\n      clickable: false,\n      wrap: false,\n      addRemoveLinks: false,\n      wrapperTemplate: '<div class=\"dropzone-container\"/>',\n      autoCleanResults: false,\n      previewsContainer: '.dropzone-previews',\n      previewsTemplate: '<div class=\"dropzone-previews\"></div>',\n      fileaddedClassName: 'dropping',\n      useTus: false,\n      maxFilesize: 99999999 // let's not have a max by default...\n    },\n    init: function() {\n      var self = this;\n      if (typeof(self.options.clickable) === 'string') {\n        if (self.options.clickable === 'true') {\n          self.options.clickable = true;\n        } else {\n          self.options.clickable = false;\n        }\n      }\n      if (!self.options.url && self.$el[0].tagName === 'FORM') {\n        var url = self.$el.attr('action');\n        if (!url) {\n          // form without action, defaults to current url\n          url = window.location.href;\n        }\n        self.options.url = url;\n      }\n      var $el = self.$el;\n      if (self.options.wrap) {\n        if (self.options.wrap === 'inner') {\n          $el.wrapInner(self.options.wrapperTemplate);\n          $el = $el.children().eq(0);\n        } else {\n          $el.wrap(self.options.wrapperTemplate);\n          $el = $el.parent();\n        }\n      }\n      $el.append('<div class=\"dz-notice\"><p>Drop files here...</p></div>');\n      if (self.options.previewsContainer === '.dropzone-previews') {\n        $el.append(self.options.previewsTemplate);\n      }\n\n      var autoClean = self.options.autoCleanResults;\n      $el.addClass(self.options.className);\n      var fileaddedClassName = self.options.fileaddedClassName;\n      var useTus = self.options.useTus;\n\n      // clean up options\n      var options = $.extend({}, self.options);\n      delete options.wrap;\n      delete options.wrapperTemplate;\n      delete options.resultTemplate;\n      delete options.autoCleanResults;\n      delete options.previewsTemplate;\n      delete options.fileaddedClassName;\n      delete options.useTus;\n\n      if (self.options.previewsContainer) {\n        /*\n         * if they have a select but it's not an id, let's make an id selector\n         * so we can target the correct container. dropzone is weird here...\n         */\n        var $preview = $el.find(self.options.previewsContainer);\n        if ($preview.length > 0) {\n          options.previewsContainer = $preview[0];\n        }\n      }\n\n      options.autoProcessQueue = false;\n      self.dropzone = new Dropzone($el[0], options);\n      self.$dropzone = $el;\n\n\n      if (autoClean) {\n        self.dropzone.on('complete', function(file) {\n          setTimeout(function() {\n            $(file.previewElement).fadeOut();\n          }, 3000);\n        });\n      }\n\n      /* customize file processing */\n      var processing = false;\n      function process() {\n        processing = true;\n        if (self.dropzone.files.length === 0) {\n          processing = false;\n          self.$dropzone.removeClass(fileaddedClassName);\n          return;\n        }\n        var file = self.dropzone.files[0];\n        var $preview = $(file.previewElement);\n        if ([Dropzone.SUCCESS, Dropzone.ERROR, Dropzone.CANCELED].indexOf(file.status) !== -1) {\n          // remove it\n          self.dropzone.removeFile(file);\n          process();\n        } else if (file.status !== Dropzone.UPLOADING) {\n          // start processing file\n          if (useTus && window.tus) {\n            // use tus upload if installed\n            var $progress = $preview.find('[data-dz-uploadprogress]');\n            file.status = Dropzone.UPLOADING;\n            window.tus.upload(file, {\n              endpoint: self.options.url,\n              headers: {\n                'FILENAME': file.name\n              },\n              chunkSize: 1024 * 1024 * 5 // 5mb chunk size\n            }).fail(function() {\n              alert('Error uploading with TUS resumable uploads');\n              file.status = Dropzone.ERROR;\n            }).progress(function(e, bytesUploaded, bytesTotal) {\n              var percentage = (bytesUploaded / bytesTotal * 100);\n              $progress.css('width', percentage + '%');\n              $progress.parent().css('display', 'block');\n              var $size = $preview.find('.dz-size');\n              $size.html('uploading...<br />' + self.formatBytes(bytesUploaded) + ' / ' + self.formatBytes(bytesTotal));\n            }).done(function(url, file) {\n              file.status = Dropzone.SUCCESS;\n              self.dropzone.emit('success', file);\n              self.dropzone.emit('complete', file);\n            });\n          } else {\n            // otherwise, just use dropzone to process\n            self.dropzone.processFile(file);\n          }\n          setTimeout(process, 100);\n        } else {\n          // currently processing\n          setTimeout(process, 100);\n        }\n      }\n      self.dropzone.on('addedfile', function() {\n        self.$dropzone.addClass(fileaddedClassName);\n        setTimeout(function() {\n          if (!processing) {\n            process();\n          }\n        }, 100);\n      });\n    },\n    formatBytes: function(bytes) {\n      var kb = Math.round(bytes / 1024);\n      if (kb < 1024) {\n        return kb + ' KiB';\n      }\n      var mb = Math.round(kb / 1024);\n      if (mb < 1024) {\n        return mb + ' MB';\n      }\n      return Math.round(mb / 1024) + ' GB';\n    }\n  });\n\n  return DropzonePattern;\n\n});\n"}),define("mockup-patterns-expose",["jquery","mockup-patterns-base","mockup-patterns-backdrop"],function(e,t,n){var r=t.extend({name:"expose",defaults:{triggers:"focusin",classActiveName:"active",backdrop:"body",backdropZIndex:null,backdropOpacity:"0.8",backdropClassName:"backdrop",backdropClassActiveName:"backdrop-active",backdropCloseOnEsc:!0,backdropCloseOnClick:!0},init:function(){var t=this;t.backdrop=new n(t.$el.parents(t.options.backdrop),{zindex:t.options.backdropZIndex,className:t.options.backdropClassName,classActiveName:t.options.backdropClassActiveName,styles:t.options.backdropStyles,opacity:t.options.backdropOpacity,closeOnEsc:t.options.backdropCloseOnEsc,closeOnClick:t.options.backdropCloseOnClick}),t.options.triggers&&e.each(t.options.triggers.split(","),function(n,r){r=r.split(" "),e(r[1]||t.$el).on(r[0],function(){t.show()})}),t.backdrop.on("hidden",function(){t.hide()})},show:function(){var e=this;e.$el.hasClass(e.options.classActiveName)||(e.trigger("show"),e.$el.addClass(e.options.classActiveName),e.backdrop.show(),e._initialZIndex=e.$el.css("z-index"),e.$el.css("z-index",e.options.backdropZIndex!==null?e.options.backdropZIndex+1:1041),e.$el.css("opacity","0"),e.$el.animate({opacity:"1"},500),e.trigger("shown"))},hide:function(){var e=this;e.$el.hasClass(e.options.classActiveName)&&(e.trigger("hide"),e.backdrop.hide(),e.$el.css("z-index",e._initialZIndex),e.$el.removeClass(e.options.classActiveName),e.trigger("hidden"))}});return r}),define("text!js/patterns/expose.js",[],function(){return"/* Expose pattern.\n *\n * Options:\n *    backdrop(string): Selector of parent element to use as backdrop. ('body')\n *    backdropCloseOnClick(boolean): Cancel expose on click if true. (true)\n *    backdropCloseOnEsc(boolean): Cancel expose on escape if true. (true)\n *    backdropClassName(string): TODO ('backdrop')\n *    backdropClassActiveName(string): TODO ('backdrop-active')\n *    backdropOpacity(float): Backdrop opacity value between 0 and 1. (0.8)\n *    backdropZIndex(integer): Z-index of backdrop overlay. (null)\n *    classActiveName(string): TODO ('active')\n *    triggers(string): Events that cause the expose feature to be triggered. ('focusin')\n *\n * Documentation:\n *    # Expose on focus event (default)\n *\n *    {{ example-1 }}\n *\n *    # Expose on hover\n *\n *    {{ example-2 }}\n *\n * Example: example-1\n *    <form id=\"mockup-expose\" class=\"form-horizontal pat-expose\">\n *      <div class=\"control-group\">\n *        <label class=\"control-label\" for=\"inputEmail\">Email</label>\n *        <div class=\"controls\">\n *          <input type=\"text\" id=\"inputEmail\" placeholder=\"Email\">\n *        </div>\n *      </div>\n *      <div class=\"control-group\">\n *        <label class=\"control-label\" for=\"inputPassword\">Password</label>\n *        <div class=\"controls\">\n *          <input type=\"password\" id=\"inputPassword\" placeholder=\"Password\">\n *        </div>\n *      </div>\n *      <div class=\"control-group\">\n *        <div class=\"controls\">\n *          <label class=\"checkbox\">\n *            <input type=\"checkbox\"> Remember me\n *          </label>\n *          <button type=\"submit\" class=\"btn\">Sign in</button>\n *        </div>\n *      </div>\n *    </form>\n *\n * Example: example-2\n *    <button type=\"submit\" class=\"btn btn-large pat-expose\"\n *            data-pat-expose=\"triggers:hover\">Hover over this button</button>\n *\n * License:\n *    Copyright (C) 2010 Plone Foundation\n *\n *    This program is free software; you can redistribute it and/or modify it\n *    under the terms of the GNU General Public License as published by the\n *    Free Software Foundation; either version 2 of the License.\n *\n *    This program is distributed in the hope that it will be useful, but\n *    WITHOUT ANY WARRANTY; without even the implied warranty of\n *    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General\n *    Public License for more details.\n *\n *    You should have received a copy of the GNU General Public License along\n *    with this program; if not, write to the Free Software Foundation, Inc.,\n *    51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA.\n */\n\n\ndefine([\n  'jquery',\n  'mockup-patterns-base',\n  'mockup-patterns-backdrop'\n], function($, Base, Backdrop) {\n  'use strict';\n\n  var Expose = Base.extend({\n    name: 'expose',\n    defaults: {\n      triggers: 'focusin',\n      classActiveName: 'active',\n      backdrop: 'body',\n      backdropZIndex: null,\n      backdropOpacity: '0.8',\n      backdropClassName: 'backdrop',\n      backdropClassActiveName: 'backdrop-active',\n      backdropCloseOnEsc: true,\n      backdropCloseOnClick: true\n    },\n    init: function() {\n      var self = this;\n\n      self.backdrop = new Backdrop(self.$el.parents(self.options.backdrop), {\n        zindex: self.options.backdropZIndex,\n        className: self.options.backdropClassName,\n        classActiveName: self.options.backdropClassActiveName,\n        styles: self.options.backdropStyles,\n        opacity: self.options.backdropOpacity,\n        closeOnEsc: self.options.backdropCloseOnEsc,\n        closeOnClick: self.options.backdropCloseOnClick\n      });\n      if (self.options.triggers) {\n        $.each(self.options.triggers.split(','), function(i, item) {\n          item = item.split(' ');\n          $(item[1] || self.$el).on(item[0], function() {\n            self.show();\n          });\n        });\n      }\n      self.backdrop.on('hidden', function() { self.hide(); });\n    },\n    show: function() {\n      var self = this;\n      if (!self.$el.hasClass(self.options.classActiveName)) {\n        self.trigger('show');\n        self.$el.addClass(self.options.classActiveName);\n        self.backdrop.show();\n        self._initialZIndex = self.$el.css('z-index');\n        self.$el.css('z-index', self.options.backdropZIndex !== null ? self.options.backdropZIndex + 1 : 1041);\n        self.$el.css('opacity', '0');\n        self.$el.animate({ opacity: '1' }, 500);\n        self.trigger('shown');\n      }\n    },\n    hide: function() {\n      var self = this;\n      if (self.$el.hasClass(self.options.classActiveName)) {\n        self.trigger('hide');\n        self.backdrop.hide();\n        self.$el.css('z-index', self._initialZIndex);\n        self.$el.removeClass(self.options.classActiveName);\n        self.trigger('hidden');\n      }\n    }\n  });\n\n  return Expose;\n\n});\n"}),define("js/ui/views/base",["underscore","backbone"],function(e,t){var n=t.View.extend({isUIView:!0,eventPrefix:"ui",template:null,appendInContainer:!0,initialize:function(e){this.options=e;for(var t in this.options)this[t]=this.options[t]},render:function(){return this.applyTemplate(),this.trigger("render",this),this.afterRender(),!this.$el.attr("id")&&this.options.id&&this.$el.attr("id","gen-"+this.options.id),this},afterRender:function(){},serializedModel:function(){return this.options},applyTemplate:function(){this.template!==null&&this.$el.html(e.template(this.template,this.serializedModel()))},propagateEvent:function(e){if(e.indexOf(":")>0){var t=e.split(":")[0];if(this.eventPrefix!=="")if(t===this.eventPrefix||t===this.eventPrefix+"."+this.id)return!0}return!1},uiEventTrigger:function(e){var n=[].slice.call(arguments,0);this.eventPrefix!==""&&(n[0]=this.eventPrefix+":"+e,t.View.prototype.trigger.apply(this,n),this.id&&(n[0]=this.eventPrefix+"."+this.id+":"+e,t.View.prototype.trigger.apply(this,n)))}});return n}),function(){var e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S,x,T,N,C=[].slice,k={}.hasOwnProperty,L=function(e,t){function r(){this.constructor=e}for(var n in t)k.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};e=this.jQuery,g=function(){function t(t,n){this.$el=e(t),this.options=e.extend({},this.defaults,n)}return t.prototype.defaults={},t.prototype.destroy=function(){return this._deinit()},t.prototype._init=function(){return null},t.prototype._deinit=function(){return null},t.register=function(n,r){var i,s,o,u,a;return u=function(){return"simple_widget_"+r},a=function(n,r){var i;return i=e.data(n,r),i&&i instanceof t?i:null},s=function(t,r){var i,s,o,f,l,c;i=u();for(l=0,c=t.length;l<c;l++)s=t[l],o=a(s,i),o||(f=new n(s,r),e.data(s,i)||e.data(s,i,f),f._init());return t},o=function(t){var n,r,i,s,o,f;n=u(),f=[];for(s=0,o=t.length;s<o;s++)r=t[s],i=a(r,n),i&&i.destroy(),f.push(e.removeData(r,n));return f},i=function(n,r,i){var s,o,a,f,l,c;o=null;for(l=0,c=n.length;l<c;l++)s=n[l],a=e.data(s,u()),a&&a instanceof t&&(f=a[r],f&&typeof f=="function"&&(o=f.apply(a,i)));return o},e.fn[r]=function(){var e,t,n,r,u;n=arguments[0],t=2<=arguments.length?C.call(arguments,1):[],e=this;if(n===void 0||typeof n=="object")return u=n,s(e,u);if(typeof n=="string"&&n[0]!=="_")return r=n,r==="destroy"?o(e):i(e,r,t)}},t}(),this.SimpleWidget=g,l=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return L(n,t),n.is_mouse_handled=!1,n.prototype._init=function(){return this.$el.bind("mousedown.mousewidget",e.proxy(this._mouseDown,this)),this.$el.bind("touchstart.mousewidget",e.proxy(this._touchStart,this)),this.is_mouse_started=!1,this.mouse_delay=0,this._mouse_delay_timer=null,this._is_mouse_delay_met=!0,this.mouse_down_info=null},n.prototype._deinit=function(){var t;return this.$el.unbind("mousedown.mousewidget"),this.$el.unbind("touchstart.mousewidget"),t=e(document),t.unbind("mousemove.mousewidget"),t.unbind("mouseup.mousewidget")},n.prototype._mouseDown=function(e){var t;if(e.which!==1)return;return t=this._handleMouseDown(e,this._getPositionInfo(e)),t&&e.preventDefault(),t},n.prototype._handleMouseDown=function(e,t){if(n.is_mouse_handled)return;this.is_mouse_started&&this._handleMouseUp(t),this.mouse_down_info=t;if(!this._mouseCapture(t))return;return this._handleStartMouse(),this.is_mouse_handled=!0,!0},n.prototype._handleStartMouse=function(){var t;t=e(document),t.bind("mousemove.mousewidget",e.proxy(this._mouseMove,this)),t.bind("touchmove.mousewidget",e.proxy(this._touchMove,this)),t.bind("mouseup.mousewidget",e.proxy(this._mouseUp,this)),t.bind("touchend.mousewidget",e.proxy(this._touchEnd,this));if(this.mouse_delay)return this._startMouseDelayTimer()},n.prototype._startMouseDelayTimer=function(){return this._mouse_delay_timer&&clearTimeout(this._mouse_delay_timer),this._mouse_delay_timer=setTimeout(function(e){return function(){return e._is_mouse_delay_met=!0}}(this),this.mouse_delay),this._is_mouse_delay_met=!1},n.prototype._mouseMove=function(e){return this._handleMouseMove(e,this._getPositionInfo(e))},n.prototype._handleMouseMove=function(e,t){return this.is_mouse_started?(this._mouseDrag(t),e.preventDefault()):this.mouse_delay&&!this._is_mouse_delay_met?!0:(this.is_mouse_started=this._mouseStart(this.mouse_down_info)!==!1,this.is_mouse_started?this._mouseDrag(t):this._handleMouseUp(t),!this.is_mouse_started)},n.prototype._getPositionInfo=function(e){return{page_x:e.pageX,page_y:e.pageY,target:e.target,original_event:e}},n.prototype._mouseUp=function(e){return this._handleMouseUp(this._getPositionInfo(e))},n.prototype._handleMouseUp=function(t){var n;n=e(document),n.unbind("mousemove.mousewidget"),n.unbind("touchmove.mousewidget"),n.unbind("mouseup.mousewidget"),n.unbind("touchend.mousewidget"),this.is_mouse_started&&(this.is_mouse_started=!1,this._mouseStop(t))},n.prototype._mouseCapture=function(e){return!0},n.prototype._mouseStart=function(e){return null},n.prototype._mouseDrag=function(e){return null},n.prototype._mouseStop=function(e){return null},n.prototype.setMouseDelay=function(e){return this.mouse_delay=e},n.prototype._touchStart=function(e){var t;if(e.originalEvent.touches.length>1)return;return t=e.originalEvent.changedTouches[0],this._handleMouseDown(e,this._getPositionInfo(t))},n.prototype._touchMove=function(e){var t;if(e.originalEvent.touches.length>1)return;return t=e.originalEvent.changedTouches[0],this._handleMouseMove(e,this._getPositionInfo(t))},n.prototype._touchEnd=function(e){var t;if(e.originalEvent.touches.length>1)return;return t=e.originalEvent.changedTouches[0],this._handleMouseUp(this._getPositionInfo(t))},n}(g),this.Tree={},e=this.jQuery,p={getName:function(e){return p.strings[e-1]},nameToIndex:function(e){var t,n,r;for(t=n=1,r=p.strings.length;1<=r?n<=r:n>=r;t=1<=r?++n:--n)if(p.strings[t-1]===e)return t;return 0}},p.BEFORE=1,p.AFTER=2,p.INSIDE=3,p.NONE=4,p.strings=["before","after","inside","none"],this.Tree.Position=p,c=function(){function t(e,n,r){n==null&&(n=!1),r==null&&(r=t),this.setData(e),this.children=[],this.parent=null,n&&(this.id_mapping={},this.tree=this,this.node_class=r)}return t.prototype.setData=function(e){var t,n,r;if(typeof e!="object")return this.name=e;r=[];for(t in e)n=e[t],t==="label"?r.push(this.name=n):r.push(this[t]=n);return r},t.prototype.initFromData=function(e){var t,n;return n=function(e){return function(n){e.setData(n);if(n.children)return t(n.children)}}(this),t=function(e){return function(t){var n,r,i,s;for(i=0,s=t.length;i<s;i++)n=t[i],r=new e.tree.node_class(""),r.initFromData(n),e.addChild(r);return null}}(this),n(e),null},t.prototype.loadFromData=function(e){var t,n,r,i;this.removeChildren();for(r=0,i=e.length;r<i;r++)n=e[r],t=new this.tree.node_class(n),this.addChild(t),typeof n=="object"&&n.children&&t.loadFromData(n.children);return null},t.prototype.addChild=function(e){return this.children.push(e),e._setParent(this)},t.prototype.addChildAtPosition=function(e,t){return this.children.splice(t,0,e),e._setParent(this)},t.prototype._setParent=function(e){return this.parent=e,this.tree=e.tree,this.tree.addNodeToIndex(this)},t.prototype.removeChild=function(e){return e.removeChildren(),this._removeChild(e)},t.prototype._removeChild=function(e){return this.children.splice(this.getChildIndex(e),1),this.tree.removeNodeFromIndex(e)},t.prototype.getChildIndex=function(t){return e.inArray(t,this.children)},t.prototype.hasChildren=function(){return this.children.length!==0},t.prototype.isFolder=function(){return this.hasChildren()||this.load_on_demand},t.prototype.iterate=function(e){var t;return t=function(n){return function(r,i){var s,o,u,a,f;if(r.children){f=r.children;for(u=0,a=f.length;u<a;u++)s=f[u],o=e(s,i),n.hasChildren()&&o&&t(s,i+1);return null}}}(this),t(this,0),null},t.prototype.moveNode=function(e,t,n){if(e.isParentOf(t))return;e.parent._removeChild(e);if(n===p.AFTER)return t.parent.addChildAtPosition(e,t.parent.getChildIndex(t)+1);if(n===p.BEFORE)return t.parent.addChildAtPosition(e,t.parent.getChildIndex(t));if(n===p.INSIDE)return t.addChildAtPosition(e,0)},t.prototype.getData=function(){var e;return e=function(t){return function(t){var n,r,i,s,o,u,a;n=[];for(u=0,a=t.length;u<a;u++){i=t[u],s={};for(r in i)o=i[r],r!=="parent"&&r!=="children"&&r!=="element"&&r!=="tree"&&Object.prototype.hasOwnProperty.call(i,r)&&(s[r]=o);i.hasChildren()&&(s.children=e(i.children)),n.push(s)}return n}}(this),e(this.children)},t.prototype.getNodeByName=function(e){var t;return t=null,this.iterate(function(n){return n.name===e?(t=n,!1):!0}),t},t.prototype.addAfter=function(e){var t,n;return this.parent?(n=new this.tree.node_class(e),t=this.parent.getChildIndex(this),this.parent.addChildAtPosition(n,t+1),n):null},t.prototype.addBefore=function(e){var t,n;return this.parent?(n=new this.tree.node_class(e),t=this.parent.getChildIndex(this),this.parent.addChildAtPosition(n,t),n):null},t.prototype.addParent=function(e){var t,n,r,i,s,o;if(!this.parent)return null;n=new this.tree.node_class(e),n._setParent(this.tree),r=this.parent,o=r.children;for(i=0,s=o.length;i<s;i++)t=o[i],n.addChild(t);return r.children=[],r.addChild(n),n},t.prototype.remove=function(){if(this.parent)return this.parent.removeChild(this),this.parent=null},t.prototype.append=function(e){var t;return t=new this.tree.node_class(e),this.addChild(t),t},t.prototype.prepend=function(e){var t;return t=new this.tree.node_class(e),this.addChildAtPosition(t,0),t},t.prototype.isParentOf=function(e){var t;t=e.parent;while(t){if(t===this)return!0;t=t.parent}return!1},t.prototype.getLevel=function(){var e,t;e=0,t=this;while(t.parent)e+=1,t=t.parent;return e},t.prototype.getNodeById=function(e){return this.id_mapping[e]},t.prototype.addNodeToIndex=function(e){if(e.id!=null)return this.id_mapping[e.id]=e},t.prototype.removeNodeFromIndex=function(e){if(e.id!=null)return delete this.id_mapping[e.id]},t.prototype.removeChildren=function(){return this.iterate(function(e){return function(t){return e.tree.removeNodeFromIndex(t),!0}}(this)),this.children=[]},t.prototype.getPreviousSibling=function(){var e;return this.parent?(e=this.parent.getChildIndex(this)-1,e>=0?this.parent.children[e]:null):null},t.prototype.getNextSibling=function(){var e;return this.parent?(e=this.parent.getChildIndex(this)+1,e<this.parent.children.length?this.parent.children[e]:null):null},t}(),this.Tree.Node=c,i=function(){function t(e){this.tree_widget=e,this.opened_icon_text=this.getHtmlText(e.options.openedIcon),this.closed_icon_text=this.getHtmlText(e.options.closedIcon)}return t.prototype.render=function(e){return e&&e.parent?this.renderFromNode(e):this.renderFromRoot()},t.prototype.renderNode=function(t){var n,r,i,s;e(t.element).remove(),i=new h(t.parent,this.tree_widget),r=i.getUl(),n=this.createLi(t),this.attachNodeData(t,n),s=t.getPreviousSibling(),s?e(s.element).after(n):i.getUl().prepend(n);if(t.children)return this.renderFromNode(t)},t.prototype.renderFromRoot=function(){var e;return e=this.tree_widget.element,e.empty(),this.createDomElements(e[0],this.tree_widget.tree.children,!0,!0)},t.prototype.renderFromNode=function(e){var t;return t=this.tree_widget._getNodeElementForNode(e),t.getUl().remove(),this.createDomElements(t.$element[0],e.children,!1,!1)},t.prototype.createDomElements=function(e,t,n,r){var i,s,o,u,a;o=this.createUl(n),e.appendChild(o);for(u=0,a=t.length;u<a;u++)i=t[u],s=this.createLi(i),o.appendChild(s),this.attachNodeData(i,s),i.hasChildren()&&this.createDomElements(s,i.children,!1,i.is_open);return null},t.prototype.attachNodeData=function(t,n){return t.element=n,e(n).data("node",t)},t.prototype.createUl=function(e){var t,n;return e?t="jqtree-tree":t="",n=document.createElement("ul"),n.className="jqtree_common "+t,n},t.prototype.createLi=function(t){var n;return t.isFolder()?n=this.createFolderLi(t):n=this.createNodeLi(t),this.tree_widget.options.onCreateLi&&this.tree_widget.options.onCreateLi(t,e(n)),n},t.prototype.createFolderLi=function(e){var t,n,r,i,s,o,u,a;return n=this.getButtonClasses(e),o=this.getFolderClasses(e),s=this.escapeIfNecessary(e.name),e.is_open?t=this.opened_icon_text:t=this.closed_icon_text,u=document.createElement("li"),u.className="jqtree_common "+o,i=document.createElement("div"),i.className="jqtree-element jqtree_common",u.appendChild(i),r=document.createElement("a"),r.className="jqtree_common "+n,r.appendChild(document.createTextNode(t)),i.appendChild(r),a=document.createElement("span"),a.className="jqtree_common jqtree-title",i.appendChild(a),a.innerHTML=s,u},t.prototype.createNodeLi=function(e){var t,n,r,i,s,o;return s=["jqtree_common"],this.tree_widget.select_node_handler&&this.tree_widget.select_node_handler.isNodeSelected(e)&&s.push("jqtree-selected"),t=s.join(" "),r=this.escapeIfNecessary(e.name),i=document.createElement("li"),i.className=t,n=document.createElement("div"),n.className="jqtree-element jqtree_common",i.appendChild(n),o=document.createElement("span"),o.className="jqtree-title jqtree_common",o.innerHTML=r,n.appendChild(o),i},t.prototype.getButtonClasses=function(e){var t;return t=["jqtree-toggler"],e.is_open||t.push("jqtree-closed"),t.join(" ")},t.prototype.getFolderClasses=function(e){var t;return t=["jqtree-folder"],e.is_open||t.push("jqtree-closed"),this.tree_widget.select_node_handler&&this.tree_widget.select_node_handler.isNodeSelected(e)&&t.push("jqtree-selected"),t.join(" ")},t.prototype.escapeIfNecessary=function(e){return this.tree_widget.options.autoEscape?b(e):e},t.prototype.getHtmlText=function(t){return e(document.createElement("div")).html(t).text()},t}(),a=function(t){function r(){return r.__super__.constructor.apply(this,arguments)}return L(r,t),r.prototype.defaults={autoOpen:!1,saveState:!1,dragAndDrop:!1,selectable:!0,useContextMenu:!0,onCanSelectNode:null,onSetStateFromStorage:null,onGetStateFromStorage:null,onCreateLi:null,onIsMoveHandle:null,onCanMove:null,onCanMoveTo:null,onLoadFailed:null,autoEscape:!0,dataUrl:null,closedIcon:"&#x25ba;",openedIcon:"&#x25bc;",slide:!0,nodeClass:c,dataFilter:null,keyboardSupport:!0,openFolderDelay:500},r.prototype.toggle=function(e,t){return t==null&&(t=!0),e.is_open?this.closeNode(e,t):this.openNode(e,t)},r.prototype.getTree=function(){return this.tree},r.prototype.selectNode=function(e){return this._selectNode(e,!1)},r.prototype._selectNode=function(e,t){var n,r,i,s;t==null&&(t=!1);if(!this.select_node_handler)return;n=function(t){return function(){return t.options.onCanSelectNode?t.options.selectable&&t.options.onCanSelectNode(e):t.options.selectable}}(this),i=function(t){return function(){var n;n=e.parent;if(n&&n.parent&&!n.is_open)return t.openNode(n,!1)}}(this),s=function(e){return function(){if(e.options.saveState)return e.save_state_handler.saveState()}}(this);if(!e){this._deselectCurrentNode(),s();return}if(!n())return;return this.select_node_handler.isNodeSelected(e)?t&&(this._deselectCurrentNode(),this._triggerEvent("tree.select",{node:null,previous_node:e})):(r=this.getSelectedNode(),this._deselectCurrentNode(),this.addToSelection(e),this._triggerEvent("tree.select",{node:e,deselected_node:r}),i()),s()},r.prototype.getSelectedNode=function(){return this.select_node_handler.getSelectedNode()},r.prototype.toJson=function(){return JSON.stringify(this.tree.getData())},r.prototype.loadData=function(e,t){return this._loadData(e,t)},r.prototype.loadDataFromUrl=function(t,n,r){return e.type(t)!=="string"&&(r=n,n=t,t=null),this._loadDataFromUrl(t,n,r)},r.prototype.reload=function(){return this.loadDataFromUrl()},r.prototype._loadDataFromUrl=function(t,n,r){var i,o,u,a;return i=null,o=function(e){return function(){var t;return n?(t=new s(n,e),i=t.getLi()):i=e.element,i.addClass("jqtree-loading")}}(this),a=function(e){return function(){if(i)return i.removeClass("jqtree-loading")}}(this),u=function(n){return function(){e.type(t)==="string"&&(t={url:t});if(!t.method)return t.method="get"}}(this),o(),t||(t=this._getDataUrlInfo(n)),u(),e.ajax({url:t.url,data:t.data,type:t.method.toUpperCase(),cache:!1,dataType:"json",success:function(t){return function(i){var s;e.isArray(i)||typeof i=="object"?s=i:s=e.parseJSON(i),t.options.dataFilter&&(s=t.options.dataFilter(s)),a(),t._loadData(s,n);if(r&&e.isFunction(r))return r()}}(this),error:function(e){return function(t){a();if(e.options.onLoadFailed)return e.options.onLoadFailed(t)}}(this)})},r.prototype._loadData=function(e,t){var n,r,i,s;if(!e)return;this._triggerEvent("tree.load_data",{tree_data:e});if(!t)this._initTree(e);else{r=this.select_node_handler.getSelectedNodesUnder(t);for(i=0,s=r.length;i<s;i++)n=r[i],this.select_node_handler.removeFromSelection(n);t.loadFromData(e),t.load_on_demand=!1,this._refreshElements(t.parent)}if(this.is_dragging)return this.dnd_handler.refreshHitAreas()},r.prototype.getNodeById=function(e){return this.tree.getNodeById(e)},r.prototype.getNodeByName=function(e){return this.tree.getNodeByName(e)},r.prototype.openNode=function(e,t){return t==null&&(t=!0),this._openNode(e,t)},r.prototype._openNode=function(e,t,n){var r,i;t==null&&(t=!0),r=function(e){return function(t,n,r){var i;return i=new s(t,e),i.open(r,n)}}(this);if(e.isFolder()){if(e.load_on_demand)return this._loadFolderOnDemand(e,t,n);i=e.parent;while(i&&!i.is_open)i.parent&&r(i,!1,null),i=i.parent;return r(e,t,n),this._saveState()}},r.prototype._loadFolderOnDemand=function(e,t,n){return t==null&&(t=!0),this._loadDataFromUrl(null,e,function(r){return function(){return r._openNode(e,t,n)}}(this))},r.prototype.closeNode=function(e,t){t==null&&(t=!0);if(e.isFolder())return(new s(e,this)).close(t),this._saveState()},r.prototype.isDragging=function(){return this.is_dragging},r.prototype.refreshHitAreas=function(){return this.dnd_handler.refreshHitAreas()},r.prototype.addNodeAfter=function(e,t){var n;return n=t.addAfter(e),this._refreshElements(t.parent),n},r.prototype.addNodeBefore=function(e,t){var n;return n=t.addBefore(e),this._refreshElements(t.parent),n},r.prototype.addParentNode=function(e,t){var n;return n=t.addParent(e),this._refreshElements(n.parent),n},r.prototype.removeNode=function(e){var t;t=e.parent;if(t)return this.select_node_handler.removeFromSelection(e,!0),e.remove(),this._refreshElements(t.parent)},r.prototype.appendNode=function(e,t){var n,r;return t||(t=this.tree),n=t.isFolder(),r=t.append(e),n?this._refreshElements(t):this._refreshElements(t.parent),r},r.prototype.prependNode=function(e,t){var n;return t||(t=this.tree),n=t.prepend(e),this._refreshElements(t),n},r.prototype.updateNode=function(e,t){var n;return n=t.id&&t.id!==e.id,n&&this.tree.removeNodeFromIndex(e),e.setData(t),n&&this.tree.addNodeToIndex(e),this.renderer.renderNode(e),this._selectCurrentNode()},r.prototype.moveNode=function(e,t,n){var r;return r=p.nameToIndex(n),this.tree.moveNode(e,t,r),this._refreshElements()},r.prototype.getStateFromStorage=function(){return this.save_state_handler.getStateFromStorage()},r.prototype.addToSelection=function(e){return this.select_node_handler.addToSelection(e),this._getNodeElementForNode(e).select()},r.prototype.getSelectedNodes=function(){return this.select_node_handler.getSelectedNodes()},r.prototype.isNodeSelected=function(e){return this.select_node_handler.isNodeSelected(e)},r.prototype.removeFromSelection=function(e){return this.select_node_handler.removeFromSelection(e),this._getNodeElementForNode(e).deselect()},r.prototype.scrollToNode=function(t){var n,r;return n=e(t.element),r=n.offset().top-this.$el.offset().top,this.scroll_handler.scrollTo(r)},r.prototype.getState=function(){return this.save_state_handler.getState()},r.prototype.setState=function(e){return this.save_state_handler.setState(e),this._refreshElements()},r.prototype.setOption=function(e,t){return this.options[e]=t},r.prototype._init=function(){r.__super__._init.call(this),this.element=this.$el,this.mouse_delay=300,this.is_initialized=!1,this.renderer=new i(this),typeof d!="undefined"&&d!==null?this.save_state_handler=new d(this):this.options.saveState=!1,typeof m!="undefined"&&m!==null&&(this.select_node_handler=new m(this)),typeof n!="undefined"&&n!==null?this.dnd_handler=new n(this):this.options.dragAndDrop=!1,typeof v!="undefined"&&v!==null&&(this.scroll_handler=new v(this)),typeof f!="undefined"&&f!==null&&typeof m!="undefined"&&m!==null&&(this.key_handler=new f(this)),this._initData(),this.element.click(e.proxy(this._click,this)),this.element.dblclick(e.proxy(this._dblclick,this));if(this.options.useContextMenu)return this.element.bind("contextmenu",e.proxy(this._contextmenu,this))},r.prototype._deinit=function(){return this.element.empty(),this.element.unbind(),this.key_handler.deinit(),this.tree=null,r.__super__._deinit.call(this)},r.prototype._initData=function(){return this.options.data?this._loadData(this.options.data):this._loadDataFromUrl(this._getDataUrlInfo())},r.prototype._getDataUrlInfo=function(t){var n,r;return n=this.options.dataUrl||this.element.data("url"),r=function(e){return function(){var r,i,s;return s={url:n},t&&t.id?(r={node:t.id},s.data=r):(i=e._getNodeIdToBeSelected(),i&&(r={selected_node:i},s.data=r)),s}}(this),e.isFunction(n)?n(t):e.type(n)==="string"?r():n},r.prototype._getNodeIdToBeSelected=function(){return this.options.saveState?this.save_state_handler.getNodeIdToBeSelected():null},r.prototype._initTree=function(e){this.tree=new this.options.nodeClass(null,!0,this.options.nodeClass),this.select_node_handler&&this.select_node_handler.clear(),this.tree.loadFromData(e),this._openNodes(),this._refreshElements();if(!this.is_initialized)return this.is_initialized=!0,this._triggerEvent("tree.init")},r.prototype._openNodes=function(){var e;if(this.options.saveState&&this.save_state_handler.restoreState())return;if(this.options.autoOpen===!1)return;return this.options.autoOpen===!0?e=-1:e=parseInt(this.options.autoOpen),this.tree.iterate(function(t,n){return t.hasChildren()&&(t.is_open=!0),n!==e})},r.prototype._refreshElements=function(e){return e==null&&(e=null),this.renderer.render(e),this._triggerEvent("tree.refresh")},r.prototype._click=function(e){var t,n,r;t=this._getClickTarget(e.target);if(t){if(t.type==="button")return this.toggle(t.node,this.options.slide),e.preventDefault(),e.stopPropagation();if(t.type==="label"){r=t.node,n=this._triggerEvent("tree.click",{node:r,click_event:e});if(!n.isDefaultPrevented())return this._selectNode(r,!0)}}},r.prototype._dblclick=function(e){var t;t=this._getClickTarget(e.target);if(t&&t.type==="label")return this._triggerEvent("tree.dblclick",{node:t.node,click_event:e})},r.prototype._getClickTarget=function(t){var n,r,i,s;i=e(t),n=i.closest(".jqtree-toggler");if(n.length){s=this._getNode(n);if(s)return{type:"button",node:s}}else{r=i.closest(".jqtree-element");if(r.length){s=this._getNode(r);if(s)return{type:"label",node:s}}}return null},r.prototype._getNode=function(e){var t;return t=e.closest("li"),t.length===0?null:t.data("node")},r.prototype._getNodeElementForNode=function(e){return e.isFolder()?new s(e,this):new h(e,this)},r.prototype._getNodeElement=function(e){var t;return t=this._getNode(e),t?this._getNodeElementForNode(t):null},r.prototype._contextmenu=function(t){var n,r;n=e(t.target).closest("ul.jqtree-tree .jqtree-element");if(n.length){r=this._getNode(n);if(r)return t.preventDefault(),t.stopPropagation(),this._triggerEvent("tree.contextmenu",{node:r,click_event:t}),!1}},r.prototype._saveState=function(){if(this.options.saveState)return this.save_state_handler.saveState()},r.prototype._mouseCapture=function(e){return this.options.dragAndDrop?this.dnd_handler.mouseCapture(e):!1},r.prototype._mouseStart=function(e){return this.options.dragAndDrop?this.dnd_handler.mouseStart(e):!1},r.prototype._mouseDrag=function(e){var t;return this.options.dragAndDrop?(t=this.dnd_handler.mouseDrag(e),this.scroll_handler&&this.scroll_handler.checkScrolling(),t):!1},r.prototype._mouseStop=function(e){return this.options.dragAndDrop?this.dnd_handler.mouseStop(e):!1},r.prototype._triggerEvent=function(t,n){var r;return r=e.Event(t),e.extend(r,n),this.element.trigger(r),r},r.prototype.testGenerateHitAreas=function(e){return this.dnd_handler.current_item=this._getNodeElementForNode(e),this.dnd_handler.generateHitAreas(),this.dnd_handler.hit_areas},r.prototype._selectCurrentNode=function(){var e,t;e=this.getSelectedNode();if(e){t=this._getNodeElementForNode(e);if(t)return t.select()}},r.prototype._deselectCurrentNode=function(){var e;e=this.getSelectedNode();if(e)return this.removeFromSelection(e)},r}(l),g.register(a,"tree"),h=function(){function n(e,t){this.init(e,t)}return n.prototype.init=function(t,n){return this.node=t,this.tree_widget=n,this.$element=e(t.element)},n.prototype.getUl=function(){return this.$element.children("ul:first")},n.prototype.getSpan=function(){return this.$element.children(".jqtree-element").find("span.jqtree-title")},n.prototype.getLi=function(){return this.$element},n.prototype.addDropHint=function(e){return e===p.INSIDE?new t(this.$element):new o(this.node,this.$element,e)},n.prototype.select=function(){return this.getLi().addClass("jqtree-selected")},n.prototype.deselect=function(){return this.getLi().removeClass("jqtree-selected")},n}(),s=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return L(n,e),n.prototype.open=function(e,t){var n,r;t==null&&(t=!0);if(!this.node.is_open)return this.node.is_open=!0,n=this.getButton(),n.removeClass("jqtree-closed"),n.html(this.tree_widget.options.openedIcon),r=function(t){return function(){return t.getLi().removeClass("jqtree-closed"),e&&e(),t.tree_widget._triggerEvent("tree.open",{node:t.node})}}(this),t?this.getUl().slideDown("fast",r):(this.getUl().show(),r())},n.prototype.close=function(e){var t,n;e==null&&(e=!0);if(this.node.is_open)return this.node.is_open=!1,t=this.getButton(),t.addClass("jqtree-closed"),t.html(this.tree_widget.options.closedIcon),n=function(e){return function(){return e.getLi().addClass("jqtree-closed"),e.tree_widget._triggerEvent("tree.close",{node:e.node})}}(this),e?this.getUl().slideUp("fast",n):(this.getUl().hide(),n())},n.prototype.getButton=function(){return this.$element.children(".jqtree-element").find("a.jqtree-toggler")},n.prototype.addDropHint=function(e){return!this.node.is_open&&e===p.INSIDE?new t(this.$element):new o(this.node,this.$element,e)},n}(h),b=function(e){return(""+e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/\//g,"&#x2F;")},N=function(e,t){var n,r,i,s;for(n=i=0,s=e.length;i<s;n=++i){r=e[n];if(r===t)return n}return-1},w=function(e,t){return e.indexOf?e.indexOf(t):N(e,t)},this.Tree.indexOf=w,this.Tree._indexOf=N;if(this.JSON==null||this.JSON.stringify==null||typeof this.JSON.stringify!="function")E=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,S={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},x=function(e){return E.lastIndex=0,E.test(e)?'"'+e.replace(E,function(e){var t;return t=S[e],typeof t=="string"?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'},T=function(e,t){var n,r,i,s,o,u,a;o=t[e];switch(typeof o){case"string":return x(o);case"number":return isFinite(o)?String(o):"null";case"boolean":case"null":return String(o);case"object":if(!o)return"null";i=[];if(Object.prototype.toString.apply(o)==="[object Array]"){for(n=u=0,a=o.length;u<a;n=++u)s=o[n],i[n]=T(n,o)||"null";return i.length===0?"[]":"["+i.join(",")+"]"}for(r in o)Object.prototype.hasOwnProperty.call(o,r)&&(s=T(r,o),s&&i.push(x(r)+":"+s));return i.length===0?"{}":"{"+i.join(",")+"}"}},this.JSON==null&&(this.JSON={}),this.JSON.stringify=function(e){return T("",{"":e})};d=function(){function t(e){this.tree_widget=e}return t.prototype.saveState=function(){var t;t=JSON.stringify(this.getState());if(this.tree_widget.options.onSetStateFromStorage)return this.tree_widget.options.onSetStateFromStorage(t);if(this.supportsLocalStorage())return localStorage.setItem(this.getCookieName(),t);if(e.cookie)return e.cookie.raw=!0,e.cookie(this.getCookieName(),t,{path:"/"})},t.prototype.restoreState=function(){var t;return t=this.getStateFromStorage(),t?(this.setState(e.parseJSON(t)),!0):!1},t.prototype.getStateFromStorage=function(){return this.tree_widget.options.onGetStateFromStorage?this.tree_widget.options.onGetStateFromStorage():this.supportsLocalStorage()?localStorage.getItem(this.getCookieName()):e.cookie?(e.cookie.raw=!0,e.cookie(this.getCookieName())):null},t.prototype.getState=function(){var e,t,n;return e=[],this.tree_widget.tree.iterate(function(t){return function(t){return t.is_open&&t.id&&t.hasChildren()&&e.push(t.id),!0}}(this)),t=this.tree_widget.getSelectedNode(),t?n=t.id:n="",{open_nodes:e,selected_node:n}},t.prototype.setState=function(e){var t,n,r;if(e){t=e.open_nodes,r=e.selected_node,this.tree_widget.tree.iterate(function(e){return function(e){return e.is_open=e.id&&e.hasChildren()&&w(t,e.id)>=0,!0}}(this));if(r&&this.tree_widget.select_node_handler){this.tree_widget.select_node_handler.clear(),n=this.tree_widget.getNodeById(r);if(n)return this.tree_widget.select_node_handler.addToSelection(n)}}},t.prototype.getCookieName=function(){return typeof this.tree_widget.options.saveState=="string"?this.tree_widget.options.saveState:"tree"},t.prototype.supportsLocalStorage=function(){var e;return e=function(){var e,t;if(typeof localStorage=="undefined"||localStorage===null)return!1;try{t="_storage_test",sessionStorage.setItem(t,!0),sessionStorage.removeItem(t)}catch(n){return e=n,!1}return!0},this._supportsLocalStorage==null&&(this._supportsLocalStorage=e()),this._supportsLocalStorage},t.prototype.getNodeIdToBeSelected=function(){var t,n;return n=this.getStateFromStorage(),n?(t=e.parseJSON(n),t.selected_node):null},t}(),m=function(){function e(e){this.tree_widget=e,this.clear()}return e.prototype.getSelectedNode=function(){var e;return e=this.getSelectedNodes(),e.length?e[0]:!1},e.prototype.getSelectedNodes=function(){var e,t,n;if(this.selected_single_node)return[this.selected_single_node];n=[];for(e in this.selected_nodes)t=this.tree_widget.getNodeById(e),t&&n.push(t);return n},e.prototype.getSelectedNodesUnder=function(e){var t,n,r;if(this.selected_single_node)return e.isParentOf(selected_single_node)?this.selected_single_node:null;r=[];for(t in this.selected_nodes)n=this.tree_widget.getNodeById(t),n&&e.isParentOf(n)&&r.push(n);return r},e.prototype.isNodeSelected=function(e){return e.id?this.selected_nodes[e.id]:this.selected_single_node?this.selected_single_node.element===e.element:!1},e.prototype.clear=function(){return this.selected_nodes={},this.selected_single_node=null},e.prototype.removeFromSelection=function(e,t){t==null&&(t=!1);if(!e.id){if(this.selected_single_node&&e.element===this.selected_single_node.element)return this.selected_single_node=null}else{delete this.selected_nodes[e.id];if(t)return e.iterate(function(t){return function(n){return delete t.selected_nodes[e.id],!0}}(this))}},e.prototype.addToSelection=function(e){return e.id?this.selected_nodes[e.id]=!0:this.selected_single_node=e},e}(),n=function(){function t(e){this.tree_widget=e,this.hovered_area=null,this.$ghost=null,this.hit_areas=[],this.is_dragging=!1}return t.prototype.mouseCapture=function(t){var n,r;return n=e(t.target),this.tree_widget.options.onIsMoveHandle&&!this.tree_widget.options.onIsMoveHandle(n)?null:(r=this.tree_widget._getNodeElement(n),r&&this.tree_widget.options.onCanMove&&(this.tree_widget.options.onCanMove(r.node)||(r=null)),this.current_item=r,this.current_item!==null)},t.prototype.mouseStart=function(t){var n;return this.refreshHitAreas(),n=e(t.target).offset(),this.drag_element=new r(this.current_item.node,t.page_x-n.left,t.page_y-n.top,this.tree_widget.element),this.is_dragging=!0,this.current_item.$element.addClass("jqtree-moving"),!0},t.prototype.mouseDrag=function(e){var t,n;return this.drag_element.move(e.page_x,e.page_y),t=this.findHoveredArea(e.page_x,e.page_y),n=this.canMoveToArea(t),n&&t?this.hovered_area!==t&&(this.hovered_area=t,this.mustOpenFolderTimer(t)&&this.startOpenFolderTimer(t.node),this.updateDropHint()):(this.removeHover(),this.removeDropHint(),this.stopOpenFolderTimer()),!0},t.prototype.canMoveToArea=function(e){var t;return e?this.tree_widget.options.onCanMoveTo?(t=p.getName(e.position),this.tree_widget.options.onCanMoveTo(this.current_item.node,e.node,t)):!0:!1},t.prototype.mouseStop=function(e){return this.moveItem(e),this.clear(),this.removeHover(),this.removeDropHint(),this.removeHitAreas(),this.current_item&&this.current_item.$element.removeClass("jqtree-moving"),this.is_dragging=!1,!1},t.prototype.refreshHitAreas=function(){return this.removeHitAreas(),this.generateHitAreas()},t.prototype.removeHitAreas=function(){return this.hit_areas=[]},t.prototype.clear=function(){return this.drag_element.remove(),this.drag_element=null},t.prototype.removeDropHint=function(){if(this.previous_ghost)return this.previous_ghost.remove()},t.prototype.removeHover=function(){return this.hovered_area=null},t.prototype.generateHitAreas=function(){var e;return e=new u(this.tree_widget.tree,this.current_item.node,this.getTreeDimensions().bottom),this.hit_areas=e.generate()},t.prototype.findHoveredArea=function(e,t){var n,r,i,s,o;r=this.getTreeDimensions();if(e<r.left||t<r.top||e>r.right||t>r.bottom)return null;s=0,i=this.hit_areas.length;while(s<i){o=s+i>>1,n=this.hit_areas[o];if(t<n.top)i=o;else{if(!(t>n.bottom))return n;s=o+1}}return null},t.prototype.mustOpenFolderTimer=function(e){var t;return t=e.node,t.isFolder()&&!t.is_open&&e.position===p.INSIDE},t.prototype.updateDropHint=function(){var e;if(!this.hovered_area)return;return this.removeDropHint(),e=this.tree_widget._getNodeElementForNode(this.hovered_area.node),this.previous_ghost=e.addDropHint(this.hovered_area.position)},t.prototype.startOpenFolderTimer=function(e){var t;return t=function(t){return function(){return t.tree_widget._openNode(e,t.tree_widget.options.slide,function(){return t.refreshHitAreas(),t.updateDropHint()})}}(this),this.stopOpenFolderTimer(),this.open_folder_timer=setTimeout(t,this.tree_widget.options.openFolderDelay)},t.prototype.stopOpenFolderTimer=function(){if(this.open_folder_timer)return clearTimeout(this.open_folder_timer),this.open_folder_timer=null},t.prototype.moveItem=function(e){var t,n,r,i,s,o;if(this.hovered_area&&this.hovered_area.position!==p.NONE&&this.canMoveToArea(this.hovered_area)){r=this.current_item.node,o=this.hovered_area.node,i=this.hovered_area.position,s=r.parent,i===p.INSIDE&&(this.hovered_area.node.is_open=!0),t=function(e){return function(){return e.tree_widget.tree.moveNode(r,o,i),e.tree_widget.element.empty(),e.tree_widget._refreshElements()}}(this),n=this.tree_widget._triggerEvent("tree.move",{move_info:{moved_node:r,target_node:o,position:p.getName(i),previous_parent:s,do_move:t,original_event:e.original_event}});if(!n.isDefaultPrevented())return t()}},t.prototype.getTreeDimensions=function(){var e;return e=this.tree_widget.element.offset(),{left:e.left,top:e.top,right:e.left+this.tree_widget.element.width(),bottom:e.top+this.tree_widget.element.height()+16}},t}(),y=function(){function t(e){this.tree=e}return t.prototype.iterate=function(){var t,n;return t=!0,n=function(r){return function(i,s){var o,u,a,f,l,c,h,p;l=(i.is_open||!i.element)&&i.hasChildren();if(i.element){o=e(i.element);if(!o.is(":visible"))return;t&&(r.handleFirstNode(i,o),t=!1),i.hasChildren()?i.is_open?r.handleOpenFolder(i,o)||(l=!1):r.handleClosedFolder(i,s,o):r.handleNode(i,s,o)}if(l){a=i.children.length,p=i.children;for(f=c=0,h=p.length;c<h;f=++c)u=p[f],f===a-1?n(i.children[f],null):n(i.children[f],i.children[f+1]);if(i.is_open)return r.handleAfterOpenFolder(i,s,o)}}}(this),n(this.tree,null)},t.prototype.handleNode=function(e,t,n){},t.prototype.handleOpenFolder=function(e,t){},t.prototype.handleClosedFolder=function(e,t,n){},t.prototype.handleAfterOpenFolder=function(e,t,n){},t.prototype.handleFirstNode=function(e,t){},t}(),u=function(t){function n(e,t,r){n.__super__.constructor.call(this,e),this.current_node=t,this.tree_bottom=r}return L(n,t),n.prototype.generate=function(){return this.positions=[],this.last_top=0,this.iterate(),this.generateHitAreas(this.positions)},n.prototype.getTop=function(e){return e.offset().top},n.prototype.addPosition=function(e,t,n){var r;return r={top:n,node:e,position:t},this.positions.push(r),this.last_top=n},n.prototype.handleNode=function(e,t,n){var r;return r=this.getTop(n),e===this.current_node?this.addPosition(e,p.NONE,r):this.addPosition(e,p.INSIDE,r),t===this.current_node||e===this.current_node?this.addPosition(e,p.NONE,r):this.addPosition(e,p.AFTER,r)},n.prototype.handleOpenFolder=function(e,t){return e===this.current_node?!1:(e.children[0]!==this.current_node&&this.addPosition(e,p.INSIDE,this.getTop(t)),!0)},n.prototype.handleClosedFolder=function(e,t,n){var r;r=this.getTop(n);if(e===this.current_node)return this.addPosition(e,p.NONE,r);this.addPosition(e,p.INSIDE,r);if(t!==this.current_node)return this.addPosition(e,p.AFTER,r)},n.prototype.handleFirstNode=function(t,n){if(t!==this.current_node)return this.addPosition(t,p.BEFORE,this.getTop(e(t.element)))},n.prototype.handleAfterOpenFolder=function(e,t,n){return e===this.current_node.node||t===this.current_node.node?this.addPosition(e,p.NONE,this.last_top):this.addPosition(e,p.AFTER,this.last_top)},n.prototype.generateHitAreas=function(e){var t,n,r,i,s,o;i=-1,t=[],n=[];for(s=0,o=e.length;s<o;s++)r=e[s],r.top!==i&&t.length&&(t.length&&this.generateHitAreasForGroup(n,t,i,r.top),i=r.top,t=[]),t.push(r);return this.generateHitAreasForGroup(n,t,i,this.tree_bottom),n},n.prototype.generateHitAreasForGroup=function(e,t,n,r){var i,s,o,u,a;a=Math.min(t.length,4),i=Math.round((r-n)/a),s=n,o=0;while(o<a)u=t[o],e.push({top:s,bottom:s+i,node:u.node,position:u.position}),s+=i,o+=1;return null},n}(y),r=function(){function t(t,n,r,i){this.offset_x=n,this.offset_y=r,this.$element=e('<span class="jqtree-title jqtree-dragging">'+t.name+"</span>"),this.$element.css("position","absolute"),i.append(this.$element)}return t.prototype.move=function(e,t){return this.$element.offset({left:e-this.offset_x,top:t-this.offset_y})},t.prototype.remove=function(){return this.$element.remove()},t}(),o=function(){function t(t,n,r){this.$element=n,this.node=t,this.$ghost=e('<li class="jqtree_common jqtree-ghost"><span class="jqtree_common jqtree-circle"></span><span class="jqtree_common jqtree-line"></span></li>'),r===p.AFTER?this.moveAfter():r===p.BEFORE?this.moveBefore():r===p.INSIDE&&(t.isFolder()&&t.is_open?this.moveInsideOpenFolder():this.moveInside())}return t.prototype.remove=function(){return this.$ghost.remove()},t.prototype.moveAfter=function(){return this.$element.after(this.$ghost)},t.prototype.moveBefore=function(){return this.$element.before(this.$ghost)},t.prototype.moveInsideOpenFolder=function(){return e(this.node.children[0].element).before(this.$ghost)},t.prototype.moveInside=function(){return this.$element.after(this.$ghost),this.$ghost.addClass("jqtree-inside")},t}(),t=function(){function t(t){var n,r;n=t.children(".jqtree-element"),r=t.width()-4,this.$hint=e('<span class="jqtree-border"></span>'),n.append(this.$hint),this.$hint.css({width:r,height:n.height()-4})}return t.prototype.remove=function(){return this.$hint.remove()},t}(),v=function(){function t(e){this.tree_widget=e,this.previous_top=-1,this._initScrollParent()}return t.prototype._initScrollParent=function(){var t,n,r;return n=function(t){return function(){var n,r,i,s,o,u;n=["overflow","overflow-y"],i=function(t){var r,i,s,o;for(i=0,s=n.length;i<s;i++){r=n[i];if((o=e.css(t,r))==="auto"||o==="scroll")return!0}return!1};if(i(t.tree_widget.$el[0]))return t.tree_widget.$el;u=t.tree_widget.$el.parents();for(s=0,o=u.length;s<o;s++){r=u[s];if(i(r))return e(r)}return null}}(this),r=function(e){return function(){return e.scroll_parent_top=0,e.$scroll_parent=null}}(this),this.tree_widget.$el.css("position")==="fixed"&&r(),t=n(),t&&t.length&&t[0].tagName!=="HTML"?(this.$scroll_parent=t,this.scroll_parent_top=this.$scroll_parent.offset().top):r()},t.prototype.checkScrolling=function(){var e;e=this.tree_widget.dnd_handler.hovered_area;if(e&&e.top!==this.previous_top)return this.previous_top=e.top,this.$scroll_parent?this._handleScrollingWithScrollParent(e):this._handleScrollingWithDocument(e)},t.prototype._handleScrollingWithScrollParent=function(e){var t;t=this.scroll_parent_top+this.$scroll_parent[0].offsetHeight-e.bottom;if(t<20)return this.$scroll_parent[0].scrollTop+=20,this.tree_widget.refreshHitAreas(),this.previous_top=-1;if(e.top-this.scroll_parent_top<20)return this.$scroll_parent[0].scrollTop-=20,this.tree_widget.refreshHitAreas(),this.previous_top=-1},t.prototype._handleScrollingWithDocument=function(t){var n;n=t.top-e(document).scrollTop();if(n<20)return e(document).scrollTop(e(document).scrollTop()-20);if(e(window).height()-(t.bottom-e(document).scrollTop())<20)return e(document).scrollTop(e(document).scrollTop()+20)},t.prototype.scrollTo=function(t){var n;return this.$scroll_parent?this.$scroll_parent[0].scrollTop=t:(n=this.tree_widget.$el.offset().top,e(document).scrollTop(t+n))},t.prototype.isScrolledIntoView=function(t){var n,r,i,s,o;return n=e(t),this.$scroll_parent?(o=0,s=this.$scroll_parent.height(),i=n.offset().top-this.scroll_parent_top,r=i+n.height()):(o=e(window).scrollTop(),s=o+e(window).height(),i=n.offset().top,r=i+n.height()),r<=s&&i>=o},t}(),f=function(){function s(t){this.tree_widget=t,t.options.keyboardSupport&&e(document).bind("keydown.jqtree",e.proxy(this.handleKeyDown,this))}var t,n,r,i;return n=37,i=38,r=39,t=40,s.prototype.deinit=function(){return e(document).unbind("keydown.jqtree")},s.prototype.handleKeyDown=function(s){var o,u,a,f,l,c,h;if(!this.tree_widget.options.keyboardSupport)return;if(e(document.activeElement).is("textarea,input"))return!0;o=this.tree_widget.getSelectedNode(),h=function(t){return function(n){return n?(t.tree_widget.selectNode(n),t.tree_widget.scroll_handler&&!t.tree_widget.scroll_handler.isScrolledIntoView(e(n.element).find(".jqtree-element"))&&t.tree_widget.scrollToNode(n),!1):!0}}(this),a=function(e){return function(){return h(e.getNextNode(o))}}(this),c=function(e){return function(){return h(e.getPreviousNode(o))}}(this),l=function(e){return function(){return o.isFolder()&&!o.is_open?(e.tree_widget.openNode(o),!1):!0}}(this),f=function(e){return function(){return o.isFolder()&&o.is_open?(e.tree_widget.closeNode(o),!1):!0}}(this);if(!o)return!0;u=s.which;switch(u){case t:return a();case i:return c();case r:return l();case n:return f()}},s.prototype.getNextNode=function(e,t){var n;return t==null&&(t=!0),t&&e.hasChildren()&&e.is_open?e.children[0]:e.parent?(n=e.getNextSibling(),n?n:this.getNextNode(e.parent,!1)):null},s.prototype.getPreviousNode=function(e){var t;return e.parent?(t=e.getPreviousSibling(),t?!t.hasChildren()||!t.is_open?t:this.getLastChild(t):e.parent.parent?e.parent:null):null},s.prototype.getLastChild=function(e){var t;return e.hasChildren()?(t=e.children[e.children.length-1],!t.hasChildren()||!t.is_open?t:this.getLastChild(t)):null},s}()}.call(this),define("jqtree",["jquery"],function(){}),define("mockup-patterns-tree",["jquery","underscore","mockup-patterns-base","mockup-utils","jqtree"],function(e,t,n,r){var i=n.extend({name:"tree",defaults:{dragAndDrop:!1,autoOpen:!1,selectable:!0,keyboardSupport:!0},init:function(){var t=this;for(var n in t.options){var i=t.defaults[n];i!==undefined&&typeof i=="boolean"&&(t.options[n]=r.bool(t.options[n]))}t.options.dragAndDrop&&t.options.onCanMoveTo===undefined&&(t.options.onCanMoveTo=function(e,t,n){return t.folder===undefined||t.folder===!0}),t.options.data&&typeof t.options.data=="string"&&(t.options.data=e.parseJSON(t.options.data)),t.tree=t.$el.tree(t.options)}});return i}),define("text!js/patterns/filemanager/templates/app.xml",[],function(){return'<div id="buttons">\n    <button class="newfolder btn" name="newfolder" type="button">New folder</button>\n    <button class="addnew btn" name="addnew" type="button">New file</button>\n    <button class="upload btn" name="upload" type="button" value="Upload">Upload file</button>\n    <button class="save btn" name="save" type="button">Save file</button>\n</div>\n<div class="container">\n    <div class="tree">\n    </div>\n    <div class="fileeditor">\n        <ul class="fileselector">\n        </ul>\n        <ul class="editors">\n        </ul>\n    </div>\n</div>\n'}),define("js/patterns/filemanager/views/app",["jquery","underscore","backbone","js/ui/views/base","mockup-patterns-dropzone","mockup-patterns-tree","mockup-patterns-ace","text!js/patterns/filemanager/templates/app.xml"],function(e,t,n,r,i,s,o,u){var a=r.extend({tagName:"div",className:"filemanager",template:u,afterRender:function(){var e=this;e.$tree=e.$(".tree"),e.tree=new s(e.$tree,e.treeConfig),e.uploadUrl&&(e.dropzone=(new i(e.$el,{className:"filemanager-dropzone",clickable:!1,url:e.options.uploadUrl,autoCleanResults:!0,success:function(e,t){}})).dropzone,e.dropzone.on("sending",function(){e.$el.addClass("dropping")}),e.dropzone.on("complete",function(){e.$el.removeClass("dropping")}))}});return a}),define("mockup-patterns-filemanager",["jquery","mockup-patterns-base","js/patterns/filemanager/views/app"],function(e,t,n){var r=t.extend({name:"filemanager",defaults:{aceConfig:{},dataTreeUrl:null,uploadUrl:null},treeConfig:{autoOpen:!0},init:function(){var t=this;t.options.dataTreeUrl!==null?(t.options.treeConfig=e.extend(!0,{},t.treeConfig,{dataUrl:t.options.dataTreeUrl}),t.appView=new n(t.options),t.$el.append(t.appView.render().el)):t.$el.html("Must specify dataTreeUrl setting for pattern")}});return r}),define("text!js/patterns/filemanager/pattern.js",[],function(){return"/* Filemanager pattern.\n *\n * Options:\n *    aceConfig(object): ace configuration ({})\n *    dataTreeUrl(stirng): TODO (null)\n *    uploadUrl(string): TODO (null)\n *\n * Documentation:\n *    # TODO\n *\n * Example: example-1\n *\n * License:\n *    Copyright (C) 2010 Plone Foundation\n *\n *    This program is free software; you can redistribute it and/or modify it\n *    under the terms of the GNU General Public License as published by the\n *    Free Software Foundation; either version 2 of the License.\n *\n *    This program is distributed in the hope that it will be useful, but\n *    WITHOUT ANY WARRANTY; without even the implied warranty of\n *    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General\n *    Public License for more details.\n *\n *    You should have received a copy of the GNU General Public License along\n *    with this program; if not, write to the Free Software Foundation, Inc.,\n *    51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA.\n */\n\n\ndefine([\n  'jquery',\n  'mockup-patterns-base',\n  'js/patterns/filemanager/views/app'\n], function($, Base, AppView) {\n  'use strict';\n\n  var FileManager = Base.extend({\n    name: 'filemanager',\n    defaults: {\n      aceConfig: {},\n      dataTreeUrl: null,\n      uploadUrl: null\n    },\n    treeConfig: {\n      autoOpen: true\n    },\n    init: function() {\n      var self = this;\n      if (self.options.dataTreeUrl !== null) {\n        self.options.treeConfig = $.extend(true, {}, self.treeConfig, {\n          dataUrl: self.options.dataTreeUrl\n        });\n        self.appView = new AppView(self.options);\n        self.$el.append(self.appView.render().el);\n      } else {\n        self.$el.html('Must specify dataTreeUrl setting for pattern');\n      }\n    }\n  });\n\n  return FileManager;\n\n});\n\n"}),define("mockup-patterns-formautofocus",["jquery","mockup-patterns-base"],function(e,t,n){var r=t.extend({name:"formautofocus",defaults:{condition:"div.error",target:"div.error :input:not(.formTabs):visible:first",always:":input:not(.formTabs):visible:first"},init:function(){var t=this;e(t.options.condition,t.$el).size()!==0?e(t.options.target,t.$el).focus():e(t.options.always,t.$el).focus()}});return r}),define("text!js/patterns/formautofocus.js",[],function(){return"/* Formautofocus pattern.\n *\n * Options:\n *    condition(string): TODO ('div.error')\n *    target(string): TODO (\"div.error :input:not(.formTabs):visible:first')\n *    always(string): TODO (:input:not(.formTabs):visible:first')\n *\n * Documentation:\n *    # TODO\n *\n * Example: example-1\n *\n * License:\n *    Copyright (C) 2010 Plone Foundation\n *\n *    This program is free software; you can redistribute it and/or modify it\n *    under the terms of the GNU General Public License as published by the\n *    Free Software Foundation; either version 2 of the License.\n *\n *    This program is distributed in the hope that it will be useful, but\n *    WITHOUT ANY WARRANTY; without even the implied warranty of\n *    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General\n *    Public License for more details.\n *\n *    You should have received a copy of the GNU General Public License along\n *    with this program; if not, write to the Free Software Foundation, Inc.,\n *    51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA.\n */\n\n\ndefine([\n  'jquery',\n  'mockup-patterns-base'\n], function($, Base, undefined) {\n  'use strict';\n\n  var FormAutoFocus = Base.extend({\n    name: 'formautofocus',\n    defaults: {\n      condition: 'div.error',\n      target: 'div.error :input:not(.formTabs):visible:first',\n      always: ':input:not(.formTabs):visible:first'\n    },\n    init: function() {\n      var self = this;\n      if ($(self.options.condition, self.$el).size() !== 0) {\n        $(self.options.target, self.$el).focus();\n      } else {\n        $(self.options.always, self.$el).focus();\n      }\n\n    }\n  });\n\n  return FormAutoFocus;\n\n});\n"}),define("mockup-patterns-formunloadalert",["jquery","mockup-patterns-base"],function(e,t){var n=t.extend({name:"formunloadalert",_changed:!1,_suppressed:!1,defaults:{message:"Discard changes? If you click OK, any changes you have made will be lost.",changingEvents:"change keyup paste",changingFields:"input,select,textarea,fileupload"},init:function(){var t=this;if(!t.$el.is("form"))return;e(t.options.changingFields,t.$el).on(t.options.changingEvents,function(e){t._changed=!0});var n=t.$el.parents(".modal");n.size()!==0?n.data("pattern-modal").on("hide",function(e){var r=n.data("pattern-modal");r&&(r._suppressHide=t._handleUnload.apply(t,e))}):e(window).on("beforeunload",function(e){return t._handleUnload(e)}),t.$el.on("submit",function(e){t._suppressed=!0})},_handleUnload:function(t){var n=this;if(n._suppressed)return n._suppressed=!1,undefined;if(n._changed){var r=n.options.message;return n._handleMsg(t,r),e(window).trigger("messageset"),r}},_handleMsg:function(e,t){(e||window.event).returnValue=t}});return n}),define("text!js/patterns/formunloadalert.js",[],function(){return"/* Formunloadalert pattern.\n *\n * Options:\n *    changingEvents(string): Events on which to check for changes (space-separated). ('change keyup paste')\n *    changingFields(string): Fields on which to check for changes (comma-separated). ('input,select,textarea,fileupload')\n *    message(string): Confirmation message to display when dirty form is being unloaded. (Discard changes? If you click OK, any changes you have made will be lost.)\n *\n * Documentation:\n *    # Example\n *\n *    {{ example-1 }}\n *\n * Example: example-1\n *    <form class=\"pat-formunloadalert\" onsubmit=\"javascript:return false;\">\n *      <input type=\"text\" value=\"\" />\n *      <select>\n *        <option value=\"1\">value 1</option>\n *        <option value=\"2\">value 2</option>\n *      </select>\n *      <input\n *        class=\"btn btn-large btn-primary\"\n *        type=\"submit\" value=\"Submit\" />\n *      <br />\n *      <a href=\"/\">Click here to go somewhere else</a>\n *    </form>\n *\n * License:\n *    Copyright (C) 2010 Plone Foundation\n *\n *    This program is free software; you can redistribute it and/or modify it\n *    under the terms of the GNU General Public License as published by the\n *    Free Software Foundation; either version 2 of the License.\n *\n *    This program is distributed in the hope that it will be useful, but\n *    WITHOUT ANY WARRANTY; without even the implied warranty of\n *    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General\n *    Public License for more details.\n *\n *    You should have received a copy of the GNU General Public License along\n *    with this program; if not, write to the Free Software Foundation, Inc.,\n *    51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA.\n */\n\n\ndefine([\n  'jquery',\n  'mockup-patterns-base'\n], function ($, Base) {\n  'use strict';\n\n  var FormUnloadAlert = Base.extend({\n    name: 'formunloadalert',\n    _changed : false,       // Stores a listing of raised changes by their key\n    _suppressed : false,     // whether or not warning should be suppressed\n    defaults: {\n      message :  'Discard changes? If you click OK, ' +\n                 'any changes you have made will be lost.',\n      // events on which to check for changes\n      changingEvents: 'change keyup paste',\n      // fields on which to check for changes\n      changingFields: 'input,select,textarea,fileupload'\n    },\n    init: function () {\n      var self = this;\n      // if this is not a form just return\n      if (!self.$el.is('form')) { return; }\n\n      $(self.options.changingFields, self.$el).on(\n        self.options.changingEvents,\n        function (evt) {\n          self._changed = true;\n        }\n      );\n\n      var $modal = self.$el.parents('.modal');\n      if ($modal.size() !== 0) {\n        $modal.data('pattern-modal').on('hide', function(e) {\n          var modal = $modal.data('pattern-modal');\n          if (modal) {\n            modal._suppressHide = self._handleUnload.apply(self, e);\n          }\n        });\n      } else {\n        $(window).on('beforeunload', function(e) {\n          return self._handleUnload(e);\n        });\n      }\n\n      self.$el.on('submit', function(e) {\n        self._suppressed = true;\n      });\n\n    },\n    _handleUnload : function (e) {\n      var self = this;\n      if (self._suppressed) {\n        self._suppressed = false;\n        return undefined;\n      }\n      if (self._changed) {\n        var msg = self.options.message;\n        self._handleMsg(e,msg);\n        $(window).trigger('messageset');\n        return msg;\n      }\n    },\n    _handleMsg:  function(e,msg) {\n      (e || window.event).returnValue = msg;\n    }\n  });\n  return FormUnloadAlert;\n\n});\n"}),define("mockup-patterns-toggle",["jquery","mockup-patterns-base"],function(e,t,n){var r=t.extend({name:"toggle",defaults:{attribute:"class",event:"click",targetScope:"global"},ensureBool:function(e){return typeof e=="string"?e==="true"?!0:!1:e},init:function(){var t=this;t.options.target?t.options.targetScope==="global"?t.$target=e(t.options.target):t.$target=t.$el.parents(t.options.targetScope).first().find(t.options.target):t.$target=t.$el,(!t.$target||t.$target.size()===0)&&e.error('No target found for "'+t.options.target+'".'),t.on(t.options.event,function(e){t.toggle(),e.stopPropagation(),e.preventDefault()})},isMarked:function(){var e=this,t=!1;for(var n=0;n<this.$target.length;n+=1)if(e.options.attribute==="class"){if(!this.$target.eq(n).hasClass(this.options.value)){t=!1;break}t=!0}else{if(this.$target.eq(n).attr(this.options.attribute)!==this.options.value){t=!1;break}t=!0}return t},toggle:function(){var e=this;e.isMarked()?e.remove():e.add()},remove:function(){var e=this;e.trigger("remove-attr"),e.options.attribute==="class"?e.$target.removeClass(e.options.value):e.$target.removeAttr(e.options.attribute),e.trigger("attr-removed")},add:function(){var e=this;e.trigger("add-attr"),e.options.attribute==="class"?e.$target.addClass(e.options.value):e.$target.attr(e.options.attribute,e.options.value),e.trigger("added-attr")}});return r}),function(e){typeof e.fn.each2=="undefined"&&e.extend(e.fn,{each2:function(t){var n=e([0]),r=-1,i=this.length;while(++r<i&&(n.context=n[0]=this[r])&&t.call(n[0],r,n)!==!1);return this}})}(jQuery),function(e,t){function p(e){var t,n,r,i;if(!e||e.length<1)return e;t="";for(n=0,r=e.length;n<r;n++)i=e.charAt(n),t+=h[i]||i;return t}function d(e,t){var n=0,r=t.length;for(;n<r;n+=1)if(m(e,t[n]))return n;return-1}function v(){var t=e(c);t.appendTo("body");var n={width:t.width()-t[0].clientWidth,height:t.height()-t[0].clientHeight};return t.remove(),n}function m(e,n){return e===n?!0:e===t||n===t?!1:e===null||n===null?!1:e.constructor===String?e+""==n+"":n.constructor===String?n+""==e+"":!1}function g(t,n){var r,i,s;if(t===null||t.length<1)return[];r=t.split(n);for(i=0,s=r.length;i<s;i+=1)r[i]=e.trim(r[i]);return r}function y(e){return e.outerWidth(!1)-e.width()}function b(n){var r="keyup-change-value";n.on("keydown",function(){e.data(n,r)===t&&e.data(n,r,n.val())}),n.on("keyup",function(){var i=e.data(n,r);i!==t&&n.val()!==i&&(e.removeData(n,r),n.trigger("keyup-change"))})}function w(n){n.on("mousemove",function(n){var r=a;(r===t||r.x!==n.pageX||r.y!==n.pageY)&&e(n.target).trigger("mousemove-filtered",n)})}function E(e,n,r){r=r||t;var i;return function(){var t=arguments;window.clearTimeout(i),i=window.setTimeout(function(){n.apply(r,t)},e)}}function S(e){var t=!1,n;return function(){return t===!1&&(n=e(),t=!0),n}}function x(e,t){var n=E(e,function(e){t.trigger("scroll-debounced",e)});t.on("scroll",function(e){d(e.target,t.get())>=0&&n(e)})}function T(e){if(e[0]===document.activeElement)return;window.setTimeout(function(){var t=e[0],n=e.val().length,r;e.focus(),e.is(":visible")&&t===document.activeElement&&(t.setSelectionRange?t.setSelectionRange(n,n):t.createTextRange&&(r=t.createTextRange(),r.collapse(!1),r.select()))},0)}function N(t){t=e(t)[0];var n=0,r=0;if("selectionStart"in t)n=t.selectionStart,r=t.selectionEnd-n;else if("selection"in document){t.focus();var i=document.selection.createRange();r=document.selection.createRange().text.length,i.moveStart("character",-t.value.length),n=i.text.length-r}return{offset:n,length:r}}function C(e){e.preventDefault(),e.stopPropagation()}function k(e){e.preventDefault(),e.stopImmediatePropagation()}function L(t){if(!u){var n=t[0].currentStyle||window.getComputedStyle(t[0],null);u=e(document.createElement("div")).css({position:"absolute",left:"-10000px",top:"-10000px",display:"none",fontSize:n.fontSize,fontFamily:n.fontFamily,fontStyle:n.fontStyle,fontWeight:n.fontWeight,letterSpacing:n.letterSpacing,textTransform:n.textTransform,whiteSpace:"nowrap"}),u.attr("class","select2-sizer"),e("body").append(u)}return u.text(t.val()),u.width()}function A(t,n,r){var i,s=[],o;i=t.attr("class"),i&&(i=""+i,e(i.split(" ")).each2(function(){this.indexOf("select2-")===0&&s.push(this)})),i=n.attr("class"),i&&(i=""+i,e(i.split(" ")).each2(function(){this.indexOf("select2-")!==0&&(o=r(this),o&&s.push(o))})),t.attr("class",s.join(" "))}function O(e,t,n,r){var i=p(e.toUpperCase()).indexOf(p(t.toUpperCase())),s=t.length;if(i<0){n.push(r(e));return}n.push(r(e.substring(0,i))),n.push("<span class='select2-match'>"),n.push(r(e.substring(i,i+s))),n.push("</span>"),n.push(r(e.substring(i+s,e.length)))}function M(e){var t={"\\":"&#92;","&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#47;"};return String(e).replace(/[&<>"'\/\\]/g,function(e){return t[e]})}function _(n){var r,i=null,s=n.quietMillis||100,o=n.url,u=this;return function(a){window.clearTimeout(r),r=window.setTimeout(function(){var r=n.data,s=o,f=n.transport||e.fn.select2.ajaxDefaults.transport,l={type:n.type||"GET",cache:n.cache||!1,jsonpCallback:n.jsonpCallback||t,dataType:n.dataType||"json"},c=e.extend({},e.fn.select2.ajaxDefaults.params,l);r=r?r.call(u,a.term,a.page,a.context):null,s=typeof s=="function"?s.call(u,a.term,a.page,a.context):s,i&&i.abort(),n.params&&(e.isFunction(n.params)?e.extend(c,n.params.call(u)):e.extend(c,n.params)),e.extend(c,{url:s,dataType:n.dataType,data:r,success:function(e){var t=n.results(e,a.page);a.callback(t)}}),i=f.call(u,c)},s)}}function D(t){var n=t,r,i,s=function(e){return""+e.text};e.isArray(n)&&(i=n,n={results:i}),e.isFunction(n)===!1&&(i=n,n=function(){return i});var o=n();return o.text&&(s=o.text,e.isFunction(s)||(r=o.text,s=function(e){return e[r]})),function(t){var r=t.term,i={results:[]},o;if(r===""){t.callback(n());return}o=function(n,i){var u,a;n=n[0];if(n.children){u={};for(a in n)n.hasOwnProperty(a)&&(u[a]=n[a]);u.children=[],e(n.children).each2(function(e,t){o(t,u.children)}),(u.children.length||t.matcher(r,s(u),n))&&i.push(u)}else t.matcher(r,s(n),n)&&i.push(n)},e(n().results).each2(function(e,t){o(t,i.results)}),t.callback(i)}}function P(n){var r=e.isFunction(n);return function(i){var s=i.term,o={results:[]};e(r?n():n).each(function(){var e=this.text!==t,n=e?this.text:this;(s===""||i.matcher(s,n))&&o.results.push(e?this:{id:this,text:this})}),i.callback(o)}}function H(t,n){if(e.isFunction(t))return!0;if(!t)return!1;throw new Error(n+" must be a function or a falsy value")}function B(t){return e.isFunction(t)?t():t}function j(t){var n=0;return e.each(t,function(e,t){t.children?n+=j(t.children):n++}),n}function F(e,n,r,i){var s=e,o=!1,u,a,f,l,c;if(!i.createSearchChoice||!i.tokenSeparators||i.tokenSeparators.length<1)return t;for(;;){a=-1;for(f=0,l=i.tokenSeparators.length;f<l;f++){c=i.tokenSeparators[f],a=e.indexOf(c);if(a>=0)break}if(a<0)break;u=e.substring(0,a),e=e.substring(a+c.length);if(u.length>0){u=i.createSearchChoice.call(this,u,n);if(u!==t&&u!==null&&i.id(u)!==t&&i.id(u)!==null){o=!1;for(f=0,l=n.length;f<l;f++)if(m(i.id(u),i.id(n[f]))){o=!0;break}o||r(u)}}}if(s!==e)return e}function I(t,n){var r=function(){};return r.prototype=new t,r.prototype.constructor=r,r.prototype.parent=t.prototype,r.prototype=e.extend(r.prototype,n),r}if(window.Select2!==t)return;var n,r,i,s,o,u,a={x:0,y:0},f,l,n={TAB:9,ENTER:13,ESC:27,SPACE:32,LEFT:37,UP:38,RIGHT:39,DOWN:40,SHIFT:16,CTRL:17,ALT:18,PAGE_UP:33,PAGE_DOWN:34,HOME:36,END:35,BACKSPACE:8,DELETE:46,isArrow:function(e){e=e.which?e.which:e;switch(e){case n.LEFT:case n.RIGHT:case n.UP:case n.DOWN:return!0}return!1},isControl:function(e){var t=e.which;switch(t){case n.SHIFT:case n.CTRL:case n.ALT:return!0}return e.metaKey?!0:!1},isFunctionKey:function(e){return e=e.which?e.which:e,e>=112&&e<=123}},c="<div class='select2-measure-scrollbar'></div>",h={"":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"AA","":"AE","":"AE","":"AE","":"AO","":"AU","":"AV","":"AV","":"AY","":"B","":"B","":"B","":"B","":"B","":"B","":"B","":"B","":"C","":"C","":"C","":"C","":"C","":"C","":"C","":"C","":"C","":"C","":"C","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"DZ","":"DZ","":"Dz","":"Dz","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"F","":"F","":"F","":"F","":"F","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"J","":"J","":"J","":"J","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"LJ","":"Lj","":"M","":"M","":"M","":"M","":"M","":"M","":"M","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"NJ","":"Nj","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"OI","":"OO","":"OU","":"P","":"P","":"P","":"P","":"P","":"P","":"P","":"P","":"P","":"Q","":"Q","":"Q","":"Q","":"Q","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"TZ","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"V","":"V","":"V","":"V","":"V","":"V","":"V","":"VY","":"W","":"W","":"W","":"W","":"W","":"W","":"W","":"W","":"W","":"X","":"X","":"X","":"X","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"aa","":"ae","":"ae","":"ae","":"ao","":"au","":"av","":"av","":"ay","":"b","":"b","":"b","":"b","":"b","":"b","":"b","":"b","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"dz","":"dz","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"f","":"f","":"f","":"f","":"f","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"hv","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"j","":"j","":"j","":"j","":"j","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"lj","":"m","":"m","":"m","":"m","":"m","":"m","":"m","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"nj","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"oi","":"ou","":"oo","":"p","":"p","":"p","":"p","":"p","":"p","":"p","":"p","":"p","":"q","":"q","":"q","":"q","":"q","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"tz","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"v","":"v","":"v","":"v","":"v","":"v","":"v","":"vy","":"w","":"w","":"w","":"w","":"w","":"w","":"w","":"w","":"w","":"w","":"x","":"x","":"x","":"x","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z"};f=e(document),o=function(){var e=1;return function(){return e++}}(),f.on("mousemove",function(e){a.x=e.pageX,a.y=e.pageY}),r=I(Object,{bind:function(e){var t=this;return function(){e.apply(t,arguments)}},init:function(n){var r,i,s=".select2-results";this.opts=n=this.prepareOpts(n),this.id=n.id,n.element.data("select2")!==t&&n.element.data("select2")!==null&&n.element.data("select2").destroy(),this.container=this.createContainer(),this.containerId="s2id_"+(n.element.attr("id")||"autogen"+o()),this.containerSelector="#"+this.containerId.replace(/([;&,\.\+\*\~':"\!\^#$%@\[\]\(\)=>\|])/g,"\\$1"),this.container.attr("id",this.containerId),this.body=S(function(){return n.element.closest("body")}),A(this.container,this.opts.element,this.opts.adaptContainerCssClass),this.container.attr("style",n.element.attr("style")),this.container.css(B(n.containerCss)),this.container.addClass(B(n.containerCssClass)),this.elementTabIndex=this.opts.element.attr("tabindex"),this.opts.element.data("select2",this).attr("tabindex","-1").before(this.container).on("click.select2",C),this.container.data("select2",this),this.dropdown=this.container.find(".select2-drop"),A(this.dropdown,this.opts.element,this.opts.adaptDropdownCssClass),this.dropdown.addClass(B(n.dropdownCssClass)),this.dropdown.data("select2",this),this.dropdown.on("click",C),this.results=r=this.container.find(s),this.search=i=this.container.find("input.select2-input"),this.queryCount=0,this.resultsPage=0,this.context=null,this.initContainer(),this.container.on("click",C),w(this.results),this.dropdown.on("mousemove-filtered touchstart touchmove touchend",s,this.bind(this.highlightUnderEvent)),x(80,this.results),this.dropdown.on("scroll-debounced",s,this.bind(this.loadMoreIfNeeded)),e(this.container).on("change",".select2-input",function(e){e.stopPropagation()}),e(this.dropdown).on("change",".select2-input",function(e){e.stopPropagation()}),e.fn.mousewheel&&r.mousewheel(function(e,t,n,i){var s=r.scrollTop();i>0&&s-i<=0?(r.scrollTop(0),C(e)):i<0&&r.get(0).scrollHeight-r.scrollTop()+i<=r.height()&&(r.scrollTop(r.get(0).scrollHeight-r.height()),C(e))}),b(i),i.on("keyup-change input paste",this.bind(this.updateResults)),i.on("focus",function(){i.addClass("select2-focused")}),i.on("blur",function(){i.removeClass("select2-focused")}),this.dropdown.on("mouseup",s,this.bind(function(t){e(t.target).closest(".select2-result-selectable").length>0&&(this.highlightUnderEvent(t),this.selectHighlighted(t))})),this.dropdown.on("click mouseup mousedown",function(e){e.stopPropagation()}),e.isFunction(this.opts.initSelection)&&(this.initSelection(),this.monitorSource()),n.maximumInputLength!==null&&this.search.attr("maxlength",n.maximumInputLength);var u=n.element.prop("disabled");u===t&&(u=!1),this.enable(!u);var a=n.element.prop("readonly");a===t&&(a=!1),this.readonly(a),l=l||v(),this.autofocus=n.element.prop("autofocus"),n.element.prop("autofocus",!1),this.autofocus&&this.focus(),this.nextSearchTerm=t},destroy:function(){var e=this.opts.element,n=e.data("select2");this.close(),this.propertyObserver&&(delete this.propertyObserver,this.propertyObserver=null),n!==t&&(n.container.remove(),n.dropdown.remove(),e.removeClass("select2-offscreen").removeData("select2").off(".select2").prop("autofocus",this.autofocus||!1),this.elementTabIndex?e.attr({tabindex:this.elementTabIndex}):e.removeAttr("tabindex"),e.show())},optionToData:function(e){if(e.is("option"))return{id:e.prop("value"),text:e.text(),element:e.get(),css:e.attr("class"),disabled:e.prop("disabled"),locked:m(e.attr("locked"),"locked")||m(e.data("locked"),!0)};if(e.is("optgroup"))return{text:e.attr("label"),children:[],element:e.get(),css:e.attr("class")}},prepareOpts:function(n){var r,i,s,o,u=this;r=n.element,r.get(0).tagName.toLowerCase()==="select"&&(this.select=i=n.element),i&&e.each(["id","multiple","ajax","query","createSearchChoice","initSelection","data","tags"],function(){if(this in n)throw new Error("Option '"+this+"' is not allowed for Select2 when attached to a <select> element.")}),n=e.extend({},{populateResults:function(r,i,s){var o,a=this.opts.id;o=function(r,i,f){var l,c,h,p,d,v,m,g,y,b;r=n.sortResults(r,i,s);for(l=0,c=r.length;l<c;l+=1)h=r[l],d=h.disabled===!0,p=!d&&a(h)!==t,v=h.children&&h.children.length>0,m=e("<li></li>"),m.addClass("select2-results-dept-"+f),m.addClass("select2-result"),m.addClass(p?"select2-result-selectable":"select2-result-unselectable"),d&&m.addClass("select2-disabled"),v&&m.addClass("select2-result-with-children"),m.addClass(u.opts.formatResultCssClass(h)),g=e(document.createElement("div")),g.addClass("select2-result-label"),b=n.formatResult(h,g,s,u.opts.escapeMarkup),b!==t&&g.html(b),m.append(g),v&&(y=e("<ul></ul>"),y.addClass("select2-result-sub"),o(h.children,y,f+1),m.append(y)),m.data("select2-data",h),i.append(m)},o(i,r,0)}},e.fn.select2.defaults,n),typeof n.id!="function"&&(s=n.id,n.id=function(e){return e[s]});if(e.isArray(n.element.data("select2Tags"))){if("tags"in n)throw"tags specified as both an attribute 'data-select2-tags' and in options of Select2 "+n.element.attr("id");n.tags=n.element.data("select2Tags")}i?(n.query=this.bind(function(e){var n={results:[],more:!1},i=e.term,s,o,a;a=function(t,n){var r;t.is("option")?e.matcher(i,t.text(),t)&&n.push(u.optionToData(t)):t.is("optgroup")&&(r=u.optionToData(t),t.children().each2(function(e,t){a(t,r.children)}),r.children.length>0&&n.push(r))},s=r.children(),this.getPlaceholder()!==t&&s.length>0&&(o=this.getPlaceholderOption(),o&&(s=s.not(o))),s.each2(function(e,t){a(t,n.results)}),e.callback(n)}),n.id=function(e){return e.id},n.formatResultCssClass=function(e){return e.css}):"query"in n||("ajax"in n?(o=n.element.data("ajax-url"),o&&o.length>0&&(n.ajax.url=o),n.query=_.call(n.element,n.ajax)):"data"in n?n.query=D(n.data):"tags"in n&&(n.query=P(n.tags),n.createSearchChoice===t&&(n.createSearchChoice=function(t){return{id:e.trim(t),text:e.trim(t)}}),n.initSelection===t&&(n.initSelection=function(t,r){var i=[];e(g(t.val(),n.separator)).each(function(){var t={id:this,text:this},r=n.tags;e.isFunction(r)&&(r=r()),e(r).each(function(){if(m(this.id,t.id))return t=this,!1}),i.push(t)}),r(i)})));if(typeof n.query!="function")throw"query function not defined for Select2 "+n.element.attr("id");return n},monitorSource:function(){var e=this.opts.element,n,r;e.on("change.select2",this.bind(function(e){this.opts.element.data("select2-change-triggered")!==!0&&this.initSelection()})),n=this.bind(function(){var n=e.prop("disabled");n===t&&(n=!1),this.enable(!n);var r=e.prop("readonly");r===t&&(r=!1),this.readonly(r),A(this.container,this.opts.element,this.opts.adaptContainerCssClass),this.container.addClass(B(this.opts.containerCssClass)),A(this.dropdown,this.opts.element,this.opts.adaptDropdownCssClass),this.dropdown.addClass(B(this.opts.dropdownCssClass))}),e.on("propertychange.select2",n),this.mutationCallback===t&&(this.mutationCallback=function(e){e.forEach(n)}),r=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver,r!==t&&(this.propertyObserver&&(delete this.propertyObserver,this.propertyObserver=null),this.propertyObserver=new r(this.mutationCallback),this.propertyObserver.observe(e.get(0),{attributes:!0,subtree:!1}))},triggerSelect:function(t){var n=e.Event("select2-selecting",{val:this.id(t),object:t});return this.opts.element.trigger(n),!n.isDefaultPrevented()},triggerChange:function(t){t=t||{},t=e.extend({},t,{type:"change",val:this.val()}),this.opts.element.data("select2-change-triggered",!0),this.opts.element.trigger(t),this.opts.element.data("select2-change-triggered",!1),this.opts.element.click(),this.opts.blurOnChange&&this.opts.element.blur()},isInterfaceEnabled:function(){return this.enabledInterface===!0},enableInterface:function(){var e=this._enabled&&!this._readonly,t=!e;return e===this.enabledInterface?!1:(this.container.toggleClass("select2-container-disabled",t),this.close(),this.enabledInterface=e,!0)},enable:function(e){e===t&&(e=!0);if(this._enabled===e)return;this._enabled=e,this.opts.element.prop("disabled",!e),this.enableInterface()},disable:function(){this.enable(!1)},readonly:function(e){return e===t&&(e=!1),this._readonly===e?!1:(this._readonly=e,this.opts.element.prop("readonly",e),this.enableInterface(),!0)},opened:function(){return this.container.hasClass("select2-dropdown-open")},positionDropdown:function(){var t=this.dropdown,n=this.container.offset(),r=this.container.outerHeight(!1),i=this.container.outerWidth(!1),s=t.outerHeight(!1),o=e(window),u=o.width(),a=o.height(),f=o.scrollLeft()+u,c=o.scrollTop()+a,h=n.top+r,p=n.left,d=h+s<=c,v=n.top-s>=this.body().scrollTop(),m=t.outerWidth(!1),g=p+m<=f,y=t.hasClass("select2-drop-above"),b,w,E,S,x;y?(w=!0,!v&&d&&(E=!0,w=!1)):(w=!1,!d&&v&&(E=!0,w=!0)),E&&(t.hide(),n=this.container.offset(),r=this.container.outerHeight(!1),i=this.container.outerWidth(!1),s=t.outerHeight(!1),f=o.scrollLeft()+u,c=o.scrollTop()+a,h=n.top+r,p=n.left,m=t.outerWidth(!1),g=p+m<=f,t.show()),this.opts.dropdownAutoWidth?(x=e(".select2-results",t)[0],t.addClass("select2-drop-auto-width"),t.css("width",""),m=t.outerWidth(!1)+(x.scrollHeight===x.clientHeight?0:l.width),m>i?i=m:m=i,g=p+m<=f):this.container.removeClass("select2-drop-auto-width"),this.body().css("position")!=="static"&&(b=this.body().offset(),h-=b.top,p-=b.left),g||(p=n.left+i-m),S={left:p,width:i},w?(S.bottom=a-n.top,S.top="auto",this.container.addClass("select2-drop-above"),t.addClass("select2-drop-above")):(S.top=h,S.bottom="auto",this.container.removeClass("select2-drop-above"),t.removeClass("select2-drop-above")),S=e.extend(S,B(this.opts.dropdownCss)),t.css(S)},shouldOpen:function(){var t;return this.opened()?!1:this._enabled===!1||this._readonly===!0?!1:(t=e.Event("select2-opening"),this.opts.element.trigger(t),!t.isDefaultPrevented())},clearDropdownAlignmentPreference:function(){this.container.removeClass("select2-drop-above"),this.dropdown.removeClass("select2-drop-above")},open:function(){return this.shouldOpen()?(this.opening(),!0):!1},opening:function(){var t=this.containerId,n="scroll."+t,r="resize."+t,i="orientationchange."+t,s;this.container.addClass("select2-dropdown-open").addClass("select2-container-active"),this.clearDropdownAlignmentPreference(),this.dropdown[0]!==this.body().children().last()[0]&&this.dropdown.detach().appendTo(this.body()),s=e("#select2-drop-mask"),s.length==0&&(s=e(document.createElement("div")),s.attr("id","select2-drop-mask").attr("class","select2-drop-mask"),s.hide(),s.appendTo(this.body()),s.on("mousedown touchstart click",function(t){var n=e("#select2-drop"),r;n.length>0&&(r=n.data("select2"),r.opts.selectOnBlur&&r.selectHighlighted({noFocus:!0}),r.close({focus:!0}),t.preventDefault(),t.stopPropagation())})),this.dropdown.prev()[0]!==s[0]&&this.dropdown.before(s),e("#select2-drop").removeAttr("id"),this.dropdown.attr("id","select2-drop"),s.show(),this.positionDropdown(),this.dropdown.show(),this.positionDropdown(),this.dropdown.addClass("select2-drop-active");var o=this;this.container.parents().add(window).each(function(){e(this).on(r+" "+n+" "+i,function(e){o.positionDropdown()})})},close:function(){if(!this.opened())return;var t=this.containerId,n="scroll."+t,r="resize."+t,i="orientationchange."+t;this.container.parents().add(window).each(function(){e(this).off(n).off(r).off(i)}),this.clearDropdownAlignmentPreference(),e("#select2-drop-mask").hide(),this.dropdown.removeAttr("id"),this.dropdown.hide(),this.container.removeClass("select2-dropdown-open").removeClass("select2-container-active"),this.results.empty(),this.clearSearch(),this.search.removeClass("select2-active"),this.opts.element.trigger(e.Event("select2-close"))},externalSearch:function(e){this.open(),this.search.val(e),this.updateResults(!1)},clearSearch:function(){},getMaximumSelectionSize:function(){return B(this.opts.maximumSelectionSize)},ensureHighlightVisible:function(){var t=this.results,n,r,i,s,o,u,a;r=this.highlight();if(r<0)return;if(r==0){t.scrollTop(0);return}n=this.findHighlightableChoices().find(".select2-result-label"),i=e(n[r]),s=i.offset().top+i.outerHeight(!0),r===n.length-1&&(a=t.find("li.select2-more-results"),a.length>0&&(s=a.offset().top+a.outerHeight(!0))),o=t.offset().top+t.outerHeight(!0),s>o&&t.scrollTop(t.scrollTop()+(s-o)),u=i.offset().top-t.offset().top,u<0&&i.css("display")!="none"&&t.scrollTop(t.scrollTop()+u)},findHighlightableChoices:function(){return this.results.find(".select2-result-selectable:not(.select2-disabled, .select2-selected)")},moveHighlight:function(t){var n=this.findHighlightableChoices(),r=this.highlight();while(r>-1&&r<n.length){r+=t;var i=e(n[r]);if(i.hasClass("select2-result-selectable")&&!i.hasClass("select2-disabled")&&!i.hasClass("select2-selected")){this.highlight(r);break}}},highlight:function(t){var n=this.findHighlightableChoices(),r,i;if(arguments.length===0)return d(n.filter(".select2-highlighted")[0],n.get());t>=n.length&&(t=n.length-1),t<0&&(t=0),this.removeHighlight(),r=e(n[t]),r.addClass("select2-highlighted"),this.ensureHighlightVisible(),i=r.data("select2-data"),i&&this.opts.element.trigger({type:"select2-highlight",val:this.id(i),choice:i})},removeHighlight:function(){this.results.find(".select2-highlighted").removeClass("select2-highlighted")},countSelectableResults:function(){return this.findHighlightableChoices().length},highlightUnderEvent:function(t){var n=e(t.target).closest(".select2-result-selectable");if(n.length>0&&!n.is(".select2-highlighted")){var r=this.findHighlightableChoices();this.highlight(r.index(n))}else n.length==0&&this.removeHighlight()},loadMoreIfNeeded:function(){var e=this.results,t=e.find("li.select2-more-results"),n,r=this.resultsPage+1,i=this,s=this.search.val(),o=this.context;if(t.length===0)return;n=t.offset().top-e.offset().top-e.height(),n<=this.opts.loadMorePadding&&(t.addClass("select2-active"),this.opts.query({element:this.opts.element,term:s,page:r,context:o,matcher:this.opts.matcher,callback:this.bind(function(n){if(!i.opened())return;i.opts.populateResults.call(this,e,n.results,{term:s,page:r,context:o}),i.postprocessResults(n,!1,!1),n.more===!0?(t.detach().appendTo(e).text(i.opts.formatLoadMore(r+1)),window.setTimeout(function(){i.loadMoreIfNeeded()},10)):t.remove(),i.positionDropdown(),i.resultsPage=r,i.context=n.context,this.opts.element.trigger({type:"select2-loaded",items:n})})}))},tokenize:function(){},updateResults:function(n){function h(){r.removeClass("select2-active"),u.positionDropdown()}function p(e){i.html(e),h()}var r=this.search,i=this.results,s=this.opts,o,u=this,a,f=r.val(),l=e.data(this.container,"select2-last-term"),c;if(n!==!0&&l&&m(f,l))return;e.data(this.container,"select2-last-term",f);if(n!==!0&&(this.showSearchInput===!1||!this.opened()))return;c=++this.queryCount;var d=this.getMaximumSelectionSize();if(d>=1){o=this.data();if(e.isArray(o)&&o.length>=d&&H(s.formatSelectionTooBig,"formatSelectionTooBig")){p("<li class='select2-selection-limit'>"+s.formatSelectionTooBig(d)+"</li>");return}}if(r.val().length<s.minimumInputLength){H(s.formatInputTooShort,"formatInputTooShort")?p("<li class='select2-no-results'>"+s.formatInputTooShort(r.val(),s.minimumInputLength)+"</li>"):p(""),n&&this.showSearch&&this.showSearch(!0);return}if(s.maximumInputLength&&r.val().length>s.maximumInputLength){H(s.formatInputTooLong,"formatInputTooLong")?p("<li class='select2-no-results'>"+s.formatInputTooLong(r.val(),s.maximumInputLength)+"</li>"):p("");return}s.formatSearching&&this.findHighlightableChoices().length===0&&p("<li class='select2-searching'>"+s.formatSearching()+"</li>"),r.addClass("select2-active"),this.removeHighlight(),a=this.tokenize(),a!=t&&a!=null&&r.val(a),this.resultsPage=1,s.query({element:s.element,term:r.val(),page:this.resultsPage,context:null,matcher:s.matcher,callback:this.bind(function(o){var a;if(c!=this.queryCount)return;if(!this.opened()){this.search.removeClass("select2-active");return}this.context=o.context===t?null:o.context,this.opts.createSearchChoice&&r.val()!==""&&(a=this.opts.createSearchChoice.call(u,r.val(),o.results),a!==t&&a!==null&&u.id(a)!==t&&u.id(a)!==null&&e(o.results).filter(function(){return m(u.id(this),u.id(a))}).length===0&&o.results.unshift(a));if(o.results.length===0&&H(s.formatNoMatches,"formatNoMatches")){p("<li class='select2-no-results'>"+s.formatNoMatches(r.val())+"</li>");return}i.empty(),u.opts.populateResults.call(this,i,o.results,{term:r.val(),page:this.resultsPage,context:null}),o.more===!0&&H(s.formatLoadMore,"formatLoadMore")&&(i.append("<li class='select2-more-results'>"+u.opts.escapeMarkup(s.formatLoadMore(this.resultsPage))+"</li>"),window.setTimeout(function(){u.loadMoreIfNeeded()},10)),this.postprocessResults(o,n),h(),this.opts.element.trigger({type:"select2-loaded",items:o})})})},cancel:function(){this.close()},blur:function(){this.opts.selectOnBlur&&this.selectHighlighted({noFocus:!0}),this.close(),this.container.removeClass("select2-container-active"),this.search[0]===document.activeElement&&this.search.blur(),this.clearSearch(),this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus")},focusSearch:function(){T(this.search)},selectHighlighted:function(e){var t=this.highlight(),n=this.results.find(".select2-highlighted"),r=n.closest(".select2-result").data("select2-data");r?(this.highlight(t),this.onSelect(r,e)):e&&e.noFocus&&this.close()},getPlaceholder:function(){var e;return this.opts.element.attr("placeholder")||this.opts.element.attr("data-placeholder")||this.opts.element.data("placeholder")||this.opts.placeholder||((e=this.getPlaceholderOption())!==t?e.text():t)},getPlaceholderOption:function(){if(this.select){var e=this.select.children("option").first();if(this.opts.placeholderOption!==t)return this.opts.placeholderOption==="first"&&e||typeof this.opts.placeholderOption=="function"&&this.opts.placeholderOption(this.select);if(e.text()===""&&e.val()==="")return e}},initContainerWidth:function(){function n(){var n,r,i,s,o,u;if(this.opts.width==="off")return null;if(this.opts.width==="element")return this.opts.element.outerWidth(!1)===0?"auto":this.opts.element.outerWidth(!1)+"px";if(this.opts.width==="copy"||this.opts.width==="resolve"){n=this.opts.element.attr("style");if(n!==t){r=n.split(";");for(s=0,o=r.length;s<o;s+=1){u=r[s].replace(/\s/g,""),i=u.match(/^width:(([-+]?([0-9]*\.)?[0-9]+)(px|em|ex|%|in|cm|mm|pt|pc))/i);if(i!==null&&i.length>=1)return i[1]}}return this.opts.width==="resolve"?(n=this.opts.element.css("width"),n.indexOf("%")>0?n:this.opts.element.outerWidth(!1)===0?"auto":this.opts.element.outerWidth(!1)+"px"):null}return e.isFunction(this.opts.width)?this.opts.width():this.opts.width}var r=n.call(this);r!==null&&this.container.css("width",r)}}),i=I(r,{createContainer:function(){var t=e(document.createElement("div")).attr({"class":"select2-container"}).html(["<a href='javascript:void(0)' onclick='return false;' class='select2-choice' tabindex='-1'>","   <span class='select2-chosen'>&nbsp;</span><abbr class='select2-search-choice-close'></abbr>","   <span class='select2-arrow'><b></b></span>","</a>","<input class='select2-focusser select2-offscreen' type='text'/>","<div class='select2-drop select2-display-none'>","   <div class='select2-search'>","       <input type='text' autocomplete='off' autocorrect='off' autocapitalize='off' spellcheck='false' class='select2-input'/>","   </div>","   <ul class='select2-results'>","   </ul>","</div>"].join(""));return t},enableInterface:function(){this.parent.enableInterface.apply(this,arguments)&&this.focusser.prop("disabled",!this.isInterfaceEnabled())},opening:function(){var n,r,i;this.opts.minimumResultsForSearch>=0&&this.showSearch(!0),this.parent.opening.apply(this,arguments),this.showSearchInput!==!1&&this.search.val(this.focusser.val()),this.search.focus(),n=this.search.get(0),n.createTextRange?(r=n.createTextRange(),r.collapse(!1),r.select()):n.setSelectionRange&&(i=this.search.val().length,n.setSelectionRange(i,i)),this.search.val()===""&&this.nextSearchTerm!=t&&(this.search.val(this.nextSearchTerm),this.search.select()),this.focusser.prop("disabled",!0).val(""),this.updateResults(!0),this.opts.element.trigger(e.Event("select2-open"))},close:function(e){if(!this.opened())return;this.parent.close.apply(this,arguments),e=e||{focus:!0},this.focusser.removeAttr("disabled"),e.focus&&this.focusser.focus()},focus:function(){this.opened()?this.close():(this.focusser.removeAttr("disabled"),this.focusser.focus())},isFocused:function(){return this.container.hasClass("select2-container-active")},cancel:function(){this.parent.cancel.apply(this,arguments),this.focusser.removeAttr("disabled"),this.focusser.focus()},destroy:function(){e("label[for='"+this.focusser.attr("id")+"']").attr("for",this.opts.element.attr("id")),this.parent.destroy.apply(this,arguments)},initContainer:function(){var t,r=this.container,i=this.dropdown;this.opts.minimumResultsForSearch<0?this.showSearch(!1):this.showSearch(!0),this.selection=t=r.find(".select2-choice"),this.focusser=r.find(".select2-focusser"),this.focusser.attr("id","s2id_autogen"+o()),e("label[for='"+this.opts.element.attr("id")+"']").attr("for",this.focusser.attr("id")),this.focusser.attr("tabindex",this.elementTabIndex),this.search.on("keydown",this.bind(function(e){if(!this.isInterfaceEnabled())return;if(e.which===n.PAGE_UP||e.which===n.PAGE_DOWN){C(e);return}switch(e.which){case n.UP:case n.DOWN:this.moveHighlight(e.which===n.UP?-1:1),C(e);return;case n.ENTER:this.selectHighlighted(),C(e);return;case n.TAB:this.selectHighlighted({noFocus:!0});return;case n.ESC:this.cancel(e),C(e);return}})),this.search.on("blur",this.bind(function(e){document.activeElement===this.body().get(0)&&window.setTimeout(this.bind(function(){this.search.focus()}),0)})),this.focusser.on("keydown",this.bind(function(e){if(!this.isInterfaceEnabled())return;if(e.which===n.TAB||n.isControl(e)||n.isFunctionKey(e)||e.which===n.ESC)return;if(this.opts.openOnEnter===!1&&e.which===n.ENTER){C(e);return}if(e.which==n.DOWN||e.which==n.UP||e.which==n.ENTER&&this.opts.openOnEnter){if(e.altKey||e.ctrlKey||e.shiftKey||e.metaKey)return;this.open(),C(e);return}if(e.which==n.DELETE||e.which==n.BACKSPACE){this.opts.allowClear&&this.clear(),C(e);return}})),b(this.focusser),this.focusser.on("keyup-change input",this.bind(function(e){if(this.opts.minimumResultsForSearch>=0){e.stopPropagation();if(this.opened())return;this.open()}})),t.on("mousedown","abbr",this.bind(function(e){if(!this.isInterfaceEnabled())return;this.clear(),k(e),this.close(),this.selection.focus()})),t.on("mousedown",this.bind(function(t){this.container.hasClass("select2-container-active")||this.opts.element.trigger(e.Event("select2-focus")),this.opened()?this.close():this.isInterfaceEnabled()&&this.open(),C(t)})),i.on("mousedown",this.bind(function(){this.search.focus()})),t.on("focus",this.bind(function(e){C(e)})),this.focusser.on("focus",this.bind(function(){this.container.hasClass("select2-container-active")||this.opts.element.trigger(e.Event("select2-focus")),this.container.addClass("select2-container-active")})).on("blur",this.bind(function(){this.opened()||(this.container.removeClass("select2-container-active"),this.opts.element.trigger(e.Event("select2-blur")))})),this.search.on("focus",this.bind(function(){this.container.hasClass("select2-container-active")||this.opts.element.trigger(e.Event("select2-focus")),this.container.addClass("select2-container-active")})),this.initContainerWidth(),this.opts.element.addClass("select2-offscreen"),this.setPlaceholder()},clear:function(t){var n=this.selection.data("select2-data");if(n){var r=e.Event("select2-clearing");this.opts.element.trigger(r);if(r.isDefaultPrevented())return;var i=this.getPlaceholderOption();this.opts.element.val(i?i.val():""),this.selection.find(".select2-chosen").empty(),this.selection.removeData("select2-data"),this.setPlaceholder(),t!==!1&&(this.opts.element.trigger({type:"select2-removed",val:this.id(n),choice:n}),this.triggerChange({removed:n}))}},initSelection:function(){var e;if(this.isPlaceholderOptionSelected())this.updateSelection(null),this.close(),this.setPlaceholder();else{var n=this;this.opts.initSelection.call(null,this.opts.element,function(e){e!==t&&e!==null&&(n.updateSelection(e),n.close(),n.setPlaceholder())})}},isPlaceholderOptionSelected:function(){var e;return this.getPlaceholder()?(e=this.getPlaceholderOption())!==t&&e.prop("selected")||this.opts.element.val()===""||this.opts.element.val()===t||this.opts.element.val()===null:!1},prepareOpts:function(){var t=this.parent.prepareOpts.apply(this,arguments),n=this;return t.element.get(0).tagName.toLowerCase()==="select"?t.initSelection=function(e,t){var r=e.find("option").filter(function(){return this.selected});t(n.optionToData(r))}:"data"in t&&(t.initSelection=t.initSelection||function(n,r){var i=n.val(),s=null;t.query({matcher:function(e,n,r){var o=m(i,t.id(r));return o&&(s=r),o},callback:e.isFunction(r)?function(){r(s)}:e.noop})}),t},getPlaceholder:function(){return this.select&&this.getPlaceholderOption()===t?t:this.parent.getPlaceholder.apply(this,arguments)},setPlaceholder:function(){var e=this.getPlaceholder();if(this.isPlaceholderOptionSelected()&&e!==t){if(this.select&&this.getPlaceholderOption()===t)return;this.selection.find(".select2-chosen").html(this.opts.escapeMarkup(e)),this.selection.addClass("select2-default"),this.container.removeClass("select2-allowclear")}},postprocessResults:function(e,t,n){var r=0,i=this,s=!0;this.findHighlightableChoices().each2(function(e,t){if(m(i.id(t.data("select2-data")),i.opts.element.val()))return r=e,!1}),n!==!1&&(t===!0&&r>=0?this.highlight(r):this.highlight(0));if(t===!0){var o=this.opts.minimumResultsForSearch;o>=0&&this.showSearch(j(e.results)>=o)}},showSearch:function(t){if(this.showSearchInput===t)return;this.showSearchInput=t,this.dropdown.find(".select2-search").toggleClass("select2-search-hidden",!t),this.dropdown.find(".select2-search").toggleClass("select2-offscreen",!t),e(this.dropdown,this.container).toggleClass("select2-with-searchbox",t)},onSelect:function(e,t){if(!this.triggerSelect(e))return;var n=this.opts.element.val(),r=this.data();this.opts.element.val(this.id(e)),this.updateSelection(e),this.opts.element.trigger({type:"select2-selected",val:this.id(e),choice:e}),this.nextSearchTerm=this.opts.nextSearchTerm(e,this.search.val()),this.close(),(!t||!t.noFocus)&&this.focusser.focus(),m(n,this.id(e))||this.triggerChange({added:e,removed:r})},updateSelection:function(e){var n=this.selection.find(".select2-chosen"),r,i;this.selection.data("select2-data",e),n.empty(),e!==null&&(r=this.opts.formatSelection(e,n,this.opts.escapeMarkup)),r!==t&&n.append(r),i=this.opts.formatSelectionCssClass(e,n),i!==t&&n.addClass(i),this.selection.removeClass("select2-default"),this.opts.allowClear&&this.getPlaceholder()!==t&&this.container.addClass("select2-allowclear")},val:function(){var e,n=!1,r=null,i=this,s=this.data();if(arguments.length===0)return this.opts.element.val();e=arguments[0],arguments.length>1&&(n=arguments[1]);if(this.select)this.select.val(e).find("option").filter(function(){return this.selected}).each2(function(e,t){return r=i.optionToData(t),!1}),this.updateSelection(r),this.setPlaceholder(),n&&this.triggerChange({added:r,removed:s});else{if(!e&&e!==0){this.clear(n);return}if(this.opts.initSelection===t)throw new Error("cannot call val() if initSelection() is not defined");this.opts.element.val(e),this.opts.initSelection(this.opts.element,function(e){i.opts.element.val(e?i.id(e):""),i.updateSelection(e),i.setPlaceholder(),n&&i.triggerChange({added:e,removed:s})})}},clearSearch:function(){this.search.val(""),this.focusser.val("")},data:function(e){var n,r=!1;if(arguments.length===0)return n=this.selection.data("select2-data"),n==t&&(n=null),n;arguments.length>1&&(r=arguments[1]),e?(n=this.data(),this.opts.element.val(e?this.id(e):""),this.updateSelection(e),r&&this.triggerChange({added:e,removed:n})):this.clear(r)}}),s=I(r,{createContainer:function(){var t=e(document.createElement("div")).attr({"class":"select2-container select2-container-multi"}).html(["<ul class='select2-choices'>","  <li class='select2-search-field'>","    <input type='text' autocomplete='off' autocorrect='off' autocapitalize='off' spellcheck='false' class='select2-input'>","  </li>","</ul>","<div class='select2-drop select2-drop-multi select2-display-none'>","   <ul class='select2-results'>","   </ul>","</div>"].join(""));return t},prepareOpts:function(){var t=this.parent.prepareOpts.apply(this,arguments),n=this;return t.element.get(0).tagName.toLowerCase()==="select"?t.initSelection=function(e,t){var r=[];e.find("option").filter(function(){return this.selected}).each2(function(e,t){r.push(n.optionToData(t))}),t(r)}:"data"in t&&(t.initSelection=t.initSelection||function(n,r){var i=g(n.val(),t.separator),s=[];t.query({matcher:function(n,r,o){var u=e.grep(i,function(e){return m(e,t.id(o))}).length;return u&&s.push(o),u},callback:e.isFunction(r)?function(){var e=[];for(var n=0;n<i.length;n++){var o=i[n];for(var u=0;u<s.length;u++){var a=s[u];if(m(o,t.id(a))){e.push(a),s.splice(u,1);break}}}r(e)}:e.noop})}),t},selectChoice:function(e){var t=this.container.find(".select2-search-choice-focus");if(!t.length||!e||e[0]!=t[0])t.length&&this.opts.element.trigger("choice-deselected",t),t.removeClass("select2-search-choice-focus"),e&&e.length&&(this.close(),e.addClass("select2-search-choice-focus"),this.opts.element.trigger("choice-selected",e))},destroy:function(){e("label[for='"+this.search.attr("id")+"']").attr("for",this.opts.element.attr("id")),this.parent.destroy.apply(this,arguments)},initContainer:function(){var t=".select2-choices",r;this.searchContainer=this.container.find(".select2-search-field"),this.selection=r=this.container.find(t);var i=this;this.selection.on("click",".select2-search-choice:not(.select2-locked)",function(t){i.search[0].focus(),i.selectChoice(e(this))}),this.search.attr("id","s2id_autogen"+o()),e("label[for='"+this.opts.element.attr("id")+"']").attr("for",this.search.attr("id")),this.search.on("input paste",this.bind(function(){if(!this.isInterfaceEnabled())return;this.opened()||this.open()})),this.search.attr("tabindex",this.elementTabIndex),this.keydowns=0,this.search.on("keydown",this.bind(function(e){if(!this.isInterfaceEnabled())return;++this.keydowns;var t=r.find(".select2-search-choice-focus"),i=t.prev(".select2-search-choice:not(.select2-locked)"),s=t.next(".select2-search-choice:not(.select2-locked)"),o=N(this.search);if(!(!t.length||e.which!=n.LEFT&&e.which!=n.RIGHT&&e.which!=n.BACKSPACE&&e.which!=n.DELETE&&e.which!=n.ENTER)){var u=t;e.which==n.LEFT&&i.length?u=i:e.which==n.RIGHT?u=s.length?s:null:e.which===n.BACKSPACE?(this.unselect(t.first()),this.search.width(10),u=i.length?i:s):e.which==n.DELETE?(this.unselect(t.first()),this.search.width(10),u=s.length?s:null):e.which==n.ENTER&&(u=null),this.selectChoice(u),C(e),(!u||!u.length)&&this.open();return}if((e.which===n.BACKSPACE&&this.keydowns==1||e.which==n.LEFT)&&o.offset==0&&!o.length){this.selectChoice(r.find(".select2-search-choice:not(.select2-locked)").last()),C(e);return}this.selectChoice(null);if(this.opened())switch(e.which){case n.UP:case n.DOWN:this.moveHighlight(e.which===n.UP?-1:1),C(e);return;case n.ENTER:this.selectHighlighted(),C(e);return;case n.TAB:this.selectHighlighted({noFocus:!0}),this.close();return;case n.ESC:this.cancel(e),C(e);return}if(e.which===n.TAB||n.isControl(e)||n.isFunctionKey(e)||e.which===n.BACKSPACE||e.which===n.ESC)return;if(e.which===n.ENTER){if(this.opts.openOnEnter===!1)return;if(e.altKey||e.ctrlKey||e.shiftKey||e.metaKey)return}this.open(),(e.which===n.PAGE_UP||e.which===n.PAGE_DOWN)&&C(e),e.which===n.ENTER&&C(e)})),this.search.on("keyup",this.bind(function(e){this.keydowns=0,this.resizeSearch()})),this.search.on("blur",this.bind(function(t){this.container.removeClass("select2-container-active"),this.search.removeClass("select2-focused"),this.selectChoice(null),this.opened()||this.clearSearch(),t.stopImmediatePropagation(),this.opts.element.trigger(e.Event("select2-blur"))})),this.container.on("click",t,this.bind(function(t){if(!this.isInterfaceEnabled())return;if(e(t.target).closest(".select2-search-choice").length>0)return;this.selectChoice(null),this.clearPlaceholder(),this.container.hasClass("select2-container-active")||this.opts.element.trigger(e.Event("select2-focus")),this.open(),this.focusSearch(),t.preventDefault()})),this.container.on("focus",t,this.bind(function(){if(!this.isInterfaceEnabled())return;this.container.hasClass("select2-container-active")||this.opts.element.trigger(e.Event("select2-focus")),this.container.addClass("select2-container-active"),this.dropdown.addClass("select2-drop-active"),this.clearPlaceholder()})),this.initContainerWidth(),this.opts.element.addClass("select2-offscreen"),this.clearSearch()},enableInterface:function(){this.parent.enableInterface.apply(this,arguments)&&this.search.prop("disabled",!this.isInterfaceEnabled())},initSelection:function(){var e;this.opts.element.val()===""&&this.opts.element.text()===""&&(this.updateSelection([]),this.close(),this.clearSearch());if(this.select||this.opts.element.val()!==""){var n=this;this.opts.initSelection.call(null,this.opts.element,function(e){e!==t&&e!==null&&(n.updateSelection(e),n.close(),n.clearSearch())})}},clearSearch:function(){var e=this.getPlaceholder(),n=this.getMaxSearchWidth();e!==t&&this.getVal().length===0&&this.search.hasClass("select2-focused")===!1?(this.search.val(e).addClass("select2-default"),this.search.width(n>0?n:this.container.css("width"))):this.search.val("").width(10)},clearPlaceholder:function(){this.search.hasClass("select2-default")&&this.search.val("").removeClass("select2-default")},opening:function(){this.clearPlaceholder(),this.resizeSearch(),this.parent.opening.apply(this,arguments),this.focusSearch(),this.updateResults(!0),this.search.focus(),this.opts.element.trigger(e.Event("select2-open"))},close:function(){if(!this.opened())return;this.parent.close.apply(this,arguments)},focus:function(){this.close(),this.search.focus()},isFocused:function(){return this.search.hasClass("select2-focused")},updateSelection:function(t){var n=[],r=[],i=this;e(t).each(function(){d(i.id(this),n)<0&&(n.push(i.id(this)),r.push(this))}),t=r,this.selection.find(".select2-search-choice").remove(),e(t).each(function(){i.addSelectedChoice(this)}),i.postprocessResults()},tokenize:function(){var e=this.search.val();e=this.opts.tokenizer.call(this,e,this.data(),this.bind(this.onSelect),this.opts),e!=null&&e!=t&&(this.search.val(e),e.length>0&&this.open())},onSelect:function(e,t){if(!this.triggerSelect(e))return;this.addSelectedChoice(e),this.opts.element.trigger({type:"selected",val:this.id(e),choice:e}),(this.select||!this.opts.closeOnSelect)&&this.postprocessResults(e,!1,this.opts.closeOnSelect===!0),this.opts.closeOnSelect?(this.close(),this.search.width(10)):this.countSelectableResults()>0?(this.search.width(10),this.resizeSearch(),this.getMaximumSelectionSize()>0&&this.val().length>=this.getMaximumSelectionSize()&&this.updateResults(!0),this.positionDropdown()):(this.close(),this.search.width(10)),this.triggerChange({added:e}),(!t||!t.noFocus)&&this.focusSearch()},cancel:function(){this.close(),this.focusSearch()},addSelectedChoice:function(n){var r=!n.locked,i=e("<li class='select2-search-choice'>    <div></div>    <a href='#' onclick='return false;' class='select2-search-choice-close' tabindex='-1'></a></li>"),s=e("<li class='select2-search-choice select2-locked'><div></div></li>"),o=r?i:s,u=this.id(n),a=this.getVal(),f,l;f=this.opts.formatSelection(n,o.find("div"),this.opts.escapeMarkup),f!=t&&o.find("div").replaceWith("<div>"+f+"</div>"),l=this.opts.formatSelectionCssClass(n,o.find("div")),l!=t&&o.addClass(l),r&&o.find(".select2-search-choice-close").on("mousedown",C).on("click dblclick",this.bind(function(t){if(!this.isInterfaceEnabled())return;e(t.target).closest(".select2-search-choice").fadeOut("fast",this.bind(function(){this.unselect(e(t.target)),this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus"),this.close(),this.focusSearch()})).dequeue(),C(t)})).on("focus",this.bind(function(){if(!this.isInterfaceEnabled())return;this.container.addClass("select2-container-active"),this.dropdown.addClass("select2-drop-active")})),o.data("select2-data",n),o.insertBefore(this.searchContainer),a.push(u),this.setVal(a)},unselect:function(t){var n=this.getVal(),r,i;t=t.closest(".select2-search-choice");if(t.length===0)throw"Invalid argument: "+t+". Must be .select2-search-choice";r=t.data("select2-data");if(!r)return;while((i=d(this.id(r),n))>=0)n.splice(i,1),this.setVal(n),this.select&&this.postprocessResults();var s=e.Event("select2-removing");s.val=this.id(r),s.choice=r,this.opts.element.trigger(s);if(s.isDefaultPrevented())return;t.remove(),this.opts.element.trigger({type:"select2-removed",val:this.id(r),choice:r}),this.triggerChange({removed:r})},postprocessResults:function(e,t,n){var r=this.getVal(),i=this.results.find(".select2-result"),s=this.results.find(".select2-result-with-children"),o=this;i.each2(function(e,t){var n=o.id(t.data("select2-data"));d(n,r)>=0&&(t.addClass("select2-selected"),t.find(".select2-result-selectable").addClass("select2-selected"))}),s.each2(function(e,t){!t.is(".select2-result-selectable")&&t.find(".select2-result-selectable:not(.select2-selected)").length===0&&t.addClass("select2-selected")}),this.highlight()==-1&&n!==!1&&o.highlight(0),!this.opts.createSearchChoice&&!i.filter(".select2-result:not(.select2-selected)").length>0&&(!e||e&&!e.more&&this.results.find(".select2-no-results").length===0)&&H(o.opts.formatNoMatches,"formatNoMatches")&&this.results.append("<li class='select2-no-results'>"+o.opts.formatNoMatches(o.search.val())+"</li>")},getMaxSearchWidth:function(){return this.selection.width()-y(this.search)},resizeSearch:function(){var e,t,n,r,i,s=y(this.search);e=L(this.search)+10,t=this.search.offset().left,n=this.selection.width(),r=this.selection.offset().left,i=n-(t-r)-s,i<e&&(i=n-s),i<40&&(i=n-s),i<=0&&(i=e),this.search.width(Math.floor(i))},getVal:function(){var e;return this.select?(e=this.select.val(),e===null?[]:e):(e=this.opts.element.val(),g(e,this.opts.separator))},setVal:function(t){var n;this.select?this.select.val(t):(n=[],e(t).each(function(){d(this,n)<0&&n.push(this)}),this.opts.element.val(n.length===0?"":n.join(this.opts.separator)))},buildChangeDetails:function(e,t){var t=t.slice(0),e=e.slice(0);for(var n=0;n<t.length;n++)for(var r=0;r<e.length;r++)m(this.opts.id(t[n]),this.opts.id(e[r]))&&(t.splice(n,1),n>0&&n--,e.splice(r,1),r--);return{added:t,removed:e}},val:function(n,r){var i,s=this;if(arguments.length===0)return this.getVal();i=this.data(),i.length||(i=[]);if(!n&&n!==0){this.opts.element.val(""),this.updateSelection([]),this.clearSearch(),r&&this.triggerChange({added:this.data(),removed:i});return}this.setVal(n);if(this.select)this.opts.initSelection(this.select,this.bind(this.updateSelection)),r&&this.triggerChange(this.buildChangeDetails(i,this.data()));else{if(this.opts.initSelection===t)throw new Error("val() cannot be called if initSelection() is not defined");this.opts.initSelection(this.opts.element,function(t){var n=e.map(t,s.id);s.setVal(n),s.updateSelection(t),s.clearSearch(),r&&s.triggerChange(s.buildChangeDetails(i,s.data()))})}this.clearSearch()},onSortStart:function(){if(this.select)throw new Error("Sorting of elements is not supported when attached to <select>. Attach to <input type='hidden'/> instead.");this.search.width(0),this.searchContainer.hide()},onSortEnd:function(){var t=[],n=this;this.searchContainer.show(),this.searchContainer.appendTo(this.searchContainer.parent()),this.resizeSearch(),this.selection.find(".select2-search-choice").each(function(){t.push(n.opts.id(e(this).data("select2-data")))}),this.setVal(t),this.triggerChange()},data:function(t,n){var r=this,i,s;if(arguments.length===0)return this.selection.find(".select2-search-choice").map(function(){return e(this).data("select2-data")}).get();s=this.data(),t||(t=[]),i=e.map(t,function(e){return r.opts.id(e)}),this.setVal(i),this.updateSelection(t),this.clearSearch(),n&&this.triggerChange(this.buildChangeDetails(s,this.data()))}}),e.fn.select2=function(){var n=Array.prototype.slice.call(arguments,0),r,o,u,a,f,l=["val","destroy","opened","open","close","focus","isFocused","container","dropdown","onSortStart","onSortEnd","enable","disable","readonly","positionDropdown","data","search"],c=["opened","isFocused","container","dropdown"],h=["val","data"],p={search:"externalSearch"};return this.each(function(){if(n.length===0||typeof n[0]=="object")r=n.length===0?{}:e.extend({},n[0]),r.element=e(this),r.element.get(0).tagName.toLowerCase()==="select"?f=r.element.prop("multiple"):(f=r.multiple||!1,"tags"in r&&(r.multiple=f=!0)),o=f?new s:new i,o.init(r);else{if(typeof n[0]!="string")throw"Invalid arguments to select2 plugin: "+n;if(d(n[0],l)<0)throw"Unknown method: "+n[0];a=t,o=e(this).data("select2");if(o===t)return;u=n[0],u==="container"?a=o.container:u==="dropdown"?a=o.dropdown:(p[u]&&(u=p[u]),a=o[u].apply(o,n.slice(1)));if(d(n[0],c)>=0||d(n[0],h)&&n.length==1)return!1}}),a===t?this:a},e.fn.select2.defaults={width:"copy",loadMorePadding:0,closeOnSelect:!0,openOnEnter:!0,containerCss:{},dropdownCss:{},containerCssClass:"",dropdownCssClass:"",formatResult:function(e,t,n,r){var i=[];return O(e.text,n.term,i,r),i.join("")},formatSelection:function(e,n,r){return e?r(e.text):t},sortResults:function(e,t,n){return e},formatResultCssClass:function(e){return t},formatSelectionCssClass:function(e,n){return t},formatNoMatches:function(){return"No matches found"},formatInputTooShort:function(e,t){var n=t-e.length;return"Please enter "+n+" more character"+(n==1?"":"s")},formatInputTooLong:function(e,t){var n=e.length-t;return"Please delete "+n+" character"+(n==1?"":"s")},formatSelectionTooBig:function(e){return"You can only select "+e+" item"+(e==1?"":"s")},formatLoadMore:function(e){return"Loading more results..."},formatSearching:function(){return"Searching..."},minimumResultsForSearch:0,minimumInputLength:0,maximumInputLength:null,maximumSelectionSize:0,id:function(e){return e.id},matcher:function(e,t){return p(""+t).toUpperCase().indexOf(p(""+e).toUpperCase())>=0},separator:",",tokenSeparators:[],tokenizer:F,escapeMarkup:M,blurOnChange:!1,selectOnBlur:!1,adaptContainerCssClass:function(e){return e},adaptDropdownCssClass:function(e){return null},nextSearchTerm:function(e,n){return t}},e.fn.select2.ajaxDefaults={transport:e.ajax,params:{type:"GET",cache:!1,dataType:"json"}},window.Select2={query:{ajax:_,local:D,tags:P},util:{debounce:E,markMatch:O,escapeMarkup:M,stripDiacritics:p},"class":{"abstract":r,single:i,multi:s}}}(jQuery),define("select2",function(){}),define("mockup-patterns-select2",["jquery","mockup-patterns-base","select2","jquery.event.drag","jquery.event.drop"],function(e,t){var n=t.extend({name:"select2",defaults:{separator:","},initializeValues:function(){var t=this;t.options.initialValues&&(t.options.id=function(e){return e.id},t.options.initSelection=function(n,r){var i=[],s=n.val(),o=t.options.initialValues;typeof t.options.initialValues=="string"&&t.options.initialValues!==""&&(t.options.initialValues[0]==="{"?o=JSON.parse(t.options.initialValues):(o={},e(t.options.initialValues.split(t.options.separator)).each(function(){var t=this.split(":"),n=e.trim(t[0]),r=e.trim(t[1]);o[n]=r}))),e(s.split(t.options.separator)).each(function(){var e=this;o[this]&&(e=o[this]),i.push({id:this,text:e})}),r(i)})},initializeTags:function(){var t=this;t.options.tags&&typeof t.options.tags=="string"&&(t.options.tags.substr(0,1)==="["?t.options.tags=JSON.parse(t.options.tags):t.options.tags=t.options.tags.split(t.options.separator)),t.options.tags&&!t.options.allowNewItems&&(t.options.data=e.map(t.options.tags,function(e,t){return{id:e,text:e}}),t.options.multiple=!0,delete t.options.tags)},initializeOrdering:function(){var t=this;if(t.options.orderable){var n=function(e,t){return e?e.text:undefined};t.options.formatSelection&&(n=t.options.formatSelection),t.options.formatSelection=function(r,i){return i.parents("li").drag("start",function(n,r){return e(this).addClass("select2-choice-dragging"),t.$el.select2("onSortStart"),e.drop({tolerance:function(t,n,r){var i=t.pageY>r.top+r.height/2;return e.data(r.elem,"drop+reorder",i?"insertAfter":"insertBefore"),this.contains(r,[t.pageX,t.pageY])}}),e(this).clone().addClass("dragging").css({opacity:.75,position:"absolute"}).appendTo(document.body)}).drag(function(t,n){e(n.proxy).css({top:n.offsetY,left:n.offsetX});var r=n.drop[0],i=e.data(r||{},"drop+reorder");r&&(r!=n.current||i!=n.method)&&(e(this)[i](r),n.current=r,n.method=i,n.update())}).drag("end",function(n,r){e(this).removeClass("select2-choice-dragging"),t.$el.select2("onSortEnd"),e(r.proxy).remove()}).drop("init",function(e,t){return this==t.drag?!1:!0}),n(r,i)}}},initializeSelect2:function(){var e=this;e.$el.select2(e.options),e.$select2=e.$el.parent().find(".select2-container"),e.$el.parent().off("close.modal.patterns"),e.options.orderable&&e.$select2.addClass("select2-orderable")},init:function(){var t=this;t.options.allowNewItems=t.options.hasOwnProperty("allowNewItems")?JSON.parse(t.options.allowNewItems):!0;if(t.options.ajax||t.options.vocabularyUrl){t.options.vocabularyUrl&&(t.options.multiple=!0,t.options.ajax=t.options.ajax||{},t.options.ajax.url=t.options.vocabularyUrl,t.options.initSelection=function(n,r){var i=[],s=n.val();e(s.split(t.options.separator)).each(function(){i.push({id:this,text:this})}),r(i)});var n="";t.options.ajax=e.extend({quietMillis:300,data:function(e,t){return n=e,{query:e,page_limit:10,page:t}},results:function(r,i){var s=r.results;if(t.options.vocabularyUrl){var o=[];e.each(r.results,function(e,t){o.push(t.id)}),s=[];var u=n===""||e.inArray(n,o)>=0;t.options.allowNewItems&&!u&&s.push({id:n,text:n}),(u||t.options.allowNewItems)&&e.each(r.results,function(e,t){s.push(t)})}return{results:s}}},t.options.ajax)}else if(t.options.multiple&&t.$el.is("select")){var r=t.$el.val()||[],i=e.map(t.$el.find("option"),function(t){return{text:e(t).html(),id:t.value}}),s=e('<input type="hidden" />');s.val(r.join(t.options.separator)),s.attr("class",t.$el.attr("class")),s.attr("name",t.$el.attr("name")),s.attr("id",t.$el.attr("id")),t.$orig=t.$el,t.$el.replaceWith(s),t.$el=s,t.options.data=i}t.initializeValues(),t.initializeTags(),t.initializeOrdering(),t.initializeSelect2()}});return n}),define("mockup-patterns-livesearch",["jquery","underscore","mockup-patterns-base","mockup-patterns-toggle","mockup-patterns-select2","mockup-utils"],function(e,t,n,r,i,s){var o=n.extend({name:"livesearch",timeout:null,blurTimout:null,$results:null,$input:null,$toggle:null,cache:{},currentTerm:null,renderedTerm:"",results:"",index:null,testTarget:null,defaults:{url:null,delay:200,blurDelay:200,highlight:"pattern-livesearch-highlight",minimumInputLength:3,toggleTarget:".pattern-livesearch-container",toggleClass:"show",positionToggleWithInput:!0,resultsTarget:".pattern-livesearch-results",input:".pattern-livesearch-input",resultsContainerTemplate:"<ul></ul>",resultsContainerTemplateSelector:null,resultsAppendTo:"ul",resultSelector:".pattern-livesearch-result",resultTemplate:'<li class="pattern-livesearch-result pattern-livesearch-type-<%= Type %>"><a class="pattern-livesearch-result-title" href="<%= getURL %>"><%= Title %></a><p class="pattern-livesearch-result-desc"><%= Description %></p></li>',resultTemplateSelector:null,helpTemplate:'<div class="pattern-livesearch-help"><%= help %></div>',helpTemplateSelector:null,typeMoreTemplate:'Type <%= more %> more character<%= more === 1 ? "" : "s" %> to search.',typeMoreTemplateSelector:null,noResultsTemplate:"No results found.",noResultsTemplateSelector:null,searchingTemplate:"Searching...",searchingTemplateSelector:null,isTest:!1,setPosition:function(){var e=this;if(e.options.positionToggleWithInput){var t=e.$input.position().top+e.$input.outerHeight();e.$toggle.css({top:t+"px"})}}},init:function(){var t=this;t.query=new s.QueryHelper(e.extend(!0,{},t.options,{pattern:t})),this.$results=e(t.options.resultsTarget,t.$el),t.query.valid||e.error("No url provided for livesearch results "+t.$el),t.query.valid?t.options.ajax=t.query.selectAjax():t.options.tags=[],t.$input=e(t.options.input,t.$el),t.$input.length<1&&e.error("Input element not found "+t.$el),t.$input.on("focus.livesearch.patterns",function(e){window.clearInterval(t.blurTimeout),t.show()}),t.$input.on("blur.livesearch.patterns",function(e){t.blurTimeout=window.setInterval(function(){t.hide(),window.clearInterval(t.blurTimeout)},t.options.blurDelay)}),t.options.toggleTarget&&(t.$toggle=e(t.options.toggleTarget,t.$el),t.$toggle.length&&(e("html").on("click.livesearch.patterns",function(){t.hide()}),t.$toggle.on("click.livesearch.patterns",function(e){e.stopPropagation(),window.clearInterval(t.blurTimeout)}),t.$input.on("click.livesearch.patterns",function(e){e.stopPropagation()}))),t.$input.on("keyup keydown",function(e){return t._handler(e)}),t.on("showing.livesearch.patterns",function(e){t.render(e)}),t.on("searched.livesearch.patterns",function(e){t.render(e)}),t.on("render.livesearch.patterns",function(e){t.render(e)}),t.on("searching.livesearch.patterns",function(e){t.render(e)}),t.on("cachedresult.livesearch.patterns",function(e){t.render(e)})},search:function(){var t=this,n=t.currentTerm;t.trigger("searching");if(t.cache[n]!==undefined){t.trigger("cachedresult");return}var r=t.options.ajax.data(n,1);window.clearInterval(t.timeout),e.get(t.options.ajax.url,e.param(r),function(e){e.results!==undefined?t.cache[n]=e.results:console.log("error from server returning result"),t.trigger("searched")})},applyTemplate:function(n,r){var i=this,s;return i.options[n+"TemplateSelector"]?(s=e(i.options[n+"TemplateSelector"]).html(),s||(s=i.options[n+"Template"])):s=i.options[n+"Template"],t.template(s,r)},getCache:function(){var e=this,t=[];return e.currentTerm!==null&&e.currentTerm.length>=e.options.minimumInputLength&&e.cache[e.currentTerm]!==undefined&&(t=e.cache[e.currentTerm]),t},renderHelp:function(e,t){var n=this,r=n.applyTemplate(e,t);return n.applyTemplate("help",{help:r})},renderJsonResults:function(t){var n=this,r="";return t.length>0?e.each(t,function(e,t){r+=n.applyTemplate("result",t)}):r=n.renderHelp("noResults",{}),r},render:function(t){var n=this;if(n.currentTerm===n.renderedTerm)return;var r=e("<div />");if(t.type==="searching")r.html(n.renderHelp("searching",{}));else{n.renderedTerm=n.currentTerm;if(n.currentTerm===null||n.currentTerm.length<n.options.minimumInputLength){var i=n.currentTerm!==null?n.options.minimumInputLength-n.currentTerm.length:n.options.minimumInputLength;r.html(n.renderHelp("typeMore",{more:i}))}else{var s=n.getCache();r.html(n.applyTemplate("resultsContainer",n));var o=r.find(n.options.resultsAppendTo);o.length===0&&(o=r),s?o.append(n.renderJsonResults(s)):r.html(n.renderHelp("noResults",{}))}}n.options.setPosition.apply(n),n.$results.html(r),n.trigger("rendered")},show:function(){var e=this;e.trigger("showing"),e.$toggle&&e.$toggle.addClass(e.options.toggleClass),e.trigger("shown")},hide:function(){var t=this,n=t.options.highlight;t.trigger("hiding"),t.$toggle&&t.$toggle.removeClass(t.options.toggleClass),e("."+n,t.$results).removeClass(n),t.trigger("hidden")},items:function(){return this.$results.find(this.options.resultSelector)},_keyUp:function(){var t=this,n=t.options.highlight,r=e("."+n,t.$results);r.length>0&&r.prev().length>0&&(r.removeClass(n),r=r.prev().addClass(n))},_keyDown:function(){var t=this,n=t.options.highlight,r=e("."+n,t.$results);r.length===0?r=t.items().first().addClass(n):r.next().length>0&&(r.removeClass(n),r=r.next().addClass(n))},_keyEscape:function(){this.$input.trigger("blur.livesearch.patterns")},_keyEnter:function(){var e=this,t=e.options.highlight,n=e.$results.find("."+t).find("a").attr("href");if(e.options.isTest){e.testTarget=n;return}window.location=n},_handler:function(e){var t=this;window.clearTimeout(t.timeout);if(e.type==="keyup")switch(e.which){case 13:return t._keyEnter(),!1;case 27:t._keyEscape();break;case 38:break;case 40:break;case 37:break;case 39:break;default:t.currentTerm=t.$input.val(),t.$input.val().length>=t.options.minimumInputLength?t.timeout=window.setInterval(function(){try{t.search()}catch(e){console.log("error trying to search"),window.clearInterval(t.timeout)}},t.options.delay):t.trigger("render")}else if(e.type==="keydown")switch(e.which){case 38:return t._keyUp(),!1;case 40:return t._keyDown(),!1}}});return o}),define("text!js/patterns/livesearch.js",[],function(){return"/* Livesearch pattern.\n *\n * Options:\n *    url(string): The server-side url that will be queried. (null)\n *    delay(integer): Delay in ms after user types before searching. (200)\n *    highlight(string): CSS class that will be used to highlight items on keyboard navigation. ('pattern-livesearch-highlight')\n *    minimumInputLength(integer): Number of characters user must type before search begins. (3)\n *    input(string): Selector for element that will be used for the livesearch input. ('.pattern-livesearch-input')\n *    toggleTarget(string): Selector for element that will be shown when results are found. ('.pattern-livesearch-container')\n *    toggleClass(string): CSS class that will be added to target toggle element when results are found. ('show')\n *    positionToggleWithInput(boolean): Whether or not the toggle element should be positioned relative to the input element. If set to false setPosition() will not be called. (true)\n *    setPosition(function): Function which will be used to set the position of the toggle element. (look at source)\n *    resultsTarget(string): Selector for element where results from the server will be inserted. ('.pattern-livesearch-results')\n *    resultsContainerTemplate(string): Template for the element that will contain results. If resultContainerTemplateSelector is set, this will not be used. ('<ul></ul>')\n *    resultsContainerTemplateSelector(string): Selector for an element in the DOM to use in place of resultContainerTemplate. (null)\n *    resultsAppendTo(string): Selector for element within results to append to ('ul')\n *    resultSelector(string): Will be used to select result items from within the result container. ('.pattern-livesearch-result')\n *    resultTemplate(string): Will be used to select result items from within the result container. ('<li class=\"pat-livesearch-result pat-livesearch-type-<%= Type %>\"><a class=\"pat-livesearch-result-title\" href=\"<%= getURL %>\"><%= Title %></a><p class=\"pat-livesearch-result-desc\"><%= Description %></p></li>')\n *    resultTemplateSelector(string): Selector for element to be used in place of resultTemplate. (null)\n *    helpTemplate(string): Template for the element that will contain help messages, such as 'No results found.' or 'Type 3 more characters to search.' ('<div class=\"pattern-livesearch-help\"><%= help %></div>')\n *    helpTemplateSelector(string): Element in the DOM to be used instead of helpTemplate. (null)\n *    typeMoreTemplate(string): Template for message which is displayed if the current input length is less than minimumInputLength. ('Type <%= more %> more character<%= more === 1 ? \"\" : \"s\" %> to search.')\n *    typeMoreTemplateSelector(string): Element in the DOM to be used instead of typeMoreTemplate. (null)\n *    noResultsTemplate(string): Template for message that is displayed after a search when no results were found. ('No results found.')\n *    noResultsTemplateSelector(string): Element in the DOM to be used instead of noResultsTemplate. (null)\n *    searchingTemplate(string): Template for message which will be displayed after a search has started and before it has ended. ('Searching...')\n *    searchingTemplateSelector(string): Element in the DOM to be used instead of searchingTemplate. (null)\n *\n * Documentation:\n *    # Example\n *\n *    {{ example-1 }}\n *\n * Example: example-1\n *    <div class=\"pat-livesearch\"\n *         data-pat-livesearch=\"url: /search.json;\">\n *      <input type=\"text\" class=\"pat-livesearch-input\" placeholder=\"Search\" />\n *      <div class=\"pat-livesearch-container\">\n *        <div class=\"pat-livesearch-results\"></div>\n *      </div>\n *    </div>\n *\n * License:\n *    Copyright (C) 2010 Plone Foundation\n *\n *    This program is free software; you can redistribute it and/or modify it\n *    under the terms of the GNU General Public License as published by the\n *    Free Software Foundation; either version 2 of the License.\n *\n *    This program is distributed in the hope that it will be useful, but\n *    WITHOUT ANY WARRANTY; without even the implied warranty of\n *    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General\n *    Public License for more details.\n *\n *    You should have received a copy of the GNU General Public License along\n *    with this program; if not, write to the Free Software Foundation, Inc.,\n *    51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA.\n */\n\n\ndefine([\n  'jquery',\n  'underscore',\n  'mockup-patterns-base',\n  'mockup-patterns-toggle',\n  'mockup-patterns-select2', // TODO: is this still a dependency\n  'mockup-utils'\n], function($, _, Base, Toggle, Select2, utils) {\n  'use strict';\n\n  var Livesearch = Base.extend({\n    name: 'livesearch',\n    timeout: null,\n    blurTimout: null,\n    $results: null,\n    $input: null,\n    $toggle: null,\n    cache: {},\n    currentTerm: null,\n    renderedTerm: '',\n    results: '',\n    index: null,\n    testTarget: null,\n    defaults: {\n      url: null, // must be set in order to work\n      delay: 200,\n      blurDelay: 200,\n      highlight: 'pattern-livesearch-highlight', // class to add to items when selected\n      minimumInputLength: 3, // number of chars user should type before searching\n      toggleTarget: '.pattern-livesearch-container', // the element to show/hide when performing search\n      toggleClass: 'show',\n      positionToggleWithInput: true,\n      resultsTarget: '.pattern-livesearch-results', // the element to fill with results\n      input: '.pattern-livesearch-input', // input selector\n      resultsContainerTemplate: '<ul></ul>',\n      resultsContainerTemplateSelector: null,\n      resultsAppendTo: 'ul', // selector for element within results to append to.\n      resultSelector: '.pattern-livesearch-result',\n      resultTemplate: '' +\n        '<li class=\"pattern-livesearch-result pattern-livesearch-type-<%= Type %>\">' +\n          '<a class=\"pattern-livesearch-result-title\" href=\"<%= getURL %>\">' +\n            '<%= Title %>' +\n          '</a>' +\n          '<p class=\"pattern-livesearch-result-desc\"><%= Description %></p>' +\n        '</li>',\n      resultTemplateSelector: null,\n      helpTemplate: '<div class=\"pattern-livesearch-help\"><%= help %></div>',\n      helpTemplateSelector: null,\n      typeMoreTemplate: 'Type <%= more %> more character<%= more === 1 ? \"\" : \"s\" %> to search.',\n      typeMoreTemplateSelector: null,\n      noResultsTemplate: 'No results found.',\n      noResultsTemplateSelector: null,\n      searchingTemplate: 'Searching...',\n      searchingTemplateSelector: null,\n      isTest: false,\n      setPosition: function() {\n        var self = this;\n        if (self.options.positionToggleWithInput) {\n          var top = self.$input.position().top + self.$input.outerHeight();\n          self.$toggle.css({'top': top + 'px'});\n        }\n      }\n    },\n\n    init: function() {\n      var self = this;\n      self.query = new utils.QueryHelper(\n          $.extend(true, {}, self.options, {pattern: self}));\n\n      this.$results = $(self.options.resultsTarget, self.$el);\n\n      if (!self.query.valid) {\n        $.error('No url provided for livesearch results ' + self.$el);\n      }\n\n      if (self.query.valid) {\n        self.options.ajax = self.query.selectAjax();\n      }\n      else {\n        self.options.tags = [];\n      }\n\n      self.$input = $(self.options.input, self.$el);\n\n      if (self.$input.length < 1) {\n        $.error('Input element not found ' + self.$el);\n      }\n\n      self.$input.on('focus.livesearch.patterns', function(e) {\n        window.clearInterval(self.blurTimeout);\n        self.show();\n      });\n\n      self.$input.on('blur.livesearch.patterns', function(e) {\n        self.blurTimeout = window.setInterval(function() {\n          self.hide();\n          window.clearInterval(self.blurTimeout);\n        }, self.options.blurDelay);\n      });\n\n      if (self.options.toggleTarget) {\n        self.$toggle = $(self.options.toggleTarget, self.$el);\n        if (self.$toggle.length) {\n          $('html').on('click.livesearch.patterns', function() {\n            self.hide();\n          });\n          self.$toggle.on('click.livesearch.patterns', function(event) {\n            event.stopPropagation();\n            window.clearInterval(self.blurTimeout);\n          });\n          self.$input.on('click.livesearch.patterns', function(event) {\n            event.stopPropagation();\n          });\n        }\n\n      }\n\n      self.$input.on('keyup keydown', function(event) {\n        return self._handler(event);\n      });\n\n      self.on('showing.livesearch.patterns', function(event) {\n        self.render(event);\n      });\n      self.on('searched.livesearch.patterns', function(event) {\n        self.render(event);\n      });\n      self.on('render.livesearch.patterns', function(event) {\n        self.render(event);\n      });\n      self.on('searching.livesearch.patterns', function(event) {\n        self.render(event);\n      });\n      self.on('cachedresult.livesearch.patterns', function(event) {\n        self.render(event);\n      });\n    },\n\n    search: function() {\n      var self = this;\n      var term = self.currentTerm;\n      self.trigger('searching');\n\n      if (self.cache[term] !== undefined) {\n        // already have results, do not load ajax\n        self.trigger('cachedresult');\n        return;\n      }\n\n      var params = self.options.ajax.data(term, 1);\n      window.clearInterval(self.timeout);\n      $.get(\n        self.options.ajax.url,\n        $.param(params),\n        function(data) {\n          if (data.results !== undefined) {\n            self.cache[term] = data.results;\n          } else {\n            console.log('error from server returning result');\n          }\n\n          self.trigger('searched');\n        }\n      );\n    },\n\n    applyTemplate: function(tpl, item) {\n      var self = this;\n      var template;\n      if (self.options[tpl + 'TemplateSelector']) {\n        template = $(self.options[tpl + 'TemplateSelector']).html();\n        if (!template) {\n          template = self.options[tpl + 'Template'];\n        }\n      } else {\n        template = self.options[tpl + 'Template'];\n      }\n      return _.template(template, item);\n    },\n\n    getCache: function() {\n      var self = this;\n      var data = [];\n      if (self.currentTerm !== null && self.currentTerm.length >= self.options.minimumInputLength) {\n        if (self.cache[self.currentTerm] !== undefined) {\n          data = self.cache[self.currentTerm];\n        }\n      }\n      return data;\n    },\n\n    renderHelp: function(tpl, data) {\n      var self = this;\n      var msg = self.applyTemplate(tpl, data);\n      return self.applyTemplate('help', {help: msg});\n    },\n\n    renderJsonResults: function(data) {\n      var self = this;\n      var html = '';\n      if (data.length > 0) {\n        $.each(data, function(index, value) {\n          html += self.applyTemplate('result', value);\n        });\n      } else {\n        html = self.renderHelp('noResults', {});\n      }\n      return html;\n    },\n\n    render: function(event) {\n      var self = this;\n\n      // Don't do anything if we have already rendered for this term\n      if (self.currentTerm === self.renderedTerm) {\n        return;\n      }\n\n      var container = $('<div />');\n\n      if (event.type === 'searching') {\n        container.html(self.renderHelp('searching', {}));\n      } else {\n        self.renderedTerm = self.currentTerm;\n        if (self.currentTerm === null || self.currentTerm.length < self.options.minimumInputLength) {\n          var chars = self.currentTerm !== null ? self.options.minimumInputLength - self.currentTerm.length : self.options.minimumInputLength;\n          container.html(self.renderHelp('typeMore', {more: chars}));\n        } else {\n          var data = self.getCache();\n          container.html(self.applyTemplate('resultsContainer', self));\n          var appendTo = container.find(self.options.resultsAppendTo);\n          if (appendTo.length === 0) {\n            appendTo = container;\n          }\n          if (data) {\n            appendTo.append(self.renderJsonResults(data));\n          } else {\n            container.html(self.renderHelp('noResults', {}));\n          }\n        }\n      }\n\n      self.options.setPosition.apply(self);\n      self.$results.html(container);\n      self.trigger('rendered');\n    },\n\n    show: function() {\n      var self = this;\n      self.trigger('showing');\n      if (self.$toggle) {\n        self.$toggle.addClass(self.options.toggleClass);\n      }\n      self.trigger('shown');\n    },\n\n    hide: function() {\n      var self = this;\n      var className = self.options.highlight;\n      self.trigger('hiding');\n      if (self.$toggle) {\n        self.$toggle.removeClass(self.options.toggleClass);\n      }\n      $('.' + className, self.$results).removeClass(className);\n      self.trigger('hidden');\n    },\n\n    items: function() {\n      return this.$results.find(this.options.resultSelector);\n    },\n\n    _keyUp: function() {\n      var self = this;\n      var className = self.options.highlight;\n      var selected = $('.' + className, self.$results);\n\n      if (selected.length > 0) {\n        if (selected.prev().length > 0) {\n          selected.removeClass(className);\n          selected = selected.prev().addClass(className);\n        }\n      }\n    },\n\n    _keyDown: function() {\n      var self = this;\n      var className = self.options.highlight;\n      var selected = $('.' + className, self.$results);\n\n      if (selected.length === 0) {\n        selected = self.items().first().addClass(className);\n      } else {\n        if (selected.next().length > 0) {\n          selected.removeClass(className);\n          selected = selected.next().addClass(className);\n        }\n      }\n    },\n\n    _keyEscape: function() {\n      this.$input.trigger('blur.livesearch.patterns');\n    },\n\n    _keyEnter: function() {\n      var self = this;\n      var hl = self.options.highlight;\n      var target = self.$results.find('.' + hl)\n        .find('a').attr('href');\n      if (self.options.isTest) {\n        self.testTarget = target;\n        return;\n      }\n      window.location = target;\n    },\n\n    _handler: function(event) {\n      var self = this;\n      window.clearTimeout(self.timeout);\n      if (event.type === 'keyup') {\n        switch (event.which) {\n          case 13:\n            self._keyEnter();\n            return false;\n          case 27:\n            self._keyEscape();\n            break;\n          case 38: break; // up arrow\n          case 40: break; // down arrow\n          case 37: break; // keyLeft\n          case 39: break; // keyRight\n          default:\n            self.currentTerm = self.$input.val();\n            if (self.$input.val().length >= self.options.minimumInputLength) {\n              self.timeout = window.setInterval(function() {\n                try {\n                  self.search();\n                } catch (e) {\n                  console.log('error trying to search');\n                  window.clearInterval(self.timeout);\n                }\n              }, self.options.delay);\n            } else {\n              self.trigger('render');\n            }\n\n        }\n      } else if (event.type === 'keydown') {\n        switch (event.which) {\n          case 38:\n            self._keyUp();\n            return false;\n          case 40:\n            self._keyDown();\n            return false;\n        }\n      }\n    }\n\n  });\n\n  return Livesearch;\n\n});\n"}),define("mockup-router",["jquery","underscore","backbone"],function(e,t,n){var r=function(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")},i=n.Router.extend({actions:[],redirects:{},addRoute:function(e,n,i,s,o,u){t.findWhere(this.patterns,{patternName:e,id:n})===undefined&&this.actions.push({patternName:e,id:n,callback:i,context:s,pathExp:o,expReplace:u});var a=new RegExp("("+r(e)+":"+r(n)+")");this.route(a,"handleRoute")},addRedirect:function(e,t){this.redirects[e]=t},handleRoute:function(e){var n=e.split(":"),r=n[0],i=n[1],s=t.findWhere(this.actions,{patternName:r,id:i});s&&s.callback.call(s.context)},redirect:function(){var e=window.parent.location.pathname,n,r,i;t.some(this.actions,function(t){if(t.pathExp){r=new RegExp(t.pathExp);if(e.match(r)){i="!/"+t.patternName+":"+t.id;var s="";return t.expReplace&&(s=t.expReplace),n=e.replace(r,s),!0}}},this);if(i===undefined)for(var s in this.redirects){r=new RegExp(s);if(e.match(r)){i="!/"+this.redirects[s],n=e.replace(r,"");break}}i!==undefined&&this._changeLocation.apply(this,[n,i])},_changeLocation:function(e,t){window.parent.location.hash=t,window.parent.location.pathname=e},start:function(){n.history.start()},reset:function(){this.actions=[]}});return new i}),function(e){typeof define=="function"&&define.amd?define("jquery.form",["jquery"],e):e(typeof jQuery!="undefined"?jQuery:window.Zepto)}(function(e){function r(t){var n=t.data;t.isDefaultPrevented()||(t.preventDefault(),e(t.target).ajaxSubmit(n))}function i(t){var n=t.target,r=e(n);if(!r.is("[type=submit],[type=image]")){var i=r.closest("[type=submit]");if(i.length===0)return;n=i[0]}var s=this;s.clk=n;if(n.type=="image")if(t.offsetX!==undefined)s.clk_x=t.offsetX,s.clk_y=t.offsetY;else if(typeof e.fn.offset=="function"){var o=r.offset();s.clk_x=t.pageX-o.left,s.clk_y=t.pageY-o.top}else s.clk_x=t.pageX-n.offsetLeft,s.clk_y=t.pageY-n.offsetTop;setTimeout(function(){s.clk=s.clk_x=s.clk_y=null},100)}function s(){if(!e.fn.ajaxSubmit.debug)return;var t="[jquery.form] "+Array.prototype.join.call(arguments,"");window.console&&window.console.log?window.console.log(t):window.opera&&window.opera.postError&&window.opera.postError(t)}var t={};t.fileapi=e("<input type='file'/>").get(0).files!==undefined,t.formdata=window.FormData!==undefined;var n=!!e.fn.prop;e.fn.attr2=function(){if(!n)return this.attr.apply(this,arguments);var e=this.prop.apply(this,arguments);return e&&e.jquery||typeof e=="string"?e:this.attr.apply(this,arguments)},e.fn.ajaxSubmit=function(r){function k(t){var n=e.param(t,r.traditional).split("&"),i=n.length,s=[],o,u;for(o=0;o<i;o++)n[o]=n[o].replace(/\+/g," "),u=n[o].split("="),s.push([decodeURIComponent(u[0]),decodeURIComponent(u[1])]);return s}function L(t){var n=new FormData;for(var s=0;s<t.length;s++)n.append(t[s].name,t[s].value);if(r.extraData){var o=k(r.extraData);for(s=0;s<o.length;s++)o[s]&&n.append(o[s][0],o[s][1])}r.data=null;var u=e.extend(!0,{},e.ajaxSettings,r,{contentType:!1,processData:!1,cache:!1,type:i||"POST"});r.uploadProgress&&(u.xhr=function(){var t=e.ajaxSettings.xhr();return t.upload&&t.upload.addEventListener("progress",function(e){var t=0,n=e.loaded||e.position,i=e.total;e.lengthComputable&&(t=Math.ceil(n/i*100)),r.uploadProgress(e,n,i,t)},!1),t}),u.data=null;var a=u.beforeSend;return u.beforeSend=function(e,t){r.formData?t.data=r.formData:t.data=n,a&&a.call(this,e,t)},e.ajax(u)}function A(t){function T(e){var t=null;try{e.contentWindow&&(t=e.contentWindow.document)}catch(n){s("cannot get iframe.contentWindow document: "+n)}if(t)return t;try{t=e.contentDocument?e.contentDocument:e.document}catch(n){s("cannot get iframe.contentDocument: "+n),t=e.document}return t}function k(){function r(){try{var e=T(v).readyState;s("state = "+e),e&&e.toLowerCase()=="uninitialized"&&setTimeout(r,50)}catch(t){s("Server abort: ",t," (",t.name,")"),_(x),w&&clearTimeout(w),w=undefined}}var t=a.attr2("target"),n=a.attr2("action");o.setAttribute("target",p),(!i||/post/i.test(i))&&o.setAttribute("method","POST"),n!=l.url&&o.setAttribute("action",l.url),!l.skipEncodingOverride&&(!i||/post/i.test(i))&&a.attr({encoding:"multipart/form-data",enctype:"multipart/form-data"}),l.timeout&&(w=setTimeout(function(){b=!0,_(S)},l.timeout));var u=[];try{if(l.extraData)for(var f in l.extraData)l.extraData.hasOwnProperty(f)&&(e.isPlainObject(l.extraData[f])&&l.extraData[f].hasOwnProperty("name")&&l.extraData[f].hasOwnProperty("value")?u.push(e('<input type="hidden" name="'+l.extraData[f].name+'">').val(l.extraData[f].value).appendTo(o)[0]):u.push(e('<input type="hidden" name="'+f+'">').val(l.extraData[f]).appendTo(o)[0]));l.iframeTarget||d.appendTo("body"),v.attachEvent?v.attachEvent("onload",_):v.addEventListener("load",_,!1),setTimeout(r,15);try{o.submit()}catch(c){var h=document.createElement("form").submit;h.apply(o)}}finally{o.setAttribute("action",n),t?o.setAttribute("target",t):a.removeAttr("target"),e(u).remove()}}function _(t){if(m.aborted||M)return;A=T(v),A||(s("cannot access response document"),t=x);if(t===S&&m){m.abort("timeout"),E.reject(m,"timeout");return}if(t==x&&m){m.abort("server abort"),E.reject(m,"error","server abort");return}if(!A||A.location.href==l.iframeSrc)if(!b)return;v.detachEvent?v.detachEvent("onload",_):v.removeEventListener("load",_,!1);var n="success",r;try{if(b)throw"timeout";var i=l.dataType=="xml"||A.XMLDocument||e.isXMLDoc(A);s("isXml="+i);if(!i&&window.opera&&(A.body===null||!A.body.innerHTML)&&--O){s("requeing onLoad callback, DOM not available"),setTimeout(_,250);return}var o=A.body?A.body:A.documentElement;m.responseText=o?o.innerHTML:null,m.responseXML=A.XMLDocument?A.XMLDocument:A,i&&(l.dataType="xml"),m.getResponseHeader=function(e){var t={"content-type":l.dataType};return t[e.toLowerCase()]},o&&(m.status=Number(o.getAttribute("status"))||m.status,m.statusText=o.getAttribute("statusText")||m.statusText);var u=(l.dataType||"").toLowerCase(),a=/(json|script|text)/.test(u);if(a||l.textarea){var f=A.getElementsByTagName("textarea")[0];if(f)m.responseText=f.value,m.status=Number(f.getAttribute("status"))||m.status,m.statusText=f.getAttribute("statusText")||m.statusText;else if(a){var c=A.getElementsByTagName("pre")[0],p=A.getElementsByTagName("body")[0];c?m.responseText=c.textContent?c.textContent:c.innerText:p&&(m.responseText=p.textContent?p.textContent:p.innerText)}}else u=="xml"&&!m.responseXML&&m.responseText&&(m.responseXML=D(m.responseText));try{L=H(m,u,l)}catch(g){n="parsererror",m.error=r=g||n}}catch(g){s("error caught: ",g),n="error",m.error=r=g||n}m.aborted&&(s("upload aborted"),n=null),m.status&&(n=m.status>=200&&m.status<300||m.status===304?"success":"error"),n==="success"?(l.success&&l.success.call(l.context,L,"success",m),E.resolve(m.responseText,"success",m),h&&e.event.trigger("ajaxSuccess",[m,l])):n&&(r===undefined&&(r=m.statusText),l.error&&l.error.call(l.context,m,n,r),E.reject(m,"error",r),h&&e.event.trigger("ajaxError",[m,l,r])),h&&e.event.trigger("ajaxComplete",[m,l]),h&&!--e.active&&e.event.trigger("ajaxStop"),l.complete&&l.complete.call(l.context,m,n),M=!0,l.timeout&&clearTimeout(w),setTimeout(function(){l.iframeTarget?d.attr("src",l.iframeSrc):d.remove(),m.responseXML=null},100)}var o=a[0],u,f,l,h,p,d,v,m,g,y,b,w,E=e.Deferred();E.abort=function(e){m.abort(e)};if(t)for(f=0;f<c.length;f++)u=e(c[f]),n?u.prop("disabled",!1):u.removeAttr("disabled");l=e.extend(!0,{},e.ajaxSettings,r),l.context=l.context||l,p="jqFormIO"+(new Date).getTime(),l.iframeTarget?(d=e(l.iframeTarget),y=d.attr2("name"),y?p=y:d.attr2("name",p)):(d=e('<iframe name="'+p+'" src="'+l.iframeSrc+'" />'),d.css({position:"absolute",top:"-1000px",left:"-1000px"})),v=d[0],m={aborted:0,responseText:null,responseXML:null,status:0,statusText:"n/a",getAllResponseHeaders:function(){},getResponseHeader:function(){},setRequestHeader:function(){},abort:function(t){var n=t==="timeout"?"timeout":"aborted";s("aborting upload... "+n),this.aborted=1;try{v.contentWindow.document.execCommand&&v.contentWindow.document.execCommand("Stop")}catch(r){}d.attr("src",l.iframeSrc),m.error=n,l.error&&l.error.call(l.context,m,n,t),h&&e.event.trigger("ajaxError",[m,l,n]),l.complete&&l.complete.call(l.context,m,n)}},h=l.global,h&&0===e.active++&&e.event.trigger("ajaxStart"),h&&e.event.trigger("ajaxSend",[m,l]);if(l.beforeSend&&l.beforeSend.call(l.context,m,l)===!1)return l.global&&e.active--,E.reject(),E;if(m.aborted)return E.reject(),E;g=o.clk,g&&(y=g.name,y&&!g.disabled&&(l.extraData=l.extraData||{},l.extraData[y]=g.value,g.type=="image"&&(l.extraData[y+".x"]=o.clk_x,l.extraData[y+".y"]=o.clk_y)));var S=1,x=2,N=e("meta[name=csrf-token]").attr("content"),C=e("meta[name=csrf-param]").attr("content");C&&N&&(l.extraData=l.extraData||{},l.extraData[C]=N),l.forceSync?k():setTimeout(k,10);var L,A,O=50,M,D=e.parseXML||function(e,t){return window.ActiveXObject?(t=new ActiveXObject("Microsoft.XMLDOM"),t.async="false",t.loadXML(e)):t=(new DOMParser).parseFromString(e,"text/xml"),t&&t.documentElement&&t.documentElement.nodeName!="parsererror"?t:null},P=e.parseJSON||function(e){return window.eval("("+e+")")},H=function(t,n,r){var i=t.getResponseHeader("content-type")||"",s=n==="xml"||!n&&i.indexOf("xml")>=0,o=s?t.responseXML:t.responseText;return s&&o.documentElement.nodeName==="parsererror"&&e.error&&e.error("parsererror"),r&&r.dataFilter&&(o=r.dataFilter(o,n)),typeof o=="string"&&(n==="json"||!n&&i.indexOf("json")>=0?o=P(o):(n==="script"||!n&&i.indexOf("javascript")>=0)&&e.globalEval(o)),o};return E}if(!this.length)return s("ajaxSubmit: skipping submit process - no element selected"),this;var i,o,u,a=this;typeof r=="function"?r={success:r}:r===undefined&&(r={}),i=r.type||this.attr2("method"),o=r.url||this.attr2("action"),u=typeof o=="string"?e.trim(o):"",u=u||window.location.href||"",u&&(u=(u.match(/^([^#]+)/)||[])[1]),r=e.extend(!0,{url:u,success:e.ajaxSettings.success,type:i||e.ajaxSettings.type,iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank"},r);var f={};this.trigger("form-pre-serialize",[this,r,f]);if(f.veto)return s("ajaxSubmit: submit vetoed via form-pre-serialize trigger"),this;if(r.beforeSerialize&&r.beforeSerialize(this,r)===!1)return s("ajaxSubmit: submit aborted via beforeSerialize callback"),this;var l=r.traditional;l===undefined&&(l=e.ajaxSettings.traditional);var c=[],h,p=this.formToArray(r.semantic,c);r.data&&(r.extraData=r.data,h=e.param(r.data,l));if(r.beforeSubmit&&r.beforeSubmit(p,this,r)===!1)return s("ajaxSubmit: submit aborted via beforeSubmit callback"),this;this.trigger("form-submit-validate",[p,this,r,f]);if(f.veto)return s("ajaxSubmit: submit vetoed via form-submit-validate trigger"),this;var d=e.param(p,l);h&&(d=d?d+"&"+h:h),r.type.toUpperCase()=="GET"?(r.url+=(r.url.indexOf("?")>=0?"&":"?")+d,r.data=null):r.data=d;var v=[];r.resetForm&&v.push(function(){a.resetForm()}),r.clearForm&&v.push(function(){a.clearForm(r.includeHidden)});if(!r.dataType&&r.target){var m=r.success||function(){};v.push(function(t){var n=r.replaceTarget?"replaceWith":"html";e(r.target)[n](t).each(m,arguments)})}else r.success&&v.push(r.success);r.success=function(e,t,n){var i=r.context||this;for(var s=0,o=v.length;s<o;s++)v[s].apply(i,[e,t,n||a,a])};if(r.error){var g=r.error;r.error=function(e,t,n){var i=r.context||this;g.apply(i,[e,t,n,a])}}if(r.complete){var y=r.complete;r.complete=function(e,t){var n=r.context||this;y.apply(n,[e,t,a])}}var b=e("input[type=file]:enabled",this).filter(function(){return e(this).val()!==""}),w=b.length>0,E="multipart/form-data",S=a.attr("enctype")==E||a.attr("encoding")==E,x=t.fileapi&&t.formdata;s("fileAPI :"+x);var T=(w||S)&&!x,N;r.iframe!==!1&&(r.iframe||T)?r.closeKeepAlive?e.get(r.closeKeepAlive,function(){N=A(p)}):N=A(p):(w||S)&&x?N=L(p):N=e.ajax(r),a.removeData("jqxhr").data("jqxhr",N);for(var C=0;C<c.length;C++)c[C]=null;return this.trigger("form-submit-notify",[this,r]),this},e.fn.ajaxForm=function(t){t=t||{},t.delegation=t.delegation&&e.isFunction(e.fn.on);if(!t.delegation&&this.length===0){var n={s:this.selector,c:this.context};return!e.isReady&&n.s?(s("DOM not ready, queuing ajaxForm"),e(function(){e(n.s,n.c).ajaxForm(t)}),this):(s("terminating; zero elements found by selector"+(e.isReady?"":" (DOM not ready)")),this)}return t.delegation?(e(document).off("submit.form-plugin",this.selector,r).off("click.form-plugin",this.selector,i).on("submit.form-plugin",this.selector,t,r).on("click.form-plugin",this.selector,t,i),this):this.ajaxFormUnbind().bind("submit.form-plugin",t,r).bind("click.form-plugin",t,i)},e.fn.ajaxFormUnbind=function(){return this.unbind("submit.form-plugin click.form-plugin")},e.fn.formToArray=function(n,r){var i=[];if(this.length===0)return i;var s=this[0],o=n?s.getElementsByTagName("*"):s.elements;if(!o)return i;var u,a,f,l,c,h,p;for(u=0,h=o.length;u<h;u++){c=o[u],f=c.name;if(!f||c.disabled)continue;if(n&&s.clk&&c.type=="image"){s.clk==c&&(i.push({name:f,value:e(c).val(),type:c.type}),i.push({name:f+".x",value:s.clk_x},{name:f+".y",value:s.clk_y}));continue}l=e.fieldValue(c,!0);if(l&&l.constructor==Array){r&&r.push(c);for(a=0,p=l.length;a<p;a++)i.push({name:f,value:l[a]})}else if(t.fileapi&&c.type=="file"){r&&r.push(c);var d=c.files;if(d.length)for(a=0;a<d.length;a++)i.push({name:f,value:d[a],type:c.type});else i.push({name:f,value:"",type:c.type})}else l!==null&&typeof l!="undefined"&&(r&&r.push(c),i.push({name:f,value:l,type:c.type,required:c.required}))}if(!n&&s.clk){var v=e(s.clk),m=v[0];f=m.name,f&&!m.disabled&&m.type=="image"&&(i.push({name:f,value:v.val()}),i.push({name:f+".x",value:s.clk_x},{name:f+".y",value:s.clk_y}))}return i},e.fn.formSerialize=function(t){return e.param(this.formToArray(t))},e.fn.fieldSerialize=function(t){var n=[];return this.each(function(){var r=this.name;if(!r)return;var i=e.fieldValue(this,t);if(i&&i.constructor==Array)for(var s=0,o=i.length;s<o;s++)n.push({name:r,value:i[s]});else i!==null&&typeof i!="undefined"&&n.push({name:this.name,value:i})}),e.param(n)},e.fn.fieldValue=function(t){for(var n=[],r=0,i=this.length;r<i;r++){var s=this[r],o=e.fieldValue(s,t);if(o===null||typeof o=="undefined"||o.constructor==Array&&!o.length)continue;o.constructor==Array?e.merge(n,o):n.push(o)}return n},e.fieldValue=function(t,n){var r=t.name,i=t.type,s=t.tagName.toLowerCase();n===undefined&&(n=!0);if(n&&(!r||t.disabled||i=="reset"||i=="button"||(i=="checkbox"||i=="radio")&&!t.checked||(i=="submit"||i=="image")&&t.form&&t.form.clk!=t||s=="select"&&t.selectedIndex==-1))return null;if(s=="select"){var o=t.selectedIndex;if(o<0)return null;var u=[],a=t.options,f=i=="select-one",l=f?o+1:a.length;for(var c=f?o:0;c<l;c++){var h=a[c];if(h.selected){var p=h.value;p||(p=h.attributes&&h.attributes.value&&!h.attributes.value.specified?h.text:h.value);if(f)return p;u.push(p)}}return u}return e(t).val()},e.fn.clearForm=function(t){return this.each(function(){e("input,select,textarea",this).clearFields(t)})},e.fn.clearFields=e.fn.clearInputs=function(t){var n=/^(?:color|date|datetime|email|month|number|password|range|search|tel|text|time|url|week)$/i;return this.each(function(){var r=this.type,i=this.tagName.toLowerCase();n.test(r)||i=="textarea"?this.value="":r=="checkbox"||r=="radio"?this.checked=!1:i=="select"?this.selectedIndex=-1:r=="file"?/MSIE/.test(navigator.userAgent)?e(this).replaceWith(e(this).clone(!0)):e(this).val(""):t&&(t===!0&&/hidden/.test(r)||typeof t=="string"&&e(this).is(t))&&(this.value="")})},e.fn.resetForm=function(){return this.each(function(){(typeof this.reset=="function"||typeof this.reset=="object"&&!this.reset.nodeType)&&this.reset()})},e.fn.enable=function(e){return e===undefined&&(e=!0),this.each(function(){this.disabled=!e})},e.fn.selected=function(t){return t===undefined&&(t=!0),this.each(function(){var n=this.type;if(n=="checkbox"||n=="radio")this.checked=t;else if(this.tagName.toLowerCase()=="option"){var r=e(this).parent("select");t&&r[0]&&r[0].type=="select-one"&&r.find("option").selected(!1),this.selected=t}})},e.fn.ajaxSubmit.debug=!1}),define("mockup-patterns-modal",["jquery","underscore","mockup-patterns-base","mockup-patterns-backdrop","mockup-registry","mockup-router","mockup-utils","jquery.form"],function(e,t,n,r,i,s,o){var u=n.extend({name:"modal",createModal:null,$model:null,defaults:{width:"",height:"",margin:20,position:"center middle",triggers:[],backdrop:"body",backdropOptions:{zIndex:"1040",opacity:"0.8",className:"backdrop",classActiveName:"backdrop-active",closeOnEsc:!0,closeOnClick:!0},title:null,titleSelector:"h1:first",buttons:'.formControls > input[type="submit"]',content:"#content",automaticallyAddButtonActions:!0,loadLinksWithinModal:!0,prependContent:".portalMessage",templateOptions:{className:"modal fade",classDialog:"modal-dialog",classModal:"modal-content",classHeaderName:"modal-header",classBodyName:"modal-body",classFooterName:"modal-footer",classWrapperName:"modal-wrapper",classWrapperInnerName:"modal-wrapper-inner",classActiveName:"in",classPrependName:"",classContentName:"",template:'<div class="<%= options.className %>">  <div class="<%= options.classDialog %>">    <div class="<%= options.classModal %>">      <div class="<%= options.classHeaderName %>">        <a class="close">&times;</a>        <% if (title) { %><h3><%= title %></h3><% } %>      </div>      <div class="<%= options.classBodyName %>">        <div class="<%= options.classPrependName %>"><%= prepend %></div>         <div class="<%= options.classContentName %>"><%= content %></div>      </div>      <div class="<%= options.classFooterName %>">         <%= buttons %>         <a class="close hiddenStructure">&times;</a>      </div>    </div>  </div></div>'},actions:{},actionOptions:{eventType:"click",target:null,ajaxUrl:null,modalFunction:null,isForm:!1,timeout:5e3,displayInModal:!0,reloadWindowOnClose:!0,error:".portalMessage.error",formFieldError:".field.error",onSuccess:null,onError:null,onFormError:null,onTimeout:null,redirectOnResponse:!1,redirectToUrl:function(t,n,r){var i=e(/<base.*?(\/>|<\/base>)/im.exec(n)[0]);return i.attr("href")}},routerOptions:{id:null,pathExp:null},form:function(n){var r=this,i=r.$modal;r.options.automaticallyAddButtonActions&&(n[r.options.buttons]={}),r.options.loadLinksWithinModal&&(n.a={}),e.each(n,function(n,s){var o=t.union(t.keys(r.options.actionOptions),["templateOptions"]),u=e.extend(!0,{},r.options.actionOptions,t.pick(s,o));s.templateOptions=e.extend(!0,s.templateOptions,r.options.templateOptions);var a=t.union(t.keys(r.options.actionOptions),["actions","actionOptions"]),f=e.extend(!0,t.omit(s,a),r.options);e(n,e("."+s.templateOptions.classBodyName,i)).each(function(t){var n=e(this);n.on(u.eventType,function(t){t.stopPropagation(),t.preventDefault(),r.loading.show(!1),u.modalFunction!==null?r[u.modalFunction]():e.nodeName(n[0],"input")||e.nodeName(n[0],"button")||s.isForm===!0?r.options.handleFormAction.apply(r,[n,u,f]):(s.ajaxUrl!==null||e.nodeName(n[0],"a"))&&r.options.handleLinkAction.apply(r,[n,u,f])})})})},handleFormAction:function(t,n,r){var i=this,s={};s[t.attr("name")]=t.attr("value");var o;e.nodeName(t[0],"form")?o=t:o=t.parents("form:not(.disableAutoSubmit)");var u;n.ajaxUrl!==null?typeof n.ajaxUrl=="function"?u=n.ajaxUrl.apply(i,[t,n]):u=n.ajaxUrl:u=t.parents("form").attr("action"),o.on("submit",function(e){e.preventDefault()}),o.trigger("submit"),i.loading.show(!1),o.ajaxSubmit({timeout:n.timeout,data:s,url:u,error:function(e,t,r){i.loading.hide(),t==="timeout"&&n.onTimeout?n.onTimeout.apply(i,e,r):n.onError?n.onError(e,t,r):console.log("error happened do something"),i.trigger("formActionError",[e,t,r])},success:function(s,o,u,a){i.loading.hide();if(e(n.error,s).size()!==0||e(n.formFieldError,s).size()!==0){n.onFormError?n.onFormError(i,s,o,u,a):i.redraw(s,r);return}if(n.redirectOnResponse===!0){typeof n.redirectToUrl=="function"?window.parent.location.href=n.redirectToUrl.apply(i,[t,s,n]):window.parent.location.href=n.redirectToUrl;return}n.onSuccess&&n.onSuccess(i,s,o,u,a),n.displayInModal===!0?i.redraw(s,r):(t.trigger("destroy.modal.patterns"),n.reloadWindowOnClose&&i.reloadWindow()),i.trigger("formActionSuccess",[s,o,u,a])}})},handleLinkAction:function(t,n,r){var i=this,s;n.ajaxUrl?typeof n.ajaxUrl=="function"?s=n.ajaxUrl.apply(i,[t,n]):s=n.ajaxUrl:s=t.attr("href");if(n.displayInModal===!1){window.parent.location.href=s;return}e.ajax({url:s,error:function(e,t,r){t==="timeout"&&n.onTimeout?n.onTimeout(i.$modal,e,r):n.onError?n.onError(e,t,r):console.log("error happened do something"),i.loading.hide(),i.trigger("linkActionError",[e,t,r])},success:function(e,t,s){i.redraw(e,r),n.onSuccess&&n.onSuccess(i,e,t,s),i.loading.hide(),i.trigger("linkActionSuccess",[e,t,s])}})},render:function(n){var r=this;r.trigger("before-render");if(!r.$raw)return;var i=r.$raw.clone();e("input:checked",i).each(function(){this.setAttribute&&this.setAttribute("checked","checked")});var s={title:"",prepend:"<div />",content:"",buttons:'<div class="pattern-modal-buttons"></div>',options:n.templateOptions};if(n.title===null){var o=e(n.titleSelector,i);s.title=o.html(),e(n.titleSelector,i).remove()}else s.title=n.title;n.prependContent&&(s.prepend=e("<div />").append(e(n.prependContent,i).clone()).html(),e(n.prependContent,i).remove()),n.content?s.content=e(n.content,i).html():s.content=i.html(),r.$modal=e(t.template(r.options.templateOptions.template,s)),r.$modalDialog=e("> ."+r.options.templateOptions.classDialog,r.$modal),e("form",r.$modal).on("keydown",function(t){if(t.keyCode!==13||t.target.nodeName==="TEXTAREA")return;t.preventDefault(),e("input[type=submit], button[type=submit], button:not(type)",this).eq(0).trigger("click")}),e(n.buttons,r.$modal).each(function(){var t=e(this);t.on("click",function(e){e.stopPropagation(),e.preventDefault()}).clone().appendTo(e(".pattern-modal-buttons",r.$modal)).off("click").on("click",function(e){e.stopPropagation(),e.preventDefault(),t.trigger("click")}),t.hide()}),r.trigger("before-events-setup"),e(".modal-header > a.close, .modal-footer > a.close",r.$modal).off("click").on("click",function(t){t.stopPropagation(),t.preventDefault(),e(t.target).trigger("destroy.modal.patterns")}),e(".row",r.$modal).removeClass("row"),n.form&&n.form.apply(r,[n.actions]),r.$modal.addClass(r.options.templateOptions.className).on("click",function(t){t.stopPropagation(),e.nodeName(t.target,"a")&&t.preventDefault(),r.$modal.trigger("modal-click")}).on("destroy.modal.patterns",function(e){e.stopPropagation(),r.hide()}).on("resize.modal.patterns",function(e){e.stopPropagation(),e.preventDefault(),r.positionModal()}).appendTo(r.$wrapperInner),r.$modal.data("pattern-"+r.name,r),r.trigger("after-render")}},reloadWindow:function(){window.parent.location.reload()},init:function(){var t=this;t.backdrop=new r(t.$el.parents(t.options.backdrop),t.options.backdropOptions),t.$wrapper=e("> ."+t.options.templateOptions.classWrapperName,t.backdrop.$el);if(t.$wrapper.size()===0){var n=t.options.backdropOptions.zIndex!==null?parseInt(t.options.backdropOptions.zIndex,10)+1:1041;t.$wrapper=e("<div/>").hide().css({"z-index":n,"overflow-y":"auto",position:"fixed",height:"100%",width:"100%",bottom:"0",left:"0",right:"0",top:"0"}).addClass(t.options.templateOptions.classWrapperName).insertBefore(t.backdrop.$backdrop).on("click",function(e){e.stopPropagation(),e.preventDefault(),t.options.backdropOptions.closeOnClick&&t.backdrop.hide()})}t.options.routerOptions.id!==null&&s.addRoute("modal",t.options.routerOptions.id,function(){this.show()},t,t.options.routerOptions.pathExp,t.options.routerOptions.expReplace),t.backdrop.on("hidden",function(e){t.$modal!==undefined&&t.$modal.hasClass(t.options.templateOptions.classActiveName)&&t.hide()}),t.options.backdropOptions.closeOnEsc===!0&&e(document).on("keydown",function(e,n){t.$el.is("."+t.options.templateOptions.classActiveName)&&e.keyCode===27&&t.hide()}),t.$wrapperInner=e("> ."+t.options.templateOptions.classWrapperInnerName,t.$wrapper),t.$wrapperInner.size()===0&&(t.$wrapperInner=e("<div/>").addClass(t.options.classWrapperInnerName).css({position:"absolute",bottom:"0",left:"0",right:"0",top:"0"}).appendTo(t.$wrapper)),t.loading=new o.ProgressIndicator({container:t.$wrapperInner,backdrop:t.backdrop,wrapper:t.$wrapper,zIndex:function(){if(!t.modalInitialized())return 10005;var e=t.$modal.css("zIndex");if(e)return parseInt(e,10)+1}}),e(window.parent).resize(function(){t.positionModal()}),t.options.triggers&&e.each(t.options.triggers,function(n,r){var i=r.substring(0,r.indexOf(" ")),s=r.substring(r.indexOf(" "),r.length);e(s||t.$el).on(i,function(e){e.stopPropagation(),e.preventDefault(),t.show()})}),t.$el.is("a")&&(t.$el.attr("href")&&(!t.options.target&&t.$el.attr("href").substr(0,1)==="#"&&(t.options.target=t.$el.attr("href"),t.options.content=""),!t.options.ajaxUrl&&t.$el.attr("href").substr(0,1)!=="#"&&(t.options.ajaxUrl=t.$el.attr("href"))),t.$el.on("click",function(e){e.stopPropagation(),e.preventDefault(),t.show()})),t.initModal()},createAjaxModal:function(){var t=this;t.trigger("before-ajax"),t.loading.show(),t.ajaxXHR=e.ajax({url:t.options.ajaxUrl,type:t.options.ajaxType}).done(function(n,r,i){t.ajaxXHR=undefined,t.loading.hide(),t.$raw=e("<div />").append(e(o.parseBodyTag(n))),t.trigger("after-ajax",t,r,i),t._show()})},createTargetModal:function(){var t=this;t.$raw=e(t.options.target).clone(),t._show()},createBasicModal:function(){var t=this;t.$raw=e("<div/>").html(t.$el.clone()),t._show()},createHtmlModal:function(){var t=this,n=e(t.options.html);t.$raw=n,t._show()},initModal:function(){var e=this;e.options.ajaxUrl?e.createModal=e.createAjaxModal:e.options.target?e.createModal=e.createTargetModal:e.options.html?e.createModal=e.createHtmlModal:e.createModal=e.createBasicModal},findPosition:function(e,t,n,r,i,s,o){var u={},a,f,l,c;return c=l=a=l="auto",e==="left"?(l=n+"px",r>s&&(l="0px"),u.left=l):e==="right"?(c=n+"px",r>s&&(c="0px"),u.right=c,u.left="auto"):(l=s/2-r/2-n+"px",r>s&&(l="0px"),u.left=l),t==="top"?(a=n+"px",i>o&&(a="0px"),u.top=a):t==="bottom"?(f=n+"px",i>o&&(f="0px"),u.bottom=f,u.top="auto"):(a=o/2-i/2-n+"px",i>o&&(a="0px"),u.top=a),u},modalInitialized:function(){var e=this;return e.$modal!==null&&e.$modal!==undefined},positionModal:function(){var t=this;if(!t.modalInitialized())return;t.$modal.removeAttr("style"),t.$wrapper.parent().is("body")&&t.$wrapper.height(e(window.parent).height());var n=typeof t.options.margin=="function"?t.options.margin():t.options.margin;t.$modal.css({position:"absolute",padding:n}),t.$modalDialog.css({margin:"0",padding:"0",width:t.options.width,height:t.options.height});var r=t.options.position.split(" "),i=r[0],s=r[1],o=t.$modalDialog.outerWidth(!0),u=t.$modalDialog.outerHeight(!0),a=t.$wrapperInner.width(),f=t.$wrapperInner.height(),l=t.findPosition(i,s,n,o,u,a,f);for(var c in l)t.$modalDialog.css(c,l[c])},render:function(e){var t=this;t.trigger("render"),t.options.render.apply(t,[e]),t.trigger("rendered")},show:function(){var e=this;e.createModal()},_show:function(){var t=this;t.render.apply(t,[t.options]),t.trigger("show"),t.backdrop.show(),t.$wrapper.show(),t.loading.hide(),t.$wrapper.parent().css("overflow","hidden"),t.$el.addClass(t.options.templateOptions.classActiveName),t.$modal.addClass(t.options.templateOptions.classActiveName),i.scan(t.$modal),t.positionModal(),e("img",t.$modal).load(function(){t.positionModal()}),e(window.parent).on("resize.modal.patterns",function(){t.positionModal()}),t.trigger("shown")},hide:function(){var t=this;t.ajaxXHR&&t.ajaxXHR.abort(),t.trigger("hide");if(t._suppressHide&&!confirm(t._suppressHide))return;e(".modal",t.$wrapper).size()<2&&(t.backdrop.hide(),t.$wrapper.hide(),t.$wrapper.parent().css("overflow","visible")),t.loading.hide(),t.$el.removeClass(t.options.templateOptions.classActiveName),t.$modal!==undefined&&(t.$modal.remove(),t.initModal()),e(window.parent).off("resize.modal.patterns"),t.trigger("hidden")},redraw:function(t,n){var r=this;r.trigger("beforeDraw"),r.$modal.remove(),r.$raw=e("<div />").append(e(o.parseBodyTag(t))),r.render.apply(r,[n||r.options]),r.$modal.addClass(r.options.templateOptions.classActiveName),r.positionModal(),i.scan(r.$modal),r.trigger("afterDraw")}});return u}),define("text!js/patterns/modal.js",[],function(){return"/* Modal pattern.\n *\n * Options:\n *    height(string): Set the height of the modal, for example: 250px ('')\n *    width(string): Set the width of the modal, for example: 80% or 500px. ('')\n *    margin(function or integer): A function, Integer or String which will be used to set the margin of the modal in pixels. If a function is passed it must return an Integer. (20)\n *    position(string): Position the modal relative to the window with the format: \"<horizontal> <vertical>\" -- allowed values: top, bottom, left, right, center, middle. ('center middle')\n *    triggers(array): Add event listeners to elements on the page which will open the modal when triggered. Pass an Array of strings with the format [\"&lt;event&gt; &lt;selector&gt;\"] or [\"&lt;event&gt;\"]. For example, [\"click .someButton\"]. If you pass in only an event such as, [\"change\"], the event listener will be added to the element on which the modal was initiated, usually a link or button. ([])\n *    title(string): A string to place in the modal header. If title is provided, titleSelector is not used. (null)\n *    titleSelector(string): Selector for an element to extract from the content provided to the modal and place in the modal header. ('h1:first')\n *    content(string): Selector for an element within the content provided to the modal to use as the modal body. ('#content')\n *    prependContent(string): Selector for elements within the content provided to the modal which will be collected and inserted, by default above, the modal content. This is useful for extracting things like alerts or status messages on forms and displaying them to the user after an AJAX response. ('.portalMessage')\n *    backdrop(string): Selector for the element upon which the Backdrop pattern should be initiated. The Backdrop is a full width mask that will be apply above the content behind the modal which is useful for highlighting the modal dialog to the user. ('body')\n *    backdropOptions(object): Look at options at backdrop pattern. ({ zIndex: \"1040\", opacity: \"0.8\", className: \"backdrop\", classActiveName: \"backdrop-active\", closeOnEsc: true, closeOnClick: true })\n *    buttons(string): Selector for matching elements, usually buttons, inputs or links, from the modal content to place in the modal footer. The original elements in the content will be hidden. ('.formControls > input[type=\"submit\"]')\n *    automaticallyAddButtonActions(boolean): Automatically create actions for elements matched with the buttons selector. They will use the options provided in actionOptions. (true)\n *    loadLinksWithinModal(boolean): Automatically load links inside of the modal using AJAX. (true)\n *    actions(object): A hash of selector to options. Where options can include any of the defaults from actionOptions. Allows for the binding of events to elements in the content and provides options for handling ajax requests and displaying them in the modal. ({})\n *\n *\n * Documentation:\n *    # Example\n *\n *    {{ example-basic }}\n *\n *    {{ example-long }}\n *\n *    {{ example-tinymce }}\n *\n *\n * Example: example-basic\n *    <a href=\"#modal1\" class=\"btn btn-large btn-primary pat-modal\"\n *                      data-pat-modal=\"width: 400\">Modal basic</a>\n *    <div id=\"modal1\" style=\"display: none\">\n *      <h1>Basic modal!</h1>\n *      <p>Indeed. Whoa whoa whoa whoa. Wait.</p>\n *    </div>\n *\n * Example: example-long\n *    <a href=\"#modal2\" class=\"btn btn-large btn-primary pat-modal\"\n *                      data-pat-modal=\"width: 500\">Modal long scrolling</a>\n *    <div id=\"modal2\" style=\"display: none\">\n *      <h1>Basic with scrolling</h1>\n *      <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua</p>\n *      <br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br />\n *      <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua</p>\n *      <br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br />\n *      <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua</p>\n *      <br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br />\n *      <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua</p>\n *      <br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br />\n *      <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua</p>\n *      <br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br />\n *      <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua</p>\n *    </div>\n *\n *\n * Example: example-tinymce\n *    <a href=\"#modaltinymce\" class=\"btn btn-large btn-primary pat-modal\"\n *       data-pat-modal=\"height: 600px;\n *                       width: 80%\">\n *       Modal with TinyMCE</a>\n *    <div id=\"modaltinymce\" style=\"display:none\">\n *      <textarea class=\"pat-tinymce\"></textarea>\n *    </div>\n *\n *\n * License:\n *    Copyright (C) 2010 Plone Foundation\n *\n *    This program is free software; you can redistribute it and/or modify it\n *    under the terms of the GNU General Public License as published by the\n *    Free Software Foundation; either version 2 of the License.\n *\n *    This program is distributed in the hope that it will be useful, but\n *    WITHOUT ANY WARRANTY; without even the implied warranty of\n *    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General\n *    Public License for more details.\n *\n *    You should have received a copy of the GNU General Public License along\n *    with this program; if not, write to the Free Software Foundation, Inc.,\n *    51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA.\n */\n\n /* globals confirm:true */\n\ndefine([\n  'jquery',\n  'underscore',\n  'mockup-patterns-base',\n  'mockup-patterns-backdrop',\n  'mockup-registry',\n  'mockup-router',\n  'mockup-utils',\n  'jquery.form'\n], function($, _, Base, Backdrop, registry, Router, utils) {\n  'use strict';\n\n  var Modal = Base.extend({\n    name: 'modal',\n    createModal: null,\n    $model: null,\n    defaults: {\n      width: '',\n      height: '',\n      margin: 20,\n      position: 'center middle', // format: '<horizontal> <vertical>' -- allowed values: top, bottom, left, right, center, middle\n      triggers: [],\n      backdrop: 'body', // Element to initiate the Backdrop on.\n      backdropOptions: {\n        zIndex: '1040',\n        opacity: '0.8',\n        className: 'backdrop',\n        classActiveName: 'backdrop-active',\n        closeOnEsc: true,\n        closeOnClick: true\n      },\n      title: null,\n      titleSelector: 'h1:first',\n      buttons: '.formControls > input[type=\"submit\"]',\n      content: '#content',\n      automaticallyAddButtonActions: true,\n      loadLinksWithinModal: true,\n      prependContent: '.portalMessage',\n      templateOptions: {\n        className: 'modal fade',\n        classDialog: 'modal-dialog',\n        classModal: 'modal-content',\n        classHeaderName: 'modal-header',\n        classBodyName: 'modal-body',\n        classFooterName: 'modal-footer',\n        classWrapperName: 'modal-wrapper',\n        classWrapperInnerName: 'modal-wrapper-inner',\n        classActiveName: 'in',\n        classPrependName: '', // String, css class to be applied to the wrapper of the prepended content\n        classContentName: '',  // String, class name to be applied to the content of the modal, useful for modal specific styling\n        template: '' +\n          '<div class=\"<%= options.className %>\">' +\n          '  <div class=\"<%= options.classDialog %>\">' +\n          '    <div class=\"<%= options.classModal %>\">' +\n          '      <div class=\"<%= options.classHeaderName %>\">' +\n          '        <a class=\"close\">&times;</a>' +\n          '        <% if (title) { %><h3><%= title %></h3><% } %>' +\n          '      </div>' +\n          '      <div class=\"<%= options.classBodyName %>\">' +\n          '        <div class=\"<%= options.classPrependName %>\"><%= prepend %></div> ' +\n          '        <div class=\"<%= options.classContentName %>\"><%= content %></div>' +\n          '      </div>' +\n          '      <div class=\"<%= options.classFooterName %>\"> ' +\n          '        <%= buttons %> ' +\n          '        <a class=\"close hiddenStructure\">&times;</a>' +\n          '      </div>' +\n          '    </div>' +\n          '  </div>' +\n          '</div>'\n      },\n      actions: {},\n      actionOptions: {\n        eventType: 'click',\n        target: null,\n        ajaxUrl: null, // string, or function($el, options) that returns a string\n        modalFunction: null, // String, function name on self to call\n        isForm: false,\n        timeout: 5000,\n        displayInModal: true,\n        reloadWindowOnClose: true,\n        error: '.portalMessage.error',\n        formFieldError: '.field.error',\n        onSuccess: null,\n        onError: null,\n        onFormError: null,\n        onTimeout: null,\n        redirectOnResponse: false,\n        redirectToUrl: function($action, response, options) {\n          var $base = $(/<base.*?(\\/>|<\\/base>)/im.exec(response)[0]);\n          return $base.attr('href');\n        }\n      },\n      routerOptions: {\n        id: null,\n        pathExp: null\n      },\n      form: function(actions) {\n        var self = this;\n        var $modal = self.$modal;\n\n        if (self.options.automaticallyAddButtonActions) {\n          actions[self.options.buttons] = {};\n        }\n\n        if (self.options.loadLinksWithinModal) {\n          actions.a = {};\n        }\n\n        $.each(actions, function(action, options) {\n          var actionKeys = _.union(_.keys(self.options.actionOptions), ['templateOptions']);\n          var actionOptions = $.extend(true, {}, self.options.actionOptions, _.pick(options, actionKeys));\n          options.templateOptions = $.extend(true, options.templateOptions, self.options.templateOptions);\n\n          var patternKeys = _.union(_.keys(self.options.actionOptions), ['actions', 'actionOptions']);\n          var patternOptions = $.extend(true, _.omit(options, patternKeys), self.options);\n\n          $(action, $('.' + options.templateOptions.classBodyName, $modal)).each(function(action) {\n            var $action = $(this);\n            $action.on(actionOptions.eventType, function(e) {\n              e.stopPropagation();\n              e.preventDefault();\n\n              self.loading.show(false);\n\n              // handle event on $action using a function on self\n              if (actionOptions.modalFunction !== null) {\n                self[actionOptions.modalFunction]();\n              // handle event on input/button using jquery.form library\n              } else if ($.nodeName($action[0], 'input') || $.nodeName($action[0], 'button') || options.isForm === true) {\n                self.options.handleFormAction.apply(self, [$action, actionOptions, patternOptions]);\n              // handle event on link with jQuery.ajax\n              } else if (options.ajaxUrl !== null || $.nodeName($action[0], 'a')) {\n                self.options.handleLinkAction.apply(self, [$action, actionOptions, patternOptions]);\n              }\n\n            });\n          });\n        });\n      },\n      handleFormAction: function($action, options, patternOptions) {\n        var self = this;\n        // pass action that was clicked when submiting form\n        var extraData = {};\n        extraData[$action.attr('name')] = $action.attr('value');\n\n        var $form;\n\n        if ($.nodeName($action[0], 'form')) {\n          $form = $action;\n        } else {\n          $form = $action.parents('form:not(.disableAutoSubmit)');\n        }\n\n        var url;\n        if (options.ajaxUrl !== null) {\n          if (typeof options.ajaxUrl === 'function') {\n            url = options.ajaxUrl.apply(self, [$action, options]);\n          } else {\n            url = options.ajaxUrl;\n          }\n        } else {\n          url = $action.parents('form').attr('action');\n        }\n\n        // We want to trigger the form submit event but NOT use the default\n        $form.on('submit', function(e) {\n          e.preventDefault();\n        });\n        $form.trigger('submit');\n\n        self.loading.show(false);\n        $form.ajaxSubmit({\n          timeout: options.timeout,\n          data: extraData,\n          url: url,\n          error: function(xhr, textStatus, errorStatus) {\n            self.loading.hide();\n            if (textStatus === 'timeout' && options.onTimeout) {\n              options.onTimeout.apply(self, xhr, errorStatus);\n            // on \"error\", \"abort\", and \"parsererror\"\n            } else if (options.onError) {\n              options.onError(xhr, textStatus, errorStatus);\n            } else {\n              console.log('error happened do something');\n            }\n            self.trigger('formActionError', [xhr, textStatus, errorStatus]);\n          },\n          success: function(response, state, xhr, form) {\n            self.loading.hide();\n            // if error is found (NOTE: check for both the portal errors\n            // and the form field-level errors)\n            if ($(options.error, response).size() !== 0 ||\n                $(options.formFieldError, response).size() !== 0) {\n              if (options.onFormError) {\n                options.onFormError(self, response, state, xhr, form);\n              } else {\n                self.redraw(response, patternOptions);\n              }\n              return;\n            }\n\n            if (options.redirectOnResponse === true) {\n              if (typeof options.redirectToUrl === 'function') {\n                window.parent.location.href = options.redirectToUrl.apply(self, [$action, response, options]);\n              } else {\n                window.parent.location.href = options.redirectToUrl;\n              }\n              return; // cut out right here since we're changing url\n            }\n\n            if (options.onSuccess) {\n              options.onSuccess(self, response, state, xhr, form);\n            }\n\n            if (options.displayInModal === true) {\n              self.redraw(response, patternOptions);\n            } else {\n              $action.trigger('destroy.modal.patterns');\n              // also calls hide\n              if (options.reloadWindowOnClose) {\n                self.reloadWindow();\n              }\n            }\n            self.trigger('formActionSuccess', [response, state, xhr, form]);\n          }\n        });\n      },\n      handleLinkAction: function($action, options, patternOptions) {\n        var self = this;\n        var url;\n\n        // Figure out URL\n        if (options.ajaxUrl) {\n          if (typeof options.ajaxUrl === 'function') {\n            url = options.ajaxUrl.apply(self, [$action, options]);\n          } else {\n            url = options.ajaxUrl;\n          }\n        } else {\n          url = $action.attr('href');\n        }\n\n        // Non-ajax link (I know it says \"ajaxUrl\" ...)\n        if (options.displayInModal === false) {\n          window.parent.location.href = url;\n          return;\n        }\n\n        // ajax version\n        $.ajax({\n          url: url,\n          error: function(xhr, textStatus, errorStatus) {\n            if (textStatus === 'timeout' && options.onTimeout) {\n              options.onTimeout(self.$modal, xhr, errorStatus);\n\n            // on \"error\", \"abort\", and \"parsererror\"\n            } else if (options.onError) {\n              options.onError(xhr, textStatus, errorStatus);\n            } else {\n              console.log('error happened do something');\n            }\n            self.loading.hide();\n            self.trigger('linkActionError', [xhr, textStatus, errorStatus]);\n          },\n          success: function(response, state, xhr) {\n            self.redraw(response, patternOptions);\n            if (options.onSuccess) {\n              options.onSuccess(self, response, state, xhr);\n            }\n            self.loading.hide();\n            self.trigger('linkActionSuccess', [response, state, xhr]);\n          }\n        });\n      },\n      render: function(options) {\n        var self = this;\n\n        self.trigger('before-render');\n\n        if (!self.$raw) {\n          return;\n        }\n        var $raw = self.$raw.clone();\n        // fix for IE9 bug (see http://bugs.jquery.com/ticket/10550)\n        $('input:checked', $raw).each(function() {\n          if (this.setAttribute) {\n            this.setAttribute('checked', 'checked');\n          }\n        });\n\n        // Object that will be passed to the template\n        var tplObject = {\n          title: '',\n          prepend: '<div />',\n          content: '',\n          buttons: '<div class=\"pattern-modal-buttons\"></div>',\n          options: options.templateOptions\n        };\n\n        // setup the Title\n        if (options.title === null) {\n          var $title = $(options.titleSelector, $raw);\n          tplObject.title = $title.html();\n          $(options.titleSelector, $raw).remove();\n        } else {\n          tplObject.title = options.title;\n        }\n\n        // Grab items to to insert into the prepend area\n        if (options.prependContent) {\n          tplObject.prepend = $('<div />').append($(options.prependContent, $raw).clone()).html();\n          $(options.prependContent, $raw).remove();\n        }\n\n        // Filter out the content if there is a selector provided\n        if (options.content) {\n          tplObject.content = $(options.content, $raw).html();\n        } else {\n          tplObject.content = $raw.html();\n        }\n\n        // Render html\n        self.$modal = $(_.template(self.options.templateOptions.template, tplObject));\n        self.$modalDialog = $('> .' + self.options.templateOptions.classDialog, self.$modal);\n\n        // In most browsers, when you hit the enter key while a form element is focused\n        // the browser will trigger the form 'submit' event.  Google Chrome also does this,\n        // but not when when the default submit button is hidden with 'display: none'.\n        // The following code will work around this issue:\n        $('form', self.$modal).on ('keydown', function (event) {\n          // ignore keys which are not enter, and ignore enter inside a textarea.\n          if (event.keyCode !== 13 || event.target.nodeName === 'TEXTAREA') {\n            return;\n          }\n          event.preventDefault();\n          $('input[type=submit], button[type=submit], button:not(type)', this).eq(0).trigger('click');\n        });\n\n        // Setup buttons\n        $(options.buttons, self.$modal).each(function() {\n          var $button = $(this);\n          $button\n            .on('click', function(e) {\n              e.stopPropagation();\n              e.preventDefault();\n            })\n            .clone()\n            .appendTo($('.pattern-modal-buttons', self.$modal))\n            .off('click').on('click', function(e) {\n              e.stopPropagation();\n              e.preventDefault();\n              $button.trigger('click');\n            });\n          $button.hide();\n        });\n\n        self.trigger('before-events-setup');\n\n        // Wire up events\n        $('.modal-header > a.close, .modal-footer > a.close', self.$modal)\n          .off('click')\n          .on('click', function(e) {\n            e.stopPropagation();\n            e.preventDefault();\n            $(e.target).trigger('destroy.modal.patterns');\n          });\n\n        // cleanup html\n        $('.row', self.$modal).removeClass('row');\n\n        // form\n        if (options.form) {\n          options.form.apply(self, [options.actions]);\n        }\n\n        self.$modal\n          .addClass(self.options.templateOptions.className)\n          .on('click', function(e) {\n            e.stopPropagation();\n            if ($.nodeName(e.target, 'a')) {\n              e.preventDefault();\n\n              // TODO: open links inside modal\n              // and slide modal body\n            }\n            self.$modal.trigger('modal-click');\n          })\n          .on('destroy.modal.patterns', function(e) {\n            e.stopPropagation();\n            self.hide();\n          })\n          .on('resize.modal.patterns', function(e) {\n            e.stopPropagation();\n            e.preventDefault();\n            self.positionModal();\n          })\n          .appendTo(self.$wrapperInner);\n        self.$modal.data('pattern-' + self.name, self);\n\n        self.trigger('after-render');\n      }\n    },\n    reloadWindow: function() {\n      window.parent.location.reload();\n    },\n    init: function() {\n      var self = this;\n\n      self.backdrop = new Backdrop(\n          self.$el.parents(self.options.backdrop),\n          self.options.backdropOptions);\n\n      self.$wrapper = $('> .' + self.options.templateOptions.classWrapperName, self.backdrop.$el);\n      if (self.$wrapper.size() === 0) {\n        var zIndex = self.options.backdropOptions.zIndex !== null ? parseInt(self.options.backdropOptions.zIndex, 10) + 1 : 1041;\n        self.$wrapper = $('<div/>')\n          .hide()\n          .css({\n            'z-index': zIndex,\n            'overflow-y': 'auto',\n            'position': 'fixed',\n            'height': '100%',\n            'width': '100%',\n            'bottom': '0',\n            'left': '0',\n            'right': '0',\n            'top': '0'\n          })\n          .addClass(self.options.templateOptions.classWrapperName)\n          .insertBefore(self.backdrop.$backdrop)\n          .on('click', function(e) {\n            e.stopPropagation();\n            e.preventDefault();\n            if (self.options.backdropOptions.closeOnClick) {\n              self.backdrop.hide();\n            }\n          });\n      }\n\n      // Router\n      if (self.options.routerOptions.id !== null) {\n        Router.addRoute('modal', self.options.routerOptions.id, function() {\n          this.show();\n        }, self, self.options.routerOptions.pathExp, self.options.routerOptions.expReplace);\n      }\n\n      self.backdrop.on('hidden', function(e) {\n        if (self.$modal !== undefined && self.$modal.hasClass(self.options.templateOptions.classActiveName)) {\n          self.hide();\n        }\n      });\n\n      if (self.options.backdropOptions.closeOnEsc === true) {\n        $(document).on('keydown', function(e, data) {\n          if (self.$el.is('.' + self.options.templateOptions.classActiveName)) {\n            if (e.keyCode === 27) {  // ESC key pressed\n              self.hide();\n            }\n          }\n        });\n      }\n\n      self.$wrapperInner = $('> .' + self.options.templateOptions.classWrapperInnerName, self.$wrapper);\n      if (self.$wrapperInner.size() === 0) {\n        self.$wrapperInner = $('<div/>')\n          .addClass(self.options.classWrapperInnerName)\n          .css({\n            'position': 'absolute',\n            'bottom': '0',\n            'left': '0',\n            'right': '0',\n            'top': '0'\n          })\n          .appendTo(self.$wrapper);\n      }\n\n      self.loading = new utils.ProgressIndicator({\n        container: self.$wrapperInner,\n        backdrop: self.backdrop,\n        wrapper: self.$wrapper,\n        zIndex: function() {\n          if (self.modalInitialized()) {\n            var zIndex = self.$modal.css('zIndex');\n            if (zIndex) {\n              return parseInt(zIndex, 10) + 1;\n            }\n          } else {\n            return 10005;\n          }\n        }\n      });\n\n      $(window.parent).resize(function() {\n        self.positionModal();\n      });\n\n      if (self.options.triggers) {\n        $.each(self.options.triggers, function(i, item) {\n          var e = item.substring(0, item.indexOf(' '));\n          var selector = item.substring(item.indexOf(' '), item.length);\n          $(selector || self.$el).on(e, function(e) {\n            e.stopPropagation();\n            e.preventDefault();\n            self.show();\n          });\n        });\n      }\n\n      if (self.$el.is('a')) {\n        if (self.$el.attr('href')) {\n          if (!self.options.target && self.$el.attr('href').substr(0, 1) === '#') {\n            self.options.target = self.$el.attr('href');\n            self.options.content = '';\n          }\n          if (!self.options.ajaxUrl && self.$el.attr('href').substr(0, 1) !== '#') {\n            self.options.ajaxUrl = self.$el.attr('href');\n          }\n        }\n        self.$el.on('click', function(e) {\n          e.stopPropagation();\n          e.preventDefault();\n          self.show();\n        });\n      }\n\n      self.initModal();\n    },\n    createAjaxModal: function() {\n      var self = this;\n      self.trigger('before-ajax');\n      self.loading.show();\n      self.ajaxXHR = $.ajax({\n        url: self.options.ajaxUrl,\n        type: self.options.ajaxType\n      }).done(function(response, textStatus, xhr) {\n        self.ajaxXHR = undefined;\n        self.loading.hide();\n        self.$raw = $('<div />').append($(utils.parseBodyTag(response)));\n        self.trigger('after-ajax', self, textStatus, xhr);\n        self._show();\n      });\n    },\n    createTargetModal: function() {\n      var self = this;\n      self.$raw = $(self.options.target).clone();\n      self._show();\n    },\n    createBasicModal: function() {\n      var self = this;\n      self.$raw = $('<div/>').html(self.$el.clone());\n      self._show();\n    },\n    createHtmlModal: function() {\n      var self = this;\n      var $el = $(self.options.html);\n      self.$raw = $el;\n      self._show();\n    },\n    initModal: function() {\n      var self = this;\n      if (self.options.ajaxUrl) {\n        self.createModal = self.createAjaxModal;\n      } else if (self.options.target) {\n        self.createModal = self.createTargetModal;\n      } else if (self.options.html) {\n        self.createModal = self.createHtmlModal;\n      } else {\n        self.createModal = self.createBasicModal;\n      }\n    },\n    findPosition: function(horpos, vertpos, margin, modalWidth, modalHeight,\n                           wrapperInnerWidth, wrapperInnerHeight) {\n      var returnpos = {};\n      var absTop, absBottom, absLeft, absRight;\n      absRight = absLeft = absTop = absLeft = 'auto';\n\n      // -- HORIZONTAL POSITION -----------------------------------------------\n      if (horpos === 'left') {\n        absLeft = margin + 'px';\n        // if the width of the wrapper is smaller than the modal, and thus the\n        // screen is smaller than the modal, force the left to simply be 0\n        if (modalWidth > wrapperInnerWidth) {\n          absLeft = '0px';\n        }\n        returnpos.left = absLeft;\n      }\n      else if (horpos === 'right') {\n        absRight =  margin + 'px';\n        // if the width of the wrapper is smaller than the modal, and thus the\n        // screen is smaller than the modal, force the right to simply be 0\n        if (modalWidth > wrapperInnerWidth) {\n          absRight = '0px';\n        }\n        returnpos.right = absRight;\n        returnpos.left = 'auto';\n      }\n      // default, no specified location, is to center\n      else {\n        absLeft = ((wrapperInnerWidth / 2) - (modalWidth / 2) - margin) + 'px';\n        // if the width of the wrapper is smaller than the modal, and thus the\n        // screen is smaller than the modal, force the left to simply be 0\n        if (modalWidth > wrapperInnerWidth) {\n          absLeft = '0px';\n        }\n        returnpos.left = absLeft;\n      }\n\n      // -- VERTICAL POSITION -------------------------------------------------\n      if (vertpos === 'top') {\n        absTop = margin + 'px';\n        // if the height of the wrapper is smaller than the modal, and thus the\n        // screen is smaller than the modal, force the top to simply be 0\n        if (modalHeight > wrapperInnerHeight) {\n          absTop = '0px';\n        }\n        returnpos.top = absTop;\n      }\n      else if (vertpos === 'bottom') {\n        absBottom = margin + 'px';\n        // if the height of the wrapper is smaller than the modal, and thus the\n        // screen is smaller than the modal, force the bottom to simply be 0\n        if (modalHeight > wrapperInnerHeight) {\n          absBottom = '0px';\n        }\n        returnpos.bottom = absBottom;\n        returnpos.top = 'auto';\n      }\n      else {\n        // default case, no specified location, is to center\n        absTop = ((wrapperInnerHeight / 2) - (modalHeight / 2) - margin) + 'px';\n        // if the height of the wrapper is smaller than the modal, and thus the\n        // screen is smaller than the modal, force the top to simply be 0\n        if (modalHeight > wrapperInnerHeight) {\n          absTop = '0px';\n        }\n        returnpos.top = absTop;\n      }\n\n      return returnpos;\n    },\n    modalInitialized: function() {\n      var self = this;\n      return self.$modal !== null && self.$modal !== undefined;\n    },\n    // re-position modal at any point.\n    //\n    // Uses:\n    //  options.margin\n    //  options.width\n    //  options.height\n    //  options.position\n    positionModal: function() {\n      var self = this;\n\n      // modal isn't initialized\n      if (!self.modalInitialized()) { return; }\n\n      // clear out any previously set styling\n      self.$modal.removeAttr('style');\n\n      // make sure the (inner) wrapper fills it's container\n      //self.$wrapperInner.css({height:'100%', width:'100%'});\n\n      // if backdrop wrapper is set on body, then wrapper should have height of\n      // the window, so we can do scrolling of inner wrapper\n      if (self.$wrapper.parent().is('body')) {\n        self.$wrapper.height($(window.parent).height());\n      }\n\n      var margin = typeof self.options.margin === 'function' ? self.options.margin() : self.options.margin;\n      self.$modal.css({\n        'position': 'absolute',\n        'padding': margin\n      });\n      self.$modalDialog.css({\n        margin: '0',\n        padding: '0',\n        width: self.options.width, // defaults to \"\", which doesn't override other css\n        height: self.options.height // defaults to \"\", which doesn't override other css\n      });\n\n      var posopt = self.options.position.split(' '),\n          horpos = posopt[0],\n          vertpos = posopt[1];\n      var modalWidth = self.$modalDialog.outerWidth(true);\n      var modalHeight = self.$modalDialog.outerHeight(true);\n      var wrapperInnerWidth = self.$wrapperInner.width();\n      var wrapperInnerHeight = self.$wrapperInner.height();\n\n      var pos = self.findPosition(\n        horpos, vertpos, margin, modalWidth, modalHeight,\n        wrapperInnerWidth, wrapperInnerHeight\n      );\n      for (var key in pos) {\n        self.$modalDialog.css(key, pos[key]);\n      }\n    },\n    render: function(options) {\n      var self = this;\n      self.trigger('render');\n      self.options.render.apply(self, [options]);\n      self.trigger('rendered');\n    },\n    show: function() {\n      var self = this;\n      self.createModal();\n    },\n    _show: function() {\n      var self = this;\n      self.render.apply(self, [ self.options ]);\n      self.trigger('show');\n      self.backdrop.show();\n      self.$wrapper.show();\n      self.loading.hide();\n      self.$wrapper.parent().css('overflow', 'hidden');\n      self.$el.addClass(self.options.templateOptions.classActiveName);\n      self.$modal.addClass(self.options.templateOptions.classActiveName);\n      registry.scan(self.$modal);\n      self.positionModal();\n      $('img', self.$modal).load(function() {\n        self.positionModal();\n      });\n      $(window.parent).on('resize.modal.patterns', function() {\n        self.positionModal();\n      });\n      self.trigger('shown');\n    },\n    hide: function() {\n      var self = this;\n      if (self.ajaxXHR) {\n        self.ajaxXHR.abort();\n      }\n      self.trigger('hide');\n      if (self._suppressHide) {\n        if (!confirm(self._suppressHide)) {\n          return;\n        }\n      }\n      if ($('.modal', self.$wrapper).size() < 2) {\n        self.backdrop.hide();\n        self.$wrapper.hide();\n        self.$wrapper.parent().css('overflow', 'visible');\n      }\n      self.loading.hide();\n      self.$el.removeClass(self.options.templateOptions.classActiveName);\n      if (self.$modal !== undefined) {\n        self.$modal.remove();\n        self.initModal();\n      }\n      $(window.parent).off('resize.modal.patterns');\n      self.trigger('hidden');\n    },\n    redraw: function(response, options) {\n      var self = this;\n      self.trigger('beforeDraw');\n      self.$modal.remove();\n      self.$raw = $('<div />').append($(utils.parseBodyTag(response)));\n      self.render.apply(self, [options || self.options]);\n      self.$modal.addClass(self.options.templateOptions.classActiveName);\n      self.positionModal();\n      registry.scan(self.$modal);\n      self.trigger('afterDraw');\n    }\n  });\n\n  return Modal;\n\n});\n"}),function(e){function Q(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1}}function G(e,t){return function(n){return st(e.call(this,n),t)}}function Y(e,t){return function(n){return this.lang().ordinal(e.call(this,n),t)}}function Z(){}function et(e){gt(e),nt(this,e)}function tt(e){var t=ct(e),n=t.year||0,r=t.month||0,i=t.week||0,s=t.day||0,o=t.hour||0,u=t.minute||0,a=t.second||0,f=t.millisecond||0;this._milliseconds=+f+a*1e3+u*6e4+o*36e5,this._days=+s+i*7,this._months=+r+n*12,this._data={},this._bubble()}function nt(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return t.hasOwnProperty("toString")&&(e.toString=t.toString),t.hasOwnProperty("valueOf")&&(e.valueOf=t.valueOf),e}function rt(e){var t={},n;for(n in e)e.hasOwnProperty(n)&&d.hasOwnProperty(n)&&(t[n]=e[n]);return t}function it(e){return e<0?Math.ceil(e):Math.floor(e)}function st(e,t,n){var r=""+Math.abs(e),i=e>=0;while(r.length<t)r="0"+r;return(i?n?"+":"":"-")+r}function ot(e,n,r,i){var s=n._milliseconds,o=n._days,u=n._months,a,f;s&&e._d.setTime(+e._d+s*r);if(o||u)a=e.minute(),f=e.hour();o&&e.date(e.date()+o*r),u&&e.month(e.month()+u*r),s&&!i&&t.updateOffset(e);if(o||u)e.minute(a),e.hour(f)}function ut(e){return Object.prototype.toString.call(e)==="[object Array]"}function at(e){return Object.prototype.toString.call(e)==="[object Date]"||e instanceof Date}function ft(e,t,n){var r=Math.min(e.length,t.length),i=Math.abs(e.length-t.length),s=0,o;for(o=0;o<r;o++)(n&&e[o]!==t[o]||!n&&pt(e[o])!==pt(t[o]))&&s++;return s+i}function lt(e){if(e){var t=e.toLowerCase().replace(/(.)s$/,"$1");e=z[e]||W[t]||t}return e}function ct(e){var t={},n,r;for(r in e)e.hasOwnProperty(r)&&(n=lt(r),n&&(t[n]=e[r]));return t}function ht(n){var r,i;if(n.indexOf("week")===0)r=7,i="day";else{if(n.indexOf("month")!==0)return;r=12,i="month"}t[n]=function(s,o){var u,a,f=t.fn._lang[n],l=[];typeof s=="number"&&(o=s,s=e),a=function(e){var n=t().utc().set(i,e);return f.call(t.fn._lang,n,s||"")};if(o!=null)return a(o);for(u=0;u<r;u++)l.push(a(u));return l}}function pt(e){var t=+e,n=0;return t!==0&&isFinite(t)&&(t>=0?n=Math.floor(t):n=Math.ceil(t)),n}function dt(e,t){return(new Date(Date.UTC(e,t+1,0))).getUTCDate()}function vt(e){return mt(e)?366:365}function mt(e){return e%4===0&&e%100!==0||e%400===0}function gt(e){var t;e._a&&e._pf.overflow===-2&&(t=e._a[u]<0||e._a[u]>11?u:e._a[a]<1||e._a[a]>dt(e._a[o],e._a[u])?a:e._a[f]<0||e._a[f]>23?f:e._a[l]<0||e._a[l]>59?l:e._a[c]<0||e._a[c]>59?c:e._a[h]<0||e._a[h]>999?h:-1,e._pf._overflowDayOfYear&&(t<o||t>a)&&(t=a),e._pf.overflow=t)}function yt(e){return e._isValid==null&&(e._isValid=!isNaN(e._d.getTime())&&e._pf.overflow<0&&!e._pf.empty&&!e._pf.invalidMonth&&!e._pf.nullInput&&!e._pf.invalidFormat&&!e._pf.userInvalidated,e._strict&&(e._isValid=e._isValid&&e._pf.charsLeftOver===0&&e._pf.unusedTokens.length===0)),e._isValid}function bt(e){return e?e.toLowerCase().replace("_","-"):e}function wt(e,n){return n._isUTC?t(e).zone(n._offset||0):t(e).local()}function Et(e,t){return t.abbr=e,p[e]||(p[e]=new Z),p[e].set(t),p[e]}function St(e){delete p[e]}function xt(e){var n=0,r,i,s,o,u=function(e){if(!p[e]&&v)try{require("./lang/"+e)}catch(t){}return p[e]};if(!e)return t.fn._lang;if(!ut(e)){i=u(e);if(i)return i;e=[e]}while(n<e.length){o=bt(e[n]).split("-"),r=o.length,s=bt(e[n+1]),s=s?s.split("-"):null;while(r>0){i=u(o.slice(0,r).join("-"));if(i)return i;if(s&&s.length>=r&&ft(o,s,!0)>=r-1)break;r--}n++}return t.fn._lang}function Tt(e){return e.match(/\[[\s\S]/)?e.replace(/^\[|\]$/g,""):e.replace(/\\/g,"")}function Nt(e){var t=e.match(b),n,r;for(n=0,r=t.length;n<r;n++)J[t[n]]?t[n]=J[t[n]]:t[n]=Tt(t[n]);return function(i){var s="";for(n=0;n<r;n++)s+=t[n]instanceof Function?t[n].call(i,e):t[n];return s}}function Ct(e,t){return e.isValid()?(t=kt(t,e.lang()),X[t]||(X[t]=Nt(t)),X[t](e)):e.lang().invalidDate()}function kt(e,t){function r(e){return t.longDateFormat(e)||e}var n=5;w.lastIndex=0;while(n>=0&&w.test(e))e=e.replace(w,r),w.lastIndex=0,n-=1;return e}function Lt(e,t){var n,r=t._strict;switch(e){case"DDDD":return _;case"YYYY":case"GGGG":case"gggg":return r?D:x;case"Y":case"G":case"g":return H;case"YYYYYY":case"YYYYY":case"GGGGG":case"ggggg":return r?P:T;case"S":if(r)return O;case"SS":if(r)return M;case"SSS":if(r)return _;case"DDD":return S;case"MMM":case"MMMM":case"dd":case"ddd":case"dddd":return C;case"a":case"A":return xt(t._l)._meridiemParse;case"X":return A;case"Z":case"ZZ":return k;case"T":return L;case"SSSS":return N;case"MM":case"DD":case"YY":case"GG":case"gg":case"HH":case"hh":case"mm":case"ss":case"ww":case"WW":return r?M:E;case"M":case"D":case"d":case"H":case"h":case"m":case"s":case"w":case"W":case"e":case"E":return E;default:return n=new RegExp(Bt(Ht(e.replace("\\","")),"i")),n}}function At(e){e=e||"";var t=e.match(k)||[],n=t[t.length-1]||[],r=(n+"").match(q)||["-",0,0],i=+(r[1]*60)+pt(r[2]);return r[0]==="+"?-i:i}function Ot(e,t,n){var r,i=n._a;switch(e){case"M":case"MM":t!=null&&(i[u]=pt(t)-1);break;case"MMM":case"MMMM":r=xt(n._l).monthsParse(t),r!=null?i[u]=r:n._pf.invalidMonth=t;break;case"D":case"DD":t!=null&&(i[a]=pt(t));break;case"DDD":case"DDDD":t!=null&&(n._dayOfYear=pt(t));break;case"YY":i[o]=pt(t)+(pt(t)>68?1900:2e3);break;case"YYYY":case"YYYYY":case"YYYYYY":i[o]=pt(t);break;case"a":case"A":n._isPm=xt(n._l).isPM(t);break;case"H":case"HH":case"h":case"hh":i[f]=pt(t);break;case"m":case"mm":i[l]=pt(t);break;case"s":case"ss":i[c]=pt(t);break;case"S":case"SS":case"SSS":case"SSSS":i[h]=pt(("0."+t)*1e3);break;case"X":n._d=new Date(parseFloat(t)*1e3);break;case"Z":case"ZZ":n._useUTC=!0,n._tzm=At(t);break;case"w":case"ww":case"W":case"WW":case"d":case"dd":case"ddd":case"dddd":case"e":case"E":e=e.substr(0,1);case"gg":case"gggg":case"GG":case"GGGG":case"GGGGG":e=e.substr(0,2),t&&(n._w=n._w||{},n._w[e]=t)}}function Mt(e){var n,r,i=[],s,c,h,p,d,v,m,g;if(e._d)return;s=Dt(e),e._w&&e._a[a]==null&&e._a[u]==null&&(h=function(n){var r=parseInt(n,10);return n?n.length<3?r>68?1900+r:2e3+r:r:e._a[o]==null?t().weekYear():e._a[o]},p=e._w,p.GG!=null||p.W!=null||p.E!=null?d=Vt(h(p.GG),p.W||1,p.E,4,1):(v=xt(e._l),m=p.d!=null?Ut(p.d,v):p.e!=null?parseInt(p.e,10)+v._week.dow:0,g=parseInt(p.w,10)||1,p.d!=null&&m<v._week.dow&&g++,d=Vt(h(p.gg),g,m,v._week.doy,v._week.dow)),e._a[o]=d.year,e._dayOfYear=d.dayOfYear),e._dayOfYear&&(c=e._a[o]==null?s[o]:e._a[o],e._dayOfYear>vt(c)&&(e._pf._overflowDayOfYear=!0),r=Rt(c,0,e._dayOfYear),e._a[u]=r.getUTCMonth(),e._a[a]=r.getUTCDate());for(n=0;n<3&&e._a[n]==null;++n)e._a[n]=i[n]=s[n];for(;n<7;n++)e._a[n]=i[n]=e._a[n]==null?n===2?1:0:e._a[n];i[f]+=pt((e._tzm||0)/60),i[l]+=pt((e._tzm||0)%60),e._d=(e._useUTC?Rt:qt).apply(null,i)}function _t(e){var t;if(e._d)return;t=ct(e._i),e._a=[t.year,t.month,t.day,t.hour,t.minute,t.second,t.millisecond],Mt(e)}function Dt(e){var t=new Date;return e._useUTC?[t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()]:[t.getFullYear(),t.getMonth(),t.getDate()]}function Pt(e){e._a=[],e._pf.empty=!0;var t=xt(e._l),n=""+e._i,r,i,s,o,u,a=n.length,l=0;s=kt(e._f,t).match(b)||[];for(r=0;r<s.length;r++)o=s[r],i=(n.match(Lt(o,e))||[])[0],i&&(u=n.substr(0,n.indexOf(i)),u.length>0&&e._pf.unusedInput.push(u),n=n.slice(n.indexOf(i)+i.length),l+=i.length),J[o]?(i?e._pf.empty=!1:e._pf.unusedTokens.push(o),Ot(o,i,e)):e._strict&&!i&&e._pf.unusedTokens.push(o);e._pf.charsLeftOver=a-l,n.length>0&&e._pf.unusedInput.push(n),e._isPm&&e._a[f]<12&&(e._a[f]+=12),e._isPm===!1&&e._a[f]===12&&(e._a[f]=0),Mt(e),gt(e)}function Ht(e){return e.replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(e,t,n,r,i){return t||n||r||i})}function Bt(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function jt(e){var t,n,r,i,s;if(e._f.length===0){e._pf.invalidFormat=!0,e._d=new Date(NaN);return}for(i=0;i<e._f.length;i++){s=0,t=nt({},e),t._pf=Q(),t._f=e._f[i],Pt(t);if(!yt(t))continue;s+=t._pf.charsLeftOver,s+=t._pf.unusedTokens.length*10,t._pf.score=s;if(r==null||s<r)r=s,n=t}nt(e,n||t)}function Ft(e){var t,n,r=e._i,i=B.exec(r);if(i){e._pf.iso=!0;for(t=0,n=F.length;t<n;t++)if(F[t][1].exec(r)){e._f=F[t][0]+(i[6]||" ");break}for(t=0,n=I.length;t<n;t++)if(I[t][1].exec(r)){e._f+=I[t][0];break}r.match(k)&&(e._f+="Z"),Pt(e)}else e._d=new Date(r)}function It(t){var n=t._i,r=m.exec(n);n===e?t._d=new Date:r?t._d=new Date(+r[1]):typeof n=="string"?Ft(t):ut(n)?(t._a=n.slice(0),Mt(t)):at(n)?t._d=new Date(+n):typeof n=="object"?_t(t):t._d=new Date(n)}function qt(e,t,n,r,i,s,o){var u=new Date(e,t,n,r,i,s,o);return e<1970&&u.setFullYear(e),u}function Rt(e){var t=new Date(Date.UTC.apply(null,arguments));return e<1970&&t.setUTCFullYear(e),t}function Ut(e,t){if(typeof e=="string")if(!isNaN(e))e=parseInt(e,10);else{e=t.weekdaysParse(e);if(typeof e!="number")return null}return e}function zt(e,t,n,r,i){return i.relativeTime(t||1,!!n,e,r)}function Wt(e,t,n){var r=i(Math.abs(e)/1e3),s=i(r/60),o=i(s/60),u=i(o/24),a=i(u/365),f=r<45&&["s",r]||s===1&&["m"]||s<45&&["mm",s]||o===1&&["h"]||o<22&&["hh",o]||u===1&&["d"]||u<=25&&["dd",u]||u<=45&&["M"]||u<345&&["MM",i(u/30)]||a===1&&["y"]||["yy",a];return f[2]=t,f[3]=e>0,f[4]=n,zt.apply({},f)}function Xt(e,n,r){var i=r-n,s=r-e.day(),o;return s>i&&(s-=7),s<i-7&&(s+=7),o=t(e).add("d",s),{week:Math.ceil(o.dayOfYear()/7),year:o.year()}}function Vt(e,t,n,r,i){var s=Rt(e,0,1).getUTCDay(),o,u;return n=n!=null?n:i,o=i-s+(s>r?7:0)-(s<i?7:0),u=7*(t-1)+(n-i)+o+1,{year:u>0?e:e-1,dayOfYear:u>0?u:vt(e-1)+u}}function $t(e){var n=e._i,r=e._f;return n===null?t.invalid({nullInput:!0}):(typeof n=="string"&&(e._i=n=xt().preparse(n)),t.isMoment(n)?(e=rt(n),e._d=new Date(+n._d)):r?ut(r)?jt(e):Pt(e):It(e),new et(e))}function Jt(e,n){t.fn[e]=t.fn[e+"s"]=function(e){var r=this._isUTC?"UTC":"";return e!=null?(this._d["set"+r+n](e),t.updateOffset(this),this):this._d["get"+r+n]()}}function Kt(e){t.duration.fn[e]=function(){return this._data[e]}}function Qt(e,n){t.duration.fn["as"+e]=function(){return+this/n}}function Gt(e){var n=!1,i=t;if(typeof ender!="undefined")return;e?(r.moment=function(){return!n&&console&&console.warn&&(n=!0,console.warn("Accessing Moment through the global scope is deprecated, and will be removed in an upcoming release.")),i.apply(null,arguments)},nt(r.moment,i)):r.moment=t}var t,n="2.5.1",r=this,i=Math.round,s,o=0,u=1,a=2,f=3,l=4,c=5,h=6,p={},d={_isAMomentObject:null,_i:null,_f:null,_l:null,_strict:null,_isUTC:null,_offset:null,_pf:null,_lang:null},v=typeof module!="undefined"&&module.exports&&typeof require!="undefined",m=/^\/?Date\((\-?\d+)/i,g=/(\-)?(?:(\d*)\.)?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?)?/,y=/^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/,b=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,4}|X|zz?|ZZ?|.)/g,w=/(\[[^\[]*\])|(\\)?(LT|LL?L?L?|l{1,4})/g,E=/\d\d?/,S=/\d{1,3}/,x=/\d{1,4}/,T=/[+\-]?\d{1,6}/,N=/\d+/,C=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,k=/Z|[\+\-]\d\d:?\d\d/gi,L=/T/i,A=/[\+\-]?\d+(\.\d{1,3})?/,O=/\d/,M=/\d\d/,_=/\d{3}/,D=/\d{4}/,P=/[+-]?\d{6}/,H=/[+-]?\d+/,B=/^\s*(?:[+-]\d{6}|\d{4})-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,j="YYYY-MM-DDTHH:mm:ssZ",F=[["YYYYYY-MM-DD",/[+-]\d{6}-\d{2}-\d{2}/],["YYYY-MM-DD",/\d{4}-\d{2}-\d{2}/],["GGGG-[W]WW-E",/\d{4}-W\d{2}-\d/],["GGGG-[W]WW",/\d{4}-W\d{2}/],["YYYY-DDD",/\d{4}-\d{3}/]],I=[["HH:mm:ss.SSSS",/(T| )\d\d:\d\d:\d\d\.\d{1,3}/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],q=/([\+\-]|\d\d)/gi,R="Date|Hours|Minutes|Seconds|Milliseconds".split("|"),U={Milliseconds:1,Seconds:1e3,Minutes:6e4,Hours:36e5,Days:864e5,Months:2592e6,Years:31536e6},z={ms:"millisecond",s:"second",m:"minute",h:"hour",d:"day",D:"date",w:"week",W:"isoWeek",M:"month",y:"year",DDD:"dayOfYear",e:"weekday",E:"isoWeekday",gg:"weekYear",GG:"isoWeekYear"},W={dayofyear:"dayOfYear",isoweekday:"isoWeekday",isoweek:"isoWeek",weekyear:"weekYear",isoweekyear:"isoWeekYear"},X={},V="DDD w W M D d".split(" "),$="M D H h m s w W".split(" "),J={M:function(){return this.month()+1},MMM:function(e){return this.lang().monthsShort(this,e)},MMMM:function(e){return this.lang().months(this,e)},D:function(){return this.date()},DDD:function(){return this.dayOfYear()},d:function(){return this.day()},dd:function(e){return this.lang().weekdaysMin(this,e)},ddd:function(e){return this.lang().weekdaysShort(this,e)},dddd:function(e){return this.lang().weekdays(this,e)},w:function(){return this.week()},W:function(){return this.isoWeek()},YY:function(){return st(this.year()%100,2)},YYYY:function(){return st(this.year(),4)},YYYYY:function(){return st(this.year(),5)},YYYYYY:function(){var e=this.year(),t=e>=0?"+":"-";return t+st(Math.abs(e),6)},gg:function(){return st(this.weekYear()%100,2)},gggg:function(){return st(this.weekYear(),4)},ggggg:function(){return st(this.weekYear(),5)},GG:function(){return st(this.isoWeekYear()%100,2)},GGGG:function(){return st(this.isoWeekYear(),4)},GGGGG:function(){return st(this.isoWeekYear(),5)},e:function(){return this.weekday()},E:function(){return this.isoWeekday()},a:function(){return this.lang().meridiem(this.hours(),this.minutes(),!0)},A:function(){return this.lang().meridiem(this.hours(),this.minutes(),!1)},H:function(){return this.hours()},h:function(){return this.hours()%12||12},m:function(){return this.minutes()},s:function(){return this.seconds()},S:function(){return pt(this.milliseconds()/100)},SS:function(){return st(pt(this.milliseconds()/10),2)},SSS:function(){return st(this.milliseconds(),3)},SSSS:function(){return st(this.milliseconds(),3)},Z:function(){var e=-this.zone(),t="+";return e<0&&(e=-e,t="-"),t+st(pt(e/60),2)+":"+st(pt(e)%60,2)},ZZ:function(){var e=-this.zone(),t="+";return e<0&&(e=-e,t="-"),t+st(pt(e/60),2)+st(pt(e)%60,2)},z:function(){return this.zoneAbbr()},zz:function(){return this.zoneName()},X:function(){return this.unix()},Q:function(){return this.quarter()}},K=["months","monthsShort","weekdays","weekdaysShort","weekdaysMin"];while(V.length)s=V.pop(),J[s+"o"]=Y(J[s],s);while($.length)s=$.pop(),J[s+s]=G(J[s],2);J.DDDD=G(J.DDD,3),nt(Z.prototype,{set:function(e){var t,n;for(n in e)t=e[n],typeof t=="function"?this[n]=t:this["_"+n]=t},_months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),months:function(e){return this._months[e.month()]},_monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),monthsShort:function(e){return this._monthsShort[e.month()]},monthsParse:function(e){var n,r,i;this._monthsParse||(this._monthsParse=[]);for(n=0;n<12;n++){this._monthsParse[n]||(r=t.utc([2e3,n]),i="^"+this.months(r,"")+"|^"+this.monthsShort(r,""),this._monthsParse[n]=new RegExp(i.replace(".",""),"i"));if(this._monthsParse[n].test(e))return n}},_weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdays:function(e){return this._weekdays[e.day()]},_weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysShort:function(e){return this._weekdaysShort[e.day()]},_weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),weekdaysMin:function(e){return this._weekdaysMin[e.day()]},weekdaysParse:function(e){var n,r,i;this._weekdaysParse||(this._weekdaysParse=[]);for(n=0;n<7;n++){this._weekdaysParse[n]||(r=t([2e3,1]).day(n),i="^"+this.weekdays(r,"")+"|^"+this.weekdaysShort(r,"")+"|^"+this.weekdaysMin(r,""),this._weekdaysParse[n]=new RegExp(i.replace(".",""),"i"));if(this._weekdaysParse[n].test(e))return n}},_longDateFormat:{LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D YYYY",LLL:"MMMM D YYYY LT",LLLL:"dddd, MMMM D YYYY LT"},longDateFormat:function(e){var t=this._longDateFormat[e];return!t&&this._longDateFormat[e.toUpperCase()]&&(t=this._longDateFormat[e.toUpperCase()].replace(/MMMM|MM|DD|dddd/g,function(e){return e.slice(1)}),this._longDateFormat[e]=t),t},isPM:function(e){return(e+"").toLowerCase().charAt(0)==="p"},_meridiemParse:/[ap]\.?m?\.?/i,meridiem:function(e,t,n){return e>11?n?"pm":"PM":n?"am":"AM"},_calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},calendar:function(e,t){var n=this._calendar[e];return typeof n=="function"?n.apply(t):n},_relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},relativeTime:function(e,t,n,r){var i=this._relativeTime[n];return typeof i=="function"?i(e,t,n,r):i.replace(/%d/i,e)},pastFuture:function(e,t){var n=this._relativeTime[e>0?"future":"past"];return typeof n=="function"?n(t):n.replace(/%s/i,t)},ordinal:function(e){return this._ordinal.replace("%d",e)},_ordinal:"%d",preparse:function(e){return e},postformat:function(e){return e},week:function(e){return Xt(e,this._week.dow,this._week.doy).week},_week:{dow:0,doy:6},_invalidDate:"Invalid date",invalidDate:function(){return this._invalidDate}}),t=function(t,n,r,i){var s;return typeof r=="boolean"&&(i=r,r=e),s={},s._isAMomentObject=!0,s._i=t,s._f=n,s._l=r,s._strict=i,s._isUTC=!1,s._pf=Q(),$t(s)},t.utc=function(t,n,r,i){var s;return typeof r=="boolean"&&(i=r,r=e),s={},s._isAMomentObject=!0,s._useUTC=!0,s._isUTC=!0,s._l=r,s._i=t,s._f=n,s._strict=i,s._pf=Q(),$t(s).utc()},t.unix=function(e){return t(e*1e3)},t.duration=function(e,n){var r=e,i=null,s,o,u;return t.isDuration(e)?r={ms:e._milliseconds,d:e._days,M:e._months}:typeof e=="number"?(r={},n?r[n]=e:r.milliseconds=e):(i=g.exec(e))?(s=i[1]==="-"?-1:1,r={y:0,d:pt(i[a])*s,h:pt(i[f])*s,m:pt(i[l])*s,s:pt(i[c])*s,ms:pt(i[h])*s}):!(i=y.exec(e))||(s=i[1]==="-"?-1:1,u=function(e){var t=e&&parseFloat(e.replace(",","."));return(isNaN(t)?0:t)*s},r={y:u(i[2]),M:u(i[3]),d:u(i[4]),h:u(i[5]),m:u(i[6]),s:u(i[7]),w:u(i[8])}),o=new tt(r),t.isDuration(e)&&e.hasOwnProperty("_lang")&&(o._lang=e._lang),o},t.version=n,t.defaultFormat=j,t.updateOffset=function(){},t.lang=function(e,n){var r;return e?(n?Et(bt(e),n):n===null?(St(e),e="en"):p[e]||xt(e),r=t.duration.fn._lang=t.fn._lang=xt(e),r._abbr):t.fn._lang._abbr},t.langData=function(e){return e&&e._lang&&e._lang._abbr&&(e=e._lang._abbr),xt(e)},t.isMoment=function(e){return e instanceof et||e!=null&&e.hasOwnProperty("_isAMomentObject")},t.isDuration=function(e){return e instanceof tt};for(s=K.length-1;s>=0;--s)ht(K[s]);t.normalizeUnits=function(e){return lt(e)},t.invalid=function(e){var n=t.utc(NaN);return e!=null?nt(n._pf,e):n._pf.userInvalidated=!0,n},t.parseZone=function(e){return t(e).parseZone()},nt(t.fn=et.prototype,{clone:function(){return t(this)},valueOf:function(){return+this._d+(this._offset||0)*6e4},unix:function(){return Math.floor(+this/1e3)},toString:function(){return this.clone().lang("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},toDate:function(){return this._offset?new Date(+this):this._d},toISOString:function(){var e=t(this).utc();return 0<e.year()&&e.year()<=9999?Ct(e,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):Ct(e,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")},toArray:function(){var e=this;return[e.year(),e.month(),e.date(),e.hours(),e.minutes(),e.seconds(),e.milliseconds()]},isValid:function(){return yt(this)},isDSTShifted:function(){return this._a?this.isValid()&&ft(this._a,(this._isUTC?t.utc(this._a):t(this._a)).toArray())>0:!1},parsingFlags:function(){return nt({},this._pf)},invalidAt:function(){return this._pf.overflow},utc:function(){return this.zone(0)},local:function(){return this.zone(0),this._isUTC=!1,this},format:function(e){var n=Ct(this,e||t.defaultFormat);return this.lang().postformat(n)},add:function(e,n){var r;return typeof e=="string"?r=t.duration(+n,e):r=t.duration(e,n),ot(this,r,1),this},subtract:function(e,n){var r;return typeof e=="string"?r=t.duration(+n,e):r=t.duration(e,n),ot(this,r,-1),this},diff:function(e,n,r){var i=wt(e,this),s=(this.zone()-i.zone())*6e4,o,u;return n=lt(n),n==="year"||n==="month"?(o=(this.daysInMonth()+i.daysInMonth())*432e5,u=(this.year()-i.year())*12+(this.month()-i.month()),u+=(this-t(this).startOf("month")-(i-t(i).startOf("month")))/o,u-=(this.zone()-t(this).startOf("month").zone()-(i.zone()-t(i).startOf("month").zone()))*6e4/o,n==="year"&&(u/=12)):(o=this-i,u=n==="second"?o/1e3:n==="minute"?o/6e4:n==="hour"?o/36e5:n==="day"?(o-s)/864e5:n==="week"?(o-s)/6048e5:o),r?u:it(u)},from:function(e,n){return t.duration(this.diff(e)).lang(this.lang()._abbr).humanize(!n)},fromNow:function(e){return this.from(t(),e)},calendar:function(){var e=wt(t(),this).startOf("day"),n=this.diff(e,"days",!0),r=n<-6?"sameElse":n<-1?"lastWeek":n<0?"lastDay":n<1?"sameDay":n<2?"nextDay":n<7?"nextWeek":"sameElse";return this.format(this.lang().calendar(r,this))},isLeapYear:function(){return mt(this.year())},isDST:function(){return this.zone()<this.clone().month(0).zone()||this.zone()<this.clone().month(5).zone()},day:function(e){var t=this._isUTC?this._d.getUTCDay():this._d.getDay();return e!=null?(e=Ut(e,this.lang()),this.add({d:e-t})):t},month:function(e){var n=this._isUTC?"UTC":"",r;if(e!=null){if(typeof e=="string"){e=this.lang().monthsParse(e);if(typeof e!="number")return this}return r=this.date(),this.date(1),this._d["set"+n+"Month"](e),this.date(Math.min(r,this.daysInMonth())),t.updateOffset(this),this}return this._d["get"+n+"Month"]()},startOf:function(e){e=lt(e);switch(e){case"year":this.month(0);case"month":this.date(1);case"week":case"isoWeek":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return e==="week"?this.weekday(0):e==="isoWeek"&&this.isoWeekday(1),this},endOf:function(e){return e=lt(e),this.startOf(e).add(e==="isoWeek"?"week":e,1).subtract("ms",1)},isAfter:function(e,n){return n=typeof n!="undefined"?n:"millisecond",+this.clone().startOf(n)>+t(e).startOf(n)},isBefore:function(e,n){return n=typeof n!="undefined"?n:"millisecond",+this.clone().startOf(n)<+t(e).startOf(n)},isSame:function(e,t){return t=t||"ms",+this.clone().startOf(t)===+wt(e,this).startOf(t)},min:function(e){return e=t.apply(null,arguments),e<this?this:e},max:function(e){return e=t.apply(null,arguments),e>this?this:e},zone:function(e){var n=this._offset||0;return e==null?this._isUTC?n:this._d.getTimezoneOffset():(typeof e=="string"&&(e=At(e)),Math.abs(e)<16&&(e*=60),this._offset=e,this._isUTC=!0,n!==e&&ot(this,t.duration(n-e,"m"),1,!0),this)},zoneAbbr:function(){return this._isUTC?"UTC":""},zoneName:function(){return this._isUTC?"Coordinated Universal Time":""},parseZone:function(){return this._tzm?this.zone(this._tzm):typeof this._i=="string"&&this.zone(this._i),this},hasAlignedHourOffset:function(e){return e?e=t(e).zone():e=0,(this.zone()-e)%60===0},daysInMonth:function(){return dt(this.year(),this.month())},dayOfYear:function(e){var n=i((t(this).startOf("day")-t(this).startOf("year"))/864e5)+1;return e==null?n:this.add("d",e-n)},quarter:function(){return Math.ceil((this.month()+1)/3)},weekYear:function(e){var t=Xt(this,this.lang()._week.dow,this.lang()._week.doy).year;return e==null?t:this.add("y",e-t)},isoWeekYear:function(e){var t=Xt(this,1,4).year;return e==null?t:this.add("y",e-t)},week:function(e){var t=this.lang().week(this);return e==null?t:this.add("d",(e-t)*7)},isoWeek:function(e){var t=Xt(this,1,4).week;return e==null?t:this.add("d",(e-t)*7)},weekday:function(e){var t=(this.day()+7-this.lang()._week.dow)%7;return e==null?t:this.add("d",e-t)},isoWeekday:function(e){return e==null?this.day()||7:this.day(this.day()%7?e:e-7)},get:function(e){return e=lt(e),this[e]()},set:function(e,t){return e=lt(e),typeof this[e]=="function"&&this[e](t),this},lang:function(t){return t===e?this._lang:(this._lang=xt(t),this)}});for(s=0;s<R.length;s++)Jt(R[s].toLowerCase().replace(/s$/,""),R[s]);Jt("year","FullYear"),t.fn.days=t.fn.day,t.fn.months=t.fn.month,t.fn.weeks=t.fn.week,t.fn.isoWeeks=t.fn.isoWeek,t.fn.toJSON=t.fn.toISOString,nt(t.duration.fn=tt.prototype,{_bubble:function(){var e=this._milliseconds,t=this._days,n=this._months,r=this._data,i,s,o,u;r.milliseconds=e%1e3,i=it(e/1e3),r.seconds=i%60,s=it(i/60),r.minutes=s%60,o=it(s/60),r.hours=o%24,t+=it(o/24),r.days=t%30,n+=it(t/30),r.months=n%12,u=it(n/12),r.years=u},weeks:function(){return it(this.days()/7)},valueOf:function(){return this._milliseconds+this._days*864e5+this._months%12*2592e6+pt(this._months/12)*31536e6},humanize:function(e){var t=+this,n=Wt(t,!e,this.lang());return e&&(n=this.lang().pastFuture(t,n)),this.lang().postformat(n)},add:function(e,n){var r=t.duration(e,n);return this._milliseconds+=r._milliseconds,this._days+=r._days,this._months+=r._months,this._bubble(),this},subtract:function(e,n){var r=t.duration(e,n);return this._milliseconds-=r._milliseconds,this._days-=r._days,this._months-=r._months,this._bubble(),this},get:function(e){return e=lt(e),this[e.toLowerCase()+"s"]()},as:function(e){return e=lt(e),this["as"+e.charAt(0).toUpperCase()+e.slice(1)+"s"]()},lang:t.fn.lang,toIsoString:function(){var e=Math.abs(this.years()),t=Math.abs(this.months()),n=Math.abs(this.days()),r=Math.abs(this.hours()),i=Math.abs(this.minutes()),s=Math.abs(this.seconds()+this.milliseconds()/1e3);return this.asSeconds()?(this.asSeconds()<0?"-":"")+"P"+(e?e+"Y":"")+(t?t+"M":"")+(n?n+"D":"")+(r||i||s?"T":"")+(r?r+"H":"")+(i?i+"M":"")+(s?s+"S":""):"P0D"}});for(s in U)U.hasOwnProperty(s)&&(Qt(s,U[s]),Kt(s.toLowerCase()));Qt("Weeks",6048e5),t.duration.fn.asMonths=function(){return(+this-this.years()*31536e6)/2592e6+this.years()*12},t.lang("en",{ordinal:function(e){var t=e%10,n=pt(e%100/10)===1?"th":t===1?"st":t===2?"nd":t===3?"rd":"th";return e+n}}),v?(module.exports=t,Gt(!0)):typeof define=="function"&&define.amd?define("moment",["require","exports","module"],function(n,r,i){return i.config&&i.config()&&i.config().noGlobal!==!0&&Gt(i.config().noGlobal===e),t}):Gt()}.call(this),define("mockup-patterns-moment",["jquery","mockup-patterns-base","moment"],function(e,t,n){var r=t.extend({name:"moment",defaults:{selector:null,format:"MMMM Do YYYY, h:mm:ss a"},convert:function(t){var r=this,i=t.attr("data-date");i||(i=e.trim(t.html())),i=n(i);if(!i.isValid())return;r.options.format==="relative"?i=i.fromNow():r.options.format==="calendar"?i=i.calendar():i=i.format(r.options.format),i&&t.html(i)},init:function(){var t=this;t.options.selector?t.$el.find(t.options.selector).each(function(){t.convert(e(this))}):t.convert(t.$el)}});return r}),define("text!js/patterns/moment.js",[],function(){return'/* Moment pattern.\n *\n * Options:\n *    selector(string): selector to use to look for dates to format (null)\n *    format(string): Format to use to render date. Also available is "relative" and "calendar" formats. (MMMM Do YYYY, h:mm:ss a)\n *\n * Documentation:\n *    # Defaults\n *\n *    {{ example-1 }}\n *\n *    # Relative format\n *\n *    {{ example-2 }}\n *\n *    # Calendar format\n *\n *    {{ example-3 }}\n *\n *    # Custom format\n *\n *    {{ example-4 }}\n *\n *    # Setting date by attribute\n *\n *    {{ example-5 }}\n *\n * Example: example-1\n *    <ul class="pat-moment" data-pat-moment="selector:li">\n *      <li>2013-10-01T10:00:00-05:00</li>\n *      <li>2013-01-01T22:10:00-05:00</li>\n *      <li>2013-01-05T04:34:00-05:00</li>\n *      <li>2013-02-14T16:55:00-05:00</li>\n *    </ul>\n *\n * Example: example-2\n *    <ul class="pat-moment"\n *        data-pat-moment="selector:li;format:relative;">\n *      <li>2013-10-01T10:00:00-05:00</li>\n *      <li>2013-01-01T22:10:00-05:00</li>\n *      <li>2013-01-05T04:34:00-05:00</li>\n *      <li>2013-02-14T16:55:00-05:00</li>\n *    </ul>\n *\n * Example: example-3\n *    <ul class="pat-moment"\n *        data-pat-moment="selector:li;format:calendar;">\n *      <li>2013-10-01T10:00:00-05:00</li>\n *      <li>2013-10-02T22:10:00-05:00</li>\n *      <li>2013-10-05T04:34:00-05:00</li>\n *      <li>2013-10-03T16:55:00-05:00</li>\n *    </ul>\n *\n * Example: example-4\n *    <ul class="pat-moment"\n *        data-pat-moment="selector:li;format:MMM Do, YYYY h:m a;">\n *      <li>2013-10-01T10:00:00-05:00</li>\n *      <li>2013-01-01T22:10:00-05:00</li>\n *      <li>2013-01-05T04:34:00-05:00</li>\n *      <li>2013-02-14T16:55:00-05:00</li>\n *    </ul>\n *\n * Example: example-5\n *    <ul class="pat-moment"\n *        data-pat-moment="selector:li;format:MMM Do, YYYY h:m a;">\n *      <li data-date="2013-10-01T10:00:00-05:00"></li>\n *      <li data-date="2013-01-01T22:10:00-05:00"></li>\n *      <li data-date="2013-01-05T04:34:00-05:00"></li>\n *      <li data-date="2013-02-14T16:55:00-05:00"></li>\n *    </ul>\n *\n * License:\n *    Copyright (C) 2010 Plone Foundation\n *\n *    This program is free software; you can redistribute it and/or modify it\n *    under the terms of the GNU General Public License as published by the\n *    Free Software Foundation; either version 2 of the License.\n *\n *    This program is distributed in the hope that it will be useful, but\n *    WITHOUT ANY WARRANTY; without even the implied warranty of\n *    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General\n *    Public License for more details.\n *\n *    You should have received a copy of the GNU General Public License along\n *    with this program; if not, write to the Free Software Foundation, Inc.,\n *    51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA.\n */\n\n\ndefine([\n  \'jquery\',\n  \'mockup-patterns-base\',\n  \'moment\'\n], function($, Base, moment) {\n  \'use strict\';\n\n  var Moment = Base.extend({\n    name: \'moment\',\n    defaults: {\n      // selector of elements to format dates for\n      selector: null,\n      // also available options are relative, calendar\n      format: \'MMMM Do YYYY, h:mm:ss a\'\n    },\n    convert: function($el) {\n      var self = this;\n      var date = $el.attr(\'data-date\');\n      if (!date) {\n        date = $.trim($el.html());\n      }\n      date = moment(date);\n      if (!date.isValid()) {\n        return;\n      }\n      if (self.options.format === \'relative\') {\n        date = date.fromNow();\n      }else if (self.options.format === \'calendar\') {\n        date = date.calendar();\n      } else {\n        date = date.format(self.options.format);\n      }\n      if (date) {\n        $el.html(date);\n      }\n    },\n    init: function() {\n      var self = this;\n      if (self.options.selector) {\n        self.$el.find(self.options.selector).each(function() {\n          self.convert($(this));\n        });\n      } else {\n        self.convert(self.$el);\n      }\n    }\n  });\n\n  return Moment;\n\n});\n'}),function(e){typeof define=="function"&&define.amd?define("picker",["jquery"],e):this.Picker=e(jQuery)}(function(e){function n(i,s,o,u){function d(){return n._.node("div",n._.node("div",n._.node("div",n._.node("div",p.component.nodes(a.open),l.box),l.wrap),l.frame),l.holder)}function v(){c.data(s,p).addClass(l.input).val(c.data("value")?p.get("select",f.format):i.value).on("focus."+a.id+" click."+a.id,y),f.editable||c.on("keydown."+a.id,function(e){var t=e.keyCode,n=/^(8|46)$/.test(t);if(t==27)return p.close(),!1;if(t==32||n||!a.open&&p.component.key[t])e.preventDefault(),e.stopPropagation(),n?p.clear().close():p.open()}),r(i,{haspopup:!0,expanded:!1,readonly:!1,owns:i.id+"_root"+(p._hidden?" "+p._hidden.id:"")})}function m(){p.$root.on({focusin:function(e){p.$root.removeClass(l.focused),r(p.$root[0],"selected",!1),e.stopPropagation()},"mousedown click":function(t){var n=t.target;n!=p.$root.children()[0]&&(t.stopPropagation(),t.type=="mousedown"&&!e(n).is(":input")&&n.nodeName!="OPTION"&&(t.preventDefault(),i.focus()))}}).on("click","[data-pick], [data-nav], [data-clear]",function(){var t=e(this),r=t.data(),s=t.hasClass(l.navDisabled)||t.hasClass(l.disabled),o=document.activeElement;o=o&&(o.type||o.href)&&o,(s||o&&!e.contains(p.$root[0],o))&&i.focus(),r.nav&&!s?p.set("highlight",p.component.item.highlight,{nav:r.nav}):n._.isInteger(r.pick)&&!s?p.set("select",r.pick).close(!0):r.clear&&p.clear().close(!0)}),r(p.$root[0],"hidden",!0)}function g(){var t=[typeof f.hiddenPrefix=="string"?f.hiddenPrefix:"",typeof f.hiddenSuffix=="string"?f.hiddenSuffix:"_submit"];p._hidden=e('<input type=hidden name="'+t[0]+i.name+t[1]+'"'+'id="'+t[0]+i.id+t[1]+'"'+(c.data("value")||i.value?' value="'+p.get("select",f.formatSubmit)+'"':"")+">")[0],c.on("change."+a.id,function(){p._hidden.value=i.value?p.get("select",f.formatSubmit):""}).after(p._hidden)}function y(e){e.stopPropagation(),e.type=="focus"&&(p.$root.addClass(l.focused),r(p.$root[0],"selected",!0)),p.open()}if(!i)return n;var a={id:i.id||"P"+Math.abs(~~(Math.random()*new Date))},f=o?e.extend(!0,{},o.defaults,u):u||{},l=e.extend({},n.klasses(),f.klass),c=e(i),h=function(){return this.start()},p=h.prototype={constructor:h,$node:c,start:function(){return a&&a.start?p:(a.methods={},a.start=!0,a.open=!1,a.type=i.type,i.autofocus=i==document.activeElement,i.type="text",i.readOnly=!f.editable,i.id=i.id||a.id,p.component=new o(p,f),p.$root=e(n._.node("div",d(),l.picker,'id="'+i.id+'_root"')),m(),f.formatSubmit&&g(),v(),f.container?e(f.container).append(p.$root):c.after(p.$root),p.on({start:p.component.onStart,render:p.component.onRender,stop:p.component.onStop,open:p.component.onOpen,close:p.component.onClose,set:p.component.onSet}).on({start:f.onStart,render:f.onRender,stop:f.onStop,open:f.onOpen,close:f.onClose,set:f.onSet}),i.autofocus&&p.open(),p.trigger("start").trigger("render"))},render:function(e){return e?p.$root.html(d()):p.$root.find("."+l.box).html(p.component.nodes(a.open)),p.trigger("render")},stop:function(){return a.start?(p.close(),p._hidden&&p._hidden.parentNode.removeChild(p._hidden),p.$root.remove(),c.removeClass(l.input).removeData(s),setTimeout(function(){c.off("."+a.id)},0),i.type=a.type,i.readOnly=!1,p.trigger("stop"),a.methods={},a.start=!1,p):p},open:function(s){return a.open?p:(c.addClass(l.active),r(i,"expanded",!0),p.$root.addClass(l.opened),r(p.$root[0],"hidden",!1),s!==!1&&(a.open=!0,c.trigger("focus"),t.on("click."+a.id+" focusin."+a.id,function(e){var t=e.target;t!=i&&t!=document&&e.which!=3&&p.close(t===p.$root.children()[0])}).on("keydown."+a.id,function(t){var r=t.keyCode,s=p.component.key[r],o=t.target;r==27?p.close(!0):o!=i||!s&&r!=13?e.contains(p.$root[0],o)&&r==13&&(t.preventDefault(),o.click()):(t.preventDefault(),s?n._.trigger(p.component.key.go,p,[n._.trigger(s)]):p.$root.find("."+l.highlighted).hasClass(l.disabled)||p.set("select",p.component.item.highlight).close())})),p.trigger("open"))},close:function(e){return e&&(c.off("focus."+a.id).trigger("focus"),setTimeout(function(){c.on("focus."+a.id,y)},0)),c.removeClass(l.active),r(i,"expanded",!1),p.$root.removeClass(l.opened+" "+l.focused),r(p.$root[0],"hidden",!0),r(p.$root[0],"selected",!1),a.open?(a.open=!1,t.off("."+a.id),p.trigger("close")):p},clear:function(){return p.set("clear")},set:function(t,n,r){var i,s,o=e.isPlainObject(t),u=o?t:{};r=o&&e.isPlainObject(n)?n:r||{};if(t){o||(u[t]=n);for(i in u)s=u[i],i in p.component.item&&p.component.set(i,s,r),(i=="select"||i=="clear")&&c.val(i=="clear"?"":p.get(i,f.format)).trigger("change");p.render()}return r.muted?p:p.trigger("set",u)},get:function(e,t){e=e||"value";if(a[e]!=null)return a[e];if(e=="value")return i.value;if(e in p.component.item)return typeof t=="string"?n._.trigger(p.component.formats.toString,p.component,[t,p.component.get(e)]):p.component.get(e)},on:function(t,n){var r,i,s=e.isPlainObject(t),o=s?t:{};if(t){s||(o[t]=n);for(r in o)i=o[r],a.methods[r]=a.methods[r]||[],a.methods[r].push(i)}return p},off:function(){var e,t,n=arguments;for(e=0,namesCount=n.length;e<namesCount;e+=1)t=n[e],t in a.methods&&delete a.methods[t];return p},trigger:function(e,t){var r=a.methods[e];return r&&r.map(function(e){n._.trigger(e,p,[t])}),p}};return new h}function r(t,n,r){if(e.isPlainObject(n))for(var s in n)i(t,s,n[s]);else i(t,n,r)}function i(e,t,n){e.setAttribute((t=="role"?"":"aria-")+t,n)}function s(t,n){e.isPlainObject(t)||(t={attribute:n}),n="";for(var r in t){var i=(r=="role"?"":"aria-")+r,s=t[r];n+=s==null?"":i+'="'+t[r]+'"'}return n}var t=e(document);return n.klasses=function(e){return e=e||"picker",{picker:e,opened:e+"--opened",focused:e+"--focused",input:e+"__input",active:e+"__input--active",holder:e+"__holder",frame:e+"__frame",wrap:e+"__wrap",box:e+"__box"}},n._={group:function(e){var t,r="",i=n._.trigger(e.min,e);for(;i<=n._.trigger(e.max,e,[i]);i+=e.i)t=n._.trigger(e.item,e,[i]),r+=n._.node(e.node,t[0],t[1],t[2]);return r},node:function(t,n,r,i){return n?(n=e.isArray(n)?n.join(""):n,r=r?' class="'+r+'"':"",i=i?" "+i:"","<"+t+r+i+">"+n+"</"+t+">"):""},lead:function(e){return(e<10?"0":"")+e},trigger:function(e,t,n){return typeof e=="function"?e.apply(t,n||[]):e},digits:function(e){return/\d/.test(e[1])?2:1},isDate:function(e){return{}.toString.call(e).indexOf("Date")>-1&&this.isInteger(e.getDate())},isInteger:function(e){return{}.toString.call(e).indexOf("Number")>-1&&e%1===0},ariaAttr:s},n.extend=function(t,r){e.fn[t]=function(i,s){var o=this.data(t);return i=="picker"?o:o&&typeof i=="string"?(n._.trigger(o[i],o,[s]),this):this.each(function(){var s=e(this);s.data(t)||new n(this,t,r,i)})},e.fn[t].defaults=r.defaults},n}),function(e){typeof define=="function"&&define.amd?define("picker.date",["picker","jquery"],e):e(Picker,jQuery)}(function(e,t){function s(e,t){var n=this,r=e.$node[0].value,i=e.$node.data("value"),s=i||r,o=i?t.formatSubmit:t.format,u=function(){return getComputedStyle(e.$root[0]).direction==="rtl"};n.settings=t,n.$node=e.$node,n.queue={min:"measure create",max:"measure create",now:"now create",select:"parse create validate",highlight:"parse navigate create validate",view:"parse create validate viewset",disable:"deactivate",enable:"activate"},n.item={},n.item.disable=(t.disable||[]).slice(0),n.item.enable=-function(e){return e[0]===!0?e.shift():-1}(n.item.disable),n.set("min",t.min).set("max",t.max).set("now"),s?n.set("select",s,{format:o,fromValue:!!r}):n.set("select",null).set("highlight",n.item.now),n.key={40:7,38:-7,39:function(){return u()?-1:1},37:function(){return u()?1:-1},go:function(e){var t=n.item.highlight,r=new Date(t.year,t.month,t.date+e);n.set("highlight",[r.getFullYear(),r.getMonth(),r.getDate()],{interval:e}),this.render()}},e.on("render",function(){e.$root.find("."+t.klass.selectMonth).on("change",function(){var n=this.value;n&&(e.set("highlight",[e.get("view").year,n,e.get("highlight").date]),e.$root.find("."+t.klass.selectMonth).trigger("focus"))}),e.$root.find("."+t.klass.selectYear).on("change",function(){var n=this.value;n&&(e.set("highlight",[n,e.get("view").month,e.get("highlight").date]),e.$root.find("."+t.klass.selectYear).trigger("focus"))})}).on("open",function(){e.$root.find("button, select").attr("disabled",!1)}).on("close",function(){e.$root.find("button, select").attr("disabled",!0)})}var n=7,r=6,i=e._;s.prototype.set=function(e,t,n){var r=this,i=r.item;return t===null?(i[e]=t,r):(i[e=="enable"?"disable":e=="flip"?"enable":e]=r.queue[e].split(" ").map(function(i){return t=r[i](e,t,n),t}).pop(),e=="select"?r.set("highlight",i.select,n):e=="highlight"?r.set("view",i.highlight,n):e.match(/^(flip|min|max|disable|enable)$/)&&(i.select&&r.disabled(i.select)&&r.set("select",i.select,n),i.highlight&&r.disabled(i.highlight)&&r.set("highlight",i.highlight,n)),r)},s.prototype.get=function(e){return this.item[e]},s.prototype.create=function(e,n,r){var s,o=this;return n=n===undefined?e:n,n==-Infinity||n==Infinity?s=n:t.isPlainObject(n)&&i.isInteger(n.pick)?n=n.obj:t.isArray(n)?(n=new Date(n[0],n[1],n[2]),n=i.isDate(n)?n:o.create().obj):i.isInteger(n)||i.isDate(n)?n=o.normalize(new Date(n),r):n=o.now(e,n,r),{year:s||n.getFullYear(),month:s||n.getMonth(),date:s||n.getDate(),day:s||n.getDay(),obj:s||n,pick:s||n.getTime()}},s.prototype.createRange=function(e,n){var r=this,s=function(e){return e===!0||t.isArray(e)||i.isDate(e)?r.create(e):e};return i.isInteger(e)||(e=s(e)),i.isInteger(n)||(n=s(n)),i.isInteger(e)&&t.isPlainObject(n)?e=[n.year,n.month,n.date+e]:i.isInteger(n)&&t.isPlainObject(e)&&(n=[e.year,e.month,e.date+n]),{from:s(e),to:s(n)}},s.prototype.withinRange=function(e,t){return e=this.createRange(e.from,e.to),t.pick>=e.from.pick&&t.pick<=e.to.pick},s.prototype.overlapRanges=function(e,t){var n=this;return e=n.createRange(e.from,e.to),t=n.createRange(t.from,t.to),n.withinRange(e,t.from)||n.withinRange(e,t.to)||n.withinRange(t,e.from)||n.withinRange(t,e.to)},s.prototype.now=function(e,t,n){return t=new Date,n&&n.rel&&t.setDate(t.getDate()+n.rel),this.normalize(t,n)},s.prototype.navigate=function(e,n,r){var i,s,o,u,a=t.isArray(n),f=t.isPlainObject(n),l=this.item.view;if(a||f){f?(s=n.year,o=n.month,u=n.date):(s=+n[0],o=+n[1],u=+n[2]),r&&r.nav&&l&&l.month!==o&&(s=l.year,o=l.month),i=new Date(s,o+(r&&r.nav?r.nav:0),1),s=i.getFullYear(),o=i.getMonth();while((new Date(s,o,u)).getMonth()!==o)u-=1;n=[s,o,u]}return n},s.prototype.normalize=function(e){return e.setHours(0,0,0,0),e},s.prototype.measure=function(e,t){var n=this;return t?i.isInteger(t)&&(t=n.now(e,t,{rel:t})):t=e=="min"?-Infinity:Infinity,t},s.prototype.viewset=function(e,t){return this.create([t.year,t.month,1])},s.prototype.validate=function(e,n,r){var s=this,o=n,u=r&&r.interval?r.interval:1,a=s.item.enable===-1,f,l,c=s.item.min,h=s.item.max,p,d,v=a&&s.item.disable.filter(function(e){if(t.isArray(e)){var r=s.create(e).pick;r<n.pick?f=!0:r>n.pick&&(l=!0)}return i.isInteger(e)}).length;if(!r||!r.nav)if(!a&&s.disabled(n)||a&&s.disabled(n)&&(v||f||l)||!a&&(n.pick<=c.pick||n.pick>=h.pick)){a&&!v&&(!l&&u>0||!f&&u<0)&&(u*=-1);while(s.disabled(n)){Math.abs(u)>1&&(n.month<o.month||n.month>o.month)&&(n=o,u=u>0?1:-1),n.pick<=c.pick?(p=!0,u=1,n=s.create([c.year,c.month,c.date-1])):n.pick>=h.pick&&(d=!0,u=-1,n=s.create([h.year,h.month,h.date+1]));if(p&&d)break;n=s.create([n.year,n.month,n.date+u])}}return n},s.prototype.disabled=function(e){var n=this,r=n.item.disable.filter(function(r){if(i.isInteger(r))return e.day===(n.settings.firstDay?r:r-1)%7;if(t.isArray(r)||i.isDate(r))return e.pick===n.create(r).pick;if(t.isPlainObject(r))return n.withinRange(r,e)});return r=r.length&&!r.filter(function(e){return t.isArray(e)&&e[3]=="inverted"||t.isPlainObject(e)&&e.inverted}).length,n.item.enable===-1?!r:r||e.pick<n.item.min.pick||e.pick>n.item.max.pick},s.prototype.parse=function(e,n,r){var s=this,o={},u;if(!n||i.isInteger(n)||t.isArray(n)||i.isDate(n)||t.isPlainObject(n)&&i.isInteger(n.pick))return n;if(!r||!r.format)r=r||{},r.format=s.settings.format;return u=typeof n=="string"&&!r.fromValue?1:0,s.formats.toArray(r.format).map(function(e){var t=s.formats[e],r=t?i.trigger(t,s,[n,o]):e.replace(/^!/,"").length;t&&(o[e]=n.substr(0,r)),n=n.substr(r)}),[o.yyyy||o.yy,+(o.mm||o.m)-u,o.dd||o.d]},s.prototype.formats=function(){function e(e,t,n){var r=e.match(/\w+/)[0];return!n.mm&&!n.m&&(n.m=t.indexOf(r)),r.length}function t(e){return e.match(/\w+/)[0].length}return{d:function(e,t){return e?i.digits(e):t.date},dd:function(e,t){return e?2:i.lead(t.date)},ddd:function(e,n){return e?t(e):this.settings.weekdaysShort[n.day]},dddd:function(e,n){return e?t(e):this.settings.weekdaysFull[n.day]},m:function(e,t){return e?i.digits(e):t.month+1},mm:function(e,t){return e?2:i.lead(t.month+1)},mmm:function(t,n){var r=this.settings.monthsShort;return t?e(t,r,n):r[n.month]},mmmm:function(t,n){var r=this.settings.monthsFull;return t?e(t,r,n):r[n.month]},yy:function(e,t){return e?2:(""+t.year).slice(2)},yyyy:function(e,t){return e?4:t.year},toArray:function(e){return e.split(/(d{1,4}|m{1,4}|y{4}|yy|!.)/g)},toString:function(e,t){var n=this;return n.formats.toArray(e).map(function(e){return i.trigger(n.formats[e],n,[0,t])||e.replace(/^!/,"")}).join("")}}}(),s.prototype.isDateExact=function(e,n){var r=this;return i.isInteger(e)&&i.isInteger(n)||typeof e=="boolean"&&typeof n=="boolean"?e===n:(i.isDate(e)||t.isArray(e))&&(i.isDate(n)||t.isArray(n))?r.create(e).pick===r.create(n).pick:t.isPlainObject(e)&&t.isPlainObject(n)?r.isDateExact(e.from,n.from)&&r.isDateExact(e.to,n.to):!1},s.prototype.isDateOverlap=function(e,n){var r=this;return i.isInteger(e)&&(i.isDate(n)||t.isArray(n))?e===r.create(n).day+1:i.isInteger(n)&&(i.isDate(e)||t.isArray(e))?n===r.create(e).day+1:t.isPlainObject(e)&&t.isPlainObject(n)?r.overlapRanges(e,n):!1},s.prototype.flipEnable=function(e){var t=this.item;t.enable=e||(t.enable==-1?1:-1)},s.prototype.deactivate=function(e,n){var r=this,s=r.item.disable.slice(0);return n=="flip"?r.flipEnable():n===!1?(r.flipEnable(1),s=[]):n===!0?(r.flipEnable(-1),s=[]):n.map(function(e){var n;for(var o=0;o<s.length;o+=1)if(r.isDateExact(e,s[o])){n=!0;break}n||(i.isInteger(e)||i.isDate(e)||t.isArray(e)||t.isPlainObject(e)&&e.from&&e.to)&&s.push(e)}),s},s.prototype.activate=function(e,n){var r=this,s=r.item.disable,o=s.length;return n=="flip"?r.flipEnable():n===!0?(r.flipEnable(1),s=[]):n===!1?(r.flipEnable(-1),s=[]):n.map(function(e){var n,u,a,f;for(a=0;a<o;a+=1){u=s[a];if(r.isDateExact(u,e)){n=s[a]=null,f=!0;break}if(r.isDateOverlap(u,e)){t.isPlainObject(e)?(e.inverted=!0,n=e):t.isArray(e)?(n=e,n[3]||n.push("inverted")):i.isDate(e)&&(n=[e.getFullYear(),e.getMonth(),e.getDate(),"inverted"]);break}}if(n)for(a=0;a<o;a+=1)if(r.isDateExact(s[a],e)){s[a]=null;break}if(f)for(a=0;a<o;a+=1)if(r.isDateOverlap(s[a],e)){s[a]=null;break}n&&s.push(n)}),s.filter(function(e){return e!=null})},s.prototype.nodes=function(e){var t=this,s=t.settings,o=t.item,u=o.now,a=o.select,f=o.highlight,l=o.view,c=o.disable,h=o.min,p=o.max,d=function(e){return s.firstDay&&e.push(e.shift()),i.node("thead",i.node("tr",i.group({min:0,max:n-1,i:1,node:"th",item:function(t){return[e[t],s.klass.weekdays]}})))}((s.showWeekdaysFull?s.weekdaysFull:s.weekdaysShort).slice(0)),v=function(e){return i.node("div"," ",s.klass["nav"+(e?"Next":"Prev")]+(e&&l.year>=p.year&&l.month>=p.month||!e&&l.year<=h.year&&l.month<=h.month?" "+s.klass.navDisabled:""),"data-nav="+(e||-1))},m=function(t){return s.selectMonths?i.node("select",i.group({min:0,max:11,i:1,node:"option",item:function(e){return[t[e],0,"value="+e+(l.month==e?" selected":"")+(l.year==h.year&&e<h.month||l.year==p.year&&e>p.month?" disabled":"")]}}),s.klass.selectMonth,e?"":"disabled"):i.node("div",t[l.month],s.klass.month)},g=function(){var t=l.year,n=s.selectYears===!0?5:~~(s.selectYears/2);if(n){var r=h.year,o=p.year,u=t-n,a=t+n;r>u&&(a+=r-u,u=r);if(o<a){var f=u-r,c=a-o;u-=f>c?c:f,a=o}return i.node("select",i.group({min:u,max:a,i:1,node:"option",item:function(e){return[e,0,"value="+e+(t==e?" selected":"")]}}),s.klass.selectYear,e?"":"disabled")}return i.node("div",t,s.klass.year)};return i.node("div",v()+v(1)+m(s.showMonthsShort?s.monthsShort:s.monthsFull)+g(),s.klass.header)+i.node("table",d+i.node("tbody",i.group({min:0,max:r-1,i:1,node:"tr",item:function(e){var r=s.firstDay&&t.create([l.year,l.month,1]).day===0?-7:0;return[i.group({min:n*e-l.day+r+1,max:function(){return this.min+n-1},i:1,node:"td",item:function(e){e=t.create([l.year,l.month,e+(s.firstDay?1:0)]);var n=a&&a.pick==e.pick,r=f&&f.pick==e.pick,o=c&&t.disabled(e)||e.pick<h.pick||e.pick>p.pick;return[i.node("div",e.date,function(t){return t.push(l.month==e.month?s.klass.infocus:s.klass.outfocus),u.pick==e.pick&&t.push(s.klass.now),n&&t.push(s.klass.selected),r&&t.push(s.klass.highlighted),o&&t.push(s.klass.disabled),t.join(" ")}([s.klass.day]),"data-pick="+e.pick+" "+i.ariaAttr({role:"button",controls:t.$node[0].id,checked:n&&t.$node.val()===i.trigger(t.formats.toString,t,[s.format,e])?!0:null,activedescendant:r?!0:null,disabled:o?!0:null}))]}})]}})),s.klass.table)+i.node("div",i.node("button",s.today,s.klass.buttonToday,"type=button data-pick="+u.pick+(e?"":" disabled"))+i.node("button",s.clear,s.klass.buttonClear,"type=button data-clear=1"+(e?"":" disabled")),s.klass.footer)},s.defaults=function(e){return{monthsFull:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],weekdaysFull:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],weekdaysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],today:"Today",clear:"Clear",format:"d mmmm, yyyy",klass:{table:e+"table",header:e+"header",navPrev:e+"nav--prev",navNext:e+"nav--next",navDisabled:e+"nav--disabled",month:e+"month",year:e+"year",selectMonth:e+"select--month",selectYear:e+"select--year",weekdays:e+"weekday",day:e+"day",disabled:e+"day--disabled",selected:e+"day--selected",highlighted:e+"day--highlighted",now:e+"day--today",infocus:e+"day--infocus",outfocus:e+"day--outfocus",footer:e+"footer",buttonClear:e+"button--clear",buttonToday:e+"button--today"}}}(e.klasses().picker+"__"),e.extend("pickadate",s)}),function(e){typeof define=="function"&&define.amd?define("picker.time",["picker","jquery"],e):e(Picker,jQuery)}(function(e,t){function u(e,t){var n=this,r=e.$node[0].value,i=e.$node.data("value"),s=i||r,o=i?t.formatSubmit:t.format;n.settings=t,n.$node=e.$node,n.queue={interval:"i",min:"measure create",max:"measure create",now:"now create",select:"parse create validate",highlight:"parse create validate",view:"parse create validate",disable:"deactivate",enable:"activate"},n.item={},n.item.interval=t.interval||30,n.item.disable=(t.disable||[]).slice(0),n.item.enable=-function(e){return e[0]===!0?e.shift():-1}(n.item.disable),n.set("min",t.min).set("max",t.max).set("now"),s?n.set("select",s,{format:o,fromValue:!!r}):n.set("select",null).set("highlight",n.item.now),n.key={40:1,38:-1,39:1,37:-1,go:function(e){n.set("highlight",n.item.highlight.pick+e*n.item.interval,{interval:e*n.item.interval}),this.render()}},e.on("render",function(){var n=e.$root.children(),r=n.find("."+t.klass.viewset);r.length&&(n[0].scrollTop=~~r.position().top-r[0].clientHeight*2)}).on("open",function(){e.$root.find("button").attr("disable",!1)}).on("close",function(){e.$root.find("button").attr("disable",!0)})}var n=24,r=60,i=12,s=n*r,o=e._;u.prototype.set=function(e,t,n){var r=this,i=r.item;return t===null?(i[e]=t,r):(i[e=="enable"?"disable":e=="flip"?"enable":e]=r.queue[e].split(" ").map(function(i){return t=r[i](e,t,n),t}).pop(),e=="select"?r.set("highlight",i.select,n):e=="highlight"?r.set("view",i.highlight,n):e=="interval"?r.set("min",i.min,n).set("max",i.max,n):e.match(/^(flip|min|max|disable|enable)$/)&&(e=="min"&&r.set("max",i.max,n),i.select&&r.disabled(i.select)&&r.set("select",i.select,n),i.highlight&&r.disabled(i.highlight)&&r.set("highlight",i.highlight,n)),r)},u.prototype.get=function(e){return this.item[e]},u.prototype.create=function(e,i,u){var a=this;return i=i===undefined?e:i,o.isDate(i)&&(i=[i.getHours(),i.getMinutes()]),t.isPlainObject(i)&&o.isInteger(i.pick)?i=i.pick:t.isArray(i)?i=+i[0]*r+ +i[1]:o.isInteger(i)||(i=a.now(e,i,u)),e=="max"&&i<a.item.min.pick&&(i+=s),e!="min"&&e!="max"&&(i-a.item.min.pick)%a.item.interval!==0&&(i+=a.item.interval),i=a.normalize(e,i,u),{hour:~~(n+i/r)%n,mins:(r+i%r)%r,time:(s+i)%s,pick:i}},u.prototype.createRange=function(e,n){var r=this,i=function(e){return e===!0||t.isArray(e)||o.isDate(e)?r.create(e):e};return o.isInteger(e)||(e=i(e)),o.isInteger(n)||(n=i(n)),o.isInteger(e)&&t.isPlainObject(n)?e=[n.hour,n.mins+e*r.settings.interval]:o.isInteger(n)&&t.isPlainObject(e)&&(n=[e.hour,e.mins+n*r.settings.interval]),{from:i(e),to:i(n)}},u.prototype.withinRange=function(e,t){return e=this.createRange(e.from,e.to),t.pick>=e.from.pick&&t.pick<=e.to.pick},u.prototype.overlapRanges=function(e,t){var n=this;return e=n.createRange(e.from,e.to),t=n.createRange(t.from,t.to),n.withinRange(e,t.from)||n.withinRange(e,t.to)||n.withinRange(t,e.from)||n.withinRange(t,e.to)},u.prototype.now=function(e,t){var n=this.item.interval,i=new Date,s=i.getHours()*r+i.getMinutes(),u=o.isInteger(t),a;return s-=s%n,a=t<0&&n*t+s<=-n,s+=e=="min"&&a?0:n,u&&(s+=n*(a&&e!="max"?t+1:t)),s},u.prototype.normalize=function(e,t){var n=this.item.interval,r=this.item.min&&this.item.min.pick||0;return t-=e=="min"?0:(t-r)%n,t},u.prototype.measure=function(e,i,s){var u=this;return i?i===!0||o.isInteger(i)?i=u.now(e,i,s):t.isPlainObject(i)&&o.isInteger(i.pick)&&(i=u.normalize(e,i.pick,s)):i=e=="min"?[0,0]:[n-1,r-1],i},u.prototype.validate=function(e,t,n){var r=this,i=n&&n.interval?n.interval:r.item.interval;return r.disabled(t)&&(t=r.shift(t,i)),t=r.scope(t),r.disabled(t)&&(t=r.shift(t,i*-1)),t},u.prototype.disabled=function(e){var n=this,r=n.item.disable.filter(function(r){if(o.isInteger(r))return e.hour==r;if(t.isArray(r)||o.isDate(r))return e.pick==n.create(r).pick;if(t.isPlainObject(r))return n.withinRange(r,e)});return r=r.length&&!r.filter(function(e){return t.isArray(e)&&e[2]=="inverted"||t.isPlainObject(e)&&e.inverted}).length,n.item.enable===-1?!r:r||e.pick<n.item.min.pick||e.pick>n.item.max.pick},u.prototype.shift=function(e,t){var n=this,r=n.item.min.pick,i=n.item.max.pick;t=t||n.item.interval;while(n.disabled(e)){e=n.create(e.pick+=t);if(e.pick<=r||e.pick>=i)break}return e},u.prototype.scope=function(e){var t=this.item.min.pick,n=this.item.max.pick;return this.create(e.pick>n?n:e.pick<t?t:e)},u.prototype.parse=function(e,n,i){var s,u,a,f,l,c=this,h={};if(!n||o.isInteger(n)||t.isArray(n)||o.isDate(n)||t.isPlainObject(n)&&o.isInteger(n.pick))return n;if(!i||!i.format)i=i||{},i.format=c.settings.format;c.formats.toArray(i.format).map(function(e){var t,r=c.formats[e],i=r?o.trigger(r,c,[n,h]):e.replace(/^!/,"").length;r&&(t=n.substr(0,i),h[e]=t.match(/^\d+$/)?+t:t),n=n.substr(i)});for(f in h){l=h[f];if(o.isInteger(l))if(f.match(/^(h|hh)$/i)){s=l;if(f=="h"||f=="hh")s%=12}else f=="i"&&(u=l);else f.match(/^a$/i)&&l.match(/^p/i)&&("h"in h||"hh"in h)&&(a=!0)}return(a?s+12:s)*r+u},u.prototype.formats={h:function(e,t){return e?o.digits(e):t.hour%i||i},hh:function(e,t){return e?2:o.lead(t.hour%i||i)},H:function(e,t){return e?o.digits(e):""+t.hour%24},HH:function(e,t){return e?o.digits(e):o.lead(t.hour%24)},i:function(e,t){return e?2:o.lead(t.mins)},a:function(e,t){return e?4:s/2>t.time%s?"a.m.":"p.m."},A:function(e,t){return e?2:s/2>t.time%s?"AM":"PM"},toArray:function(e){return e.split(/(h{1,2}|H{1,2}|i|a|A|!.)/g)},toString:function(e,t){var n=this;return n.formats.toArray(e).map(function(e){return o.trigger(n.formats[e],n,[0,t])||e.replace(/^!/,"")}).join("")}},u.prototype.isTimeExact=function(e,n){var r=this;return o.isInteger(e)&&o.isInteger(n)||typeof e=="boolean"&&typeof n=="boolean"?e===n:(o.isDate(e)||t.isArray(e))&&(o.isDate(n)||t.isArray(n))?r.create(e).pick===r.create(n).pick:t.isPlainObject(e)&&t.isPlainObject(n)?r.isTimeExact(e.from,n.from)&&r.isTimeExact(e.to,n.to):!1},u.prototype.isTimeOverlap=function(e,n){var r=this;return o.isInteger(e)&&(o.isDate(n)||t.isArray(n))?e===r.create(n).hour:o.isInteger(n)&&(o.isDate(e)||t.isArray(e))?n===r.create(e).hour:t.isPlainObject(e)&&t.isPlainObject(n)?r.overlapRanges(e,n):!1},u.prototype.flipEnable=function(e){var t=this.item;t.enable=e||(t.enable==-1?1:-1)},u.prototype.deactivate=function(e,n){var r=this,i=r.item.disable.slice(0);return n=="flip"?r.flipEnable():n===!1?(r.flipEnable(1),i=[]):n===!0?(r.flipEnable(-1),i=[]):n.map(function(e){var n;for(var s=0;s<i.length;s+=1)if(r.isTimeExact(e,i[s])){n=!0;break}n||(o.isInteger(e)||o.isDate(e)||t.isArray(e)||t.isPlainObject(e)&&e.from&&e.to)&&i.push(e)}),i},u.prototype.activate=function(e,n){var r=this,i=r.item.disable,s=i.length;return n=="flip"?r.flipEnable():n===!0?(r.flipEnable(1),i=[]):n===!1?(r.flipEnable(-1),i=[]):n.map(function(e){var n,u,a,f;for(a=0;a<s;a+=1){u=i[a];if(r.isTimeExact(u,e)){n=i[a]=null,f=!0;break}if(r.isTimeOverlap(u,e)){t.isPlainObject(e)?(e.inverted=!0,n=e):t.isArray(e)?(n=e,n[2]||n.push("inverted")):o.isDate(e)&&(n=[e.getFullYear(),e.getMonth(),e.getDate(),"inverted"]);break}}if(n)for(a=0;a<s;a+=1)if(r.isTimeExact(i[a],e)){i[a]=null;break}if(f)for(a=0;a<s;a+=1)if(r.isTimeOverlap(i[a],e)){i[a]=null;break}n&&i.push(n)}),i.filter(function(e){return e!=null})},u.prototype.i=function(e,t){return o.isInteger(t)&&t>0?t:this.item.interval},u.prototype.nodes=function(e){var t=this,n=t.settings,r=t.item.select,i=t.item.highlight,s=t.item.view,u=t.item.disable;return o.node("ul",o.group({min:t.item.min.pick,max:t.item.max.pick,i:t.item.interval,node:"li",item:function(e){e=t.create(e);var a=e.pick,f=r&&r.pick==a,l=i&&i.pick==a,c=u&&t.disabled(e);return[o.trigger(t.formats.toString,t,[o.trigger(n.formatLabel,t,[e])||n.format,e]),function(e){return f&&e.push(n.klass.selected),l&&e.push(n.klass.highlighted),s&&s.pick==a&&e.push(n.klass.viewset),c&&e.push(n.klass.disabled),e.join(" ")}([n.klass.listItem]),"data-pick="+e.pick+" "+o.ariaAttr({role:"button",controls:t.$node[0].id,checked:f&&t.$node.val()===o.trigger(t.formats.toString,t,[n.format,e])?!0:null,activedescendant:l?!0:null,disabled:c?!0:null})]}})+o.node("li",o.node("button",n.clear,n.klass.buttonClear,"type=button data-clear=1"+(e?"":" disable"))),n.klass.list)},u.defaults=function(e){return{clear:"Clear",format:"h:i A",interval:30,klass:{picker:e+" "+e+"--time",holder:e+"__holder",list:e+"__list",listItem:e+"__list-item",disabled:e+"__list-item--disabled",selected:e+"__list-item--selected",highlighted:e+"__list-item--highlighted",viewset:e+"__list-item--viewset",now:e+"__list-item--now",buttonClear:e+"__button--clear"}}}(e.klasses().picker),e.extend("pickatime",u)}),define("mockup-patterns-pickadate",["jquery","mockup-patterns-base","picker","picker.date","picker.time"],function(e,t){var n=t.extend({name:"pickadate",defaults:{separator:" ",date:{selectYears:!0,selectMonths:!0},time:{},classWrapperName:"pattern-pickadate-wrapper",classSeparatorName:"pattern-pickadate-separator",classDateName:"pattern-pickadate-date",classDateWrapperName:"pattern-pickadate-date-wrapper",classTimeName:"pattern-pickadate-time",classTimeWrapperName:"pattern-pickadate-time-wrapper",classClearName:"pattern-pickadate-clear",placeholderDate:"Enter date...",placeholderTime:"Enter time..."},isFalse:function(e){return typeof e=="string"&&e==="false"?!1:e},init:function(){var t=this,n=t.$el.val().split(" "),r=n[0]||"",i=n[1]||"";t.options.date=t.isFalse(t.options.date),t.options.time=t.isFalse(t.options.time),t.options.date===!1&&(i=n[0]),t.$el.hide(),t.$wrapper=e("<div/>").addClass(t.options.classWrapperName).insertAfter(t.$el),t.options.date!==!1&&(t.options.date.formatSubmit="yyyy-mm-dd",t.$date=e('<input type="text"/>').attr("placeholder",t.options.placeholderDate).attr("data-value",r).addClass(t.options.classDateName).appendTo(e("<div/>").addClass(t.options.classDateWrapperName).appendTo(t.$wrapper)).pickadate(e.extend(!0,{},t.options.date,{onSet:function(e){e.select!==undefined&&(t.$date.attr("data-value",e.select),(t.options.time===!1||t.$time.attr("data-value")!=="")&&t.updateValue.call(t)),e.hasOwnProperty("clear")&&(t.$el.removeAttr("value"),t.$date.attr("data-value",""))}}))),t.options.date!==!1&&t.options.time!==!1&&(t.$separator=e("<span/>").addClass(t.options.classSeparatorName).html(t.options.separator===" "?"&nbsp;":t.options.separator).appendTo(t.$wrapper)),t.options.time!==!1&&(t.options.time.formatSubmit="HH:i",t.$time=e('<input type="text"/>').attr("placeholder",t.options.placeholderTime).attr("data-value",i).addClass(t.options.classTimeName).appendTo(e("<div/>").addClass(t.options.classTimeWrapperName).appendTo(t.$wrapper)).pickatime(e.extend(!0,{},t.options.time,{onSet:function(e){e.select!==undefined&&(t.$time.attr("data-value",e.select),(t.options.date===!1||t.$date.attr("data-value")!=="")&&t.updateValue.call(t)),e.hasOwnProperty("clear")&&(t.$el.removeAttr("value"),t.$time.attr("data-value",""))}})),typeof i=="string"&&i.substring(0,2)==="00"&&(t.$time.pickatime("picker").set("select",i.split(":")),t.$time.attr("data-value",i))),t.$clear=e("<div/>").addClass(t.options.classClearName).appendTo(t.$wrapper)},updateValue:function(){var e=this,t="";if(e.options.date!==!1){var n=e.$date.data("pickadate").component,r=e.$date.data("pickadate").get("select"),i=n.formats.toString;t+=i.apply(n,["yyyy-mm-dd",r])}e.options.date!==!1&&e.options.time!==!1&&(t+=" ");if(e.options.time!==!1){var s=e.$time.data("pickatime").component,o=e.$time.data("pickatime").get("select"),u=s.formats.toString;t+=u.apply(s,["HH:i",o])}e.$el.attr("value",t),e.trigger("updated")}});return n}),define("text!js/patterns/pickadate.js",[],function(){return"/* PickADate pattern.\n *\n * Options:\n *    date(object): Date widget options described here. If false is selected date picker wont be shown. ({{selectYears: true, selectMonths: true })\n *    time(object): Time widget options described here. If false is selected time picker wont be shown. ({})\n *    separator(string): Separator between date and time if both are enabled.\n *    (' ')\n *    classClearName(string): Class name of element that is generated by pattern. ('pattern-pickadate-clear')\n *    classDateName(string): Class applied to date input. ('pattern-pickadate-date')\n *    classDateWrapperName(string): Class applied to extra wrapper div around date input. ('pattern-pickadate-date-wrapper')\n *    classSeparatorName(string): Class applied to separator. ('pattern-pickadate-separator')\n *    classTimeName(string): Class applied to time input. ('pattern-pickadate-time')\n *    classTimeWrapperName(string): Class applied to wrapper div around time input. ('pattern-pickadate-time-wrapper')\n *    classWrapperName(string): Class name of element that is generated by pattern. ('pattern-pickadate-wrapper')\n *\n * Documentation:\n *    # Date and Time\n *\n *    {{ example-1 }}\n *\n *    # Date and Time with initial data\n *\n *    {{ example-2 }}\n *\n *    # Date\n *\n *    {{ example-3 }}\n *\n *    # Date with initial date\n *\n *    {{ example-4 }}\n *\n *    # Time\n *\n *    {{ example-5 }}\n *\n *    # Time with initial time\n *\n *    {{ example-6 }}\n *\n * Example: example-1\n *    <input class=\"pat-pickadate\"/>\n *\n * Example: example-2\n *    <input class=\"pat-pickadate\" value=\"2010-12-31 00:45\" />\n *\n * Example: example-3\n *    <input class=\"pat-pickadate\" data-pat-pickadate=\"time:false\"/>\n *\n * Example: example-4\n *    <input class=\"pat-pickadate\" value=\"2010-12-31\" data-pat-pickadate=\"time:false\"/>\n *\n * Example: example-5\n *    <input class=\"pat-pickadate\" data-pat-pickadate=\"date:false\"/>\n *\n * Example: example-6\n *    <input class=\"pat-pickadate\" value=\"00:00\" data-pat-pickadate=\"date:false\"/>\n *\n * License:\n *    Copyright (C) 2010 Plone Foundation\n *\n *    This program is free software; you can redistribute it and/or modify it\n *    under the terms of the GNU General Public License as published by the\n *    Free Software Foundation; either version 2 of the License.\n *\n *    This program is distributed in the hope that it will be useful, but\n *    WITHOUT ANY WARRANTY; without even the implied warranty of\n *    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General\n *    Public License for more details.\n *\n *    You should have received a copy of the GNU General Public License along\n *    with this program; if not, write to the Free Software Foundation, Inc.,\n *    51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA.\n */\n\n\ndefine([\n  'jquery',\n  'mockup-patterns-base',\n  'picker',\n  'picker.date',\n  'picker.time'\n], function($, Base) {\n  'use strict';\n\n  var PickADate = Base.extend({\n    name: 'pickadate',\n    defaults: {\n      separator: ' ',\n      date: {\n        selectYears: true,\n        selectMonths: true\n      },\n      time: {\n      },\n      classWrapperName: 'pattern-pickadate-wrapper',\n      classSeparatorName: 'pattern-pickadate-separator',\n      classDateName: 'pattern-pickadate-date',\n      classDateWrapperName: 'pattern-pickadate-date-wrapper',\n      classTimeName: 'pattern-pickadate-time',\n      classTimeWrapperName: 'pattern-pickadate-time-wrapper',\n      classClearName: 'pattern-pickadate-clear',\n      placeholderDate: 'Enter date...',\n      placeholderTime: 'Enter time...'\n    },\n    isFalse: function(value) {\n      if (typeof(value) === 'string' && value === 'false') {\n        return false;\n      }\n      return value;\n    },\n    init: function() {\n      var self = this,\n          value = self.$el.val().split(' '),\n          dateValue = value[0] || '',\n          timeValue = value[1] || '';\n\n      self.options.date = self.isFalse(self.options.date);\n      self.options.time = self.isFalse(self.options.time);\n\n      if (self.options.date === false) {\n        timeValue = value[0];\n      }\n\n      self.$el.hide();\n\n      self.$wrapper = $('<div/>')\n            .addClass(self.options.classWrapperName)\n            .insertAfter(self.$el);\n\n      if (self.options.date !== false) {\n        self.options.date.formatSubmit = 'yyyy-mm-dd';\n        self.$date = $('<input type=\"text\"/>')\n              .attr('placeholder', self.options.placeholderDate)\n              .attr('data-value', dateValue)\n              .addClass(self.options.classDateName)\n              .appendTo($('<div/>')\n                  .addClass(self.options.classDateWrapperName)\n                  .appendTo(self.$wrapper))\n              .pickadate($.extend(true, {}, self.options.date, {\n                onSet: function(e) {\n                  if (e.select !== undefined) {\n                    self.$date.attr('data-value', e.select);\n                    if (self.options.time === false ||\n                        self.$time.attr('data-value') !== '') {\n                      self.updateValue.call(self);\n                    }\n                  }\n                  if (e.hasOwnProperty('clear')) {\n                    self.$el.removeAttr('value');\n                    self.$date.attr('data-value', '');\n                  }\n                }\n              }));\n      }\n\n      if (self.options.date !== false && self.options.time !== false) {\n        self.$separator = $('<span/>')\n              .addClass(self.options.classSeparatorName)\n              .html(self.options.separator === ' ' ? '&nbsp;'\n                                                   : self.options.separator)\n              .appendTo(self.$wrapper);\n      }\n\n      if (self.options.time !== false) {\n        self.options.time.formatSubmit = 'HH:i';\n        self.$time = $('<input type=\"text\"/>')\n              .attr('placeholder', self.options.placeholderTime)\n              .attr('data-value', timeValue)\n              .addClass(self.options.classTimeName)\n              .appendTo($('<div/>')\n                  .addClass(self.options.classTimeWrapperName)\n                  .appendTo(self.$wrapper))\n              .pickatime($.extend(true, {}, self.options.time, {\n                onSet: function(e) {\n                  if (e.select !== undefined) {\n                    self.$time.attr('data-value', e.select);\n                    if (self.options.date === false ||\n                        self.$date.attr('data-value') !== '') {\n                      self.updateValue.call(self);\n                    }\n                  }\n                  if (e.hasOwnProperty('clear')) {\n                    self.$el.removeAttr('value');\n                    self.$time.attr('data-value', '');\n                  }\n                }\n              }));\n\n        // XXX: bug in pickatime\n        // work around pickadate bug loading 00:xx as value\n        if (typeof(timeValue) === 'string' && timeValue.substring(0,2) === '00') {\n          self.$time.pickatime('picker').set('select', timeValue.split(':'));\n          self.$time.attr('data-value', timeValue);\n        }\n      }\n\n      self.$clear = $('<div/>')\n            .addClass(self.options.classClearName)\n            .appendTo(self.$wrapper);\n\n    },\n    updateValue: function() {\n      var self = this,\n          value = '';\n\n      if (self.options.date !== false) {\n        var date = self.$date.data('pickadate').component,\n            dateValue = self.$date.data('pickadate').get('select'),\n            formatDate = date.formats.toString;\n        value += formatDate.apply(date, ['yyyy-mm-dd', dateValue]);\n      }\n\n      if (self.options.date !== false && self.options.time !== false) {\n        value += ' ';\n      }\n\n      if (self.options.time !== false) {\n        var time = self.$time.data('pickatime').component,\n            timeValue = self.$time.data('pickatime').get('select'),\n            formatTime = time.formats.toString;\n        value += formatTime.apply(time, ['HH:i', timeValue]);\n      }\n\n      self.$el.attr('value', value);\n\n      self.trigger('updated');\n    }\n  });\n\n  return PickADate;\n\n});\n"}),define("mockup-patterns-preventdoublesubmit",["jquery","mockup-patterns-base"],function(e,t){var n=t.extend({name:"preventdoublesubmit",defaults:{message:"You already clicked the submit button. Do you really want to submit this form again?",guardClassName:"submitting",optOutClassName:"allowMultiSubmit"},init:function(){var t=this;if(!t.$el.is("form"))return;e(":submit",t.$el).click(function(n){e(":submit").removeAttr("clicked"),e(this).attr("clicked","clicked");if(e(this).hasClass(t.options.guardClassName)&&!e(this).hasClass(t.options.optOutClassName))return t._confirm.call(t);e(this).addClass(t.options.guardClassName)})},_confirm:function(e){return window.confirm(this.options.message)}});return n}),define("text!js/patterns/preventdoublesubmit.js",[],function(){return"/* PreventDoubleSubmit pattern.\n *\n * Options:\n *    guardClassName(string): Class applied to submit button after it is clicked once. ('submitting')\n *    optOutClassName(string): Class used to opt-out a submit button from double-submit prevention. ('allowMultiSubmit')\n *    message(string): Message to be displayed when \"opt-out\" submit button is clicked a second time. ('You already clicked the submit button. Do you really want to submit this form again?')\n *\n * Documentation:\n *    # Example\n *\n *    {{ example-1 }}\n *\n * Example: example-1\n *    <form class=\"pat-preventdoublesubmit\" onsubmit=\"javascript:return false;\">\n *      <input type=\"text\" value=\"submit this value please!\" />\n *      <input class=\"btn btn-large btn-primary\" type=\"submit\" value=\"Single submit\" />\n *      <input class=\"btn btn-large btn-primary allowMultiSubmit\" type=\"submit\" value=\"Multi submit\" />\n *    </form>\n *\n * License:\n *    Copyright (C) 2010 Plone Foundation\n *\n *    This program is free software; you can redistribute it and/or modify it\n *    under the terms of the GNU General Public License as published by the\n *    Free Software Foundation; either version 2 of the License.\n *\n *    This program is distributed in the hope that it will be useful, but\n *    WITHOUT ANY WARRANTY; without even the implied warranty of\n *    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General\n *    Public License for more details.\n *\n *    You should have received a copy of the GNU General Public License along\n *    with this program; if not, write to the Free Software Foundation, Inc.,\n *    51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA.\n */\n\n\ndefine([\n  'jquery',\n  'mockup-patterns-base'\n], function($, Base) {\n  'use strict';\n\n  var PreventDoubleSubmit = Base.extend({\n    name: 'preventdoublesubmit',\n    defaults: {\n      message : 'You already clicked the submit button. ' +\n                'Do you really want to submit this form again?',\n      guardClassName: 'submitting',\n      optOutClassName: 'allowMultiSubmit'\n    },\n    init: function() {\n      var self = this;\n\n      // if this is not a form just return\n      if (!self.$el.is('form')) {\n        return;\n      }\n\n      $(':submit', self.$el).click(function(e) {\n\n        // mark the button as clicked\n        $(':submit').removeAttr('clicked');\n        $(this).attr('clicked', 'clicked');\n\n        // if submitting and no opt-out guardClassName is found\n        // pop up confirmation dialog\n        if ($(this).hasClass(self.options.guardClassName) &&\n              !$(this).hasClass(self.options.optOutClassName)) {\n          return self._confirm.call(self);\n        }\n\n        $(this).addClass(self.options.guardClassName);\n      });\n\n    },\n\n    _confirm: function(e) {\n      return window.confirm(this.options.message);\n    }\n\n  });\n\n  return PreventDoubleSubmit;\n\n});\n"}),define("mockup-patterns-querystring",["jquery","mockup-patterns-base","mockup-patterns-select2","mockup-patterns-pickadate","select2"],function(e,t,n,r,i){var s=function(){this.init.apply(this,arguments)};s.prototype={defaults:{indexWidth:"20em",placeholder:"Select criteria",remove:"",results:" items matching your search.",days:"days",betweendt:"to",classBetweenDtName:"querystring-criteria-betweendt",classWrapperName:"querystring-criteria-wrapper",classIndexName:"querystring-criteria-index",classOperatorName:"querystring-criteria-operator",classValueName:"querystring-criteria-value",classRemoveName:"querystring-criteria-remove",classResultsName:"querystring-criteria-results",classClearName:"querystring-criteria-clear"},init:function(t,n,r,s,o,u){var a=this;a.options=e.extend(!0,{},a.defaults,n),a.indexes=r,a.indexGroups={},a.$wrapper=e("<div/>").addClass(a.options.classWrapperName).appendTo(t),a.$remove=e("<div>"+a.options.remove+"</div>").addClass(a.options.classRemoveName).appendTo(a.$wrapper).on("click",function(e){a.remove()}),a.$index=e("<select><option></option></select>").attr("placeholder",a.options.placeholder),e.each(a.indexes,function(t,n){n.enabled&&(a.indexGroups[n.group]||(a.indexGroups[n.group]=e("<optgroup/>").attr("label",n.group).appendTo(a.$index)),a.indexGroups[n.group].append(e("<option/>").attr("value",t).html(n.title)))}),a.$wrapper.append(e("<div/>").addClass(a.options.classIndexName).append(a.$index)),a.$index.patternSelect2({width:a.options.indexWidth,placeholder:a.options.placeholder}).on("change",function(e){a.removeValue(),a.createOperator(e.val),a.createClear(),a.trigger("index-changed")}),s!==i&&(a.$index.select2("val",s),a.createOperator(s,o,u),a.createClear()),a.trigger("create-criteria")},createOperator:function(t,n,r){var s=this;s.removeOperator(),s.$operator=e("<select/>"),s.indexes[t]&&e.each(s.indexes[t].operators,function(t,n){e("<option/>").attr("value",t).html(n.title).appendTo(s.$operator)}),s.$wrapper.append(e("<div/>").addClass(s.options.classOperatorName).append(s.$operator)),s.$operator.patternSelect2({width:"10em"}).on("change",function(e){s.createValue(t),s.createClear(),s.trigger("operator-changed")}),n===i&&(n=s.$operator.select2("val")),s.$operator.select2("val",n),s.createValue(t,r),s.trigger("create-operator")},createValue:function(t,n){var r=this,s=r.indexes[t].operators[r.$operator.val()].widget,o=e("<div/>").addClass(r.options.classValueName).appendTo(r.$wrapper);r.removeValue();if(s==="StringWidget")r.$value=e('<input type="text"/>').addClass(r.options.classValueName+"-"+s).val(n).appendTo(o).change(function(){r.trigger("value-changed")});else if(s==="DateWidget")r.$value=e('<input type="text"/>').addClass(r.options.classValueName+"-"+s).appendTo(o).patternPickadate({time:!1,date:{format:"dd/mm/yyyy"}}).change(function(){r.trigger("value-changed")});else if(s==="DateRangeWidget"){var u=e("<span/>").appendTo(o),a=e('<input type="text"/>').addClass(r.options.classValueName+"-"+s).addClass(r.options.classValueName+"-"+s+"-start").appendTo(u).patternPickadate({time:!1,date:{format:"dd/mm/yyyy"}});o.append(e("<span/>").html(r.options.betweendt).addClass(r.options.classBetweenDtName));var f=e("<span/>").appendTo(o),l=e('<input type="text"/>').addClass(r.options.classValueName+"-"+s).addClass(r.options.classValueName+"-"+s+"-end").appendTo(f).patternPickadate({time:!1,date:{format:"dd/mm/yyyy"}});o.find(".picker__input").change(function(){r.trigger("value-changed")}),r.$value=[a,l]}else s==="RelativeDateWidget"?r.$value=e('<input type="text"/>').after(e("<span/>").html(r.options.days)).addClass(r.options.classValueName+"-"+s).appendTo(o).change(function(){r.trigger("value-changed")}):s==="ReferenceWidget"?r.$value=e('<input type="text"/>').addClass(r.options.classValueName+"-"+s).appendTo(o).change(function(){r.trigger("value-changed")}):s==="RelativePathWidget"?r.$value=e('<input type="text"/>').addClass(r.options.classValueName+"-"+s).appendTo(o).val(n).change(function(){r.trigger("value-changed")}):s==="MultipleSelectionWidget"&&(r.$value=e("<select/>").attr("multiple",!0).addClass(r.options.classValueName+"-"+s).appendTo(o).change(function(){r.trigger("value-changed")}),r.indexes[t]&&e.each(r.indexes[t].values,function(t,n){e("<option/>").attr("value",t).html(n.title).appendTo(r.$value)}),r.$value.patternSelect2({width:"250px"}));n!==i&&typeof r.$value!="undefined"&&r.$value.select2("val",n),r.trigger("create-value")},createClear:function(){var t=this;t.removeClear(),t.$clear=e("<div/>").addClass(t.options.classClearName).appendTo(t.$wrapper)},remove:function(){var e=this;e.trigger("remove"),e.$remove.remove(),e.$index.parent().remove(),e.removeOperator(),e.removeValue(),e.removeClear(),e.$wrapper.remove()},removeClear:function(){var e=this;e.trigger("remove-clear"),e.$clear&&e.$clear.remove()},removeOperator:function(){var e=this;e.trigger("remove-operator"),e.$operator&&e.$operator.parent().remove()},removeValue:function(){var t=this;t.trigger("remove-value"),t.$value&&(e.isArray(t.$value)?t.$value[0].parents(".querystring-criteria-value").remove():t.$value.parents(".querystring-criteria-value").remove())},buildQueryPart:function(){var t=this,n=t.$index.select2("val");if(n==="")return"";var r="query.i:records="+n;if(typeof t.$operator=="undefined")return"";var i=t.$operator.val(),s="query.o:records="+i,o="query.v:records=",u="query.v:records:list=",a=[];return typeof t.$value=="undefined"?a.push(o):e.isArray(t.$value)?e.each(t.$value,function(t,n){a.push(u+e(this).parent().find(".picker__input").val())}):a.push(o+t.$value.val()),r+"&"+s+"&"+a.join("&")},getJSONListStr:function(){var t=this,n=t.$index.select2("val");if(n==="")return"";if(typeof t.$operator=="undefined")return"";var r=t.$operator.val(),i=[];e.isArray(t.$value)?e.each(t.$value,function(t,n){i.push(e(this).parent().find(".picker__input").val())}):typeof t.$value!="undefined"&&i.push(t.$value.val());var s;return i.length>1?s="[j"+i.join('","')+'"]':i.length===1?s=JSON.stringify(i[0]):s='""','{"i":"'+n+'", "o":"'+r+'", "v":'+s+"}"},trigger:function(e){this.$wrapper.trigger(e+"-criteria.querystring.patterns",[this])},on:function(e,t){this.$wrapper.on(e+"-criteria.querystring.patterns",t)}};var o=t.extend({name:"querystring",defaults:{indexes:[],classWrapperName:"querystring-wrapper",criteria:{},indexOptionsUrl:null,previewURL:"portal_factory/@@querybuilder_html_results",previewCountURL:"portal_factory/@@querybuildernumberofresults",sorttxt:"Sort On",reversetxt:"Reversed Order",previewTitle:"Preview",previewDescription:"Preview of at most 10 items",classSortLabelName:"querystring-sort-label",classSortReverseName:"querystring-sortreverse",classSortReverseLabelName:"querystring-sortreverse-label",classPreviewCountWrapperName:"querystring-previewcount-wrapper",classPreviewResultsWrapperName:"querystring-previewresults-wrapper",classPreviewWrapperName:"querystring-preview-wrapper",classPreviewName:"querystring-preview",classPreviewTitleName:"querystring-preview-title",classPreviewDescriptionName:"querystring-preview-description",classSortWrapperName:"querystring-sort-wrapper",showPreviews:!0},init:function(){var t=this;t.$el.hide(),t.$wrapper=e("<div/>"),t.$el.after(t.$wrapper),t.initialized=!1,t.options.indexOptionsUrl?e.ajax({url:t.options.indexOptionsUrl,success:function(e){t.options.indexes=e.indexes,t.options.sortable_indexes=e.sortable_indexes,t._init()},error:function(e){}}):t._init()},_init:function(){var t=this;t.$criteriaWrapper=e("<div/>").addClass(t.options.classWrapperName).appendTo(t.$wrapper),t.$sortWrapper=e("<div/>").addClass(t.options.classSortWrapperName).appendTo(t.$wrapper),t.options.showPreviews==="false"&&(t.options.showPreviews=!1),t.options.showPreviews&&(t.$previewWrapper=e("<div/>").addClass(t.options.classPreviewWrapperName).appendTo(t.$wrapper),e("<div/>").addClass(t.options.classPreviewTitleName).html(t.options.previewTitle).appendTo(t.$previewWrapper),e("<div/>").addClass(t.options.classPreviewDescriptionName).html(t.options.previewDescription).appendTo(t.$previewWrapper)),t.criterias=[],t.$el.val()&&e.each(JSON.parse(t.$el.val()),function(e,n){t.createCriteria(n.i,n.o,n.v)}),t.createCriteria(),t.createSort(),t.options.showPreviews&&t.refreshPreviewEvent(),t.$el.trigger("initialized"),t.initialized=!0},createCriteria:function(e,t,n){var r=this,i=new s(r.$criteriaWrapper,r.options.criteria,r.options.indexes,e,t,n);i.on("remove",function(e){r.criterias[r.criterias.length-1]===i&&r.createCriteria()}),i.on("index-changed",function(e){r.criterias[r.criterias.length-1]===i&&r.createCriteria()});var o=function(){r.refreshPreviewEvent(),r.updateValue()};i.on("remove",function(e,t){r.criterias.indexOf(t)!==-1&&r.criterias.splice(r.criterias.indexOf(t),1),o(e,t)}),i.on("remove-clear",o),i.on("remove-operator",o),i.on("remove-value",o),i.on("index-changed",o),i.on("operator-changed",o),i.on("create-criteria",o),i.on("create-operator",o),i.on("create-value",o),i.on("value-changed",o),r.criterias.push(i)},createSort:function(){var t=this,n=e('[id$="-sort_on"]').filter('[id^="formfield-"]'),r=e('[id$="-sort_reversed"]').filter('[id^="formfield-"]');e("<span/>").addClass(t.options.classSortLabelName).html(t.options.sorttxt).appendTo(t.$sortWrapper),t.$sortOn=e("<select/>").attr("name","sort_on").appendTo(t.$sortWrapper).change(function(){t.refreshPreviewEvent.call(t),e('[id$="sort_on"]',n).val(e(this).val())}),t.$sortOn.append(e('<option value="">No sorting</option>'));for(var i in t.options.sortable_indexes)t.$sortOn.append(e("<option/>").attr("value",i).html(t.options.indexes[i].title));t.$sortOn.patternSelect2({width:150}),t.$sortOrder=e('<input type="checkbox" />').attr("name","sort_reversed:boolean").change(function(){t.refreshPreviewEvent.call(t),e(this).attr("checked")==="checked"?e('.option input[type="checkbox"]',r).attr("checked","checked"):e('.option input[type="checkbox"]',r).removeAttr("checked")}),e("<span/>").addClass(t.options.classSortReverseName).appendTo(t.$sortWrapper).append(t.$sortOrder).append(e("<span/>").html(t.options.reversetxt).addClass(t.options.classSortReverseLabelName));if(n.length>=1&&r.length>=1){var s=e('.option input[type="checkbox"]',r).attr("checked")==="checked",o=e('[id$="-sort_on"]',n).val();s&&t.$sortOrder.attr("checked","checked"),t.$sortOn.select2("val",o),e(n).hide(),e(r).hide()}},refreshPreviewEvent:function(){var t=this;if(!t.options.showPreviews)return;typeof t._previewXhr!="undefined"&&t._previewXhr.abort(),typeof t.$previewPane!="undefined"&&t.$previewPane.remove();var n=[],r;e.each(t.criterias,function(e,t){r=t.buildQueryPart(),r!==""&&n.push(t.buildQueryPart())}),t.$previewPane=e("<div/>").addClass(t.options.classPreviewName).appendTo(t.$previewWrapper);if(n.length<=0){e("<div/>").addClass(t.options.classPreviewCountWrapperName).html("No results to preview").prependTo(t.$previewPane);return}n.push("sort_on="+t.$sortOn.val());var i=t.$sortOrder.attr("checked");i==="checked"&&n.push("sort_order=reverse"),t._previewXhr=e.get(t.options.previewURL+"?"+n.join("&")).done(function(n,r){e("<div/>").addClass(t.options.classPreviewResultsWrapperName).html(n).appendTo(t.$previewPane)})},updateValue:function(){var t=this,n=[];e.each(t.criterias,function(e,t){var r=t.getJSONListStr();r!==""&&n.push(r)});var r=t.$el.val(),i="["+n.join(",")+"]";t.$el.val(i),t.$el.trigger("change")}});return o}),define("text!js/patterns/querystring.js",[],function(){return"/* Querystring pattern.\n *\n * Options:\n *    criteria(object): options to pass into criteria ({})\n *    indexOptionsUrl(string): URL to grab index option data from. Must contain \"sortable_indexes\" and \"indexes\" data in JSON object. (null)\n *    previewURL(string): URL used to pass in a plone.app.querystring-formatted HTTP querystring and get an HTML list of results ('portal_factory/@@querybuilder_html_results')\n *    previewCountURL(string): URL used to pass in a plone.app.querystring-formatted HTTP querystring and get an HTML string of the total number of records found with the query ('portal_factory/@@querybuildernumberofresults')\n *    sorttxt(string): Text to use to label the sort dropdown ('Sort On')\n *    reversetxt(string): Text to use to label the sort order checkbox ('Reversed Order')\n *    previewTitle(string): Title for the preview area ('Preview')\n *    previewDescription(string): Description for the preview area ('Preview of at most 10 items')\n *    classWrapperName(string): CSS class to apply to the wrapper element ('querystring-wrapper')\n *    classSortLabelName(string): CSS class to apply to the sort on label ('querystring-sort-label')\n *    classSortReverseName(string): CSS class to apply to the sort order label and checkbox container ('querystring-sortreverse')\n *    classSortReverseLabelName(string): CSS class to apply to the sort order label ('querystring-sortreverse-label')\n *    classPreviewCountWrapperName(string): TODO ('querystring-previewcount-wrapper')\n *    classPreviewResultsWrapperName(string): CSS class to apply to the results wrapper ('querystring-previewresults-wrapper')\n *    classPreviewWrapperName(string): CSS class to apply to the preview wrapper ('querystring-preview-wrapper')\n *    classPreviewName(string): CSS class to apply to the preview pane ('querystring-preview')\n *    classPreviewTitleName(string): CSS class to apply to the preview title ('querystring-preview-title')\n *    classPreviewDescriptionName(string): CSS class to apply to the preview description ('querystring-preview-description')\n *    classSortWrapperName(string): CSS class to apply to the sort order and sort on wrapper ('querystring-sort-wrapper')\n *    showPreviews(boolean): Should previews be shown? (true)\n *\n * Documentation:\n *    # Default\n *\n *    {{ example-1 }}\n *\n *    # Without Previews\n *\n *    {{ example-2 }}\n *\n * Example: example-1\n *    <input class=\"pat-querystring\"\n *           data-pat-querystring=\"indexOptionsUrl: /tests/json/queryStringCriteria.json\" />\n *\n * Example: example-2\n *    <input class=\"pat-querystring\"\n *           data-pat-querystring=\"indexOptionsUrl: /tests/json/queryStringCriteria.json;\n *                                 showPreviews: false;\" />\n *\n * License:\n *    Copyright (C) 2010 Plone Foundation\n *\n *    This program is free software; you can redistribute it and/or modify it\n *    under the terms of the GNU General Public License as published by the\n *    Free Software Foundation; either version 2 of the License.\n *\n *    This program is distributed in the hope that it will be useful, but\n *    WITHOUT ANY WARRANTY; without even the implied warranty of\n *    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General\n *    Public License for more details.\n *\n *    You should have received a copy of the GNU General Public License along\n *    with this program; if not, write to the Free Software Foundation, Inc.,\n *    51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA.\n */\n\n\ndefine([\n  'jquery',\n  'mockup-patterns-base',\n  'mockup-patterns-select2',\n  'mockup-patterns-pickadate',\n  'select2'\n], function($, Base, Select2, PickADate, undefined) {\n  'use strict';\n\n  var Criteria = function() { this.init.apply(this, arguments); };\n  Criteria.prototype = {\n    defaults: {\n      indexWidth: '20em',\n      placeholder: 'Select criteria',\n      remove: '',\n      results: ' items matching your search.',\n      days: 'days',\n      betweendt: 'to',\n      classBetweenDtName: 'querystring-criteria-betweendt',\n      classWrapperName: 'querystring-criteria-wrapper',\n      classIndexName: 'querystring-criteria-index',\n      classOperatorName: 'querystring-criteria-operator',\n      classValueName: 'querystring-criteria-value',\n      classRemoveName: 'querystring-criteria-remove',\n      classResultsName: 'querystring-criteria-results',\n      classClearName: 'querystring-criteria-clear'\n    },\n    init: function($el, options, indexes, index, operator, value) {\n      var self = this;\n\n      self.options = $.extend(true, {}, self.defaults, options);\n      self.indexes = indexes;\n      self.indexGroups = {};\n\n      // create wrapper criteria and append it to DOM\n      self.$wrapper = $('<div/>')\n              .addClass(self.options.classWrapperName)\n              .appendTo($el);\n\n      // Remove button\n      self.$remove = $('<div>' + self.options.remove + '</div>')\n        .addClass(self.options.classRemoveName)\n        .appendTo(self.$wrapper)\n        .on('click', function(e) {\n          self.remove();\n        });\n\n      // Index selection\n      self.$index = $('<select><option></option></select>')\n          .attr('placeholder', self.options.placeholder);\n\n      // list of indexes\n      $.each(self.indexes, function(value, options) {\n        if (options.enabled) {\n          if (!self.indexGroups[options.group]) {\n            self.indexGroups[options.group] = $('<optgroup/>')\n                .attr('label', options.group)\n                .appendTo(self.$index);\n          }\n          self.indexGroups[options.group].append(\n            $('<option/>')\n              .attr('value', value)\n              .html(options.title)\n          );\n        }\n      });\n\n      // attach index select to DOM\n      self.$wrapper.append(\n        $('<div/>')\n          .addClass(self.options.classIndexName)\n          .append(self.$index)\n      );\n\n      // add blink (select2)\n      self.$index\n        .patternSelect2({\n          width: self.options.indexWidth,\n          placeholder: self.options.placeholder\n        })\n        .on('change', function(e) {\n          self.removeValue();\n          self.createOperator(e.val);\n          self.createClear();\n          self.trigger('index-changed');\n        });\n\n      if (index !== undefined) {\n        self.$index.select2('val', index);\n        self.createOperator(index, operator, value);\n        self.createClear();\n      }\n\n      self.trigger('create-criteria');\n    },\n    createOperator: function(index, operator, value) {\n      var self = this;\n\n      self.removeOperator();\n      self.$operator = $('<select/>');\n\n      if (self.indexes[index]) {\n        $.each(self.indexes[index].operators, function(value, options) {\n          $('<option/>')\n              .attr('value', value)\n              .html(options.title)\n              .appendTo(self.$operator);\n        });\n      }\n\n      // attach operators select to DOM\n      self.$wrapper.append(\n        $('<div/>')\n          .addClass(self.options.classOperatorName)\n          .append(self.$operator)\n      );\n\n      // add blink (select2)\n      self.$operator\n        .patternSelect2({ width: '10em' })\n        .on('change', function(e) {\n          self.createValue(index);\n          self.createClear();\n          self.trigger('operator-changed');\n        });\n\n      if (operator === undefined) {\n        operator = self.$operator.select2('val');\n      }\n\n      self.$operator.select2('val', operator);\n      self.createValue(index, value);\n\n      self.trigger('create-operator');\n    },\n    createValue: function(index, value) {\n      var self = this,\n          widget = self.indexes[index].operators[self.$operator.val()].widget,\n          $wrapper = $('<div/>')\n            .addClass(self.options.classValueName)\n            .appendTo(self.$wrapper);\n\n      self.removeValue();\n\n      if (widget === 'StringWidget') {\n        self.$value = $('<input type=\"text\"/>')\n                .addClass(self.options.classValueName + '-' + widget)\n                .val(value)\n                .appendTo($wrapper)\n                .change(function() {\n                  self.trigger('value-changed');\n                });\n\n      } else if (widget === 'DateWidget') {\n        self.$value = $('<input type=\"text\"/>')\n                .addClass(self.options.classValueName + '-' + widget)\n                .appendTo($wrapper)\n                .patternPickadate({\n                  time: false,\n                  date: { format: 'dd/mm/yyyy' }\n                })\n                .change(function() {\n                  self.trigger('value-changed');\n                });\n\n      } else if (widget === 'DateRangeWidget') {\n        var startwrap = $('<span/>').appendTo($wrapper);\n        var startdt = $('<input type=\"text\"/>')\n          .addClass(self.options.classValueName + '-' + widget)\n          .addClass(self.options.classValueName + '-' + widget + '-start')\n          .appendTo(startwrap)\n          .patternPickadate({\n            time: false,\n            date: { format: 'dd/mm/yyyy' }\n          });\n        $wrapper.append(\n          $('<span/>')\n            .html(self.options.betweendt)\n            .addClass(self.options.classBetweenDtName)\n        );\n        var endwrap = $('<span/>').appendTo($wrapper);\n        var enddt = $('<input type=\"text\"/>')\n                        .addClass(self.options.classValueName + '-' + widget)\n                        .addClass(self.options.classValueName + '-' + widget + '-end')\n                        .appendTo(endwrap)\n                        .patternPickadate({\n                          time: false,\n                          date: { format: 'dd/mm/yyyy' }\n                        });\n        $wrapper.find('.picker__input').change(function() {\n          self.trigger('value-changed');\n        });\n        self.$value = [startdt, enddt];\n\n      } else if (widget === 'RelativeDateWidget') {\n        self.$value = $('<input type=\"text\"/>')\n                .after($('<span/>').html(self.options.days))\n                .addClass(self.options.classValueName + '-' + widget)\n                .appendTo($wrapper)\n                .change(function() {\n                  self.trigger('value-changed');\n                });\n\n      } else if (widget === 'ReferenceWidget') {\n        self.$value = $('<input type=\"text\"/>')\n                .addClass(self.options.classValueName + '-' + widget)\n                .appendTo($wrapper)\n                .change(function() {\n                  self.trigger('value-changed');\n                });\n\n      } else if (widget === 'RelativePathWidget') {\n        self.$value = $('<input type=\"text\"/>')\n                .addClass(self.options.classValueName + '-' + widget)\n                .appendTo($wrapper)\n                .val(value)\n                .change(function() {\n                  self.trigger('value-changed');\n                });\n\n      } else if (widget === 'MultipleSelectionWidget') {\n        self.$value = $('<select/>').attr('multiple', true)\n                .addClass(self.options.classValueName + '-' + widget)\n                .appendTo($wrapper)\n                .change(function() {\n                  self.trigger('value-changed');\n                });\n        if (self.indexes[index]) {\n          $.each(self.indexes[index].values, function(value, options) {\n            $('<option/>')\n                .attr('value', value)\n                .html(options.title)\n                .appendTo(self.$value);\n          });\n        }\n        self.$value.patternSelect2({ width: '250px' });\n      }\n\n      if (value !== undefined && typeof self.$value !== 'undefined') {\n        self.$value.select2('val', value);\n      }\n\n      self.trigger('create-value');\n\n    },\n    createClear: function() {\n      var self = this;\n      self.removeClear();\n      self.$clear = $('<div/>')\n        .addClass(self.options.classClearName)\n        .appendTo(self.$wrapper);\n    },\n    remove: function() {\n      var self = this;\n      self.trigger('remove');\n      self.$remove.remove();\n      self.$index.parent().remove();\n      self.removeOperator();\n      self.removeValue();\n      self.removeClear();\n      self.$wrapper.remove();\n    },\n    removeClear: function() {\n      var self = this;\n      self.trigger('remove-clear');\n      if (self.$clear) {\n        self.$clear.remove();\n      }\n    },\n    removeOperator: function() {\n      var self = this;\n      self.trigger('remove-operator');\n      if (self.$operator) {\n        self.$operator.parent().remove();\n      }\n    },\n    removeValue: function() {\n      var self = this;\n      self.trigger('remove-value');\n      if (self.$value) {\n        if ($.isArray(self.$value)) { // date ranges have 2 values\n          self.$value[0].parents('.querystring-criteria-value').remove();\n        }\n        else {\n          self.$value.parents('.querystring-criteria-value').remove();\n        }\n      }\n    },\n    // builds the parameters to go into the http querystring for requesting\n    // results from the query builder\n    buildQueryPart: function() {\n      var self = this;\n\n      // index\n      var ival = self.$index.select2('val');\n      if (ival === '') { // no index selected, no query\n        return '';\n      }\n      var istr = 'query.i:records=' + ival;\n\n      // operator\n      if (typeof self.$operator === 'undefined') { // no operator, no query\n        return '';\n      }\n      var oval = self.$operator.val(),\n          ostr = 'query.o:records=' + oval;\n\n      // value(s)\n      var vstrbase = 'query.v:records=',\n          vstrlistbase = 'query.v:records:list=',\n          vstr = [];\n      if (typeof self.$value === 'undefined') {\n        vstr.push(vstrbase);\n      }\n      else if ($.isArray(self.$value)) { // handles only datepickers from the 'between' operator right now\n        $.each(self.$value, function(i, v) {\n          vstr.push(vstrlistbase + $(this).parent().find('.picker__input').val());\n        });\n      }\n      else {\n        vstr.push(vstrbase + self.$value.val());\n      }\n\n      return istr + '&' + ostr + '&' + vstr.join('&');\n    },\n    getJSONListStr: function() {\n      var self = this;\n\n      // index\n      var ival = self.$index.select2('val');\n      if (ival === '') { // no index selected, no query\n        return '';\n      }\n\n      // operator\n      if (typeof self.$operator === 'undefined') { // no operator, no query\n        return '';\n      }\n      var oval = self.$operator.val();\n\n      // value(s)\n      var varr = [];\n      if ($.isArray(self.$value)) { // handles only datepickers from the 'between' operator right now\n        $.each(self.$value, function(i, v) {\n          varr.push($(this).parent().find('.picker__input').val());\n        });\n      }\n      else if (typeof self.$value !== 'undefined') {\n        varr.push(self.$value.val());\n      }\n      var vval;\n      if (varr.length > 1) {\n        vval = '[j' + varr.join('\",\"') + '\"]';\n      }\n      else if (varr.length === 1) {\n        vval = JSON.stringify(varr[0]);\n      }\n      else {\n        vval = '\"\"';\n      }\n\n      return '{\"i\":\"' + ival + '\", \"o\":\"' + oval + '\", \"v\":' + vval + '}';\n    },\n    trigger: function(name) {\n      this.$wrapper.trigger(name + '-criteria.querystring.patterns', [ this ]);\n    },\n    on: function(name, callback) {\n      this.$wrapper.on(name + '-criteria.querystring.patterns', callback);\n    }\n  };\n\n  var QueryString = Base.extend({\n    name: 'querystring',\n    defaults: {\n      indexes: [],\n      classWrapperName: 'querystring-wrapper',\n      criteria: {},\n      indexOptionsUrl: null,\n      previewURL: 'portal_factory/@@querybuilder_html_results', // base url to use to request preview information from\n      previewCountURL: 'portal_factory/@@querybuildernumberofresults',\n      sorttxt: 'Sort On',\n      reversetxt: 'Reversed Order',\n      previewTitle: 'Preview',\n      previewDescription: 'Preview of at most 10 items',\n      classSortLabelName: 'querystring-sort-label',\n      classSortReverseName: 'querystring-sortreverse',\n      classSortReverseLabelName: 'querystring-sortreverse-label',\n      classPreviewCountWrapperName: 'querystring-previewcount-wrapper',\n      classPreviewResultsWrapperName: 'querystring-previewresults-wrapper',\n      classPreviewWrapperName: 'querystring-preview-wrapper',\n      classPreviewName: 'querystring-preview',\n      classPreviewTitleName: 'querystring-preview-title',\n      classPreviewDescriptionName: 'querystring-preview-description',\n      classSortWrapperName: 'querystring-sort-wrapper',\n      showPreviews: true\n    },\n    init: function() {\n      var self = this;\n\n      // hide input element\n      self.$el.hide();\n\n      // create wrapper for out criteria\n      self.$wrapper = $('<div/>');\n      self.$el.after(self.$wrapper);\n\n      // initialization can be detailed if by ajax\n      self.initialized = false;\n\n      if (self.options.indexOptionsUrl) {\n        $.ajax({\n          url: self.options.indexOptionsUrl,\n          success: function(data) {\n            self.options.indexes = data.indexes;\n            self.options['sortable_indexes'] = data['sortable_indexes']; // jshint ignore:line\n            self._init();\n          },\n          error: function(xhr) {\n            // XXX handle this...\n          }\n        });\n      } else {\n        self._init();\n      }\n    },\n    _init: function() {\n      var self = this;\n      self.$criteriaWrapper = $('<div/>')\n        .addClass(self.options.classWrapperName)\n        .appendTo(self.$wrapper);\n\n      self.$sortWrapper = $('<div/>')\n        .addClass(self.options.classSortWrapperName)\n        .appendTo(self.$wrapper);\n\n      if (self.options.showPreviews === 'false') {\n        self.options.showPreviews = false;\n      }\n      if (self.options.showPreviews) {\n        self.$previewWrapper = $('<div/>')\n          .addClass(self.options.classPreviewWrapperName)\n          .appendTo(self.$wrapper);\n\n        // preview title and description\n        $('<div/>')\n          .addClass(self.options.classPreviewTitleName)\n          .html(self.options.previewTitle)\n          .appendTo(self.$previewWrapper);\n        $('<div/>')\n          .addClass(self.options.classPreviewDescriptionName)\n          .html(self.options.previewDescription)\n          .appendTo(self.$previewWrapper);\n      }\n\n      self.criterias = [];\n\n      // create populated criterias\n      if (self.$el.val()) {\n        $.each(JSON.parse(self.$el.val()), function(i, item) {\n          self.createCriteria(item.i, item.o, item.v);\n        });\n      }\n\n      // add empty criteria which enables users to create new cr\n      self.createCriteria();\n\n      // add sort/order fields\n      self.createSort();\n\n      // add criteria preview pane to see results from criteria query\n      if (self.options.showPreviews) {\n        self.refreshPreviewEvent();\n      }\n      self.$el.trigger('initialized');\n      self.initialized = true;\n    },\n    createCriteria: function(index, operator, value) {\n      var self = this,\n          criteria = new Criteria(self.$criteriaWrapper, self.options.criteria,\n            self.options.indexes, index, operator, value);\n\n      criteria.on('remove', function(e) {\n        if (self.criterias[self.criterias.length - 1] === criteria) {\n          self.createCriteria();\n        }\n      });\n\n      criteria.on('index-changed', function(e) {\n        if (self.criterias[self.criterias.length - 1] === criteria) {\n          self.createCriteria();\n        }\n      });\n\n      var doupdates = function() {\n        self.refreshPreviewEvent();\n        self.updateValue();\n      };\n\n      criteria.on('remove', function(e, criteria) {\n        if (self.criterias.indexOf(criteria) !== -1) {\n          self.criterias.splice(self.criterias.indexOf(criteria), 1);\n        }\n        doupdates(e, criteria);\n      });\n      criteria.on('remove-clear', doupdates);\n      criteria.on('remove-operator', doupdates);\n      criteria.on('remove-value', doupdates);\n      criteria.on('index-changed', doupdates);\n      criteria.on('operator-changed', doupdates);\n      criteria.on('create-criteria', doupdates);\n      criteria.on('create-operator', doupdates);\n      criteria.on('create-value', doupdates);\n      criteria.on('value-changed', doupdates);\n\n      self.criterias.push(criteria);\n    },\n    createSort: function() {\n      var self = this;\n\n      // elements that may exist already on the page\n      // XXX do this in a way so it'll work with other forms will work\n      // as long as they provide sort_on and sort_reversed fields in z3c form\n      var existingSortOn = $('[id$=\"-sort_on\"]').filter('[id^=\"formfield-\"]');\n      var existingSortOrder = $('[id$=\"-sort_reversed\"]').filter('[id^=\"formfield-\"]');\n\n      $('<span/>')\n        .addClass(self.options.classSortLabelName)\n        .html(self.options.sorttxt)\n        .appendTo(self.$sortWrapper);\n      self.$sortOn = $('<select/>')\n        .attr('name', 'sort_on')\n        .appendTo(self.$sortWrapper)\n        .change(function() {\n          self.refreshPreviewEvent.call(self);\n          $('[id$=\"sort_on\"]', existingSortOn).val($(this).val());\n        });\n\n      self.$sortOn.append($('<option value=\"\">No sorting</option>')); // default no sorting\n      for (var key in self.options['sortable_indexes']) { // jshint ignore:line\n        self.$sortOn.append(\n          $('<option/>')\n            .attr('value', key)\n            .html(self.options.indexes[key].title)\n        );\n      }\n      self.$sortOn.patternSelect2({width: 150});\n\n      self.$sortOrder = $('<input type=\"checkbox\" />')\n        .attr('name', 'sort_reversed:boolean')\n        .change(function() {\n          self.refreshPreviewEvent.call(self);\n          if ($(this).attr('checked') === 'checked') {\n            $('.option input[type=\"checkbox\"]', existingSortOrder).attr('checked', 'checked');\n          } else {\n            $('.option input[type=\"checkbox\"]', existingSortOrder).removeAttr('checked');\n          }\n        });\n\n      $('<span/>')\n        .addClass(self.options.classSortReverseName)\n        .appendTo(self.$sortWrapper)\n        .append(self.$sortOrder)\n        .append(\n          $('<span/>')\n            .html(self.options.reversetxt)\n            .addClass(self.options.classSortReverseLabelName)\n        );\n\n      // if the form already contains the sort fields, hide them! Their values\n      // will be synced back and forth between the querystring's form elements\n      if (existingSortOn.length >= 1 && existingSortOrder.length >= 1) {\n        var reversed = $('.option input[type=\"checkbox\"]', existingSortOrder).attr('checked') === 'checked';\n        var sortOn = $('[id$=\"-sort_on\"]', existingSortOn).val();\n        if (reversed) {\n          self.$sortOrder.attr('checked', 'checked');\n        }\n        self.$sortOn.select2('val', sortOn);\n        $(existingSortOn).hide();\n        $(existingSortOrder).hide();\n      }\n    },\n    refreshPreviewEvent: function() {\n      var self = this;\n\n      if (!self.options.showPreviews) {\n        return; // cut out of this if there are no previews available\n      }\n\n      /* TEMPORARY */\n      //if (typeof self._tmpcnt === 'undefined') { self._tmpcnt = 0; }\n      //self._tmpcnt++;\n      /* /TEMPORARY */\n\n      if (typeof self._previewXhr !== 'undefined') {\n        self._previewXhr.abort();\n      }\n      /*\n      if (typeof self._count_xhr !== 'undefined') {\n        self._count_xhr.abort();\n      }\n      */\n      if (typeof self.$previewPane !== 'undefined') {\n        self.$previewPane.remove();\n      }\n\n      var query = [], querypart;\n      $.each(self.criterias, function(i, criteria) {\n        querypart = criteria.buildQueryPart();\n        if (querypart !== '') {\n          query.push(criteria.buildQueryPart());\n        }\n      });\n\n      self.$previewPane = $('<div/>')\n        .addClass(self.options.classPreviewName)\n        .appendTo(self.$previewWrapper);\n\n      if (query.length <= 0) {\n        $('<div/>')\n          .addClass(self.options.classPreviewCountWrapperName)\n          .html('No results to preview')\n          .prependTo(self.$previewPane);\n        return; // no query means nothing to send out requests for\n      }\n\n      query.push('sort_on=' + self.$sortOn.val());\n      var sortorder = self.$sortOrder.attr('checked');\n      if (sortorder === 'checked') {\n        query.push('sort_order=reverse');\n      }\n\n      /* TEMPORARY */\n      //self.$previewPane.html(\n      //    'refreshed ' + self._tmpcnt + ' times<br />'\n      //    + (query.length > 1 ? query.join('<br />&') : query));\n      /* /TEMPORARY */\n\n      /*\n      self._count_xhr = $.get(self.options.previewCountURL + '?' + query.join('&'))\n          .done(function(data, stat) {\n            $('<div/>')\n              .addClass(self.options.classPreviewCountWrapperName)\n              .html(data)\n              .prependTo(self.$previewPane);\n          });\n      */\n      self._previewXhr = $.get(self.options.previewURL + '?' + query.join('&'))\n          .done(function(data, stat) {\n            $('<div/>')\n              .addClass(self.options.classPreviewResultsWrapperName)\n              .html(data)\n              .appendTo(self.$previewPane);\n          });\n    },\n    updateValue: function() {\n      // updating the original input with json data in the form:\n      // [\n      //    {i:'index', o:'operator', v:'value'}\n      // ]\n\n      var self = this;\n\n      var criteriastrs = [];\n      $.each(self.criterias, function(i, criteria) {\n        var jsonstr = criteria.getJSONListStr();\n        if (jsonstr !== '') {\n          criteriastrs.push(jsonstr);\n        }\n      });\n      var existing = self.$el.val();\n      var val = '[' + criteriastrs.join(',') + ']';\n      self.$el.val(val);\n      self.$el.trigger('change');\n    }\n  });\n\n  return QueryString;\n\n});\n"}),define("mockup-patterns-relateditems",["jquery","underscore","mockup-patterns-base","mockup-patterns-select2","mockup-utils","mockup-patterns-tree"],function(e,t,n,r,i,s){var o=n.extend({name:"relateditems",browsing:!1,currentPath:null,defaults:{vocabularyUrl:null,width:"300px",multiple:!0,tokenSeparators:[","," "],separator:",",orderable:!0,cache:!0,mode:"search",closeOnSelect:!1,basePath:"/",searchText:"Search:",searchAllText:"entire site",homeText:"home",folderTypes:["Folder"],selectableTypes:null,attributes:["UID","Title","Type","path"],dropdownCssClass:"pattern-relateditems-dropdown",maximumSelectionSize:-1,resultTemplate:'<div class="pattern-relateditems-result pattern-relateditems-type-<%= Type %> <% if (selected) { %>pattern-relateditems-active<% } %>">  <a href="#" class="pattern-relateditems-result-select <% if (selectable) { %>selectable<% } %>">    <span class="pattern-relateditems-result-title"><%= Title %></span>    <span class="pattern-relateditems-result-path"><%= path %></span>  </a>  <span class="pattern-relateditems-buttons">  <% if (folderish) { %>     <a class="pattern-relateditems-result-browse" href="#" data-path="<%= path %>"></a>   <% } %> </span></div>',resultTemplateSelector:null,selectionTemplate:'<span class="pattern-relateditems-item pattern-relateditems-type-<%= Type %>"> <span class="pattern-relateditems-item-title"><%= Title %></span> <span class="pattern-relateditems-item-path"><%= path %></span></span>',selectionTemplateSelector:null,breadCrumbsTemplate:'<span><span class="pattern-relateditems-tree"><a href="#" class="pattern-relateditems-tree-select"><span class="glyphicon glyphicon-indent-left"></span></a> <div class="tree-container"><span class="select-folder-label">Select folder</span><a href="#" class="btn close pattern-relateditems-tree-cancel">X</a><div class="pat-tree" /><a href="#" class="btn btn-default pattern-relateditems-tree-itemselect">Select</a></div></span><span class="pattern-relateditems-path-label"><%= searchText %></span><a class="crumb" href="/"><span class="glyphicon glyphicon-home"></span></a><%= items %></span></span>',breadCrumbsTemplateSelector:null,breadCrumbTemplate:'/<a href="<%= path %>" class="crumb"><%= text %></a>',breadCrumbTemplateSelector:null,escapeMarkup:function(e){return e},setupAjax:function(){var e=this;return e.query.valid?e.query.selectAjax():{}}},applyTemplate:function(n,r){var i=this,s;i.options[n+"TemplateSelector"]?(s=e(i.options[n+"TemplateSelector"]).html(),s||(s=i.options[n+"Template"])):s=i.options[n+"Template"];var o=e.extend(!0,{},i.options,r);return o._item=r,t.template(s,o)},activateBrowsing:function(){var e=this;e.browsing=!0,e.setBreadCrumbs()},deactivateBrowsing:function(){var e=this;e.browsing=!1,e.setBreadCrumbs()},browseTo:function(e){var t=this;t.trigger("before-browse"),t.currentPath=e,e==="/"&&t.options.mode==="search"?t.deactivateBrowsing():t.activateBrowsing(),t.$el.select2("close"),t.$el.select2("open"),t.trigger("after-browse")},setBreadCrumbs:function(){var n=this,r=n.currentPath?n.currentPath:n.options.basePath,i;if(r==="/"){var o="";n.options.mode==="search"&&(o="<em>"+n.options.searchAllText+"</em>"),i=n.applyTemplate("breadCrumbs",{items:o,searchText:n.options.searchText})}else{var u=r.split("/"),a="",f="";t.each(u,function(e){if(e!==""){var t={};a=a+"/"+e,t.text=e,t.path=a,f+=n.applyTemplate("breadCrumb",t)}}),i=n.applyTemplate("breadCrumbs",{items:f,searchText:n.options.searchText})}var l=e(i);e("a.crumb",l).on("click",function(t){return t.preventDefault(),n.browseTo(e(this).attr("href")),!1});var c=e(".pattern-relateditems-tree-select",l),h=c.parent(),p=e(".tree-container",h),d=e(".pat-tree",h),v=null,m=new s(d,{data:[],dataFilter:function(e){var n=[];return t.each(e.results,function(e){n.push({label:e.Title,id:e.UID,path:e.path})}),n}});m.$el.bind("tree.select",function(e){var t=e.node;t&&!t._loaded&&(n.currentPath=t.path,v=t,m.$el.tree("loadDataFromUrl",n.treeQuery.getUrl(),t),t._loaded=!0)}),m.$el.bind("tree.refresh",function(){v&&m.$el.tree("selectNode",v)}),e("a.pattern-relateditems-tree-cancel",p).click(function(e){return e.preventDefault(),p.fadeOut(),!1}),e("a.pattern-relateditems-tree-itemselect",p).click(function(e){return e.preventDefault(),n.browseTo(n.currentPath),p.fadeOut(),!1}),c.on("click",function(e){return e.preventDefault(),n.browsing=!0,n.currentPath="/",p.fadeIn(),m.$el.tree("loadDataFromUrl",n.treeQuery.getUrl()),!1}),n.$browsePath.html(l)},selectItem:function(e){var t=this;t.trigger("selecting");var n=t.$el.select2("data");n.push(e),t.$el.select2("data",n),e.selected=!0,t.trigger("selected")},deselectItem:function(e){var n=this;n.trigger("deselecting");var r=n.$el.select2("data");t.each(r,function(t,n){t.UID===e.UID&&r.splice(n,1)}),n.$el.select2("data",r),e.selected=!1,n.trigger("deselected")},isSelectable:function(e){var n=this;return n.options.selectableTypes===null?!0:t.indexOf(n.options.selectableTypes,e.Type)>-1},init:function(){var n=this;n.query=new i.QueryHelper(e.extend(!0,{},n.options,{pattern:n})),n.treeQuery=new i.QueryHelper(e.extend(!0,{},n.options,{pattern:n,baseCriteria:[{i:"Type",o:"plone.app.querystring.operation.list.contains",v:n.options.folderTypes}]})),n.options.ajax=n.options.setupAjax.apply(n),n.$el.wrap('<div class="pattern-relateditems-container" />'),n.$container=n.$el.parents(".pattern-relateditems-container"),n.$container.width(n.options.width),r.prototype.initializeValues.call(n),r.prototype.initializeTags.call(n),n.options.formatSelection=function(e,t){return n.applyTemplate("selection",e)},r.prototype.initializeOrdering.call(n),n.options.formatResult=function(r){!r.Type||t.indexOf(n.options.folderTypes,r.Type)===-1?r.folderish=!1:r.folderish=!0,r.selectable=n.isSelectable(r);if(r.selected===undefined){var i=n.$el.select2("data");r.selected=!1,t.each(i,function(e){e.UID===r.UID&&(r.selected=!0)})}var s=e(n.applyTemplate("result",r));return e(".pattern-relateditems-result-select",s).on("click",function(t){t.preventDefault();if(e(this).is(".selectable")){var i=e(this).parents(".pattern-relateditems-result");if(i.is(".pattern-relateditems-active"))i.removeClass("pattern-relateditems-active"),n.deselectItem(r);else{n.selectItem(r),i.addClass("pattern-relateditems-active");if(n.options.maximumSelectionSize>0){var s=n.$select2.select2("data");s.length>=n.options.maximumSelectionSize&&n.$select2.select2("close")}}}}),e(".pattern-relateditems-result-browse",s).on("click",function(t){t.preventDefault(),t.stopPropagation();var r=e(this).data("path");n.browseTo(r)}),e(s)},n.options.initSelection=function(t,r){var i=[],s=e(t).val();if(s!==""){var o=s.split(n.options.separator);n.query.search("UID","plone.app.querystring.operation.list.contains",o,function(e){r(e.results)},!1)}},n.options.id=function(e){return e.UID},r.prototype.initializeSelect2.call(n);var s={browseText:n.options.browseText,searchText:n.options.searchText};n.$browsePath=e('<span class="pattern-relateditems-path" />'),n.$container.prepend(n.$browsePath),n.options.mode==="search"?(n.deactivateBrowsing(),n.browsing=!1):(n.activateBrowsing(),n.browsing=!0),n.$el.on("select2-selecting",function(e){e.preventDefault()})}});return o}),define("text!js/patterns/relateditems.js",[],function(){return"/* Related items pattern.\n *\n * Options:\n *    vocabularyUrl(string): This is a URL to a JSON-formatted file used to populate the list (null)\n *    attributes(array): This list is passed to the server during an AJAX request to specify the attributes which should be included on each item. (['UID', 'Title', 'Type', 'path'])\n *    basePath(string): If this is set the widget will start in \"Browse\" mode and will pass the path to the server to filter the results. ('/')\n *    breadCrumbTemplate(string): Template to use for a single item in the breadcrumbs. ('/<a href=\"<%= path %>\"><%= text %></a>')\n *    breadCrumbTemplateSelector(string): Select an element from the DOM from which to grab the breadCrumbTemplate. (null)\n *    breadCrumbsTemplate(string): Template for element to which breadCrumbs will be appended. ('<span><span class=\"pattern-relateditems-path-label\"><%= searchText %></span><a class=\"icon-home\" href=\"/\"></a><%= items %></span>')\n *    breadCrumbsTemplateSelector(string): Select an element from the DOM from which to grab the breadCrumbsTemplate. (null)\n *    cache(boolean): Whether or not results from the server should be\n *    cached. (true)\n *    closeOnSelect(boolean): Select2 option. Whether or not the drop down should be closed when an item is selected. (false)\n *    dropdownCssClass(string): Select2 option. CSS class to add to the drop down element. ('pattern-relateditems-dropdown')\n *    folderTypes(array): Types which should be considered browsable. ([\"Folder\"])\n *    homeText(string): Text to display in the initial breadcrumb item. (home)\n *    maximumSelectionSize(integer): The maximum number of items that can be selected in a multi-select control. If this number is less than 1 selection is not limited. (-1)\n *    multiple(boolean): Do not change this option. (true)\n *    orderable(boolean): Whether or not items should be drag-and-drop sortable. (true)\n *    resultTemplate(string): Template for an item in the in the list of results. Refer to source for default. (Refer to source)\n *    resultTemplateSelector(string): Select an element from the DOM from which to grab the resultTemplate. (null)\n *    searchText(string): Text which will be inserted to the left of the\n *    path. (Search)\n *    searchAllText(string): Displays next to the path when the path is set to the root. (All)\n *    selectableTypes(array): If the value is null all types are selectable. Otherwise, provide a list of strings to match item types that are selectable. (null)\n *    selectionTemplate(string): Template for element that will be used to construct a selected item. (Refer to source)\n *    selectionTemplateSelector(string): Select an element from the DOM from which to grab the selectionTemplate. (null)\n *    separator(string): Select2 option. String which separates multiple items. (',')\n *    tokenSeparators(array): Select2 option, refer to select2 documentation.\n *    ([\",\", \" \"])\n *    width(string): Specify a width for the widget. ('300px')\n *\n * Documentation:\n *    The Related Items pattern is based on Select2 so many of the same options will work here as well.\n *\n *    # Default\n *\n *    {{ example-1 }}\n *\n *    # Existing values, some bad\n *\n *    {{ example-2 }}\n *\n *    # Selectable Types\n *\n *    {{ example-3 }}\n *\n *    # Select a single item\n *\n *    {{ example-4 }}\n *\n * Example: example-1\n *    <input type=\"text\" class=\"pat-relateditems\"\n *           data-pat-relateditems=\"width:30em;\n *                                  vocabularyUrl:/relateditems-test.json\" />\n *\n * Example: example-2\n *    <input type=\"text\" class=\"pat-relateditems\"\n *           value=\"asdf1234gsad,sdfbsfdh345,asdlfkjasdlfkjasdf,kokpoius98\"\n *           data-pat-relateditems=\"width:30em; vocabularyUrl:/relateditems-test.json\" />\n *\n * Example: example-3\n *    <input type=\"text\" class=\"pat-relateditems\"\n             data-pat-relateditems='{\"selectableTypes\": [\"Document\"], \"vocabularyUrl\": \"/relateditems-test.json\"}' />\n *\n * Example: example-4\n *    <input type=\"text\" class=\"pat-relateditems\"\n             data-pat-relateditems='{\"selectableTypes\": [\"Document\"], \"vocabularyUrl\": \"/relateditems-test.json\", \"maximumSelectionSize\": 1}' />\n *\n * License:\n *    Copyright (C) 2010 Plone Foundation\n *\n *    This program is free software; you can redistribute it and/or modify it\n *    under the terms of the GNU General Public License as published by the\n *    Free Software Foundation; either version 2 of the License.\n *\n *    This program is distributed in the hope that it will be useful, but\n *    WITHOUT ANY WARRANTY; without even the implied warranty of\n *    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General\n *    Public License for more details.\n *\n *    You should have received a copy of the GNU General Public License along\n *    with this program; if not, write to the Free Software Foundation, Inc.,\n *    51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA.\n */\n\n\ndefine([\n  'jquery',\n  'underscore',\n  'mockup-patterns-base',\n  'mockup-patterns-select2',\n  'mockup-utils',\n  'mockup-patterns-tree'\n], function($, _, Base, Select2, utils, Tree) {\n  'use strict';\n\n  var RelatedItems = Base.extend({\n    name: 'relateditems',\n    browsing: false,\n    currentPath: null,\n    defaults: {\n      vocabularyUrl: null, // must be set to work\n      width: '300px',\n      multiple: true,\n      tokenSeparators: [',', ' '],\n      separator: ',',\n      orderable: true,\n      cache: true,\n      mode: 'search', // possible values are search and browse\n      closeOnSelect: false,\n      basePath: '/',\n      searchText: 'Search:',\n      searchAllText: 'entire site',\n      homeText: 'home',\n      folderTypes: ['Folder'],\n      selectableTypes: null, // null means everything is selectable, otherwise a list of strings to match types that are selectable\n      attributes: ['UID', 'Title', 'Type', 'path'],\n      dropdownCssClass: 'pattern-relateditems-dropdown',\n      maximumSelectionSize: -1,\n      resultTemplate: '' +\n        '<div class=\"pattern-relateditems-result pattern-relateditems-type-<%= Type %> <% if (selected) { %>pattern-relateditems-active<% } %>\">' +\n        '  <a href=\"#\" class=\"pattern-relateditems-result-select <% if (selectable) { %>selectable<% } %>\">' +\n        '    <span class=\"pattern-relateditems-result-title\"><%= Title %></span>' +\n        '    <span class=\"pattern-relateditems-result-path\"><%= path %></span>' +\n        '  </a>' +\n        '  <span class=\"pattern-relateditems-buttons\">' +\n        '  <% if (folderish) { %>' +\n        '     <a class=\"pattern-relateditems-result-browse\" href=\"#\" data-path=\"<%= path %>\"></a>' +\n        '   <% } %>' +\n        ' </span>' +\n        '</div>',\n      resultTemplateSelector: null,\n      selectionTemplate: '' +\n        '<span class=\"pattern-relateditems-item pattern-relateditems-type-<%= Type %>\">' +\n        ' <span class=\"pattern-relateditems-item-title\"><%= Title %></span>' +\n        ' <span class=\"pattern-relateditems-item-path\"><%= path %></span>' +\n        '</span>',\n      selectionTemplateSelector: null,\n      breadCrumbsTemplate: '<span>' +\n        '<span class=\"pattern-relateditems-tree\">' +\n          '<a href=\"#\" class=\"pattern-relateditems-tree-select\"><span class=\"glyphicon glyphicon-indent-left\"></span></a> ' +\n          '<div class=\"tree-container\">' +\n            '<span class=\"select-folder-label\">Select folder</span>' +\n            '<a href=\"#\" class=\"btn close pattern-relateditems-tree-cancel\">X</a>' +\n            '<div class=\"pat-tree\" />' +\n            '<a href=\"#\" class=\"btn btn-default pattern-relateditems-tree-itemselect\">Select</a>' +\n          '</div>' +\n        '</span>' +\n        '<span class=\"pattern-relateditems-path-label\">' +\n          '<%= searchText %></span><a class=\"crumb\" href=\"/\"><span class=\"glyphicon glyphicon-home\"></span></a><%= items %>' +\n        '</span>' +\n      '</span>',\n      breadCrumbsTemplateSelector: null,\n      breadCrumbTemplate: '' +\n        '/<a href=\"<%= path %>\" class=\"crumb\"><%= text %></a>',\n      breadCrumbTemplateSelector: null,\n      escapeMarkup: function(text) {\n        return text;\n      },\n      setupAjax: function() {\n        // Setup the ajax object to use during requests\n        var self = this;\n        if (self.query.valid) {\n          return self.query.selectAjax();\n        }\n        return {};\n      }\n    },\n    applyTemplate: function(tpl, item) {\n      var self = this;\n      var template;\n      if (self.options[tpl + 'TemplateSelector']) {\n        template = $(self.options[tpl + 'TemplateSelector']).html();\n        if (!template) {\n          template = self.options[tpl + 'Template'];\n        }\n      } else {\n        template = self.options[tpl + 'Template'];\n      }\n      // let's give all the options possible to the template generation\n      var options = $.extend(true, {}, self.options, item);\n      options._item = item;\n      return _.template(template, options);\n    },\n    activateBrowsing: function() {\n      var self = this;\n      self.browsing = true;\n      self.setBreadCrumbs();\n    },\n    deactivateBrowsing: function() {\n      var self = this;\n      self.browsing = false;\n      self.setBreadCrumbs();\n    },\n    browseTo: function(path) {\n      var self = this;\n      self.trigger('before-browse');\n      self.currentPath = path;\n      if (path === '/' && self.options.mode === 'search') {\n        self.deactivateBrowsing();\n      } else {\n        self.activateBrowsing();\n      }\n      self.$el.select2('close');\n      self.$el.select2('open');\n      self.trigger('after-browse');\n    },\n    setBreadCrumbs: function() {\n      var self = this;\n      var path = self.currentPath ? self.currentPath : self.options.basePath;\n      var html;\n      if (path === '/') {\n        var searchText = '';\n        if (self.options.mode === 'search') {\n          searchText = '<em>' + self.options.searchAllText + '</em>';\n        }\n        html = self.applyTemplate('breadCrumbs', {\n          items: searchText,\n          searchText: self.options.searchText\n        });\n      } else {\n        var paths = path.split('/');\n        var itemPath = '';\n        var itemsHtml = '';\n        _.each(paths, function(node) {\n          if (node !== '') {\n            var item = {};\n            itemPath = itemPath + '/' + node;\n            item.text = node;\n            item.path = itemPath;\n            itemsHtml = itemsHtml + self.applyTemplate('breadCrumb', item);\n          }\n        });\n        html = self.applyTemplate('breadCrumbs', {items: itemsHtml, searchText: self.options.searchText});\n      }\n      var $crumbs = $(html);\n      $('a.crumb', $crumbs).on('click', function(e) {\n        e.preventDefault();\n        self.browseTo($(this).attr('href'));\n        return false;\n      });\n      var $treeSelect = $('.pattern-relateditems-tree-select', $crumbs);\n      var $container = $treeSelect.parent();\n      var $treeContainer = $('.tree-container', $container);\n      var $tree = $('.pat-tree', $container);\n      var selectedNode = null;\n      var treePattern = new Tree($tree, {\n        data: [],\n        dataFilter: function(data) {\n          var nodes = [];\n          _.each(data.results, function(item) {\n            nodes.push({\n              label: item.Title,\n              id: item.UID,\n              path: item.path\n            });\n          });\n          return nodes;\n        }\n      });\n      treePattern.$el.bind('tree.select', function(e) {\n        var node = e.node;\n        if (node && !node._loaded) {\n          self.currentPath = node.path;\n          selectedNode = node;\n          treePattern.$el.tree('loadDataFromUrl', self.treeQuery.getUrl(), node);\n          node._loaded = true;\n        }\n      });\n      treePattern.$el.bind('tree.refresh', function() {\n        /* the purpose of this is that when new data is loaded, the selected\n         * node is cleared. This re-selects it as a user browses structure of site */\n        if (selectedNode) {\n          treePattern.$el.tree('selectNode', selectedNode);\n        }\n      });\n      $('a.pattern-relateditems-tree-cancel', $treeContainer).click(function(e) {\n        e.preventDefault();\n        $treeContainer.fadeOut();\n        return false;\n      });\n\n      $('a.pattern-relateditems-tree-itemselect', $treeContainer).click(function(e) {\n        e.preventDefault();\n        self.browseTo(self.currentPath); // just browse to current path since it's set elsewhere\n        $treeContainer.fadeOut();\n        return false;\n      });\n\n      $treeSelect.on('click', function(e) {\n        e.preventDefault();\n        self.browsing = true;\n        self.currentPath = '/';\n        $treeContainer.fadeIn();\n        treePattern.$el.tree('loadDataFromUrl', self.treeQuery.getUrl());\n        return false;\n      });\n      self.$browsePath.html($crumbs);\n    },\n    selectItem: function(item) {\n      var self = this;\n      self.trigger('selecting');\n      var data = self.$el.select2('data');\n      data.push(item);\n      self.$el.select2('data', data);\n      item.selected = true;\n      self.trigger('selected');\n    },\n    deselectItem: function(item) {\n      var self = this;\n      self.trigger('deselecting');\n      var data = self.$el.select2('data');\n      _.each(data, function(obj, i) {\n        if (obj.UID === item.UID) {\n          data.splice(i, 1);\n        }\n      });\n      self.$el.select2('data', data);\n      item.selected = false;\n      self.trigger('deselected');\n    },\n    isSelectable: function(item) {\n      var self = this;\n      if (self.options.selectableTypes === null) {\n        return true;\n      } else {\n        return _.indexOf(self.options.selectableTypes, item.Type) > -1;\n      }\n    },\n    init: function() {\n      var self = this;\n\n      self.query = new utils.QueryHelper(\n        $.extend(true, {}, self.options, {pattern: self})\n      );\n      self.treeQuery = new utils.QueryHelper(\n        $.extend(true, {}, self.options, {\n          pattern: self,\n          baseCriteria: [{\n            i: 'Type',\n            o: 'plone.app.querystring.operation.list.contains',\n            v: self.options.folderTypes\n          }]\n        })\n      );\n\n      self.options.ajax = self.options.setupAjax.apply(self);\n\n      self.$el.wrap('<div class=\"pattern-relateditems-container\" />');\n      self.$container = self.$el.parents('.pattern-relateditems-container');\n      self.$container.width(self.options.width);\n\n      Select2.prototype.initializeValues.call(self);\n      Select2.prototype.initializeTags.call(self);\n\n      self.options.formatSelection = function(item, $container) {\n        return self.applyTemplate('selection', item);\n      };\n\n      Select2.prototype.initializeOrdering.call(self);\n\n      self.options.formatResult = function(item) {\n        if (!item.Type || _.indexOf(self.options.folderTypes, item.Type) === -1) {\n          item.folderish = false;\n        } else {\n          item.folderish = true;\n        }\n\n        item.selectable = self.isSelectable(item);\n\n        if (item.selected === undefined) {\n          var data = self.$el.select2('data');\n          item.selected = false;\n          _.each(data, function(obj) {\n            if (obj.UID === item.UID) {\n              item.selected = true;\n            }\n          });\n        }\n\n        var result = $(self.applyTemplate('result', item));\n\n        $('.pattern-relateditems-result-select', result).on('click', function(event) {\n          event.preventDefault();\n          if ($(this).is('.selectable')) {\n            var $parent = $(this).parents('.pattern-relateditems-result');\n            if ($parent.is('.pattern-relateditems-active')) {\n              $parent.removeClass('pattern-relateditems-active');\n              self.deselectItem(item);\n            } else {\n              self.selectItem(item);\n              $parent.addClass('pattern-relateditems-active');\n              if (self.options.maximumSelectionSize > 0) {\n                var items = self.$select2.select2('data');\n                if (items.length >= self.options.maximumSelectionSize) {\n                  self.$select2.select2('close');\n                }\n              }\n            }\n          }\n        });\n\n        $('.pattern-relateditems-result-browse', result).on('click', function(event) {\n          event.preventDefault();\n          event.stopPropagation();\n          var path = $(this).data('path');\n          self.browseTo(path);\n        });\n\n        return $(result);\n      };\n      self.options.initSelection = function(element, callback) {\n        var data = [];\n        var value = $(element).val();\n        if (value !== '') {\n          var ids = value.split(self.options.separator);\n          self.query.search(\n            'UID', 'plone.app.querystring.operation.list.contains', ids,\n            function(data) {\n              callback(data.results);\n            },\n            false\n          );\n        }\n      };\n\n      self.options.id = function(item) {\n        return item.UID;\n      };\n\n      Select2.prototype.initializeSelect2.call(self);\n\n      // Browsing functionality\n      var browseOpts = {\n        browseText: self.options.browseText,\n        searchText: self.options.searchText\n      };\n\n      self.$browsePath = $('<span class=\"pattern-relateditems-path\" />');\n      self.$container.prepend(self.$browsePath);\n\n      if (self.options.mode === 'search') {\n        self.deactivateBrowsing();\n        self.browsing = false;\n      } else {\n        self.activateBrowsing();\n        self.browsing = true;\n      }\n\n      self.$el.on('select2-selecting', function(event) {\n        event.preventDefault();\n      });\n\n    }\n  });\n\n  return RelatedItems;\n\n});\n"}),define("text!js/patterns/select2.js",[],function(){return"/* Select2 pattern.\n *\n * Options:\n *    separator(string): Analagous to the separator constructor parameter from Select2. Defines a custom separator used to distinguish the tag values. Ex: a value of \";\" will allow tags and initialValues to have values separated by \";\" instead of the default \",\". (',')\n *    initialValues(string): This can be a json encoded string, or a list of id:text values. Ex: Red:The Color Red,Orange:The Color Orange  This is used inside the initSelection method, if AJAX options are NOT set. (null)\n *    vocabularyUrl(string): This is a URL to a JSON-formatted file used to populate the list (null)\n *    OTHER OPTIONS(): For more options on select2 go to http://ivaynberg.github.io/select2/#documentation ()\n *\n * Documentation:\n *    # Autocomplete with search (single select)\n *\n *    {{ example-1 }}\n *\n *    # Tagging\n *\n *    {{ example-2 }}\n *\n *    # Orderable tags\n *\n *    {{ example-3 }}\n *\n *    # AJAX tags\n *\n *    {{ example-4 }}\n *\n * Example: example-1\n *    <select class=\"pat-select2\" data-pat-select2=\"width:20em\">\n *      <option value=\"Acholi\">Acholi</option>\n *      <option value=\"Afrikaans\">Afrikaans</option>\n *      <option value=\"Akan\">Akan</option>\n *      <option value=\"Albanian\">Albanian</option>\n *      <option value=\"Amharic\">Amharic</option>\n *      <option value=\"Arabic\">Arabic</option>\n *      <option value=\"Ashante\">Ashante</option>\n *      <option value=\"Asl\">Asl</option>\n *      <option value=\"Assyrian\">Assyrian</option>\n *      <option value=\"Azerbaijani\">Azerbaijani</option>\n *      <option value=\"Azeri\">Azeri</option>\n *    </select>\n *\n * Example: example-2\n *    <input type=\"text\" class=\"pat-select2\"\n *           data-pat-select2=\"separator:,;\n *                             tags:Red,Yellow,Green,Orange,Purple;\n *                             width:20em;\n *                             initialValues:Red:The Color Red,Orange:The Color Orange\"\n *           value=\"Red,Orange\"/>\n *\n * Example: example-3\n *    <input type=\"text\" class=\"pat-select2\"\n *           data-pat-select2=\"orderable:true;\n *                             tags:Red,Yellow,Green;\n *                             width:20em\" />\n * Example: example-4\n *    <input type=\"hidden\" class=\"pat-select2\"\n *           data-pat-select2=\"placeholder:Search for a Value;\n *                             vocabularyUrl:select2-test.json;\n *                             width:20em\" />\n *\n * License:\n *    Copyright (C) 2010 Plone Foundation\n *\n *    This program is free software; you can redistribute it and/or modify it\n *    under the terms of the GNU General Public License as published by the\n *    Free Software Foundation; either version 2 of the License.\n *\n *    This program is distributed in the hope that it will be useful, but\n *    WITHOUT ANY WARRANTY; without even the implied warranty of\n *    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General\n *    Public License for more details.\n *\n *    You should have received a copy of the GNU General Public License along\n *    with this program; if not, write to the Free Software Foundation, Inc.,\n *    51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA.\n */\n\n\ndefine([\n  'jquery',\n  'mockup-patterns-base',\n  'select2',\n  'jquery.event.drag',\n  'jquery.event.drop'\n], function($, Base) {\n  'use strict';\n\n  var Select2 = Base.extend({\n    name: 'select2',\n    defaults: {\n      separator: ','\n    },\n    initializeValues: function() {\n      var self = this;\n      // Init Selection ---------------------------------------------\n      if (self.options.initialValues) {\n        self.options.id = function(term) {\n          return term.id;\n        };\n        self.options.initSelection = function ($el, callback) {\n          var data = [],\n              value = $el.val(),\n              seldefaults = self.options.initialValues;\n\n          // Create the initSelection value that contains the default selection,\n          // but in a javascript object\n          if (typeof(self.options.initialValues) === 'string' && self.options.initialValues !== '') {\n            // if default selection value starts with a '{', then treat the value as\n            // a JSON object that needs to be parsed\n            if (self.options.initialValues[0] === '{') {\n              seldefaults = JSON.parse(self.options.initialValues);\n            }\n            // otherwise, treat the value as a list, separated by the defaults.separator value of\n            // strings in the format \"id:text\", and convert it to an object\n            else {\n              seldefaults = {};\n              $(self.options.initialValues.split(self.options.separator)).each(function() {\n                var selection = this.split(':');\n                var id = $.trim(selection[0]);\n                var text = $.trim(selection[1]);\n                seldefaults[id] = text;\n              });\n            }\n          }\n\n          $(value.split(self.options.separator)).each(function() {\n            var text = this;\n            if (seldefaults[this]) {\n              text = seldefaults[this];\n            }\n            data.push({id: this, text: text});\n          });\n          callback(data);\n        };\n      }\n    },\n    initializeTags: function() {\n      var self = this;\n      if (self.options.tags && typeof(self.options.tags) === 'string') {\n        if (self.options.tags.substr(0, 1) === '[') {\n          self.options.tags = JSON.parse(self.options.tags);\n        } else {\n          self.options.tags = self.options.tags.split(self.options.separator);\n        }\n      }\n\n      if (self.options.tags && !self.options.allowNewItems) {\n        self.options.data = $.map (self.options.tags, function (value, i) {\n          return { id: value, text: value };\n        });\n        self.options.multiple = true;\n        delete self.options.tags;\n      }\n    },\n    initializeOrdering: function() {\n      var self = this;\n      if (self.options.orderable) {\n        var formatSelection = function(data, $container) {\n          return data ? data.text : undefined;\n        };\n        if (self.options.formatSelection) {\n          formatSelection = self.options.formatSelection;\n        }\n\n        self.options.formatSelection = function(data, $container) {\n          $container.parents('li')\n            .drag('start', function(e, dd) {\n              $(this).addClass('select2-choice-dragging');\n              self.$el.select2('onSortStart');\n              $.drop({\n                tolerance: function(event, proxy, target) {\n                  var test = event.pageY > (target.top + target.height / 2);\n                  $.data(target.elem, 'drop+reorder', test ? 'insertAfter' : 'insertBefore' );\n                  return this.contains(target, [event.pageX, event.pageY]);\n                }\n              });\n              return $( this ).clone().\n                addClass('dragging').\n                css({opacity: 0.75, position: 'absolute'}).\n                appendTo(document.body);\n            })\n            .drag(function(e, dd) {\n              /*jshint eqeqeq:false */\n              $( dd.proxy ).css({\n                top: dd.offsetY,\n                left: dd.offsetX\n              });\n              var drop = dd.drop[0],\n                  method = $.data(drop || {}, 'drop+reorder');\n\n              /* XXX Cannot use triple equals here */\n              if (drop && (drop != dd.current || method != dd.method)) {\n                $(this)[method](drop);\n                dd.current = drop;\n                dd.method = method;\n                dd.update();\n              }\n            })\n            .drag('end', function(e, dd) {\n              $(this).removeClass('select2-choice-dragging');\n              self.$el.select2('onSortEnd');\n              $( dd.proxy ).remove();\n            })\n            .drop('init', function(e, dd ) {\n              /*jshint eqeqeq:false */\n              /* XXX Cannot use triple equals here */\n              return (this == dd.drag) ? false: true;\n            });\n          return formatSelection(data, $container);\n        };\n      }\n    },\n    initializeSelect2: function() {\n      var self = this;\n      self.$el.select2(self.options);\n      self.$select2 = self.$el.parent().find('.select2-container');\n      self.$el.parent().off('close.modal.patterns');\n      if (self.options.orderable) {\n        self.$select2.addClass('select2-orderable');\n      }\n    },\n    init: function() {\n      var self = this;\n\n      self.options.allowNewItems = self.options.hasOwnProperty ('allowNewItems') ?\n            JSON.parse(self.options.allowNewItems) : true;\n\n      if (self.options.ajax || self.options.vocabularyUrl) {\n        if (self.options.vocabularyUrl) {\n          self.options.multiple = true;\n          self.options.ajax = self.options.ajax || {};\n          self.options.ajax.url = self.options.vocabularyUrl;\n          // XXX removing the following function does'nt break tests. dead code?\n          self.options.initSelection = function ($el, callback) {\n            var data = [], value = $el.val();\n            $(value.split(self.options.separator)).each(function () {\n              data.push({id: this, text: this});\n            });\n            callback(data);\n          };\n        }\n\n        var queryTerm = '';\n        self.options.ajax = $.extend({\n          quietMillis: 300,\n          data: function (term, page) {\n            queryTerm = term;\n            return {\n              query: term,\n              'page_limit': 10,\n              page: page\n            };\n          },\n          results: function (data, page) {\n            var results = data.results;\n            if (self.options.vocabularyUrl) {\n              var dataIds = [];\n              $.each(data.results, function(i, item) {\n                dataIds.push(item.id);\n              });\n              results = [];\n\n              var haveResult = queryTerm === '' || $.inArray(queryTerm, dataIds) >= 0;\n              if (self.options.allowNewItems && !haveResult) {\n                results.push({id: queryTerm, text: queryTerm});\n              }\n\n              if (haveResult || self.options.allowNewItems) {\n                $.each(data.results, function(i, item) {\n                  results.push(item);\n                });\n              }\n            }\n            return { results: results };\n          }\n        }, self.options.ajax);\n      } else if (self.options.multiple && self.$el.is('select')) {\n        // Multiselects need to be converted to input[type=hidden]\n        // for Select2\n        var vals = self.$el.val() || [];\n        var options = $.map(self.$el.find('option'), function (o) { return {text: $(o).html(), id: o.value}; });\n        var $hidden = $('<input type=\"hidden\" />');\n        $hidden.val(vals.join(self.options.separator));\n        $hidden.attr('class', self.$el.attr('class'));\n        $hidden.attr('name', self.$el.attr('name'));\n        $hidden.attr('id', self.$el.attr('id'));\n        self.$orig = self.$el;\n        self.$el.replaceWith($hidden);\n        self.$el = $hidden;\n        self.options.data = options;\n      }\n\n      self.initializeValues();\n      self.initializeTags();\n      self.initializeOrdering();\n      self.initializeSelect2();\n    }\n  });\n\n  return Select2;\n\n});\n"}),define("js/ui/views/container",["jquery","underscore","backbone","js/ui/views/base"],function(e,t,n,r){var i=r.extend({id:"",items:[],itemContainer:null,isOffsetParent:!0,render:function(){return this.applyTemplate(),this.renderItems(),this.bindEvents(),this.isOffsetParent&&this.$el.addClass("ui-offset-parent"),this.trigger("render",this),this.afterRender(),this},renderItems:function(){var n;if(this.itemContainer!==null){n=e(this.itemContainer,this.$el);if(n.length===0)throw"Item Container element not found."}else n=this.$el;t.each(this.items,function(e){e.appendInContainer===!0?n.append(e.render().$el):e.render()},this)},bindEvents:function(){var e=this;t.each(this.items,function(t){t.on("all",function(){var t=[].slice,n=arguments[0],r,i=e.id!==""?e.id+"."+n:n;arguments.length>1&&(r=arguments[1]);if(i!==n){var s=t.call(arguments,0);s[0]=i,e.trigger.apply(e,s)}r!==undefined&&r.isUIView===!0&&r.propagateEvent(n)===!0&&e.trigger.apply(e,arguments)})})},get:function(e){return t.findWhere(this.items,{id:e})},add:function(e){if(e.id!==undefined&&this.get(e.id))throw"Another item with the same `id` already exists.";this.items.push(e)}});return i}),define("js/ui/views/toolbar",["underscore","backbone","js/ui/views/container"],function(e,t,n){var r=n.extend({tagName:"div",className:"navbar"});return r}),define("js/ui/views/buttongroup",["underscore","backbone","js/ui/views/container"],function(e,t,n){var r=n.extend({tagName:"div",className:"btn-group",disable:function(){e.each(this.items,function(e){e.trigger("disable")})},enable:function(){e.each(this.items,function(e){e.trigger("enable")})}});return r}),+function(e){var t=function(e,t){this.type=this.options=this.enabled=this.timeout=this.hoverState=this.$element=null,this.init("tooltip",e,t)};t.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1},t.prototype.init=function(t,n,r){this.enabled=!0,this.type=t,this.$element=e(n),this.options=this.getOptions(r);var i=this.options.trigger.split(" ");for(var s=i.length;s--;){var o=i[s];if(o=="click")this.$element.on("click."+this.type,this.options.selector,e.proxy(this.toggle,this));else if(o!="manual"){var u=o=="hover"?"mouseenter":"focusin",a=o=="hover"?"mouseleave":"focusout";this.$element.on(u+"."+this.type,this.options.selector,e.proxy(this.enter,this)),this.$element.on(a+"."+this.type,this.options.selector,e.proxy(this.leave,this))}}this.options.selector?this._options=e.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},t.prototype.getDefaults=function(){return t.DEFAULTS},t.prototype.getOptions=function(t){return t=e.extend({},this.getDefaults(),this.$element.data(),t),t.delay&&typeof t.delay=="number"&&(t.delay={show:t.delay,hide:t.delay}),t},t.prototype.getDelegateOptions=function(){var t={},n=this.getDefaults();return this._options&&e.each(this._options,function(e,r){n[e]!=r&&(t[e]=r)}),t},t.prototype.enter=function(t){var n=t instanceof this.constructor?t:e(t.currentTarget)[this.type](this.getDelegateOptions()).data("bs."+this.type);clearTimeout(n.timeout),n.hoverState="in";if(!n.options.delay||!n.options.delay.show)return n.show();n.timeout=setTimeout(function(){n.hoverState=="in"&&n.show()},n.options.delay.show)},t.prototype.leave=function(t){var n=t instanceof this.constructor?t:e(t.currentTarget)[this.type](this.getDelegateOptions()).data("bs."+this.type);clearTimeout(n.timeout),n.hoverState="out";if(!n.options.delay||!n.options.delay.hide)return n.hide();n.timeout=setTimeout(function(){n.hoverState=="out"&&n.hide()},n.options.delay.hide)},t.prototype.show=function(){var t=e.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){this.$element.trigger(t);if(t.isDefaultPrevented())return;var n=this,r=this.tip();this.setContent(),this.options.animation&&r.addClass("fade");var i=typeof this.options.placement=="function"?this.options.placement.call(this,r[0],this.$element[0]):this.options.placement,s=/\s?auto?\s?/i,o=s.test(i);o&&(i=i.replace(s,"")||"top"),r.detach().css({top:0,left:0,display:"block"}).addClass(i),this.options.container?r.appendTo(this.options.container):r.insertAfter(this.$element);var u=this.getPosition(),a=r[0].offsetWidth,f=r[0].offsetHeight;if(o){var l=this.$element.parent(),c=i,h=document.documentElement.scrollTop||document.body.scrollTop,p=this.options.container=="body"?window.innerWidth:l.outerWidth(),d=this.options.container=="body"?window.innerHeight:l.outerHeight(),v=this.options.container=="body"?0:l.offset().left;i=i=="bottom"&&u.top+u.height+f-h>d?"top":i=="top"&&u.top-h-f<0?"bottom":i=="right"&&u.right+a>p?"left":i=="left"&&u.left-a<v?"right":i,r.removeClass(c).addClass(i)}var m=this.getCalculatedOffset(i,u,a,f);this.applyPlacement(m,i),this.hoverState=null;var g=function(){n.$element.trigger("shown.bs."+n.type)};e.support.transition&&this.$tip.hasClass("fade")?r.one(e.support.transition.end,g).emulateTransitionEnd(150):g()}},t.prototype.applyPlacement=function(t,n){var r,i=this.tip(),s=i[0].offsetWidth,o=i[0].offsetHeight,u=parseInt(i.css("margin-top"),10),a=parseInt(i.css("margin-left"),10);isNaN(u)&&(u=0),isNaN(a)&&(a=0),t.top=t.top+u,t.left=t.left+a,e.offset.setOffset(i[0],e.extend({using:function(e){i.css({top:Math.round(e.top),left:Math.round(e.left)})}},t),0),i.addClass("in");var f=i[0].offsetWidth,l=i[0].offsetHeight;n=="top"&&l!=o&&(r=!0,t.top=t.top+o-l);if(/bottom|top/.test(n)){var c=0;t.left<0&&(c=t.left*-2,t.left=0,i.offset(t),f=i[0].offsetWidth,l=i[0].offsetHeight),this.replaceArrow(c-s+f,f,"left")}else this.replaceArrow(l-o,l,"top");r&&i.offset(t)},t.prototype.replaceArrow=function(e,t,n){this.arrow().css(n,e?50*(1-e/t)+"%":"")},t.prototype.setContent=function(){var e=this.tip(),t=this.getTitle();e.find(".tooltip-inner")[this.options.html?"html":"text"](t),e.removeClass("fade in top bottom left right")},t.prototype.hide=function(){function i(){t.hoverState!="in"&&n.detach(),t.$element.trigger("hidden.bs."+t.type)}var t=this,n=this.tip(),r=e.Event("hide.bs."+this.type);this.$element.trigger(r);if(r.isDefaultPrevented())return;return n.removeClass("in"),e.support.transition&&this.$tip.hasClass("fade")?n.one(e.support.transition.end,i).emulateTransitionEnd(150):i(),this.hoverState=null,this},t.prototype.fixTitle=function(){var e=this.$element;(e.attr("title")||typeof e.attr("data-original-title")!="string")&&e.attr("data-original-title",e.attr("title")||"").attr("title","")},t.prototype.hasContent=function(){return this.getTitle()},t.prototype.getPosition=function(){var t=this.$element[0];return e.extend({},typeof t.getBoundingClientRect=="function"?t.getBoundingClientRect():{width:t.offsetWidth,height:t.offsetHeight},this.$element.offset())},t.prototype.getCalculatedOffset=function(e,t,n,r){return e=="bottom"?{top:t.top+t.height,left:t.left+t.width/2-n/2}:e=="top"?{top:t.top-r,left:t.left+t.width/2-n/2}:e=="left"?{top:t.top+t.height/2-r/2,left:t.left-n}:{top:t.top+t.height/2-r/2,left:t.left+t.width}},t.prototype.getTitle=function(){var e,t=this.$element,n=this.options;return e=t.attr("data-original-title")||(typeof n.title=="function"?n.title.call(t[0]):n.title),e},t.prototype.tip=function(){return this.$tip=this.$tip||e(this.options.template)},t.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},t.prototype.validate=function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)},t.prototype.enable=function(){this.enabled=!0},t.prototype.disable=function(){this.enabled=!1},t.prototype.toggleEnabled=function(){this.enabled=!this.enabled},t.prototype.toggle=function(t){var n=t?e(t.currentTarget)[this.type](this.getDelegateOptions()).data("bs."+this.type):this;n.tip().hasClass("in")?n.leave(n):n.enter(n)},t.prototype.destroy=function(){clearTimeout(this.timeout),this.hide().$element.off("."+this.type).removeData("bs."+this.type)};var n=e.fn.tooltip;e.fn.tooltip=function(n){return this.each(function(){var r=e(this),i=r.data("bs.tooltip"),s=typeof n=="object"&&n;if(!i&&n=="destroy")return;i||r.data("bs.tooltip",i=new t(this,s)),typeof n=="string"&&i[n]()})},e.fn.tooltip.Constructor=t,e.fn.tooltip.noConflict=function(){return e.fn.tooltip=n,this}}(jQuery),define("bootstrap-tooltip",["jquery"],function(){}),define("js/ui/views/button",["jquery","backbone","underscore","js/ui/views/base","bootstrap-tooltip"],function(e,t,n,r){var i=r.extend({tagName:"a",className:"btn",eventPrefix:"button",context:"default",attributes:{href:"#"},tooltip:null,template:'<% if (icon) { %><span class="glyphicon glyphicon-<%= icon %>"></span><% } %> <%= title %>',events:{click:"handleClick"},initialize:function(e){if(!e.id){var t=e.title||"";e.id=t!==""?t.toLowerCase().replace(" ","-"):this.cid}r.prototype.initialize.apply(this,[e]),this.on("disable",function(){this.disable()},this),this.on("enable",function(){this.enable()},this),this.on("render",function(){this.context!==null&&this.$el.addClass("btn-"+this.context),this.tooltip!==null&&(this.$el.tooltip({title:this.tooltip}),this.$el.on("hidden",function(e){e.type==="hidden"&&e.stopPropagation()}))},this)},handleClick:function(e){e.preventDefault(),this.$el.is(".disabled")||this.uiEventTrigger("click",this,e)},serializedModel:function(){return n.extend({icon:"",title:""},this.options)},disable:function(){this.options.disabled=!0,this.$el.addClass("disabled")},enable:function(){this.options.disabled=!1,this.$el.removeClass("disabled")}});return i}),define("text!js/patterns/structure/templates/actionmenu.xml",[],function(){return'<a class="btn btn-default btn-xs dropdown-toggle" data-toggle="dropdown" href="#">\n  <span class="glyphicon glyphicon-cog"></i>\n  <span class="caret"></span>\n</a>\n<ul class="dropdown-menu">\n  <% if(header) { %>\n    <li class="dropdown-header"><%- header %></li>\n    <li class="divider"></li>\n  <% } %>\n  <li class="cutItem"><a href="#">Cut</a></li>\n  <li class="copyItem"><a href="#">Copy</a></li>\n  <% if(pasteAllowed && attributes.is_folderish){ %>\n    <li class="pasteItem"><a href="#">Paste</a></li>\n  <% } %>\n  <% if(!inQueryMode && canMove){ %>\n    <li class="move-top"><a href="#">Move to top of folder</a></li>\n    <li class="move-bottom"><a href="#">Move to bottom of folder</a></li>\n  <% } %>\n  <% if(!attributes.is_folderish && canSetDefaultPage){ %>\n    <li class="set-default-page"><a href="#">Set as default page</a></li>\n  <% } %>\n  <li class="openItem"><a href="#">Open</a></li>\n  <li class="editItem"><a href="#">Edit</a></li>\n</ul>\n\n'}),+function(e){function i(r){e(t).remove(),e(n).each(function(){var t=s(e(this)),n={relatedTarget:this};if(!t.hasClass("open"))return;t.trigger(r=e.Event("hide.bs.dropdown",n));if(r.isDefaultPrevented())return;t.removeClass("open").trigger("hidden.bs.dropdown",n)})}function s(t){var n=t.attr("data-target");n||(n=t.attr("href"),n=n&&/#[A-Za-z]/.test(n)&&n.replace(/.*(?=#[^\s]*$)/,""));var r=n&&e(n);return r&&r.length?r:t.parent()}var t=".dropdown-backdrop",n="[data-toggle=dropdown]",r=function(t){e(t).on("click.bs.dropdown",this.toggle)};r.prototype.toggle=function(t){var n=e(this);if(n.is(".disabled, :disabled"))return;var r=s(n),o=r.hasClass("open");i();if(!o){"ontouchstart"in document.documentElement&&!r.closest(".navbar-nav").length&&e('<div class="dropdown-backdrop"/>').insertAfter(e(this)).on("click",i);var u={relatedTarget:this};r.trigger(t=e.Event("show.bs.dropdown",u));if(t.isDefaultPrevented())return;r.toggleClass("open").trigger("shown.bs.dropdown",u),n.focus()}return!1},r.prototype.keydown=function(t){if(!/(38|40|27)/.test(t.keyCode))return;var r=e(this);t.preventDefault(),t.stopPropagation();if(r.is(".disabled, :disabled"))return;var i=s(r),o=i.hasClass("open");if(!o||o&&t.keyCode==27)return t.which==27&&i.find(n).focus(),r.click();var u=" li:not(.divider):visible a",a=i.find("[role=menu]"+u+", [role=listbox]"+u);if(!a.length)return;var f=a.index(a.filter(":focus"));t.keyCode==38&&f>0&&f--,t.keyCode==40&&f<a.length-1&&f++,~f||(f=0),a.eq(f).focus()};var o=e.fn.dropdown;e.fn.dropdown=function(t){return this.each(function(){var n=e(this),i=n.data("bs.dropdown");i||n.data("bs.dropdown",i=new r(this)),typeof t=="string"&&i[t].call(n)})},e.fn.dropdown.Constructor=r,e.fn.dropdown.noConflict=function(){return e.fn.dropdown=o,this},e(document).on("click.bs.dropdown.data-api",i).on("click.bs.dropdown.data-api",".dropdown form",function(e){e.stopPropagation()}).on("click.bs.dropdown.data-api",n,r.prototype.toggle).on("keydown.bs.dropdown.data-api",n+", [role=menu], [role=listbox]",r.prototype.keydown)}(jQuery),define("bootstrap-dropdown",["jquery"],function(){}),define("js/patterns/structure/views/actionmenu",["jquery","underscore","backbone","js/ui/views/base","mockup-utils","text!js/patterns/structure/templates/actionmenu.xml","bootstrap-dropdown"],function(e,t,n,r,i,s){var o=r.extend({className:"btn-group actionmenu",template:t.template(s),events:{"click .cutItem a":"cutClicked","click .copyItem a":"copyClicked","click .pasteItem a":"pasteClicked","click .move-top a":"moveTopClicked","click .move-bottom a":"moveBottomClicked","click .set-default-page a":"setDefaultPageClicked","click .openItem a":"openClicked","click .editItem a":"editClicked"},initialize:function(e){this.options=e,this.app=e.app,this.model=e.model,this.selectedCollection=this.app.selectedCollection,e.canMove===!1?this.canMove=!1:this.canMove=!0},cutClicked:function(e){e.preventDefault(),this.cutCopyClicked("cut"),this.app.collection.pager()},copyClicked:function(e){e.preventDefault(),this.cutCopyClicked("copy"),this.app.collection.pager()},cutCopyClicked:function(e){var t=this;t.app.pasteOperation=e,t.app.pasteSelection=new n.Collection,t.app.pasteSelection.add(this.model),t.app.setStatus(e+" 1 item"),t.app.pasteAllowed=!0,t.app.buttons.primary.get("paste").enable()},pasteClicked:function(e){e.preventDefault(),this.app.pasteEvent(this.app.buttons.primary.get("paste"),e,{folder:this.model.attributes.path}),this.app.collection.pager()},moveTopClicked:function(e){e.preventDefault(),this.app.moveItem(this.model.attributes.id,"top")},moveBottomClicked:function(e){e.preventDefault(),this.app.moveItem(this.model.attributes.id,"bottom")},setDefaultPageClicked:function(t){t.preventDefault();var n=this;e.ajax({url:n.app.getAjaxUrl(n.app.setDefaultPageUrl),type:"POST",data:{_authenticator:e('[name="_authenticator"]').val(),id:this.$active.attr("data-id")},success:function(e){n.app.ajaxSuccessResponse.apply(n.app,[e])},error:function(e){n.app.ajaxErrorResponse.apply(n.app,[e])}})},getSelectedBaseUrl:function(){var e=this;return e.model.attributes.getURL},getWindow:function(){var e=window;return e.parent!==window&&(e=e.parent),e},openUrl:function(e){var t=this,n=t.getWindow(),r=this.app.keyEvent;r&&r.ctrlKey?n.open(e):n.location=e},openClicked:function(e){e.preventDefault();var t=this;t.openUrl(t.getSelectedBaseUrl()+"/view")},editClicked:function(e){e.preventDefault();var t=this;t.openUrl(t.getSelectedBaseUrl()+"/edit")},render:function(){var e=this;e.$el.empty();var t=this.model.toJSON();return t.attributes=e.model.attributes,t.pasteAllowed=e.app.pasteAllowed,t.canSetDefaultPage=e.app.setDefaultPageUrl,t.inQueryMode=e.app.inQueryMode(),t.header=e.options.header,t.canMove=e.canMove,e.$el.html(e.template(t)),e.$dropdown=e.$(".dropdown-toggle"),e.$dropdown.dropdown(),e.options.className&&e.$el.addClass(e.options.className),this}});return o}),define("text!js/patterns/structure/templates/tablerow.xml",[],function(){return'<td class="selection"><input type="checkbox" <% if(selected){ %> checked="checked" <% } %>/></td>\n<td class="title">\n  <a href="<%- getURL %>">\n    <% if([\'File\', \'Image\'].indexOf(attributes.Type) !== -1){ %>\n      <span class="glyphicon glyphicon-file"></span>\n    <% } %>\n    <% if(attributes.is_folderish) { %>\n      <span class="glyphicon glyphicon-folder-open"></span>\n    <% } %>\n    <%- Title %>\n  </a>\n</td>\n<% _.each(activeColumns, function(column){ %>\n  <% if(_.has(availableColumns, column)) { %>\n    <td class="<%- column %>"><%- attributes[column] %></td>\n  <% } %>\n<% }); %>\n<td class="actionmenu-container">\n</td>\n'}),define("js/patterns/structure/views/tablerow",["jquery","underscore","backbone","js/patterns/structure/views/actionmenu","text!js/patterns/structure/templates/tablerow.xml"],function(e,t,n,r,i){var s=n.View.extend({tagName:"tr",className:"itemRow",template:t.template(i),events:{"change input":"itemSelected","click td.title a":"itemClicked"},initialize:function(e){this.options=e,this.app=e.app,this.selectedCollection=this.app.selectedCollection,this.table=this.options.table},render:function(){var t=this,n=this.model.toJSON();n.selected=!1,this.selectedCollection.findWhere({UID:n.UID})&&(n.selected=!0),n.attributes=t.model.attributes,n.activeColumns=t.app.activeColumns,n.availableColumns=t.app.availableColumns,t.$el.html(t.template(n));var i=t.model.attributes;return t.$el.addClass("state-"+i.review_state).addClass("type-"+i.Type),i.is_folderish&&t.$el.addClass("folder"),t.$el.attr("data-path",n.path),t.$el.attr("data-UID",n.UID),t.$el.attr("data-id",n.id),t.$el.attr("data-type",n.Type),t.$el.attr("data-folderish",n.is_folderish),t.el.model=this.model,t.menu=new r({app:t.app,model:t.model}),e(".actionmenu-container",t.$el).append(t.menu.render().el),this},itemClicked:function(e){e.preventDefault();var t=this.app.keyEvent;if(t&&t.ctrlKey)this.menu.openClicked(e);else if(this.model.attributes.is_folderish){this.app.queryHelper.currentPath=this.model.attributes.path;var n=this.app.collection;n.goTo(n.information.firstPage)}else this.menu.openClicked(e)},itemSelected:function(){var t=this.$("input")[0];t.checked?this.app.selectedCollection.add(this.model):this.app.selectedCollection.removeResult(this.model);var n=this.selectedCollection,r=this.app.keyEvent;if(r&&r.shiftKey&&this.app.last_selected&&this.app.last_selected.parentNode!==null){var i=e(this.app.last_selected),s=i.index(),o=this.$el.index();this.app.tableView.$('input[type="checkbox"]').each(function(){i=e(this);var r=i.parents("tr").index();if(r>s&&r<o||r<s&&r>o){this.checked=t.checked;var u=e(this).closest("tr")[0].model,a=n.getByUID(u.attributes.UID);this.checked?a||n.add(u):a&&n.remove(a)}})}this.app.last_selected=this.el}});return s}),define("text!js/patterns/structure/templates/table.xml",[],function(){return'<div class="alert alert-<%= statusType %> status">\n    <%= status %>\n</div>\n<table class="table table-striped table-bordered">\n  <thead>\n    <tr class="breadcrumbs-container">\n      <td colspan="<%= activeColumns.length + 3 %>">\n        <% if(pathParts.length > 0) { %>\n          <div class="input-group context-buttons" style="display:none">\n            <span class="input-group-addon">\n              <input type="checkbox" />\n            </span>\n            <div class="input-group-btn">\n            </div>\n          </div>\n        <% } %>\n        <div class="breadcrumbs">\n          <a href="#" data-path="/">\n            <span class="glyphicon glyphicon-home"></span> /\n          </a>\n          <% _.each(pathParts, function(part, idx, list){\n            if(part){\n              if(idx > 0){ %>\n                /\n              <% } %>\n              <a href="#" class="crumb" data-path="<%- part %>"><%- part %></a>\n            <% }\n          }); %>\n        </div>\n      </td>\n    </tr>\n    <tr>\n      <th><input type="checkbox" class="select-all" /></th>\n      <th>Title</th>\n      <% _.each(activeColumns, function(column){ %>\n        <% if(_.has(availableColumns, column)) { %>\n          <th><%- availableColumns[column] %></th>\n        <% } %>\n      <% }); %>\n      <th>Actions</th>\n    </tr>\n  </thead>\n  <tbody>\n  </tbody>\n</table>\n'}),define("js/patterns/structure/models/result",["backbone"],function(e){var t=e.Model.extend({defaults:function(){return{is_folderish:!1,review_state:""}},uid:function(){return this.attributes.UID}});return t}),define("js/patterns/structure/views/table",["jquery","underscore","backbone","js/patterns/structure/views/tablerow","text!js/patterns/structure/templates/table.xml","js/ui/views/base","mockup-patterns-sortable","mockup-patterns-moment","js/patterns/structure/models/result","js/patterns/structure/views/actionmenu"],function(e,t,n,r,i,s,o,u,a,f){var l=s.extend({tagName:"div",template:t.template(i),initialize:function(e){var t=this;s.prototype.initialize.apply(t,[e]),t.collection=t.app.collection,t.selectedCollection=t.app.selectedCollection,t.listenTo(t.collection,"sync",t.render),t.listenTo(t.selectedCollection,"remove",t.render),t.listenTo(t.selectedCollection,"reset",t.render),t.collection.pager(),t.subsetIds=[],t.contextInfo=t.folderModel=t.folderMenu=null,t.app.on("context-info-loaded",function(e){t.contextInfo=e,t.setContextInfo()})},events:{"click .breadcrumbs a":"breadcrumbClicked","change .select-all":"selectAll",'change .breadcrumbs-container input[type="checkbox"]':"selectFolder"},setContextInfo:function(){var n=this,r=n.contextInfo,i=n.$('[data-id="'+r.defaultPage+'"]');i.length>0&&(i.find("td.title").prepend("<span>*</span> "),i.addClass("default-page"));var s=r.breadcrumbs;if(s&&s.length){var o=n.$(".breadcrumbs a.crumb");t.each(s,function(e,t){o.eq(t).html(e.title)})}r.object?(n.folderModel=new a(r.object),e(".context-buttons",n.$el).show(),n.selectedCollection.findWhere({UID:r.object.UID})&&(e('input[type="checkbox"]',n.$breadcrumbs)[0].checked=!0),n.folderMenu=new f({app:n.app,model:n.folderModel,header:"Actions on current folder",canMove:!1}),e(".input-group-btn",n.$breadcrumbs).empty().append(n.folderMenu.render().el)):n.folderModel=null},render:function(){var n=this;n.$el.html(n.template({pathParts:t.filter(n.app.queryHelper.getCurrentPath().split("/").slice(1),function(e){return e.length>0}),status:n.app.status,statusType:n.app.statusType,activeColumns:n.app.activeColumns,availableColumns:n.app.availableColumns})),n.$breadcrumbs=e(".breadcrumbs-container",n.$el);if(n.collection.length){var i=n.$("tbody");n.collection.each(function(e){var t=(new r({model:e,app:n.app,table:n})).render();i.append(t.el)})}return n.moment=new u(n.$el,{selector:".ModificationDate,.EffectiveDate,.CreationDate",format:"relative"}),n.addReordering(),n.storeOrder(),this},breadcrumbClicked:function(t){t.preventDefault();var n=e(t.target);n[0].tagName!=="A"&&(n=n.parent("a"));var r="";e(n.prevAll("a").get().reverse()).each(function(){var t=e(this).attr("data-path");r+=t,t!=="/"&&(r+="/")}),r+=n.attr("data-path"),this.app.queryHelper.currentPath=r,this.collection.pager()},selectFolder:function(t){var n=this;n.folderModel&&(e(t.target).is(":checked")?n.selectedCollection.add(n.folderModel):this.selectedCollection.removeByUID(n.folderModel.attributes.UID),n.setContextInfo())},selectAll:function(t){e(t.target).is(":checked")?e('input[type="checkbox"]',this.$("tbody")).attr("checked","checked").change():this.selectedCollection.remove(this.collection.models),this.setContextInfo()},toggleSelectAll:function(t){var n=e(t.target);n.is(":checked")||this.$(".select-all").removeAttr("checked")},addReordering:function(){var e=this;if(e.app.inQueryMode()){e.app.setStatus("Can not order items while querying"),e.$el.removeClass("order-support");return}e.$el.addClass("order-support");var t=new o(e.$("tbody"),{selector:"tr",dragClass:"structure-dragging",drop:function(t,n){n!==0&&(e.app.moveItem(t.attr("data-id"),n,e.subsetIds),e.storeOrder())}})},storeOrder:function(){var t=this,n=[];t.$("tbody tr.itemRow").each(function(t){n.push(e(this).attr("data-id"))}),t.subsetIds=n}});return l}),define("text!js/ui/templates/popover.xml",[],function(){return'<div class="arrow"></div>\n<div class="popover-title">\n</div>\n<div class="items popover-content">\n</div>\n\n'}),define("js/ui/views/popover",["jquery","underscore","backbone","js/ui/views/container","mockup-patterns-backdrop","text!js/ui/templates/popover.xml"],function(e,t,n,r,i,s){var o=r.extend({tagName:"div",className:"popover",eventPrefix:"popover",template:s,content:null,title:null,triggerView:null,triggerEvents:{"button:click":"toggle"},placement:"bottom",events:{},opened:!1,closeOnOutClick:!0,appendInContainer:!0,backdrop:undefined,$backdrop:null,useBackdrop:!0,backdropOptions:{zIndex:"1009",opacity:"0.4",className:"backdrop backdrop-popover",classActiveName:"backdrop-active",closeOnEsc:!1,closeOnClick:!0},initialize:function(e){r.prototype.initialize.apply(this,[e]),this.on("render",function(){this.bindTriggerEvents(),this.renderTitle(),this.renderContent()},this)},afterRender:function(){},renderTitle:function(){this.$(".popover-title").append(this.title(this.options))},renderContent:function(){this.$(".popover-content").append(this.content(this.options))},bindTriggerEvents:function(){this.triggerView&&t.each(this.triggerEvents,function(t,n){var r=this[t];r||e.error("Function not found."),this.stopListening(this.triggerView,n),this.listenTo(this.triggerView,n,r)},this)},getPosition:function(){var t=this.triggerView.$el;return e.extend({},{width:t[0].offsetWidth,height:t[0].offsetHeight},t.offset())},show:function(){var e=this.getPosition(),t=this.$el,n,r,i,s;r=this.placement,t.css({top:0,left:0}).addClass("active"),i=t[0].offsetWidth,s=t[0].offsetHeight;switch(r){case"bottom":n={top:e.top+e.height,left:e.left+e.width/2-i/2};break;case"top":n={top:e.top-s,left:e.left+e.width/2-i/2};break;case"left":n={top:e.top+e.height/2-s/2,left:e.left-i};break;case"right":n={top:e.top+e.height/2-s/2,left:e.left+e.width}}this.applyPlacement(n,r),this.setBackdrop(),this.useBackdrop===!0&&this.backdrop.show(),this.opened=!0,this.triggerView&&this.triggerView.$el.addClass("active"),this.uiEventTrigger("show",this)},applyPlacement:function(e,t){var n=this.$el,r=this.$el,i=r[0].offsetWidth,s=r[0].offsetHeight,o,u,a,f;n.removeClass(t),n.offset(e).addClass(t).addClass("active"),o=r[0].offsetWidth,u=r[0].offsetHeight,t==="top"&&u!==s&&(e.top=e.top+s-u,f=!0),t==="bottom"||t==="top"?(a=0,e.left<0&&(a=e.left*-2,e.left=0,n.removeClass(t),n.offset(e).addClass(t),o=r[0].offsetWidth,u=r[0].offsetHeight),this.positionArrow(a-i+o,o,"left")):this.positionArrow(u-s,u,"top"),f&&n.offset(e)},positionArrow:function(e,t,n){var r=this.$(".arrow");r.css(n,e?50*(1-e/t)+"%":"")},hide:function(){this.opened=!1,this.$el.removeClass("active"),this.triggerView&&this.triggerView.$el.removeClass("active"),this.uiEventTrigger("hide",this)},toggle:function(e,t){this.opened?this.hide():this.show()},setBackdrop:function(){if(this.useBackdrop===!0&&this.backdrop===undefined){var t=this;this.$backdrop=this.$el.closest(".ui-backdrop-element"),this.$backdrop.length===0&&(this.$backdrop=e("body")),this.backdrop=new i(this.$backdrop,this.backdropOptions),this.backdrop.$el.on("hidden.backdrop.patterns",function(e){e.namespace==="backdrop.patterns"&&(e.stopPropagation(),t.opened===!0&&t.hide())}),this.on("popover:hide",function(){this.backdrop.hide()},this)}}});return o}),define("text!js/patterns/structure/templates/selection_item.xml",[],function(){return'<span class="selected-item">\r  <a href="#" data-uid="<%= UID %>" title="remove" class="remove">\r    <span class="glyphicon glyphicon-remove-circle"></span>\r  </a>\r  <%= Title %>\r</span>\r'}),define("js/patterns/structure/views/selectionwell",["jquery","underscore","backbone","js/ui/views/popover","text!js/patterns/structure/templates/selection_item.xml"],function(e,t,n,r,i){var s=r.extend({className:"popover selected",title:t.template('<input type="text" class="filter" placeholder="Filter" /><a href="#" class=" remove-all"><span class="glyphicon glyphicon-remove-circle"></span> remove all</a>'),content:t.template("<% collection.each(function(item) { %><%= item_template(item.toJSON()) %><% }); %>"),events:{"click a.remove":"itemRemoved","keyup input.filter":"filterSelected","click .remove-all":"removeAll"},initialize:function(e){r.prototype.initialize.apply(this,[e]),this.listenTo(this.collection,"reset all add remove",this.render),this.options.item_template=t.template(i)},render:function(){return r.prototype.render.call(this),this.collection.length===0&&this.$el.removeClass("active"),this},itemRemoved:function(t){t.preventDefault();var n=e(t.currentTarget).data("uid");this.collection.removeByUID(n),this.collection.length!==0&&this.show()},filterSelected:function(t){var n=e(t.target).val().toLowerCase();e(".selected-item",this.$el).each(function(){var t=e(this);t.text().toLowerCase().indexOf(n)===-1?t.hide():t.show()})},removeAll:function(e){e.preventDefault(),this.collection.reset(),this.hide()}});return s}),define("js/patterns/structure/views/tags",["jquery","underscore","backbone","js/ui/views/popover","mockup-patterns-select2"],function(e,t,n,r,i){var s=r.extend({title:t.template("Add/Remove tags"),content:t.template('<label>Tags to remove</label><div class="form-group"><select multiple class="toremove" style="width: 300px"></select></div><label>Tags to add</label><div class="form-group"><input class="toadd" style="width:300px" /></div><button class="btn btn-block btn-primary">Apply</button>'),events:{"click button":"applyButtonClicked"},initialize:function(e){this.app=e.app,this.removeSelect2=null,this.addSelect2=null,r.prototype.initialize.apply(this,[e])},render:function(){return r.prototype.render.call(this),this.$remove=this.$(".toremove"),this.$add=this.$(".toadd"),this.$remove.select2(),this.addSelect2=new i(this.$add,{multiple:!0,vocabularyUrl:this.app.options.tagsVocabularyUrl}),this},getSelect2Values:function(e){var n=[];return t.each(e.select2("data"),function(e){n.push(e.id)}),n},applyButtonClicked:function(e){this.app.defaultButtonClickEvent(this.triggerView,{remove:JSON.stringify(this.getSelect2Values(this.$remove)),add:JSON.stringify(this.getSelect2Values(this.$add))}),this.hide()},toggle:function(e,n){r.prototype.toggle.apply(this,[e,n]);var i=this;if(!this.opened)return;i.$remove.select2("destroy"),i.$remove.empty(),i.$add.select2("data",[]),i.app.selectedCollection.each(function(e){if(!e.attributes.Subject)return;t.each(e.attributes.Subject,function(e){i.$remove.find('[value="'+e+'"]').length===0&&i.$remove.append('<option value="'+e+'">'+e+"</option>")})}),i.$remove.select2()}});return s}),define("js/patterns/structure/views/properties",["jquery","underscore","backbone","js/ui/views/popover","mockup-patterns-pickadate","mockup-patterns-select2"],function(e,t,n,r,i,s){var o=r.extend({className:"popover properties",title:t.template("Modify properties on items"),content:t.template('<div class="form-group"><label>Publication Date</label><input class="form-control" name="effective" /></div><div class="form-group"><label>Expiration Date</label><input class="form-control" name="expiration" /></div><div class="form-group"><label>Copyright</label><textarea class="form-control" name="copyright"></textarea></div><label>Creators</label><div class="form-group"><input name="creators" style="width: 300px" /></div><label>Contributors</label><div class="form-group"><input name="contributors" style="width: 300px" /></div><label>Exclude from nav</label><div class="radio"><label><input type="radio" name="exclude-from-nav" value="yes" />Yes</label></div><div class="radio"><label><input type="radio" name="exclude-from-nav" value="no" />No</label></div><button class="btn btn-block btn-primary">Apply</button>'),events:{"click button":"applyButtonClicked"},initialize:function(e){this.app=e.app,r.prototype.initialize.apply(this,[e])},render:function(){return r.prototype.render.call(this),this.$effective=this.$('[name="effective"]'),this.$expiration=this.$('[name="expiration"]'),this.$copyright=this.$('[name="copyright"]'),this.$creators=this.$('[name="creators"]'),this.$contributors=this.$('[name="contributors"]'),this.$exclude=this.$('[name="exclude-from-nav"]'),this.creatorsSelect2=new s(this.$creators,{multiple:!0,vocabularyUrl:this.app.options.usersVocabularyUrl}),this.contributorsSelect2=new s(this.$contributors,{multiple:!0,vocabularyUrl:this.app.options.usersVocabularyUrl}),this.effectivePickADate=new i(this.$effective),this.expirationPickADate=new i(this.$expiration),this},applyButtonClicked:function(e){var t={effectiveDate:this.effectivePickADate.$date.attr("value"),effectiveTime:this.effectivePickADate.$time.attr("value"),expirationDate:this.expirationPickADate.$date.attr("value"),expirationTime:this.expirationPickADate.$time.attr("value"),copyright:this.$copyright.val(),contributors:JSON.stringify(this.$contributors.select2("data")),creators:JSON.stringify(this.$creators.select2("data"))};this.$('[name="exclude-from-nav"]:checked').length>0&&(t.exclude_from_nav=this.$('[name="exclude-from-nav"]:checked').val()),this.app.defaultButtonClickEvent(this.triggerView,t),this.hide()},toggle:function(e,t){r.prototype.toggle.apply(this,[e,t]);var n=this;if(!this.opened)return;this.$effective.attr("value",""),this.$expiration.attr("value",""),this.$copyright.html(""),this.$creators.select2("data",[]),this.$contributors.select2("data",[]),this.$exclude.each(function(){this.checked=!1})}});return o}),define("js/patterns/structure/views/workflow",["jquery","underscore","backbone","js/ui/views/popover"],function(e,t,n,r){var i=r.extend({className:"popover workflow",title:t.template("Modify dates on items"),content:t.template('<form><fieldset><div class="form-group"><label>Comments</label><textarea class="form-control" rows="4"></textarea><p class="help-block">Select the transition to be used for modifying the items state.</p></div><div class="form-group"><label>Change State</label><p class="help-block">Select the transition to be used for modifying the items state.</p><select class="form-control" name="transition"></select></div><div class="checkbox"><label><input type="checkbox" name="recurse" />Include contained items?</label><p class="help-block">If checked, this will attempt to modify the status of all content in any selected folders and their subfolders.</p></div></fieldset></form><button class="btn btn-block btn-primary">Apply</button>'),events:{"click button":"applyButtonClicked"},initialize:function(e){this.app=e.app,r.prototype.initialize.apply(this,[e])},render:function(){return r.prototype.render.call(this),this.$comments=this.$("textarea"),this.$transition=this.$("select"),this},applyButtonClicked:function(e){var t={comments:this.$comments.val(),transition:this.$transition.val()};this.$('[name="recurse"]')[0].checked&&(t.recurse="yes"),this.app.defaultButtonClickEvent(this.triggerView,t),this.hide()},toggle:function(n,i){r.prototype.toggle.apply(this,[n,i]);var s=this;if(!s.opened)return;s.$comments.val(""),s.$transition.empty(),e.ajax({url:s.triggerView.url,type:"GET",data:{selection:JSON.stringify(s.app.getSelectedUids()),transitions:!0},success:function(e){t.each(e.transitions,function(e){s.$transition.append('<option value="'+e.id+'">'+e.title+"</option>")})},error:function(e){window.alert("error getting transition data")}})}});return i}),define("js/patterns/structure/views/delete",["jquery","underscore","backbone","js/ui/views/popover"],function(e,t,n,r){var i=r.extend({className:"popover delete",title:t.template("Delete selected items"),content:t.template('<label>Are you certain you want to delete the selected items</label><button class="btn btn-block btn-danger">Yes</button>'),events:{"click button":"applyButtonClicked"},initialize:function(e){this.app=e.app,r.prototype.initialize.apply(this,[e])},render:function(){return r.prototype.render.call(this),this},applyButtonClicked:function(e){var t=this;this.app.defaultButtonClickEvent(this.triggerView,{},function(e){t.app.selectedCollection.reset()}),this.hide()}});return i}),define("js/patterns/structure/views/rename",["jquery","underscore","backbone","js/ui/views/popover"],function(e,t,n,r){var i=r.extend({className:"popover rename",title:t.template("Rename items"),content:t.template('<div class="itemstoremove"></div><button class="btn btn-block btn-primary">Apply</button>'),itemTemplate:t.template('<div class="item"><div class="form-group"><input name="UID" type="hidden" value="<%- UID %>" /><label>Title</label><input class="form-control" name="newtitle" value="<%= Title %>" /><label>Short name</label><input class="form-control" name="newid" value="<%= id %>" /></div></div>'),events:{"click button":"applyButtonClicked"},initialize:function(e){this.app=e.app,r.prototype.initialize.apply(this,[e])},render:function(){return r.prototype.render.call(this),this.$items=this.$(".itemstoremove"),this},applyButtonClicked:function(t){var n=[];this.$items.find(".item").each(function(){var t=e(this);n.push({UID:t.find('[name="UID"]').val(),newid:t.find('[name="newid"]').val(),newtitle:t.find('[name="newtitle"]').val()})});var r=this;this.app.defaultButtonClickEvent(this.triggerView,{torename:JSON.stringify(n)}),this.hide()},toggle:function(e,t){r.prototype.toggle.apply(this,[e,t]);var n=this;if(!n.opened)return;n.$items.empty(),n.app.selectedCollection.each(function(e){n.$items.append(n.itemTemplate(e.toJSON()))})}});return i}),define("js/patterns/structure/views/rearrange",["jquery","underscore","js/ui/views/popover"],function(e,t,n){var r=n.extend({className:"popover rearrange",title:t.template("Rearrange items in this folder"),content:t.template('<div class="form-group"><label>What to rearrange on</label><select name="rearrange_on" class="form-control"><% _.each(rearrangeProperties, function(title, property) { %><option value="<%- property %>"><%- title %></option><% }); %></select><p class="help-block">This permanently changes the order of items in this folder.This operation may take a long time depending on the size of the folder.</p></div><div class="checkbox"><label>Reverse <input type="checkbox" name="reversed" /></label></div><button class="btn btn-block btn-primary">Rearrange</button>'),events:{"click button":"rearrangeButtonClicked"},initialize:function(e){this.app=e.app,n.prototype.initialize.apply(this,[e]),this.options.rearrangeProperties=this.app.options.rearrange.properties},render:function(){return n.prototype.render.call(this),this.$rearrangeOn=this.$('[name="rearrange_on"]'),this.$reversed=this.$('[name="reversed"]'),this},rearrangeButtonClicked:function(){var e={rearrange_on:this.$rearrangeOn.val(),reversed:!1};this.$reversed[0].checked&&(e.reversed=!0),this.app.defaultButtonClickEvent(this.triggerView,e),this.hide()}});return r}),define("text!js/patterns/structure/templates/selection_button.xml",[],function(){return'<%= title %> \r<span class="label<% if (length > 0) { %> label-success<% } else { %> label-default<% } %>">\r  <%= length %>\r</span>\r'}),define("js/patterns/structure/views/selectionbutton",["jquery","backbone","underscore","js/ui/views/button","text!js/patterns/structure/templates/selection_button.xml"],function(e,t,n,r,i){var s=r.extend({collection:null,template:i,initialize:function(e){r.prototype.initialize.apply(this,[e]),this.collection!==null&&this.collection.on("add remove reset",function(){this.render(),this.collection.length===0&&this.$el.removeClass("active")},this)},serializedModel:function(){var e={icon:"",title:this.options.title,length:0};return this.collection!==null&&(e.length=this.collection.length),e}});return s}),define("text!js/patterns/structure/templates/paging.xml",[],function(){return'  <ul class="pagination pagination-sm pagination-centered">\n    <li class="<% if (currentPage === 1) { %>disabled<% } %>">\n      <a href="#" class="serverfirst">\n        &laquo;\n      </a>\n    </li>\n    <li class="<% if (currentPage === 1) { %>disabled<% } %>">\n      <a href="#" class="serverprevious">\n        &lt;\n      </a>\n    </li>\n    <% _.each(pages, function(p){ %>\n    <li class="<% if (currentPage == p) { %>active<% } %>">\n      <a href="#" class="page"><%= p %></a>\n    </li>\n    <% }); %>\n    <li class="<% if (currentPage === lastPage) { %>disabled<% } %>">\n      <a href="#" class="servernext">\n        &gt;\n      </a>\n    </li>\n    <li class="<% if (currentPage === lastPage) { %>disabled<% } %>">\n      <a href="#" class="serverlast">\n        &raquo;\n      </a>\n    </li>\n  </ul>\n\n  <ul class="pagination pagination-sm">\n    <li class="disabled"><a href="#">Show:</a></li>\n    <li class="serverhowmany serverhowmany15 <% if(perPage == 15){ %>disabled<% } %>">\n      <a href="#" class="">15</a>\n    </li>\n    <li class="serverhowmany serverhowmany30 <% if(perPage == 30){ %>disabled<% } %>">\n      <a href="#" class="">30</a>\n    </li>\n    <li class="serverhowmany serverhowmany50 <% if(perPage == 50){ %>disabled<% } %>">\n      <a href="#" class="">50</a>\n    </li>\n  </ul>\n\n  <ul class="pagination pagination-sm">\n    <li class="disabled">\n      <a href="#">\n        Page: <span class="current"><%= currentPage %></span>\n        of\n        <span class="total"><%= totalPages %></span>\n              shown\n      </a>\n    </li>\n  </ul>\n'}),define("js/patterns/structure/views/paging",["jquery","underscore","backbone","text!js/patterns/structure/templates/paging.xml"],function(e,t,n,r){var i=n.View.extend({events:{"click a.servernext":"nextResultPage","click a.serverprevious":"previousResultPage","click a.serverlast":"gotoLast","click a.page":"gotoPage","click a.serverfirst":"gotoFirst","click a.serverpage":"gotoPage","click .serverhowmany a":"changeCount"},tagName:"aside",template:t.template(r),maxPages:7,initialize:function(e){this.options=e,this.app=this.options.app,this.collection=this.app.collection,this.collection.on("reset",this.render,this),this.collection.on("sync",this.render,this),this.$el.appendTo("#pagination")},render:function(){var e=this.collection.info();e.pages=this.getPages(e);var t=this.template(e);return this.$el.html(t),this},getPages:function(e){var t=e.perPage,n=e.totalPages;if(!n)return[];var r=e.currentPage,i=1,s=n;n>this.maxPages&&(i=Math.max(1,Math.floor(r-this.maxPages/2)),s=Math.min(i+this.maxPages,n),s-i<this.maxPages&&(i-=Math.floor(this.maxPages/2)));var o=[];for(var u=i;u<=s;u+=1)o.push(u);return o[0]>1&&(o[0]>2&&(o=["..."].concat(o)),o=[1].concat(o)),o[o.length-1]<n-1&&(o[o.length-2]<n-2&&o.push("..."),o.push(n)),o},nextResultPage:function(e){e.preventDefault(),this.collection.requestNextPage()},previousResultPage:function(e){e.preventDefault(),this.collection.requestPreviousPage()},gotoFirst:function(e){e.preventDefault(),this.collection.goTo(this.collection.information.firstPage)},gotoLast:function(e){e.preventDefault(),this.collection.goTo(this.collection.information.totalPages)},gotoPage:function(t){t.preventDefault();var n=e(t.target).text();this.collection.goTo(n)},changeCount:function(t){t.preventDefault();var n=e(t.target).text();this.collection.howManyPer(n)}});return i}),define("js/patterns/structure/views/addmenu",["jquery","underscore","backbone","js/ui/views/buttongroup","js/ui/views/button","mockup-patterns-modal","mockup-utils","bootstrap-dropdown"],function(e,t,n,r,i,s,o){var u=r.extend({title:"Add",className:"btn-group addnew",events:{},initialize:function(n){var s=this;r.prototype.initialize.apply(s,[n]),s.app.on("context-info-loaded",function(n){s.$items.empty(),t.each(n.addButtons,function(t){var n=new i({id:t.id,title:t.title,url:t.action});n.render();var r=e("<li/>");n.$el.removeClass("btn"),r.append(n.el),s.$items.append(r),n.$el.click(function(e){return s.buttonClicked.apply(s,[e,n]),!1})})})},buttonClicked:function(t,n){var r=this;t.preventDefault(),r.app.loading.show(),e.ajax({url:n.url,type:"POST",data:{_authenticator:e('[name="_authenticator"]').val()},success:function(e){r.app.loading.hide();var t=new s(r.$el,{html:o.parseBodyTag(e),content:"#content",width:"80%",backdropOptions:{closeOnClick:!1},automaticallyAddButtonActions:!1,actionOptions:{displayInModal:!1,reloadWindowOnClose:!1},actions:{'input#form-buttons-save, .formControls input[name="form.button.save"]':{onSuccess:function(e,t,n,i,s){r.app.collection.pager(),r.$items.is(":visible")&&r.$dropdown.dropdown("toggle"),e.hide()},onError:function(){alert("error on form")}},'input#form-buttons-cancel, .formControls input[name="form.button.cancel"]':{modalFunction:"hide"}}});t.show()},error:function(){r.app.loading.hide()}})},render:function(){var e=this;return e.$el.empty(),e.$el.append('<a class="btn dropdown-toggle btn-success" data-toggle="dropdown" href="#">'+e.title+'<span class="caret"></span>'+"</a>"+'<ul class="dropdown-menu">'+"</ul>"+"</div>"),e.$items=e.$(".dropdown-menu"),e.$dropdown=e.$(".dropdown-toggle"),e.$dropdown.dropdown(),this}});return u}),define("js/patterns/structure/views/columns",["jquery","underscore","backbone","js/ui/views/popover","mockup-patterns-sortable"],function(e,t,n,r,i){var s=r.extend({className:"popover columns",title:t.template("Columns"),content:t.template('<label>Select columns to show, drag and drop to reorder</label><ul></ul><button class="btn btn-block btn-success">Save</button>'),itemTemplate:t.template('<li><label><input type="checkbox" value="<%- id %>"/><%- title %></label></li>'),events:{"click button":"applyButtonClicked"},initialize:function(e){this.app=e.app,r.prototype.initialize.apply(this,[e])},afterRender:function(){var n=this;n.$container=n.$("ul"),t.each(n.app.activeColumns,function(t){var r=e(n.itemTemplate({title:n.app.availableColumns[t],id:t}));r.find("input")[0].checked=!0,n.$container.append(r)}),t.each(t.omit(n.app.availableColumns,n.app.activeColumns),function(t,r){var i=e(n.itemTemplate({title:t,id:r}));n.$container.append(i)});var r=new i(n.$container,{selector:"li"});return this},applyButtonClicked:function(){var t=this;this.hide(),t.app.activeColumns=[],t.$("input:checked").each(function(){t.app.activeColumns.push(e(this).val())}),t.app.setCookieSetting("activeColumns",this.app.activeColumns),t.app.tableView.render()}});return s}),define("js/patterns/structure/views/textfilter",["jquery","backbone","underscore","js/ui/views/base","js/ui/views/button","js/ui/views/popover","mockup-patterns-querystring"],function(e,t,n,r,i,s,o){var u=r.extend({tagName:"div",className:"navbar-search form-search ui-offset-parent",template:n.template('<div class="input-group"><input type="text" class="form-control search-query" placeholder="Filter"><span class="input-group-btn"></span></div>'),popoverContent:n.template('<input class="pat-querystring" />'),events:{"keyup .search-query":"filter"},term:null,timeoutId:null,keyupDelay:300,initialize:function(e){r.prototype.initialize.apply(this,[e]),this.app=this.options.app},render:function(){this.$el.html(this.template({})),this.button=new i({title:"Query"}),this.popover=new s({triggerView:this.button,title:n.template("Query"),content:this.popoverContent,placement:"left"}),this.$(".input-group-btn").append(this.button.render().el),this.$el.append(this.popover.render().el),this.popover.$el.addClass("query"),this.$queryString=this.popover.$("input.pat-querystring"),this.queryString=new o(this.$queryString,{indexOptionsUrl:this.app.options.indexOptionsUrl,showPreviews:!1});var t=this;return t.queryString.$el.on("change",function(){t.timeoutId&&clearTimeout(t.timeoutId),t.timeoutId=setTimeout(function(){var n=e.parseJSON(t.$queryString.val());t.app.additionalCriterias=n,t.app.collection.pager()},this.keyupDelay)}),t.queryString.$el.on("initialized",function(){t.queryString.$sortOn.on("change",function(){t.app.sort_on=t.queryString.$sortOn.val(),t.app.collection.pager()}),t.queryString.$sortOrder.change(function(){t.queryString.$sortOrder[0].checked?t.app.sort_order="reverse":t.app.sort_order="ascending",t.app.collection.pager()})}),this},filter:function(t){var n=this;n.timeoutId&&clearTimeout(n.timeoutId),n.timeoutId=setTimeout(function(){n.term=e(t.currentTarget).val(),n.app.collection.pager()},this.keyupDelay)}});return u}),Backbone.Paginator=function(e,t,n){var r=t.map(e.VERSION.split("."),function(e){return parseInt(e,10)}),i={};i.version="<%= pkg.version %>",i.clientPager=e.Collection.extend({useDiacriticsPlugin:!0,useLevenshteinPlugin:!0,sortColumn:"",sortDirection:"desc",lastSortColumn:"",fieldFilterRules:[],lastFieldFilterRules:[],filterFields:"",filterExpression:"",lastFilterExpression:"",defaults_ui:{firstPage:0,currentPage:1,perPage:5,totalPages:10,pagesInRange:4},initialize:function(){this.on("add",this.addModel,this),this.on("remove",this.removeModel,this),this.setDefaults()},setDefaults:function(){var e=t.defaults(this.paginator_ui,this.defaults_ui);t.defaults(this,e)},addModel:function(e){this.origModels.push(e)},removeModel:function(e){var n=t.indexOf(this.origModels,e);this.origModels.splice(n,1)},sync:function(i,s,o){var u=this;this.setDefaults();var a={};t.each(t.result(u,"server_api"),function(e,n){t.isFunction(e)&&(e=t.bind(e,u),e=e()),a[n]=e});var f=t.clone(u.paginator_core);t.each(f,function(e,n){t.isFunction(e)&&(e=t.bind(e,u),e=e()),f[n]=e}),f=t.defaults(f,{timeout:25e3,cache:!1,type:"GET",dataType:"jsonp"}),f=t.extend(f,{data:decodeURIComponent(n.param(a)),processData:!1,url:t.result(f,"url")},o);var l=r[0]!==0||r[1]!==9||r[2]!==10,c=f.success;f.success=function(e,t,n){c&&(l?c(e,t,n):c(s,e,f)),s&&s.trigger&&s.trigger("sync",s,e,f)};var h=f.error;f.error=function(e){h&&h(s,e,f),s&&s.trigger&&s.trigger("error",s,e,f)};var p=f.xhr=e.ajax(f);return s&&s.trigger&&s.trigger("request",s,p,f),p},nextPage:function(e){this.currentPage<this.information.totalPages&&(this.currentPage=++this.currentPage,this.pager(e))},previousPage:function(e){this.currentPage>1&&(this.currentPage=--this.currentPage,this.pager(e))},goTo:function(e,t){e!==undefined&&(this.currentPage=parseInt(e,10),this.pager(t))},howManyPer:function(e){if(e!==undefined){var t=this.perPage;this.perPage=parseInt(e,10),this.currentPage=Math.ceil((t*(this.currentPage-1)+1)/e),this.pager()}},setSort:function(e,t){e!==undefined&&t!==undefined&&(this.lastSortColumn=this.sortColumn,this.sortColumn=e,this.sortDirection=t,this.pager(),this.info())},setFieldFilter:function(e){t.isEmpty(e)?(this.lastFieldFilterRules=this.fieldFilterRules,this.fieldFilterRules="",this.pager(),this.info()):(this.lastFieldFilterRules=this.fieldFilterRules,this.fieldFilterRules=e,this.pager(),this.info())},doFakeFieldFilter:function(e){if(!t.isEmpty(e)){var n=this.origModels;return n===undefined&&(n=this.models),n=this._fieldFilter(n,e),this.filterExpression!==""&&(n=this._filter(n,this.filterFields,this.filterExpression)),n.length}},setFilter:function(e,t){e!==undefined&&t!==undefined&&(this.filterFields=e,this.lastFilterExpression=this.filterExpression,this.filterExpression=t,this.pager(),this.info())},doFakeFilter:function(e,n){if(e!==undefined&&n!==undefined){var r=this.origModels;return r===undefined&&(r=this.models),t.isEmpty(this.fieldFilterRules)||(r=this._fieldFilter(r,this.fieldFilterRules)),r=this._filter(r,e,n),r.length}},pager:function(e){var n=this,r=this.perPage,i=(n.currentPage-1)*r,s=i+r;n.origModels===undefined&&(n.origModels=n.models),n.models=n.origModels.slice(),this.sortColumn!==""&&(n.models=n._sort(n.models,this.sortColumn,this.sortDirection)),t.isEmpty(this.fieldFilterRules)||(n.models=n._fieldFilter(n.models,this.fieldFilterRules)),this.filterExpression!==""&&(n.models=n._filter(n.models,this.filterFields,this.filterExpression));if(this.lastSortColumn!==this.sortColumn||this.lastFilterExpression!==this.filterExpression||!t.isEqual(this.fieldFilterRules,this.lastFieldFilterRules))i=0,s=i+r,n.currentPage=1,this.lastSortColumn=this.sortColumn,this.lastFieldFilterRules=this.fieldFilterRules,this.lastFilterExpression=this.filterExpression;n.sortedAndFilteredModels=n.models.slice(),n.info(),n.reset(n.models.slice(i,s)),t.result(e,"success")},_sort:function(e,n,r){return e=e.sort(function(e,i){var s=e.get(n),o=i.get(n);if(t.isUndefined(s)||t.isUndefined(o)||s===null||o===null)return 0;s=s.toString().toLowerCase(),o=o.toString().toLowerCase();if(r==="desc")if(!s.match(/[^\-\d\.]/)&&s.match(/-?[\d\.]+/)&&!o.match(/[^\-\d\.]/)&&o.match(/-?[\d\.]+/)){if(s-0<o-0)return 1;if(s-0>o-0)return-1}else{if(s<o)return 1;if(s>o)return-1}else if(!s.match(/[^\-\d\.]/)&&s.match(/-?[\d\.]+/)&&!o.match(/[^\-\d\.]/)&&o.match(/-?[\d\.]+/)){if(s-0<o-0)return-1;if(s-0>o-0)return 1}else{if(s<o)return-1;if(s>o)return 1}if(e.cid&&i.cid){var u=e.cid,a=i.cid;if(u<a)return-1;if(u>a)return 1}return 0}),e},_fieldFilter:function(e,n){if(t.isEmpty(n))return e;var r=[];return t.each(e,function(e){var i=!0;t.each(n,function(n){if(!i)return!1;i=!1;if(n.type==="function"){var r=t.wrap(n.value,function(t){return t(e.get(n.field))});r()&&(i=!0)}else n.type==="required"?t.isEmpty(e.get(n.field).toString())||(i=!0):n.type==="min"?!t.isNaN(Number(e.get(n.field)))&&!t.isNaN(Number(n.value))&&Number(e.get(n.field))>=Number(n.value)&&(i=!0):n.type==="max"?!t.isNaN(Number(e.get(n.field)))&&!t.isNaN(Number(n.value))&&Number(e.get(n.field))<=Number(n.value)&&(i=!0):n.type==="range"?!t.isNaN(Number(e.get(n.field)))&&t.isObject(n.value)&&!t.isNaN(Number(n.value.min))&&!t.isNaN(Number(n.value.max))&&Number(e.get(n.field))>=Number(n.value.min)&&Number(e.get(n.field))<=Number(n.value.max)&&(i=!0):n.type==="minLength"?e.get(n.field).toString().length>=n.value&&(i=!0):n.type==="maxLength"?e.get(n.field).toString().length<=n.value&&(i=!0):n.type==="rangeLength"?t.isObject(n.value)&&!t.isNaN(Number(n.value.min))&&!t.isNaN(Number(n.value.max))&&e.get(n.field).toString().length>=n.value.min&&e.get(n.field).toString().length<=n.value.max&&(i=!0):n.type==="oneOf"?t.isArray(n.value)&&t.include(n.value,e.get(n.field))&&(i=!0):n.type==="equalTo"?n.value===e.get(n.field)&&(i=!0):n.type==="containsAllOf"?t.isArray(n.value)&&t.isArray(e.get(n.field))&&t.intersection(n.value,e.get(n.field)).length===n.value.length&&(i=!0):n.type==="pattern"?e.get(n.field).toString().match(n.value)&&(i=!0):i=!1}),i&&r.push(e)}),r},_filter:function(n,r,i){var s=this,o={};t.isString(r)?o[r]={cmp_method:"regexp"}:t.isArray(r)?t.each(r,function(e){o[e]={cmp_method:"regexp"}}):t.each(r,function(e,n){o[n]=t.defaults(e,{cmp_method:"regexp"})}),r=o,t.has(e.Paginator,"removeDiacritics")&&s.useDiacriticsPlugin&&(i=e.Paginator.removeDiacritics(i));if(i===""||!t.isString(i))return n;var u=t.map(i.match(/\w+/ig),function(e){return e.toLowerCase()}),a="("+t.uniq(u).join("|")+")",f=new RegExp(a,"igm"),l=[];return t.each(n,function(n){var o=[];t.each(r,function(r,a){var l=n.get(a);if(l){var c=[];t.has(e.Paginator,"removeDiacritics")&&s.useDiacriticsPlugin?l=e.Paginator.removeDiacritics(l.toString()):l=l.toString();if(r.cmp_method==="levenshtein"&&t.has(e.Paginator,"levenshtein")&&s.useLevenshteinPlugin){var h=e.Paginator.levenshtein(l,i);t.defaults(r,{max_distance:0}),h<=r.max_distance&&(c=t.uniq(u))}else c=l.match(f);c=t.map(c,function(e){return e.toString().toLowerCase()}),t.each(c,function(e){o.push(e)})}}),o=t.uniq(t.without(o,"")),t.isEmpty(t.difference(u,o))&&l.push(n)}),l},info:function(){var e=this,t={},n=e.sortedAndFilteredModels?e.sortedAndFilteredModels.length:e.length,r=Math.ceil(n/e.perPage);return t={totalUnfilteredRecords:e.origModels.length,totalRecords:n,currentPage:e.currentPage,perPage:this.perPage,totalPages:r,lastPage:r,previous:!1,next:!1,startRecord:n===0?0:(e.currentPage-1)*this.perPage+1,endRecord:Math.min(n,e.currentPage*this.perPage)},e.currentPage>1&&(t.previous=e.currentPage-1),e.currentPage<t.totalPages&&(t.next=e.currentPage+1),t.pageSet=e.setPagination(t),e.information=t,t},setPagination:function(e){var t=[],n=0,r=0,i=this.pagesInRange*2,s=Math.ceil(e.totalRecords/e.perPage);if(s>1)if(s<=1+i)for(n=1,r=s;n<=r;n++)t.push(n);else if(e.currentPage<=this.pagesInRange+1)for(n=1,r=2+i;n<r;n++)t.push(n);else if(s-this.pagesInRange>e.currentPage&&e.currentPage>this.pagesInRange)for(n=e.currentPage-this.pagesInRange;n<=e.currentPage+this.pagesInRange;n++)t.push(n);else for(n=s-i;n<=s;n++)t.push(n);return t},bootstrap:function(e){return t.extend(this,e),this.goTo(1),this.info(),this}}),i.clientPager.prototype.prevPage=i.clientPager.prototype.previousPage;var s=function(){var e=new n.Deferred;return e.reject(),e.promise()};return i.requestPager=e.Collection.extend({sync:function(i,s,o){var u=this;u.setDefaults();var a={};t.each(t.result(u,"server_api"),function(e,n){t.isFunction(e)&&(e=t.bind(e,u),e=e()),a[n]=e});var f=t.clone(u.paginator_core);t.each(f,function(e,n){t.isFunction(e)&&(e=t.bind(e,u),e=e()),f[n]=e}),f=t.defaults(f,{timeout:25e3,cache:!1,type:"GET",dataType:"jsonp"}),o.data?o.data=decodeURIComponent(n.param(t.extend(a,o.data))):o.data=decodeURIComponent(n.param(a)),f=t.extend(f,{data:decodeURIComponent(n.param(a)),processData:!1,url:t.result(f,"url")},o);var l=r[0]!==0||r[1]!==9||r[2]!==10,c=f.success;f.success=function(e,t,n){c&&(l?c(e,t,n):c(s,e,f)),r[0]<1&&s&&s.trigger&&s.trigger("sync",s,e,f)};var h=f.error;f.error=function(e){h&&h(e),s&&s.trigger&&s.trigger("error",s,e,f)};var p=f.xhr=e.ajax(f);return s&&s.trigger&&s.trigger("request",s,p,f),p},setDefaults:function(){var e=this;t.defaults(e.paginator_ui,{firstPage:0,currentPage:1,perPage:5,totalPages:10,pagesInRange:4}),t.each(e.paginator_ui,function(n,r){t.isUndefined(e[r])&&(e[r]=e.paginator_ui[r])})},requestNextPage:function(e){return this.currentPage!==undefined?(this.currentPage+=1,this.pager(e)):s()},requestPreviousPage:function(e){return this.currentPage!==undefined?(this.currentPage-=1,this.pager(e)):s()},updateOrder:function(e,t){return e!==undefined?(this.sortField=e,this.pager(t)):s()},goTo:function(e,t){return e!==undefined?(this.currentPage=parseInt(e,10),this.pager(t)):s()},howManyPer:function(e,t){return e!==undefined?(this.currentPage=this.firstPage,this.perPage=e,this.pager(t)):s()},info:function(){var e={totalRecords:this.totalRecords||0,currentPage:this.currentPage,firstPage:this.firstPage,totalPages:Math.ceil(this.totalRecords/this.perPage),lastPage:this.totalPages,perPage:this.perPage,previous:!1,next:!1};return this.currentPage>1&&(e.previous=this.currentPage-1),this.currentPage<e.totalPages&&(e.next=this.currentPage+1),e.hasNext=e.next,e.hasPrevious=e.next,e.pageSet=this.setPagination(e),this.information=e,e},setPagination:function(e){var t=[],n=0,r=0,i=this.pagesInRange*2,s=Math.ceil(e.totalRecords/e.perPage);if(s>1)if(s<=1+i)for(n=1,r=s;n<=r;n++)t.push(n);else if(e.currentPage<=this.pagesInRange+1)for(n=1,r=2+i;n<r;n++)t.push(n);else if(s-this.pagesInRange>e.currentPage&&e.currentPage>this.pagesInRange)for(n=e.currentPage-this.pagesInRange;n<=e.currentPage+this.pagesInRange;n++)t.push(n);else for(n=s-i;n<=s;n++)t.push(n);return t},pager:function(e){return t.isObject(e)||(e={}),this.fetch(e)},url:function(){return this.paginator_core!==undefined&&this.paginator_core.url!==undefined?this.paginator_core.url:null},bootstrap:function(e){return t.extend(this,e),this.setDefaults(),this.info(),this}}),i.requestPager.prototype.nextPage=i.requestPager.prototype.requestNextPage,i.requestPager.prototype.prevPage=i.requestPager.prototype.requestPreviousPage,i}(Backbone,_,jQuery),define("backbone.paginator",["backbone"],function(e){return function(){var t,n;return t||e.window.Backbone.Paginator}}(this)),define("js/patterns/structure/collections/result",["underscore","backbone","js/patterns/structure/models/result","backbone.paginator"],function(e,t,n){var r=t.Paginator.requestPager.extend({model:n,queryHelper:null,initialize:function(e,n){this.options=n,this.url=n.url,this.queryParser=n.queryParser,this.queryHelper=n.queryHelper,t.Paginator.requestPager.prototype.initialize.apply(this,[e,n])},pager:function(){this.trigger("pager"),t.Paginator.requestPager.prototype.pager.apply(this,[])},paginator_core:{type:"GET",dataType:"json",url:function(){return this.url}},paginator_ui:{firstPage:1,currentPage:1,perPage:15},server_api:{query:function(){return this.queryParser()},batch:function(){return this.queryHelper.options.batchSize=this.perPage,JSON.stringify(this.queryHelper.getBatch(this.currentPage))},attributes:function(){return JSON.stringify(this.queryHelper.options.attributes)}},parse:function(t){this.totalRecords=t.total;var n=t.results;return e.each(n,function(e,t){e._sort=t}),n},comparator:"_sort"});return r}),define("js/patterns/structure/collections/selected",["backbone","js/patterns/structure/models/result"],function(e,t){var n=e.Collection.extend({model:t,removeResult:function(e){return this.removeByUID(e.uid())},removeByUID:function(e){var t=this.getByUID(e);return t&&this.remove(t),t},getByUID:function(e){return this.findWhere({UID:e})}});return n}),define("js/patterns/structure/views/app",["jquery","underscore","backbone","js/ui/views/toolbar","js/ui/views/buttongroup","js/ui/views/button","js/ui/views/base","js/patterns/structure/views/table","js/patterns/structure/views/selectionwell","js/patterns/structure/views/tags","js/patterns/structure/views/properties","js/patterns/structure/views/workflow","js/patterns/structure/views/delete","js/patterns/structure/views/rename","js/patterns/structure/views/rearrange","js/patterns/structure/views/selectionbutton","js/patterns/structure/views/paging","js/patterns/structure/views/addmenu","js/patterns/structure/views/columns","js/patterns/structure/views/textfilter","js/patterns/structure/collections/result","js/patterns/structure/collections/selected","mockup-patterns-dropzone","mockup-utils","jquery.cookie"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S,x){var T="DISABLE",N=o.extend({tagName:"div",buttonClickEvents:{cut:"cutCopyClickEvent",copy:"cutCopyClickEvent",paste:"pasteEvent",tags:T,properties:T,workflow:T,"delete":T,rename:T,rearrange:T},buttonViewMapping:{"secondary.tags":f,"secondary.properties":l,"secondary.workflow":c,"primary.delete":h,"secondary.rename":p},status:"",statusType:"warning",pasteOperation:null,sort_on:"getObjPositionInParent",sort_order:"ascending",additionalCriterias:[],pasteSelection:null,cookieSettingPrefix:"_fc_",initialize:function(n){var r=this;o.prototype.initialize.apply(r,[n]),r.setAllCookieSettings(),r.loading=new x.ProgressIndicator({container:r.$el}),r.loading.show(),r.collection=new w([],{url:r.options.collectionUrl,queryParser:function(){var e=null;r.toolbar&&(e=r.toolbar.get("filter").term);var t=r.sort_on;return t||(t="getObjPositionInParent"),JSON.stringify({criteria:r.queryHelper.getCriterias(e,{additionalCriterias:r.additionalCriterias}),sort_on:t,sort_order:r.sort_order})},queryHelper:r.options.queryHelper}),r.queryHelper=r.options.queryHelper,r.selectedCollection=new E,r.tableView=new u({app:r}),r.pagingView=new m({app:r}),r.pasteAllowed=r.options.pasteAllowed,r.setupButtons(),r.wellView=new a({collection:r.selectedCollection,triggerView:r.toolbar.get("selected"),app:r}),r.buttonViews={},t.map(r.buttonViewMapping,function(e,t,n){var i=t.split("."),s=i[0],o=i[1];r.buttonViews[t]=new e({triggerView:r.buttons[s].get(o),app:r})}),r.toolbar.get("selected").disable(),r.buttons.primary.disable(),r.buttons.secondary.disable(),r.selectedCollection.on("add remove reset",function(e,t){t.length?(r.toolbar.get("selected").enable(),r.buttons.primary.enable(),r.buttons.secondary.enable(),r.pasteAllowed||r.buttons.primary.get("paste").disable()):(this.toolbar.get("selected").disable(),r.buttons.primary.disable(),r.buttons.secondary.disable())},r),r.collection.on("sync",function(){if(r.selectedCollection.models.length>0){var n=[];r.selectedCollection.each(function(e){n.push(e.attributes.UID)}),r.queryHelper.search("UID","plone.app.querystring.operation.list.contains",n,function(e){t.each(e.results,function(e){var t=r.selectedCollection.getByUID(e.UID);t.attributes=e})},!1)}r.contextInfoUrl&&e.ajax({url:r.getAjaxUrl(r.contextInfoUrl),dataType:"json",success:function(e){r.trigger("context-info-loaded",e)},error:function(e){e.status===404&&console.log("context info url not found")}}),r.loading.hide()}),r.collection.on("pager",function(){r.loading.show()}),e(document).bind("keyup keydown",function(e){r.keyEvent=e})},inQueryMode:function(){return this.additionalCriterias.length>0?!0:this.sort_on&&this.sort_on!=="getObjPositionInParent"?!0:this.sort_order!=="ascending"?!0:!1},getSelectedUids:function(e){var t=this;e===undefined&&(e=t.selectedCollection);var n=[];return e.each(function(e){n.push(e.uid())}),n},getAjaxUrl:function(e){return e.replace("{path}",this.options.queryHelper.getCurrentPath())},defaultButtonClickEvent:function(t){var n=this,r=null,i=null;if(t.url){n.loading.show();if(arguments.length>1){var s=arguments[1];s.preventDefault||(r=s)}if(arguments.length>2){var o=arguments[2];typeof o=="function"&&(i=o)}r===null&&(r={}),r.selection===undefined&&(r.selection=JSON.stringify(n.getSelectedUids())),r._authenticator=e('input[name="_authenticator"]').val(),r.folder===undefined&&(r.folder=n.options.queryHelper.getCurrentPath());var u=n.getAjaxUrl(t.url);e.ajax({url:u,type:"POST",data:r,success:function(e){n.ajaxSuccessResponse.apply(n,[e,i]),n.loading.hide()},error:function(e){n.ajaxErrorResponse.apply(n,[e,u]),n.loading.hide()}},n)}},ajaxSuccessResponse:function(e,t){var n=this;e.status==="success"&&n.collection.reset(),e.msg&&n.setStatus(e.msg),t!==null&&t!==undefined&&t(e),n.collection.pager()},ajaxErrorResponse:function(e,t){var n=this;e.status===404?window.alert('operation url "'+t+'" is not valid'):window.alert("there was an error performing action")},pasteEvent:function(t,n,r){var i=this;r===undefined&&(r={}),r=e.extend(!0,{},{selection:JSON.stringify(i.getSelectedUids(i.pasteSelection)),pasteOperation:i.pasteOperation},r),i.defaultButtonClickEvent(t,r)},cutCopyClickEvent:function(e){var t=this,r;e.id==="cut"?(r="cut ",t.pasteOperation="cut"):(r="copied ",t.pasteOperation="copy"),t.pasteSelection=new n.Collection,t.selectedCollection.each(function(e){t.pasteSelection.add(e)}),r+="selection",t.setStatus(r),t.pasteAllowed=!0,t.buttons.primary.get("paste").enable()},setupButtons:function(){var e=this;e.buttons={};var n=[],o=new s({id:"columns",tooltip:"Configure displayed columns",icon:"align-justify"});e.columnsView=new y({app:e,triggerView:o}),n.push(o),n.push(new v({title:"Selected",id:"selected",collection:this.selectedCollection})),e.options.contextInfoUrl&&n.push(new g({contextInfoUrl:e.options.contextInfoUrl,app:e}));if(e.options.rearrange){var u=new s({id:"rearrange",title:"Rearrange",tooltip:"Rearrange folder contents",url:e.options.rearrange.url});e.rearrangeView=new d({triggerView:u,app:e}),n.push(u)}t.each(t.pairs(this.options.buttonGroups),function(r){var o=[];t.each(r[1],function(t){t=new s(t),o.push(t);var n=e.buttonClickEvents[t.id];n!==T&&(n===undefined&&(n="defaultButtonClickEvent"),t.on("button:click",e[n],e))}),e.buttons[r[0]]=new i({items:o,id:r[0],app:e}),n.push(e.buttons[r[0]])});if(e.options.uploadUrl){var a=new s({title:"Upload",context:"success",icon:"upload"});n.push(a),a.on("button:click",function(){e.dropzone.options.url=e.getAjaxUrl(e.options.uploadUrl),e.dropzone.hiddenFileInput.click()})}n.push(new b({id:"filter",app:this})),this.toolbar=new r({items:n})},moveItem:function(t,n,r){var i=this;e.ajax({url:this.getAjaxUrl(this.options.moveUrl),type:"POST",data:{delta:n,id:t,_authenticator:e('[name="_authenticator"]').val(),subsetIds:JSON.stringify(r)},dataType:"json",success:function(e){e.msg?i.setStatus(e.msg):e.status!=="success"&&i.setStatus("error moving item"),i.collection.pager()},error:function(e){i.setStatus("error moving item")}})},setStatus:function(e,t){this.status=e,t===undefined&&(t="warning"),this.statusType=t,this.$(".status").addClass(t).html(e)},render:function(){var n=this;return n.$el.append(n.toolbar.render().el),n.$el.append(n.wellView.render().el),n.$el.append(n.columnsView.render().el),n.rearrangeView&&n.$el.append(n.rearrangeView.render().el),t.each(n.buttonViews,function(e){n.$el.append(e.render().el)}),n.$el.append(n.tableView.render().el),n.$el.append(n.pagingView.render().el),n.options.uploadUrl&&(n.dropzone=(new S(n.$el,{className:"structure-dropzone",clickable:e("<div/>")[0],url:n.getAjaxUrl(n.options.uploadUrl),autoCleanResults:!0,useTus:n.options.useTus,success:function(){n.collection.pager()}})).dropzone,n.dropzone.on("drop",function(){n.dropzone.options.url=n.getAjaxUrl(n.options.uploadUrl)}),e(n.dropzone.hiddenFileInput).attr("multiple","true")),n.options.backdropSelector!==null?e(n.options.backdropSelector).addClass("ui-backdrop-element"):n.$el.addClass("ui-backdrop-element"),n},getCookieSetting:function(t,n){n===undefined&&(n=null);var r;try{r=e.cookie(this.cookieSettingPrefix+t),r=e.parseJSON(r).value}catch(i){return n}return r===undefined||r===null?n:r},setCookieSetting:function(t,n){e.cookie(this.cookieSettingPrefix+t,JSON.stringify({value:n}))},setAllCookieSettings:function(){this.activeColumns=this.getCookieSetting("activeColumns",this.activeColumns)}});return N}),define("mockup-patterns-structure",["jquery","mockup-patterns-base","mockup-utils","js/patterns/structure/views/app","text!js/patterns/structure/templates/paging.xml","text!js/patterns/structure/templates/selection_button.xml","text!js/patterns/structure/templates/selection_item.xml","text!js/patterns/structure/templates/tablerow.xml","text!js/patterns/structure/templates/table.xml","text!js/ui/templates/popover.xml"],function(e,t,n,r){var i=t.extend({name:"structure",defaults:{vocabularyUrl:null,tagsVocabularyUrl:null,usersVocabularyUrl:null,indexOptionsUrl:null,contextInfoUrl:null,setDefaultPageUrl:null,backdropSelector:".modal",attributes:["UID","Title","Type","path","review_state","ModificationDate","EffectiveDate","CreationDate","is_folderish","Subject","getURL","id","exclude_from_nav","getObjSize","last_comment_date","total_comments"],activeColumns:["ModificationDate","EffectiveDate","review_state"],availableColumns:{ModificationDate:"Last modified",EffectiveDate:"Published",CreationDate:"Created",review_state:"Review state",Subject:"Tags",Type:"Type",is_folderish:"Folder",exclude_from_nav:"Excluded from nav",getObjSize:"Object Size",last_comment_date:"Last comment date",total_comments:"Total comments"},rearrange:{properties:{id:"ID",sortable_title:"Title",modified:"Last Modified",created:"Created on",effective:"Publication Date",Type:"Type"},url:"/rearrange"},basePath:"/",uploadUrl:null,moveUrl:null,buttonGroups:{primary:[{title:"Cut",url:"/cut"},{title:"Copy",url:"/copy"},{title:"Paste",url:"/paste"},{title:"Delete",url:"/delete",context:"danger",icon:"trash"}],secondary:[{title:"Workflow",url:"/workflow"},{title:"Tags",url:"/tags"},{title:"Properties",url:"/properties"},{title:"Rename",url:"/rename"}]},useTus:!1},init:function(){var t=this;t.browsing=!0,t.options.collectionUrl=t.options.vocabularyUrl,t.options.queryHelper=new n.QueryHelper(e.extend(!0,{},t.options,{pattern:t})),delete t.options.attributes,t.view=new r(t.options),t.$el.append(t.view.render().$el)}});return i}),define("text!js/patterns/structure/pattern.js",[],function(){return"/* Structure pattern.\n *\n * Options:\n *    vocabularyUrl(string): Url to return query results (null)\n *    tagsVocabularyUrl(string): Url to return tags query results (null)\n *    usersVocabularyUrl(string): Url to query users (null)\n *    indexOptionsUrl(string): Url to configure querystring widget with (null)\n *    uploadUrl(string): For setting up dropzone (null)\n *    moveUrl(string): For supporting drag drop reordering (null)\n *    contextInfoUrl(string): For supporting add menu (null)\n *\n * Documentation:\n *    # Example\n *\n *    {{ example-1 }}\n *\n * Example: example-1\n *    <div class=\"pat-structure\"\n *         data-pat-structure=\"vocabularyUrl:/relateditems-test.json;\n *                             uploadUrl:/upload;\n *                             moveUrl:/moveitem;\n *                             tagsVocabularyUrl:/select2-test.json;\n *                             usersVocabularyUrl:/tests/json/users.json;\n *                             indexOptionsUrl:/tests/json/queryStringCriteria.json;\n *                             contextInfoUrl:{path}/context-info;\"></div>\n *\n * License:\n *    Copyright (C) 2010 Plone Foundation\n *\n *    This program is free software; you can redistribute it and/or modify it\n *    under the terms of the GNU General Public License as published by the\n *    Free Software Foundation; either version 2 of the License.\n *\n *    This program is distributed in the hope that it will be useful, but\n *    WITHOUT ANY WARRANTY; without even the implied warranty of\n *    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General\n *    Public License for more details.\n *\n *    You should have received a copy of the GNU General Public License along\n *    with this program; if not, write to the Free Software Foundation, Inc.,\n *    51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA.\n */\n\n\ndefine([\n  'jquery',\n  'mockup-patterns-base',\n  'mockup-utils',\n  'js/patterns/structure/views/app',\n  'text!js/patterns/structure/templates/paging.xml',\n  'text!js/patterns/structure/templates/selection_button.xml',\n  'text!js/patterns/structure/templates/selection_item.xml',\n  'text!js/patterns/structure/templates/tablerow.xml',\n  'text!js/patterns/structure/templates/table.xml',\n  'text!js/ui/templates/popover.xml'\n], function($, Base, utils, AppView) {\n  'use strict';\n\n  var Structure = Base.extend({\n    name: 'structure',\n    defaults: {\n      vocabularyUrl: null,\n      tagsVocabularyUrl: null,\n      usersVocabularyUrl: null,\n      indexOptionsUrl: null, // for querystring widget\n      contextInfoUrl: null, // for add new dropdown and other info\n      setDefaultPageUrl: null,\n      backdropSelector: '.modal', // Element upon which to apply backdrops used for popovers\n      attributes: [\n        'UID', 'Title', 'Type', 'path', 'review_state',\n        'ModificationDate', 'EffectiveDate', 'CreationDate',\n        'is_folderish', 'Subject', 'getURL', 'id', 'exclude_from_nav',\n        'getObjSize', 'last_comment_date', 'total_comments'\n      ],\n      activeColumns: [\n        'ModificationDate',\n        'EffectiveDate',\n        'review_state'\n      ],\n      availableColumns: {\n        'ModificationDate': 'Last modified',\n        'EffectiveDate': 'Published',\n        'CreationDate': 'Created',\n        'review_state': 'Review state',\n        'Subject': 'Tags',\n        'Type': 'Type',\n        'is_folderish': 'Folder',\n        'exclude_from_nav': 'Excluded from nav',\n        'getObjSize': 'Object Size',\n        'last_comment_date': 'Last comment date',\n        'total_comments': 'Total comments'\n      },\n      rearrange: {\n        properties: {\n          'id': 'ID',\n          'sortable_title': 'Title',\n          'modified': 'Last Modified',\n          'created': 'Created on',\n          'effective': 'Publication Date',\n          'Type': 'Type'\n        },\n        url: '/rearrange'\n      },\n      basePath: '/',\n      uploadUrl: null,\n      moveUrl: null,\n      /*\n       * all these base buttons are required\n       */\n      buttonGroups: {\n        primary: [{\n          title: 'Cut',\n          url: '/cut'\n        },{\n          title: 'Copy',\n          url: '/copy'\n        },{\n          title: 'Paste',\n          url: '/paste'\n        },{\n          title: 'Delete',\n          url: '/delete',\n          context: 'danger',\n          icon: 'trash'\n        }],\n        secondary: [{\n          title: 'Workflow',\n          url: '/workflow'\n        },{\n          title: 'Tags',\n          url: '/tags'\n        },{\n          title: 'Properties',\n          url: '/properties'\n        },{\n          title: 'Rename',\n          url: '/rename'\n        }]\n      },\n      useTus: false\n    },\n    init: function() {\n      var self = this;\n      self.browsing = true; // so all queries will be correct with QueryHelper\n      self.options.collectionUrl = self.options.vocabularyUrl;\n      self.options.queryHelper = new utils.QueryHelper(\n        $.extend(true, {}, self.options, {pattern: self}));\n\n      delete self.options.attributes; // not compatible with backbone\n\n      self.view = new AppView(self.options);\n      self.$el.append(self.view.render().$el);\n    }\n  });\n\n  return Structure;\n\n});\n\n\n"}),define("mockup-patterns-tablesorter",["jquery","mockup-patterns-base"],function(e,t){var n=t.extend({name:"tablesorter",defaults:{},sortabledataclass:function(e){var t,n;return t=new RegExp("sortabledata-([^ ]*)","g"),n=t.exec(e.attr("class")),n?n[1]:null},sortable:function(e){var t=this,n=t.sortabledataclass(e);return n===null&&(n=e.text()),n.charAt(4)!=="-"&&n.charAt(7)!=="-"&&!isNaN(parseFloat(n))?parseFloat(n):n.toLowerCase()},sort:function(t){var n=this,r,i,s,o,u,a,f,l,c;r=e(t).closest("th"),i=e("th",e(t).closest("thead")).index(r),s=e(t).parents("table:first"),o=s.find("tbody:first"),c=parseInt(s.attr("sorted")||"-1",10),u=c===i,e(t).parent().find("th .sortdirection").html("&#x2003;"),e(t).children(".sortdirection").html(u?"&#x25bc;":"&#x25b2;"),a=e(t).parent().children("th").index(t),f=[],l=!0,o.find("tr").each(function(){var t,r;t=e(this).children("td"),r=n.sortable.apply(n,[t.slice(a,a+1)]),isNaN(r)&&(l=!1),f.push([r,n.sortable.apply(n,[t.slice(1,2)]),n.sortable.apply(n,[t.slice(0,1)]),this])}),f.length&&(l?f.sort(function(e,t){return e[0]-t[0]}):f.sort(),u&&f.reverse(),s.attr("sorted",u?"":i),o.append(e.map(f,function(e){return e[3]})),o.each(n.setoddeven))},setoddeven:function(){var t=e(this);t.find("tr").removeClass("odd").removeClass("even").filter(":odd").addClass("even").end().filter(":even").addClass("odd")},init:function(){var t=this,n=e("<span>&#x2003;</span>").addClass("sortdirection");t.$el.find("thead th").append(n.clone()).css("cursor","pointer").on("click",function(e){t.sort.apply(t,[this])}),t.$el.children("tbody").each(t.setoddeven)}});return n}),define("text!js/patterns/tablesorter.js",[],function(){return"/* Tablesorter pattern.\n *\n * Options:\n *    someoptions(XXX): TODO: we need to expose options (XXX)\n *\n * Documentation:\n *    # Directions\n *\n *    - If the displayed data doesn't match the sequence (as in days of the\n *      week), provide a sortabledata-XXX class. The column will be sorted on\n *      XXX.\n *    - Note that a secondary sort is always done on the first two columns\n *      (by the second, and then by the first column). This provides a crude\n *      way to sort by surname and name. (Look at sequence of \"Bluth\" rows\n *      changing when sorting on Last Name.)\n *    - Rows get odd and even classes for CSS styling.\n *    - If something looks more like a date than like a number (specifically\n *      1999-01-01, not e.g. 01-01-1999) it will be sorted textually, not\n *      numerically. Dates aren't validated.\n *    - If something looks like a number, javascript will make some wild\n *      guesses about it. It can turn out weird (try sorting on the \"No Date\"\n *      column).\n *\n *    # Example\n *\n *    {{ example-1 }}\n *\n * Example: example-1\n *    <table class=\"pat-tablesorter\">\n *      <thead>\n *        <th>First Name</th>\n *        <th>Last Name</th>\n *        <th>Occupation</th>\n *        <th>Age</th>\n *      </thead>\n *      <tr>\n *        <td>Buster</td>\n *        <td>Bluth</td>\n *        <td>Army</td>\n *        <td>35</td>\n *      </tr>\n *      <tr>\n *        <td>Michael</td>\n *        <td>Bluth</td>\n *        <td>Company President</td>\n *        <td>39</td>\n *      </tr>\n *      <tr>\n *        <td>GOB</td>\n *        <td>Bluth</td>\n *        <td>Magician</td>\n *        <td>37</td>\n *      </tr>\n *      <tr>\n *        <td>Lindsay</td>\n *        <td>Fnke</td>\n *        <td>Protester</td>\n *        <td>36</td>\n *      </tr>\n *      <tr>\n *        <td>Tony</td>\n *        <td>Wonder</td>\n *        <td>Magician</td>\n *        <td>35</td>\n *      </tr>\n *      <tr>\n *        <td>Tobias</td>\n *        <td>Fnke</td>\n *        <td>Therapist</td>\n *        <td>40</td>\n *      </tr>\n *    </table>\n *\n * License: Copyright (C) 2010 Plone Foundation\n *\n *    This program is free software; you can redistribute it and/or modify it\n *    under the terms of the GNU General Public License as published by the\n *    Free Software Foundation; either version 2 of the License.\n *\n *    This program is distributed in the hope that it will be useful, but\n *    WITHOUT ANY WARRANTY; without even the implied warranty of\n *    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU\n *    General Public License for more details.\n *\n *    You should have received a copy of the GNU General Public License along\n *    with this program; if not, write to the Free Software Foundation, Inc.,\n *    51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA.\n */\n\n\ndefine([\n  'jquery',\n  'mockup-patterns-base'\n], function($, Base) {\n  'use strict';\n\n  var TableSorter = Base.extend({\n    name: 'tablesorter',\n    defaults: {},\n    sortabledataclass: function (cell) {\n      var re, matches;\n\n      re = new RegExp('sortabledata-([^ ]*)','g');\n      matches = re.exec(cell.attr('class'));\n      if (matches) {\n        return matches[1];\n      } else {\n        return null;\n      }\n    },\n    sortable: function (cell) {\n      var self = this;\n      // convert a cell into something sortable\n\n      // use sortabledata-xxx cell class if it is defined\n      var text = self.sortabledataclass(cell);\n      if (text === null) { text = cell.text(); }\n\n      // A number, but not a date?\n      if (text.charAt(4) !== '-' && text.charAt(7) !== '-' && !isNaN(parseFloat(text))) {\n        return parseFloat(text);\n      }\n      return text.toLowerCase();\n    },\n    sort: function ($this) {\n      var self = this;\n      var th, colnum, table, tbody, reverse, index, data, usenumbers, tsorted;\n      th = $($this).closest('th');\n      colnum = $('th', $($this).closest('thead')).index(th);\n      table = $($this).parents('table:first');\n      tbody = table.find('tbody:first');\n      tsorted = parseInt(table.attr('sorted') || '-1', 10);\n      reverse = tsorted === colnum;\n\n      $($this).parent().find('th .sortdirection')\n          .html('&#x2003;');\n      $($this).children('.sortdirection').html( reverse ? '&#x25bc;': '&#x25b2;' );\n\n      index = $($this).parent().children('th').index($this);\n      data = [];\n      usenumbers = true;\n      tbody.find('tr').each(function() {\n        var cells, sortableitem;\n\n        cells = $(this).children('td');\n        sortableitem = self.sortable.apply(self, [cells.slice(index,index + 1)]);\n        if (isNaN(sortableitem)) { usenumbers = false; }\n        data.push([\n          sortableitem,\n          // crude way to sort by surname and name after first choice\n          self.sortable.apply(self, [cells.slice(1,2)]),\n          self.sortable.apply(self, [cells.slice(0,1)]),\n          this\n        ]);\n      });\n\n      if (data.length) {\n        if (usenumbers) {\n          data.sort(function(a,b) { return a[0] - b[0]; });\n        } else {\n          data.sort();\n        }\n        if (reverse) { data.reverse(); }\n        table.attr('sorted', reverse ? '' : colnum);\n\n        // appending the tr nodes in sorted order will remove them from their old ordering\n        tbody.append($.map(data, function(a) { return a[3]; }));\n        // jquery :odd and :even are 0 based\n        tbody.each(self.setoddeven);\n      }\n    },\n\n    setoddeven: function () {\n      var tbody = $(this);\n      // jquery :odd and :even are 0 based\n      tbody.find('tr').removeClass('odd').removeClass('even')\n          .filter(':odd').addClass('even').end()\n          .filter(':even').addClass('odd');\n    },\n\n    init: function() {\n      var self = this;\n      // set up blank spaceholder gif\n      var blankarrow = $('<span>&#x2003;</span>').addClass('sortdirection');\n      // all listing tables not explicitly nosort, all sortable th cells\n      // give them a pointer cursor and  blank cell and click event handler\n      // the first one of the cells gets a up arrow instead.\n      self.$el.find('thead th').append(blankarrow.clone())\n          .css('cursor', 'pointer')\n          .on('click', function(e) {\n            self.sort.apply(self, [this]);\n          });\n\n      self.$el.children('tbody').each(self.setoddeven);\n\n    }\n  });\n\n  return TableSorter;\n\n});\n"}),!function(e,t){function n(e,t){for(var n,r=[],i=0;i<e.length;++i){if(n=u[e[i]]||s(e[i]),!n)throw"module definition dependecy not found: "+e[i];r.push(n)}t.apply(null,r)}function r(e,r,i){if("string"!=typeof e)throw"invalid module definition, module id must be defined and be a string";if(r===t)throw"invalid module definition, dependencies must be specified";if(i===t)throw"invalid module definition, definition function must be specified";n(r,function(){u[e]=i.apply(null,arguments)})}function i(e){return!!u[e]}function s(t){for(var n=e,r=t.split(/[.\/]/),i=0;i<r.length;++i){if(!n[r[i]])return;n=n[r[i]]}return n}function o(n){for(var r=0;r<n.length;r++){for(var i=e,s=n[r],o=s.split(/[.\/]/),a=0;a<o.length-1;++a)i[o[a]]===t&&(i[o[a]]={}),i=i[o[a]];i[o[o.length-1]]=u[s]}}var u={},a="tinymce/dom/EventUtils",f="tinymce/dom/Sizzle",l="tinymce/dom/DomQuery",c="tinymce/html/Styles",h="tinymce/dom/TreeWalker",p="tinymce/util/Tools",d="tinymce/dom/Range",v="tinymce/html/Entities",m="tinymce/Env",g="tinymce/dom/DOMUtils",y="tinymce/dom/ScriptLoader",b="tinymce/AddOnManager",w="tinymce/html/Node",E="tinymce/html/Schema",S="tinymce/html/SaxParser",x="tinymce/html/DomParser",T="tinymce/html/Writer",N="tinymce/html/Serializer",C="tinymce/dom/Serializer",k="tinymce/dom/TridentSelection",L="tinymce/util/VK",A="tinymce/dom/ControlSelection",O="tinymce/dom/Selection",M="tinymce/dom/RangeUtils",_="tinymce/Formatter",D="tinymce/UndoManager",P="tinymce/EnterKey",H="tinymce/ForceBlocks",B="tinymce/EditorCommands",j="tinymce/util/URI",F="tinymce/util/Class",I="tinymce/ui/Selector",q="tinymce/ui/Collection",R="tinymce/ui/DomUtils",U="tinymce/ui/Control",z="tinymce/ui/Factory",W="tinymce/ui/Container",X="tinymce/ui/DragHelper",V="tinymce/ui/Scrollable",$="tinymce/ui/Panel",J="tinymce/ui/Movable",K="tinymce/ui/Resizable",Q="tinymce/ui/FloatPanel",G="tinymce/ui/KeyboardNavigation",Y="tinymce/ui/Window",Z="tinymce/ui/MessageBox",et="tinymce/WindowManager",tt="tinymce/util/Quirks",nt="tinymce/util/Observable",rt="tinymce/Shortcuts",it="tinymce/Editor",st="tinymce/util/I18n",ot="tinymce/FocusManager",ut="tinymce/EditorManager",at="tinymce/LegacyInput",ft="tinymce/util/XHR",lt="tinymce/util/JSON",ct="tinymce/util/JSONRequest",ht="tinymce/util/JSONP",pt="tinymce/util/LocalStorage",dt="tinymce/Compat",vt="tinymce/ui/Layout",mt="tinymce/ui/AbsoluteLayout",gt="tinymce/ui/Tooltip",yt="tinymce/ui/Widget",bt="tinymce/ui/Button",wt="tinymce/ui/ButtonGroup",Et="tinymce/ui/Checkbox",St="tinymce/ui/PanelButton",xt="tinymce/ui/ColorButton",Tt="tinymce/ui/ComboBox",Nt="tinymce/ui/Path",Ct="tinymce/ui/ElementPath",kt="tinymce/ui/FormItem",Lt="tinymce/ui/Form",At="tinymce/ui/FieldSet",Ot="tinymce/ui/FilePicker",Mt="tinymce/ui/FitLayout",_t="tinymce/ui/FlexLayout",Dt="tinymce/ui/FlowLayout",Pt="tinymce/ui/FormatControls",Ht="tinymce/ui/GridLayout",Bt="tinymce/ui/Iframe",jt="tinymce/ui/Label",Ft="tinymce/ui/Toolbar",It="tinymce/ui/MenuBar",qt="tinymce/ui/MenuButton",Rt="tinymce/ui/ListBox",Ut="tinymce/ui/MenuItem",zt="tinymce/ui/Menu",Wt="tinymce/ui/Radio",Xt="tinymce/ui/ResizeHandle",Vt="tinymce/ui/Spacer",$t="tinymce/ui/SplitButton",Jt="tinymce/ui/StackLayout",Kt="tinymce/ui/TabPanel",Qt="tinymce/ui/TextBox",Gt="tinymce/ui/Throbber";r(a,[],function(){function e(e,t,n,r){e.addEventListener?e.addEventListener(t,n,r||!1):e.attachEvent&&e.attachEvent("on"+t,n)}function t(e,t,n,r){e.removeEventListener?e.removeEventListener(t,n,r||!1):e.detachEvent&&e.detachEvent("on"+t,n)}function n(e,t){function n(){return!1}function r(){return!0}var i,s=t||{},u;for(i in e)"layerX"!==i&&"layerY"!==i&&(s[i]=e[i]);if(s.target||(s.target=s.srcElement||document),e&&o.test(e.type)&&e.pageX===u&&e.clientX!==u){var a=s.target.ownerDocument||document,f=a.documentElement,l=a.body;s.pageX=e.clientX+(f&&f.scrollLeft||l&&l.scrollLeft||0)-(f&&f.clientLeft||l&&l.clientLeft||0),s.pageY=e.clientY+(f&&f.scrollTop||l&&l.scrollTop||0)-(f&&f.clientTop||l&&l.clientTop||0)}return s.preventDefault=function(){s.isDefaultPrevented=r,e&&(e.preventDefault?e.preventDefault():e.returnValue=!1)},s.stopPropagation=function(){s.isPropagationStopped=r,e&&(e.stopPropagation?e.stopPropagation():e.cancelBubble=!0)},s.stopImmediatePropagation=function(){s.isImmediatePropagationStopped=r,s.stopPropagation()},s.isDefaultPrevented||(s.isDefaultPrevented=n,s.isPropagationStopped=n,s.isImmediatePropagationStopped=n),s}function r(n,r,i){function s(){i.domLoaded||(i.domLoaded=!0,r(f))}function o(){"complete"===a.readyState&&(t(a,"readystatechange",o),s())}function u(){try{a.documentElement.doScroll("left")}catch(e){return setTimeout(u,0),void 0}s()}var a=n.document,f={type:"ready"};return i.domLoaded?(r(f),void 0):(a.addEventListener?e(n,"DOMContentLoaded",s):(e(a,"readystatechange",o),a.documentElement.doScroll&&n===n.top&&u()),e(n,"load",s),void 0)}function i(){function i(e,t){var n,r,i,s;if(n=u[t][e.type])for(r=0,i=n.length;i>r;r++)if(s=n[r],s&&s.func.call(s.scope,e)===!1&&e.preventDefault(),e.isImmediatePropagationStopped())return}var o=this,u={},a,f,l,c,h;f=s+(+(new Date)).toString(32),c="onmouseenter"in document.documentElement,l="onfocusin"in document.documentElement,h={mouseenter:"mouseover",mouseleave:"mouseout"},a=1,o.domLoaded=!1,o.events=u,o.bind=function(t,s,p,d){function v(e){i(n(e||x.event),m)}var m,g,y,b,w,E,S,x=window;if(t&&3!==t.nodeType&&8!==t.nodeType){for(t[f]?m=t[f]:(m=a++,t[f]=m,u[m]={}),d=d||t,s=s.split(" "),y=s.length;y--;)b=s[y],E=v,w=S=!1,"DOMContentLoaded"===b&&(b="ready"),o.domLoaded&&"ready"===b&&"complete"==t.readyState?p.call(d,n({type:b})):(c||(w=h[b],w&&(E=function(e){var t,r;if(t=e.currentTarget,r=e.relatedTarget,r&&t.contains)r=t.contains(r);else for(;r&&r!==t;)r=r.parentNode;r||(e=n(e||x.event),e.type="mouseout"===e.type?"mouseleave":"mouseenter",e.target=t,i(e,m))})),l||"focusin"!==b&&"focusout"!==b||(S=!0,w="focusin"===b?"focus":"blur",E=function(e){e=n(e||x.event),e.type="focus"===e.type?"focusin":"focusout",i(e,m)}),g=u[m][b],g?"ready"===b&&o.domLoaded?p({type:b}):g.push({func:p,scope:d}):(u[m][b]=g=[{func:p,scope:d}],g.fakeName=w,g.capture=S,g.nativeHandler=E,"ready"===b?r(t,E,o):e(t,w||b,E,S)));return t=g=0,p}},o.unbind=function(e,n,r){var i,s,a,l,c,h;if(!e||3===e.nodeType||8===e.nodeType)return o;if(i=e[f]){if(h=u[i],n){for(n=n.split(" "),a=n.length;a--;)if(c=n[a],s=h[c]){if(r)for(l=s.length;l--;)s[l].func===r&&s.splice(l,1);r&&0!==s.length||(delete h[c],t(e,s.fakeName||c,s.nativeHandler,s.capture))}}else{for(c in h)s=h[c],t(e,s.fakeName||c,s.nativeHandler,s.capture);h={}}for(c in h)return o;delete u[i];try{delete e[f]}catch(p){e[f]=null}}return o},o.fire=function(e,t,r){var s;if(!e||3===e.nodeType||8===e.nodeType)return o;r=n(null,r),r.type=t,r.target=e;do s=e[f],s&&i(r,s),e=e.parentNode||e.ownerDocument||e.defaultView||e.parentWindow;while(e&&!r.isPropagationStopped());return o},o.clean=function(e){var t,n,r=o.unbind;if(!e||3===e.nodeType||8===e.nodeType)return o;if(e[f]&&r(e),e.getElementsByTagName||(e=e.document),e&&e.getElementsByTagName)for(r(e),n=e.getElementsByTagName("*"),t=n.length;t--;)e=n[t],e[f]&&r(e);return o},o.destroy=function(){u={}},o.cancel=function(e){return e&&(e.preventDefault(),e.stopImmediatePropagation()),!1}}var s="mce-data-",o=/^(?:mouse|contextmenu)|click/;return i.Event=new i,i.Event.bind(window,"ready",function(){}),i}),r(f,[],function(){function e(e){return mt.test(e+"")}function n(){var e,t=[];return e=function(n,r){return t.push(n+=" ")>T.cacheLength&&delete e[t.shift()],e[n]=r,r}}function i(e){return e[I]=!0,e}function s(e){var t=_.createElement("div");try{return!!e(t)}catch(n){return!1}finally{t=null}}function o(e,t,n,r){var i,s,o,u,a,f,l,p,d,v;if((t?t.ownerDocument||t:q)!==_&&M(t),t=t||_,n=n||[],!e||"string"!=typeof e)return n;if(1!==(u=t.nodeType)&&9!==u)return[];if(P&&!r){if(i=gt.exec(e))if(o=i[1]){if(9===u){if(s=t.getElementById(o),!s||!s.parentNode)return n;if(s.id===o)return n.push(s),n}else if(t.ownerDocument&&(s=t.ownerDocument.getElementById(o))&&F(t,s)&&s.id===o)return n.push(s),n}else{if(i[2])return et.apply(n,t.getElementsByTagName(e)),n;if((o=i[3])&&R.getElementsByClassName&&t.getElementsByClassName)return et.apply(n,t.getElementsByClassName(o)),n}if(R.qsa&&!H.test(e)){if(l=!0,p=I,d=t,v=9===u&&e,1===u&&"object"!==t.nodeName.toLowerCase()){for(f=c(e),(l=t.getAttribute("id"))?p=l.replace(wt,"\\$&"):t.setAttribute("id",p),p="[id='"+p+"'] ",a=f.length;a--;)f[a]=p+h(f[a]);d=vt.test(e)&&t.parentNode||t,v=f.join(",")}if(v)try{return et.apply(n,d.querySelectorAll(v)),n}catch(m){}finally{l||t.removeAttribute("id")}}}return w(e.replace(ft,"$1"),t,n,r)}function u(e,t){var n=t&&e,r=n&&(~t.sourceIndex||Q)-(~e.sourceIndex||Q);if(r)return r;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function a(e){return function(t){var n=t.nodeName.toLowerCase();return"input"===n&&t.type===e}}function f(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function l(e){return i(function(t){return t=+t,i(function(n,r){for(var i,s=e([],n.length,t),o=s.length;o--;)n[i=s[o]]&&(n[i]=!(r[i]=n[i]))})})}function c(e,t){var n,r,i,s,u,a,f,l=X[e+" "];if(l)return t?0:l.slice(0);for(u=e,a=[],f=T.preFilter;u;){(!n||(r=lt.exec(u)))&&(r&&(u=u.slice(r[0].length)||u),a.push(i=[])),n=!1,(r=ct.exec(u))&&(n=r.shift(),i.push({value:n,type:r[0].replace(ft," ")}),u=u.slice(n.length));for(s in T.filter)!(r=dt[s].exec(u))||f[s]&&!(r=f[s](r))||(n=r.shift(),i.push({value:n,type:s,matches:r}),u=u.slice(n.length));if(!n)break}return t?u.length:u?o.error(e):X(e,a).slice(0)}function h(e){for(var t=0,n=e.length,r="";n>t;t++)r+=e[t].value;return r}function p(e,t,n){var r=t.dir,i=n&&"parentNode"===r,s=z++;return t.first?function(t,n,s){for(;t=t[r];)if(1===t.nodeType||i)return e(t,n,s)}:function(t,n,o){var u,a,f,l=U+" "+s;if(o){for(;t=t[r];)if((1===t.nodeType||i)&&e(t,n,o))return!0}else for(;t=t[r];)if(1===t.nodeType||i)if(f=t[I]||(t[I]={}),(a=f[r])&&a[0]===l){if((u=a[1])===!0||u===x)return u===!0}else if(a=f[r]=[l],a[1]=e(t,n,o)||x,a[1]===!0)return!0}}function d(e){return e.length>1?function(t,n,r){for(var i=e.length;i--;)if(!e[i](t,n,r))return!1;return!0}:e[0]}function v(e,t,n,r,i){for(var s,o=[],u=0,a=e.length,f=null!=t;a>u;u++)(s=e[u])&&(!n||n(s,r,i))&&(o.push(s),f&&t.push(u));return o}function m(e,t,n,r,s,o){return r&&!r[I]&&(r=m(r)),s&&!s[I]&&(s=m(s,o)),i(function(i,o,u,a){var f,l,c,h=[],p=[],d=o.length,m=i||b(t||"*",u.nodeType?[u]:u,[]),g=!e||!i&&t?m:v(m,h,e,u,a),y=n?s||(i?e:d||r)?[]:o:g;if(n&&n(g,y,u,a),r)for(f=v(y,p),r(f,[],u,a),l=f.length;l--;)(c=f[l])&&(y[p[l]]=!(g[p[l]]=c));if(i){if(s||e){if(s){for(f=[],l=y.length;l--;)(c=y[l])&&f.push(g[l]=c);s(null,y=[],f,a)}for(l=y.length;l--;)(c=y[l])&&(f=s?nt.call(i,c):h[l])>-1&&(i[f]=!(o[f]=c))}}else y=v(y===o?y.splice(d,y.length):y),s?s(null,o,y,a):et.apply(o,y)})}function g(e){for(var t,n,r,i=e.length,s=T.relative[e[0].type],o=s||T.relative[" "],u=s?1:0,a=p(function(e){return e===t},o,!0),f=p(function(e){return nt.call(t,e)>-1},o,!0),l=[function(e,n,r){return!s&&(r||n!==L)||((t=n).nodeType?a(e,n,r):f(e,n,r))}];i>u;u++)if(n=T.relative[e[u].type])l=[p(d(l),n)];else{if(n=T.filter[e[u].type].apply(null,e[u].matches),n[I]){for(r=++u;i>r&&!T.relative[e[r].type];r++);return m(u>1&&d(l),u>1&&h(e.slice(0,u-1)).replace(ft,"$1"),n,r>u&&g(e.slice(u,r)),i>r&&g(e=e.slice(r)),i>r&&h(e))}l.push(n)}return d(l)}function y(e,t){var n=0,r=t.length>0,s=e.length>0,u=function(i,u,a,f,l){var c,h,p,d=[],m=0,g="0",y=i&&[],b=null!=l,w=L,E=i||s&&T.find.TAG("*",l&&u.parentNode||u),S=U+=null==w?1:Math.random()||.1;for(b&&(L=u!==_&&u,x=n);null!=(c=E[g]);g++){if(s&&c){for(h=0;p=e[h++];)if(p(c,u,a)){f.push(c);break}b&&(U=S,x=++n)}r&&((c=!p&&c)&&m--,i&&y.push(c))}if(m+=g,r&&g!==m){for(h=0;p=t[h++];)p(y,d,u,a);if(i){if(m>0)for(;g--;)y[g]||d[g]||(d[g]=Y.call(f));d=v(d)}et.apply(f,d),b&&!i&&d.length>0&&m+t.length>1&&o.uniqueSort(f)}return b&&(U=S,L=w),y};return r?i(u):u}function b(e,t,n){for(var r=0,i=t.length;i>r;r++)o(e,t[r],n);return n}function w(e,t,n,r){var i,s,o,u,a,f=c(e);if(!r&&1===f.length){if(s=f[0]=f[0].slice(0),s.length>2&&"ID"===(o=s[0]).type&&9===t.nodeType&&P&&T.relative[s[1].type]){if(t=(T.find.ID(o.matches[0].replace(St,xt),t)||[])[0],!t)return n;e=e.slice(s.shift().value.length)}for(i=dt.needsContext.test(e)?0:s.length;i--&&(o=s[i],!T.relative[u=o.type]);)if((a=T.find[u])&&(r=a(o.matches[0].replace(St,xt),vt.test(s[0].type)&&t.parentNode||t))){if(s.splice(i,1),e=r.length&&h(s),!e)return et.apply(n,r),n;break}}return k(e,f)(r,t,!P,n,vt.test(e)),n}function E(){}var S,x,T,N,C,k,L,A,O,M,_,D,P,H,B,j,F,I="sizzle"+ -(new Date),q=window.document,R={},U=0,z=0,W=n(),X=n(),V=n(),$=!1,J=function(){return 0},K=typeof t,Q=1<<31,G=[],Y=G.pop,Z=G.push,et=G.push,tt=G.slice,nt=G.indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(this[t]===e)return t;return-1},rt="[\\x20\\t\\r\\n\\f]",it="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",st=it.replace("w","w#"),ot="([*^$|!~]?=)",ut="\\["+rt+"*("+it+")"+rt+"*(?:"+ot+rt+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+st+")|)|)"+rt+"*\\]",at=":("+it+")(?:\\(((['\"])((?:\\\\.|[^\\\\])*?)\\3|((?:\\\\.|[^\\\\()[\\]]|"+ut.replace(3,8)+")*)|.*)\\)|)",ft=new RegExp("^"+rt+"+|((?:^|[^\\\\])(?:\\\\.)*)"+rt+"+$","g"),lt=new RegExp("^"+rt+"*,"+rt+"*"),ct=new RegExp("^"+rt+"*([\\x20\\t\\r\\n\\f>+~])"+rt+"*"),ht=new RegExp(at),pt=new RegExp("^"+st+"$"),dt={ID:new RegExp("^#("+it+")"),CLASS:new RegExp("^\\.("+it+")"),NAME:new RegExp("^\\[name=['\"]?("+it+")['\"]?\\]"),TAG:new RegExp("^("+it.replace("w","w*")+")"),ATTR:new RegExp("^"+ut),PSEUDO:new RegExp("^"+at),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+rt+"*(even|odd|(([+-]|)(\\d*)n|)"+rt+"*(?:([+-]|)"+rt+"*(\\d+)|))"+rt+"*\\)|)","i"),needsContext:new RegExp("^"+rt+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+rt+"*((?:-\\d)?\\d*)"+rt+"*\\)|)(?=[^-]|$)","i")},vt=/[\x20\t\r\n\f]*[+~]/,mt=/^[^{]+\{\s*\[native code/,gt=/^(?:#([\w\-]+)|(\w+)|\.([\w\-]+))$/,yt=/^(?:input|select|textarea|button)$/i,bt=/^h\d$/i,wt=/'|\\/g,Et=/\=[\x20\t\r\n\f]*([^'"\]]*)[\x20\t\r\n\f]*\]/g,St=/\\([\da-fA-F]{1,6}[\x20\t\r\n\f]?|.)/g,xt=function(e,t){var n="0x"+t-65536;return n!==n?t:0>n?String.fromCharCode(n+65536):String.fromCharCode(55296|n>>10,56320|1023&n)};try{et.apply(G=tt.call(q.childNodes),q.childNodes),G[q.childNodes.length].nodeType}catch(Tt){et={apply:G.length?function(e,t){Z.apply(e,tt.call(t))}:function(e,t){for(var n=e.length,r=0;e[n++]=t[r++];);e.length=n-1}}}C=o.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return t?"HTML"!==t.nodeName:!1},M=o.setDocument=function(n){var r=n?n.ownerDocument||n:q;return r!==_&&9===r.nodeType&&r.documentElement?(_=r,D=r.documentElement,P=!C(r),R.getElementsByTagName=s(function(e){return e.appendChild(r.createComment("")),!e.getElementsByTagName("*").length}),R.attributes=s(function(e){e.innerHTML="<select></select>";var t=typeof e.lastChild.getAttribute("multiple");return"boolean"!==t&&"string"!==t}),R.getElementsByClassName=s(function(e){return e.innerHTML="<div class='hidden e'></div><div class='hidden'></div>",e.getElementsByClassName&&e.getElementsByClassName("e").length?(e.lastChild.className="e",2===e.getElementsByClassName("e").length):!1}),R.getByName=s(function(e){e.id=I+0,e.appendChild(_.createElement("a")).setAttribute("name",I),e.appendChild(_.createElement("i")).setAttribute("name",I),D.appendChild(e);var t=r.getElementsByName&&r.getElementsByName(I).length===2+r.getElementsByName(I+0).length;return D.removeChild(e),t}),R.sortDetached=s(function(e){return e.compareDocumentPosition&&1&e.compareDocumentPosition(_.createElement("div"))}),T.attrHandle=s(function(e){return e.innerHTML="<a href='#'></a>",e.firstChild&&typeof e.firstChild.getAttribute!==K&&"#"===e.firstChild.getAttribute("href")})?{}:{href:function(e){return e.getAttribute("href",2)},type:function(e){return e.getAttribute("type")}},R.getByName?(T.find.ID=function(e,t){if(typeof t.getElementById!==K&&P){var n=t.getElementById(e);return n&&n.parentNode?[n]:[]}},T.filter.ID=function(e){var t=e.replace(St,xt);return function(e){return e.getAttribute("id")===t}}):(T.find.ID=function(e,n){if(typeof n.getElementById!==K&&P){var r=n.getElementById(e);return r?r.id===e||typeof r.getAttributeNode!==K&&r.getAttributeNode("id").value===e?[r]:t:[]}},T.filter.ID=function(e){var t=e.replace(St,xt);return function(e){var n=typeof e.getAttributeNode!==K&&e.getAttributeNode("id");return n&&n.value===t}}),T.find.TAG=R.getElementsByTagName?function(e,t){return typeof t.getElementsByTagName!==K?t.getElementsByTagName(e):void 0}:function(e,t){var n,r=[],i=0,s=t.getElementsByTagName(e);if("*"===e){for(;n=s[i++];)1===n.nodeType&&r.push(n);return r}return s},T.find.NAME=R.getByName&&function(e,t){return typeof t.getElementsByName!==K?t.getElementsByName(name):void 0},T.find.CLASS=R.getElementsByClassName&&function(e,t){return typeof t.getElementsByClassName!==K&&P?t.getElementsByClassName(e):void 0},B=[],H=[":focus"],(R.qsa=e(r.querySelectorAll))&&(s(function(e){e.innerHTML="<select><option selected=''></option></select>",e.querySelectorAll("[selected]").length||H.push("\\["+rt+"*(?:checked|disabled|ismap|multiple|readonly|selected|value)"),e.querySelectorAll(":checked").length||H.push(":checked")}),s(function(e){e.innerHTML="<input type='hidden' i=''/>",e.querySelectorAll("[i^='']").length&&H.push("[*^$]="+rt+"*(?:\"\"|'')"),e.querySelectorAll(":enabled").length||H.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),H.push(",.*:")})),(R.matchesSelector=e(j=D.matchesSelector||D.mozMatchesSelector||D.webkitMatchesSelector||D.oMatchesSelector||D.msMatchesSelector))&&s(function(e){R.disconnectedMatch=j.call(e,"div"),j.call(e,"[s!='']:x"),B.push("!=",at)}),H=new RegExp(H.join("|")),B=B.length&&new RegExp(B.join("|")),F=e(D.contains)||D.compareDocumentPosition?function(e,t){var n=9===e.nodeType?e.documentElement:e,r=t&&t.parentNode;return e===r||!!r&&1===r.nodeType&&!!(n.contains?n.contains(r):e.compareDocumentPosition&&16&e.compareDocumentPosition(r))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},J=D.compareDocumentPosition?function(e,t){if(e===t)return $=!0,0;var n=t.compareDocumentPosition&&e.compareDocumentPosition&&e.compareDocumentPosition(t);return n?1&n||A&&t.compareDocumentPosition(e)===n?e===r||F(q,e)?-1:t===r||F(q,t)?1:O?nt.call(O,e)-nt.call(O,t):0:4&n?-1:1:e.compareDocumentPosition?-1:1}:function(e,t){var n,i=0,s=e.parentNode,o=t.parentNode,a=[e],f=[t];if(e===t)return $=!0,0;if(!s||!o)return e===r?-1:t===r?1:s?-1:o?1:0;if(s===o)return u(e,t);for(n=e;n=n.parentNode;)a.unshift(n);for(n=t;n=n.parentNode;)f.unshift(n);for(;a[i]===f[i];)i++;return i?u(a[i],f[i]):a[i]===q?-1:f[i]===q?1:0},_):_},o.matches=function(e,t){return o(e,null,null,t)},o.matchesSelector=function(e,t){if((e.ownerDocument||e)!==_&&M(e),t=t.replace(Et,"='$1']"),R.matchesSelector&&P&&(!B||!B.test(t))&&!H.test(t))try{var n=j.call(e,t);if(n||R.disconnectedMatch||e.document&&11!==e.document.nodeType)return n}catch(r){}return o(t,_,null,[e]).length>0},o.contains=function(e,t){return(e.ownerDocument||e)!==_&&M(e),F(e,t)},o.attr=function(e,t){var n;return(e.ownerDocument||e)!==_&&M(e),P&&(t=t.toLowerCase()),(n=T.attrHandle[t])?n(e):!P||R.attributes?e.getAttribute(t):((n=e.getAttributeNode(t))||e.getAttribute(t))&&e[t]===!0?t:n&&n.specified?n.value:null},o.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},o.uniqueSort=function(e){var t,n=[],r=0,i=0;if($=!R.detectDuplicates,A=!R.sortDetached,O=!R.sortStable&&e.slice(0),e.sort(J),$){for(;t=e[i++];)t===e[i]&&(r=n.push(i));for(;r--;)e.splice(n[r],1)}return e},N=o.getText=function(e){var t,n="",r=0,i=e.nodeType;if(i){if(1===i||9===i||11===i){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=N(e)}else if(3===i||4===i)return e.nodeValue}else for(;t=e[r];r++)n+=N(t);return n},T=o.selectors={cacheLength:50,createPseudo:i,match:dt,find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(St,xt),e[3]=(e[4]||e[5]||"").replace(St,xt),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||o.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&o.error(e[0]),e},PSEUDO:function(e){var t,n=!e[5]&&e[2];return dt.CHILD.test(e[0])?null:(e[4]?e[2]=e[4]:n&&ht.test(n)&&(t=c(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){return"*"===e?function(){return!0}:(e=e.replace(St,xt).toLowerCase(),function(t){return t.nodeName&&t.nodeName.toLowerCase()===e})},CLASS:function(e){var t=W[e+" "];return t||(t=new RegExp("(^|"+rt+")"+e+"("+rt+"|$)"))&&W(e,function(e){return t.test(e.className||typeof e.getAttribute!==K&&e.getAttribute("class")||"")})},ATTR:function(e,t,n){return function(r){var i=o.attr(r,e);return null==i?"!="===t:t?(i+="","="===t?i===n:"!="===t?i!==n:"^="===t?n&&0===i.indexOf(n):"*="===t?n&&i.indexOf(n)>-1:"$="===t?n&&i.slice(-n.length)===n:"~="===t?(" "+i+" ").indexOf(n)>-1:"|="===t?i===n||i.slice(0,n.length+1)===n+"-":!1):!0}},CHILD:function(e,t,n,r,i){var s="nth"!==e.slice(0,3),o="last"!==e.slice(-4),u="of-type"===t;return 1===r&&0===i?function(e){return!!e.parentNode}:function(t,n,a){var f,l,c,h,p,d,v=s!==o?"nextSibling":"previousSibling",m=t.parentNode,g=u&&t.nodeName.toLowerCase(),y=!a&&!u;if(m){if(s){for(;v;){for(c=t;c=c[v];)if(u?c.nodeName.toLowerCase()===g:1===c.nodeType)return!1;d=v="only"===e&&!d&&"nextSibling"}return!0}if(d=[o?m.firstChild:m.lastChild],o&&y){for(l=m[I]||(m[I]={}),f=l[e]||[],p=f[0]===U&&f[1],h=f[0]===U&&f[2],c=p&&m.childNodes[p];c=++p&&c&&c[v]||(h=p=0)||d.pop();)if(1===c.nodeType&&++h&&c===t){l[e]=[U,p,h];break}}else if(y&&(f=(t[I]||(t[I]={}))[e])&&f[0]===U)h=f[1];else for(;(c=++p&&c&&c[v]||(h=p=0)||d.pop())&&((u?c.nodeName.toLowerCase()!==g:1!==c.nodeType)||!++h||(y&&((c[I]||(c[I]={}))[e]=[U,h]),c!==t)););return h-=i,h===r||0===h%r&&h/r>=0}}},PSEUDO:function(e,t){var n,r=T.pseudos[e]||T.setFilters[e.toLowerCase()]||o.error("unsupported pseudo: "+e);return r[I]?r(t):r.length>1?(n=[e,e,"",t],T.setFilters.hasOwnProperty(e.toLowerCase())?i(function(e,n){for(var i,s=r(e,t),o=s.length;o--;)i=nt.call(e,s[o]),e[i]=!(n[i]=s[o])}):function(e){return r(e,0,n)}):r}},pseudos:{not:i(function(e){var t=[],n=[],r=k(e.replace(ft,"$1"));return r[I]?i(function(e,t,n,i){for(var s,o=r(e,null,i,[]),u=e.length;u--;)(s=o[u])&&(e[u]=!(t[u]=s))}):function(e,i,s){return t[0]=e,r(t,null,s,n),!n.pop()}}),has:i(function(e){return function(t){return o(e,t).length>0}}),contains:i(function(e){return function(t){return(t.textContent||t.innerText||N(t)).indexOf(e)>-1}}),lang:i(function(e){return pt.test(e||"")||o.error("unsupported lang: "+e),e=e.replace(St,xt).toLowerCase(),function(t){var n;do if(n=P?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return n=n.toLowerCase(),n===e||0===n.indexOf(e+"-");while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(e){var t=window.location&&window.location.hash;return t&&t.slice(1)===e.id},root:function(e){return e===D},focus:function(e){return e===_.activeElement&&(!_.hasFocus||_.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return e.disabled===!1},disabled:function(e){return e.disabled===!0},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeName>"@"||3===e.nodeType||4===e.nodeType)return!1;return!0},parent:function(e){return!T.pseudos.empty(e)},header:function(e){return bt.test(e.nodeName)},input:function(e){return yt.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||t.toLowerCase()===e.type)},first:l(function(){return[0]}),last:l(function(e,t){return[t-1]}),eq:l(function(e,t,n){return[0>n?n+t:n]}),even:l(function(e,t){for(var n=0;t>n;n+=2)e.push(n);return e}),odd:l(function(e,t){for(var n=1;t>n;n+=2)e.push(n);return e}),lt:l(function(e,t,n){for(var r=0>n?n+t:n;--r>=0;)e.push(r);return e}),gt:l(function(e,t,n){for(var r=0>n?n+t:n;++r<t;)e.push(r);return e})}};for(S in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})T.pseudos[S]=a(S);for(S in{submit:!0,reset:!0})T.pseudos[S]=f(S);return k=o.compile=function(e,t){var n,r=[],i=[],s=V[e+" "];if(!s){for(t||(t=c(e)),n=t.length;n--;)s=g(t[n]),s[I]?r.push(s):i.push(s);s=V(e,y(i,r))}return s},T.pseudos.nth=T.pseudos.eq,E.prototype=T.filters=T.pseudos,T.setFilters=new E,R.sortStable=I.split("").sort(J).join("")===I,M(),[0,0].sort(J),R.detectDuplicates=$,"function"==typeof r&&r.amd?r(function(){return o}):window.Sizzle=o,o}),r(l,[a,f],function(e,n){function r(e){return"undefined"!=typeof e}function i(e){return"string"==typeof e}function s(e){var t,n,r;for(r=m.createElement("div"),t=m.createDocumentFragment(),r.innerHTML=e;n=r.firstChild;)t.appendChild(n);return t}function o(e,t,n){var r;if("string"==typeof t)t=s(t);else if(t.length){for(r=0;r<t.length;r++)o(e,t[r],n);return e}for(r=e.length;r--;)n.call(e[r],t.parentNode?t:t);return e}function u(e,t){return e&&t&&-1!==(" "+e.className+" ").indexOf(" "+t+" ")}function a(e,t){var n;for(e=e||[],"string"==typeof e&&(e=e.split(" ")),t=t||{},n=e.length;n--;)t[e[n]]={};return t}function f(e,t){return new f.fn.init(e,t)}function l(e){var t=arguments,n,r,i;for(r=1;r<t.length;r++){n=t[r];for(i in n)e[i]=n[i]}return e}function c(e){var t=[],n,r;for(n=0,r=e.length;r>n;n++)t[n]=e[n];return t}function h(e,t){var n;if(t.indexOf)return t.indexOf(e);for(n=t.length;n--;)if(t[n]===e)return n;return-1}function p(e,t){var n,r,i,s,o;if(e)if(n=e.length,n===s){for(r in e)if(e.hasOwnProperty(r)&&(o=e[r],t.call(o,o,r)===!1))break}else for(i=0;n>i&&(o=e[i],t.call(o,o,r)!==!1);i++);return e}function d(e,n,r){for(var i=[],s=e[n];s&&9!==s.nodeType&&(r===t||1!==s.nodeType||!f(s).is(r));)1===s.nodeType&&i.push(s),s=s[n];return i}function v(e,t,n,r){for(var i=[];e;e=e[n])r&&e.nodeType!==r||e===t||i.push(e);return i}var m=document,g=Array.prototype.push,y=Array.prototype.slice,b=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,w=e.Event,E=a("fillOpacity fontWeight lineHeight opacity orphans widows zIndex zoom"),S=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},x=/^\s*|\s*$/g,T=function(e){return null===e||e===t?"":(""+e).replace(x,"")};return f.fn=f.prototype={constructor:f,selector:"",length:0,init:function(e,t){var n=this,r,o;if(!e)return n;if(e.nodeType)return n.context=n[0]=e,n.length=1,n;if(i(e)){if(r="<"===e.charAt(0)&&">"===e.charAt(e.length-1)&&e.length>=3?[null,e,null]:b.exec(e),!r)return f(t||document).find(e);if(r[1])for(o=s(e).firstChild;o;)this.add(o),o=o.nextSibling;else{if(o=m.getElementById(r[2]),o.id!==r[2])return n.find(e);n.length=1,n[0]=o}}else this.add(e);return n},toArray:function(){return c(this)},add:function(e){var t=this;return S(e)?g.apply(t,e):e instanceof f?t.add(e.toArray()):g.call(t,e),t},attr:function(e,n){var i=this;if("object"==typeof e)p(e,function(e,t){i.attr(t,e)});else{if(!r(n))return i[0]&&1===i[0].nodeType?i[0].getAttribute(e):t;this.each(function(){1===this.nodeType&&this.setAttribute(e,n)})}return i},css:function(e,n){var i=this;if("object"==typeof e)p(e,function(e,t){i.css(t,e)});else{if(e=e.replace(/-(\D)/g,function(e,t){return t.toUpperCase()}),!r(n))return i[0]?i[0].style[e]:t;"number"!=typeof n||E[e]||(n+="px"),i.each(function(){var t=this.style;"opacity"===e&&this.runtimeStyle&&"undefined"==typeof this.runtimeStyle.opacity&&(t.filter=""===n?"":"alpha(opacity="+100*n+")");try{t[e]=n}catch(r){}})}return i},remove:function(){for(var e=this,t,n=this.length;n--;)t=e[n],w.clean(t),t.parentNode&&t.parentNode.removeChild(t);return this},empty:function(){for(var e=this,t,n=this.length;n--;)for(t=e[n];t.firstChild;)t.removeChild(t.firstChild);return this},html:function(e){var t=this,n;if(r(e)){for(n=t.length;n--;)t[n].innerHTML=e;return t}return t[0]?t[0].innerHTML:""},text:function(e){var t=this,n;if(r(e)){for(n=t.length;n--;)t[n].innerText=t[0].textContent=e;return t}return t[0]?t[0].innerText||t[0].textContent:""},append:function(){return o(this,arguments,function(e){1===this.nodeType&&this.appendChild(e)})},prepend:function(){return o(this,arguments,function(e){1===this.nodeType&&this.insertBefore(e,this.firstChild)})},before:function(){var e=this;return e[0]&&e[0].parentNode?o(e,arguments,function(e){this.parentNode.insertBefore(e,this.nextSibling)}):e},after:function(){var e=this;return e[0]&&e[0].parentNode?o(e,arguments,function(e){this.parentNode.insertBefore(e,this)}):e},appendTo:function(e){return f(e).append(this),this},addClass:function(e){return this.toggleClass(e,!0)},removeClass:function(e){return this.toggleClass(e,!1)},toggleClass:function(e,t){var n=this;return-1!==e.indexOf(" ")?p(e.split(" "),function(){n.toggleClass(this,t)}):n.each(function(){var n=this,r;u(n,e)!==t&&(r=n.className,t?n.className+=r?" "+e:e:n.className=T((" "+r+" ").replace(" "+e+" "," ")))}),n},hasClass:function(e){return u(this[0],e)},each:function(e){return p(this,e)},on:function(e,t){return this.each(function(){w.bind(this,e,t)})},off:function(e,t){return this.each(function(){w.unbind(this,e,t)})},show:function(){return this.css("display","")},hide:function(){return this.css("display","none")},slice:function(){return new f(y.apply(this,arguments))},eq:function(e){return-1===e?this.slice(e):this.slice(e,+e+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},replaceWith:function(e){var t=this;return t[0]&&t[0].parentNode.replaceChild(f(e)[0],t[0]),t},wrap:function(e){return e=f(e)[0],this.each(function(){var t=this,n=e.cloneNode(!1);t.parentNode.insertBefore(n,t),n.appendChild(t)})},unwrap:function(){return this.each(function(){for(var e=this,t=e.firstChild,n;t;)n=t,t=t.nextSibling,e.parentNode.insertBefore(n,e)})},clone:function(){var e=[];return this.each(function(){e.push(this.cloneNode(!0))}),f(e)},find:function(e){var t,n,r=[];for(t=0,n=this.length;n>t;t++)f.find(e,this[t],r);return f(r)},push:g,sort:[].sort,splice:[].splice},l(f,{extend:l,toArray:c,inArray:h,isArray:S,each:p,trim:T,makeMap:a,find:n,expr:n.selectors,unique:n.uniqueSort,text:n.getText,isXMLDoc:n.isXML,contains:n.contains,filter:function(e,t,n){return n&&(e=":not("+e+")"),1===t.length?f.find.matchesSelector(t[0],e)?[t[0]]:[]:f.find.matches(e,t)}}),p({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return d(e,"parentNode")},parentsUntil:function(e,t){return d(e,"parentNode",t)},next:function(e){return v(e,"nextSibling",1)},prev:function(e){return v(e,"previousSibling",1)},nextNodes:function(e){return v(e,"nextSibling")},prevNodes:function(e){return v(e,"previousSibling")},children:function(e){return v(e.firstChild,"nextSibling",1)},contents:function(e){return c(("iframe"===e.nodeName?e.contentDocument||e.contentWindow.document:e).childNodes)}},function(e,t){f.fn[e]=function(n){var r=this,i;if(r.length>1)throw new Error("DomQuery only supports traverse functions on a single node.");return r[0]&&(i=t(r[0],n)),i=f(i),n&&"parentsUntil"!==e?i.filter(n):i}}),f.fn.filter=function(e){return f.filter(e)},f.fn.is=function(e){return!!e&&this.filter(e).length>0},f.fn.init.prototype=f.fn,f}),r(c,[],function(){return function(e,t){function n(e,t,n,r){function i(e){return e=parseInt(e,10).toString(16),e.length>1?e:"0"+e}return"#"+i(t)+i(n)+i(r)}var r=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/gi,i=/(?:url(?:(?:\(\s*\"([^\"]+)\"\s*\))|(?:\(\s*\'([^\']+)\'\s*\))|(?:\(\s*([^)\s]+)\s*\))))|(?:\'([^\']+)\')|(?:\"([^\"]+)\")/gi,s=/\s*([^:]+):\s*([^;]+);?/g,o=/\s+$/,u,a,f={},l,c="";for(e=e||{},l=("\\\" \\' \\; \\: ; : "+c).split(" "),a=0;a<l.length;a++)f[l[a]]=c+a,f[c+a]=l[a];return{toHex:function(e){return e.replace(r,n)},parse:function(t){function u(e,t){var n,r,i,s;n=d[e+"-top"+t],n&&(r=d[e+"-right"+t],n==r&&(i=d[e+"-bottom"+t],r==i&&(s=d[e+"-left"+t],i==s&&(d[e+t]=s,delete d[e+"-top"+t],delete d[e+"-right"+t],delete d[e+"-bottom"+t],delete d[e+"-left"+t]))))}function a(e){var t=d[e],n;if(t&&!(t.indexOf(" ")<0)){for(t=t.split(" "),n=t.length;n--;)if(t[n]!==t[0])return!1;return d[e]=t[0],!0}}function l(e,t,n,r){a(t)&&a(n)&&a(r)&&(d[e]=d[t]+" "+d[n]+" "+d[r],delete d[t],delete d[n],delete d[r])}function c(e){return y=!0,f[e]}function h(e,t){return y&&(e=e.replace(/\uFEFF[0-9]/g,function(e){return f[e]})),t||(e=e.replace(/\\([\'\";:])/g,"$1")),e}function p(e,t,n,r,i,s){return(i=i||s)?(i=h(i),"'"+i.replace(/\'/g,"\\'")+"'"):(t=h(t||n||r),b&&(t=b.call(w,t,"style")),"url('"+t.replace(/\'/g,"\\'")+"')")}var d={},v,m,g,y,b=e.url_converter,w=e.url_converter_scope||this;if(t){for(t=t.replace(/\\[\"\';:\uFEFF]/g,c).replace(/\"[^\"]+\"|\'[^\']+\'/g,function(e){return e.replace(/[;:]/g,c)});v=s.exec(t);)m=v[1].replace(o,"").toLowerCase(),g=v[2].replace(o,""),m&&g.length>0&&("font-weight"===m&&"700"===g?g="bold":("color"===m||"background-color"===m)&&(g=g.toLowerCase()),g=g.replace(r,n),g=g.replace(i,p),d[m]=y?h(g,!0):g),s.lastIndex=v.index+v[0].length;u("border",""),u("border","-width"),u("border","-color"),u("border","-style"),u("padding",""),u("margin",""),l("border","border-width","border-style","border-color"),"medium none"===d.border&&delete d.border}return d},serialize:function(e,n){function r(n){var r,s,o,a;if(r=t.styles[n])for(s=0,o=r.length;o>s;s++)n=r[s],a=e[n],a!==u&&a.length>0&&(i+=(i.length>0?" ":"")+n+": "+a+";")}var i="",s,o;if(n&&t&&t.styles)r("*"),r(n);else for(s in e)o=e[s],o!==u&&o.length>0&&(i+=(i.length>0?" ":"")+s+": "+o+";");return i}}}}),r(h,[],function(){return function(e,t){function n(e,n,r,i){var s,o;if(e){if(!i&&e[n])return e[n];if(e!=t){if(s=e[r])return s;for(o=e.parentNode;o&&o!=t;o=o.parentNode)if(s=o[r])return s}}}var r=e;this.current=function(){return r},this.next=function(e){return r=n(r,"firstChild","nextSibling",e)},this.prev=function(e){return r=n(r,"lastChild","previousSibling",e)}}}),r(p,[],function(){function e(e,n){return n?"array"==n&&m(e)?!0:typeof e==n:e!==t}function n(e){var t=[],n,r;for(n=0,r=e.length;r>n;n++)t[n]=e[n];return t}function r(e,t,n){var r;for(e=e||[],t=t||",","string"==typeof e&&(e=e.split(t)),n=n||{},r=e.length;r--;)n[e[r]]={};return n}function i(e,n,r){var i,s;if(!e)return 0;if(r=r||e,e.length!==t){for(i=0,s=e.length;s>i;i++)if(n.call(r,e[i],i,e)===!1)return 0}else for(i in e)if(e.hasOwnProperty(i)&&n.call(r,e[i],i,e)===!1)return 0;return 1}function s(e,t){var n=[];return i(e,function(e){n.push(t(e))}),n}function o(e,t){var n=[];return i(e,function(e){(!t||t(e))&&n.push(e)}),n}function u(e,t,n){var r=this,i,s,o,u,a,f=0;if(e=/^((static) )?([\w.]+)(:([\w.]+))?/.exec(e),o=e[3].match(/(^|\.)(\w+)$/i)[2],s=r.createNS(e[3].replace(/\.\w+$/,""),n),!s[o]){if("static"==e[2])return s[o]=t,this.onCreate&&this.onCreate(e[2],e[3],s[o]),void 0;t[o]||(t[o]=function(){},f=1),s[o]=t[o],r.extend(s[o].prototype,t),e[5]&&(i=r.resolve(e[5]).prototype,u=e[5].match(/\.(\w+)$/i)[1],a=s[o],s[o]=f?function(){return i[u].apply(this,arguments)}:function(){return this.parent=i[u],a.apply(this,arguments)},s[o].prototype[o]=s[o],r.each(i,function(e,t){s[o].prototype[t]=i[t]}),r.each(t,function(e,t){i[t]?s[o].prototype[t]=function(){return this.parent=i[t],e.apply(this,arguments)}:t!=o&&(s[o].prototype[t]=e)})),r.each(t["static"],function(e,t){s[o][t]=e})}}function a(e,t){var n,r;if(e)for(n=0,r=e.length;r>n;n++)if(e[n]===t)return n;return-1}function f(e,n){var r,i,s,o=arguments,u;for(r=1,i=o.length;i>r;r++){n=o[r];for(s in n)n.hasOwnProperty(s)&&(u=n[s],u!==t&&(e[s]=u))}return e}function l(e,t,n,r){r=r||this,e&&(n&&(e=e[n]),i(e,function(e,i){return t.call(r,e,i,n)===!1?!1:(l(e,t,n,r),void 0)}))}function c(e,t){var n,r;for(t=t||window,e=e.split("."),n=0;n<e.length;n++)r=e[n],t[r]||(t[r]={}),t=t[r];return t}function h(e,t){var n,r;for(t=t||window,e=e.split("."),n=0,r=e.length;r>n&&(t=t[e[n]],t);n++);return t}function p(t,n){return!t||e(t,"array")?t:s(t.split(n||","),v)}var d=/^\s*|\s*$/g,v=function(e){return null===e||e===t?"":(""+e).replace(d,"")},m=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};return{trim:v,isArray:m,is:e,toArray:n,makeMap:r,each:i,map:s,grep:o,inArray:a,extend:f,create:u,walk:l,createNS:c,resolve:h,explode:p}}),r(d,[p],function(e){function t(n){function r(){return H.createDocumentFragment()}function i(e,t){x(I,e,t)}function s(e,t){x(q,e,t)}function o(e){i(e.parentNode,V(e))}function u(e){i(e.parentNode,V(e)+1)}function a(e){s(e.parentNode,V(e))}function f(e){s(e.parentNode,V(e)+1)}function l(e){e?(P[z]=P[U],P[W]=P[R]):(P[U]=P[z],P[R]=P[W]),P.collapsed=I}function c(e){o(e),f(e)}function h(e){i(e,0),s(e,1===e.nodeType?e.childNodes.length:e.nodeValue.length)}function p(e,t){var n=P[U],r=P[R],i=P[z],s=P[W],o=t.startContainer,u=t.startOffset,a=t.endContainer,f=t.endOffset;return 0===e?S(n,r,o,u):1===e?S(i,s,o,u):2===e?S(i,s,a,f):3===e?S(n,r,a,f):void 0}function d(){T(F)}function v(){return T(B)}function m(){return T(j)}function g(e){var t=this[U],r=this[R],i,s;3!==t.nodeType&&4!==t.nodeType||!t.nodeValue?(t.childNodes.length>0&&(s=t.childNodes[r]),s?t.insertBefore(e,s):t.appendChild(e)):r?r>=t.nodeValue.length?n.insertAfter(e,t):(i=t.splitText(r),t.parentNode.insertBefore(e,i)):t.parentNode.insertBefore(e,t)}function y(e){var t=P.extractContents();P.insertNode(e),e.appendChild(t),P.selectNode(e)}function b(){return X(new t(n),{startContainer:P[U],startOffset:P[R],endContainer:P[z],endOffset:P[W],collapsed:P.collapsed,commonAncestorContainer:P.commonAncestorContainer})}function w(e,t){var n;if(3==e.nodeType)return e;if(0>t)return e;for(n=e.firstChild;n&&t>0;)--t,n=n.nextSibling;return n?n:e}function E(){return P[U]==P[z]&&P[R]==P[W]}function S(e,t,r,i){var s,o,u,a,f,l;if(e==r)return t==i?0:i>t?-1:1;for(s=r;s&&s.parentNode!=e;)s=s.parentNode;if(s){for(o=0,u=e.firstChild;u!=s&&t>o;)o++,u=u.nextSibling;return o>=t?-1:1}for(s=e;s&&s.parentNode!=r;)s=s.parentNode;if(s){for(o=0,u=r.firstChild;u!=s&&i>o;)o++,u=u.nextSibling;return i>o?-1:1}for(a=n.findCommonAncestor(e,r),f=e;f&&f.parentNode!=a;)f=f.parentNode;for(f||(f=a),l=r;l&&l.parentNode!=a;)l=l.parentNode;if(l||(l=a),f==l)return 0;for(u=a.firstChild;u;){if(u==f)return-1;if(u==l)return 1;u=u.nextSibling}}function x(e,t,r){var i,s;for(e?(P[U]=t,P[R]=r):(P[z]=t,P[W]=r),i=P[z];i.parentNode;)i=i.parentNode;for(s=P[U];s.parentNode;)s=s.parentNode;s==i?S(P[U],P[R],P[z],P[W])>0&&P.collapse(e):P.collapse(e),P.collapsed=E(),P.commonAncestorContainer=n.findCommonAncestor(P[U],P[z])}function T(e){var t,n=0,r=0,i,s,o,u,a,f;if(P[U]==P[z])return N(e);for(t=P[z],i=t.parentNode;i;t=i,i=i.parentNode){if(i==P[U])return C(t,e);++n}for(t=P[U],i=t.parentNode;i;t=i,i=i.parentNode){if(i==P[z])return k(t,e);++r}for(s=r-n,o=P[U];s>0;)o=o.parentNode,s--;for(u=P[z];0>s;)u=u.parentNode,s++;for(a=o.parentNode,f=u.parentNode;a!=f;a=a.parentNode,f=f.parentNode)o=a,u=f;return L(o,u,e)}function N(e){var t,n,i,s,o,u,a,f,l;if(e!=F&&(t=r()),P[R]==P[W])return t;if(3==P[U].nodeType){if(n=P[U].nodeValue,i=n.substring(P[R],P[W]),e!=j&&(s=P[U],f=P[R],l=P[W]-P[R],0===f&&l>=s.nodeValue.length-1?s.parentNode.removeChild(s):s.deleteData(f,l),P.collapse(I)),e==F)return;return i.length>0&&t.appendChild(H.createTextNode(i)),t}for(s=w(P[U],P[R]),o=P[W]-P[R];s&&o>0;)u=s.nextSibling,a=_(s,e),t&&t.appendChild(a),--o,s=u;return e!=j&&P.collapse(I),t}function C(e,t){var n,i,s,o,u,a;if(t!=F&&(n=r()),i=A(e,t),n&&n.appendChild(i),s=V(e),o=s-P[R],0>=o)return t!=j&&(P.setEndBefore(e),P.collapse(q)),n;for(i=e.previousSibling;o>0;)u=i.previousSibling,a=_(i,t),n&&n.insertBefore(a,n.firstChild),--o,i=u;return t!=j&&(P.setEndBefore(e),P.collapse(q)),n}function k(e,t){var n,i,s,o,u,a;for(t!=F&&(n=r()),s=O(e,t),n&&n.appendChild(s),i=V(e),++i,o=P[W]-i,s=e.nextSibling;s&&o>0;)u=s.nextSibling,a=_(s,t),n&&n.appendChild(a),--o,s=u;return t!=j&&(P.setStartAfter(e),P.collapse(I)),n}function L(e,t,n){var i,s,o,u,a,f,l,c;for(n!=F&&(s=r()),i=O(e,n),s&&s.appendChild(i),o=e.parentNode,u=V(e),a=V(t),++u,f=a-u,l=e.nextSibling;f>0;)c=l.nextSibling,i=_(l,n),s&&s.appendChild(i),l=c,--f;return i=A(t,n),s&&s.appendChild(i),n!=j&&(P.setStartAfter(e),P.collapse(I)),s}function A(e,t){var n=w(P[z],P[W]-1),r,i,s,o,u,a=n!=P[z];if(n==e)return M(n,a,q,t);for(r=n.parentNode,i=M(r,q,q,t);r;){for(;n;)s=n.previousSibling,o=M(n,a,q,t),t!=F&&i.insertBefore(o,i.firstChild),a=I,n=s;if(r==e)return i;n=r.previousSibling,r=r.parentNode,u=M(r,q,q,t),t!=F&&u.appendChild(i),i=u}}function O(e,t){var n=w(P[U],P[R]),r=n!=P[U],i,s,o,u,a;if(n==e)return M(n,r,I,t);for(i=n.parentNode,s=M(i,q,I,t);i;){for(;n;)o=n.nextSibling,u=M(n,r,I,t),t!=F&&s.appendChild(u),r=I,n=o;if(i==e)return s;n=i.nextSibling,i=i.parentNode,a=M(i,q,I,t),t!=F&&a.appendChild(s),s=a}}function M(e,t,r,i){var s,o,u,a,f;if(t)return _(e,i);if(3==e.nodeType){if(s=e.nodeValue,r?(a=P[R],o=s.substring(a),u=s.substring(0,a)):(a=P[W],o=s.substring(0,a),u=s.substring(a)),i!=j&&(e.nodeValue=u),i==F)return;return f=n.clone(e,q),f.nodeValue=o,f}if(i!=F)return n.clone(e,q)}function _(e,t){return t!=F?t==j?n.clone(e,I):e:(e.parentNode.removeChild(e),void 0)}function D(){return n.create("body",null,m()).outerText}var P=this,H=n.doc,B=0,j=1,F=2,I=!0,q=!1,R="startOffset",U="startContainer",z="endContainer",W="endOffset",X=e.extend,V=n.nodeIndex;return X(P,{startContainer:H,startOffset:0,endContainer:H,endOffset:0,collapsed:I,commonAncestorContainer:H,START_TO_START:0,START_TO_END:1,END_TO_END:2,END_TO_START:3,setStart:i,setEnd:s,setStartBefore:o,setStartAfter:u,setEndBefore:a,setEndAfter:f,collapse:l,selectNode:c,selectNodeContents:h,compareBoundaryPoints:p,deleteContents:d,extractContents:v,cloneContents:m,insertNode:g,surroundContents:y,cloneRange:b,toStringIE:D}),P}return t.prototype.toString=function(){return this.toStringIE()},t}),r(v,[p],function(e){function t(e){var t;return t=document.createElement("div"),t.innerHTML=e,t.textContent||t.innerText||e}function n(e,t){var n,r,i,o={};if(e){for(e=e.split(","),t=t||10,n=0;n<e.length;n+=2)r=String.fromCharCode(parseInt(e[n],t)),s[r]||(i="&"+e[n+1]+";",o[r]=i,o[i]=r);return o}}var r=e.makeMap,i,s,o,u=/[&<>\"\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,a=/[<>&\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,f=/[<>&\"\']/g,l=/&(#x|#)?([\w]+);/g,c={128:"",130:"",131:"",132:"",133:"",134:"",135:"",136:"",137:"",138:"",139:"",140:"",142:"",145:"",146:"",147:"",148:"",149:"",150:"",151:"",152:"",153:"",154:"",155:"",156:"",158:"",159:""};s={'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;","&":"&amp;"},o={"&lt;":"<","&gt;":">","&amp;":"&","&quot;":'"',"&apos;":"'"},i=n("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32);var h={encodeRaw:function(e,t){return e.replace(t?u:a,function(e){return s[e]||e})},encodeAllRaw:function(e){return(""+e).replace(f,function(e){return s[e]||e})},encodeNumeric:function(e,t){return e.replace(t?u:a,function(e){return e.length>1?"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";":s[e]||"&#"+e.charCodeAt(0)+";"})},encodeNamed:function(e,t,n){return n=n||i,e.replace(t?u:a,function(e){return s[e]||n[e]||e})},getEncodeFunc:function(e,t){function o(e,n){return e.replace(n?u:a,function(e){return s[e]||t[e]||"&#"+e.charCodeAt(0)+";"||e})}function f(e,n){return h.encodeNamed(e,n,t)}return t=n(t)||i,e=r(e.replace(/\+/g,",")),e.named&&e.numeric?o:e.named?t?f:h.encodeNamed:e.numeric?h.encodeNumeric:h.encodeRaw},decode:function(e){return e.replace(l,function(e,n,r){return n?(r=parseInt(r,2===n.length?16:10),r>65535?(r-=65536,String.fromCharCode(55296+(r>>10),56320+(1023&r))):c[r]||String.fromCharCode(r)):o[e]||i[e]||t(e)})}};return h}),r(m,[],function(){var e=navigator,t=e.userAgent,n,r,i,s,o,u;n=window.opera&&window.opera.buildNumber,r=/WebKit/.test(t),i=!r&&!n&&/MSIE/gi.test(t)&&/Explorer/gi.test(e.appName),i=i&&/MSIE (\w+)\./.exec(t)[1],s=!r&&/Gecko/.test(t),o=-1!=t.indexOf("Mac"),u=/(iPad|iPhone)/.test(t);var a=!u||t.match(/AppleWebKit\/(\d*)/)[1]>=534;return{opera:n,webkit:r,ie:i,gecko:s,mac:o,iOS:u,contentEditable:a,transparentSrc:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",caretAfter:8!=i,range:window.getSelection&&"Range"in window,documentMode:i?document.documentMode||7:10}}),r(g,[f,c,a,h,d,v,m,p],function(e,n,r,i,s,o,u,a){function f(e,t){var i=this,s;i.doc=e,i.win=window,i.files={},i.counter=0,i.stdMode=!m||e.documentMode>=8,i.boxModel=!m||"CSS1Compat"==e.compatMode||i.stdMode,i.hasOuterHTML="outerHTML"in e.createElement("a"),i.settings=t=d({keep_values:!1,hex_colors:1},t),i.schema=t.schema,i.styles=new n({url_converter:t.url_converter,url_converter_scope:t.url_converter_scope},t.schema),i.fixDoc(e),i.events=t.ownEvents?new r(t.proxy):r.Event,s=t.schema?t.schema.getBlockElements():{},i.isBlock=function(e){if(!e)return!1;var t=e.nodeType;return t?1===t&&!!s[e.nodeName]:!!s[e]}}var l=a.each,c=a.is,h=a.grep,p=a.trim,d=a.extend,v=u.webkit,m=u.ie,g=/^([a-z0-9],?)+$/i,y=/^[ \t\r\n]*$/,b=a.makeMap("fillOpacity fontWeight lineHeight opacity orphans widows zIndex zoom"," ");return f.prototype={root:null,props:{"for":"htmlFor","class":"className",className:"className",checked:"checked",disabled:"disabled",maxlength:"maxLength",readonly:"readOnly",selected:"selected",value:"value",id:"id",name:"name",type:"type"},fixDoc:function(e){var t=this.settings,n;if(m&&t.schema){"abbr article aside audio canvas details figcaption figure footer header hgroup mark menu meter nav output progress section summary time video".replace(/\w+/g,function(t){e.createElement(t)});for(n in t.schema.getCustomElements())e.createElement(n)}},clone:function(e,t){var n=this,r,i;return!m||1!==e.nodeType||t?e.cloneNode(t):(i=n.doc,t?r.firstChild:(r=i.createElement(e.nodeName),l(n.getAttribs(e),function(t){n.setAttrib(r,t.nodeName,n.getAttrib(e,t.nodeName))}),r))},getRoot:function(){var e=this;return e.get(e.settings.root_element)||e.doc.body},getViewPort:function(e){var t,n;return e=e?e:this.win,t=e.document,n=this.boxModel?t.documentElement:t.body,{x:e.pageXOffset||n.scrollLeft,y:e.pageYOffset||n.scrollTop,w:e.innerWidth||n.clientWidth,h:e.innerHeight||n.clientHeight}},getRect:function(e){var t=this,n,r;return e=t.get(e),n=t.getPos(e),r=t.getSize(e),{x:n.x,y:n.y,w:r.w,h:r.h}},getSize:function(e){var t=this,n,r;return e=t.get(e),n=t.getStyle(e,"width"),r=t.getStyle(e,"height"),-1===n.indexOf("px")&&(n=0),-1===r.indexOf("px")&&(r=0),{w:parseInt(n,10)||e.offsetWidth||e.clientWidth,h:parseInt(r,10)||e.offsetHeight||e.clientHeight}},getParent:function(e,t,n){return this.getParents(e,t,n,!1)},getParents:function(e,n,r,i){var s=this,o,u=[];for(e=s.get(e),i=i===t,r=r||("BODY"!=s.getRoot().nodeName?s.getRoot().parentNode:null),c(n,"string")&&(o=n,n="*"===n?function(e){return 1==e.nodeType}:function(e){return s.is(e,o)});e&&e!=r&&e.nodeType&&9!==e.nodeType;){if(!n||n(e)){if(!i)return e;u.push(e)}e=e.parentNode}return i?u:null},get:function(e){var t;return e&&this.doc&&"string"==typeof e&&(t=e,e=this.doc.getElementById(e),e&&e.id!==t)?this.doc.getElementsByName(t)[1]:e},getNext:function(e,t){return this._findSib(e,t,"nextSibling")},getPrev:function(e,t){return this._findSib(e,t,"previousSibling")},select:function(t,n){var r=this;return e(t,r.get(n)||r.get(r.settings.root_element)||r.doc,[])},is:function(n,r){var i;if(n.length===t){if("*"===r)return 1==n.nodeType;if(g.test(r)){for(r=r.toLowerCase().split(/,/),n=n.nodeName.toLowerCase(),i=r.length-1;i>=0;i--)if(r[i]==n)return!0;return!1}}return n.nodeType&&1!=n.nodeType?!1:e.matches(r,n.nodeType?[n]:n).length>0},add:function(e,t,n,r,i){var s=this;return this.run(e,function(e){var o;return o=c(t,"string")?s.doc.createElement(t):t,s.setAttribs(o,n),r&&(r.nodeType?o.appendChild(r):s.setHTML(o,r)),i?o:e.appendChild(o)})},create:function(e,t,n){return this.add(this.doc.createElement(e),e,t,n,1)},createHTML:function(e,t,n){var r="",i;r+="<"+e;for(i in t)t.hasOwnProperty(i)&&null!==t[i]&&(r+=" "+i+'="'+this.encode(t[i])+'"');return"undefined"!=typeof n?r+">"+n+"</"+e+">":r+" />"},createFragment:function(e){var t,n,r=this.doc,i;for(i=r.createElement("div"),t=r.createDocumentFragment(),e&&(i.innerHTML=e);n=i.firstChild;)t.appendChild(n);return t},remove:function(e,t){return this.run(e,function(e){var n,r=e.parentNode;if(!r)return null;if(t)for(;n=e.firstChild;)!m||3!==n.nodeType||n.nodeValue?r.insertBefore(n,e):e.removeChild(n);return r.removeChild(e)})},setStyle:function(e,t,n){return this.run(e,function(e){var r=this,i,s;if(t)if("string"==typeof t){i=e.style,t=t.replace(/-(\D)/g,function(e,t){return t.toUpperCase()}),"number"!=typeof n||b[t]||(n+="px"),"opacity"===t&&e.runtimeStyle&&"undefined"==typeof e.runtimeStyle.opacity&&(i.filter=""===n?"":"alpha(opacity="+100*n+")"),"float"==t&&(t="cssFloat"in e.style?"cssFloat":"styleFloat");try{i[t]=n}catch(o){}r.settings.update_styles&&e.removeAttribute("data-mce-style")}else for(s in t)r.setStyle(e,s,t[s])})},getStyle:function(e,n,r){if(e=this.get(e)){if(this.doc.defaultView&&r){n=n.replace(/[A-Z]/g,function(e){return"-"+e});try{return this.doc.defaultView.getComputedStyle(e,null).getPropertyValue(n)}catch(i){return null}}return n=n.replace(/-(\D)/g,function(e,t){return t.toUpperCase()}),"float"==n&&(n=m?"styleFloat":"cssFloat"),n.currentStyle&&r?e.currentStyle[n]:e.style?e.style[n]:t}},setStyles:function(e,t){this.setStyle(e,t)},css:function(e,t,n){this.setStyle(e,t,n)},removeAllAttribs:function(e){return this.run(e,function(e){var t,n=e.attributes;for(t=n.length-1;t>=0;t--)e.removeAttributeNode(n.item(t))})},setAttrib:function(e,t,n){var r=this;if(e&&t)return this.run(e,function(e){var i=r.settings,s=e.getAttribute(t);if(null!==n)switch(t){case"style":if(!c(n,"string"))return l(n,function(t,n){r.setStyle(e,n,t)}),void 0;i.keep_values&&(n?e.setAttribute("data-mce-style",n,2):e.removeAttribute("data-mce-style",2)),e.style.cssText=n;break;case"class":e.className=n||"";break;case"src":case"href":i.keep_values&&(i.url_converter&&(n=i.url_converter.call(i.url_converter_scope||r,n,t,e)),r.setAttrib(e,"data-mce-"+t,n,2));break;case"shape":e.setAttribute("data-mce-style",n)}c(n)&&null!==n&&0!==n.length?e.setAttribute(t,""+n,2):e.removeAttribute(t,2),s!=n&&i.onSetAttrib&&i.onSetAttrib({attrElm:e,attrName:t,attrValue:n})})},setAttribs:function(e,t){var n=this;return this.run(e,function(e){l(t,function(t,r){n.setAttrib(e,r,t)})})},getAttrib:function(e,t,n){var r,i=this,s;if(e=i.get(e),!e||1!==e.nodeType)return n===s?!1:n;if(c(n)||(n=""),/^(src|href|style|coords|shape)$/.test(t)&&(r=e.getAttribute("data-mce-"+t)))return r;if(m&&i.props[t]&&(r=e[i.props[t]],r=r&&r.nodeValue?r.nodeValue:r),r||(r=e.getAttribute(t,2)),/^(checked|compact|declare|defer|disabled|ismap|multiple|nohref|noshade|nowrap|readonly|selected)$/.test(t))return e[i.props[t]]===!0&&""===r?t:r?t:"";if("FORM"===e.nodeName&&e.getAttributeNode(t))return e.getAttributeNode(t).nodeValue;if("style"===t&&(r=r||e.style.cssText,r&&(r=i.serializeStyle(i.parseStyle(r),e.nodeName),i.settings.keep_values&&e.setAttribute("data-mce-style",r))),v&&"class"===t&&r&&(r=r.replace(/(apple|webkit)\-[a-z\-]+/gi,"")),m)switch(t){case"rowspan":case"colspan":1===r&&(r="");break;case"size":("+0"===r||20===r||0===r)&&(r="");break;case"width":case"height":case"vspace":case"checked":case"disabled":case"readonly":0===r&&(r="");break;case"hspace":-1===r&&(r="");break;case"maxlength":case"tabindex":(32768===r||2147483647===r||"32768"===r)&&(r="");break;case"multiple":case"compact":case"noshade":case"nowrap":return 65535===r?t:n;case"shape":r=r.toLowerCase();break;default:0===t.indexOf("on")&&r&&(r=(""+r).replace(/^function\s+\w+\(\)\s+\{\s+(.*)\s+\}$/,"$1"))}return r!==s&&null!==r&&""!==r?""+r:n},getPos:function(e,t){var n=this,r=0,i=0,s,o=n.doc,u;if(e=n.get(e),t=t||o.body,e){if(t===o.body&&e.getBoundingClientRect)return u=e.getBoundingClientRect(),t=n.boxModel?o.documentElement:o.body,r=u.left+(o.documentElement.scrollLeft||o.body.scrollLeft)-t.clientTop,i=u.top+(o.documentElement.scrollTop||o.body.scrollTop)-t.clientLeft,{x:r,y:i};for(s=e;s&&s!=t&&s.nodeType;)r+=s.offsetLeft||0,i+=s.offsetTop||0,s=s.offsetParent;for(s=e.parentNode;s&&s!=t&&s.nodeType;)r-=s.scrollLeft||0,i-=s.scrollTop||0,s=s.parentNode}return{x:r,y:i}},parseStyle:function(e){return this.styles.parse(e)},serializeStyle:function(e,t){return this.styles.serialize(e,t)},addStyle:function(e){var t=this,n=t.doc,r,i;if(t!==f.DOM&&n===document){var s=f.DOM.addedStyles;if(s=s||[],s[e])return;s[e]=!0,f.DOM.addedStyles=s}i=n.getElementById("mceDefaultStyles"),i||(i=n.createElement("style"),i.id="mceDefaultStyles",i.type="text/css",r=n.getElementsByTagName("head")[0],r.firstChild?r.insertBefore(i,r.firstChild):r.appendChild(i)),i.styleSheet?i.styleSheet.cssText+=e:i.appendChild(n.createTextNode(e))},loadCSS:function(e){var t=this,n=t.doc,r;return t!==f.DOM&&n===document?(f.DOM.loadCSS(e),void 0):(e||(e=""),r=n.getElementsByTagName("head")[0],l(e.split(","),function(e){var i;t.files[e]||(t.files[e]=!0,i=t.create("link",{rel:"stylesheet",href:e}),m&&n.documentMode&&n.recalc&&(i.onload=function(){n.recalc&&n.recalc(),i.onload=null}),r.appendChild(i))}),void 0)},addClass:function(e,t){return this.run(e,function(e){var n;return t?this.hasClass(e,t)?e.className:(n=this.removeClass(e,t),e.className=n=(""!==n?n+" ":"")+t,n):0})},removeClass:function(e,t){var n=this,r;return n.run(e,function(e){var i;return n.hasClass(e,t)?(r||(r=new RegExp("(^|\\s+)"+t+"(\\s+|$)","g")),i=e.className.replace(r," "),i=p(" "!=i?i:""),e.className=i,i||(e.removeAttribute("class"),e.removeAttribute("className")),i):e.className})},hasClass:function(e,t){return e=this.get(e),e&&t?-1!==(" "+e.className+" ").indexOf(" "+t+" "):!1},toggleClass:function(e,n,r){r=r===t?!this.hasClass(e,n):r,this.hasClass(e,n)!==r&&(r?this.addClass(e,n):this.removeClass(e,n))},show:function(e){return this.setStyle(e,"display","block")},hide:function(e){return this.setStyle(e,"display","none")},isHidden:function(e){return e=this.get(e),!e||"none"==e.style.display||"none"==this.getStyle(e,"display")},uniqueId:function(e){return(e?e:"mce_")+this.counter++},setHTML:function(e,t){var n=this;return n.run(e,function(e){if(m){for(;e.firstChild;)e.removeChild(e.firstChild);try{e.innerHTML="<br />"+t,e.removeChild(e.firstChild)}catch(r){var i=n.create("div");i.innerHTML="<br />"+t,l(h(i.childNodes),function(t,n){n&&e.canHaveHTML&&e.appendChild(t)})}}else e.innerHTML=t;return t})},getOuterHTML:function(e){var t,n=this;return(e=n.get(e))?1===e.nodeType&&n.hasOuterHTML?e.outerHTML:(t=(e.ownerDocument||n.doc).createElement("body"),t.appendChild(e.cloneNode(!0)),t.innerHTML):null},setOuterHTML:function(e,t,n){var r=this;return r.run(e,function(e){function i(){var i,s;for(s=n.createElement("body"),s.innerHTML=t,i=s.lastChild;i;)r.insertAfter(i.cloneNode(!0),e),i=i.previousSibling;r.remove(e)}if(1==e.nodeType)if(n=n||e.ownerDocument||r.doc,m)try{1==e.nodeType&&r.hasOuterHTML?e.outerHTML=t:i()}catch(s){i()}else i()})},decode:o.decode,encode:o.encodeAllRaw,insertAfter:function(e,t){return t=this.get(t),this.run(e,function(e){var n,r;return n=t.parentNode,r=t.nextSibling,r?n.insertBefore(e,r):n.appendChild(e),e})},replace:function(e,t,n){var r=this;return r.run(t,function(t){return c(t,"array")&&(e=e.cloneNode(!0)),n&&l(h(t.childNodes),function(t){e.appendChild(t)}),t.parentNode.replaceChild(e,t)})},rename:function(e,t){var n=this,r;return e.nodeName!=t.toUpperCase()&&(r=n.create(t),l(n.getAttribs(e),function(t){n.setAttrib(r,t.nodeName,n.getAttrib(e,t.nodeName))}),n.replace(r,e,1)),r||e},findCommonAncestor:function(e,t){for(var n=e,r;n;){for(r=t;r&&n!=r;)r=r.parentNode;if(n==r)break;n=n.parentNode}return!n&&e.ownerDocument?e.ownerDocument.documentElement:n},toHex:function(e){return this.styles.toHex(a.trim(e))},getClasses:function(){function e(t){l(t.imports,function(t){e(t)}),l(t.cssRules||t.rules,function(t){switch(t.type||1){case 1:t.selectorText&&l(t.selectorText.split(","),function(e){e=e.replace(/^\s*|\s*$|^\s\./g,""),!/\.mce/.test(e)&&/\.[\w\-]+$/.test(e)&&(s=e,e=e.replace(/.*\.([a-z0-9_\-]+).*/i,"$1"),(!i||(e=i(e,s)))&&(r[e]||(n.push({"class":e}),r[e]=1)))});break;case 3:e(t.styleSheet)}})}var t=this,n=[],r={},i=t.settings.class_filter,s;if(t.classes)return t.classes;try{l(t.doc.styleSheets,e)}catch(o){}return n.length>0&&(t.classes=n),n},run:function(e,t,n){var r=this,i;return"string"==typeof e&&(e=r.get(e)),e?(n=n||this,e.nodeType||!e.length&&0!==e.length?t.call(n,e):(i=[],l(e,function(e,s){e&&("string"==typeof e&&(e=r.get(e)),i.push(t.call(n,e,s)))}),i)):!1},getAttribs:function(e){var t;if(e=this.get(e),!e)return[];if(m){if(t=[],"OBJECT"==e.nodeName)return e.attributes;"OPTION"===e.nodeName&&this.getAttrib(e,"selected")&&t.push({specified:1,nodeName:"selected"});var n=/<\/?[\w:\-]+ ?|=[\"][^\"]+\"|=\'[^\']+\'|=[\w\-]+|>/gi;return e.cloneNode(!1).outerHTML.replace(n,"").replace(/[\w:\-]+/gi,function(e){t.push({specified:1,nodeName:e})}),t}return e.attributes},isEmpty:function(e,t){var n=this,r,s,o,u,a,f=0;if(e=e.firstChild){u=new i(e,e.parentNode),t=t||n.schema?n.schema.getNonEmptyElements():null;do{if(o=e.nodeType,1===o){if(e.getAttribute("data-mce-bogus"))continue;if(a=e.nodeName.toLowerCase(),t&&t[a]){if("br"===a){f++;continue}return!1}for(s=n.getAttribs(e),r=e.attributes.length;r--;)if(a=e.attributes[r].nodeName,"name"===a||"data-mce-bookmark"===a)return!1}if(8==o)return!1;if(3===o&&!y.test(e.nodeValue))return!1}while(e=u.next())}return 1>=f},createRng:function(){var e=this.doc;return e.createRange?e.createRange():new s(this)},nodeIndex:function(e,t){var n=0,r,i,s;if(e)for(r=e.nodeType,e=e.previousSibling,i=e;e;e=e.previousSibling)s=e.nodeType,(!t||3!=s||s!=r&&e.nodeValue.length)&&(n++,r=s);return n},split:function(e,t,n){function r(e){function t(e){var t=e.previousSibling&&"SPAN"==e.previousSibling.nodeName,n=e.nextSibling&&"SPAN"==e.nextSibling.nodeName;return t&&n}var n,s=e.childNodes,o=e.nodeType;if(1!=o||"bookmark"!=e.getAttribute("data-mce-type")){for(n=s.length-1;n>=0;n--)r(s[n]);if(9!=o){if(3==o&&e.nodeValue.length>0){var u=p(e.nodeValue).length;if(!i.isBlock(e.parentNode)||u>0||0===u&&t(e))return}else if(1==o&&(s=e.childNodes,1==s.length&&s[0]&&1==s[0].nodeType&&"bookmark"==s[0].getAttribute("data-mce-type")&&e.parentNode.insertBefore(s[0],e),s.length||/^(br|hr|input|img)$/i.test(e.nodeName)))return;i.remove(e)}return e}}var i=this,s=i.createRng(),o,u,a;return e&&t?(s.setStart(e.parentNode,i.nodeIndex(e)),s.setEnd(t.parentNode,i.nodeIndex(t)),o=s.extractContents(),s=i.createRng(),s.setStart(t.parentNode,i.nodeIndex(t)+1),s.setEnd(e.parentNode,i.nodeIndex(e)+1),u=s.extractContents(),a=e.parentNode,a.insertBefore(r(o),e),n?a.replaceChild(n,t):a.insertBefore(t,e),a.insertBefore(r(u),e),i.remove(e),n||t):void 0},bind:function(e,t,n,r){return this.events.bind(e,t,n,r||this)},unbind:function(e,t,n){return this.events.unbind(e,t,n)},fire:function(e,t,n){return this.events.fire(e,t,n)},getContentEditable:function(e){var t;return 1!=e.nodeType?null:(t=e.getAttribute("data-mce-contenteditable"),t&&"inherit"!==t?t:"inherit"!==e.contentEditable?e.contentEditable:null)},destroy:function(){var e=this;e.win=e.doc=e.root=e.events=e.frag=null},dumpRng:function(e){return"startContainer: "+e.startContainer.nodeName+", startOffset: "+e.startOffset+", endContainer: "+e.endContainer.nodeName+", endOffset: "+e.endOffset},_findSib:function(e,t,n){var r=this,i=t;if(e)for("string"==typeof i&&(i=function(e){return r.is(e,t)}),e=e[n];e;e=e[n])if(i(e))return e;return null}},f.DOM=new f(document),f}),r(y,[g,p],function(e,t){function n(){function e(e,t){function n(){s.remove(u),o&&(o.onreadystatechange=o.onload=o=null),t()}function i(){"undefined"!=typeof console&&console.log&&console.log("Failed to load: "+e)}var s=r,o,u;u=s.uniqueId(),o=document.createElement("script"),o.id=u,o.type="text/javascript",o.src=e,"onreadystatechange"in o?o.onreadystatechange=function(){/loaded|complete/.test(o.readyState)&&n()}:o.onload=n,o.onerror=i,(document.getElementsByTagName("head")[0]||document.body).appendChild(o)}var t=0,n=1,o=2,u={},a=[],f={},l=[],c=0,h;this.isDone=function(e){return u[e]==o},this.markDone=function(e){u[e]=o},this.add=this.load=function(e,n,r){var i=u[e];i==h&&(a.push(e),u[e]=t),n&&(f[e]||(f[e]=[]),f[e].push({func:n,scope:r||this}))},this.loadQueue=function(e,t){this.loadScripts(a,e,t)},this.loadScripts=function(t,r,a){function p(e){i(f[e],function(e){e.func.call(e.scope)}),f[e]=h}var d;l.push({func:r,scope:a||this}),d=function(){var r=s(t);t.length=0,i(r,function(t){return u[t]==o?(p(t),void 0):(u[t]!=n&&(u[t]=n,c++,e(t,function(){u[t]=o,c--,p(t),d()})),void 0)}),c||(i(l,function(e){e.func.call(e.scope)}),l.length=0)},d()}}var r=e.DOM,i=t.each,s=t.grep;return n.ScriptLoader=new n,n}),r(b,[y,p],function(e,n){function r(){var e=this;e.items=[],e.urls={},e.lookup={}}var i=n.each;return r.prototype={get:function(e){return this.lookup[e]?this.lookup[e].instance:t},dependencies:function(e){var t;return this.lookup[e]&&(t=this.lookup[e].dependencies),t||[]},requireLangPack:function(t){var n=r.settings;n&&n.language&&n.language_load!==!1&&e.ScriptLoader.add(this.urls[t]+"/langs/"+n.language+".js")},add:function(e,t,n){return this.items.push(t),this.lookup[e]={instance:t,dependencies:n},t},createUrl:function(e,t){return"object"==typeof t?t:{prefix:e.prefix,resource:t,suffix:e.suffix}},addComponents:function(t,n){var r=this.urls[t];i(n,function(t){e.ScriptLoader.add(r+"/"+t)})},load:function(n,s,o,u){function a(){var r=f.dependencies(n);i(r,function(e){var n=f.createUrl(s,e);f.load(n.resource,n,t,t)}),o&&(u?o.call(u):o.call(e))}var f=this,l=s;f.urls[n]||("object"==typeof s&&(l=s.prefix+s.resource+s.suffix),0!==l.indexOf("/")&&-1==l.indexOf("://")&&(l=r.baseURL+"/"+l),f.urls[n]=l.substring(0,l.lastIndexOf("/")),f.lookup[n]?a():e.ScriptLoader.add(l,a,u))}},r.PluginManager=new r,r.ThemeManager=new r,r}),r(w,[],function(){function e(e,t,n){var r,i,s=n?"lastChild":"firstChild",o=n?"prev":"next";if(e[s])return e[s];if(e!==t){if(r=e[o])return r;for(i=e.parent;i&&i!==t;i=i.parent)if(r=i[o])return r}}function t(e,t){this.name=e,this.type=t,1===t&&(this.attributes=[],this.attributes.map={})}var n=/^[ \t\r\n]*$/,r={"#text":3,"#comment":8,"#cdata":4,"#pi":7,"#doctype":10,"#document-fragment":11};return t.prototype={replace:function(e){var t=this;return e.parent&&e.remove(),t.insert(e,t),t.remove(),t},attr:function(e,t){var n=this,r,i,s;if("string"!=typeof e){for(i in e)n.attr(i,e[i]);return n}if(r=n.attributes){if(t!==s){if(null===t){if(e in r.map)for(delete r.map[e],i=r.length;i--;)if(r[i].name===e)return r=r.splice(i,1),n;return n}if(e in r.map){for(i=r.length;i--;)if(r[i].name===e){r[i].value=t;break}}else r.push({name:e,value:t});return r.map[e]=t,n}return r.map[e]}},clone:function(){var e=this,n=new t(e.name,e.type),r,i,s,o,u;if(s=e.attributes){for(u=[],u.map={},r=0,i=s.length;i>r;r++)o=s[r],"id"!==o.name&&(u[u.length]={name:o.name,value:o.value},u.map[o.name]=o.value);n.attributes=u}return n.value=e.value,n.shortEnded=e.shortEnded,n},wrap:function(e){var t=this;return t.parent.insert(e,t),e.append(t),t},unwrap:function(){var e=this,t,n;for(t=e.firstChild;t;)n=t.next,e.insert(t,e,!0),t=n;e.remove()},remove:function(){var e=this,t=e.parent,n=e.next,r=e.prev;return t&&(t.firstChild===e?(t.firstChild=n,n&&(n.prev=null)):r.next=n,t.lastChild===e?(t.lastChild=r,r&&(r.next=null)):n.prev=r,e.parent=e.next=e.prev=null),e},append:function(e){var t=this,n;return e.parent&&e.remove(),n=t.lastChild,n?(n.next=e,e.prev=n,t.lastChild=e):t.lastChild=t.firstChild=e,e.parent=t,e},insert:function(e,t,n){var r;return e.parent&&e.remove(),r=t.parent||this,n?(t===r.firstChild?r.firstChild=e:t.prev.next=e,e.prev=t.prev,e.next=t,t.prev=e):(t===r.lastChild?r.lastChild=e:t.next.prev=e,e.next=t.next,e.prev=t,t.next=e),e.parent=r,e},getAll:function(t){var n=this,r,i=[];for(r=n.firstChild;r;r=e(r,n))r.name===t&&i.push(r);return i},empty:function(){var t=this,n,r,i;if(t.firstChild){for(n=[],i=t.firstChild;i;i=e(i,t))n.push(i);for(r=n.length;r--;)i=n[r],i.parent=i.firstChild=i.lastChild=i.next=i.prev=null}return t.firstChild=t.lastChild=null,t},isEmpty:function(t){var r=this,i=r.firstChild,s,o;if(i)do{if(1===i.type){if(i.attributes.map["data-mce-bogus"])continue;if(t[i.name])return!1;for(s=i.attributes.length;s--;)if(o=i.attributes[s].name,"name"===o||0===o.indexOf("data-mce-"))return!1}if(8===i.type)return!1;if(3===i.type&&!n.test(i.value))return!1}while(i=e(i,r));return!0},walk:function(t){return e(this,null,t)}},t.create=function(e,n){var i,s;if(i=new t(e,r[e]||1),n)for(s in n)i.attr(s,n[s]);return i},t}),r(E,[p],function(e){function t(e,t){return e?e.split(t||" "):[]}function n(e){function n(e,n,r){function i(e){var t={},n,r;for(n=0,r=e.length;r>n;n++)t[e[n]]={};return t}var s,a,f,l=arguments;for(r=r||[],n=n||"","string"==typeof r&&(r=t(r)),a=3;a<l.length;a++)"string"==typeof l[a]&&(l[a]=t(l[a])),r.push.apply(r,l[a]);for(e=t(e),s=e.length;s--;)f=[].concat(u,t(n)),o[e[s]]={attributes:i(f),attributesOrder:f,children:i(r)}}function i(e,n){var r,i,s,u;for(e=t(e),r=e.length,n=t(n);r--;)for(i=o[e[r]],s=0,u=n.length;u>s;s++)i.attributes[n[s]]={},i.attributesOrder.push(n[s])}var o={},u,a,f,l,c,h,p;return r[e]?r[e]:(u=t("id accesskey class dir lang style tabindex title"),a=t("onabort onblur oncancel oncanplay oncanplaythrough onchange onclick onclose oncontextmenu oncuechange ondblclick ondrag ondragend ondragenter ondragleave ondragover ondragstart ondrop ondurationchange onemptied onended onerror onfocus oninput oninvalid onkeydown onkeypress onkeyup onload onloadeddata onloadedmetadata onloadstart onmousedown onmousemove onmouseout onmouseover onmouseup onmousewheel onpause onplay onplaying onprogress onratechange onreset onscroll onseeked onseeking onseeking onselect onshow onstalled onsubmit onsuspend ontimeupdate onvolumechange onwaiting"),f=t("address blockquote div dl fieldset form h1 h2 h3 h4 h5 h6 hr menu ol p pre table ul"),l=t("a abbr b bdo br button cite code del dfn em embed i iframe img input ins kbd label map noscript object q s samp script select small span strong sub sup textarea u var #text #comment"),"html4"!=e&&(u.push.apply(u,t("contenteditable contextmenu draggable dropzone hidden spellcheck translate")),f.push.apply(f,t("article aside details dialog figure header footer hgroup section nav")),l.push.apply(l,t("audio canvas command datalist mark meter output progress time wbr video ruby bdi keygen"))),"html5-strict"!=e&&(u.push("xml:lang"),p=t("acronym applet basefont big font strike tt"),l.push.apply(l,p),s(p,function(e){n(e,"",l)}),h=t("center dir isindex noframes"),f.push.apply(f,h),c=[].concat(f,l),s(h,function(e){n(e,"",c)})),c=c||[].concat(f,l),n("html","manifest","head body"),n("head","","base command link meta noscript script style title"),n("title hr noscript br"),n("base","href target"),n("link","href rel media hreflang type sizes hreflang"),n("meta","name http-equiv content charset"),n("style","media type scoped"),n("script","src async defer type charset"),n("body","onafterprint onbeforeprint onbeforeunload onblur onerror onfocus onhashchange onload onmessage onoffline ononline onpagehide onpageshow onpopstate onresize onscroll onstorage onunload",c),n("address dt dd div caption","",c),n("h1 h2 h3 h4 h5 h6 pre p abbr code var samp kbd sub sup i b u bdo span legend em strong small s cite dfn","",l),n("blockquote","cite",c),n("ol","reversed start type","li"),n("ul","","li"),n("li","value",c),n("dl","","dt dd"),n("a","href target rel media hreflang type",l),n("q","cite",l),n("ins del","cite datetime",c),n("img","src alt usemap ismap width height"),n("iframe","src name width height",c),n("embed","src type width height"),n("object","data type typemustmatch name usemap form width height",c,"param"),n("param","name value"),n("map","name",c,"area"),n("area","alt coords shape href target rel media hreflang type"),n("table","border","caption colgroup thead tfoot tbody tr"+("html4"==e?" col":"")),n("colgroup","span","col"),n("col","span"),n("tbody thead tfoot","","tr"),n("tr","","td th"),n("td","colspan rowspan headers",c),n("th","colspan rowspan headers scope abbr",c),n("form","accept-charset action autocomplete enctype method name novalidate target",c),n("fieldset","disabled form name",c,"legend"),n("label","form for",l),n("input","accept alt autocomplete checked dirname disabled form formaction formenctype formmethod formnovalidate formtarget height list max maxlength min multiple name pattern readonly required size src step type value width"),n("button","disabled form formaction formenctype formmethod formnovalidate formtarget name type value","html4"==e?c:l),n("select","disabled form multiple name required size","option optgroup"),n("optgroup","disabled label","option"),n("option","disabled label selected value"),n("textarea","cols dirname disabled form maxlength name readonly required rows wrap"),n("menu","type label",c,"li"),n("noscript","",c),"html4"!=e&&(n("wbr"),n("ruby","",l,"rt rp"),n("figcaption","",c),n("mark rt rp summary bdi","",l),n("canvas","width height",c),n("video","src crossorigin poster preload autoplay mediagroup loop muted controls width height",c,"track source"),n("audio","src crossorigin preload autoplay mediagroup loop muted controls",c,"track source"),n("source","src type media"),n("track","kind src srclang label default"),n("datalist","",l,"option"),n("article section nav aside header footer","",c),n("hgroup","","h1 h2 h3 h4 h5 h6"),n("figure","",c,"figcaption"),n("time","datetime",l),n("dialog","open",c),n("command","type label icon disabled checked radiogroup command"),n("output","for form name",l),n("progress","value max",l),n("meter","value min max low high optimum",l),n("details","open",c,"summary"),n("keygen","autofocus challenge disabled form keytype name")),"html5-strict"!=e&&(i("script","language xml:space"),i("style","xml:space"),i("object","declare classid codebase codetype archive standby align border hspace vspace"),i("param","valuetype type"),i("a","charset name rev shape coords"),i("br","clear"),i("applet","codebase archive code object alt name width height align hspace vspace"),i("img","name longdesc align border hspace vspace"),i("iframe","longdesc frameborder marginwidth marginheight scrolling align"),i("font basefont","size color face"),i("input","usemap align"),i("select","onchange"),i("textarea"),i("h1 h2 h3 h4 h5 h6 div p legend caption","align"),i("ul","type compact"),i("li","type"),i("ol dl menu dir","compact"),i("pre","width xml:space"),i("hr","align noshade size width"),i("isindex","prompt"),i("table","summary width frame rules cellspacing cellpadding align bgcolor"),i("col","width align char charoff valign"),i("colgroup","width align char charoff valign"),i("thead","align char charoff valign"),i("tr","align char charoff valign bgcolor"),i("th","axis align char charoff valign nowrap bgcolor width height"),i("form","accept"),i("td","abbr axis scope align char charoff valign nowrap bgcolor width height"),i("tfoot","align char charoff valign"),i("tbody","align char charoff valign"),i("area","nohref"),i("body","background bgcolor text link vlink alink")),"html4"!=e&&(i("input button select textarea","autofocus"),i("input textarea","placeholder"),i("a","download"),i("link script img","crossorigin"),i("iframe","srcdoc sandbox seamless allowfullscreen")),s(t("a form meter progress dfn"),function(e){o[e]&&delete o[e].children[e]}),delete o.caption.children.table,r[e]=o,o)}var r={},i=e.makeMap,s=e.each,o=e.extend,u=e.explode,a=e.inArray;return function(e){function f(t,n,s){var u=e[t];return u?u=i(u,",",i(u.toUpperCase()," ")):(u=r[t],u||(u=i(n," ",i(n.toUpperCase()," ")),u=o(u,s),r[t]=u)),u}function l(e){return new RegExp("^"+e.replace(/([?+*])/g,".$1")+"$")}function c(e){var n,r,s,o,u,f,c,h,p,d,v,m,y,w,E,S,x,T,N,C=/^([#+\-])?([^\[!\/]+)(?:\/([^\[!]+))?(?:(!?)\[([^\]]+)\])?$/,k=/^([!\-])?(\w+::\w+|[^=:<]+)?(?:([=:<])(.*))?$/,L=/[*?+]/;if(e)for(e=t(e,","),g["@"]&&(S=g["@"].attributes,x=g["@"].attributesOrder),n=0,r=e.length;r>n;n++)if(u=C.exec(e[n])){if(w=u[1],p=u[2],E=u[3],h=u[5],m={},y=[],f={attributes:m,attributesOrder:y},"#"===w&&(f.paddEmpty=!0),"-"===w&&(f.removeEmpty=!0),"!"===u[4]&&(f.removeEmptyAttrs=!0),S){for(T in S)m[T]=S[T];y.push.apply(y,x)}if(h)for(h=t(h,"|"),s=0,o=h.length;o>s;s++)if(u=k.exec(h[s])){if(c={},v=u[1],d=u[2].replace(/::/g,":"),w=u[3],N=u[4],"!"===v&&(f.attributesRequired=f.attributesRequired||[],f.attributesRequired.push(d),c.required=!0),"-"===v){delete m[d],y.splice(a(y,d),1);continue}w&&("="===w&&(f.attributesDefault=f.attributesDefault||[],f.attributesDefault.push({name:d,value:N}),c.defaultValue=N),":"===w&&(f.attributesForced=f.attributesForced||[],f.attributesForced.push({name:d,value:N}),c.forcedValue=N),"<"===w&&(c.validValues=i(N,"?"))),L.test(d)?(f.attributePatterns=f.attributePatterns||[],c.pattern=l(d),f.attributePatterns.push(c)):(m[d]||y.push(d),m[d]=c)}S||"@"!=p||(S=m,x=y),E&&(f.outputName=p,g[E]=f),L.test(p)?(f.pattern=l(p),b.push(f)):g[p]=f}}function h(e){g={},b=[],c(e),s(E,function(e,t){y[t]=e.children})}function p(e){var n=/^(~)?(.+)$/;e&&s(t(e,","),function(e){var t=n.exec(e),r="~"===t[1],i=r?"span":"div",o=t[2];y[o]=y[i],A[o]=i,r||(C[o.toUpperCase()]={},C[o]={}),g[o]||(g[o]=g[i]),s(y,function(e){e[i]&&(e[o]=e[i])})})}function d(e){var n=/^([+\-]?)(\w+)\[([^\]]+)\]$/;e&&s(t(e,","),function(e){var r=n.exec(e),i,o;r&&(o=r[1],i=o?y[r[2]]:y[r[2]]={"#comment":{}},i=y[r[2]],s(t(r[3],"|"),function(e){"-"===o?delete i[e]:i[e]={}}))})}function v(e){var t=g[e],n;if(t)return t;for(n=b.length;n--;)if(t=b[n],t.pattern.test(e))return t}var m=this,g={},y={},b=[],w,E,S,x,T,N,C,k,L,A={},O={};e=e||{},E=n(e.schema),e.verify_html===!1&&(e.valid_elements="*[*]"),e.valid_styles&&(w={},s(e.valid_styles,function(e,t){w[t]=u(e)})),S=f("whitespace_elements","pre script noscript style textarea video audio iframe object"),x=f("self_closing_elements","colgroup dd dt li option p td tfoot th thead tr"),T=f("short_ended_elements","area base basefont br col frame hr img input isindex link meta param embed source wbr track"),N=f("boolean_attributes","checked compact declare defer disabled ismap multiple nohref noresize noshade nowrap readonly selected autoplay loop controls"),k=f("non_empty_elements","td th iframe video audio object",T),L=f("text_block_elements","h1 h2 h3 h4 h5 h6 p div address pre form blockquote center dir fieldset header footer article section hgroup aside nav figure"),C=f("block_elements","hr table tbody thead tfoot th tr td li ol ul caption dl dt dd noscript menu isindex samp option datalist select optgroup",L),s((e.special||"script noscript style textarea").split(" "),function(e){O[e]=new RegExp("</"+e+"[^>]*>","gi")}),e.valid_elements?h(e.valid_elements):(s(E,function(e,t){g[t]={attributes:e.attributes,attributesOrder:e.attributesOrder},y[t]=e.children}),"html5"!=e.schema&&s(t("strong/b em/i"),function(e){e=t(e,"/"),g[e[1]].outputName=e[0]}),g.img.attributesDefault=[{name:"alt",value:""}],s(t("ol ul sub sup blockquote span font a table tbody tr strong em b i"),function(e){g[e]&&(g[e].removeEmpty=!0)}),s(t("p h1 h2 h3 h4 h5 h6 th td pre div address caption"),function(e){g[e].paddEmpty=!0}),s(t("span"),function(e){g[e].removeEmptyAttrs=!0})),p(e.custom_elements),d(e.valid_children),c(e.extended_valid_elements),d("+ol[ul|ol],+ul[ul|ol]"),e.invalid_elements&&s(u(e.invalid_elements),function(e){g[e]&&delete g[e]}),v("span")||c("span[!data-mce-type|*]"),m.children=y,m.styles=w,m.getBoolAttrs=function(){return N},m.getBlockElements=function(){return C},m.getTextBlockElements=function(){return L},m.getShortEndedElements=function(){return T},m.getSelfClosingElements=function(){return x},m.getNonEmptyElements=function(){return k},m.getWhiteSpaceElements=function(){return S},m.getSpecialElements=function(){return O},m.isValidChild=function(e,t){var n=y[e];return!!n&&!!n[t]},m.isValid=function(e,t){var n,r,i=v(e);if(i){if(!t)return!0;if(i.attributes[t])return!0;if(n=i.attributePatterns)for(r=n.length;r--;)if(n[r].pattern.test(e))return!0}return!1},m.getElementRule=v,m.getCustomElements=function(){return A},m.addValidElements=c,m.setValidElements=h,m.addCustomElements=p,m.addValidChildren=d,m.elements=g}}),r(S,[E,v,p],function(e,t,n){var r=n.each;return function(n,i){var s=this,o=function(){};n=n||{},s.schema=i=i||new e,n.fix_self_closing!==!1&&(n.fix_self_closing=!0),r("comment cdata text start end pi doctype".split(" "),function(e){e&&(s[e]=n[e]||o)}),s.parse=function(e){function r(e){var t,n;for(t=c.length;t--&&c[t].name!==e;);if(t>=0){for(n=c.length-1;n>=t;n--)e=c[n],e.valid&&o.end(e.name);c.length=t}}function s(e,t,n,r,i){var s,o;if(t=t.toLowerCase(),n=t in b?t:F(n||r||i||""),E&&!m&&0!==t.indexOf("data-")){if(s=C[t],!s&&k){for(o=k.length;o--&&(s=k[o],!s.pattern.test(t)););-1===o&&(s=null)}if(!s)return;if(s.validValues&&!(n in s.validValues))return}h.map[t]=n,h.push({name:t,value:n})}var o=this,u,a=0,f,l,c=[],h,p,d,v,m,g,y,b,w,E,S,x,T,N,C,k,L,A,O,M,_,D,P,H,B,j=0,F=t.decode,I;for(D=new RegExp("<(?:(?:!--([\\w\\W]*?)-->)|(?:!\\[CDATA\\[([\\w\\W]*?)\\]\\]>)|(?:!DOCTYPE([\\w\\W]*?)>)|(?:\\?([^\\s\\/<>]+) ?([\\w\\W]*?)[?/]>)|(?:\\/([^>]+)>)|(?:([A-Za-z0-9\\-\\:\\.]+)((?:\\s+[^\"'>]+(?:(?:\"[^\"]*\")|(?:'[^']*')|[^>]*))*|\\/|\\s+)>))","g"),P=/([\w:\-]+)(?:\s*=\s*(?:(?:\"((?:[^\"])*)\")|(?:\'((?:[^\'])*)\')|([^>\s]+)))?/g,y=i.getShortEndedElements(),_=n.self_closing_elements||i.getSelfClosingElements(),b=i.getBoolAttrs(),E=n.validate,g=n.remove_internals,I=n.fix_self_closing,H=i.getSpecialElements();u=D.exec(e);){if(a<u.index&&o.text(F(e.substr(a,u.index-a))),f=u[6])f=f.toLowerCase(),":"===f.charAt(0)&&(f=f.substr(1)),r(f);else if(f=u[7]){if(f=f.toLowerCase(),":"===f.charAt(0)&&(f=f.substr(1)),w=f in y,I&&_[f]&&c.length>0&&c[c.length-1].name===f&&r(f),!E||(S=i.getElementRule(f))){if(x=!0,E&&(C=S.attributes,k=S.attributePatterns),(N=u[8])?(m=-1!==N.indexOf("data-mce-type"),m&&g&&(x=!1),h=[],h.map={},N.replace(P,s)):(h=[],h.map={}),E&&!m){if(L=S.attributesRequired,A=S.attributesDefault,O=S.attributesForced,M=S.removeEmptyAttrs,M&&!h.length&&(x=!1),O)for(p=O.length;p--;)T=O[p],v=T.name,B=T.value,"{$uid}"===B&&(B="mce_"+j++),h.map[v]=B,h.push({name:v,value:B});if(A)for(p=A.length;p--;)T=A[p],v=T.name,v in h.map||(B=T.value,"{$uid}"===B&&(B="mce_"+j++),h.map[v]=B,h.push({name:v,value:B}));if(L){for(p=L.length;p--&&!(L[p]in h.map););-1===p&&(x=!1)}h.map["data-mce-bogus"]&&(x=!1)}x&&o.start(f,h,w)}else x=!1;if(l=H[f]){l.lastIndex=a=u.index+u[0].length,(u=l.exec(e))?(x&&(d=e.substr(a,u.index-a)),a=u.index+u[0].length):(d=e.substr(a),a=e.length),x&&(d.length>0&&o.text(d,!0),o.end(f)),D.lastIndex=a;continue}w||(N&&N.indexOf("/")==N.length-1?x&&o.end(f):c.push({name:f,valid:x}))}else(f=u[1])?o.comment(f):(f=u[2])?o.cdata(f):(f=u[3])?o.doctype(f):(f=u[4])&&o.pi(f,u[5]);a=u.index+u[0].length}for(a<e.length&&o.text(F(e.substr(a))),p=c.length-1;p>=0;p--)f=c[p],f.valid&&o.end(f.name)}}}),r(x,[w,E,S,p],function(e,t,n,r){var i=r.makeMap,s=r.each,o=r.explode,u=r.extend;return function(r,a){function f(t){var n,r,s,o,u,f,c,h,p,d,v,m,g,y;for(v=i("tr,td,th,tbody,thead,tfoot,table"),d=a.getNonEmptyElements(),m=a.getTextBlockElements(),n=0;n<t.length;n++)if(r=t[n],r.parent&&!r.fixed)if(m[r.name]&&"li"==r.parent.name){for(g=r.next;g&&m[g.name];)g.name="li",g.fixed=!0,r.parent.insert(g,r.parent),g=g.next;r.unwrap(r)}else{for(o=[r],s=r.parent;s&&!a.isValidChild(s.name,r.name)&&!v[s.name];s=s.parent)o.push(s);if(s&&o.length>1){for(o.reverse(),u=f=l.filterNode(o[0].clone()),p=0;p<o.length-1;p++){for(a.isValidChild(f.name,o[p].name)?(c=l.filterNode(o[p].clone()),f.append(c)):c=f,h=o[p].firstChild;h&&h!=o[p+1];)y=h.next,c.append(h),h=y;f=c}u.isEmpty(d)?s.insert(r,o[0],!0):(s.insert(u,o[0],!0),s.insert(r,u)),s=o[0],(s.isEmpty(d)||s.firstChild===s.lastChild&&"br"===s.firstChild.name)&&s.empty().remove()}else if(r.parent){if("li"===r.name){if(g=r.prev,!g||"ul"!==g.name&&"ul"!==g.name){if(g=r.next,!g||"ul"!==g.name&&"ul"!==g.name){r.wrap(l.filterNode(new e("ul",1)));continue}g.insert(r,g.firstChild,!0);continue}g.append(r);continue}a.isValidChild(r.parent.name,"div")&&a.isValidChild("div",r.name)?r.wrap(l.filterNode(new e("div",1))):"style"===r.name||"script"===r.name?r.empty().remove():r.unwrap()}}}var l=this,c={},h=[],p={},d={};r=r||{},r.validate="validate"in r?r.validate:!0,r.root_name=r.root_name||"body",l.schema=a=a||new t,l.filterNode=function(e){var t,n,r;n in c&&(r=p[n],r?r.push(e):p[n]=[e]),t=h.length;for(;t--;)n=h[t].name,n in e.attributes.map&&(r=d[n],r?r.push(e):d[n]=[e]);return e},l.addNodeFilter=function(e,t){s(o(e),function(e){var n=c[e];n||(c[e]=n=[]),n.push(t)})},l.addAttributeFilter=function(e,t){s(o(e),function(e){var n;for(n=0;n<h.length;n++)if(h[n].name===e)return h[n].callbacks.push(t),void 0;h.push({name:e,callbacks:[t]})})},l.parse=function(t,s){function o(){function e(e){e&&(t=e.firstChild,t&&3==t.type&&(t.value=t.value.replace(A,"")),t=e.lastChild,t&&3==t.type&&(t.value=t.value.replace(_,"")))}var t=y.firstChild,n,r;if(a.isValidChild(y.name,F.toLowerCase())){for(;t;)n=t.next,3==t.type||1==t.type&&"p"!==t.name&&!L[t.name]&&!t.attr("data-mce-type")?r?r.append(t):(r=l(F,1),y.insert(r,t),r.append(t)):(e(r),r=null),t=n;e(r)}}function l(t,n){var r=new e(t,n),i;return t in c&&(i=p[t],i?i.push(r):p[t]=[r]),r}function v(e){var t,n,r;for(t=e.prev;t&&3===t.type;)n=t.value.replace(_,""),n.length>0?(t.value=n,t=t.prev):(r=t.prev,t.remove(),t=r)}function m(e){var t,n={};for(t in e)"li"!==t&&"p"!=t&&(n[t]=e[t]);return n}var g,y,b,w,E,S,x,T,N,C,k,L,A,O=[],M,_,D,P,H,B,j,F;if(s=s||{},p={},d={},L=u(i("script,style,head,html,body,title,meta,param"),a.getBlockElements()),j=a.getNonEmptyElements(),B=a.children,k=r.validate,F="forced_root_block"in s?s.forced_root_block:r.forced_root_block,H=a.getWhiteSpaceElements(),A=/^[ \t\r\n]+/,_=/[ \t\r\n]+$/,D=/[ \t\r\n]+/g,P=/^[ \t\r\n]+$/,g=new n({validate:k,self_closing_elements:m(a.getSelfClosingElements()),cdata:function(e){b.append(l("#cdata",4)).value=e},text:function(e,t){var n;M||(e=e.replace(D," "),b.lastChild&&L[b.lastChild.name]&&(e=e.replace(A,""))),0!==e.length&&(n=l("#text",3),n.raw=!!t,b.append(n).value=e)},comment:function(e){b.append(l("#comment",8)).value=e},pi:function(e,t){b.append(l(e,7)).value=t,v(b)},doctype:function(e){var t;t=b.append(l("#doctype",10)),t.value=e,v(b)},start:function(e,t,n){var r,i,s,o,u;if(s=k?a.getElementRule(e):{}){for(r=l(s.outputName||e,1),r.attributes=t,r.shortEnded=n,b.append(r),u=B[b.name],u&&B[r.name]&&!u[r.name]&&O.push(r),i=h.length;i--;)o=h[i].name,o in t.map&&(N=d[o],N?N.push(r):d[o]=[r]);L[e]&&v(r),n||(b=r),!M&&H[e]&&(M=!0)}},end:function(t){var n,r,i,s,o;if(r=k?a.getElementRule(t):{}){if(L[t]&&!M){if(n=b.firstChild,n&&3===n.type)if(i=n.value.replace(A,""),i.length>0)n.value=i,n=n.next;else for(s=n.next,n.remove(),n=s;n&&3===n.type;)i=n.value,s=n.next,(0===i.length||P.test(i))&&(n.remove(),n=s),n=s;if(n=b.lastChild,n&&3===n.type)if(i=n.value.replace(_,""),i.length>0)n.value=i,n=n.prev;else for(s=n.prev,n.remove(),n=s;n&&3===n.type;)i=n.value,s=n.prev,(0===i.length||P.test(i))&&(n.remove(),n=s),n=s}if(M&&H[t]&&(M=!1),(r.removeEmpty||r.paddEmpty)&&b.isEmpty(j))if(r.paddEmpty)b.empty().append(new e("#text","3")).value="";else if(!b.attributes.map.name&&!b.attributes.map.id)return o=b.parent,b.empty().remove(),b=o,void 0;b=b.parent}}},a),y=b=new e(s.context||r.root_name,11),g.parse(t),k&&O.length&&(s.context?s.invalid=!0:f(O)),F&&("body"==y.name||s.isRootContent)&&o(),!s.invalid){for(C in p){for(N=c[C],w=p[C],x=w.length;x--;)w[x].parent||w.splice(x,1);for(E=0,S=N.length;S>E;E++)N[E](w,C,s)}for(E=0,S=h.length;S>E;E++)if(N=h[E],N.name in d){for(w=d[N.name],x=w.length;x--;)w[x].parent||w.splice(x,1);for(x=0,T=N.callbacks.length;T>x;x++)N.callbacks[x](w,N.name,s)}}return y},r.remove_trailing_brs&&l.addNodeFilter("br",function(t){var n,r=t.length,i,s=u({},a.getBlockElements()),o=a.getNonEmptyElements(),f,l,c,h,p,d;for(s.body=1,n=0;r>n;n++)if(i=t[n],f=i.parent,s[i.parent.name]&&i===f.lastChild){for(c=i.prev;c;){if(h=c.name,"span"!==h||"bookmark"!==c.attr("data-mce-type")){if("br"!==h)break;if("br"===h){i=null;break}}c=c.prev}i&&(i.remove(),f.isEmpty(o)&&(p=a.getElementRule(f.name),p&&(p.removeEmpty?f.remove():p.paddEmpty&&(f.empty().append(new e("#text",3)).value=""))))}else{for(l=i;f&&f.firstChild===l&&f.lastChild===l&&(l=f,!s[f.name]);)f=f.parent;l===f&&(d=new e("#text",3),d.value="",i.replace(d))}}),r.allow_html_in_named_anchor||l.addAttributeFilter("id,name",function(e){for(var t=e.length,n,r,i,s;t--;)if(s=e[t],"a"===s.name&&s.firstChild&&!s.attr("href")){i=s.parent,n=s.lastChild;do r=n.prev,i.insert(n,s),n=r;while(n)}})}}),r(T,[v,p],function(e,t){var n=t.makeMap;return function(t){var r=[],i,s,o,u,a;return t=t||{},i=t.indent,s=n(t.indent_before||""),o=n(t.indent_after||""),u=e.getEncodeFunc(t.entity_encoding||"raw",t.entities),a="html"==t.element_format,{start:function(e,t,n){var f,l,c,h;if(i&&s[e]&&r.length>0&&(h=r[r.length-1],h.length>0&&"\n"!==h&&r.push("\n")),r.push("<",e),t)for(f=0,l=t.length;l>f;f++)c=t[f],r.push(" ",c.name,'="',u(c.value,!0),'"');r[r.length]=!n||a?">":" />",n&&i&&o[e]&&r.length>0&&(h=r[r.length-1],h.length>0&&"\n"!==h&&r.push("\n"))},end:function(e){var t;r.push("</",e,">"),i&&o[e]&&r.length>0&&(t=r[r.length-1],t.length>0&&"\n"!==t&&r.push("\n"))},text:function(e,t){e.length>0&&(r[r.length]=t?e:u(e))},cdata:function(e){r.push("<![CDATA[",e,"]]>")},comment:function(e){r.push("<!--",e,"-->")},pi:function(e,t){t?r.push("<?",e," ",t,"?>"):r.push("<?",e,"?>"),i&&r.push("\n")},doctype:function(e){r.push("<!DOCTYPE",e,">",i?"\n":"")},reset:function(){r.length=0},getContent:function(){return r.join("").replace(/\n$/,"")}}}}),r(N,[T,E],function(e,t){return function(n,r){var i=this,s=new e(n);n=n||{},n.validate="validate"in n?n.validate:!0,i.schema=r=r||new t,i.writer=s,i.serialize=function(e){function t(e){var n=i[e.type],u,a,f,l,c,h,p,d,v;if(n)n(e);else{if(u=e.name,a=e.shortEnded,f=e.attributes,o&&f&&f.length>1){for(h=[],h.map={},v=r.getElementRule(e.name),p=0,d=v.attributesOrder.length;d>p;p++)l=v.attributesOrder[p],l in f.map&&(c=f.map[l],h.map[l]=c,h.push({name:l,value:c}));for(p=0,d=f.length;d>p;p++)l=f[p].name,l in h.map||(c=f.map[l],h.map[l]=c,h.push({name:l,value:c}));f=h}if(s.start(e.name,f,a),!a){if(e=e.firstChild)do t(e);while(e=e.next);s.end(u)}}}var i,o;return o=n.validate,i={3:function(e){s.text(e.value,e.raw)},8:function(e){s.comment(e.value)},7:function(e){s.pi(e.name,e.value)},10:function(e){s.doctype(e.value)},4:function(e){s.cdata(e.value)},11:function(e){if(e=e.firstChild)do t(e);while(e=e.next)}},s.reset(),1!=e.type||n.inner?i[11](e):t(e),s.getContent()}}}),r(C,[g,x,v,N,w,E,m,p],function(e,t,n,r,i,s,o,u){var a=u.each,f=u.trim,l=e.DOM;return function(e,i){var u,c,h;return i&&(u=i.dom,c=i.schema),u=u||l,c=c||new s(e),e.entity_encoding=e.entity_encoding||"named",e.remove_trailing_brs="remove_trailing_brs"in e?e.remove_trailing_brs:!0,h=new t(e,c),h.addAttributeFilter("src,href,style",function(t,n){for(var r=t.length,i,s,o="data-mce-"+n,a=e.url_converter,f=e.url_converter_scope,l;r--;)i=t[r],s=i.attributes.map[o],s!==l?(i.attr(n,s.length>0?s:null),i.attr(o,null)):(s=i.attributes.map[n],"style"===n?s=u.serializeStyle(u.parseStyle(s),i.name):a&&(s=a.call(f,s,n,i.name)),i.attr(n,s.length>0?s:null))}),h.addAttributeFilter("class",function(e){for(var t=e.length,n,r;t--;)n=e[t],r=n.attr("class").replace(/(?:^|\s)mce-item-\w+(?!\S)/g,""),n.attr("class",r.length>0?r:null)}),h.addAttributeFilter("data-mce-type",function(e,t,n){for(var r=e.length,i;r--;)i=e[r],"bookmark"!==i.attributes.map["data-mce-type"]||n.cleanup||i.remove()}),h.addAttributeFilter("data-mce-expando",function(e,t){for(var n=e.length;n--;)e[n].attr(t,null)}),h.addNodeFilter("noscript",function(e){for(var t=e.length,r;t--;)r=e[t].firstChild,r&&(r.value=n.decode(r.value))}),h.addNodeFilter("script,style",function(e,t){function n(e){return e.replace(/(<!--\[CDATA\[|\]\]-->)/g,"\n").replace(/^[\r\n]*|[\r\n]*$/g,"").replace(/^\s*((<!--)?(\s*\/\/)?\s*<!\[CDATA\[|(<!--\s*)?\/\*\s*<!\[CDATA\[\s*\*\/|(\/\/)?\s*<!--|\/\*\s*<!--\s*\*\/)\s*[\r\n]*/gi,"").replace(/\s*(\/\*\s*\]\]>\s*\*\/(-->)?|\s*\/\/\s*\]\]>(-->)?|\/\/\s*(-->)?|\]\]>|\/\*\s*-->\s*\*\/|\s*-->\s*)\s*$/g,"")}for(var r=e.length,i,s;r--;)i=e[r],s=i.firstChild?i.firstChild.value:"","script"===t?(i.attr("type",(i.attr("type")||"text/javascript").replace(/^mce\-/,"")),s.length>0&&(i.firstChild.value="// <![CDATA[\n"+n(s)+"\n// ]]>")):s.length>0&&(i.firstChild.value="<!--\n"+n(s)+"\n-->")}),h.addNodeFilter("#comment",function(e){for(var t=e.length,n;t--;)n=e[t],0===n.value.indexOf("[CDATA[")?(n.name="#cdata",n.type=4,n.value=n.value.replace(/^\[CDATA\[|\]\]$/g,"")):0===n.value.indexOf("mce:protected ")&&(n.name="#text",n.type=3,n.raw=!0,n.value=unescape(n.value).substr(14))}),h.addNodeFilter("xml:namespace,input",function(e,t){for(var n=e.length,r;n--;)r=e[n],7===r.type?r.remove():1===r.type&&("input"!==t||"type"in r.attributes.map||r.attr("type","text"))}),e.fix_list_elements&&h.addNodeFilter("ul,ol",function(e){for(var t=e.length,n,r;t--;)n=e[t],r=n.parent,("ul"===r.name||"ol"===r.name)&&n.prev&&"li"===n.prev.name&&n.prev.append(n)}),h.addAttributeFilter("data-mce-src,data-mce-href,data-mce-style,data-mce-selected",function(e,t){for(var n=e.length;n--;)e[n].attr(t,null)}),{schema:c,addNodeFilter:h.addNodeFilter,addAttributeFilter:h.addAttributeFilter,serialize:function(t,n){var i=this,s,l,p,d,v;return o.ie&&u.select("script,style,select,map").length>0?(v=t.innerHTML,t=t.cloneNode(!1),u.setHTML(t,v)):t=t.cloneNode(!0),s=t.ownerDocument.implementation,s.createHTMLDocument&&(l=s.createHTMLDocument(""),a("BODY"==t.nodeName?t.childNodes:[t],function(e){l.body.appendChild(l.importNode(e,!0))}),t="BODY"!=t.nodeName?l.body.firstChild:l.body,p=u.doc,u.doc=l),n=n||{},n.format=n.format||"html",n.selection&&(n.forced_root_block=""),n.no_events||(n.node=t,i.onPreProcess(n)),d=new r(e,c),n.content=d.serialize(h.parse(f(n.getInner?t.innerHTML:u.getOuterHTML(t)),n)),n.cleanup||(n.content=n.content.replace(/\uFEFF/g,"")),n.no_events||i.onPostProcess(n),p&&(u.doc=p),n.node=null,n.content},addRules:function(e){c.addValidElements(e)},setRules:function(e){c.setValidElements(e)},onPreProcess:function(e){i&&i.fire("PreProcess",e)},onPostProcess:function(e){i&&i.fire("PostProcess",e)}}}}),r(k,[],function(){function e(e){function t(t,n){var r,i=0,s,o,u,a,f,l,c=-1,h;if(r=t.duplicate(),r.collapse(n),h=r.parentElement(),h.ownerDocument===e.dom.doc){for(;"false"===h.contentEditable;)h=h.parentNode;if(!h.hasChildNodes())return{node:h,inside:1};for(u=h.children,s=u.length-1;s>=i;)if(l=Math.floor((i+s)/2),a=u[l],r.moveToElementText(a),c=r.compareEndPoints(n?"StartToStart":"EndToEnd",t),c>0)s=l-1;else{if(!(0>c))return{node:a};i=l+1}if(0>c)for(a?r.collapse(!1):(r.moveToElementText(h),r.collapse(!0),a=h,o=!0),f=0;0!==r.compareEndPoints(n?"StartToStart":"StartToEnd",t)&&0!==r.move("character",1)&&h==r.parentElement();)f++;else for(r.collapse(!0),f=0;0!==r.compareEndPoints(n?"StartToStart":"StartToEnd",t)&&0!==r.move("character",-1)&&h==r.parentElement();)f++;return{node:a,position:c,offset:f,inside:o}}}function n(){function n(e){var n=t(s,e),r,i,u=0,a,f,l;if(r=n.node,i=n.offset,n.inside&&!r.hasChildNodes())return o[e?"setStart":"setEnd"](r,0),void 0;if(i===f)return o[e?"setStartBefore":"setEndAfter"](r),void 0;if(n.position<0){if(a=n.inside?r.firstChild:r.nextSibling,!a)return o[e?"setStartAfter":"setEndAfter"](r),void 0;if(!i)return 3==a.nodeType?o[e?"setStart":"setEnd"](a,0):o[e?"setStartBefore":"setEndBefore"](a),void 0;for(;a;){if(l=a.nodeValue,u+=l.length,u>=i){r=a,u-=i,u=l.length-u;break}a=a.nextSibling}}else{if(a=r.previousSibling,!a)return o[e?"setStartBefore":"setEndBefore"](r);if(!i)return 3==r.nodeType?o[e?"setStart":"setEnd"](a,r.nodeValue.length):o[e?"setStartAfter":"setEndAfter"](a),void 0;for(;a;){if(u+=a.nodeValue.length,u>=i){r=a,u-=i;break}a=a.previousSibling}}o[e?"setStart":"setEnd"](r,u)}var s=e.getRng(),o=i.createRng(),u,a,f,l,c;if(u=s.item?s.item(0):s.parentElement(),u.ownerDocument!=i.doc)return o;if(a=e.isCollapsed(),s.item)return o.setStart(u.parentNode,i.nodeIndex(u)),o.setEnd(o.startContainer,o.startOffset+1),o;try{n(!0),a||n()}catch(h){if(-2147024809!=h.number)throw h;c=r.getBookmark(2),f=s.duplicate(),f.collapse(!0),u=f.parentElement(),a||(f=s.duplicate(),f.collapse(!1),l=f.parentElement(),l.innerHTML=l.innerHTML),u.innerHTML=u.innerHTML,r.moveToBookmark(c),s=e.getRng(),n(!0),a||n()}return o}var r=this,i=e.dom,s=!1;this.getBookmark=function(n){function r(e){var t,n,r,s,o=[];for(t=e.parentNode,n=i.getRoot().parentNode;t!=n&&9!==t.nodeType;){for(r=t.children,s=r.length;s--;)if(e===r[s]){o.push(s);break}e=t,t=t.parentNode}return o}function s(e){var n;return n=t(o,e),n?{position:n.position,offset:n.offset,indexes:r(n.node),inside:n.inside}:void 0}var o=e.getRng(),u={};return 2===n&&(o.item?u.start={ctrl:!0,indexes:r(o.item(0))}:(u.start=s(!0),e.isCollapsed()||(u.end=s()))),u},this.moveToBookmark=function(e){function t(e){var t,n,r,s;for(t=i.getRoot(),n=e.length-1;n>=0;n--)s=t.children,r=e[n],r<=s.length-1&&(t=s[r]);return t}function n(n){var i=e[n?"start":"end"],o,u,a,f;i&&(o=i.position>0,u=s.createTextRange(),u.moveToElementText(t(i.indexes)),f=i.offset,f!==a?(u.collapse(i.inside||o),u.moveStart("character",o?-f:f)):u.collapse(n),r.setEndPoint(n?"StartToStart":"EndToStart",u),n&&r.collapse(!0))}var r,s=i.doc.body;e.start&&(e.start.ctrl?(r=s.createControlRange(),r.addElement(t(e.start.indexes)),r.select()):(r=s.createTextRange(),n(!0),n(),r.select()))},this.addRange=function(t){function n(e){var t,n,o,c,d;o=i.create("a"),t=e?u:f,n=e?a:l,c=r.duplicate(),(t==h||t==h.documentElement)&&(t=p,n=0),3==t.nodeType?(t.parentNode.insertBefore(o,t),c.moveToElementText(o),c.moveStart("character",n),i.remove(o),r.setEndPoint(e?"StartToStart":"EndToEnd",c)):(d=t.childNodes,d.length?(n>=d.length?i.insertAfter(o,d[d.length-1]):t.insertBefore(o,d[n]),c.moveToElementText(o)):t.canHaveHTML&&(t.innerHTML="<span>&#xFEFF;</span>",o=t.firstChild,c.moveToElementText(o),c.collapse(s)),r.setEndPoint(e?"StartToStart":"EndToEnd",c),i.remove(o))}var r,o,u,a,f,l,c,h=e.dom.doc,p=h.body,d,v;if(u=t.startContainer,a=t.startOffset,f=t.endContainer,l=t.endOffset,r=p.createTextRange(),u==f&&1==u.nodeType){if(a==l&&!u.hasChildNodes()){if(u.canHaveHTML)return c=u.previousSibling,c&&!c.hasChildNodes()&&i.isBlock(c)?c.innerHTML="&#xFEFF;":c=null,u.innerHTML="<span>&#xFEFF;</span><span>&#xFEFF;</span>",r.moveToElementText(u.lastChild),r.select(),i.doc.selection.clear(),u.innerHTML="",c&&(c.innerHTML=""),void 0;a=i.nodeIndex(u),u=u.parentNode}if(a==l-1)try{if(v=u.childNodes[a],o=p.createControlRange(),o.addElement(v),o.select(),d=e.getRng(),d.item&&v===d.item(0))return}catch(m){}}n(!0),n(),r.select()},this.getRangeAt=n}return e}),r(L,[m],function(e){return{BACKSPACE:8,DELETE:46,DOWN:40,ENTER:13,LEFT:37,RIGHT:39,SPACEBAR:32,TAB:9,UP:38,modifierPressed:function(e){return e.shiftKey||e.ctrlKey||e.altKey},metaKeyPressed:function(t){return(e.mac?t.ctrlKey||t.metaKey:t.ctrlKey)&&!t.altKey}}}),r(A,[L,p,m],function(e,t,n){return function(r,i){function s(e){return i.settings.object_resizing===!1?!1:/TABLE|IMG|DIV/.test(e.nodeName)?"false"===e.getAttribute("data-mce-resize")?!1:!0:!1}function o(t){var n,r;n=t.screenX-N,r=t.screenY-C,D=n*T[2]+A,P=r*T[3]+O,D=5>D?5:D,P=5>P?5:P,(e.modifierPressed(t)||"IMG"==E.nodeName&&0!==T[2]*T[3])&&(D=Math.round(P/M),P=Math.round(D*M)),b.setStyles(S,{width:D,height:P}),T[2]<0&&S.clientWidth<=D&&b.setStyle(S,"left",k+(A-D)),T[3]<0&&S.clientHeight<=P&&b.setStyle(S,"top",L+(O-P)),_||(i.fire("ObjectResizeStart",{target:E,width:A,height:O}),_=!0)}function u(){function e(e,t){t&&(E.style[e]||!i.schema.isValid(E.nodeName.toLowerCase(),e)?b.setStyle(E,e,t):b.setAttrib(E,e,t))}_=!1,e("width",D),e("height",P),b.unbind(H,"mousemove",o),b.unbind(H,"mouseup",u),B!=H&&(b.unbind(B,"mousemove",o),b.unbind(B,"mouseup",u)),b.remove(S),j&&"TABLE"!=E.nodeName||a(E),i.fire("ObjectResized",{target:E,width:D,height:P}),i.nodeChanged()}function a(e,t,n){var r,a,l,c,h;r=b.getPos(e,i.getBody()),k=r.x,L=r.y,h=e.getBoundingClientRect(),a=h.width||h.right-h.left,l=h.height||h.bottom-h.top,E!=e&&(v(),E=e,D=P=0),c=i.fire("ObjectSelected",{target:e}),s(e)&&!c.isDefaultPrevented()?w(x,function(e,r){function s(t){_=!0,N=t.screenX,C=t.screenY,A=E.clientWidth,O=E.clientHeight,M=O/A,T=e,S=E.cloneNode(!0),b.addClass(S,"mce-clonedresizable"),S.contentEditable=!1,S.unSelectabe=!0,b.setStyles(S,{left:k,top:L,margin:0}),S.removeAttribute("data-mce-selected"),i.getBody().appendChild(S),b.bind(H,"mousemove",o),b.bind(H,"mouseup",u),B!=H&&(b.bind(B,"mousemove",o),b.bind(B,"mouseup",u))}var f,c;return t?(r==t&&s(n),void 0):(f=b.get("mceResizeHandle"+r),f?b.show(f):(c=i.getBody(),f=b.add(c,"div",{id:"mceResizeHandle"+r,"data-mce-bogus":!0,"class":"mce-resizehandle",contentEditable:!1,unSelectabe:!0,style:"cursor:"+r+"-resize; margin:0; padding:0"}),b.bind(f,"mousedown",function(e){e.preventDefault(),s(e)})),b.setStyles(f,{left:a*e[0]+k-f.offsetWidth/2,top:l*e[1]+L-f.offsetHeight/2}),void 0)}):f(),E.setAttribute("data-mce-selected","1")}function f(){var e,t;E&&E.removeAttribute("data-mce-selected");for(e in x)t=b.get("mceResizeHandle"+e),t&&(b.unbind(t),b.remove(t))}function l(e){function t(e,t){do if(e===t)return!0;while(e=e.parentNode)}var n;return w(b.select("img[data-mce-selected],hr[data-mce-selected]"),function(e){e.removeAttribute("data-mce-selected")}),n="mousedown"==e.type?e.target:r.getNode(),n=b.getParent(n,j?"table":"table,img,hr"),n&&(m(),t(r.getStart(),n)&&t(r.getEnd(),n)&&(!j||n!=r.getStart()&&"IMG"!==r.getStart().nodeName))?(a(n),void 0):(f(),void 0)}function c(e,t,n){e&&e.attachEvent&&e.attachEvent("on"+t,n)}function h(e,t,n){e&&e.detachEvent&&e.detachEvent("on"+t,n)}function p(e){var t=e.srcElement,n,r,s,o,u,f,l;n=t.getBoundingClientRect(),f=e.clientX-n.left,l=e.clientY-n.top;for(r in x)if(s=x[r],o=t.offsetWidth*s[0],u=t.offsetHeight*s[1],Math.abs(o-f)<8&&Math.abs(u-l)<8){T=s;break}_=!0,i.getDoc().selection.empty(),a(t,r,e)}function d(e){var t=e.srcElement;if(t!=E){if(v(),0===t.id.indexOf("mceResizeHandle"))return e.returnValue=!1,void 0;("IMG"==t.nodeName||"TABLE"==t.nodeName)&&(f(),E=t,c(t,"resizestart",p))}}function v(){h(E,"resizestart",p)}function m(){try{i.getDoc().execCommand("enableObjectResizing",!1,!1)}catch(e){}}function g(e){var t;if(j){t=H.body.createControlRange();try{return t.addElement(e),t.select(),!0}catch(n){}}}function y(){E=S=null,j&&(v(),h(i.getBody(),"controlselect",d))}var b=i.dom,w=t.each,E,S,x,T,N,C,k,L,A,O,M,_,D,P,H=i.getDoc(),B=document,j=n.ie;x={n:[.5,0,0,-1],e:[1,.5,1,0],s:[.5,1,0,1],w:[0,.5,-1,0],nw:[0,0,-1,-1],ne:[1,0,1,-1],se:[1,1,1,1],sw:[0,1,-1,1]};var F=".mce-content-body";return i.contentStyles.push(F+" div.mce-resizehandle {"+"position: absolute;"+"border: 1px solid black;"+"background: #FFF;"+"width: 5px;"+"height: 5px;"+"z-index: 10000"+"}"+F+" .mce-resizehandle:hover {"+"background: #000"+"}"+F+" img[data-mce-selected], hr[data-mce-selected] {"+"outline: 1px solid black;"+"resize: none"+"}"+F+" .mce-clonedresizable {"+"position: absolute;"+(n.gecko?"":"outline: 1px dashed black;")+"opacity: .5;"+"filter: alpha(opacity=50);"+"z-index: 10000"+"}"),i.on("init",function(){j?(i.on("ObjectResized",function(e){"TABLE"!=e.target.nodeName&&(f(),g(e.target))}),c(i.getBody(),"controlselect",d)):m(),i.on("nodechange mousedown ResizeEditor",l),i.on("keydown keyup",function(e){E&&"TABLE"==E.nodeName&&l(e)})}),{controlSelect:g,destroy:y}}}),r(O,[h,k,A,m,p],function(e,n,r,i,s){function o(e,t,i,s){var o=this;o.dom=e,o.win=t,o.serializer=i,o.editor=s,o.controlSelection=new r(o,s),o.win.getSelection||(o.tridentSel=new n(o))}var u=s.each,a=s.grep,f=s.trim,l=i.ie,c=i.opera;return o.prototype={setCursorLocation:function(e,t){var n=this,r=n.dom.createRng();r.setStart(e,t),r.setEnd(e,t),n.setRng(r),n.collapse(!1)},getContent:function(e){var n=this,r=n.getRng(),i=n.dom.create("body"),s=n.getSel(),o,u,a;return e=e||{},o=u="",e.get=!0,e.format=e.format||"html",e.selection=!0,n.editor.fire("BeforeGetContent",e),"text"==e.format?n.isCollapsed()?"":r.text||(s.toString?s.toString():""):(r.cloneContents?(a=r.cloneContents(),a&&i.appendChild(a)):r.item!==t||r.htmlText!==t?(i.innerHTML="<br>"+(r.item?r.item(0).outerHTML:r.htmlText),i.removeChild(i.firstChild)):i.innerHTML=r.toString(),/^\s/.test(i.innerHTML)&&(o=" "),/\s+$/.test(i.innerHTML)&&(u=" "),e.getInner=!0,e.content=n.isCollapsed()?"":o+n.serializer.serialize(i,e)+u,n.editor.fire("GetContent",e),e.content)},setContent:function(e,t){var n=this,r=n.getRng(),i,s=n.win.document,o,u;if(t=t||{format:"html"},t.set=!0,t.selection=!0,e=t.content=e,t.no_events||n.editor.fire("BeforeSetContent",t),e=t.content,r.insertNode){e+='<span id="__caret">_</span>',r.startContainer==s&&r.endContainer==s?s.body.innerHTML=e:(r.deleteContents(),0===s.body.childNodes.length?s.body.innerHTML=e:r.createContextualFragment?r.insertNode(r.createContextualFragment(e)):(o=s.createDocumentFragment(),u=s.createElement("div"),o.appendChild(u),u.outerHTML=e,r.insertNode(o))),i=n.dom.get("__caret"),r=s.createRange(),r.setStartBefore(i),r.setEndBefore(i),n.setRng(r),n.dom.remove("__caret");try{n.setRng(r)}catch(a){}}else r.item&&(s.execCommand("Delete",!1,null),r=n.getRng()),/^\s+/.test(e)?(r.pasteHTML('<span id="__mce_tmp">_</span>'+e),n.dom.remove("__mce_tmp")):r.pasteHTML(e);t.no_events||n.editor.fire("SetContent",t)},getStart:function(){var e=this,t=e.getRng(),n,r,i,s;if(t.duplicate||t.item){if(t.item)return t.item(0);for(i=t.duplicate(),i.collapse(1),n=i.parentElement(),n.ownerDocument!==e.dom.doc&&(n=e.dom.getRoot()),r=s=t.parentElement();s=s.parentNode;)if(s==n){n=r;break}return n}return n=t.startContainer,1==n.nodeType&&n.hasChildNodes()&&(n=n.childNodes[Math.min(n.childNodes.length-1,t.startOffset)]),n&&3==n.nodeType?n.parentNode:n},getEnd:function(){var e=this,t=e.getRng(),n,r;return t.duplicate||t.item?t.item?t.item(0):(t=t.duplicate(),t.collapse(0),n=t.parentElement(),n.ownerDocument!==e.dom.doc&&(n=e.dom.getRoot()),n&&"BODY"==n.nodeName?n.lastChild||n:n):(n=t.endContainer,r=t.endOffset,1==n.nodeType&&n.hasChildNodes()&&(n=n.childNodes[r>0?r-1:r]),n&&3==n.nodeType?n.parentNode:n)},getBookmark:function(e,t){function n(e,t){var n=0;return u(o.select(e),function(e,r){e==t&&(n=r)}),n}function r(e){function t(t){var n,r,i,s=t?"start":"end";n=e[s+"Container"],r=e[s+"Offset"],1==n.nodeType&&"TR"==n.nodeName&&(i=n.childNodes,n=i[Math.min(t?r:r-1,i.length-1)],n&&(r=t?0:n.childNodes.length,e["set"+(t?"Start":"End")](n,r)))}return t(!0),t(),e}function i(){function e(e,n){var i=e[n?"startContainer":"endContainer"],o=e[n?"startOffset":"endOffset"],u=[],a,f,l=0;if(3==i.nodeType){if(t)for(a=i.previousSibling;a&&3==a.nodeType;a=a.previousSibling)o+=a.nodeValue.length;u.push(o)}else f=i.childNodes,o>=f.length&&f.length&&(l=1,o=Math.max(0,f.length-1)),u.push(s.dom.nodeIndex(f[o],t)+l);for(;i&&i!=r;i=i.parentNode)u.push(s.dom.nodeIndex(i,t));return u}var n=s.getRng(!0),r=o.getRoot(),i={};return i.start=e(n,!0),s.isCollapsed()||(i.end=e(n)),i}var s=this,o=s.dom,a,f,l,c,h,p,d="&#xFEFF;",v;if(2==e)return p=s.getNode(),h=p.nodeName,"IMG"==h?{name:h,index:n(h,p)}:s.tridentSel?s.tridentSel.getBookmark(e):i();if(e)return{rng:s.getRng()};if(a=s.getRng(),l=o.uniqueId(),c=s.isCollapsed(),v="overflow:hidden;line-height:0px",a.duplicate||a.item){if(a.item)return p=a.item(0),h=p.nodeName,{name:h,index:n(h,p)};f=a.duplicate();try{a.collapse(),a.pasteHTML('<span data-mce-type="bookmark" id="'+l+'_start" style="'+v+'">'+d+"</span>"),c||(f.collapse(!1),a.moveToElementText(f.parentElement()),0===a.compareEndPoints("StartToEnd",f)&&f.move("character",-1),f.pasteHTML('<span data-mce-type="bookmark" id="'+l+'_end" style="'+v+'">'+d+"</span>"))}catch(m){return null}}else{if(p=s.getNode(),h=p.nodeName,"IMG"==h)return{name:h,index:n(h,p)};f=r(a.cloneRange()),c||(f.collapse(!1),f.insertNode(o.create("span",{"data-mce-type":"bookmark",id:l+"_end",style:v},d))),a=r(a),a.collapse(!0),a.insertNode(o.create("span",{"data-mce-type":"bookmark",id:l+"_start",style:v},d))}return s.moveToBookmark({id:l,keep:1}),{id:l}},moveToBookmark:function(e){function t(t){var n=e[t?"start":"end"],r,i,s,u;if(n){for(s=n[0],i=f,r=n.length-1;r>=1;r--){if(u=i.childNodes,n[r]>u.length-1)return;i=u[n[r]]}3===i.nodeType&&(s=Math.min(n[0],i.nodeValue.length)),1===i.nodeType&&(s=Math.min(n[0],i.childNodes.length)),t?o.setStart(i,s):o.setEnd(i,s)}return!0}function n(t){var n=s.get(e.id+"_"+t),r,i,o,f,l=e.keep;if(n&&(r=n.parentNode,"start"==t?(l?(r=n.firstChild,i=1):i=s.nodeIndex(n),h=p=r,d=v=i):(l?(r=n.firstChild,i=1):i=s.nodeIndex(n),p=r,v=i),!l)){for(f=n.previousSibling,o=n.nextSibling,u(a(n.childNodes),function(e){3==e.nodeType&&(e.nodeValue=e.nodeValue.replace(/\uFEFF/g,""))});n=s.get(e.id+"_"+t);)s.remove(n,1);f&&o&&f.nodeType==o.nodeType&&3==f.nodeType&&!c&&(i=f.nodeValue.length,f.appendData(o.nodeValue),s.remove(o),"start"==t?(h=p=f,d=v=i):(p=f,v=i))}}function r(e){return!s.isBlock(e)||e.innerHTML||l||(e.innerHTML='<br data-mce-bogus="1" />'),e}var i=this,s=i.dom,o,f,h,p,d,v;if(e)if(e.start){if(o=s.createRng(),f=s.getRoot(),i.tridentSel)return i.tridentSel.moveToBookmark(e);t(!0)&&t()&&i.setRng(o)}else e.id?(n("start"),n("end"),h&&(o=s.createRng(),o.setStart(r(h),d),o.setEnd(r(p),v),i.setRng(o))):e.name?i.select(s.select(e.name)[e.index]):e.rng&&i.setRng(e.rng)},select:function(t,n){function r(t,n){var r=new e(t,t);do{if(3==t.nodeType&&0!==f(t.nodeValue).length)return n?o.setStart(t,0):o.setEnd(t,t.nodeValue.length),void 0;if("BR"==t.nodeName)return n?o.setStartBefore(t):o.setEndBefore(t),void 0}while(t=n?r.next():r.prev())}var i=this,s=i.dom,o=s.createRng(),u;if(t){if(!n&&i.controlSelection.controlSelect(t))return;u=s.nodeIndex(t),o.setStart(t.parentNode,u),o.setEnd(t.parentNode,u+1),n&&(r(t,1),r(t)),i.setRng(o)}return t},isCollapsed:function(){var e=this,t=e.getRng(),n=e.getSel();return!t||t.item?!1:t.compareEndPoints?0===t.compareEndPoints("StartToEnd",t):!n||t.collapsed},collapse:function(e){var t=this,n=t.getRng(),r;n.item&&(r=n.item(0),n=t.win.document.body.createTextRange(),n.moveToElementText(r)),n.collapse(!!e),t.setRng(n)},getSel:function(){var e=this.win;return e.getSelection?e.getSelection():e.document.selection},getRng:function(e){var t=this,n,r,i,s=t.win.document,o;if(!e&&t.restoreRng)return t.restoreRng;if(e&&t.tridentSel)return t.tridentSel.getRangeAt(0);try{(n=t.getSel())&&(r=n.rangeCount>0?n.getRangeAt(0):n.createRange?n.createRange():s.createRange())}catch(u){}if(l&&r&&r.setStart){try{o=s.selection.createRange()}catch(u){}o&&o.item&&(i=o.item(0),r=s.createRange(),r.setStartBefore(i),r.setEndAfter(i))}return r||(r=s.createRange?s.createRange():s.body.createTextRange()),r.setStart&&9===r.startContainer.nodeType&&r.collapsed&&(i=t.dom.getRoot(),r.setStart(i,0),r.setEnd(i,0)),t.selectedRange&&t.explicitRange&&(0===r.compareBoundaryPoints(r.START_TO_START,t.selectedRange)&&0===r.compareBoundaryPoints(r.END_TO_END,t.selectedRange)?r=t.explicitRange:(t.selectedRange=null,t.explicitRange=null)),r},setRng:function(e,t){var n=this,r;if(e.select)try{e.select()}catch(i){}else if(n.tridentSel){if(e.cloneRange)try{return n.tridentSel.addRange(e),void 0}catch(i){}}else if(r=n.getSel()){n.explicitRange=e;try{r.removeAllRanges()}catch(i){}r.addRange(e),t===!1&&r.extend&&(r.collapse(e.endContainer,e.endOffset),r.extend(e.startContainer,e.startOffset)),n.selectedRange=r.rangeCount>0?r.getRangeAt(0):null}},setNode:function(e){var t=this;return t.setContent(t.dom.getOuterHTML(e)),e},getNode:function(){function e(e,t){for(var n=e;e&&3===e.nodeType&&0===e.length;)e=t?e.nextSibling:e.previousSibling;return e||n}var t=this,n=t.getRng(),r,i=n.startContainer,s=n.endContainer,o=n.startOffset,u=n.endOffset;return n?n.setStart?(r=n.commonAncestorContainer,!n.collapsed&&(i==s&&2>u-o&&i.hasChildNodes()&&(r=i.childNodes[o]),3===i.nodeType&&3===s.nodeType&&(i=i.length===o?e(i.nextSibling,!0):i.parentNode,s=0===u?e(s.previousSibling,!1):s.parentNode,i&&i===s))?i:r&&3==r.nodeType?r.parentNode:r):n.item?n.item(0):n.parentElement():t.dom.getRoot()},getSelectedBlocks:function(t,n){var r=this,i=r.dom,s,o,u=[];if(o=i.getRoot(),t=i.getParent(t||r.getStart(),i.isBlock),n=i.getParent(n||r.getEnd(),i.isBlock),t&&t!=o&&u.push(t),t&&n&&t!=n){s=t;for(var a=new e(t,o);(s=a.next())&&s!=n;)i.isBlock(s)&&u.push(s)}return n&&t!=n&&n!=o&&u.push(n),u},isForward:function(){var e=this.dom,t=this.getSel(),n,r;return t&&t.anchorNode&&t.focusNode?(n=e.createRng(),n.setStart(t.anchorNode,t.anchorOffset),n.collapse(!0),r=e.createRng(),r.setStart(t.focusNode,t.focusOffset),r.collapse(!0),n.compareBoundaryPoints(n.START_TO_START,r)<=0):!0},normalize:function(){function t(t){function o(t,n){for(var r=new e(t,h.getParent(t.parentNode,h.isBlock)||p);t=r[n?"prev":"next"]();)if("BR"===t.nodeName)return!0}function u(e,t){return e.previousSibling&&e.previousSibling.nodeName==t}function a(t,n){var r,o;for(n=n||f,r=new e(n,h.getParent(n.parentNode,h.isBlock)||p);d=r[t?"prev":"next"]();){if(3===d.nodeType&&d.nodeValue.length>0)return f=d,l=t?d.nodeValue.length:0,i=!0,void 0;if(h.isBlock(d)||v[d.nodeName.toLowerCase()])return;o=d}s&&o&&(f=o,i=!0,l=0)}var f,l,c,h=n.dom,p=h.getRoot(),d,v,m;if(f=r[(t?"start":"end")+"Container"],l=r[(t?"start":"end")+"Offset"],v=h.schema.getNonEmptyElements(),9===f.nodeType&&(f=h.getRoot(),l=0),f===p){if(t&&(d=f.childNodes[l>0?l-1:0],d&&(m=d.nodeName.toLowerCase(),v[d.nodeName]||"TABLE"==d.nodeName)))return;if(f.hasChildNodes()&&(l=Math.min(!t&&l>0?l-1:l,f.childNodes.length-1),f=f.childNodes[l],l=0,f.hasChildNodes()&&!/TABLE/.test(f.nodeName))){d=f,c=new e(f,p);do{if(3===d.nodeType&&d.nodeValue.length>0){l=t?0:d.nodeValue.length,f=d,i=!0;break}if(v[d.nodeName.toLowerCase()]){l=h.nodeIndex(d),f=d.parentNode,"IMG"!=d.nodeName||t||l++,i=!0;break}}while(d=t?c.next():c.prev())}}s&&(3===f.nodeType&&0===l&&a(!0),1===f.nodeType&&(d=f.childNodes[l],!d||"BR"!==d.nodeName||u(d,"A")||o(d)||o(d,!0)||a(!0,f.childNodes[l]))),t&&!s&&3===f.nodeType&&l===f.nodeValue.length&&a(!1),i&&r["set"+(t?"Start":"End")](f,l)}var n=this,r,i,s;l||(r=n.getRng(),s=r.collapsed,t(!0),s||t(),i&&(s&&r.collapse(!0),n.setRng(r,n.isForward())))},selectorChanged:function(e,t){var n=this,r;return n.selectorChangedData||(n.selectorChangedData={},r={},n.editor.on("NodeChange",function(e){var t=e.element,i=n.dom,s=i.getParents(t,null,i.getRoot()),o={};u(n.selectorChangedData,function(e,t){u(s,function(n){return i.is(n,t)?(r[t]||(u(e,function(e){e(!0,{node:n,selector:t,parents:s})}),r[t]=e),o[t]=e,!1):void 0})}),u(r,function(e,n){o[n]||(delete r[n],u(e,function(e){e(!1,{node:t,selector:n,parents:s})}))})})),n.selectorChangedData[e]||(n.selectorChangedData[e]=[]),n.selectorChangedData[e].push(t),n},scrollIntoView:function(e){var t,n,r=this,i=r.dom;n=i.getViewPort(r.editor.getWin()),t=i.getPos(e).y,(t<n.y||t+25>n.y+n.h)&&r.editor.getWin().scrollTo(0,t<n.y?t:t-n.h+25)},destroy:function(){this.win=null,this.controlSelection.destroy()}},o}),r(M,[p],function(e){function t(e){this.walk=function(t,r){function i(e){var t;return t=e[0],3===t.nodeType&&t===a&&f>=t.nodeValue.length&&e.splice(0,1),t=e[e.length-1],0===c&&e.length>0&&t===l&&3===t.nodeType&&e.splice(e.length-1,1),e}function s(e,t,n){for(var r=[];e&&e!=n;e=e[t])r.push(e);return r}function o(e,t){do{if(e.parentNode==t)return e;e=e.parentNode}while(e)}function u(e,t,n){var o=n?"nextSibling":"previousSibling";for(v=e,m=v.parentNode;v&&v!=t;v=m)m=v.parentNode,g=s(v==e?v:v[o],o),g.length&&(n||g.reverse(),r(i(g)))}var a=t.startContainer,f=t.startOffset,l=t.endContainer,c=t.endOffset,h,p,d,v,m,g,y;if(y=e.select("td.mce-item-selected,th.mce-item-selected"),y.length>0)return n(y,function(e){r([e])}),void 0;if(1==a.nodeType&&a.hasChildNodes()&&(a=a.childNodes[f]),1==l.nodeType&&l.hasChildNodes()&&(l=l.childNodes[Math.min(c-1,l.childNodes.length-1)]),a==l)return r(i([a]));for(h=e.findCommonAncestor(a,l),v=a;v;v=v.parentNode){if(v===l)return u(a,h,!0);if(v===h)break}for(v=l;v;v=v.parentNode){if(v===a)return u(l,h);if(v===h)break}p=o(a,h)||a,d=o(l,h)||l,u(a,p,!0),g=s(p==a?p:p.nextSibling,"nextSibling",d==l?d.nextSibling:d),g.length&&r(i(g)),u(l,d)},this.split=function(e){function t(e,t){return e.splitText(t)}var n=e.startContainer,r=e.startOffset,i=e.endContainer,s=e.endOffset;return n==i&&3==n.nodeType?r>0&&r<n.nodeValue.length&&(i=t(n,r),n=i.previousSibling,s>r?(s-=r,n=i=t(i,s).previousSibling,s=i.nodeValue.length,r=0):s=0):(3==n.nodeType&&r>0&&r<n.nodeValue.length&&(n=t(n,r),r=0),3==i.nodeType&&s>0&&s<i.nodeValue.length&&(i=t(i,s).previousSibling,s=i.nodeValue.length)),{startContainer:n,startOffset:r,endContainer:i,endOffset:s}}}var n=e.each;return t.compareRanges=function(e,t){if(e&&t){if(!e.item&&!e.duplicate)return e.startContainer==t.startContainer&&e.startOffset==t.startOffset;if(e.item&&t.item&&e.item(0)===t.item(0))return!0;if(e.isEqual&&t.isEqual&&t.isEqual(e))return!0}return!1},t}),r(_,[h,M,p],function(e,t,n){return function(r){function i(e){return e.nodeType&&(e=e.nodeName),!!r.schema.getTextBlockElements()[e.toLowerCase()]}function s(e,t){return F.getParents(e,t,F.getRoot())}function o(e){return 1===e.nodeType&&"_mce_caret"===e.id}function u(){l({alignleft:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"left"},defaultBlock:"div"},{selector:"img,table",collapsed:!1,styles:{"float":"left"}}],aligncenter:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"center"},defaultBlock:"div"},{selector:"img",collapsed:!1,styles:{display:"block",marginLeft:"auto",marginRight:"auto"}},{selector:"table",collapsed:!1,styles:{marginLeft:"auto",marginRight:"auto"}}],alignright:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"right"},defaultBlock:"div"},{selector:"img,table",collapsed:!1,styles:{"float":"right"}}],alignjustify:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"justify"},defaultBlock:"div"}],bold:[{inline:"strong",remove:"all"},{inline:"span",styles:{fontWeight:"bold"}},{inline:"b",remove:"all"}],italic:[{inline:"em",remove:"all"},{inline:"span",styles:{fontStyle:"italic"}},{inline:"i",remove:"all"}],underline:[{inline:"span",styles:{textDecoration:"underline"},exact:!0},{inline:"u",remove:"all"}],strikethrough:[{inline:"span",styles:{textDecoration:"line-through"},exact:!0},{inline:"strike",remove:"all"}],forecolor:{inline:"span",styles:{color:"%value"},wrap_links:!1},hilitecolor:{inline:"span",styles:{backgroundColor:"%value"},wrap_links:!1},fontname:{inline:"span",styles:{fontFamily:"%value"}},fontsize:{inline:"span",styles:{fontSize:"%value"}},fontsize_class:{inline:"span",attributes:{"class":"%value"}},blockquote:{block:"blockquote",wrapper:1,remove:"all"},subscript:{inline:"sub"},superscript:{inline:"sup"},code:{inline:"code"},link:{inline:"a",selector:"a",remove:"all",split:!0,deep:!0,onmatch:function(){return!0},onformat:function(e,t,n){et(n,function(t,n){F.setAttrib(e,n,t)})}},removeformat:[{selector:"b,strong,em,i,font,u,strike",remove:"all",split:!0,expand:!1,block_expand:!0,deep:!0},{selector:"span",attributes:["style","class"],remove:"empty",split:!0,expand:!1,deep:!0},{selector:"*",attributes:["style","class"],split:!1,expand:!1,deep:!0}]}),et("p h1 h2 h3 h4 h5 h6 div address pre div dt dd samp".split(/\s/),function(e){l(e,{block:e,remove:"all"})}),l(r.settings.formats)}function a(){r.addShortcut("ctrl+b","bold_desc","Bold"),r.addShortcut("ctrl+i","italic_desc","Italic"),r.addShortcut("ctrl+u","underline_desc","Underline");for(var e=1;6>=e;e++)r.addShortcut("ctrl+"+e,"",["FormatBlock",!1,"h"+e]);r.addShortcut("ctrl+7","",["FormatBlock",!1,"p"]),r.addShortcut("ctrl+8","",["FormatBlock",!1,"div"]),r.addShortcut("ctrl+9","",["FormatBlock",!1,"address"])}function f(e){return e?j[e]:j}function l(e,t){e&&("string"!=typeof e?et(e,function(e,t){l(t,e)}):(t=t.length?t:[t],et(t,function(e){e.deep===Q&&(e.deep=!e.selector),e.split===Q&&(e.split=!e.selector||e.inline),e.remove===Q&&e.selector&&!e.inline&&(e.remove="none"),e.selector&&e.inline&&(e.mixed=!0,e.block_expand=!0),"string"==typeof e.classes&&(e.classes=e.classes.split(/\s+/))}),j[e]=t))}function c(e){var t;return r.dom.getParent(e,function(e){return t=r.dom.getStyle(e,"text-decoration"),t&&"none"!==t}),t}function h(e){var t;1===e.nodeType&&e.parentNode&&1===e.parentNode.nodeType&&(t=c(e.parentNode),r.dom.getStyle(e,"color")&&t?r.dom.setStyle(e,"text-decoration",t):r.dom.getStyle(e,"textdecoration")===t&&r.dom.setStyle(e,"text-decoration",null))}function p(t,n,s){function u(e,t){t=t||v,e&&(t.onformat&&t.onformat(e,t,n,s),et(t.styles,function(t,r){F.setStyle(e,r,N(t,n))}),et(t.attributes,function(t,r){F.setAttrib(e,r,N(t,n))}),et(t.classes,function(t){t=N(t,n),F.hasClass(e,t)||F.addClass(e,t)}))}function a(){function t(t,n){var r=new e(n);for(s=r.current();s;s=r.prev())if(s.childNodes.length>1||s==t||"BR"==s.tagName)return s}var n=r.selection.getRng(),i=n.startContainer,o=n.endContainer;if(i!=o&&0===n.endOffset){var u=t(i,o),a=3==u.nodeType?u.length:u.childNodes.length;n.setEnd(u,a)}return n}function l(e,t,n,r,i){var s=[],o=-1,u,a=-1,f=-1,l;return et(e.childNodes,function(e,t){return"UL"===e.nodeName||"OL"===e.nodeName?(o=t,u=e,!1):void 0}),et(e.childNodes,function(e,n){"SPAN"===e.nodeName&&"bookmark"==F.getAttrib(e,"data-mce-type")&&(e.id==t.id+"_start"?a=n:e.id==t.id+"_end"&&(f=n))}),0>=o||o>a&&f>o?(et(tt(e.childNodes),i),0):(l=F.clone(n,$),et(tt(e.childNodes),function(e,t){(o>a&&o>t||a>o&&t>o)&&(s.push(e),e.parentNode.removeChild(e))}),o>a?e.insertBefore(l,u):a>o&&e.insertBefore(l,u.nextSibling),r.push(l),et(s,function(e){l.appendChild(e)}),l)}function c(e,r,s){var a=[],f,c,h=!0;f=v.inline||v.block,c=F.create(f),u(c),q.walk(e,function(e){function p(e){var y,w,E,x,T;return T=h,y=e.nodeName.toLowerCase(),w=e.parentNode.nodeName.toLowerCase(),1===e.nodeType&&G(e)&&(T=h,h="true"===G(e),x=!0),S(y,"br")?(g=0,v.block&&F.remove(e),void 0):v.wrapper&&m(e,t,n)?(g=0,void 0):h&&!x&&v.block&&!v.wrapper&&i(y)&&R(w,f)?(e=F.rename(e,f),u(e),a.push(e),g=0,void 0):v.selector&&(et(d,function(t){"collapsed"in t&&t.collapsed!==b||F.is(e,t.selector)&&!o(e)&&(u(e,t),E=!0)}),!v.inline||E)?(g=0,void 0):(!h||x||!R(f,y)||!R(w,f)||!s&&3===e.nodeType&&1===e.nodeValue.length&&65279===e.nodeValue.charCodeAt(0)||o(e)||v.inline&&U(e)?"li"==y&&r?g=l(e,r,c,a,p):(g=0,et(tt(e.childNodes),p),x&&(h=T),g=0):(g||(g=F.clone(c,$),e.parentNode.insertBefore(g,e),a.push(g)),g.appendChild(e)),void 0)}var g;et(e,p)}),v.wrap_links===!1&&et(a,function(e){function t(e){var n,r,i;if("A"===e.nodeName){for(r=F.clone(c,$),a.push(r),i=tt(e.childNodes),n=0;n<i.length;n++)r.appendChild(i[n]);e.appendChild(r)}et(tt(e.childNodes),t)}t(e)}),et(a,function(e){function r(e){var t=0;return et(e.childNodes,function(e){C(e)||_(e)||t++}),t}function i(e){var t,n;return et(e.childNodes,function(e){return 1!=e.nodeType||_(e)||o(e)?void 0:(t=e,$)}),t&&E(t,v)&&(n=F.clone(t,$),u(n),F.replace(n,e,J),F.remove(t,1)),n||e}var s;if(s=r(e),(a.length>1||!U(e))&&0===s)return F.remove(e,1),void 0;if(v.inline||v.wrapper){if(v.exact||1!==s||(e=i(e)),et(d,function(t){et(F.select(t.inline,e),function(e){var r;if(t.wrap_links===!1){r=e.parentNode;do if("A"===r.nodeName)return;while(r=r.parentNode)}A(t,n,e,t.exact?e:null)})}),m(e.parentNode,t,n))return F.remove(e,1),e=0,J;v.merge_with_parents&&F.getParent(e.parentNode,function(r){return m(r,t,n)?(F.remove(e,1),e=0,J):void 0}),e&&v.merge_siblings!==!1&&(e=D(M(e),e),e=D(e,M(e,J)))}})}var d=f(t),v=d[0],g,y,b=!s&&I.isCollapsed();if(v)if(s)s.nodeType?(y=F.createRng(),y.setStartBefore(s),y.setEndAfter(s),c(L(y,d),null,!0)):c(s,null,!0);else if(b&&v.inline&&!F.select("td.mce-item-selected,th.mce-item-selected").length)H("apply",t,n);else{var w=r.selection.getNode();z||!d[0].defaultBlock||F.getParent(w,F.isBlock)||p(d[0].defaultBlock),r.selection.setRng(a()),g=I.getBookmark(),c(L(I.getRng(J),d),g),v.styles&&(v.styles.color||v.styles.textDecoration)&&(nt(w,h,"childNodes"),h(w)),I.moveToBookmark(g),B(I.getRng(J)),r.nodeChanged()}}function d(e,t,n){function i(e){var n,r,s,o,u;if(1===e.nodeType&&G(e)&&(o=b,b="true"===G(e),u=!0),n=tt(e.childNodes),b&&!u)for(r=0,s=p.length;s>r&&!A(p[r],t,e,e);r++);if(d.deep&&n.length){for(r=0,s=n.length;s>r;r++)i(n[r]);u&&(b=o)}}function o(n){var r;return et(s(n.parentNode).reverse(),function(n){var i;r||"_start"==n.id||"_end"==n.id||(i=m(n,e,t),i&&i.split!==!1&&(r=n))}),r}function u(e,n,r,i){var s,o,u,a,f,l;if(e){for(l=e.parentNode,s=n.parentNode;s&&s!=l;s=s.parentNode){for(o=F.clone(s,$),f=0;f<p.length;f++)if(A(p[f],t,o,o)){o=0;break}o&&(u&&o.appendChild(u),a||(a=o),u=o)}!i||d.mixed&&U(e)||(n=F.split(e,n)),u&&(r.parentNode.insertBefore(u,r),a.appendChild(r))}return n}function a(e){return u(o(e),e,e,!0)}function l(e){var t=F.get(e?"_start":"_end"),n=t[e?"firstChild":"lastChild"];return _(n)&&(n=n[e?"firstChild":"lastChild"]),F.remove(t,!0),n}function h(e){var t,n;e=L(e,p,J),d.split&&(t=P(e,J),n=P(e),t!=n?(/^(TR|TD)$/.test(t.nodeName)&&t.firstChild&&(t="TD"==t.nodeName?t.firstChild||t:t.firstChild.firstChild||t),t=k(t,"span",{id:"_start","data-mce-type":"bookmark"}),n=k(n,"span",{id:"_end","data-mce-type":"bookmark"}),a(t),a(n),t=l(J),n=l()):t=n=a(t),e.startContainer=t.parentNode,e.startOffset=W(t),e.endContainer=n.parentNode,e.endOffset=W(n)+1),q.walk(e,function(e){et(e,function(e){i(e),1===e.nodeType&&"underline"===r.dom.getStyle(e,"text-decoration")&&e.parentNode&&"underline"===c(e.parentNode)&&A({deep:!1,exact:!0,inline:"span",styles:{textDecoration:"underline"}},null,e)})})}var p=f(e),d=p[0],v,y,b=!0;return n?(n.nodeType?(y=F.createRng(),y.setStartBefore(n),y.setEndAfter(n),h(y)):h(n),void 0):(I.isCollapsed()&&d.inline&&!F.select("td.mce-item-selected,th.mce-item-selected").length?H("remove",e,t):(v=I.getBookmark(),h(I.getRng(J)),I.moveToBookmark(v),d.inline&&g(e,t,I.getStart())&&B(I.getRng(!0)),r.nodeChanged()),void 0)}function v(e,t,n){var r=f(e);!g(e,t,n)||"toggle"in r[0]&&!r[0].toggle?p(e,t,n):d(e,t,n)}function m(e,t,n,r){function i(e,t,i){var s,o,u=t[i],a;if(t.onmatch)return t.onmatch(e,t,i);if(u)if(u.length===Q){for(s in u)if(u.hasOwnProperty(s)){if(o="attributes"===i?F.getAttrib(e,s):x(e,s),r&&!o&&!t.exact)return;if((!r||t.exact)&&!S(o,T(N(u[s],n),s)))return}}else for(a=0;a<u.length;a++)if("attributes"===i?F.getAttrib(e,u[a]):x(e,u[a]))return t;return t}var s=f(t),o,u,a;if(s&&e)for(u=0;u<s.length;u++)if(o=s[u],E(e,o)&&i(e,o,"attributes")&&i(e,o,"styles")){if(a=o.classes)for(u=0;u<a.length;u++)if(!F.hasClass(e,a[u]))return;return o}}function g(e,t,n){function r(n){return n=F.getParent(n,function(n){return!!m(n,e,t,!0)}),m(n,e,t)}var i;return n?r(n):(n=I.getNode(),r(n)?J:(i=I.getStart(),i!=n&&r(i)?J:$))}function y(e,t){var n,r=[],i={};return n=I.getStart(),F.getParent(n,function(n){var s,o;for(s=0;s<e.length;s++)o=e[s],!i[o]&&m(n,o,t)&&(i[o]=!0,r.push(o))},F.getRoot()),r}function b(e){var t=f(e),n,r,i,o,u;if(t)for(n=I.getStart(),r=s(n),o=t.length-1;o>=0;o--){if(u=t[o].selector,!u)return J;for(i=r.length-1;i>=0;i--)if(F.is(r[i],u))return J}return $}function w(e,t,n){var i;return K||(K={},i={},r.on("NodeChange",function(e){var t=s(e.element),n={};et(K,function(e,r){et(t,function(s){return m(s,r,{},e.similar)?(i[r]||(et(e,function(e){e(!0,{node:s,format:r,parents:t})}),i[r]=e),n[r]=e,!1):void 0})}),et(i,function(r,s){n[s]||(delete i[s],et(r,function(n){n(!1,{node:e.element,format:s,parents:t})}))})})),et(e.split(","),function(e){K[e]||(K[e]=[],K[e].similar=n),K[e].push(t)}),this}function E(e,t){return S(e,t.inline)?J:S(e,t.block)?J:t.selector?1==e.nodeType&&F.is(e,t.selector):void 0}function S(e,t){return e=e||"",t=t||"",e=""+(e.nodeName||e),t=""+(t.nodeName||t),e.toLowerCase()==t.toLowerCase()}function x(e,t){return T(F.getStyle(e,t),t)}function T(e,t){return("color"==t||"backgroundColor"==t)&&(e=F.toHex(e)),"fontWeight"==t&&700==e&&(e="bold"),"fontFamily"==t&&(e=e.replace(/[\'\"]/g,"").replace(/,\s+/g,",")),""+e}function N(e,t){return"string"!=typeof e?e=e(t):t&&(e=e.replace(/%(\w+)/g,function(e,n){return t[n]||e})),e}function C(e){return e&&3===e.nodeType&&/^([\t \r\n]+|)$/.test(e.nodeValue)}function k(e,t,n){var r=F.create(t,n);return e.parentNode.insertBefore(r,e),r.appendChild(e),r}function L(t,n,o){function u(e){function t(e){return"BR"==e.nodeName&&e.getAttribute("data-mce-bogus")&&!e.nextSibling}var r,i,s,o,u;if(r=i=e?m:y,o=e?"previousSibling":"nextSibling",u=F.getRoot(),3==r.nodeType&&!C(r)&&(e?g>0:b<r.nodeValue.length))return r;for(;;){if(!n[0].block_expand&&U(i))return i;for(s=i[o];s;s=s[o])if(!_(s)&&!C(s)&&!t(s))return i;if(i.parentNode==u){r=i;break}i=i.parentNode}return r}function a(e,t){for(t===Q&&(t=3===e.nodeType?e.length:e.childNodes.length);e&&e.hasChildNodes();)e=e.childNodes[t],e&&(t=3===e.nodeType?e.length:e.childNodes.length);return{node:e,offset:t}}function f(e){for(var t=e;t;){if(1===t.nodeType&&G(t))return"false"===G(t)?t:e;t=t.parentNode}return e}function l(t,n,i){function s(e,t){var n,r,s=e.nodeValue;return"undefined"==typeof t&&(t=i?s.length:0),i?(n=s.lastIndexOf(" ",t),r=s.lastIndexOf("",t),n=n>r?n:r,-1===n||o||n++):(n=s.indexOf(" ",t),r=s.indexOf("",t),n=-1!==n&&(-1===r||r>n)?n:r),n}var u,a,f,l;if(3===t.nodeType){if(f=s(t,n),-1!==f)return{container:t,offset:f};l=t}for(u=new e(t,F.getParent(t,U)||r.getBody());a=u[i?"prev":"next"]();)if(3===a.nodeType){if(l=a,f=s(a),-1!==f)return{container:a,offset:f}}else if(U(a))break;return l?(n=i?0:l.length,{container:l,offset:n}):void 0}function c(e,r){var i,o,u,a;for(3==e.nodeType&&0===e.nodeValue.length&&e[r]&&(e=e[r]),i=s(e),o=0;o<i.length;o++)for(u=0;u<n.length;u++)if(a=n[u],!("collapsed"in a&&a.collapsed!==t.collapsed)&&F.is(i[o],a.selector))return i[o];return e}function h(e,t){var r;if(n[0].wrapper||(r=F.getParent(e,n[0].block)),r||(r=F.getParent(3==e.nodeType?e.parentNode:e,i)),r&&n[0].wrapper&&(r=s(r,"ul,ol").reverse()[0]||r),!r)for(r=e;r[t]&&!U(r[t])&&(r=r[t],!S(r,"br")););return r||e}var p,d,v,m=t.startContainer,g=t.startOffset,y=t.endContainer,b=t.endOffset;if(1==m.nodeType&&m.hasChildNodes()&&(p=m.childNodes.length-1,m=m.childNodes[g>p?p:g],3==m.nodeType&&(g=0)),1==y.nodeType&&y.hasChildNodes()&&(p=y.childNodes.length-1,y=y.childNodes[b>p?p:b-1],3==y.nodeType&&(b=y.nodeValue.length)),m=f(m),y=f(y),(_(m.parentNode)||_(m))&&(m=_(m)?m:m.parentNode,m=m.nextSibling||m,3==m.nodeType&&(g=0)),(_(y.parentNode)||_(y))&&(y=_(y)?y:y.parentNode,y=y.previousSibling||y,3==y.nodeType&&(b=y.length)),n[0].inline&&(t.collapsed&&(v=l(m,g,!0),v&&(m=v.container,g=v.offset),v=l(y,b),v&&(y=v.container,b=v.offset)),d=a(y,b),d.node)){for(;d.node&&0===d.offset&&d.node.previousSibling;)d=a(d.node.previousSibling);d.node&&d.offset>0&&3===d.node.nodeType&&" "===d.node.nodeValue.charAt(d.offset-1)&&d.offset>1&&(y=d.node,y.splitText(d.offset-1))}return(n[0].inline||n[0].block_expand)&&(n[0].inline&&3==m.nodeType&&0!==g||(m=u(!0)),n[0].inline&&3==y.nodeType&&b!==y.nodeValue.length||(y=u())),n[0].selector&&n[0].expand!==$&&!n[0].inline&&(m=c(m,"previousSibling"),y=c(y,"nextSibling")),(n[0].block||n[0].selector)&&(m=h(m,"previousSibling"),y=h(y,"nextSibling"),n[0].block&&(U(m)||(m=u(!0)),U(y)||(y=u()))),1==m.nodeType&&(g=W(m),m=m.parentNode),1==y.nodeType&&(b=W(y)+1,y=y.parentNode),{startContainer:m,startOffset:g,endContainer:y,endOffset:b}}function A(e,t,n,r){var i,s,o;if(!E(n,e))return $;if("all"!=e.remove)for(et(e.styles,function(e,i){e=T(N(e,t),i),"number"==typeof i&&(i=e,r=0),(!r||S(x(r,i),e))&&F.setStyle(n,i,""),o=1}),o&&""===F.getAttrib(n,"style")&&(n.removeAttribute("style"),n.removeAttribute("data-mce-style")),et(e.attributes,function(e,i){var s;if(e=N(e,t),"number"==typeof i&&(i=e,r=0),!r||S(F.getAttrib(r,i),e)){if("class"==i&&(e=F.getAttrib(n,i),e&&(s="",et(e.split(/\s+/),function(e){/mce\w+/.test(e)&&(s+=(s?" ":"")+e)}),s)))return F.setAttrib(n,i,s),void 0;"class"==i&&n.removeAttribute("className"),V.test(i)&&n.removeAttribute("data-mce-"+i),n.removeAttribute(i)}}),et(e.classes,function(e){e=N(e,t),(!r||F.hasClass(r,e))&&F.removeClass(n,e)}),s=F.getAttribs(n),i=0;i<s.length;i++)if(0!==s[i].nodeName.indexOf("_"))return $;return"none"!=e.remove?(O(n,e),J):void 0}function O(e,t){function n(e,t,n){return e=M(e,t,n),!e||"BR"==e.nodeName||U(e)}var r=e.parentNode,i;t.block&&(z?r==F.getRoot()&&(t.list_block&&S(e,t.list_block)||et(tt(e.childNodes),function(e){R(z,e.nodeName.toLowerCase())?i?i.appendChild(e):i=k(e,z):i=0})):U(e)&&!U(r)&&(n(e,$)||n(e.firstChild,J,1)||e.insertBefore(F.create("br"),e.firstChild),n(e,J)||n(e.lastChild,$,1)||e.appendChild(F.create("br")))),t.selector&&t.inline&&!S(t.inline,e)||F.remove(e,1)}function M(e,t,n){if(e)for(t=t?"nextSibling":"previousSibling",e=n?e:e[t];e;e=e[t])if(1==e.nodeType||!C(e))return e}function _(e){return e&&1==e.nodeType&&"bookmark"==e.getAttribute("data-mce-type")}function D(e,t){function n(e,t){function n(e){var t={};return et(F.getAttribs(e),function(n){var r=n.nodeName.toLowerCase();0!==r.indexOf("_")&&"style"!==r&&(t[r]=F.getAttrib(e,r))}),t}function r(e,t){var n,r;for(r in e)if(e.hasOwnProperty(r)){if(n=t[r],n===Q)return $;if(e[r]!=n)return $;delete t[r]}for(r in t)if(t.hasOwnProperty(r))return $;return J}return e.nodeName!=t.nodeName?$:r(n(e),n(t))?r(F.parseStyle(F.getAttrib(e,"style")),F.parseStyle(F.getAttrib(t,"style")))?J:$:$}function r(e,t){for(i=e;i;i=i[t]){if(3==i.nodeType&&0!==i.nodeValue.length)return e;if(1==i.nodeType&&!_(i))return i}return e}var i,s;if(e&&t&&(e=r(e,"previousSibling"),t=r(t,"nextSibling"),n(e,t))){for(i=e.nextSibling;i&&i!=t;)s=i,i=i.nextSibling,e.appendChild(s);return F.remove(t),et(tt(t.childNodes),function(t){e.appendChild(t)}),e}return t}function P(t,n){var i,s,o;return i=t[n?"startContainer":"endContainer"],s=t[n?"startOffset":"endOffset"],1==i.nodeType&&(o=i.childNodes.length-1,!n&&s&&s--,i=i.childNodes[s>o?o:s]),3===i.nodeType&&n&&s>=i.nodeValue.length&&(i=(new e(i,r.getBody())).next()||i),3!==i.nodeType||n||0!==s||(i=(new e(i,r.getBody())).prev()||i),i}function H(t,n,s){function o(e){var t=F.create("span",{id:y,"data-mce-bogus":!0,style:b?"color:red":""});return e&&t.appendChild(r.getDoc().createTextNode(X)),t}function u(e,t){for(;e;){if(3===e.nodeType&&e.nodeValue!==X||e.childNodes.length>1)return!1;t&&1===e.nodeType&&t.push(e),e=e.firstChild}return!0}function a(e){for(;e;){if(e.id===y)return e;e=e.parentNode}}function l(t){var n;if(t)for(n=new e(t,t),t=n.current();t;t=n.next())if(3===t.nodeType)return t}function c(e,t){var n,r;if(e)r=I.getRng(!0),u(e)?(t!==!1&&(r.setStartBefore(e),r.setEndBefore(e)),F.remove(e)):(n=l(e),n.nodeValue.charAt(0)===X&&(n=n.deleteData(0,1)),F.remove(e,1)),I.setRng(r);else if(e=a(I.getStart()),!e)for(;e=F.get(y);)c(e,!1)}function h(){var e,t,r,i,u,c,h;e=I.getRng(!0),i=e.startOffset,c=e.startContainer,h=c.nodeValue,t=a(I.getStart()),t&&(r=l(t)),h&&i>0&&i<h.length&&/\w/.test(h.charAt(i))&&/\w/.test(h.charAt(i-1))?(u=I.getBookmark(),e.collapse(!0),e=L(e,f(n)),e=q.split(e),p(n,s,e),I.moveToBookmark(u)):(t&&r.nodeValue===X?p(n,s,t):(t=o(!0),r=t.firstChild,e.insertNode(t),i=1,p(n,s,t)),I.setCursorLocation(r,i))}function v(){var e=I.getRng(!0),t,r,u,a,l,c,h=[],p,v;for(t=e.startContainer,r=e.startOffset,l=t,3==t.nodeType&&((r!=t.nodeValue.length||t.nodeValue===X)&&(a=!0),l=l.parentNode);l;){if(m(l,n,s)){c=l;break}l.nextSibling&&(a=!0),h.push(l),l=l.parentNode}if(c)if(a)u=I.getBookmark(),e.collapse(!0),e=L(e,f(n),!0),e=q.split(e),d(n,s,e),I.moveToBookmark(u);else{for(v=o(),l=v,p=h.length-1;p>=0;p--)l.appendChild(F.clone(h[p],!1)),l=l.firstChild;l.appendChild(F.doc.createTextNode(X)),l=l.firstChild;var g=F.getParent(c,i);g&&F.isEmpty(g)?c.parentNode.replaceChild(v,c):F.insertAfter(v,c),I.setCursorLocation(l,1)}}function g(){var e;e=a(I.getStart()),e&&!F.isEmpty(e)&&nt(e,function(e){1!=e.nodeType||e.id===y||F.isEmpty(e)||F.setAttrib(e,"data-mce-bogus",null)},"childNodes")}var y="_mce_caret",b=r.settings.caret_debug;r._hasCaretEvents||(Z=function(){var e=[],t;if(u(a(I.getStart()),e))for(t=e.length;t--;)F.setAttrib(e[t],"data-mce-bogus","1")},Y=function(e){var t=e.keyCode;c(),(8==t||37==t||39==t)&&c(a(I.getStart())),g()},r.on("SetContent",function(e){e.selection&&g()}),r._hasCaretEvents=!0),"apply"==t?h():v()}function B(t){var n=t.startContainer,r=t.startOffset,i,s,o,u,a;if(3==n.nodeType&&r>=n.nodeValue.length&&(r=W(n),n=n.parentNode,i=!0),1==n.nodeType)for(u=n.childNodes,n=u[Math.min(r,u.length-1)],s=new e(n,F.getParent(n,F.isBlock)),(r>u.length-1||i)&&s.next(),o=s.current();o;o=s.next())if(3==o.nodeType&&!C(o))return a=F.create("a",null,X),o.parentNode.insertBefore(a,o),t.setStart(o,0),I.setRng(t),F.remove(a),void 0}var j={},F=r.dom,I=r.selection,q=new t(F),R=r.schema.isValidChild,U=F.isBlock,z=r.settings.forced_root_block,W=F.nodeIndex,X="",V=/^(src|href|style)$/,$=!1,J=!0,K,Q,G=F.getContentEditable,Y,Z,et=n.each,tt=n.grep,nt=n.walk,rt=n.extend;rt(this,{get:f,register:l,apply:p,remove:d,toggle:v,match:g,matchAll:y,matchNode:m,canApply:b,formatChanged:w}),u(),a(),r.on("BeforeGetContent",function(){Z&&Z()}),r.on("mouseup keydown",function(e){Y&&Y(e)})}}),r(D,[m,p],function(e,t){var n=t.trim,r;return r=new RegExp(["<span[^>]+data-mce-bogus[^>]+>[]+<\\/span>","<div[^>]+data-mce-bogus[^>]+><\\/div>",'\\s?data-mce-selected="[^"]+"'].join("|"),"gi"),function(t){function i(){return n(t.getContent({format:"raw",no_events:1}).replace(r,""))}function s(){o.typing=!1,o.add()}var o,u=0,a=[],f,l;return t.on("init",function(){o.add()}),t.on("BeforeExecCommand",function(e){var t=e.command;"Undo"!=t&&"Redo"!=t&&"mceRepaint"!=t&&o.beforeChange()}),t.on("ExecCommand",function(e){var t=e.command;"Undo"!=t&&"Redo"!=t&&"mceRepaint"!=t&&o.add()}),t.on("ObjectResizeStart",function(){o.beforeChange()}),t.on("SaveContent ObjectResized",s),t.dom.bind(t.dom.getRoot(),"dragend",s),t.dom.bind(t.getBody(),"focusout",function(){!t.removed&&o.typing&&s()}),t.on("KeyUp",function(n){var r=n.keyCode;(r>=33&&36>=r||r>=37&&40>=r||45==r||13==r||n.ctrlKey)&&(s(),t.nodeChanged()),(46==r||8==r||e.mac&&(91==r||93==r))&&t.nodeChanged(),l&&o.typing&&(t.isDirty()||(t.isNotDirty=!a[0]||i()==a[0].content),t.fire("TypingUndo"),l=!1,t.nodeChanged())}),t.on("KeyDown",function(e){var t=e.keyCode;return t>=33&&36>=t||t>=37&&40>=t||45==t?(o.typing&&s(),void 0):((16>t||t>20)&&224!=t&&91!=t&&!o.typing&&(o.beforeChange(),o.typing=!0,o.add(),l=!0),void 0)}),t.on("MouseDown",function(){o.typing&&s()}),t.addShortcut("ctrl+z","","Undo"),t.addShortcut("ctrl+y,ctrl+shift+z","","Redo"),t.on("AddUndo Undo Redo ClearUndos MouseUp",function(e){e.isDefaultPrevented()||t.nodeChanged()}),o={data:a,typing:!1,beforeChange:function(){f=t.selection.getBookmark(2,!0)},add:function(e){var n,r=t.settings,s;if(e=e||{},e.content=i(),t.fire("BeforeAddUndo",{level:e}).isDefaultPrevented())return null;if(s=a[u],s&&s.content==e.content)return null;if(a[u]&&(a[u].beforeBookmark=f),r.custom_undo_redo_levels&&a.length>r.custom_undo_redo_levels){for(n=0;n<a.length-1;n++)a[n]=a[n+1];a.length--,u=a.length}e.bookmark=t.selection.getBookmark(2,!0),u<a.length-1&&(a.length=u+1),a.push(e),u=a.length-1;var o={level:e,lastLevel:s};return t.fire("AddUndo",o),u>0&&(t.fire("change",o),t.isNotDirty=!1),e},undo:function(){var e;return o.typing&&(o.add(),o.typing=!1),u>0&&(e=a[--u],t.setContent(e.content,{format:"raw"}),t.selection.moveToBookmark(e.beforeBookmark),t.fire("undo",{level:e})),e},redo:function(){var e;return u<a.length-1&&(e=a[++u],t.setContent(e.content,{format:"raw"}),t.selection.moveToBookmark(e.bookmark),t.fire("redo",{level:e})),e},clear:function(){a=[],u=0,o.typing=!1,t.fire("ClearUndos")},hasUndo:function(){return u>0||o.typing&&a[0]&&i()!=a[0].content},hasRedo:function(){return u<a.length-1&&!this.typing},transact:function(e){o.beforeChange(),e(),o.add()}}}}),r(P,[h,m],function(e,t){var n=t.ie;return function(t){function r(r){function l(e){return e&&i.isBlock(e)&&!/^(TD|TH|CAPTION|FORM)$/.test(e.nodeName)&&!/^(fixed|absolute)/i.test(e.style.position)&&"true"!==i.getContentEditable(e)}function c(e){var t;i.isBlock(e)&&(t=s.getRng(),e.appendChild(i.create("span",null,"")),s.select(e),e.lastChild.outerHTML="",s.setRng(t))}function h(e){for(var t=e,n=[],r;t=t.firstChild;){if(i.isBlock(t))return;1!=t.nodeType||f[t.nodeName.toLowerCase()]||n.push(t)}for(r=n.length;r--;)t=n[r],!t.hasChildNodes()||t.firstChild==t.lastChild&&""===t.firstChild.nodeValue?i.remove(t):"A"==t.nodeName&&" "===(t.innerText||t.textContent)&&i.remove(t)}function p(t){var n,r,o,u=t,a;if(o=i.createRng(),t.hasChildNodes()){for(n=new e(t,t);r=n.current();){if(3==r.nodeType){o.setStart(r,0),o.setEnd(r,0);break}if(f[r.nodeName.toLowerCase()]){o.setStartBefore(r),o.setEndBefore(r);break}u=r,r=n.next()}r||(o.setStart(u,0),o.setEnd(u,0))}else"BR"==t.nodeName?t.nextSibling&&i.isBlock(t.nextSibling)?((!A||9>A)&&(a=i.create("br"),t.parentNode.insertBefore(a,t)),o.setStartBefore(t),o.setEndBefore(t)):(o.setStartAfter(t),o.setEndAfter(t)):(o.setStart(t,0),o.setEnd(t,0));s.setRng(o),i.remove(a),s.scrollIntoView(t)}function d(e){var t=C,r,s,u;if(r=e||"TABLE"==P?i.create(e||B):L.cloneNode(!1),u=r,o.keep_styles!==!1)do if(/^(SPAN|STRONG|B|EM|I|FONT|STRIKE|U)$/.test(t.nodeName)){if("_mce_caret"==t.id)continue;s=t.cloneNode(!1),i.setAttrib(s,"id",""),r.hasChildNodes()?(s.appendChild(r.firstChild),r.appendChild(s)):(u=s,r.appendChild(s))}while(t=t.parentNode);return n||(u.innerHTML='<br data-mce-bogus="1">'),r}function v(t){var n,r,i;if(3==C.nodeType&&(t?k>0:k<C.nodeValue.length))return!1;if(C.parentNode==L&&j&&!t)return!0;if(t&&1==C.nodeType&&C==L.firstChild)return!0;if("TABLE"===C.nodeName||C.previousSibling&&"TABLE"==C.previousSibling.nodeName)return j&&!t||!j&&t;for(n=new e(C,L),3==C.nodeType&&(t&&0===k?n.prev():t||k!=C.nodeValue.length||n.next());r=n.current();){if(1===r.nodeType){if(!r.getAttribute("data-mce-bogus")&&(i=r.nodeName.toLowerCase(),f[i]&&"br"!==i))return!1}else if(3===r.nodeType&&!/^[ \t\r\n]*$/.test(r.nodeValue))return!1;t?n.prev():n.next()}return!0}function m(e,n){var r,s,o,u,f,c,h=B||"P";if(s=i.getParent(e,i.isBlock),c=t.getBody().nodeName.toLowerCase(),!s||!l(s)){if(s=s||N,!s.hasChildNodes())return r=i.create(h),s.appendChild(r),x.setStart(r,0),x.setEnd(r,0),r;for(u=e;u.parentNode!=s;)u=u.parentNode;for(;u&&!i.isBlock(u);)o=u,u=u.previousSibling;if(o&&a.isValidChild(c,h.toLowerCase())){for(r=i.create(h),o.parentNode.insertBefore(r,o),u=o;u&&!i.isBlock(u);)f=u.nextSibling,r.appendChild(u),u=f;x.setStart(e,n),x.setEnd(e,n)}}return e}function g(){function e(e){for(var t=D[e?"firstChild":"lastChild"];t&&1!=t.nodeType;)t=t[e?"nextSibling":"previousSibling"];return t===L}function t(){var e=D.parentNode;return"LI"==e.nodeName?e:D}var n=D.parentNode.nodeName;/^(OL|UL|LI)$/.test(n)&&(B="LI"),M=B?d(B):i.create("BR"),e(!0)&&e()?"LI"==n?i.insertAfter(M,t()):i.replace(M,D):e(!0)?"LI"==n?(i.insertAfter(M,t()),M.appendChild(i.doc.createTextNode(" ")),M.appendChild(D)):D.parentNode.insertBefore(M,D):e()?(i.insertAfter(M,t()),c(M)):(D=t(),T=x.cloneRange(),T.setStartAfter(L),T.setEndAfter(D),_=T.extractContents(),i.insertAfter(_,D),i.insertAfter(M,D)),i.remove(L),p(M),u.add()}function y(){for(var t=new e(C,L),n;n=t.next();)if(f[n.nodeName.toLowerCase()]||n.length>0)return!0}function b(){var e,t,r;C&&3==C.nodeType&&k>=C.nodeValue.length&&(n||y()||(e=i.create("br"),x.insertNode(e),x.setStartAfter(e),x.setEndAfter(e),t=!0)),e=i.create("br"),x.insertNode(e),n&&"PRE"==P&&(!A||8>A)&&e.parentNode.insertBefore(i.doc.createTextNode("\r"),e),r=i.create("span",{},"&nbsp;"),e.parentNode.insertBefore(r,e),s.scrollIntoView(r),i.remove(r),t?(x.setStartBefore(e),x.setEndBefore(e)):(x.setStartAfter(e),x.setEndAfter(e)),s.setRng(x),u.add()}function w(e){do 3===e.nodeType&&(e.nodeValue=e.nodeValue.replace(/^[\r\n]+/,"")),e=e.firstChild;while(e)}function E(e){var t=i.getRoot(),n,r;for(n=e;n!==t&&"false"!==i.getContentEditable(n);)"true"===i.getContentEditable(n)&&(r=n),n=n.parentNode;return n!==t?r:t}function S(e){var t;n||(e.normalize(),t=e.lastChild,(!t||/^(left|right)$/gi.test(i.getStyle(t,"float",!0)))&&i.add(e,"br"))}var x=s.getRng(!0),T,N,C,k,L,A,O,M,_,D,P,H,B,j;if(!x.collapsed)return t.execCommand("Delete"),void 0;if(!r.isDefaultPrevented()&&(C=x.startContainer,k=x.startOffset,B=(o.force_p_newlines?"p":"")||o.forced_root_block,B=B?B.toUpperCase():"",A=i.doc.documentMode,O=r.shiftKey,1==C.nodeType&&C.hasChildNodes()&&(j=k>C.childNodes.length-1,C=C.childNodes[Math.min(k,C.childNodes.length-1)]||C,k=j&&3==C.nodeType?C.nodeValue.length:0),N=E(C))){if(u.beforeChange(),!i.isBlock(N)&&N!=i.getRoot())return(!B||O)&&b(),void 0;if((B&&!O||!B&&O)&&(C=m(C,k)),L=i.getParent(C,i.isBlock),D=L?i.getParent(L.parentNode,i.isBlock):null,P=L?L.nodeName.toUpperCase():"",H=D?D.nodeName.toUpperCase():"","LI"!=H||r.ctrlKey||(L=D,P=H),"LI"==P){if(!B&&O)return b(),void 0;if(i.isEmpty(L))return g(),void 0}if("PRE"==P&&o.br_in_pre!==!1){if(!O)return b(),void 0}else if(!B&&!O&&"LI"!=P||B&&O)return b(),void 0;B&&L===t.getBody()||(B=B||"P",v()?(M=/^(H[1-6]|PRE|FIGURE)$/.test(P)&&"HGROUP"!=H?d(B):d(),o.end_container_on_empty_block&&l(D)&&i.isEmpty(L)?M=i.split(D,L):i.insertAfter(M,L),p(M)):v(!0)?(M=L.parentNode.insertBefore(d(),L),c(M)):(T=x.cloneRange(),T.setEndAfter(L),_=T.extractContents(),w(_),M=_.firstChild,i.insertAfter(_,L),h(M),S(L),p(M)),i.setAttrib(M,"id",""),u.add())}}var i=t.dom,s=t.selection,o=t.settings,u=t.undoManager,a=t.schema,f=a.getNonEmptyElements();t.on("keydown",function(e){13==e.keyCode&&r(e)!==!1&&e.preventDefault()})}}),r(H,[],function(){return function(e){function t(){var t=i.getStart(),u=e.getBody(),a,f,l,c,h,p,d,v=-16777215,m,g,y,b,w;if(w=n.forced_root_block,t&&1===t.nodeType&&w){for(;t&&t!=u;){if(o[t.nodeName])return;t=t.parentNode}if(a=i.getRng(),a.setStart){f=a.startContainer,l=a.startOffset,c=a.endContainer,h=a.endOffset;try{g=e.getDoc().activeElement===u}catch(E){}}else a.item&&(t=a.item(0),a=e.getDoc().body.createTextRange(),a.moveToElementText(t)),g=a.parentElement().ownerDocument===e.getDoc(),y=a.duplicate(),y.collapse(!0),l=-1*y.move("character",v),y.collapsed||(y=a.duplicate(),y.collapse(!1),h=-1*y.move("character",v)-l);for(t=u.firstChild,b=u.nodeName.toLowerCase();t;)if((3===t.nodeType||1==t.nodeType&&!o[t.nodeName])&&s.isValidChild(b,w.toLowerCase())){if(3===t.nodeType&&0===t.nodeValue.length){d=t,t=t.nextSibling,r.remove(d);continue}p||(p=r.create(w),t.parentNode.insertBefore(p,t),m=!0),d=t,t=t.nextSibling,p.appendChild(d)}else p=null,t=t.nextSibling;if(m&&g){if(a.setStart)a.setStart(f,l),a.setEnd(c,h),i.setRng(a);else try{a=e.getDoc().body.createTextRange(),a.moveToElementText(u),a.collapse(!0),a.moveStart("character",l),h>0&&a.moveEnd("character",h),a.select()}catch(E){}e.nodeChanged()}}}var n=e.settings,r=e.dom,i=e.selection,s=e.schema,o=s.getBlockElements();n.forced_root_block&&e.on("KeyUp NodeChange",t)}}),r(B,[N,m,p],function(e,n,r){var i=r.each,s=r.extend,o=r.map,u=r.inArray,a=r.explode,f=n.gecko,l=n.ie,c=!0,h=!1;return function(n){function r(e,t,n){var r;return e=e.toLowerCase(),(r=x.exec[e])?(r(e,t,n),c):h}function p(e){var t;return e=e.toLowerCase(),(t=x.state[e])?t(e):-1}function d(e){var t;return e=e.toLowerCase(),(t=x.value[e])?t(e):h}function v(e,t){t=t||"exec",i(e,function(e,n){i(n.toLowerCase().split(","),function(n){x[t][n]=e})})}function m(e,r,i){return r===t&&(r=h),i===t&&(i=null),n.getDoc().execCommand(e,r,i)}function g(e){return N.match(e)}function y(e,r){N.toggle(e,r?{value:r}:t),n.nodeChanged()}function b(e){C=S.getBookmark(e)}function w(){S.moveToBookmark(C)}var E=n.dom,S=n.selection,x={state:{},exec:{},value:{}},T=n.settings,N=n.formatter,C;s(this,{execCommand:r,queryCommandState:p,queryCommandValue:d,addCommands:v}),v({"mceResetDesignMode,mceBeginUndoLevel":function(){},"mceEndUndoLevel,mceAddUndoLevel":function(){n.undoManager.add()},"Cut,Copy,Paste":function(e){var t=n.getDoc(),r;try{m(e)}catch(i){r=c}(r||!t.queryCommandSupported(e))&&n.windowManager.alert("Your browser doesn't support direct access to the clipboard. Please use the Ctrl+X/C/V keyboard shortcuts instead.")},unlink:function(e){S.isCollapsed()&&S.select(S.getNode()),m(e),S.collapse(h)},"JustifyLeft,JustifyCenter,JustifyRight,JustifyFull":function(e){var t=e.substring(7);"full"==t&&(t="justify"),i("left,center,right,justify".split(","),function(e){t!=e&&N.remove("align"+e)}),y("align"+t),r("mceRepaint")},"InsertUnorderedList,InsertOrderedList":function(e){var t,n;m(e),t=E.getParent(S.getNode(),"ol,ul"),t&&(n=t.parentNode,/^(H[1-6]|P|ADDRESS|PRE)$/.test(n.nodeName)&&(b(),E.split(n,t),w()))},"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":function(e){y(e)},"ForeColor,HiliteColor,FontName":function(e,t,n){y(e,n)},FontSize:function(e,t,n){var r,i;n>=1&&7>=n&&(i=a(T.font_size_style_values),r=a(T.font_size_classes),n=r?r[n-1]||n:i[n-1]||n),y(e,n)},RemoveFormat:function(e){N.remove(e)},mceBlockQuote:function(){y("blockquote")},FormatBlock:function(e,t,n){return y(n||"p")},mceCleanup:function(){var e=S.getBookmark();n.setContent(n.getContent({cleanup:c}),{cleanup:c}),S.moveToBookmark(e)},mceRemoveNode:function(e,t,r){var i=r||S.getNode();i!=n.getBody()&&(b(),n.dom.remove(i,c),w())},mceSelectNodeDepth:function(e,t,r){var i=0;E.getParent(S.getNode(),function(e){return 1==e.nodeType&&i++==r?(S.select(e),h):void 0},n.getBody())},mceSelectNode:function(e,t,n){S.select(n)},mceInsertContent:function(t,r,i){function s(e){function t(e){return r[e]&&3==r[e].nodeType}var n,r,i;return n=S.getRng(!0),r=n.startContainer,i=n.startOffset,3==r.nodeType&&(i>0?e=e.replace(/^&nbsp;/," "):t("previousSibling")||(e=e.replace(/^ /,"&nbsp;")),i<r.length?e=e.replace(/&nbsp;(<br>|)$/," "):t("nextSibling")||(e=e.replace(/(&nbsp;| )(<br>|)$/,"&nbsp;"))),e}var o,u,a,f,c,h,p,d,v,m,g,y,b,w;if(/^ | $/.test(i)&&(i=s(i)),o=n.parser,u=new e({},n.schema),b='<span id="mce_marker" data-mce-type="bookmark">&#xFEFF;</span>',h={content:i,format:"html",selection:!0},n.fire("BeforeSetContent",h),i=h.content,-1==i.indexOf("{$caret}")&&(i+="{$caret}"),i=i.replace(/\{\$caret\}/,b),S.isCollapsed()||n.getDoc().execCommand("Delete",!1,null),a=S.getNode(),h={context:a.nodeName.toLowerCase()},c=o.parse(i,h),g=c.lastChild,"mce_marker"==g.attr("id"))for(p=g,g=g.prev;g;g=g.walk(!0))if(3==g.type||!E.isBlock(g.name)){g.parent.insert(p,g,"br"===g.name);break}if(h.invalid){for(S.setContent(b),a=S.getNode(),f=n.getBody(),9==a.nodeType?a=g=f:g=a;g!==f;)a=g,g=g.parentNode;i=a==f?f.innerHTML:E.getOuterHTML(a),i=u.serialize(o.parse(i.replace(/<span (id="mce_marker"|id=mce_marker).+?<\/span>/i,function(){return u.serialize(c)}))),a==f?E.setHTML(f,i):E.setOuterHTML(a,i)}else i=u.serialize(c),g=a.firstChild,y=a.lastChild,!g||g===y&&"BR"===g.nodeName?E.setHTML(a,i):S.setContent(i);p=E.get("mce_marker"),d=E.getRect(p),v=E.getViewPort(n.getWin()),(d.y+d.h>v.y+v.h||d.y<v.y||d.x>v.x+v.w||d.x<v.x)&&(w=l?n.getDoc().documentElement:n.getBody(),w.scrollLeft=d.x,w.scrollTop=d.y-v.h+25),m=E.createRng(),g=p.previousSibling,g&&3==g.nodeType?(m.setStart(g,g.nodeValue.length),l||(y=p.nextSibling,y&&3==y.nodeType&&(g.appendData(y.data),y.parentNode.removeChild(y)))):(m.setStartBefore(p),m.setEndBefore(p)),E.remove(p),S.setRng(m),n.fire("SetContent",h),n.addVisual()},mceInsertRawHTML:function(e,t,r){S.setContent("tiny_mce_marker"),n.setContent(n.getContent().replace(/tiny_mce_marker/g,function(){return r}))},mceToggleFormat:function(e,t,n){y(n)},mceSetContent:function(e,t,r){n.setContent(r)},"Indent,Outdent":function(e){var t,n,r;t=T.indentation,n=/[a-z%]+$/i.exec(t),t=parseInt(t,10),p("InsertUnorderedList")||p("InsertOrderedList")?m(e):(T.forced_root_block||E.getParent(S.getNode(),E.isBlock)||N.apply("div"),i(S.getSelectedBlocks(),function(i){var s;"LI"!=i.nodeName&&(s="rtl"==E.getStyle(i,"direction",!0)?"paddingRight":"paddingLeft","outdent"==e?(r=Math.max(0,parseInt(i.style[s]||0,10)-t),E.setStyle(i,s,r?r+n:"")):(r=parseInt(i.style[s]||0,10)+t+n,E.setStyle(i,s,r)))}))},mceRepaint:function(){if(f)try{b(c),S.getSel()&&S.getSel().selectAllChildren(n.getBody()),S.collapse(c),w()}catch(e){}},InsertHorizontalRule:function(){n.execCommand("mceInsertContent",!1,"<hr />")},mceToggleVisualAid:function(){n.hasVisual=!n.hasVisual,n.addVisual()},mceReplaceContent:function(e,t,r){n.execCommand("mceInsertContent",!1,r.replace(/\{\$selection\}/g,S.getContent({format:"text"})))},mceInsertLink:function(e,t,n){var r;"string"==typeof n&&(n={href:n}),r=E.getParent(S.getNode(),"a"),n.href=n.href.replace(" ","%20"),r&&n.href||N.remove("link"),n.href&&N.apply("link",n,r)},selectAll:function(){var e=E.getRoot(),t=E.createRng();S.getRng().setStart?(t.setStart(e,0),t.setEnd(e,e.childNodes.length),S.setRng(t)):m("SelectAll")},mceNewDocument:function(){n.setContent("")}}),v({"JustifyLeft,JustifyCenter,JustifyRight,JustifyFull":function(e){var t="align"+e.substring(7),n=S.isCollapsed()?[E.getParent(S.getNode(),E.isBlock)]:S.getSelectedBlocks(),r=o(n,function(e){return!!N.matchNode(e,t)});return-1!==u(r,c)},"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":function(e){return g(e)},mceBlockQuote:function(){return g("blockquote")},Outdent:function(){var e;if(T.inline_styles){if((e=E.getParent(S.getStart(),E.isBlock))&&parseInt(e.style.paddingLeft,10)>0)return c;if((e=E.getParent(S.getEnd(),E.isBlock))&&parseInt(e.style.paddingLeft,10)>0)return c}return p("InsertUnorderedList")||p("InsertOrderedList")||!T.inline_styles&&!!E.getParent(S.getNode(),"BLOCKQUOTE")},"InsertUnorderedList,InsertOrderedList":function(e){var t=E.getParent(S.getNode(),"ul,ol");return t&&("insertunorderedlist"===e&&"UL"===t.tagName||"insertorderedlist"===e&&"OL"===t.tagName)}},"state"),v({"FontSize,FontName":function(e){var t=0,n;return(n=E.getParent(S.getNode(),"span"))&&(t="fontsize"==e?n.style.fontSize:n.style.fontFamily.replace(/, /g,",").replace(/[\'\"]/g,"").toLowerCase()),t}},"value"),v({Undo:function(){n.undoManager.undo()},Redo:function(){n.undoManager.redo()}})}}),r(j,[p],function(e){function t(e,i){var s=this,o,u;return e=r(e),i=s.settings=i||{},/^([\w\-]+):([^\/]{2})/i.test(e)||/^\s*#/.test(e)?(s.source=e,void 0):(0===e.indexOf("/")&&0!==e.indexOf("//")&&(e=(i.base_uri?i.base_uri.protocol||"http":"http")+"://mce_host"+e),/^[\w\-]*:?\/\//.test(e)||(u=i.base_uri?i.base_uri.path:(new t(location.href)).directory,e=(i.base_uri&&i.base_uri.protocol||"http")+"://mce_host"+s.toAbsPath(u,e)),e=e.replace(/@@/g,"(mce_at)"),e=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@\/]*):?([^:@\/]*))?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(e),n(["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],function(t,n){var r=e[n];r&&(r=r.replace(/\(mce_at\)/g,"@@")),s[t]=r}),o=i.base_uri,o&&(s.protocol||(s.protocol=o.protocol),s.userInfo||(s.userInfo=o.userInfo),s.port||"mce_host"!==s.host||(s.port=o.port),s.host&&"mce_host"!==s.host||(s.host=o.host),s.source=""),void 0)}var n=e.each,r=e.trim;return t.prototype={setPath:function(e){var t=this;e=/^(.*?)\/?(\w+)?$/.exec(e),t.path=e[0],t.directory=e[1],t.file=e[2],t.source="",t.getURI()},toRelative:function(e){var n=this,r;if("./"===e)return e;if(e=new t(e,{base_uri:n}),"mce_host"!=e.host&&n.host!=e.host&&e.host||n.port!=e.port||n.protocol!=e.protocol)return e.getURI();var i=n.getURI(),s=e.getURI();return i==s||"/"==i.charAt(i.length-1)&&i.substr(0,i.length-1)==s?i:(r=n.toRelPath(n.path,e.path),e.query&&(r+="?"+e.query),e.anchor&&(r+="#"+e.anchor),r)},toAbsolute:function(e,n){return e=new t(e,{base_uri:this}),e.getURI(this.host==e.host&&this.protocol==e.protocol?n:0)},toRelPath:function(e,t){var n,r=0,i="",s,o;if(e=e.substring(0,e.lastIndexOf("/")),e=e.split("/"),n=t.split("/"),e.length>=n.length)for(s=0,o=e.length;o>s;s++)if(s>=n.length||e[s]!=n[s]){r=s+1;break}if(e.length<n.length)for(s=0,o=n.length;o>s;s++)if(s>=e.length||e[s]!=n[s]){r=s+1;break}if(1===r)return t;for(s=0,o=e.length-(r-1);o>s;s++)i+="../";for(s=r-1,o=n.length;o>s;s++)i+=s!=r-1?"/"+n[s]:n[s];return i},toAbsPath:function(e,t){var r,i=0,s=[],o,u;for(o=/\/$/.test(t)?"/":"",e=e.split("/"),t=t.split("/"),n(e,function(e){e&&s.push(e)}),e=s,r=t.length-1,s=[];r>=0;r--)0!==t[r].length&&"."!==t[r]&&(".."!==t[r]?i>0?i--:s.push(t[r]):i++);return r=e.length-i,u=0>=r?s.reverse().join("/"):e.slice(0,r).join("/")+"/"+s.reverse().join("/"),0!==u.indexOf("/")&&(u="/"+u),o&&u.lastIndexOf("/")!==u.length-1&&(u+=o),u},getURI:function(e){var t,n=this;return(!n.source||e)&&(t="",e||(n.protocol&&(t+=n.protocol+"://"),n.userInfo&&(t+=n.userInfo+"@"),n.host&&(t+=n.host),n.port&&(t+=":"+n.port)),n.path&&(t+=n.path),n.query&&(t+="?"+n.query),n.anchor&&(t+="#"+n.anchor),n.source=t),n.source}},t}),r(F,[p],function(e){function t(){}var n=e.each,r=e.extend,i,s;return t.extend=i=function(e){function t(){var e,t,n,r;if(!s&&(r=this,r.init&&r.init.apply(r,arguments),t=r.Mixins))for(e=t.length;e--;)n=t[e],n.init&&n.init.apply(r,arguments)}function o(){return this}function u(e,t){return function(){var n=this,r=n._super,i;return n._super=f[e],i=t.apply(n,arguments),n._super=r,i}}var a=this,f=a.prototype,l,c,h;s=!0,l=new a,s=!1,e.Mixins&&(n(e.Mixins,function(t){t=t;for(var n in t)"init"!==n&&(e[n]=t[n])}),f.Mixins&&(e.Mixins=f.Mixins.concat(e.Mixins))),e.Methods&&n(e.Methods.split(","),function(t){e[t]=o}),e.Properties&&n(e.Properties.split(","),function(t){var n="_"+t;e[t]=function(e){var t=this,r;return e!==r?(t[n]=e,t):t[n]}}),e.Statics&&n(e.Statics,function(e,n){t[n]=e}),e.Defaults&&f.Defaults&&(e.Defaults=r({},f.Defaults,e.Defaults));for(c in e)h=e[c],l[c]="function"==typeof h&&f[c]?u(c,h):h;return t.prototype=l,t.constructor=t,t.extend=i,t},t}),r(I,[F,p],function(e,t){function n(e){for(var t=[],n=e.length,r;n--;)r=e[n],r.__checked||(t.push(r),r.__checked=1);for(n=t.length;n--;)delete t[n].__checked;return t}var r=/^([\w\\*]+)?(?:#([\w\\]+))?(?:\.([\w\\\.]+))?(?:\[\@?([\w\\]+)([\^\$\*!~]?=)([\w\\]+)\])?(?:\:(.+))?/i,i=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,s=/^\s*|\s*$/g,o,u=e.extend({init:function(e){function t(e){return e?(e=e.toLowerCase(),function(t){return"*"===e||t.type===e}):void 0}function n(e){return e?function(t){return t._name===e}:void 0}function o(e){return e?(e=e.split("."),function(t){for(var n=e.length;n--;)if(!t.hasClass(e[n]))return!1;return!0}):void 0}function u(e,t,n){return e?function(r){var i=r[e]?r[e]():"";return t?"="===t?i===n:"*="===t?i.indexOf(n)>=0:"~="===t?(" "+i+" ").indexOf(" "+n+" ")>=0:"!="===t?i!=n:"^="===t?0===i.indexOf(n):"$="===t?i.substr(i.length-n.length)===n:!1:!!n}:void 0}function a(e){var t;return e?(e=/(?:not\((.+)\))|(.+)/i.exec(e),e[1]?(t=l(e[1],[]),function(e){return!c(e,t)}):(e=e[2],function(t,n,r){return"first"===e?0===n:"last"===e?n===r-1:"even"===e?0===n%2:"odd"===e?1===n%2:t[e]?t[e]():!1})):void 0}function f(e,i,f){function l(e){e&&i.push(e)}var c;return c=r.exec(e.replace(s,"")),l(t(c[1])),l(n(c[2])),l(o(c[3])),l(u(c[4],c[5],c[6])),l(a(c[7])),i.psuedo=!!c[7],i.direct=f,i}function l(e,t){var n=[],r,s,o;do if(i.exec(""),s=i.exec(e),s&&(e=s[3],n.push(s[1]),s[2])){r=s[3];break}while(s);for(r&&l(r,t),e=[],o=0;o<n.length;o++)">"!=n[o]&&e.push(f(n[o],[],">"===n[o-1]));return t.push(e),t}var c=this.match;this._selectors=l(e,[])},match:function(e,n){var r,i,s,o,u,a,f,l,c,h,p,d,v;for(n=n||this._selectors,r=0,i=n.length;i>r;r++){for(u=n[r],o=u.length,v=e,d=0,s=o-1;s>=0;s--)for(l=u[s];v;){for(l.psuedo&&(p=v.parent().items(),c=t.inArray(v,p),h=p.length),a=0,f=l.length;f>a;a++)if(!l[a](v,c,h)){a=f+1;break}if(a===f){d++;break}if(s===o-1)break;v=v.parent()}if(d===o)return!0}return!1},find:function(e){function t(e,n,i){var s,o,u,a,f,l=n[i];for(s=0,o=e.length;o>s;s++){for(f=e[s],u=0,a=l.length;a>u;u++)if(!l[u](f,s,o)){u=a+1;break}if(u===a)i==n.length-1?r.push(f):f.items&&t(f.items(),n,i+1);else if(l.direct)return;f.items&&t(f.items(),n,i)}}var r=[],i,s,a=this._selectors;if(e.items){for(i=0,s=a.length;s>i;i++)t(e.items(),a[i],0);s>1&&(r=n(r))}return o||(o=u.Collection),new o(r)}});return u}),r(q,[p,I,F],function(e,t,n){var r,i,s=Array.prototype.push,o=Array.prototype.slice;return i={length:0,init:function(e){e&&this.add(e)},add:function(t){var n=this;return e.isArray(t)?s.apply(n,t):t instanceof r?n.add(t.toArray()):s.call(n,t),n},set:function(e){var t=this,n=t.length,r;for(t.length=0,t.add(e),r=t.length;n>r;r++)delete t[r];return t},filter:function(e){var n=this,i,s,o=[],u,a;for("string"==typeof e?(e=new t(e),a=function(t){return e.match(t)}):a=e,i=0,s=n.length;s>i;i++)u=n[i],a(u)&&o.push(u);return new r(o)},slice:function(){return new r(o.apply(this,arguments))},eq:function(e){return-1===e?this.slice(e):this.slice(e,+e+1)},each:function(t){return e.each(this,t),this},toArray:function(){return e.toArray(this)},indexOf:function(e){for(var t=this,n=t.length;n--&&t[n]!==e;);return n},reverse:function(){return new r(e.toArray(this).reverse())},hasClass:function(e){return this[0]?this[0].hasClass(e):!1},prop:function(e,t){var n=this,r,i;return t!==r?(n.each(function(n){n[e]&&n[e](t)}),n):(i=n[0],i&&i[e]?i[e]():void 0)},exec:function(t){var n=this,r=e.toArray(arguments).slice(1);return n.each(function(e){e[t]&&e[t].apply(e,r)}),n}},e.each("fire on off show hide addClass removeClass append prepend before after reflow".split(" "),function(t){i[t]=function(){var n=e.toArray(arguments);return this.each(function(e){t in e&&e[t].apply(e,n)}),this}}),e.each("text name disabled active selected checked visible parent value data".split(" "),function(e){i[e]=function(t){return this.prop(e,t)}}),r=n.extend(i),t.Collection=r,r}),r(R,[p,g],function(e,t){return{id:function(){return t.DOM.uniqueId()},createFragment:function(e){return t.DOM.createFragment(e)},getWindowSize:function(){return t.DOM.getViewPort()},getSize:function(e){return t.DOM.getSize(e)},getPos:function(e,n){return t.DOM.getPos(e,n)},getViewPort:function(e){return t.DOM.getViewPort(e)},get:function(e){return document.getElementById(e)},addClass:function(e,n){return t.DOM.addClass(e,n)},removeClass:function(e,n){return t.DOM.removeClass(e,n)},hasClass:function(e,n){return t.DOM.hasClass(e,n)},toggleClass:function(e,n,r){return t.DOM.toggleClass(e,n,r)},css:function(e,n,r){return t.DOM.setStyle(e,n,r)},on:function(e,n,r,i){return t.DOM.bind(e,n,r,i)},off:function(e,n,r){return t.DOM.unbind(e,n,r)},fire:function(e,n,r){return t.DOM.fire(e,n,r)}}}),r(U,[F,p,q,R],function(e,t,n,r){var i=t.makeMap("focusin focusout scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave wheel keydown keypress keyup contextmenu"," "),s={},o="onmousewheel"in document,u=!1,a=e.extend({Statics:{controlIdLookup:{}},classPrefix:"mce-",init:function(e){var n=this,i,s;if(n.settings=e=t.extend({},n.Defaults,e),n._id=r.id(),n._text=n._name="",n._width=n._height=0,n._aria={role:e.role},i=e.classes)for(i=i.split(" "),i.map={},s=i.length;s--;)i.map[i[s]]=!0;n._classes=i||[],n.visible(!0),t.each("title text width height name classes visible disabled active value".split(" "),function(t){var r=e[t],i;r!==i?n[t](r):n["_"+t]===i&&(n["_"+t]=!1)}),n.on("click",function(){return n.disabled()?!1:void 0}),e.classes&&t.each(e.classes.split(" "),function(e){n.addClass(e)}),n.settings=e,n._borderBox=n.parseBox(e.border),n._paddingBox=n.parseBox(e.padding),n._marginBox=n.parseBox(e.margin),e.hidden&&n.hide()},Properties:"parent,title,text,width,height,disabled,active,name,value",Methods:"renderHtml",getContainerElm:function(){return document.body},getParentCtrl:function(e){for(var t;e&&!(t=a.controlIdLookup[e.id]);)e=e.parentNode;return t},parseBox:function(e){var t,n=10;if(e)return"number"==typeof e?(e=e||0,{top:e,left:e,bottom:e,right:e}):(e=e.split(" "),t=e.length,1===t?e[1]=e[2]=e[3]=e[0]:2===t?(e[2]=e[0],e[3]=e[1]):3===t&&(e[3]=e[1]),{top:parseInt(e[0],n)||0,right:parseInt(e[1],n)||0,bottom:parseInt(e[2],n)||0,left:parseInt(e[3],n)||0})},borderBox:function(){return this._borderBox},paddingBox:function(){return this._paddingBox},marginBox:function(){return this._marginBox},measureBox:function(e,t){function n(t){var n=document.defaultView;return n?(t=t.replace(/[A-Z]/g,function(e){return"-"+e}),n.getComputedStyle(e,null).getPropertyValue(t)):e.currentStyle[t]}function r(e){var t=parseInt(n(e),10);return isNaN(t)?0:t}return{top:r(t+"TopWidth"),right:r(t+"RightWidth"),bottom:r(t+"BottomWidth"),left:r(t+"LeftWidth")}},initLayoutRect:function(){var e=this,t=e.settings,n,r,i=e.getEl(),s,o,u,a,f,l,c;n=e._borderBox=e._borderBox||e.measureBox(i,"border"),e._paddingBox=e._paddingBox||e.measureBox(i,"padding"),e._marginBox=e._marginBox||e.measureBox(i,"margin"),l=t.minWidth,c=t.minHeight,u=l||i.offsetWidth,a=c||i.offsetHeight,s=t.width,o=t.height,f=t.autoResize,f="undefined"!=typeof f?f:!s&&!o,s=s||u,o=o||a;var h=n.left+n.right,p=n.top+n.bottom,d=t.maxWidth||65535,v=t.maxHeight||65535;return e._layoutRect=r={x:t.x||0,y:t.y||0,w:s,h:o,deltaW:h,deltaH:p,contentW:s-h,contentH:o-p,innerW:s-h,innerH:o-p,startMinWidth:l||0,startMinHeight:c||0,minW:Math.min(u,d),minH:Math.min(a,v),maxW:d,maxH:v,autoResize:f,scrollW:0},e._lastLayoutRect={},r},layoutRect:function(e){var t=this,n=t._layoutRect,r,i,s,o,u,f;return n||(n=t.initLayoutRect()),e?(s=n.deltaW,o=n.deltaH,e.x!==u&&(n.x=e.x),e.y!==u&&(n.y=e.y),e.minW!==u&&(n.minW=e.minW),e.minH!==u&&(n.minH=e.minH),i=e.w,i!==u&&(i=i<n.minW?n.minW:i,i=i>n.maxW?n.maxW:i,n.w=i,n.innerW=i-s),i=e.h,i!==u&&(i=i<n.minH?n.minH:i,i=i>n.maxH?n.maxH:i,n.h=i,n.innerH=i-o),i=e.innerW,i!==u&&(i=i<n.minW-s?n.minW-s:i,i=i>n.maxW-s?n.maxW-s:i,n.innerW=i,n.w=i+s),i=e.innerH,i!==u&&(i=i<n.minH-o?n.minH-o:i,i=i>n.maxH-o?n.maxH-o:i,n.innerH=i,n.h=i+o),e.contentW!==u&&(n.contentW=e.contentW),e.contentH!==u&&(n.contentH=e.contentH),r=t._lastLayoutRect,(r.x!==n.x||r.y!==n.y||r.w!==n.w||r.h!==n.h)&&(f=a.repaintControls,f&&f.map&&!f.map[t._id]&&(f.push(t),f.map[t._id]=!0),r.x=n.x,r.y=n.y,r.w=n.w,r.h=n.h),t):n},repaint:function(){var e=this,t,n,r,i,s=0,o=0,u;t=e.getEl().style,r=e._layoutRect,u=e._lastRepaintRect||{},i=e._borderBox,s=i.left+i.right,o=i.top+i.bottom,r.x!==u.x&&(t.left=r.x+"px",u.x=r.x),r.y!==u.y&&(t.top=r.y+"px",u.y=r.y),r.w!==u.w&&(t.width=r.w-s+"px",u.w=r.w),r.h!==u.h&&(t.height=r.h-o+"px",u.h=r.h),e._hasBody&&r.innerW!==u.innerW&&(n=e.getEl("body").style,n.width=r.innerW+"px",u.innerW=r.innerW),e._hasBody&&r.innerH!==u.innerH&&(n=n||e.getEl("body").style,n.height=r.innerH+"px",u.innerH=r.innerH),e._lastRepaintRect=u,e.fire("repaint",{},!1)},on:function(e,t){function n(e){var t,n;return function(i){return t||r.parents().each(function(r){var i=r.settings.callbacks;return i&&(t=i[e])?(n=r,!1):void 0}),t.call(n,i)}}var r=this,s,o,u,a;if(t)for("string"==typeof t&&(t=n(t)),u=e.toLowerCase().split(" "),a=u.length;a--;)e=u[a],s=r._bindings,s||(s=r._bindings={}),o=s[e],o||(o=s[e]=[]),o.push(t),i[e]&&(r._nativeEvents?r._nativeEvents[e]=!0:r._nativeEvents={name:!0},r._rendered&&r.bindPendingEvents());return r},off:function(e,t){var n=this,r,i=n._bindings,s,o,u,a;if(i)if(e)for(u=e.toLowerCase().split(" "),r=u.length;r--;){if(e=u[r],s=i[e],!e){for(o in i)i[o].length=0;return n}if(s)if(t)for(a=s.length;a--;)s[a]===t&&s.splice(a,1);else s.length=0}else n._bindings=[];return n},fire:function(e,t,n){function r(){return!1}function i(){return!0}var s=this,o,u,a,f;if(e=e.toLowerCase(),t=t||{},t.type||(t.type=e),t.control||(t.control=s),t.preventDefault||(t.preventDefault=function(){t.isDefaultPrevented=i},t.stopPropagation=function(){t.isPropagationStopped=i},t.stopImmediatePropagation=function(){t.isImmediatePropagationStopped=i},t.isDefaultPrevented=r,t.isPropagationStopped=r,t.isImmediatePropagationStopped=r),s._bindings&&(a=s._bindings[e]))for(o=0,u=a.length;u>o&&(t.isImmediatePropagationStopped()||a[o].call(s,t)!==!1);o++);if(n!==!1)for(f=s.parent();f&&!t.isPropagationStopped();)f.fire(e,t,!1),f=f.parent();return t},parents:function(e){var t=this,r=new n;for(t=t.parent();t;t=t.parent())r.add(t);return e&&(r=r.filter(e)),r},next:function(){var e=this.parent().items();return e[e.indexOf(this)+1]},prev:function(){var e=this.parent().items();return e[e.indexOf(this)-1]},findCommonAncestor:function(e,t){for(var n;e;){for(n=t;n&&e!=n;)n=n.parent();if(e==n)break;e=e.parent()}return e},hasClass:function(e,t){var n=this._classes[t||"control"];return e=this.classPrefix+e,n&&!!n.map[e]},addClass:function(e,t){var n=this,r,i;return e=this.classPrefix+e,r=n._classes[t||"control"],r||(r=[],r.map={},n._classes[t||"control"]=r),r.map[e]||(r.map[e]=e,r.push(e),n._rendered&&(i=n.getEl(t),i&&(i.className=r.join(" ")))),n},removeClass:function(e,t){var n=this,r,i,s;if(e=this.classPrefix+e,r=n._classes[t||"control"],r&&r.map[e])for(delete r.map[e],i=r.length;i--;)r[i]===e&&r.splice(i,1);return n._rendered&&(s=n.getEl(t),s&&(s.className=r.join(" "))),n},toggleClass:function(e,t,n){var r=this;return t?r.addClass(e,n):r.removeClass(e,n),r},classes:function(e){var t=this._classes[e||"control"];return t?t.join(" "):""},getEl:function(e,t){var n,i=e?this._id+"-"+e:this._id;return n=s[i]=(t===!0?null:s[i])||r.get(i)},visible:function(e){var t=this,n;return"undefined"!=typeof e?(t._visible!==e&&(t._rendered&&(t.getEl().style.display=e?"":"none"),t._visible=e,n=t.parent(),n&&(n._lastRect=null),t.fire(e?"show":"hide")),t):t._visible},show:function(){return this.visible(!0)},hide:function(){return this.visible(!1)},focus:function(){try{this.getEl().focus()}catch(e){}return this},blur:function(){return this.getEl().blur(),this},aria:function(e,t){var n=this,r=n.getEl();return"undefined"==typeof t?n._aria[e]:(n._aria[e]=t,n._rendered&&("label"==e&&r.setAttribute("aria-labeledby",n._id),r.setAttribute("role"==e?e:"aria-"+e,t)),n)},encode:function(e,t){return t!==!1&&a.translate&&(e=a.translate(e)),(e||"").replace(/[&<>"]/g,function(e){return"&#"+e.charCodeAt(0)+";"})},before:function(e){var t=this,n=t.parent();return n&&n.insert(e,n.items().indexOf(t),!0),t},after:function(e){var t=this,n=t.parent();return n&&n.insert(e,n.items().indexOf(t)),t},remove:function(){var e=this,t=e.getEl(),n=e.parent(),i;if(e.items)for(var s=e.items().toArray(),o=s.length;o--;)s[o].remove();return n&&n.items&&(i=[],n.items().each(function(t){t!==e&&i.push(t)}),n.items().set(i),n._lastRect=null),e._eventsRoot&&e._eventsRoot==e&&r.off(t),delete a.controlIdLookup[e._id],t.parentNode&&t.parentNode.removeChild(t),e},renderBefore:function(e){var t=this;return e.parentNode.insertBefore(r.createFragment(t.renderHtml()),e),t.postRender(),t},renderTo:function(e){var t=this;return e=e||t.getContainerElm(),e.appendChild(r.createFragment(t.renderHtml())),t.postRender(),t},postRender:function(){var e=this,t=e.settings,n,i,s,o,u;for(o in t)0===o.indexOf("on")&&e.on(o.substr(2),t[o]);if(e._eventsRoot){for(s=e.parent();!u&&s;s=s.parent())u=s._eventsRoot;if(u)for(o in u._nativeEvents)e._nativeEvents[o]=!0}e.bindPendingEvents(),t.style&&(n=e.getEl(),n&&(n.setAttribute("style",t.style),n.style.cssText=t.style)),e._visible||r.css(e.getEl(),"display","none"),e.settings.border&&(i=e.borderBox(),r.css(e.getEl(),{"border-top-width":i.top,"border-right-width":i.right,"border-bottom-width":i.bottom,"border-left-width":i.left})),a.controlIdLookup[e._id]=e;for(var f in e._aria)e.aria(f,e._aria[f]);e.fire("postrender",{},!1)},scrollIntoView:function(e){function t(e,t){var n,r,i=e;for(n=r=0;i&&i!=t&&i.nodeType;)n+=i.offsetLeft||0,r+=i.offsetTop||0,i=i.offsetParent;return{x:n,y:r}}var n=this.getEl(),r=n.parentNode,i,s,o,u,a,f,l=t(n,r);return i=l.x,s=l.y,o=n.offsetWidth,u=n.offsetHeight,a=r.clientWidth,f=r.clientHeight,"end"==e?(i-=a-o,s-=f-u):"center"==e&&(i-=a/2-o/2,s-=f/2-u/2),r.scrollLeft=i,r.scrollTop=s,this},bindPendingEvents:function(){function e(e){var t=s.getParentCtrl(e.target);t&&t.fire(e.type,e)}function t(){var e=c._lastHoverCtrl;e&&(e.fire("mouseleave",{target:e.getEl()}),e.parents().each(function(e){e.fire("mouseleave",{target:e.getEl()})}),c._lastHoverCtrl=null)}function n(e){var t=s.getParentCtrl(e.target),n=c._lastHoverCtrl,r=0,i,o,u;if(t!==n){if(c._lastHoverCtrl=t,o=t.parents().toArray().reverse(),o.push(t),n){for(u=n.parents().toArray().reverse(),u.push(n),r=0;r<u.length&&o[r]===u[r];r++);for(i=u.length-1;i>=r;i--)n=u[i],n.fire("mouseleave",{target:n.getEl()})}for(i=r;i<o.length;i++)t=o[i],t.fire("mouseenter",{target:t.getEl()})}}function i(e){e.preventDefault(),"mousewheel"==e.type?(e.deltaY=-1/40*e.wheelDelta,e.wheelDeltaX&&(e.deltaX=-1/40*e.wheelDeltaX)):(e.deltaX=0,e.deltaY=e.detail),e=s.fire("wheel",e)}var s=this,a,f,l,c,h,p;if(s._rendered=!0,h=s._nativeEvents){for(l=s.parents().toArray(),l.unshift(s),a=0,f=l.length;!c&&f>a;a++)c=l[a]._eventsRoot;for(c||(c=l[l.length-1]||s),s._eventsRoot=c,f=a,a=0;f>a;a++)l[a]._eventsRoot=c;for(p in h){if(!h)return!1;"wheel"!==p||u?("mouseenter"===p||"mouseleave"===p?c._hasMouseEnter||(r.on(c.getEl(),"mouseleave",t),r.on(c.getEl(),"mouseover",n),c._hasMouseEnter=1):c[p]||(r.on(c.getEl(),p,e),c[p]=!0),h[p]=!1):o?r.on(s.getEl(),"mousewheel",i):r.on(s.getEl(),"DOMMouseScroll",i)}}},reflow:function(){return this.repaint(),this}});return a}),r(z,[],function(){var e={},t;return{add:function(t,n){e[t.toLowerCase()]=n},has:function(t){return!!e[t.toLowerCase()]},create:function(n,r){var i,s,o;if(!t){o=tinymce.ui;for(s in o)e[s.toLowerCase()]=o[s];t=!0}if("string"==typeof n?(r=r||{},r.type=n):(r=n,n=r.type),n=n.toLowerCase(),i=e[n],!i)throw new Error("Could not find control by type: "+n);return i=new i(r),i.type=n,i}}}),r(W,[U,q,I,z,p,R],function(e,t,n,r,i,s){var o={};return e.extend({layout:"",innerClass:"container-inner",init:function(e){var n=this;n._super(e),e=n.settings,n._fixed=e.fixed,n._items=new t,n.addClass("container"),n.addClass("container-body","body"),e.containerCls&&n.addClass(e.containerCls),n._layout=r.create((e.layout||n.layout)+"layout"),n.settings.items&&n.add(n.settings.items),n._hasBody=!0},items:function(){return this._items},find:function(e){return e=o[e]=o[e]||new n(e),e.find(this)},add:function(e){var t=this;return t.items().add(t.create(e)).parent(t),t},focus:function(){var e=this;return e.keyNav?e.keyNav.focusFirst():e._super(),e},replace:function(e,t){for(var n,r=this.items(),i=r.length;i--;)if(r[i]===e){r[i]=t;break}i>=0&&(n=t.getEl(),n&&n.parentNode.removeChild(n),n=e.getEl(),n&&n.parentNode.removeChild(n)),t.parent(this)},create:function(t){var n=this,s,o=[];return i.isArray(t)||(t=[t]),i.each(t,function(t){t&&(t instanceof e||("string"==typeof t&&(t={type:t}),s=i.extend({},n.settings.defaults,t),t.type=s.type=s.type||t.type||n.settings.defaultType||(s.defaults?s.defaults.type:null),t=r.create(s)),o.push(t))}),o},renderNew:function(){var e=this;return e.items().each(function(t,n){var r,i;t.parent(e),t._rendered||(r=e.getEl("body"),i=s.createFragment(t.renderHtml()),r.hasChildNodes()&&n<=r.childNodes.length-1?r.insertBefore(i,r.childNodes[n]):r.appendChild(i),t.postRender())}),e._layout.applyClasses(e),e._lastRect=null,e},append:function(e){return this.add(e).renderNew()},prepend:function(e){var t=this;return t.items().set(t.create(e).concat(t.items().toArray())),t.renderNew()},insert:function(e,t,n){var r=this,i,s,o;return e=r.create(e),i=r.items(),!n&&t<i.length-1&&(t+=1),t>=0&&t<i.length&&(s=i.slice(0,t).toArray(),o=i.slice(t).toArray(),i.set(s.concat(e,o))),r.renderNew()},fromJSON:function(e){var t=this;for(var n in e)t.find("#"+n).value(e[n]);return t},toJSON:function(){var e=this,t={};return e.find("*").each(function(e){var n=e.name(),r=e.value();n&&"undefined"!=typeof r&&(t[n]=r)}),t},preRender:function(){},renderHtml:function(){var e=this,t=e._layout;return e.preRender(),t.preRender(e),'<div id="'+e._id+'" class="'+e.classes()+'" role="'+this.settings.role+'">'+'<div id="'+e._id+'-body" class="'+e.classes("body")+'">'+(e.settings.html||"")+t.renderHtml(e)+"</div>"+"</div>"},postRender:function(){var e=this,t;return e.items().exec("postRender"),e._super(),e._layout.postRender(e),e._rendered=!0,e.settings.style&&s.css(e.getEl(),e.settings.style),e.settings.border&&(t=e.borderBox(),s.css(e.getEl(),{"border-top-width":t.top,"border-right-width":t.right,"border-bottom-width":t.bottom,"border-left-width":t.left})),e},initLayoutRect:function(){var e=this,t=e._super();return e._layout.recalc(e),t},recalc:function(){var e=this,t=e._layoutRect,n=e._lastRect;return n&&n.w==t.w&&n.h==t.h?void 0:(e._layout.recalc(e),t=e.layoutRect(),e._lastRect={x:t.x,y:t.y,w:t.w,h:t.h},!0)},reflow:function(){var t,n;if(this.visible()){for(e.repaintControls=[],e.repaintControls.map={},n=this.recalc(),t=e.repaintControls.length;t--;)e.repaintControls[t].repaint();"flow"!==this.settings.layout&&"stack"!==this.settings.layout&&this.repaint(),e.repaintControls=[]}return this}})}),r(X,[R],function(e){function t(){var e=document,t,n,r,i,s,o,u,a,f=Math.max;return t=e.documentElement,n=e.body,r=f(t.scrollWidth,n.scrollWidth),i=f(t.clientWidth,n.clientWidth),s=f(t.offsetWidth,n.offsetWidth),o=f(t.scrollHeight,n.scrollHeight),u=f(t.clientHeight,n.clientHeight),a=f(t.offsetHeight,n.offsetHeight),{width:s>r?i:r,height:a>o?u:o}}return function(n,r){function i(){return o.getElementById(r.handle||n)}var s,o=document,u,a,f,l,c,h;r=r||{},a=function(n){var a=t(),p,d;n.preventDefault(),u=n.button,p=i(),c=n.screenX,h=n.screenY,d=window.getComputedStyle?window.getComputedStyle(p,null).getPropertyValue("cursor"):p.runtimeStyle.cursor,s=o.createElement("div"),e.css(s,{position:"absolute",top:0,left:0,width:a.width,height:a.height,zIndex:2147483647,opacity:1e-4,background:"red",cursor:d}),o.body.appendChild(s),e.on(o,"mousemove",l),e.on(o,"mouseup",f),r.start(n)},l=function(e){return e.button!==u?f(e):(e.deltaX=e.screenX-c,e.deltaY=e.screenY-h,e.preventDefault(),r.drag(e),void 0)},f=function(t){e.off(o,"mousemove",l),e.off(o,"mouseup",f),s.parentNode.removeChild(s),r.stop&&r.stop(t)},this.destroy=function(){e.off(i())},e.on(i(),"mousedown",a)}}),r(V,[R,X],function(e,t){return{init:function(){var e=this;e.on("repaint",e.renderScroll)},renderScroll:function(){function n(){function t(t,o,u,a,f,l){var c,h,p,d,v,m,g,y,b;if(h=i.getEl("scroll"+t)){if(y=o.toLowerCase(),b=u.toLowerCase(),i.getEl("absend")&&e.css(i.getEl("absend"),y,i.layoutRect()[a]-1),!f)return e.css(h,"display","none"),void 0;e.css(h,"display","block"),c=i.getEl("body"),p=i.getEl("scroll"+t+"t"),d=c["client"+u]-2*s,d-=n&&r?h["client"+l]:0,v=c["scroll"+u],m=d/v,g={},g[y]=c["offset"+o]+s,g[b]=d,e.css(h,g),g={},g[y]=c["scroll"+o]*m,g[b]=d*m,e.css(p,g)}}var n,r,o;o=i.getEl("body"),n=o.scrollWidth>o.clientWidth,r=o.scrollHeight>o.clientHeight,t("h","Left","Width","contentW",n,"Height"),t("v","Top","Height","contentH",r,"Width")}function r(){function n(n,r,o,u,a){var f,l=i._id+"-scroll"+n,c=i.classPrefix;i.getEl().appendChild(e.createFragment('<div id="'+l+'" class="'+c+"scrollbar "+c+"scrollbar-"+n+'">'+'<div id="'+l+'t" class="'+c+'scrollbar-thumb"></div>'+"</div>")),i.draghelper=new t(l+"t",{start:function(){f=i.getEl("body")["scroll"+r],e.addClass(e.get(l),c+"active")},drag:function(e){var t,l,c,h,p=i.layoutRect();l=p.contentW>p.innerW,c=p.contentH>p.innerH,h=i.getEl("body")["client"+o]-2*s,h-=l&&c?i.getEl("scroll"+n)["client"+a]:0,t=h/i.getEl("body")["scroll"+o],i.getEl("body")["scroll"+r]=f+e["delta"+u]/t},stop:function(){e.removeClass(e.get(l),c+"active")}})}i.addClass("scroll"),n("v","Top","Height","Y","Width"),n("h","Left","Width","X","Height")}var i=this,s=2;i.settings.autoScroll&&(i._hasScroll||(i._hasScroll=!0,r(),i.on("wheel",function(e){var t=i.getEl("body");t.scrollLeft+=10*(e.deltaX||0),t.scrollTop+=10*e.deltaY,n()}),e.on(i.getEl("body"),"scroll",n)),n())}}}),r($,[W,V],function(e,t){return e.extend({Defaults:{layout:"fit",containerCls:"panel"},Mixins:[t],renderHtml:function(){var e=this,t=e._layout,n=e.settings.html;return e.preRender(),t.preRender(e),"undefined"==typeof n?n='<div id="'+e._id+'-body" class="'+e.classes("body")+'">'+t.renderHtml(e)+"</div>":("function"==typeof n&&(n=n.call(e)),e._hasBody=!1),'<div id="'+e._id+'" class="'+e.classes()+'" hideFocus="1" tabIndex="-1">'+(e._preBodyHtml||"")+n+"</div>"}})}),r(J,[R],function(e){function t(t,n,r){var i,s,o,u,a,f,l,c,h;return h=e.getViewPort(),s=e.getPos(n),o=s.x,u=s.y,t._fixed&&(o-=h.x,u-=h.y),i=t.getEl(),a=i.offsetWidth,f=i.offsetHeight,l=n.offsetWidth,c=n.offsetHeight,r=(r||"").split(""),"b"===r[0]&&(u+=c),"r"===r[1]&&(o+=l),"c"===r[0]&&(u+=Math.round(c/2)),"c"===r[1]&&(o+=Math.round(l/2)),"b"===r[3]&&(u-=f),"r"===r[4]&&(o-=a),"c"===r[3]&&(u-=Math.round(f/2)),"c"===r[4]&&(o-=Math.round(a/2)),{x:o,y:u,w:a,h:f}}return{testMoveRel:function(n,r){for(var i=e.getViewPort(),s=0;s<r.length;s++){var o=t(this,n,r[s]);if(this._fixed){if(o.x>0&&o.x+o.w<i.w&&o.y>0&&o.y+o.h<i.h)return r[s]}else if(o.x>i.x&&o.x+o.w<i.w+i.x&&o.y>i.y&&o.y+o.h<i.h+i.y)return r[s]}return r[0]},moveRel:function(e,n){"string"!=typeof n&&(n=this.testMoveRel(e,n));var r=t(this,e,n);return this.moveTo(r.x,r.y)},moveBy:function(e,t){var n=this,r=n.layoutRect();return n.moveTo(r.x+e,r.y+t),n},moveTo:function(t,n){function r(e,t,n){return 0>e?0:e+n>t?(e=t-n,0>e?0:e):e}var i=this;if(i.settings.constrainToViewport){var s=e.getViewPort(window),o=i.layoutRect();t=r(t,s.w+s.x,o.w),n=r(n,s.h+s.y,o.h)}return i._rendered?i.layoutRect({x:t,y:n}).repaint():(i.settings.x=t,i.settings.y=n),i.fire("move",{x:t,y:n}),i}}}),r(K,[R],function(e){return{resizeToContent:function(){this._layoutRect.autoResize=!0,this._lastRect=null,this.reflow()},resizeTo:function(t,n){if(1>=t||1>=n){var r=e.getWindowSize();t=1>=t?t*r.w:t,n=1>=n?n*r.h:n}return this._layoutRect.autoResize=!1,this.layoutRect({minW:t,minH:n,w:t,h:n}).reflow()},resizeBy:function(e,t){var n=this,r=n.layoutRect();return n.resizeTo(r.w+e,r.h+t)}}}),r(Q,[$,J,K,R],function(e,t,n,r){function i(e){var t;for(t=u.length;t--;)u[t]===e&&u.splice(t,1)}var s,o,u=[],a=[],f,l=e.extend({Mixins:[t,n],init:function(e){function t(){var e,t=l.zIndex||65535,n;if(a.length)for(e=0;e<a.length;e++)a[e].modal&&(t++,n=a[e]),a[e].getEl().style.zIndex=t,a[e].zIndex=t,t++;var i=document.getElementById(c.classPrefix+"modal-block");n?r.css(i,"z-index",n.zIndex-1):i&&(i.parentNode.removeChild(i),f=!1),l.currentZIndex=t}function n(e,t){for(;e;){if(e==t)return!0;e=e.parent()}}function i(e){function t(t,n){for(var r,i=0;i<u.length;i++)if(u[i]!=e)for(r=u[i].parent();r&&(r=r.parent());)r==e&&u[i].fixed(t).moveBy(0,n).repaint()}var n=r.getViewPort().y;e.settings.autofix&&(e._fixed?e._autoFixY>n&&(e.fixed(!1).layoutRect({y:e._autoFixY}).repaint(),t(!1,e._autoFixY-n)):(e._autoFixY=e.layoutRect().y,e._autoFixY<n&&(e.fixed(!0).layoutRect({y:0}).repaint(),t(!0,n-e._autoFixY))))}var c=this;c._super(e),c._eventsRoot=c,c.addClass("floatpanel"),e.autohide&&(s||(s=function(e){var t,r=c.getParentCtrl(e.target);for(t=u.length;t--;){var i=u[t];if(i.settings.autohide){if(r&&(n(r,i)||i.parent()===r))continue;e=i.fire("autohide",{target:e.target}),e.isDefaultPrevented()||i.hide()}}},r.on(document,"click",s)),u.push(c)),e.autofix&&(o||(o=function(){var e;for(e=u.length;e--;)i(u[e])},r.on(window,"scroll",o)),c.on("move",function(){i(this)})),c.on("postrender show",function(e){if(e.control==c){var n,i=c.classPrefix;c.modal&&!f&&(n=r.createFragment('<div id="'+i+'modal-block" class="'+i+"reset "+i+'fade"></div>'),n=n.firstChild,c.getContainerElm().appendChild(n),setTimeout(function(){r.addClass(n,i+"in"),r.addClass(c.getEl(),i+"in")},0),f=!0),a.push(c),t()}}),c.on("close hide",function(e){if(e.control==c){for(var n=a.length;n--;)a[n]===c&&a.splice(n,1);t()}}),c.on("show",function(){c.parents().each(function(e){return e._fixed?(c.fixed(!0),!1):void 0})}),e.popover&&(c._preBodyHtml='<div class="'+c.classPrefix+'arrow"></div>',c.addClass("popover").addClass("bottom").addClass("start"))},fixed:function(e){var t=this;if(t._fixed!=e){if(t._rendered){var n=r.getViewPort();e?t.layoutRect().y-=n.y:t.layoutRect().y+=n.y}t.toggleClass("fixed",e),t._fixed=e}return t},show:function(){var e=this,t,n=e._super();for(t=u.length;t--&&u[t]!==e;);return-1===t&&u.push(e),n},hide:function(){return i(this),this._super()},hideAll:function(){l.hideAll()},close:function(){var e=this;return e.fire("close"),e.remove()},remove:function(){i(this),this._super()}});return l.hideAll=function(){for(var e=u.length;e--;){var t=u[e];t.settings.autohide&&(t.fire("cancel",{},!1),t.hide(),u.splice(e,1))}},l}),r(G,[R],function(e){return function(t){function n(){if(!d)if(d=[],c.find)c.find("*").each(function(e){e.canFocus&&d.push(e.getEl())});else for(var e=c.getEl().getElementsByTagName("*"),t=0;t<e.length;t++)e[t].id&&e[t]&&d.push(e[t])}function r(){return document.getElementById(v)}function i(e){return e=e||r(),e&&e.getAttribute("role")}function s(e){for(var t,n=e||r();n=n.parentNode;)if(t=i(n))return t}function o(e){var t=document.getElementById(v);return t?t.getAttribute("aria-"+e):void 0}function u(){var n=r();if(!n||"TEXTAREA"!=n.nodeName&&"text"!=n.type)return t.onAction?t.onAction(v):e.fire(r(),"click",{keyboard:!0}),!0}function a(){var e;t.onCancel?((e=r())&&e.blur(),t.onCancel()):t.root.fire("cancel")}function f(e){function r(e){for(var t=c?c.getEl():document.body;e&&e!=t;){if("none"==e.style.display)return!1;e=e.parentNode}return!0}var i=-1,s,o,a=[];for(n(),o=a.length,o=0;o<d.length;o++)r(d[o])&&a.push(d[o]);for(o=a.length;o--;)if(a[o].id===v){i=o;break}i+=e,0>i?i=a.length-1:i>=a.length&&(i=0),s=a[i],s.focus(),v=s.id,t.actOnFocus&&u()}function l(){var e,r;for(r=i(t.root.getEl()),n(),e=d.length;e--;)if("toolbar"==r&&d[e].id===v)return d[e].focus(),void 0;d[0].focus()}var c=t.root,h=t.enableUpDown!==!1,p=t.enableLeftRight!==!1,d=t.items,v;return c.on("keydown",function(e){var n=37,r=39,l=38,c=40,d=27,v=14,m=13,g=32,y=9,b;switch(e.keyCode){case n:p&&(t.leftAction?t.leftAction():f(-1),b=!0);break;case r:p&&("menuitem"==i()&&"menu"==s()?o("haspopup")&&u():f(1),b=!0);break;case l:h&&(f(-1),b=!0);break;case c:h&&("menuitem"==i()&&"menubar"==s()?u():"button"==i()&&o("haspopup")?u():f(1),b=!0);break;case y:b=!0,e.shiftKey?f(-1):f(1);break;case d:b=!0,a();break;case v:case m:case g:b=u()}b&&(e.stopPropagation(),e.preventDefault())}),c.on("focusin",function(e){n(),v=e.target.id}),{moveFocus:f,focusFirst:l,cancel:a}}}),r(Y,[Q,$,R,G,X],function(e,t,n,r,i){var s=e.extend({modal:!0,Defaults:{border:1,layout:"flex",containerCls:"panel",role:"dialog",callbacks:{submit:function(){this.fire("submit",{data:this.toJSON()})},close:function(){this.close()}}},init:function(e){var n=this;n._super(e),n.addClass("window"),n._fixed=!0,e.buttons&&(n.statusbar=new t({layout:"flex",border:"1 0 0 0",spacing:3,padding:10,align:"center",pack:"end",defaults:{type:"button"},items:e.buttons}),n.statusbar.addClass("foot"),n.statusbar.parent(n)),n.on("click",function(e){-1!=e.target.className.indexOf(n.classPrefix+"close")&&n.close()}),n.aria("label",e.title),n._fullscreen=!1},recalc:function(){var e=this,t=e.statusbar,r,i,s;e._fullscreen&&(e.layoutRect(n.getWindowSize()),e.layoutRect().contentH=e.layoutRect().innerH),e._super(),r=e.layoutRect(),e.settings.title&&!e._fullscreen&&(i=r.headerW,i>r.w&&(e.layoutRect({w:i}),s=!0)),t&&(t.layoutRect({w:e.layoutRect().innerW}).recalc(),i=t.layoutRect().minW+r.deltaW,i>r.w&&(e.layoutRect({w:i}),s=!0)),s&&e.recalc()},initLayoutRect:function(){var e=this,t=e._super(),r=0,i;e.settings.title&&!e._fullscreen&&(i=e.getEl("head"),t.headerW=i.offsetWidth,t.headerH=i.offsetHeight,r+=t.headerH),e.statusbar&&(r+=e.statusbar.layoutRect().h),t.deltaH+=r,t.minH+=r,t.h+=r;var s=n.getWindowSize();return t.x=Math.max(0,s.w/2-t.w/2),t.y=Math.max(0,s.h/2-t.h/2),t},renderHtml:function(){var e=this,t=e._layout,n=e._id,r=e.classPrefix,i=e.settings,s="",o="",u=i.html;return e.preRender(),t.preRender(e),i.title&&(s='<div id="'+n+'-head" class="'+r+'window-head">'+'<div class="'+r+'title">'+e.encode(i.title)+"</div>"+'<button type="button" class="'+r+'close" aria-hidden="true">&times;</button>'+'<div id="'+n+'-dragh" class="'+r+'dragh"></div>'+"</div>"),i.url&&(u='<iframe src="'+i.url+'" tabindex="-1"></iframe>'),"undefined"==typeof u&&(u=t.renderHtml(e)),e.statusbar&&(o=e.statusbar.renderHtml()),'<div id="'+n+'" class="'+e.classes()+'" hideFocus="1" tabIndex="-1">'+s+'<div id="'+n+'-body" class="'+e.classes("body")+'">'+u+"</div>"+o+"</div>"},fullscreen:function(e){var t=this,r=document.documentElement,i,s=t.classPrefix,o;if(e!=t._fullscreen)if(n.on(window,"resize",function(){var e;if(t._fullscreen)if(i)t._timer||(t._timer=setTimeout(function(){var e=n.getWindowSize();t.moveTo(0,0).resizeTo(e.w,e.h),t._timer=0},50));else{e=(new Date).getTime();var r=n.getWindowSize();t.moveTo(0,0).resizeTo(r.w,r.h),(new Date).getTime()-e>50&&(i=!0)}}),o=t.layoutRect(),t._fullscreen=e,e){t._initial={x:o.x,y:o.y,w:o.w,h:o.h},t._borderBox=t.parseBox("0"),t.getEl("head").style.display="none",o.deltaH-=o.headerH+2,n.addClass(r,s+"fullscreen"),n.addClass(document.body,s+"fullscreen"),t.addClass("fullscreen");var u=n.getWindowSize();t.moveTo(0,0).resizeTo(u.w,u.h)}else t._borderBox=t.parseBox(t.settings.border),t.getEl("head").style.display="",o.deltaH+=o.headerH,n.removeClass(r,s+"fullscreen"),n.removeClass(document.body,s+"fullscreen"),t.removeClass("fullscreen"),t.moveTo(t._initial.x,t._initial.y).resizeTo(t._initial.w,t._initial.h);return t.reflow()},postRender:function(){var e=this,t=[],n,s,o;setTimeout(function(){e.addClass("in")},0),e.keyboardNavigation=new r({root:e,enableLeftRight:!1,enableUpDown:!1,items:t,onCancel:function(){e.close()}}),e.find("*").each(function(e){e.canFocus&&(s=s||e.settings.autofocus,n=n||e,"filepicker"==e.type?(t.push(e.getEl("inp")),e.getEl("open")&&t.push(e.getEl("open").firstChild)):t.push(e.getEl()))}),e.statusbar&&e.statusbar.find("*").each(function(e){e.canFocus&&(s=s||e.settings.autofocus,n=n||e,t.push(e.getEl()))}),e._super(),e.statusbar&&e.statusbar.postRender(),!s&&n&&n.focus(),this.dragHelper=new i(e._id+"-dragh",{start:function(){o={x:e.layoutRect().x,y:e.layoutRect().y}},drag:function(t){e.moveTo(o.x+t.deltaX,o.y+t.deltaY)}}),e.on("submit",function(t){t.isDefaultPrevented()||e.close()})},submit:function(){var e=this.getParentCtrl(document.activeElement);return e&&e.blur(),this.fire("submit",{data:this.toJSON()})},remove:function(){var e=this;e._super(),e.dragHelper.destroy(),e.statusbar&&this.statusbar.remove()}});return s}),r(Z,[Y],function(e){var t=e.extend({init:function(e){e={border:1,padding:20,layout:"flex",pack:"center",align:"center",containerCls:"panel",autoScroll:!0,buttons:{type:"button",text:"Ok",action:"ok"},items:{type:"label",multiline:!0,maxWidth:500,maxHeight:200}},this._super(e)},Statics:{OK:1,OK_CANCEL:2,YES_NO:3,YES_NO_CANCEL:4,msgBox:function(n){var r,i=n.callback||function(){};switch(n.buttons){case t.OK_CANCEL:r=[{type:"button",text:"Ok",subtype:"primary",onClick:function(e){e.control.parents()[1].close(),i(!0)}},{type:"button",text:"Cancel",onClick:function(e){e.control.parents()[1].close(),i(!1)}}];break;case t.YES_NO:r=[{type:"button",text:"Ok",subtype:"primary",onClick:function(e){e.control.parents()[1].close(),i(!0)}}];break;case t.YES_NO_CANCEL:r=[{type:"button",text:"Ok",subtype:"primary",onClick:function(e){e.control.parents()[1].close()}}];break;default:r=[{type:"button",text:"Ok",subtype:"primary",onClick:function(e){e.control.parents()[1].close()}}]}return(new e({padding:20,x:n.x,y:n.y,minWidth:300,minHeight:100,layout:"flex",pack:"center",align:"center",buttons:r,title:n.title,items:{type:"label",multiline:!0,maxWidth:500,maxHeight:200,text:n.text},onClose:n.onClose})).renderTo(document.body).reflow()},alert:function(e,n){return"string"==typeof e&&(e={text:e}),e.callback=n,t.msgBox(e)},confirm:function(e,n){return"string"==typeof e&&(e={text:e}),e.callback=n,e.buttons=t.OK_CANCEL,t.msgBox(e)}}});return t}),r(et,[Y,Z],function(e,t){return function(n){var r=this,i=[];r.windows=i,r.open=function(t,r){var s;return t.url=t.url||t.file,t.url&&(t.width=parseInt(t.width||320,10),t.height=parseInt(t.height||240,10)),t.body&&(t.items={defaults:t.defaults,type:t.bodyType||"form",items:t.body}),t.url||t.buttons||(t.buttons=[{text:"Ok",subtype:"primary",onclick:function(){s.find("form")[0].submit(),s.close()}},{text:"Cancel",onclick:function(){s.close()}}]),s=new e(t),i.push(s),s.on("close",function(){for(var e=i.length;e--;)i[e]===s&&i.splice(e,1);n.focus()}),t.data&&s.on("postRender",function(){this.find("*").each(function(e){var n=e.name();n in t.data&&e.value(t.data[n])})}),s.params=r||{},n.nodeChanged(),s.renderTo(document.body).reflow()},r.alert=function(e,n,r){t.alert(e,function(){n.call(r||this)})},r.confirm=function(e,n,r){t.confirm(e,function(e){n.call(r||this,e)})},r.close=function(){i.length&&i[i.length-1].close()},r.getParams=function(){return i.length?i[i.length-1].params:null},r.setParams=function(e){i.length&&(i[i.length-1].params=e)}}}),r(tt,[L,M,w,v,m,p],function(e,t,n,r,i,s){return function(o){function u(e,t){try{o.getDoc().execCommand(e,!1,t)}catch(n){}}function a(){var e=o.getDoc().documentMode;return e?e:6}function f(e){return e.isDefaultPrevented()}function l(){function t(e){function t(){if(3==a.nodeType){if(e&&f==a.length)return!0;if(!e&&0===f)return!0}}var n,r,i,u,a,f,l;n=I.getRng();var c=[n.startContainer,n.startOffset,n.endContainer,n.endOffset];if(n.collapsed||(e=!0),a=n[(e?"start":"end")+"Container"],f=n[(e?"start":"end")+"Offset"],3==a.nodeType&&(r=F.getParent(n.startContainer,F.isBlock),e&&(r=F.getNext(r,F.isBlock)),!r||!t()&&n.collapsed||(i=F.create("em",{id:"__mceDel"}),H(s.grep(r.childNodes),function(e){i.appendChild(e)}),r.appendChild(i))),n=F.createRng(),n.setStart(c[0],c[1]),n.setEnd(c[2],c[3]),I.setRng(n),o.getDoc().execCommand(e?"ForwardDelete":"Delete",!1,null),i){for(u=I.getBookmark();l=F.get("__mceDel");)F.remove(l,!0);I.moveToBookmark(u)}}o.on("keydown",function(n){var r;r=n.keyCode==j,f(n)||!r&&n.keyCode!=B||e.modifierPressed(n)||(n.preventDefault(),t(r))}),o.addCommand("Delete",function(){t()})}function c(){function e(e){var t=F.create("body"),n=e.cloneContents();return t.appendChild(n),I.serializer.serialize(t,{format:"html"})}function t(t){var n=e(t),r=F.createRng();r.selectNode(o.getBody());var i=e(r);return n===i}o.on("keydown",function(e){var n=e.keyCode,r;if(!f(e)&&(n==j||n==B)){if(r=o.selection.isCollapsed(),r&&!F.isEmpty(o.getBody()))return;if(W&&!r)return;if(!r&&!t(o.selection.getRng()))return;e.preventDefault(),o.setContent(""),o.selection.setCursorLocation(o.getBody(),0),o.nodeChanged()}})}function h(){o.on("keydown",function(t){!f(t)&&65==t.keyCode&&e.metaKeyPressed(t)&&(t.preventDefault(),o.execCommand("SelectAll"))})}function p(){o.settings.content_editable||(F.bind(o.getDoc(),"focusin",function(){I.setRng(I.getRng())}),F.bind(o.getDoc(),"mousedown",function(e){e.target==o.getDoc().documentElement&&(o.getWin().focus(),I.setRng(I.getRng()))}))}function d(){o.on("keydown",function(e){if(!f(e)&&e.keyCode===B&&I.isCollapsed()&&0===I.getRng(!0).startOffset){var t=I.getNode(),n=t.previousSibling;n&&n.nodeName&&"hr"===n.nodeName.toLowerCase()&&(F.remove(n),e.preventDefault())}})}function v(){window.Range.prototype.getClientRects||o.on("mousedown",function(e){if(!f(e)&&"HTML"===e.target.nodeName){var t=o.getBody();t.blur(),setTimeout(function(){t.focus()},0)}})}function m(){o.on("click",function(e){e=e.target,/^(IMG|HR)$/.test(e.nodeName)&&I.getSel().setBaseAndExtent(e,0,e,1),"A"==e.nodeName&&F.hasClass(e,"mceItemAnchor")&&I.select(e),o.nodeChanged()})}function g(){function e(){var e=F.getAttribs(I.getStart().cloneNode(!1));return function(){var t=I.getStart();t!==o.getBody()&&(F.setAttrib(t,"style",null),H(e,function(e){t.setAttributeNode(e.cloneNode(!0))}))}}function t(){return!I.isCollapsed()&&F.getParent(I.getStart(),F.isBlock)!=F.getParent(I.getEnd(),F.isBlock)}o.on("keypress",function(n){var r;return f(n)||8!=n.keyCode&&46!=n.keyCode||!t()?void 0:(r=e(),o.getDoc().execCommand("delete",!1,null),r(),n.preventDefault(),!1)}),F.bind(o.getDoc(),"cut",function(n){var r;!f(n)&&t()&&(r=e(),setTimeout(function(){r()},0))})}function y(){var e,n;o.on("selectionchange",function(){n&&(clearTimeout(n),n=0),n=window.setTimeout(function(){var n=I.getRng();e&&t.compareRanges(n,e)||(o.nodeChanged(),e=n)},50)})}function b(){document.body.setAttribute("role","application")}function w(){o.on("keydown",function(e){if(!f(e)&&e.keyCode===B&&I.isCollapsed()&&0===I.getRng(!0).startOffset){var t=I.getNode().previousSibling;if(t&&t.nodeName&&"table"===t.nodeName.toLowerCase())return e.preventDefault(),!1}})}function E(){a()>7||(u("RespectVisibilityInDesign",!0),o.contentStyles.push(".mceHideBrInPre pre br {display: none}"),F.addClass(o.getBody(),"mceHideBrInPre"),R.addNodeFilter("pre",function(e){for(var t=e.length,r,i,s,o;t--;)for(r=e[t].getAll("br"),i=r.length;i--;)s=r[i],o=s.prev,o&&3===o.type&&"\n"!=o.value.charAt(o.value-1)?o.value+="\n":s.parent.insert(new n("#text",3),s,!0).value="\n"}),U.addNodeFilter("pre",function(e){for(var t=e.length,n,r,i,s;t--;)for(n=e[t].getAll("br"),r=n.length;r--;)i=n[r],s=i.prev,s&&3==s.type&&(s.value=s.value.replace(/\r?\n$/,""))}))}function S(){F.bind(o.getBody(),"mouseup",function(){var e,t=I.getNode();"IMG"==t.nodeName&&((e=F.getStyle(t,"width"))&&(F.setAttrib(t,"width",e.replace(/[^0-9%]+/g,"")),F.setStyle(t,"width","")),(e=F.getStyle(t,"height"))&&(F.setAttrib(t,"height",e.replace(/[^0-9%]+/g,"")),F.setStyle(t,"height","")))})}function x(){o.on("keydown",function(t){var n,r,i,s,u,a,l,c;if(n=t.keyCode==j,!f(t)&&(n||t.keyCode==B)&&!e.modifierPressed(t)&&(r=I.getRng(),i=r.startContainer,s=r.startOffset,l=r.collapsed,3==i.nodeType&&i.nodeValue.length>0&&(0===s&&!l||l&&s===(n?0:1)))){if(a=i.previousSibling,a&&"IMG"==a.nodeName)return;c=o.schema.getNonEmptyElements(),t.preventDefault(),u=F.create("br",{id:"__tmp"}),i.parentNode.insertBefore(u,i),o.getDoc().execCommand(n?"ForwardDelete":"Delete",!1,null),i=I.getRng().startContainer,a=i.previousSibling,a&&1==a.nodeType&&!F.isBlock(a)&&F.isEmpty(a)&&!c[a.nodeName.toLowerCase()]&&F.remove(a),F.remove("__tmp")}})}function T(){o.on("keydown",function(t){var n,r,i,s,u;if(!f(t)&&t.keyCode==e.BACKSPACE&&(n=I.getRng(),r=n.startContainer,i=n.startOffset,s=F.getRoot(),u=r,n.collapsed&&0===i)){for(;u&&u.parentNode&&u.parentNode.firstChild==u&&u.parentNode!=s;)u=u.parentNode;"BLOCKQUOTE"===u.tagName&&(o.formatter.toggle("blockquote",null,u),n=F.createRng(),n.setStart(r,0),n.setEnd(r,0),I.setRng(n))}})}function N(){function e(){o._refreshContentEditable(),u("StyleWithCSS",!1),u("enableInlineTableEditing",!1),q.object_resizing||u("enableObjectResizing",!1)}q.readonly||o.on("BeforeExecCommand MouseDown",e)}function C(){function e(){H(F.select("a"),function(e){var t=e.parentNode,n=F.getRoot();if(t.lastChild===e){for(;t&&!F.isBlock(t);){if(t.parentNode.lastChild!==t||t===n)return;t=t.parentNode}F.add(t,"br",{"data-mce-bogus":1})}})}o.on("SetContent ExecCommand",function(t){("setcontent"==t.type||"mceInsertLink"===t.command)&&e()})}function k(){q.forced_root_block&&o.on("init",function(){u("DefaultParagraphSeparator",q.forced_root_block)})}function L(){o.on("Undo Redo SetContent",function(e){e.initial||o.execCommand("mceRepaint")})}function A(){o.on("keydown",function(e){var t;f(e)||e.keyCode!=B||(t=o.getDoc().selection.createRange(),t&&t.item&&(e.preventDefault(),o.undoManager.beforeChange(),F.remove(t.item(0)),o.undoManager.add()))})}function O(){var e;a()>=10&&(e="",H("p div h1 h2 h3 h4 h5 h6".split(" "),function(t,n){e+=(n>0?",":"")+t+":empty"}),o.contentStyles.push(e+"{padding-right: 1px !important}"))}function M(){a()<9&&(R.addNodeFilter("noscript",function(e){for(var t=e.length,n,r;t--;)n=e[t],r=n.firstChild,r&&n.attr("data-mce-innertext",r.value)}),U.addNodeFilter("noscript",function(e){for(var t=e.length,i,s,o;t--;)i=e[t],s=e[t].firstChild,s?s.value=r.decode(s.value):(o=i.attributes.map["data-mce-innertext"],o&&(i.attr("data-mce-innertext",null),s=new n("#text",3),s.value=o,s.raw=!0,i.append(s)))}))}function _(){function e(e,t){var n=i.createTextRange();try{n.moveToPoint(e,t)}catch(r){n=null}return n}function t(t){var r;t.button?(r=e(t.x,t.y),r&&(r.compareEndPoints("StartToStart",o)>0?r.setEndPoint("StartToStart",o):r.setEndPoint("EndToEnd",o),r.select())):n()}function n(){var e=r.selection.createRange();o&&!e.item&&0===e.compareEndPoints("StartToEnd",e)&&o.select(),F.unbind(r,"mouseup",n),F.unbind(r,"mousemove",t),o=s=0}var r=F.doc,i=r.body,s,o,u;r.documentElement.unselectable=!0,F.bind(r,"mousedown contextmenu",function(i){if("HTML"===i.target.nodeName){if(s&&n(),u=r.documentElement,u.scrollHeight>u.clientHeight)return;s=1,o=e(i.x,i.y),o&&(F.bind(r,"mouseup",n),F.bind(r,"mousemove",t),F.win.focus(),o.select())}})}function D(){o.on("keyup focusin",function(t){65==t.keyCode&&e.metaKeyPressed(t)||I.normalize()})}function P(){o.contentStyles.push("img:-moz-broken {-moz-force-broken-image-icon:1;min-width:24px;min-height:24px}")}var H=s.each,B=e.BACKSPACE,j=e.DELETE,F=o.dom,I=o.selection,q=o.settings,R=o.parser,U=o.serializer,z=i.gecko,W=i.ie,X=i.webkit;w(),T(),c(),D(),X&&(x(),l(),p(),m(),k(),i.iOS?y():h()),W&&(d(),b(),E(),S(),A(),O(),M(),_()),z&&(d(),v(),g(),N(),C(),L(),P())}}),r(nt,[p],function(e){function t(){return!1}function n(){return!0}var r="__bindings",i=e.makeMap("focusin focusout click dblclick mousedown mouseup mousemove mouseover beforepaste paste cut copy selectionchange mouseout mouseenter mouseleave keydown keypress keyup contextmenu dragend dragover draggesture dragdrop drop drag"," ");return{fire:function(e,i,s){var o=this,u,a,f,l,c;if(e=e.toLowerCase(),i=i||{},i.type=e,i.target||(i.target=o),i.preventDefault||(i.preventDefault=function(){i.isDefaultPrevented=n},i.stopPropagation=function(){i.isPropagationStopped=n},i.stopImmediatePropagation=function(){i.isImmediatePropagationStopped=n},i.isDefaultPrevented=t,i.isPropagationStopped=t,i.isImmediatePropagationStopped=t),o[r]&&(u=o[r][e]))for(a=0,f=u.length;f>a&&(u[a]=l=u[a],!i.isImmediatePropagationStopped());a++)if(l.call(o,i)===!1)return i.preventDefault(),i;if(s!==!1&&o.parent)for(c=o.parent();c&&!i.isPropagationStopped();)c.fire(e,i,!1),c=c.parent();return i},on:function(e,t){var n=this,s,o,u,a;if(t===!1&&(t=function(){return!1}),t)for(u=e.toLowerCase().split(" "),a=u.length;a--;)e=u[a],s=n[r],s||(s=n[r]={}),o=s[e],o||(o=s[e]=[],n.bindNative&&i[e]&&n.bindNative(e)),o.push(t);return n},off:function(e,t){var n=this,s,o=n[r],u,a,f,l;if(o)if(e)for(f=e.toLowerCase().split(" "),s=f.length;s--;){if(e=f[s],u=o[e],!e){for(a in o)o[e].length=0;return n}if(u){if(t)for(l=u.length;l--;)u[l]===t&&u.splice(l,1);else u.length=0;!u.length&&n.unbindNative&&i[e]&&(n.unbindNative(e),delete o[e])}}else{if(n.unbindNative)for(e in o)n.unbindNative(e);n[r]=[]}return n}}}),r(rt,[p,m],function(e,t){var n=e.each,r=e.explode,i={f9:120,f10:121,f11:122};return function(s){var o=this,u={};s.on("keyup keypress keydown",function(e){(e.altKey||e.ctrlKey||e.metaKey)&&n(u,function(n){var r=t.mac?e.ctrlKey||e.metaKey:e.ctrlKey;if(n.ctrl==r&&n.alt==e.altKey&&n.shift==e.shiftKey)return e.keyCode==n.keyCode||e.charCode&&e.charCode==n.charCode?(e.preventDefault(),"keydown"==e.type&&n.func.call(n.scope),!0):void 0})}),o.add=function(t,o,a,f){var l;return l=a,"string"==typeof a?a=function(){s.execCommand(l,!1,null)}:e.isArray(l)&&(a=function(){s.execCommand(l[0],l[1],l[2])}),n(r(t.toLowerCase()),function(e){var t={func:a,scope:f||s,desc:s.translate(o),alt:!1,ctrl:!1,shift:!1};n(r(e,"+"),function(e){switch(e){case"alt":case"ctrl":case"shift":t[e]=!0;break;default:t.charCode=e.charCodeAt(0),t.keyCode=i[e]||e.toUpperCase().charCodeAt(0)}}),u[(t.ctrl?"ctrl":"")+","+(t.alt?"alt":"")+","+(t.shift?"shift":"")+","+t.keyCode]=t}),!0}}}),r(it,[g,b,w,C,N,O,_,D,P,H,B,j,y,a,et,E,x,tt,m,p,nt,rt],function(e,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S){function x(e,t){return"selectionchange"==t||"drop"==t?e.getDoc():!e.inline&&/^mouse|click|contextmenu/.test(t)?e.getDoc():e.getBody()}function T(e,t,r){var i=this,s,o;s=i.documentBaseUrl=r.documentBaseURL,o=r.baseURI,i.settings=t=L({id:e,theme:"modern",delta_width:0,delta_height:0,popup_css:"",plugins:"",document_base_url:s,add_form_submit_trigger:!0,submit_patch:!0,add_unload_trigger:!0,convert_urls:!0,relative_urls:!0,remove_script_host:!0,object_resizing:!0,doctype:"<!DOCTYPE html>",visual:!0,font_size_style_values:"xx-small,x-small,small,medium,large,x-large,xx-large",font_size_legacy_values:"xx-small,small,medium,large,x-large,xx-large,300%",forced_root_block:"p",hidden_input:!0,padd_empty_editor:!0,render_ui:!0,indentation:"30px",inline_styles:!0,convert_fonts_to_spans:!0,indent:"simple",indent_before:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,ul,li,area,table,thead,tfoot,tbody,tr,section,article,hgroup,aside,figure,option,optgroup,datalist",indent_after:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,ul,li,area,table,thead,tfoot,tbody,tr,section,article,hgroup,aside,figure,option,optgroup,datalist",validate:!0,entity_encoding:"named",url_converter:i.convertURL,url_converter_scope:i,ie7_compat:!0},t),n.settings=t,n.baseURL=r.baseURL,i.id=t.id=e,i.isNotDirty=!0,i.plugins={},i.documentBaseURI=new h(t.document_base_url||s,{base_uri:o}),i.baseURI=o,i.contentCSS=[],i.contentStyles=[],i.shortcuts=new S(i),i.execCommands={},i.queryStateCommands={},i.queryValueCommands={},i.loadedCSS={},i.suffix=r.suffix,i.editorManager=r,i.inline=t.inline,i.execCallback("setup",i)}var N=e.DOM,C=n.ThemeManager,k=n.PluginManager,L=w.extend,A=w.each,O=w.explode,M=w.inArray,_=w.trim,D=w.resolve,P=d.Event,H=b.gecko,B=b.ie,j=b.opera;return T.prototype={render:function(){function e(){var e=p.ScriptLoader;n.language&&"en"!=n.language&&(n.language_url=t.editorManager.baseURL+"/langs/"+n.language+".js"),n.language_url&&e.add(n.language_url),n.theme&&"function"!=typeof n.theme&&"-"!=n.theme.charAt(0)&&!C.urls[n.theme]&&C.load(n.theme,"themes/"+n.theme+"/theme"+i+".js"),w.isArray(n.plugins)&&(n.plugins=n.plugins.join(" ")),A(n.external_plugins,function(e,t){k.load(t,e),n.plugins+=" "+t}),A(n.plugins.split(/[ ,]/),function(e){if(e=_(e),e&&!k.urls[e])if("-"==e.charAt(0)){e=e.substr(1,e.length);var t=k.dependencies(e);A(t,function(e){var t={prefix:"plugins/",resource:e,suffix:"/plugin"+i+".js"};e=k.createUrl(t,e),k.load(e.resource,e)})}else k.load(e,{prefix:"plugins/",resource:e,suffix:"/plugin"+i+".js"})}),e.loadQueue(function(){t.removed||t.init()})}var t=this,n=t.settings,r=t.id,i=t.suffix;if(!P.domLoaded)return N.bind(window,"ready",function(){t.render()}),void 0;if(t.editorManager.settings=n,t.getElement()&&b.contentEditable){n.inline?t.inline=!0:(t.orgVisibility=t.getElement().style.visibility,t.getElement().style.visibility="hidden");var s=t.getElement().form||N.getParent(r,"form");s&&(t.formElement=s,n.hidden_input&&!/TEXTAREA|INPUT/i.test(t.getElement().nodeName)&&N.insertAfter(N.create("input",{type:"hidden",name:r}),r),t.formEventDelegate=function(e){t.fire(e.type,e)},N.bind(s,"submit reset",t.formEventDelegate),t.on("reset",function(){t.setContent(t.startContent,{format:"raw"})}),!n.submit_patch||s.submit.nodeType||s.submit.length||s._mceOldSubmit||(s._mceOldSubmit=s.submit,s.submit=function(){return t.editorManager.triggerSave(),t.isNotDirty=!0,s._mceOldSubmit(s)})),t.windowManager=new v(t),"xml"==n.encoding&&t.on("GetContent",function(e){e.save&&(e.content=N.encode(e.content))}),n.add_form_submit_trigger&&t.on("submit",function(){t.initialized&&(t.save(),t.isNotDirty=!0)}),n.add_unload_trigger&&(t._beforeUnload=function(){!t.initialized||t.destroyed||t.isHidden()||t.save({format:"raw",no_events:!0})},t.editorManager.on("BeforeUnload",t._beforeUnload)),e()}},init:function(){function e(n){var r=k.get(n),i,s;i=k.urls[n]||t.documentBaseUrl.replace(/\/$/,""),n=_(n),r&&-1===M(d,n)&&(A(k.dependencies(n),function(t){e(t)}),s=new r(t,i),t.plugins[n]=s,s.init&&(s.init(t,i),d.push(n)))}var t=this,n=t.settings,r=t.getElement(),i,s,o,u,a,f,l,c,h,p,d=[];if(t.editorManager.add(t),n.aria_label=n.aria_label||N.getAttrib(r,"aria-label",t.getLang("aria.rich_text_area")),n.theme&&("function"!=typeof n.theme?(n.theme=n.theme.replace(/-/,""),a=C.get(n.theme),t.theme=new a(t,C.urls[n.theme]),t.theme.init&&t.theme.init(t,C.urls[n.theme]||t.documentBaseUrl.replace(/\/$/,""))):t.theme=n.theme),A(n.plugins.replace(/\-/g,"").split(/[ ,]/),e),t.fire("BeforeRenderUI"),n.render_ui&&t.theme&&(t.orgDisplay=r.style.display,"function"!=typeof n.theme?(i=n.width||r.style.width||r.offsetWidth,s=n.height||r.style.height||r.offsetHeight,o=n.min_height||100,h=/^[0-9\.]+(|px)$/i,h.test(""+i)&&(i=Math.max(parseInt(i,10)+(a.deltaWidth||0),100)),h.test(""+s)&&(s=Math.max(parseInt(s,10)+(a.deltaHeight||0),o)),a=t.theme.renderUI({targetNode:r,width:i,height:s,deltaWidth:n.delta_width,deltaHeight:n.delta_height}),n.content_editable||(N.setStyles(a.sizeContainer||a.editorContainer,{wi2dth:i,h2eight:s}),s=(a.iframeHeight||s)+("number"==typeof s?a.deltaHeight||0:""),o>s&&(s=o))):(a=n.theme(t,r),a.editorContainer.nodeType&&(a.editorContainer=a.editorContainer.id=a.editorContainer.id||t.id+"_parent"),a.iframeContainer.nodeType&&(a.iframeContainer=a.iframeContainer.id=a.iframeContainer.id||t.id+"_iframecontainer"),s=a.iframeHeight||r.offsetHeight),t.editorContainer=a.editorContainer),n.content_css&&A(O(n.content_css),function(e){t.contentCSS.push(t.documentBaseURI.toAbsolute(e))}),n.content_style&&t.contentStyles.push(n.content_style),n.content_editable)return r=u=a=null,t.initContentBody();for(document.domain&&location.hostname!=document.domain&&(t.editorManager.relaxedDomain=document.domain),t.iframeHTML=n.doctype+"<html><head>",n.document_base_url!=t.documentBaseUrl&&(t.iframeHTML+='<base href="'+t.documentBaseURI.getURI()+'" />'),!b.caretAfter&&n.ie7_compat&&(t.iframeHTML+='<meta http-equiv="X-UA-Compatible" content="IE=7" />'),t.iframeHTML+='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />',p=0;p<t.contentCSS.length;p++){var v=t.contentCSS[p];t.iframeHTML+='<link type="text/css" rel="stylesheet" href="'+v+'" />',t.loadedCSS[v]=!0}l=n.body_id||"tinymce",-1!=l.indexOf("=")&&(l=t.getParam("body_id","","hash"),l=l[t.id]||l),c=n.body_class||"",-1!=c.indexOf("=")&&(c=t.getParam("body_class","","hash"),c=c[t.id]||""),t.iframeHTML+='</head><body id="'+l+'" class="mce-content-body '+c+'" '+"onload=\"window.parent.tinymce.get('"+t.id+"').fire('load');\"><br></body></html>",t.editorManager.relaxedDomain&&(B||j&&parseFloat(window.opera.version())<11)&&(f='javascript:(function(){document.open();document.domain="'+document.domain+'";'+'var ed = window.parent.tinymce.get("'+t.id+'");document.write(ed.iframeHTML);'+"document.close();ed.initContentBody();})()"),u=N.add(a.iframeContainer,"iframe",{id:t.id+"_ifr",src:f||'javascript:""',frameBorder:"0",allowTransparency:"true",title:t.editorManager.translate("Rich Text Area. Press ALT-F9 for menu. Press ALT-F10 for toolbar. Press ALT-0 for help"),style:{width:"100%",height:s,display:"block"}}),t.contentAreaContainer=a.iframeContainer,a.editorContainer&&(N.get(a.editorContainer).style.display=t.orgDisplay),N.get(t.id).style.display="none",N.setAttrib(t.id,"aria-hidden",!0),t.editorManager.relaxedDomain&&f||t.initContentBody(),r=u=a=null},initContentBody:function(){var t=this,n=t.settings,s=N.get(t.id),h=t.getDoc(),p,d;n.inline||(t.getElement().style.visibility=t.orgVisibility),B&&t.editorManager.relaxedDomain||n.content_editable||(h.open(),h.write(t.iframeHTML),h.close(),t.editorManager.relaxedDomain&&(h.domain=t.editorManager.relaxedDomain)),n.content_editable&&(t.on("remove",function(){var e=this.getBody();N.removeClass(e,"mce-content-body"),N.removeClass(e,"mce-edit-focus"),N.setAttrib(e,"tabIndex",null),N.setAttrib(e,"contentEditable",null)}),N.addClass(s,"mce-content-body"),s.tabIndex=-1,t.contentDocument=h=n.content_document||document,t.contentWindow=n.content_window||window,t.bodyElement=s,n.content_document=n.content_window=null,n.root_name=s.nodeName.toLowerCase()),p=t.getBody(),p.disabled=!0,n.readonly||(p.contentEditable=t.getParam("content_editable_state",!0)),p.disabled=!1,t.schema=new m(n),t.dom=new e(h,{keep_values:!0,url_converter:t.convertURL,url_converter_scope:t,hex_colors:n.force_hex_style_colors,class_filter:n.class_filter,update_styles:!0,root_element:n.content_editable?t.id:null,schema:t.schema,onSetAttrib:function(e){t.fire("SetAttrib",e)}}),t.parser=new g(n,t.schema),t.parser.addAttributeFilter("src,href,style",function(e,n){for(var r=e.length,i,s=t.dom,o,u;r--;)i=e[r],o=i.attr(n),u="data-mce-"+n,i.attributes.map[u]||("style"===n?i.attr(u,s.serializeStyle(s.parseStyle(o),i.name)):i.attr(u,t.convertURL(o,n,i.name)))}),t.parser.addNodeFilter("script",function(e){for(var t=e.length,n;t--;)n=e[t],n.attr("type","mce-"+(n.attr("type")||"text/javascript"))}),t.parser.addNodeFilter("#cdata",function(e){for(var t=e.length,n;t--;)n=e[t],n.type=8,n.name="#comment",n.value="[CDATA["+n.value+"]]"}),t.parser.addNodeFilter("p,h1,h2,h3,h4,h5,h6,div",function(e){for(var n=e.length,i,s=t.schema.getNonEmptyElements();n--;)i=e[n],i.isEmpty(s)&&(i.empty().append(new r("br",1)).shortEnded=!0)}),t.serializer=new i(n,t),t.selection=new o(t.dom,t.getWin(),t.serializer,t),t.formatter=new u(t),t.undoManager=new a(t),t.forceBlocks=new l(t),t.enterKey=new f(t),t.editorCommands=new c(t),t.fire("PreInit"),n.browser_spellcheck||n.gecko_spellcheck||(h.body.spellcheck=!1,N.setAttrib(p,"spellcheck","false")),t.fire("PostRender"),t.quirks=y(t),n.directionality&&(p.dir=n.directionality),n.nowrap&&(p.style.whiteSpace="nowrap"),n.protect&&t.on("BeforeSetContent",function(e){A(n.protect,function(t){e.content=e.content.replace(t,function(e){return"<!--mce:protected "+escape(e)+"-->"})})}),t.on("SetContent",function(){t.addVisual(t.getBody())}),n.padd_empty_editor&&t.on("PostProcess",function(e){e.content=e.content.replace(/^(<p[^>]*>(&nbsp;|&#160;|\s|\u00a0|)<\/p>[\r\n]*|<br \/>[\r\n]*)$/,"")}),t.load({initial:!0,format:"html"}),t.startContent=t.getContent({format:"raw"}),t.initialized=!0,A(t._pendingNativeEvents,function(e){t.dom.bind(x(t,e),e,function(e){t.fire(e.type,e)})}),t.fire("init"),t.focus(!0),t.nodeChanged({initial:!0}),t.execCallback("init_instance_callback",t),t.contentStyles.length>0&&(d="",A(t.contentStyles,function(e){d+=e+"\r\n"}),t.dom.addStyle(d)),A(t.contentCSS,function(e){t.loadedCSS[e]||(t.dom.loadCSS(e),t.loadedCSS[e]=!0)}),n.auto_focus&&setTimeout(function(){var e=t.editorManager.get(n.auto_focus);e.selection.select(e.getBody(),1),e.selection.collapse(1),e.getBody().focus(),e.getWin().focus()},100),s=h=p=null},focus:function(e){var t,n=this,r=n.selection,i=n.settings.content_editable,s,o,u=n.getDoc(),a;e||(s=r.getRng(),s.item&&(o=s.item(0)),n._refreshContentEditable(),i||(n.getBody().focus(),n.getWin().focus()),(H||i)&&(a=n.getBody(),a.setActive?a.setActive():a.focus(),i&&r.normalize()),o&&o.ownerDocument==u&&(s=u.body.createControlRange(),s.addElement(o),s.select())),n.editorManager.activeEditor!=n&&((t=n.editorManager.activeEditor)&&t.fire("deactivate",{relatedTarget:n}),n.fire("activate",{relatedTarget:t})),n.editorManager.activeEditor=n},execCallback:function(e){var t=this,n=t.settings[e],r;if(n)return t.callbackLookup&&(r=t.callbackLookup[e])&&(n=r.func,r=r.scope),"string"==typeof n&&(r=n.replace(/\.\w+$/,""),r=r?D(r):0,n=D(n),t.callbackLookup=t.callbackLookup||{},t.callbackLookup[e]={func:n,scope:r}),n.apply(r||t,Array.prototype.slice.call(arguments,1))},translate:function(e){var t=this.settings.language||"en",n=this.editorManager.i18n;return e?n[t+"."+e]||e.replace(/\{\#([^\}]+)\}/g,function(e,r){return n[t+"."+r]||"{#"+r+"}"}):""},getLang:function(e,n){return this.editorManager.i18n[(this.settings.language||"en")+"."+e]||(n!==t?n:"{#"+e+"}")},getParam:function(e,t,n){var r=e in this.settings?this.settings[e]:t,i;return"hash"===n?(i={},"string"==typeof r?A(r.indexOf("=")>0?r.split(/[;,](?![^=;,]*(?:[;,]|$))/):r.split(","),function(e){e=e.split("="),i[_(e[0])]=e.length>1?_(e[1]):_(e)}):i=r,i):r},nodeChanged:function(){var e=this,t=e.selection,n,r,i;e.initialized&&!e.settings.disable_nodechange&&(i=e.getBody(),n=t.getStart()||i,n=B&&n.ownerDocument!=e.getDoc()?e.getBody():n,"IMG"==n.nodeName&&t.isCollapsed()&&(n=n.parentNode),r=[],e.dom.getParent(n,function(e){return e===i?!0:(r.push(e),void 0)}),e.fire("NodeChange",{element:n,parents:r}))},addButton:function(e,t){var n=this;t.cmd&&(t.onclick=function(){n.execCommand(t.cmd)}),t.text||t.icon||(t.icon=e),n.buttons=n.buttons||{},t.tooltip=t.tooltip||t.title,n.buttons[e]=t},addMenuItem:function(e,t){var n=this;t.cmd&&(t.onclick=function(){n.execCommand(t.cmd)}),n.menuItems=n.menuItems||{},n.menuItems[e]=t},addCommand:function(e,t,n){this.execCommands[e]={func:t,scope:n||this}},addQueryStateHandler:function(e,t,n){this.queryStateCommands[e]={func:t,scope:n||this}},addQueryValueHandler:function(e,t,n){this.queryValueCommands[e]={func:t,scope:n||this}},addShortcut:function(e,t,n,r){this.shortcuts.add(e,t,n,r)},execCommand:function(e,t,n,r){var i=this,s=0,o;return/^(mceAddUndoLevel|mceEndUndoLevel|mceBeginUndoLevel|mceRepaint)$/.test(e)||r&&r.skip_focus||i.focus(),r=L({},r),r=i.fire("BeforeExecCommand",{command:e,ui:t,value:n}),r.isDefaultPrevented()?!1:(o=i.execCommands[e])&&o.func.call(o.scope,t,n)!==!0?(i.fire("ExecCommand",{command:e,ui:t,value:n}),!0):(A(i.plugins,function(r){return r.execCommand&&r.execCommand(e,t,n)?(i.fire("ExecCommand",{command:e,ui:t,value:n}),s=!0,!1):void 0}),s?s:i.theme&&i.theme.execCommand&&i.theme.execCommand(e,t,n)?(i.fire("ExecCommand",{command:e,ui:t,value:n}),!0):i.editorCommands.execCommand(e,t,n)?(i.fire("ExecCommand",{command:e,ui:t,value:n}),!0):(i.getDoc().execCommand(e,t,n),i.fire("ExecCommand",{command:e,ui:t,value:n}),void 0))},queryCommandState:function(e){var t=this,n,r;if(!t._isHidden()){if((n=t.queryStateCommands[e])&&(r=n.func.call(n.scope),r!==!0))return r;if(r=t.editorCommands.queryCommandState(e),-1!==r)return r;try{return t.getDoc().queryCommandState(e)}catch(i){}}},queryCommandValue:function(e){var n=this,r,i;if(!n._isHidden()){if((r=n.queryValueCommands[e])&&(i=r.func.call(r.scope),i!==!0))return i;if(i=n.editorCommands.queryCommandValue(e),i!==t)return i;try{return n.getDoc().queryCommandValue(e)}catch(s){}}},show:function(){var e=this;N.show(e.getContainer()),N.hide(e.id),e.load(),e.fire("show")},hide:function(){var e=this,t=e.getDoc();B&&t&&t.execCommand("SelectAll"),e.save(),N.hide(e.getContainer()),N.setStyle(e.id,"display",e.orgDisplay),e.fire("hide")},isHidden:function(){return!N.isHidden(this.id)},setProgressState:function(e,t){this.fire("ProgressState",{state:e,time:t})},load:function(e){var n=this,r=n.getElement(),i;return r?(e=e||{},e.load=!0,i=n.setContent(r.value!==t?r.value:r.innerHTML,e),e.element=r,e.no_events||n.fire("LoadContent",e),e.element=r=null,i):void 0},save:function(e){var t=this,n=t.getElement(),r,i;if(n&&t.initialized)return e=e||{},e.save=!0,e.element=n,r=e.content=t.getContent(e),e.no_events||t.fire("SaveContent",e),r=e.content,/TEXTAREA|INPUT/i.test(n.nodeName)?n.value=r:(n.innerHTML=r,(i=N.getParent(t.id,"form"))&&A(i.elements,function(e){return e.name==t.id?(e.value=r,!1):void 0})),e.element=n=null,t.isNotDirty=!0,r},setContent:function(e,t){var n=this,r=n.getBody(),i;return t=t||{},t.format=t.format||"html",t.set=!0,t.content=e,t.no_events||n.fire("BeforeSetContent",t),e=t.content,B||0!==e.length&&!/^\s+$/.test(e)?("raw"!==t.format&&(e=(new s({},n.schema)).serialize(n.parser.parse(e,{isRootContent:!0}))),t.content=_(e),n.dom.setHTML(r,t.content),t.no_events||n.fire("SetContent",t),n.settings.content_editable&&document.activeElement!==n.getBody()||n.selection.normalize(),t.content):(i=n.settings.forced_root_block,e=i&&n.schema.isValidChild(r.nodeName.toLowerCase(),i.toLowerCase())?"<"+i+'><br data-mce-bogus="1"></'+i+">":'<br data-mce-bogus="1">',r.innerHTML=e,n.selection.select(r,!0),n.selection.collapse(!0),n.fire("SetContent",t),void 0)},getContent:function(e){var t=this,n,r=t.getBody();return e=e||{},e.format=e.format||"html",e.get=!0,e.getInner=!0,e.no_events||t.fire("BeforeGetContent",e),n="raw"==e.format?r.innerHTML:"text"==e.format?r.innerText||r.textContent:t.serializer.serialize(r,e),e.content="text"!=e.format?_(n):n,e.no_events||t.fire("GetContent",e),e.content},insertContent:function(e){this.execCommand("mceInsertContent",!1,e)},isDirty:function(){return!this.isNotDirty},getContainer:function(){var e=this;return e.container||(e.container=N.get(e.editorContainer||e.id+"_parent")),e.container},getContentAreaContainer:function(){return this.contentAreaContainer},getElement:function(){return N.get(this.settings.content_element||this.id)},getWin:function(){var e=this,t;return e.contentWindow||(t=N.get(e.id+"_ifr"),t&&(e.contentWindow=t.contentWindow)),e.contentWindow},getDoc:function(){var e=this,t;return e.contentDocument||(t=e.getWin(),t&&(e.contentDocument=t.document)),e.contentDocument},getBody:function(){return this.bodyElement||this.getDoc().body},convertURL:function(e,t,n){var r=this,i=r.settings;return i.urlconverter_callback?r.execCallback("urlconverter_callback",e,n,!0,t):!i.convert_urls||n&&"LINK"==n.nodeName||0===e.indexOf("file:")||0===e.length?e:i.relative_urls?r.documentBaseURI.toRelative(e):e=r.documentBaseURI.toAbsolute(e,i.remove_script_host)},addVisual:function(e){var n=this,r=n.settings,i=n.dom,s;e=e||n.getBody(),n.hasVisual===t&&(n.hasVisual=r.visual),A(i.select("table,a",e),function(e){var t;switch(e.nodeName){case"TABLE":return s=r.visual_table_class||"mce-item-table",t=i.getAttrib(e,"border"),t&&"0"!=t||(n.hasVisual?i.addClass(e,s):i.removeClass(e,s)),void 0;case"A":return i.getAttrib(e,"href",!1)||(t=i.getAttrib(e,"name")||e.id,s="mce-item-anchor",t&&(n.hasVisual?i.addClass(e,s):i.removeClass(e,s))),void 0}}),n.fire("VisualAid",{element:e,hasVisual:n.hasVisual})},remove:function(){var e=this,t=e.getContainer(),n=e.getDoc();e.removed||(e.removed=1,B&&n&&n.execCommand("SelectAll"),e.save(),N.setStyle(e.id,"display",e.orgDisplay),e.settings.content_editable||(P.unbind(e.getWin()),P.unbind(e.getDoc())),P.unbind(e.getBody()),P.unbind(t),e.fire("remove"),e.editorManager.remove(e),N.remove(t))},bindNative:function(e){var t=this;t.initialized?t.dom.bind(x(t,e),e,function(n){t.fire(e,n)}):t._pendingNativeEvents?t._pendingNativeEvents.push(e):t._pendingNativeEvents=[e]},unbindNative:function(e){var t=this;t.initialized&&t.dom.unbind(e)},destroy:function(e){var t=this,n;t.destroyed||(H&&(P.unbind(t.getDoc()),P.unbind(t.getWin()),P.unbind(t.getBody())),e||(t.editorManager.off("beforeunload",t._beforeUnload),t.theme&&t.theme.destroy&&t.theme.destroy(),t.selection.destroy(),t.dom.destroy()),n=t.formElement,n&&(n.submit=n._mceOldSubmit,n._mceOldSubmit=null,N.unbind(n,"submit reset",t.formEventDelegate)),t.contentAreaContainer=t.formElement=t.container=null,t.settings.content_element=t.bodyElement=t.contentDocument=t.contentWindow=null,t.selection&&(t.selection=t.selection.win=t.selection.dom=t.selection.dom.doc=null),t.destroyed=1)},_refreshContentEditable:function(){var e=this,t,n;e._isHidden()&&(t=e.getBody(),n=t.parentNode,n.removeChild(t),n.appendChild(t),t.focus())},_isHidden:function(){var e;return H?(e=this.selection.getSel(),!e||!e.rangeCount||0===e.rangeCount):0}},L(T.prototype,E),T}),r(st,[],function(){var e={};return{add:function(t,n){for(var r in n)e[r]=n[r]},translate:function(t){if("undefined"==typeof t)return t;if("string"!=typeof t&&t.raw)return t.raw;if(t.push){var n=t.slice(1);t=(e[t[0]]||t[0]).replace(/\{([^\}]+)\}/g,function(e,t){return n[t]})}return e[t]||t},data:e}}),r(ot,[g,m],function(e,t){function n(r){function i(){try{return document.activeElement}catch(e){return document.body}}function s(s){function o(t){return!!e.DOM.getParent(t,n.isEditorUIElement)}var u=s.editor,a,f;u.on("init",function(){"onbeforedeactivate"in document?u.dom.bind(u.getBody(),"beforedeactivate",function(){var e=u.getDoc().selection;a=e&&e.createRange?e.createRange():u.selection.getRng()}):u.inline&&(u.on("nodechange",function(){for(var e,t=document.activeElement;t;){if(t==u.getBody()){e=!0;break}t=t.parentNode}e&&(a=u.selection.getRng())}),t.webkit&&(f=function(){var e=u.selection.getRng();e.collapsed||(a=e)},e.DOM.bind(document,"selectionchange",f),u.on("remove",function(){e.DOM.unbind(document,"selectionchange",f)})))}),u.on("focusin",function(){var e=r.focusedEditor;u.selection.restoreRng&&(u.selection.setRng(u.selection.restoreRng),u.selection.restoreRng=null),e!=u&&(e&&e.fire("blur",{focusedEditor:u}),u.fire("focus",{blurredEditor:e}),u.focus(!1),r.focusedEditor=u)}),u.on("focusout",function(){u.selection.restoreRng=a,window.setTimeout(function(){var e=r.focusedEditor;e!=u&&(u.selection.restoreRng=null),o(i())||e!=u||(u.fire("blur",{focusedEditor:null}),r.focusedEditor=null,u.selection.restoreRng=null)},0)})}r.on("AddEditor",s)}return n.isEditorUIElement=function(e){return-1!==e.className.indexOf("mce-")},n}),r(ut,[it,g,j,m,p,nt,st,ot],function(e,n,r,i,s,o,u,a){var f=n.DOM,l=s.explode,c=s.each,h=s.extend,p=0,d,v={majorVersion:"4",minorVersion:"0",releaseDate:"2013-06-26",editors:[],i18n:u,activeEditor:null,setup:function(){var e=this,t,n,i="",s;if(n=document.location.href.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(n)||(n+="/"),s=window.tinymce||window.tinyMCEPreInit)t=s.base||s.baseURL,i=s.suffix;else for(var o=document.getElementsByTagName("script"),u=0;u<o.length;u++){var f=o[u].src;if(/tinymce(\.jquery|)(\.min|\.dev|)\.js/.test(f)){-1!=f.indexOf(".min")&&(i=".min"),t=f.substring(0,f.lastIndexOf("/"));break}}e.baseURL=(new r(n)).toAbsolute(t),e.documentBaseURL=n,e.baseURI=new r(e.baseURL),e.suffix=i,e.focusManager=new a(e)},init:function(t){function n(e){var t=e.id;return t||(t=e.name,t=t&&!f.get(t)?e.name:f.uniqueId(),e.setAttribute("id",t)),t}function r(e,t,n){var r=e[t];if(r)return r.apply(n||this,Array.prototype.slice.call(arguments,2))}function i(e,t){return t.constructor===RegExp?t.test(e.className):f.hasClass(e,t)}var s=this,o=[],u;s.settings=t,f.bind(window,"ready",function(){var a,d;if(r(t,"onpageload"),t.types)return c(t.types,function(r){c(f.select(r.selector),function(i){var u=new e(n(i),h({},t,r),s);o.push(u),u.render(1)})}),void 0;if(t.selector)return c(f.select(t.selector),function(r){var i=new e(n(r),t,s);o.push(i),i.render(1)}),void 0;switch(t.mode){case"exact":a=t.elements||"",a.length>0&&c(l(a),function(n){f.get(n)?(u=new e(n,t,s),o.push(u),u.render(!0)):c(document.forms,function(r){c(r.elements,function(r){r.name===n&&(n="mce_editor_"+p++,f.setAttrib(r,"id",n),u=new e(n,t,s),o.push(u),u.render(1))})})});break;case"textareas":case"specific_textareas":c(f.select("textarea"),function(r){t.editor_deselector&&i(r,t.editor_deselector)||(!t.editor_selector||i(r,t.editor_selector))&&(u=new e(n(r),t,s),o.push(u),u.render(!0))})}t.oninit&&(a=d=0,c(o,function(e){d++,e.initialized?a++:e.on("init",function(){a++,a==d&&r(t,"oninit")}),a==d&&r(t,"oninit")}))})},get:function(e){return e===t?this.editors:this.editors[e]},add:function(e){var t=this,n=t.editors;return n[e.id]=e,n.push(e),t.activeEditor=e,t.fire("AddEditor",{editor:e}),d||(d=function(){t.fire("BeforeUnload")},f.bind(window,"beforeunload",d)),e},createEditor:function(t,n){return this.add(new e(t,n,this))},remove:function(e){var t=this,n,r=t.editors,i;if(e){if("string"==typeof e)return e=e.selector||e,c(f.select(e),function(e){t.remove(r[e.id])}),void 0;if(i=e,!r[i.id])return null;for(delete r[i.id],n=0;n<r.length;n++)if(r[n]==i){r.splice(n,1);break}if(t.activeEditor==i&&(t.activeEditor=r[0]),i&&!i.removed)return i.remove(),i.destroy(),t.fire("RemoveEditor",{editor:i}),r.length||f.unbind(window,"beforeunload",d),i}else for(n=r.length-1;n>=0;n--)t.remove(r[n])},execCommand:function(t,n,r){var i=this,s=i.get(r);switch(t){case"mceAddEditor":return i.get(r)||(new e(r,i.settings,i)).render(),!0;case"mceRemoveEditor":return s&&s.remove(),!0;case"mceToggleEditor":return s?(s.isHidden()?s.show():s.hide(),!0):(i.execCommand("mceAddEditor",0,r),!0)}return i.activeEditor?i.activeEditor.execCommand(t,n,r):!1},triggerSave:function(){c(this.editors,function(e){e.save()})},addI18n:function(e,t){u.add(e,t)},translate:function(e){return u.translate(e)}};return h(v,o),v.setup(),window.tinymce=window.tinyMCE=v,v}),r(at,[ut,p],function(e,t){var n=t.each,r=t.explode;e.on("AddEditor",function(e){var t=e.editor;t.on("preInit",function(){function e(e,t){n(t,function(t,n){t&&u.setStyle(e,n,t)}),u.rename(e,"span")}function i(e){u=t.dom,a.convert_fonts_to_spans&&n(u.select("font,u,strike",e.node),function(e){s[e.nodeName.toLowerCase()](u,e)})}var s,o,u,a=t.settings;a.inline_styles&&(o=r(a.font_size_legacy_values),s={font:function(t,n){e(n,{backgroundColor:n.style.backgroundColor,color:n.color,fontFamily:n.face,fontSize:o[parseInt(n.size,10)-1]})},u:function(t,n){e(n,{textDecoration:"underline"})},strike:function(t,n){e(n,{textDecoration:"line-through"})}},t.on("PreProcess SetContent",i))})})}),r(ft,[],function(){return{send:function(e){function t(){!e.async||4==n.readyState||r++>1e4?(e.success&&1e4>r&&200==n.status?e.success.call(e.success_scope,""+n.responseText,n,e):e.error&&e.error.call(e.error_scope,r>1e4?"TIMED_OUT":"GENERAL",n,e),n=null):setTimeout(t,10)}var n,r=0;if(e.scope=e.scope||this,e.success_scope=e.success_scope||e.scope,e.error_scope=e.error_scope||e.scope,e.async=e.async===!1?!1:!0,e.data=e.data||"",n=new XMLHttpRequest){if(n.overrideMimeType&&n.overrideMimeType(e.content_type),n.open(e.type||(e.data?"POST":"GET"),e.url,e.async),e.content_type&&n.setRequestHeader("Content-Type",e.content_type),n.setRequestHeader("X-Requested-With","XMLHttpRequest"),n.send(e.data),!e.async)return t();setTimeout(t,10)}}}}),r(lt,[],function(){function e(t,n){var r,i,s,o;if(n=n||'"',null===t)return"null";if(s=typeof t,"string"==s)return i="\bb	t\nn\ff\rr\"\"''\\\\",n+t.replace(/([\u0080-\uFFFF\x00-\x1f\"\'\\])/g,function(e,t){return'"'===n&&"'"===e?e:(r=i.indexOf(t),r+1?"\\"+i.charAt(r+1):(e=t.charCodeAt().toString(16),"\\u"+"0000".substring(e.length)+e))})+n;if("object"==s){if(t.hasOwnProperty&&"[object Array]"===Object.prototype.toString.call(t)){for(r=0,i="[";r<t.length;r++)i+=(r>0?",":"")+e(t[r],n);return i+"]"}i="{";for(o in t)t.hasOwnProperty(o)&&(i+="function"!=typeof t[o]?(i.length>1?","+n:n)+o+n+":"+e(t[o],n):"");return i+"}"}return""+t}return{serialize:e,parse:function(e){try{return window[String.fromCharCode(101)+"val"]("("+e+")")}catch(t){}}}}),r(ct,[lt,ft,p],function(e,t,n){function r(e){this.settings=i({},e),this.count=0}var i=n.extend;return r.sendRPC=function(e){return(new r).send(e)},r.prototype={send:function(n){var r=n.error,s=n.success;n=i(this.settings,n),n.success=function(t,i){t=e.parse(t),"undefined"==typeof t&&(t={error:"JSON Parse error."}),t.error?r.call(n.error_scope||n.scope,t.error,i):s.call(n.success_scope||n.scope,t.result)},n.error=function(e,t){r&&r.call(n.error_scope||n.scope,e,t)},n.data=e.serialize({id:n.id||"c"+this.count++,method:n.method,params:n.params}),n.content_type="application/json",t.send(n)}},r}),r(ht,[g],function(e){return{callbacks:{},count:0,send:function(n){var r=this,i=e.DOM,s=n.count!==t?n.count:r.count,o="tinymce_jsonp_"+s;r.callbacks[s]=function(e){i.remove(o),delete r.callbacks[s],n.callback(e)},i.add(i.doc.body,"script",{id:o,src:n.url,type:"text/javascript"}),r.count++}}}),r(pt,[],function(){function e(){u=[];for(var e in o)u.push(e);i.length=u.length}function n(){function n(e){var n,r;return r=e!==t?f+e:i.indexOf(",",f),-1===r||r>i.length?null:(n=i.substring(f,r),f=r+1,n)}var r,i,u,f=0;o={},s.load(a),i=s.getAttribute(a)||"";do r=n(parseInt(n(),32)||0),null!==r&&(u=n(parseInt(n(),32)||0),o[r]=u);while(null!==r);e()}function r(){var t,n="";for(var r in o)t=o[r],n+=(n?",":"")+r.length.toString(32)+","+r+","+t.length.toString(32)+","+t;s.setAttribute(a,n),s.save(a),e()}var i,s,o,u,a;return window.localStorage?localStorage:(a="tinymce",s=document.documentElement,s.addBehavior("#default#userData"),i={key:function(e){return u[e]},getItem:function(e){return e in o?o[e]:null},setItem:function(e,t){o[e]=""+t,r()},removeItem:function(e){delete o[e],r()},clear:function(){o={},r()}},n(),i)}),r(dt,[g,a,y,b,p,m],function(e,t,n,r,i,s){var o=window.tinymce;return o.DOM=e.DOM,o.ScriptLoader=n.ScriptLoader,o.PluginManager=r.PluginManager,o.ThemeManager=r.ThemeManager,o.dom=o.dom||{},o.dom.Event=t.Event,i.each(i,function(e,t){o[t]=e}),i.each("isOpera isWebKit isIE isGecko isMac".split(" "),function(e){o[e]=s[e.substr(2).toLowerCase()]}),{}}),r(vt,[F,p],function(e,t){return e.extend({Defaults:{firstControlClass:"first",lastControlClass:"last"},init:function(e){this.settings=t.extend({},this.Defaults,e)},preRender:function(e){e.addClass(this.settings.containerClass,"body")},applyClasses:function(e){var t=this,n=t.settings,r,i,s;r=e.items().filter(":visible"),i=n.firstControlClass,s=n.lastControlClass,r.each(function(e){e.removeClass(i).removeClass(s),n.controlClass&&e.addClass(n.controlClass)}),r.eq(0).addClass(i),r.eq(-1).addClass(s)},renderHtml:function(e){var t=this,n=t.settings,r,i="";return r=e.items(),r.eq(0).addClass(n.firstControlClass),r.eq(-1).addClass(n.lastControlClass),r.each(function(e){n.controlClass&&e.addClass(n.controlClass),i+=e.renderHtml()}),i},recalc:function(){},postRender:function(){}})}),r(mt,[vt],function(e){return e.extend({Defaults:{containerClass:"abs-layout",controlClass:"abs-layout-item"},recalc:function(e){e.items().filter(":visible").each(function(e){var t=e.settings;e.layoutRect({x:t.x,y:t.y,w:t.w,h:t.h}),e.recalc&&e.recalc()})},renderHtml:function(e){return'<div id="'+e._id+'-absend" class="'+e.classPrefix+'abs-end"></div>'+this._super(e)}})}),r(gt,[U,J],function(e,t){return e.extend({Mixins:[t],Defaults:{classes:"widget tooltip tooltip-n"},text:function(e){var t=this;return"undefined"!=typeof e?(t._value=e,t._rendered&&(t.getEl().lastChild.innerHTML=t.encode(e)),t):t._value},renderHtml:function(){var e=this,t=e.classPrefix;return'<div id="'+e._id+'" class="'+e.classes()+'" role="presentation">'+'<div class="'+t+'tooltip-arrow"></div>'+'<div class="'+t+'tooltip-inner">'+e.encode(e._text)+"</div>"+"</div>"},repaint:function(){var e=this,t,n;t=e.getEl().style,n=e._layoutRect,t.left=n.x+"px",t.top=n.y+"px",t.zIndex=131070}})}),r(yt,[U,gt],function(e,t){var n,r=e.extend({init:function(e){var t=this;t._super(e),t.canFocus=!0,e.tooltip&&r.tooltips!==!1&&t.on("mouseenter mouseleave",function(n){var r=t.tooltip().moveTo(-65535);if(n.control==t&&"mouseenter"==n.type){var i=r.text(e.tooltip).show().testMoveRel(t.getEl(),["bc-tc","bc-tl","bc-tr"]);r.toggleClass("tooltip-n","bc-tc"==i),r.toggleClass("tooltip-nw","bc-tl"==i),r.toggleClass("tooltip-ne","bc-tr"==i),r.moveRel(t.getEl(),i)}else r.hide()}),t.aria("label",e.tooltip)},tooltip:function(){var e=this;return n||(n=new t({type:"tooltip"}),n.renderTo(e.getContainerElm())),n},active:function(e){var t=this,n;return e!==n&&(t.aria("pressed",e),t.toggleClass("active",e)),t._super(e)},disabled:function(e){var t=this,n;return e!==n&&(t.aria("disabled",e),t.toggleClass("disabled",e)),t._super(e)},postRender:function(){var e=this,t=e.settings;e._rendered=!0,e._super(),e.parent()||!t.width&&!t.height||(e.initLayoutRect(),e.repaint()),t.autofocus&&setTimeout(function(){e.focus()},0)},remove:function(){this._super(),n&&(n.remove(),n=null)}});return r}),r(bt,[yt],function(e){return e.extend({Defaults:{classes:"widget btn",role:"button"},init:function(e){var t=this,n;t.on("click mousedown",function(e){e.preventDefault()}),t._super(e),n=e.size,e.subtype&&t.addClass(e.subtype),n&&t.addClass("btn-"+n)},repaint:function(){var e=this.getEl().firstChild.style;e.width=e.height="100%",this._super()},renderHtml:function(){var e=this,t=e._id,n=e.classPrefix,r=e.settings.icon,i="";return e.settings.image&&(r="none",i=" style=\"background-image: url('"+e.settings.image+"')\""),r=e.settings.icon?n+"ico "+n+"i-"+r:"",'<div id="'+t+'" class="'+e.classes()+'" tabindex="-1">'+'<button role="presentation" type="button" tabindex="-1">'+(r?'<i class="'+r+'"'+i+"></i>":"")+(e._text?(r?" ":"")+e.encode(e._text):"")+"</button>"+"</div>"}})}),r(wt,[W],function(e){return e.extend({Defaults:{defaultType:"button",role:"toolbar"},renderHtml:function(){var e=this,t=e._layout;return e.addClass("btn-group"),e.preRender(),t.preRender(e),'<div id="'+e._id+'" class="'+e.classes()+'">'+'<div id="'+e._id+'-body">'+(e.settings.html||"")+t.renderHtml(e)+"</div>"+"</div>"}})}),r(Et,[yt],function(e){return e.extend({Defaults:{classes:"checkbox",role:"checkbox",checked:!1},init:function(e){var t=this;t._super(e),t.on("click mousedown",function(e){e.preventDefault()}),t.on("click",function(e){e.preventDefault(),t.disabled()||t.checked(!t.checked())}),t.checked(t.settings.checked)},checked:function(e){var t=this;return"undefined"!=typeof e?(e?t.addClass("checked"):t.removeClass("checked"),t._checked=e,t.aria("checked",e),t):t._checked},value:function(e){return this.checked(e)},renderHtml:function(){var e=this,t=e._id,n=e.classPrefix;return'<div id="'+t+'" class="'+e.classes()+'" unselectable="on" aria-labeledby="'+t+'-al" tabindex="-1">'+'<i class="'+n+"ico "+n+'i-checkbox"></i>'+'<span id="'+t+'-al" class="'+n+'label">'+e.encode(e._text)+"</span>"+"</div>"}})}),r(St,[bt,Q],function(e,t){return e.extend({showPanel:function(){var e=this,n=e.settings;n.panel.popover=!0,n.panel.autohide=!0,e.active(!0),e.panel?e.panel.show():(e.panel=(new t(n.panel)).on("hide",function(){e.active(!1)}).parent(e).renderTo(e.getContainerElm()),e.panel.fire("show"),e.panel.reflow()),e.panel.moveRel(e.getEl(),n.popoverAlign||"bc-tc")},hidePanel:function(){var e=this;e.panel&&e.panel.hide()},postRender:function(){var e=this;return e.on("click",function(t){t.control===e&&(e.panel&&e.panel.visible()?e.hidePanel():e.showPanel())}),e._super()}})}),r(xt,[St,g],function(e,t){var n=t.DOM;return e.extend({init:function(e){this._super(e),this.addClass("colorbutton")},color:function(e){return e?(this._color=e,this.getEl("preview").style.backgroundColor=e,this):this._color},renderHtml:function(){var e=this,t=e._id,n=e.classPrefix,r=e.settings.icon?n+"ico "+n+"i-"+e.settings.icon:"",i=e.settings.image?" style=\"background-image: url('"+e.settings.image+"')\"":"";return'<div id="'+t+'" class="'+e.classes()+'">'+'<button role="presentation" hidefocus type="button" tabindex="-1">'+(r?'<i class="'+r+'"'+i+"></i>":"")+'<span id="'+t+'-preview" class="'+n+'preview"></span>'+(e._text?(r?" ":"")+e._text:"")+"</button>"+'<button type="button" class="'+n+'open" hidefocus tabindex="-1">'+' <i class="'+n+'caret"></i>'+"</button>"+"</div>"},postRender:function(){var e=this,t=e.settings.onclick;return e.on("click",function(r){r.control!=e||n.getParent(r.target,"."+e.classPrefix+"open")||(r.stopImmediatePropagation(),t.call(e,r))}),delete e.settings.onclick,e._super()}})}),r(Tt,[yt,R],function(e,t){return e.extend({init:function(e){var n=this;n._super(e),n.addClass("combobox"),n.on("click",function(e){for(var t=e.target;t;)t.id&&-1!=t.id.indexOf("-open")&&n.fire("action"),t=t.parentNode}),n.on("keydown",function(e){"INPUT"==e.target.nodeName&&13==e.keyCode&&n.parents().reverse().each(function(t){return e.preventDefault(),n.fire("change"),t.submit?(t.submit(),!1):void 0})}),e.placeholder&&(n.addClass("placeholder"),n.on("focusin",function(){n._hasOnChange||(t.on(n.getEl("inp"),"change",function(){n.fire("change")}),n._hasOnChange=!0),n.hasClass("placeholder")&&(n.getEl("inp").value="",n.removeClass("placeholder"))}),n.on("focusout",function(){0===n.value().length&&(n.getEl("inp").value=e.placeholder,n.addClass("placeholder"))}))},value:function(e){var t=this;return"undefined"!=typeof e?(t._value=e,t.removeClass("placeholder"),t._rendered&&(t.getEl("inp").value=e),t):t._rendered?(e=t.getEl("inp").value,e!=t.settings.placeholder?e:""):t._value},disabled:function(e){var t=this;t._super(e),t._rendered&&(t.getEl("inp").disabled=e)},focus:function(){this.getEl("inp").focus()},repaint:function(){var e=this,n=e.getEl(),r=e.getEl("open"),i=e.layoutRect(),s,o;s=r?i.w-r.offsetWidth-10:i.w-10;var u=document;return u.all&&(!u.documentMode||u.documentMode<=8)&&(o=e.layoutRect().h-2+"px"),t.css(n.firstChild,{width:s,lineHeight:o}),e._super(),e},postRender:function(){var e=this;return t.on(this.getEl("inp"),"change",function(){e.fire("change")}),e._super()},renderHtml:function(){var e=this,t=e._id,n=e.settings,r=e.classPrefix,i=n.value||n.placeholder||"",s,o,u="";return s=n.icon?r+"ico "+r+"i-"+n.icon:"",o=e._text,(s||o)&&(u='<div id="'+t+'-open" class="'+r+"btn "+r+'open" tabIndex="-1">'+'<button id="'+t+'-action" type="button" hidefocus tabindex="-1">'+(s?'<i class="'+s+'"></i>':'<i class="'+r+'caret"></i>')+(o?(s?" ":"")+o:"")+"</button>"+"</div>",e.addClass("has-open")),'<div id="'+t+'" class="'+e.classes()+'">'+'<input id="'+t+'-inp" class="'+r+"textbox "+r+'placeholder" value="'+i+'" hidefocus="true">'+u+"</div>"}})}),r(Nt,[U,G],function(e,t){return e.extend({Defaults:{delimiter:""},init:function(e){var t=this;t._super(e),t.addClass("path"),t.canFocus=!0,t.on("click",function(e){var n,r=e.target;(n=r.getAttribute("data-index"))&&t.fire("select",{value:t.data()[n],index:n})})},focus:function(){var e=this;return e.keyNav=new t({root:e,enableLeftRight:!0}),e.keyNav.focusFirst(),e},data:function(e){var t=this;return"undefined"!=typeof e?(t._data=e,t.update(),t):t._data},update:function(){this.getEl().innerHTML=this._getPathHtml()},postRender:function(){var e=this;e._super(),e.data(e.settings.data)},renderHtml:function(){var e=this;return'<div id="'+e._id+'" class="'+e.classPrefix+'path">'+e._getPathHtml()+"</div>"},_getPathHtml:function(){var e=this,t=e._data||[],n,r,i="",s=e.classPrefix;for(n=0,r=t.length;r>n;n++)i+=(n>0?'<div class="'+s+'divider" aria-hidden="true"> '+e.settings.delimiter+" </div>":"")+'<div role="button" class="'+s+"path-item"+(n==r-1?" "+s+"last":"")+'" data-index="'+n+'" tabindex="-1" id="'+e._id+"-"+n+'">'+t[n].name+"</div>";return i||(i='<div class="'+s+'path-item">&nbsp;</div>'),i}})}),r(Ct,[Nt,ut],function(e,t){return e.extend({postRender:function(){function e(e){return 1===e.nodeType&&("BR"==e.nodeName||!!e.getAttribute("data-mce-bogus"))}var n=this,r=t.activeEditor;return n.on("select",function(t){var n=[],i,s=r.getBody();for(r.focus(),i=r.selection.getStart();i&&i!=s;)e(i)||n.push(i),i=i.parentNode;r.selection.select(n[n.length-1-t.index]),r.nodeChanged()}),r.on("nodeChange",function(t){for(var i=[],s=t.parents,o=s.length;o--;)if(1==s[o].nodeType&&!e(s[o])){var u=r.fire("ResolveName",{name:s[o].nodeName.toLowerCase(),target:s[o]});i.push({name:u.name})}n.data(i)}),n._super()}})}),r(kt,[W],function(e){return e.extend({Defaults:{layout:"flex",align:"center",defaults:{flex:1}},renderHtml:function(){var e=this,t=e._layout,n=e.classPrefix;return e.addClass("formitem"),t.preRender(e),'<div id="'+e._id+'" class="'+e.classes()+'" hideFocus="1" tabIndex="-1">'+(e.settings.title?'<div id="'+e._id+'-title" class="'+n+'title">'+e.settings.title+"</div>":"")+'<div id="'+e._id+'-body" class="'+e.classes("body")+'">'+(e.settings.html||"")+t.renderHtml(e)+"</div>"+"</div>"}})}),r(Lt,[W,kt],function(e,t){return e.extend({Defaults:{containerCls:"form",layout:"flex",direction:"column",align:"stretch",flex:1,padding:20,labelGap:30,spacing:10},preRender:function(){var e=this,n=e.items();n.each(function(n){var r,i=n.settings.label;i&&(r=new t({layout:"flex",autoResize:"overflow",defaults:{flex:1},items:[{type:"label",text:i,flex:0,forId:n._id}]}),r.type="formitem","undefined"==typeof n.settings.flex&&(n.settings.flex=1),e.replace(n,r),r.add(n))})},recalcLabels:function(){var e=this,t=0,n=[],r,i;if(e.settings.labelGapCalc!==!1)for(e.items().filter("formitem").each(function(e){var r=e.items()[0],i=r.getEl().clientWidth;t=i>t?i:t,n.push(r)}),i=e.settings.labelGap||0,r=n.length;r--;)n[r].settings.minWidth=t+i},visible:function(e){var t=this._super(e);return e===!0&&this._rendered&&this.recalcLabels(),t},submit:function(){var e=this.getParentCtrl(document.activeElement);return e&&e.blur(),this.fire("submit",{data:this.toJSON()})},postRender:function(){var e=this;e._super(),e.recalcLabels(),e.fromJSON(e.settings.data)}})}),r(At,[Lt],function(e){return e.extend({Defaults:{containerCls:"fieldset",layout:"flex",direction:"column",align:"stretch",flex:1,padding:"25 15 5 15",labelGap:30,spacing:10,border:1},renderHtml:function(){var e=this,t=e._layout,n=e.classPrefix;return e.preRender(),t.preRender(e),'<fieldset id="'+e._id+'" class="'+e.classes()+'" hideFocus="1" tabIndex="-1">'+(e.settings.title?'<legend id="'+e._id+'-title" class="'+n+'fieldset-title">'+e.settings.title+"</legend>":"")+'<div id="'+e._id+'-body" class="'+e.classes("body")+'">'+(e.settings.html||"")+t.renderHtml(e)+"</div>"+"</fieldset>"}})}),r(Ot,[Tt],function(e){return e.extend({init:function(e){var t=this,n=tinymce.activeEditor,r;e.spellcheck=!1,r=n.settings.file_browser_callback,r&&(e.icon="browse",e.onaction=function(){r(t.getEl("inp").id,t.getEl("inp").value,e.filetype,window)}),t._super(e)}})}),r(Mt,[mt],function(e){return e.extend({recalc:function(e){var t=e.layoutRect(),n=e.paddingBox();e.items().filter(":visible").each(function(e){e.layoutRect({x:n.left,y:n.top,w:t.innerW-n.right-n.left,h:t.innerH-n.top-n.bottom}),e.recalc&&e.recalc()})}})}),r(_t,[mt],function(e){return e.extend({recalc:function(e){var t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g=[],y,b,w,E,S,x,T,N,C,k,L,A,O,M,_,D,P,H,B,j,F,I,q,R,U=Math.max,z=Math.min;for(r=e.items().filter(":visible"),i=e.layoutRect(),s=e._paddingBox,o=e.settings,h=o.direction,u=o.align,a=o.pack,f=o.spacing||0,("row-reversed"==h||"column-reverse"==h)&&(r=r.set(r.toArray().reverse()),h=h.split("-")[0]),"column"==h?(C="y",T="h",N="minH",k="maxH",A="innerH",L="top",O="bottom",M="deltaH",_="contentH",F="left",H="w",D="x",P="innerW",B="minW",j="maxW",I="right",q="deltaW",R="contentW"):(C="x",T="w",N="minW",k="maxW",A="innerW",L="left",O="right",M="deltaW",_="contentW",F="top",H="h",D="y",P="innerH",B="minH",j="maxH",I="bottom",q="deltaH",R="contentH"),c=i[A]-s[L]-s[L],x=l=0,t=0,n=r.length;n>t;t++)p=r[t],d=p.layoutRect(),v=p.settings,m=v.flex,c-=n-1>t?f:0,m>0&&(l+=m,d[k]&&g.push(p),d.flex=m),c-=d[N],y=s[F]+d[B]+s[I],y>x&&(x=y);if(E={},E[N]=0>c?i[N]-c+i[M]:i[A]-c+i[M],E[B]=x+i[q],E[_]=i[A]-c,E[R]=x,E.minW=z(E.minW,i.maxW),E.minH=z(E.minH,i.maxH),E.minW=U(E.minW,i.startMinWidth),E.minH=U(E.minH,i.startMinHeight),!i.autoResize||E.minW==i.minW&&E.minH==i.minH){for(w=c/l,t=0,n=g.length;n>t;t++)p=g[t],d=p.layoutRect(),b=d[k],y=d[N]+Math.ceil(d.flex*w),y>b?(c-=d[k]-d[N],l-=d.flex,d.flex=0,d.maxFlexSize=b):d.maxFlexSize=0;for(w=c/l,S=s[L],E={},0===l&&("end"==a?S=c+s[L]:"center"==a?(S=Math.round(i[A]/2-(i[A]-c)/2)+s[L],0>S&&(S=s[L])):"justify"==a&&(S=s[L],f=Math.floor(c/(r.length-1)))),E[D]=s[F],t=0,n=r.length;n>t;t++)p=r[t],d=p.layoutRect(),y=d.maxFlexSize||d[N],"center"===u?E[D]=Math.round(i[P]/2-d[H]/2):"stretch"===u?(E[H]=U(d[B]||0,i[P]-s[F]-s[I]),E[D]=s[F]):"end"===u&&(E[D]=i[P]-d[H]-s.top),d.flex>0&&(y+=Math.ceil(d.flex*w)),E[T]=y,E[C]=S,p.layoutRect(E),p.recalc&&p.recalc(),S+=y+f}else if(E.w=E.minW,E.h=E.minH,e.layoutRect(E),this.recalc(e),null===e._lastRect){var W=e.parent();W&&(W._lastRect=null,W.recalc())}}})}),r(Dt,[vt],function(e){return e.extend({Defaults:{containerClass:"flow-layout",controlClass:"flow-layout-item",endClass:"break"},recalc:function(e){e.items().filter(":visible").each(function(e){e.recalc&&e.recalc()})}})}),r(Pt,[z,U,yt,Q,p,ut,m],function(e,t,n,r,i,s,o){function u(e){function t(e){return e.replace(/%(\w+)/g,"")}var n=s.activeEditor,r,i,o=n.dom,u="",a,f;return f=n.settings.preview_styles,f===!1?"":(f||(f="font-family font-size font-weight text-decoration text-transform color background-color border border-radius"),(e=n.formatter.get(e))?(e=e[0],r=e.block||e.inline||"span",i=o.create(r),l(e.styles,function(e,n){e=t(e),e&&o.setStyle(i,n,e)}),l(e.attributes,function(e,n){e=t(e),e&&o.setAttrib(i,n,e)}),l(e.classes,function(e){e=t(e),o.hasClass(i,e)||o.addClass(i,e)}),n.fire("PreviewFormats"),o.setStyles(i,{position:"absolute",left:-65535}),n.getBody().appendChild(i),a=o.getStyle(n.getBody(),"fontSize",!0),a=/px$/.test(a)?parseInt(a,10):0,l(f.split(" "),function(e){var t=o.getStyle(i,e,!0);if(!("background-color"==e&&/transparent|rgba\s*\([^)]+,\s*0\)/.test(t)&&(t=o.getStyle(n.getBody(),e,!0),"#ffffff"==o.toHex(t).toLowerCase())||"color"==e&&"#000000"==o.toHex(t).toLowerCase())){if("font-size"==e&&/em|%$/.test(t)){if(0===a)return;t=parseFloat(t,10)/(/%$/.test(t)?100:1),t=t*a+"px"}"border"==e&&t&&(u+="padding:0 2px;"),u+=e+":"+t+";"}}),n.fire("AfterPreviewFormats"),o.remove(i),u):void 0)}function a(e,t){return function(){var n=this;s.activeEditor.on("nodeChange",function(r){var i=s.activeEditor.formatter,o=null;l(r.parents,function(n){return l(e,function(e){return t?i.matchNode(n,t,{value:e.value})&&(o=e.value):i.matchNode(n,e.value)&&(o=e.value),o?!1:void 0}),o?!1:void 0}),n.value(o)})}}function f(e){e=e.split(";");for(var t=e.length;t--;)e[t]=e[t].split("=");return e}var l=i.each;t.translate=function(e){return s.translate(e)},n.tooltips=!o.iOS,s.on("AddEditor",function(t){function n(){function e(r){var i=[];if(r)return l(r,function(r){var s={text:r.title,icon:r.icon,preview:!0};if(r.items)s.menu=e(r.items);else{var o=r.format||"custom"+t++;r.format||(r.name=o,n.push(r)),s.textStyle=function(){return u(o)},s.onclick=function(){v(o)},s.onPostRender=function(){var e=this;e.parent().on("show",function(){e.disabled(!m.formatter.canApply(o)),e.active(m.formatter.match(o))})}}i.push(s)}),i}var t=0,n=[],r=[{title:"Headers",items:[{title:"Header 1",format:"h1"},{title:"Header 2",format:"h2"},{title:"Header 3",format:"h3"},{title:"Header 4",format:"h4"},{title:"Header 5",format:"h5"},{title:"Header 6",format:"h6"}]},{title:"Inline",items:[{title:"Bold",icon:"bold",format:"bold"},{title:"Italic",icon:"italic",format:"italic"},{title:"Underline",icon:"underline",format:"underline"},{title:"Strikethrough",icon:"strikethrough",format:"strikethrough"},{title:"Superscript",icon:"superscript",format:"superscript"},{title:"Subscript",icon:"subscript",format:"subscript"},{title:"Code",icon:"code",format:"code"}]},{title:"Blocks",items:[{title:"Paragraph",format:"p"},{title:"Blockquote",format:"blockquote"},{title:"Div",format:"div"},{title:"Pre",format:"pre"}]},{title:"Alignment",items:[{title:"Left",icon:"alignleft",format:"alignleft"},{title:"Center",icon:"aligncenter",format:"aligncenter"},{title:"Right",icon:"alignright",format:"alignright"},{title:"Justify",icon:"alignjustify",format:"alignjustify"}]}];m.on("init",function(){l(n,function(e){m.formatter.register(e.name,e)})});var i=e(m.settings.style_formats||r);return i}function o(){return m.undoManager?m.undoManager.hasUndo():!1}function c(){return m.undoManager?m.undoManager.hasRedo():!1}function h(){var e=this;e.disabled(!o()),m.on("Undo Redo AddUndo TypingUndo",function(){e.disabled(!o())})}function p(){var e=this;e.disabled(!c()),m.on("Undo Redo AddUndo TypingUndo",function(){e.disabled(!c())})}function d(){var e=this;m.on("VisualAid",function(t){e.active(t.hasVisual)}),e.active(m.hasVisual)}function v(e){e.control&&(e=e.control.value()),e&&s.activeEditor.execCommand("mceToggleFormat",!1,e)}var m=t.editor,g;g=n(),l({bold:"Bold",italic:"Italic",underline:"Underline",strikethrough:"Strikethrough",subscript:"Subscript",superscript:"Superscript"},function(e,t){m.addButton(t,{tooltip:e,onPostRender:function(){var e=this;m.formatter?m.formatter.formatChanged(t,function(t){e.active(t)}):m.on("init",function(){m.formatter.formatChanged(t,function(t){e.active(t)})})},onclick:function(){v(t)}})}),l({outdent:["Decrease indent","Outdent"],indent:["Increase indent","Indent"],cut:["Cut","Cut"],copy:["Copy","Copy"],paste:["Paste","Paste"],help:["Help","mceHelp"],selectall:["Select all","SelectAll"],hr:["Insert horizontal rule","InsertHorizontalRule"],removeformat:["Clear formatting","RemoveFormat"],visualaid:["Visual aids","mceToggleVisualAid"],newdocument:["New document","mceNewDocument"]},function(e,t){m.addButton(t,{tooltip:e[0],cmd:e[1]})}),l({blockquote:["Toggle blockquote","mceBlockQuote"],numlist:["Numbered list","InsertOrderedList"],bullist:["Bulleted list","InsertUnorderedList"],subscript:["Subscript","Subscript"],superscript:["Superscript","Superscript"],alignleft:["Align left","JustifyLeft"],aligncenter:["Align center","JustifyCenter"],alignright:["Align right","JustifyRight"],alignjustify:["Justify","JustifyFull"]},function(e,t){m.addButton(t,{tooltip:e[0],cmd:e[1],onPostRender:function(){var e=this;m.formatter?m.formatter.formatChanged(t,function(t){e.active(t)}):m.on("init",function(){m.formatter.formatChanged(t,function(t){e.active(t)})})}})}),m.addButton("undo",{tooltip:"Undo",onPostRender:h,cmd:"undo"}),m.addButton("redo",{tooltip:"Redo",onPostRender:p,cmd:"redo"}),m.addMenuItem("newdocument",{text:"New document",shortcut:"Ctrl+N",icon:"newdocument",cmd:"mceNewDocument"}),m.addMenuItem("undo",{text:"Undo",icon:"undo",shortcut:"Ctrl+Z",onPostRender:h,cmd:"undo"}),m.addMenuItem("redo",{text:"Redo",icon:"redo",shortcut:"Ctrl+Y",onPostRender:p,cmd:"redo"}),m.addMenuItem("visualaid",{text:"Visual aids",selectable:!0,onPostRender:d,cmd:"mceToggleVisualAid"}),l({cut:["Cut","Cut","Ctrl+X"],copy:["Copy","Copy","Ctrl+C"],paste:["Paste","Paste","Ctrl+V"],selectall:["Select all","SelectAll","Ctrl+A"],bold:["Bold","Bold","Ctrl+B"],italic:["Italic","Italic","Ctrl+I"],underline:["Underline","Underline"],strikethrough:["Strikethrough","Strikethrough"],subscript:["Subscript","Subscript"],superscript:["Superscript","Superscript"],removeformat:["Clear formatting","RemoveFormat"]},function(e,t){m.addMenuItem(t,{text:e[0],icon:t,shortcut:e[2],cmd:e[1]})}),m.on("mousedown",function(){r.hideAll()}),e.add("styleselect",function(t){var n=[].concat(g);return e.create("menubutton",i.extend({text:"Formats",menu:n},t))}),e.add("formatselect",function(t){var n=[],r=f(m.settings.block_formats||"Paragraph=p;Address=address;Pre=pre;Header 1=h1;Header 2=h2;Header 3=h3;Header 4=h4;Header 5=h5;Header 6=h6");return l(r,function(e){n.push({text:{raw:e[0]},value:e[1],textStyle:function(){return u(e[1])}})}),e.create("listbox",i.extend({text:{raw:r[0][0]},values:n,fixedWidth:!0,onselect:v,onPostRender:a(n)},t))}),e.add("fontselect",function(t){var n="Andale Mono=andale mono,times;Arial=arial,helvetica,sans-serif;Arial Black=arial black,avant garde;Book Antiqua=book antiqua,palatino;Comic Sans MS=comic sans ms,sans-serif;Courier New=courier new,courier;Georgia=georgia,palatino;Helvetica=helvetica;Impact=impact,chicago;Symbol=symbol;Tahoma=tahoma,arial,helvetica,sans-serif;Terminal=terminal,monaco;Times New Roman=times new roman,times;Trebuchet MS=trebuchet ms,geneva;Verdana=verdana,geneva;Webdings=webdings;Wingdings=wingdings,zapf dingbats",r=[],o=f(m.settings.font_formats||n);return l(o,function(e){r.push({text:{raw:e[0]},value:e[1],textStyle:-1==e[1].indexOf("dings")?"font-family:"+e[1]:""})}),e.create("listbox",i.extend({text:"Font Family",tooltip:"Font Family",values:r,fixedWidth:!0,onPostRender:a(r,"fontname"),onselect:function(e){e.control.settings.value&&s.activeEditor.execCommand("FontName",!1,e.control.settings.value)}},t))}),e.add("fontsizeselect",function(t){var n=[],r="8pt 10pt 12pt 14pt 18pt 24pt 36pt",o=m.settings.fontsize_formats||r;return l(o.split(" "),function(e){n.push({text:e,value:e})}),e.create("listbox",i.extend({text:"Font Sizes",tooltip:"Font Sizes",values:n,fixedWidth:!0,onPostRender:a(n,"fontsize"),onclick:function(e){e.control.settings.value&&s.activeEditor.execCommand("FontSize",!1,e.control.settings.value)}},t))}),m.addMenuItem("formats",{text:"Formats",menu:g})})}),r(Ht,[mt],function(e){return e.extend({recalc:function(e){var t=e.settings,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S,x,T=[],N=[],C,k,L,A,O,M;for(t=e.settings,i=e.items().filter(":visible"),s=e.layoutRect(),r=t.columns||Math.ceil(Math.sqrt(i.length)),n=Math.ceil(i.length/r),y=t.spacingH||t.spacing||0,b=t.spacingV||t.spacing||0,w=t.alignH||t.align,E=t.alignV||t.align,m=e._paddingBox,w&&"string"==typeof w&&(w=[w]),E&&"string"==typeof E&&(E=[E]),c=0;r>c;c++)T.push(0);for(h=0;n>h;h++)N.push(0);for(h=0;n>h;h++)for(c=0;r>c&&(l=i[h*r+c],l);c++)f=l.layoutRect(),C=f.minW,k=f.minH,T[c]=C>T[c]?C:T[c],N[h]=k>N[h]?k:N[h];for(O=s.innerW-m.left-m.right,S=0,c=0;r>c;c++)S+=T[c]+(c>0?y:0),O-=(c>0?y:0)+T[c];for(M=s.innerH-m.top-m.bottom,x=0,h=0;n>h;h++)x+=N[h]+(h>0?b:0),M-=(h>0?b:0)+N[h];if(S+=m.left+m.right,x+=m.top+m.bottom,a={},a.minW=S+(s.w-s.innerW),a.minH=x+(s.h-s.innerH),a.contentW=a.minW-s.deltaW,a.contentH=a.minH-s.deltaH,a.minW=Math.min(a.minW,s.maxW),a.minH=Math.min(a.minH,s.maxH),a.minW=Math.max(a.minW,s.startMinWidth),a.minH=Math.max(a.minH,s.startMinHeight),!s.autoResize||a.minW==s.minW&&a.minH==s.minH){s.autoResize&&(a=e.layoutRect(a),a.contentW=a.minW-s.deltaW,a.contentH=a.minH-s.deltaH);var _;_="start"==t.packV?0:M>0?Math.floor(M/n):0;var D=0,P=t.flexWidths;if(P)for(c=0;c<P.length;c++)D+=P[c];else D=r;var H=O/D;for(c=0;r>c;c++)T[c]+=P?Math.ceil(P[c]*H):H;for(d=m.top,h=0;n>h;h++){for(p=m.left,u=N[h]+_,c=0;r>c&&(l=i[h*r+c],l);c++)v=l.settings,f=l.layoutRect(),o=T[c],L=A=0,f.x=p,f.y=d,g=v.alignH||(w?w[c]||w[0]:null),"center"==g?f.x=p+o/2-f.w/2:"right"==g?f.x=p+o-f.w:"stretch"==g&&(f.w=o),g=v.alignV||(E?E[c]||E[0]:null),"center"==g?f.y=d+u/2-f.h/2:"bottom"==g?f.y=d+u-f.h:"stretch"==g&&(f.h=u),l.layoutRect(f),p+=o+y,l.recalc&&l.recalc();d+=u+b}}else if(a.w=a.minW,a.h=a.minH,e.layoutRect(a),this.recalc(e),null===e._lastRect){var B=e.parent();B&&(B._lastRect=null,B.recalc())}}})}),r(Bt,[yt],function(e){return e.extend({renderHtml:function(){var e=this;return e.addClass("iframe"),e.canFocus=!1,'<iframe id="'+e._id+'" class="'+e.classes()+'" tabindex="-1" src="'+(e.settings.url||"javascript:''")+'" frameborder="0"></iframe>'},src:function(e){this.getEl().src=e},html:function(e){return this.getEl().contentWindow.document.body.innerHTML=e,this}})}),r(jt,[yt],function(e){return e.extend({init:function(e){var t=this;t._super(e),t.addClass("widget"),t.addClass("label"),t.canFocus=!1,e.multiline&&t.addClass("autoscroll"),e.strong&&t.addClass("strong")},initLayoutRect:function(){var e=this,t=e._super();return e.settings.multiline&&(e.getEl().offsetWidth>t.maxW&&(t.minW=t.maxW,e.addClass("multiline")),e.getEl().style.width=t.minW+"px",t.startMinH=t.h=t.minH=Math.min(t.maxH,e.getEl().offsetHeight)),t},disabled:function(e){var t=this,n;return e!==n&&(t.toggleClass("label-disabled",e),t._rendered&&(t.getEl()[0].className=t.classes())),t._super(e)},repaint:function(){var e=this;return e.settings.multiline||(e.getEl().style.lineHeight=e.layoutRect().h+"px"),e._super()},text:function(e){var t=this;return t._rendered&&e&&(t.getEl().innerHTML=t.encode(e)),t._super(e)},renderHtml:function(){var e=this,t=e.settings.forId;return'<label id="'+e._id+'" class="'+e.classes()+'"'+(t?' for="'+t:"")+'">'+e.encode(e._text)+"</label>"}})}),r(Ft,[W,G],function(e,t){return e.extend({Defaults:{role:"toolbar",layout:"flow"},init:function(e){var t=this;t._super(e),t.addClass("toolbar")},postRender:function(){var e=this;return e.items().addClass("toolbar-item"),e.keyNav=new t({root:e,enableLeftRight:!0}),e._super()}})}),r(It,[Ft],function(e){return e.extend({Defaults:{role:"menubar",containerCls:"menubar",defaults:{type:"menubutton"}}})}),r(qt,[bt,z,It],function(e,t,n){function r(e,t){for(;e;){if(t===e)return!0;e=e.parentNode}return!1}var i=e.extend({init:function(e){var t=this;t._renderOpen=!0,t._super(e),t.addClass("menubtn"),e.fixedWidth&&t.addClass("fixed-width"),t.aria("haspopup",!0),t.hasPopup=!0},showMenu:function(){var e=this,n=e.settings,r;return e.menu&&e.menu.visible()?e.hideMenu():(e.menu||(r=n.menu||[],r.length?r={type:"menu",items:r}:r.type=r.type||"menu",e.menu=t.create(r).parent(e).renderTo(e.getContainerElm()),e.fire("createmenu"),e.menu.reflow(),e.menu.on("cancel",function(t){t.control===e.menu&&e.focus()}),e.menu.on("show hide",function(t){t.control==e.menu&&e.activeMenu("show"==t.type)}).fire("show"),e.aria("expanded",!0)),e.menu.show(),e.menu.layoutRect({w:e.layoutRect().w}),e.menu.moveRel(e.getEl(),["bl-tl","tl-bl"]),void 0)},hideMenu:function(){var e=this;e.menu&&(e.menu.items().each(function(e){e.hideMenu&&e.hideMenu()}),e.menu.hide(),e.aria("expanded",!1))},activeMenu:function(e){this.toggleClass("active",e)},renderHtml:function(){var e=this,t=e._id,r=e.classPrefix,i=e.settings.icon?r+"ico "+r+"i-"+e.settings.icon:"";return e.aria("role",e.parent()instanceof n?"menuitem":"button"),'<div id="'+t+'" class="'+e.classes()+'" tabindex="-1">'+'<button id="'+t+'-open" role="presentation" type="button" tabindex="-1">'+(i?'<i class="'+i+'"></i>':"")+"<span>"+(e._text?(i?" ":"")+e.encode(e._text):"")+"</span>"+' <i class="'+r+'caret"></i>'+"</button>"+"</div>"},postRender:function(){var e=this;return e.on("click",function(t){t.control===e&&r(t.target,e.getEl())&&(e.showMenu(),t.keyboard&&e.menu.items()[0].focus())}),e.on("mouseenter",function(t){var n=t.control,r=e.parent(),s;n&&r&&n instanceof i&&n.parent()==r&&(r.items().filter("MenuButton").each(function(e){e.hideMenu&&e!=n&&(e.menu&&e.menu.visible()&&(s=!0),e.hideMenu())}),s&&n.showMenu())}),e._super()},text:function(e){var t=this,n,r;if(t._rendered)for(r=t.getEl("open").getElementsByTagName("span"),n=0;n<r.length;n++)r[n].innerHTML=t.encode(e);return this._super(e)},remove:function(){this._super(),this.menu&&this.menu.remove()}});return i}),r(Rt,[qt],function(e){return e.extend({init:function(e){var t=this,n,r,i,s,o;if(t._values=n=e.values,n){for(r=0;r<n.length;r++)i=n[r].selected||e.value===n[r].value,i&&(s=s||n[r].text,t._value=n[r].value);e.menu=n}e.text=e.text||s||n[0].text,t._super(e),t.addClass("listbox"),t.on("select",function(n){var r=n.control;o&&(n.lastControl=o),e.multiple?r.active(!r.active()):t.value(n.control.settings.value),o=r})},value:function(e){function t(e,n){e.items().each(function(e){r=e.value()===n,r&&(i=i||e.text()),e.active(r),e.menu&&t(e.menu,n)})}var n=this,r,i,s,o;if("undefined"!=typeof e){if(n.menu)t(n.menu,e);else for(s=n.settings.menu,o=0;o<s.length;o++)r=s[o].value==e,r&&(i=i||s[o].text),s[o].active=r;n.text(i||this.settings.text)}return n._super(e)}})}),r(Ut,[yt,z],function(e,t){return e.extend({Defaults:{border:0,role:"menuitem"},init:function(e){var t=this;t.hasPopup=!0,t._super(e),e=t.settings,t.addClass("menu-item"),e.menu&&t.addClass("menu-item-expand"),e.preview&&t.addClass("menu-item-preview"),("-"===t._text||"|"===t._text)&&(t.addClass("menu-item-sep"),t.aria("role","separator"),t.canFocus=!1,t._text="-"),e.selectable&&(t.aria("role","menuitemcheckbox"),t.aria("checked",!0),t.addClass("menu-item-checkbox"),e.icon="selected"),t.on("mousedown",function(e){e.preventDefault()}),t.on("mouseenter click",function(n){n.control===t&&(e.menu||"click"!==n.type?(t.showMenu(),n.keyboard&&setTimeout(function(){t.menu.items()[0].focus()},0)):(t.parent().hideAll(),t.fire("cancel"),t.fire("select")))}),e.menu&&t.aria("haspopup",!0)},hasMenus:function(){return!!this.settings.menu},showMenu:function(){var e=this,n=e.settings,r;if(e.parent().items().each(function(t){t!==e&&t.hideMenu()}),n.menu){r=e.menu,r?r.show():(r=n.menu,r.length?r={type:"menu",items:r}:r.type=r.type||"menu",r=e.menu=t.create(r).parent(e).renderTo(e.getContainerElm()),r.reflow(),r.fire("show"),r.on("cancel",function(){e.focus()}),r.on("hide",function(t){t.control===r&&e.removeClass("selected")})),r._parentMenu=e.parent(),r.addClass("menu-sub");var i=r.testMoveRel(e.getEl(),["tr-tl","br-bl","tl-tr","bl-br"]);r.moveRel(e.getEl(),i),i="menu-sub-"+i,r.removeClass(r._lastRel),r.addClass(i),r._lastRel=i,e.addClass("selected"),e.aria("expanded",!0)}},hideMenu:function(){var e=this;return e.menu&&(e.menu.items().each(function(e){e.hideMenu&&e.hideMenu()}),e.menu.hide(),e.aria("expanded",!1)),e},renderHtml:function(){var e=this,t=e._id,n=e.settings,r=e.classPrefix,i=e.encode(e._text),s=e.settings.icon;return s&&e.parent().addClass("menu-has-icons"),s=r+"ico "+r+"i-"+(e.settings.icon||"none"),'<div id="'+t+'" class="'+e.classes()+'" tabindex="-1">'+("-"!==i?'<i class="'+s+'"></i>&nbsp;':"")+("-"!==i?'<span id="'+t+'-text" class="'+r+'text">'+i+"</span>":"")+(n.shortcut?'<div id="'+t+'-shortcut" class="'+r+'menu-shortcut">'+n.shortcut+"</div>":"")+(n.menu?'<div class="'+r+'caret"></div>':"")+"</div>"},postRender:function(){var e=this,t=e.settings,n=t.textStyle;if("function"==typeof n&&(n=n()),n){var r=e.getEl("text");r&&r.setAttribute("style",n)}return e._super()},remove:function(){this._super(),this.menu&&this.menu.remove()}})}),r(zt,[Q,G,Ut],function(e,t,n){var r=e.extend({Defaults:{defaultType:"menuitem",border:1,layout:"stack",role:"menu"},init:function(e){var r=this;e.autohide=!0,e.constrainToViewport=!0,r._super(e),r.addClass("menu"),r.keyNav=new t({root:r,enableUpDown:!0,enableLeftRight:!0,leftAction:function(){r.parent()instanceof n&&r.keyNav.cancel()},onCancel:function(){r.fire("cancel",{},!1),r.hide()}})},repaint:function(){return this.toggleClass("menu-align",!0),this._super(),this.getEl().style.height="",this.getEl("body").style.height="",this},cancel:function(){var e=this;e.hideAll(),e.fire("cancel"),e.fire("select")},hideAll:function(){var e=this;return this.find("menuitem").exec("hideMenu"),e._super()},preRender:function(){var e=this;return e.items().each(function(t){var n=t.settings;return n.icon||n.selectable?(e._hasIcons=!0,!1):void 0}),e._super()}});return r}),r(Wt,[Et],function(e){return e.extend({Defaults:{classes:"radio",role:"radio"}})}),r(Xt,[yt,X],function(e,t){return e.extend({renderHtml:function(){var e=this,t=e.classPrefix;return e.addClass("resizehandle"),"both"==e.settings.direction&&e.addClass("resizehandle-both"),e.canFocus=!1,'<div id="'+e._id+'" class="'+e.classes()+'">'+'<i class="'+t+"ico "+t+'i-resize"></i>'+"</div>"},postRender:function(){var e=this;e._super(),e.resizeDragHelper=new t(this._id,{start:function(){e.fire("ResizeStart")},drag:function(t){"both"!=e.settings.direction&&(t.deltaX=0),e.fire("Resize",t)},end:function(){e.fire("ResizeEnd")}})}})}),r(Vt,[yt],function(e){return e.extend({renderHtml:function(){var e=this;return e.addClass("spacer"),e.canFocus=!1,'<div id="'+e._id+'" class="'+e.classes()+'"></div>'}})}),r($t,[qt,g],function(e,t){var n=t.DOM;return e.extend({Defaults:{classes:"widget btn splitbtn",role:"splitbutton"},repaint:function(){var e=this,t=e.getEl(),r=e.layoutRect(),i,s,o;return e._super(),i=t.firstChild,s=t.lastChild,n.css(i,{width:r.w-s.offsetWidth,height:r.h-2}),n.css(s,{height:r.h-2}),o=i.firstChild.style,o.width=o.height="100%",o=s.firstChild.style,o.width=o.height="100%",e},activeMenu:function(e){var t=this;n.toggleClass(t.getEl().lastChild,t.classPrefix+"active",e)},renderHtml:function(){var e=this,t=e._id,n=e.classPrefix,r=e.settings.icon?n+"ico "+n+"i-"+e.settings.icon:"";return'<div id="'+t+'" class="'+e.classes()+'">'+'<button type="button" hidefocus tabindex="-1">'+(r?'<i class="'+r+'"></i>':"")+(e._text?(r?" ":"")+e._text:"")+"</button>"+'<button type="button" class="'+n+'open" hidefocus tabindex="-1">'+(e._menuBtnText?(r?" ":"")+e._menuBtnText:"")+' <i class="'+n+'caret"></i>'+"</button>"+"</div>"},postRender:function(){var e=this,t=e.settings.onclick;return e.on("click",function(e){e.control!=this||n.getParent(e.target,"."+this.classPrefix+"open")||(e.stopImmediatePropagation(),t.call(this,e))}),delete e.settings.onclick,e._super()}})}),r(Jt,[Dt],function(e){return e.extend({Defaults:{containerClass:"stack-layout",controlClass:"stack-layout-item",endClass:"break"}})}),r(Kt,[$,R],function(e,t){"use stict";return e.extend({lastIdx:0,Defaults:{layout:"absolute",defaults:{type:"panel"}},activateTab:function(e){this.activeTabId&&t.removeClass(this.getEl(this.activeTabId),this.classPrefix+"active"),this.activeTabId="t"+e,t.addClass(this.getEl("t"+e),this.classPrefix+"active"),e!=this.lastIdx&&(this.items()[this.lastIdx].hide(),this.lastIdx=e),this.items()[e].show().fire("showtab"),this.reflow()},renderHtml:function(){var e=this,t=e._layout,n="",r=e.classPrefix;return e.preRender(),t.preRender(e),e.items().each(function(t,i){n+='<div id="'+e._id+"-t"+i+'" class="'+r+'tab" unselectable="on">'+e.encode(t.settings.title)+"</div>"}),'<div id="'+e._id+'" class="'+e.classes()+'" hideFocus="1" tabIndex="-1">'+'<div id="'+e._id+'-head" class="'+r+'tabs">'+n+"</div>"+'<div id="'+e._id+'-body" class="'+e.classes("body")+'">'+t.renderHtml(e)+"</div>"+"</div>"},postRender:function(){var e=this;e._super(),e.settings.activeTab=e.settings.activeTab||0,e.activateTab(e.settings.activeTab),this.on("click",function(t){var n=t.target.parentNode;if(t.target.parentNode.id==e._id+"-head")for(var r=n.childNodes.length;r--;)n.childNodes[r]==t.target&&e.activateTab(r)})},initLayoutRect:function(){var e=this,t,n,r;n=r=0,e.items().each(function(t,i){n=Math.max(n,t.layoutRect().minW),r=Math.max(r,t.layoutRect().minH),e.settings.activeTab!=i&&t.hide()}),e.items().each(function(e){e.settings.x=0,e.settings.y=0,e.settings.w=n,e.settings.h=r,e.layoutRect({x:0,y:0,w:n,h:r})});var i=e.getEl("head").offsetHeight;return e.settings.minWidth=n,e.settings.minHeight=r+i,t=e._super(),t.deltaH+=e.getEl("head").offsetHeight,t.innerH=t.h-t.deltaH,t}})}),r(Qt,[yt,R],function(e,t){return e.extend({init:function(e){var t=this;t._super(e),t._value=e.value||"",t.addClass("textbox"),e.multiline?t.addClass("multiline"):t.on("keydown",function(e){13==e.keyCode&&t.parents().reverse().each(function(t){return e.preventDefault(),t.submit?(t.submit(),!1):void 0})})},value:function(e){var t=this;return"undefined"!=typeof e?(t._value=e,t._rendered&&(t.getEl().value=e),t):t._rendered?t.getEl().value:t._value},repaint:function(){var e=this,t,n,r,i=0,s=0,o;t=e.getEl().style,n=e._layoutRect,o=e._lastRepaintRect||{};var u=document;return!e.settings.multiline&&u.all&&(!u.documentMode||u.documentMode<=8)&&(t.lineHeight=n.h-s+"px"),r=e._borderBox,i=r.left+r.right+8,s=r.top+r.bottom+(e.settings.multiline?8:0),n.x!==o.x&&(t.left=n.x+"px",o.x=n.x),n.y!==o.y&&(t.top=n.y+"px",o.y=n.y),n.w!==o.w&&(t.width=n.w-i+"px",o.w=n.w),n.h!==o.h&&(t.height=n.h-s+"px",o.h=n.h),e._lastRepaintRect=o,e.fire("repaint",{},!1),e},renderHtml:function(){var e=this,t=e._id,n=e.settings,r=e.encode(e._value,!1),i="";return"spellcheck"in n&&(i+=' spellcheck="'+n.spellcheck+'"'),n.maxLength&&(i+=' maxlength="'+n.maxLength+'"'),n.size&&(i+=' size="'+n.size+'"'),n.subtype&&(i+=' type="'+n.subtype+'"'),n.multiline?'<textarea id="'+t+'" class="'+e.classes()+'" '+(n.rows?' rows="'+n.rows+'"':"")+' hidefocus="true"'+i+">"+r+"</textarea>":'<input id="'+t+'" class="'+e.classes()+'" value="'+r+'" hidefocus="true"'+i+">"},postRender:function(){var e=this;return t.on(e.getEl(),"change",function(t){e.fire("change",t)}),e._super()}})}),r(Gt,[R],function(e){return function(t){var n=this,r;n.show=function(i){return n.hide(),r=!0,window.setTimeout(function(){r&&t.appendChild(e.createFragment('<div class="mce-throbber"></div>'))},i||0),n},n.hide=function(){var e=t.lastChild;return e&&-1!=e.className.indexOf("throbber")&&e.parentNode.removeChild(e),r=!1,n}}}),o([a,f,l,c,h,p,d,v,m,g,y,b,w,E,S,x,T,N,C,k,L,A,O,M,_,D,P,H,B,j,F,I,q,R,U,z,W,X,V,$,J,K,Q,G,Y,Z,et,tt,nt,rt,it,st,ot,ut,at,ft,lt,ct,ht,pt,dt,vt,mt,gt,yt,bt,wt,Et,St,xt,Tt,Nt,Ct,kt,Lt,At,Ot,Mt,_t,Dt,Pt,Ht,Bt,jt,Ft,It,qt,Rt,Ut,zt,Wt,Xt,Vt,$t,Jt,Kt,Qt,Gt])}(this),tinymce.PluginManager.add("advlist",function(e){function t(e,t){var n=[];return tinymce.each(t.split(/[ ,]/),function(e){n.push({text:e.replace(/\-/g," ").replace(/\b\w/g,function(e){return e.toUpperCase()}),data:"default"==e?"":e})}),n}function n(t,n){var r,i=e.dom,s=e.selection;r=i.getParent(s.getNode(),"ol,ul"),r&&r.nodeName==t&&n!==!1||e.execCommand("UL"==t?"InsertUnorderedList":"InsertOrderedList"),n=n===!1?o[t]:n,o[t]=n,r=i.getParent(s.getNode(),"ol,ul"),r&&(i.setStyle(r,"listStyleType",n),r.removeAttribute("data-mce-style")),e.focus()}function r(t){var n=e.dom.getStyle(e.dom.getParent(e.selection.getNode(),"ol,ul"),"listStyleType")||"";t.control.items().each(function(e){e.active(e.settings.data===n)})}var i,s,o={};i=t("OL",e.getParam("advlist_number_styles","default,lower-alpha,lower-greek,lower-roman,upper-alpha,upper-roman")),s=t("UL",e.getParam("advlist_bullet_styles","default,circle,disc,square")),e.addButton("numlist",{type:"splitbutton",tooltip:"Numbered list",menu:i,onshow:r,onselect:function(e){n("OL",e.control.settings.data)},onclick:function(){n("OL",!1)}}),e.addButton("bullist",{type:"splitbutton",tooltip:"Bullet list",menu:s,onshow:r,onselect:function(e){n("UL",e.control.settings.data)},onclick:function(){n("UL",!1)}})}),tinymce.PluginManager.add("anchor",function(e){function t(){e.windowManager.open({title:"Anchor",body:{type:"textbox",name:"name",size:40,label:"Name",value:e.selection.getNode().id},onsubmit:function(t){e.execCommand("mceInsertContent",!1,e.dom.createHTML("a",{id:t.data.name}))}})}e.addButton("anchor",{icon:"anchor",tooltip:"Anchor",onclick:t,stateSelector:"a:not([href])"}),e.addMenuItem("anchor",{icon:"anchor",text:"Anchor",context:"insert",onclick:t})}),tinymce.PluginManager.add("autolink",function(e){function t(e){i(e,-1,"(",!0)}function n(e){i(e,0,"",!0)}function r(e){i(e,-1,"",!1)}function i(e,t,n){var r,i,s,o,u,a,f,l,c;if(r=e.selection.getRng(!0).cloneRange(),r.startOffset<5){if(l=r.endContainer.previousSibling,!l){if(!r.endContainer.firstChild||!r.endContainer.firstChild.nextSibling)return;l=r.endContainer.firstChild.nextSibling}if(c=l.length,r.setStart(l,c),r.setEnd(l,c),r.endOffset<5)return;i=r.endOffset,o=l}else{if(o=r.endContainer,3!=o.nodeType&&o.firstChild){for(;3!=o.nodeType&&o.firstChild;)o=o.firstChild;3==o.nodeType&&(r.setStart(o,0),r.setEnd(o,o.nodeValue.length))}i=1==r.endOffset?2:r.endOffset-1-t}s=i;do r.setStart(o,i>=2?i-2:0),r.setEnd(o,i>=1?i-1:0),i-=1;while(" "!=r.toString()&&""!==r.toString()&&160!=r.toString().charCodeAt(0)&&i-2>=0&&r.toString()!=n);if(r.toString()==n||160==r.toString().charCodeAt(0)?(r.setStart(o,i),r.setEnd(o,s),i+=1):0===r.startOffset?(r.setStart(o,0),r.setEnd(o,s)):(r.setStart(o,i),r.setEnd(o,s)),a=r.toString(),"."==a.charAt(a.length-1)&&r.setEnd(o,s-1),a=r.toString(),f=a.match(/^(https?:\/\/|ssh:\/\/|ftp:\/\/|file:\/|www\.|(?:mailto:)?[A-Z0-9._%+\-]+@)(.+)$/i),f&&("www."==f[1]?f[1]="http://www.":/@$/.test(f[1])&&!/^mailto:/.test(f[1])&&(f[1]="mailto:"+f[1]),u=e.selection.getBookmark(),e.selection.setRng(r),e.execCommand("createlink",!1,f[1]+f[2]),e.selection.moveToBookmark(u),e.nodeChanged(),tinymce.Env.webkit)){e.selection.collapse(!1);var h=Math.min(o.length,s+1);r.setStart(o,h),r.setEnd(o,h),e.selection.setRng(r)}}e.on("keydown",function(t){return 13==t.keyCode?r(e):void 0}),tinymce.Env.ie||(e.on("keypress",function(n){return 41==n.which?t(e):void 0}),e.on("keyup",function(t){return 32==t.keyCode?n(e):void 0}))}),tinymce.PluginManager.add("autoresize",function(e){function t(s){var o,u,a=e.getDoc(),f=a.body,l=a.documentElement,c=tinymce.DOM,h=n.autoresize_min_height;"setcontent"==s.type&&s.initial||e.plugins.fullscreen&&e.plugins.fullscreen.isFullscreen()||(u=tinymce.Env.ie?f.scrollHeight:tinymce.Env.webkit&&0===f.clientHeight?0:f.offsetHeight,u>n.autoresize_min_height&&(h=u),n.autoresize_max_height&&u>n.autoresize_max_height?(h=n.autoresize_max_height,f.style.overflowY="auto",l.style.overflowY="auto"):(f.style.overflowY="hidden",l.style.overflowY="hidden",f.scrollTop=0),h!==r&&(o=h-r,c.setStyle(c.get(e.id+"_ifr"),"height",h+"px"),r=h,tinymce.isWebKit&&0>o&&t(s)))}var n=e.settings,r=0;e.settings.inline||(n.autoresize_min_height=parseInt(e.getParam("autoresize_min_height",e.getElement().offsetHeight),10),n.autoresize_max_height=parseInt(e.getParam("autoresize_max_height",0),10),e.on("init",function(){e.dom.setStyle(e.getBody(),"paddingBottom",e.getParam("autoresize_bottom_margin",50)+"px")}),e.on("change setcontent paste keyup",t),e.getParam("autoresize_on_init",!0)&&e.on("load",t),e.addCommand("mceAutoResize",t))}),tinymce.PluginManager.add("autosave",function(e){function t(e,t){var n={s:1e3,m:6e4};return e=/^(\d+)([ms]?)$/.exec(""+(e||t)),(e[2]?n[e[2]]:1)*parseInt(e,10)}function n(){var e=parseInt(h.getItem(p+"autosave.time"),10)||0;return(new Date).getTime()-e>c.autosave_retention?(r(),!1):!0}function r(){h.removeItem(p+"autosave.draft"),h.removeItem(p+"autosave.time")}function i(){l&&e.isDirty()&&(h.setItem(p+"autosave.draft",e.getContent({format:"raw",no_events:!0})),h.setItem(p+"autosave.time",(new Date).getTime()),e.fire("StoreDraft"))}function s(){n()&&(e.setContent(h.getItem(p+"autosave.draft"),{format:"raw"}),r(),e.fire("RestoreDraft"))}function o(){l||(setInterval(function(){e.removed||i()},c.autosave_interval),l=!0)}function u(){var t=this;t.disabled(!n()),e.on("StoreDraft RestoreDraft",function(){t.disabled(!n())}),o()}function a(){e.undoManager.beforeChange(),s(),e.undoManager.add()}function f(){var e;return tinymce.each(tinymce.editors,function(t){t.plugins.autosave&&t.plugins.autosave.storeDraft(),!e&&t.isDirty()&&t.getParam("autosave_ask_before_unload",!0)&&(e=t.translate("You have unsaved changes are you sure you want to navigate away?"))}),e}var l,c=e.settings,h=tinymce.util.LocalStorage,p=e.id;c.autosave_interval=t(c.autosave_interval,"30s"),c.autosave_retention=t(c.autosave_retention,"20m"),e.addButton("restoredraft",{title:"Restore last draft",onclick:a,onPostRender:u}),e.addMenuItem("restoredraft",{text:"Restore last draft",onclick:a,onPostRender:u,context:"file"}),this.storeDraft=i,window.onbeforeunload=f}),!function(){tinymce.create("tinymce.plugins.BBCodePlugin",{init:function(e){var t=this,n=e.getParam("bbcode_dialect","punbb").toLowerCase();e.on("beforeSetContent",function(e){e.content=t["_"+n+"_bbcode2html"](e.content)}),e.on("postProcess",function(e){e.set&&(e.content=t["_"+n+"_bbcode2html"](e.content)),e.get&&(e.content=t["_"+n+"_html2bbcode"](e.content))})},getInfo:function(){return{longname:"BBCode Plugin",author:"Moxiecode Systems AB",authorurl:"http://www.tinymce.com",infourl:"http://www.tinymce.com/wiki.php/Plugin:bbcode"}},_punbb_html2bbcode:function(e){function t(t,n){e=e.replace(t,n)}return e=tinymce.trim(e),t(/<a.*?href=\"(.*?)\".*?>(.*?)<\/a>/gi,"[url=$1]$2[/url]"),t(/<font.*?color=\"(.*?)\".*?class=\"codeStyle\".*?>(.*?)<\/font>/gi,"[code][color=$1]$2[/color][/code]"),t(/<font.*?color=\"(.*?)\".*?class=\"quoteStyle\".*?>(.*?)<\/font>/gi,"[quote][color=$1]$2[/color][/quote]"),t(/<font.*?class=\"codeStyle\".*?color=\"(.*?)\".*?>(.*?)<\/font>/gi,"[code][color=$1]$2[/color][/code]"),t(/<font.*?class=\"quoteStyle\".*?color=\"(.*?)\".*?>(.*?)<\/font>/gi,"[quote][color=$1]$2[/color][/quote]"),t(/<span style=\"color: ?(.*?);\">(.*?)<\/span>/gi,"[color=$1]$2[/color]"),t(/<font.*?color=\"(.*?)\".*?>(.*?)<\/font>/gi,"[color=$1]$2[/color]"),t(/<span style=\"font-size:(.*?);\">(.*?)<\/span>/gi,"[size=$1]$2[/size]"),t(/<font>(.*?)<\/font>/gi,"$1"),t(/<img.*?src=\"(.*?)\".*?\/>/gi,"[img]$1[/img]"),t(/<span class=\"codeStyle\">(.*?)<\/span>/gi,"[code]$1[/code]"),t(/<span class=\"quoteStyle\">(.*?)<\/span>/gi,"[quote]$1[/quote]"),t(/<strong class=\"codeStyle\">(.*?)<\/strong>/gi,"[code][b]$1[/b][/code]"),t(/<strong class=\"quoteStyle\">(.*?)<\/strong>/gi,"[quote][b]$1[/b][/quote]"),t(/<em class=\"codeStyle\">(.*?)<\/em>/gi,"[code][i]$1[/i][/code]"),t(/<em class=\"quoteStyle\">(.*?)<\/em>/gi,"[quote][i]$1[/i][/quote]"),t(/<u class=\"codeStyle\">(.*?)<\/u>/gi,"[code][u]$1[/u][/code]"),t(/<u class=\"quoteStyle\">(.*?)<\/u>/gi,"[quote][u]$1[/u][/quote]"),t(/<\/(strong|b)>/gi,"[/b]"),t(/<(strong|b)>/gi,"[b]"),t(/<\/(em|i)>/gi,"[/i]"),t(/<(em|i)>/gi,"[i]"),t(/<\/u>/gi,"[/u]"),t(/<span style=\"text-decoration: ?underline;\">(.*?)<\/span>/gi,"[u]$1[/u]"),t(/<u>/gi,"[u]"),t(/<blockquote[^>]*>/gi,"[quote]"),t(/<\/blockquote>/gi,"[/quote]"),t(/<br \/>/gi,"\n"),t(/<br\/>/gi,"\n"),t(/<br>/gi,"\n"),t(/<p>/gi,""),t(/<\/p>/gi,"\n"),t(/&nbsp;|\u00a0/gi," "),t(/&quot;/gi,'"'),t(/&lt;/gi,"<"),t(/&gt;/gi,">"),t(/&amp;/gi,"&"),e},_punbb_bbcode2html:function(e){function t(t,n){e=e.replace(t,n)}return e=tinymce.trim(e),t(/\n/gi,"<br />"),t(/\[b\]/gi,"<strong>"),t(/\[\/b\]/gi,"</strong>"),t(/\[i\]/gi,"<em>"),t(/\[\/i\]/gi,"</em>"),t(/\[u\]/gi,"<u>"),t(/\[\/u\]/gi,"</u>"),t(/\[url=([^\]]+)\](.*?)\[\/url\]/gi,'<a href="$1">$2</a>'),t(/\[url\](.*?)\[\/url\]/gi,'<a href="$1">$1</a>'),t(/\[img\](.*?)\[\/img\]/gi,'<img src="$1" />'),t(/\[color=(.*?)\](.*?)\[\/color\]/gi,'<font color="$1">$2</font>'),t(/\[code\](.*?)\[\/code\]/gi,'<span class="codeStyle">$1</span>&nbsp;'),t(/\[quote.*?\](.*?)\[\/quote\]/gi,'<span class="quoteStyle">$1</span>&nbsp;'),e}}),tinymce.PluginManager.add("bbcode",tinymce.plugins.BBCodePlugin)}(),tinymce.PluginManager.add("charmap",function(e){function t(){function t(e){for(;e;){if("TD"==e.nodeName)return e;e=e.parentNode}}var r,i,s,o;r='<table role="presentation" cellspacing="0" class="mce-charmap"><tbody>';var u=25;for(s=0;10>s;s++){for(r+="<tr>",i=0;u>i;i++){var a=n[s*u+i],f="g"+(s*u+i);r+='<td title="'+a[1]+'"><div id="'+f+'" tabIndex="-1">'+(a?String.fromCharCode(parseInt(a[0],10)):"&nbsp;")+"</div></td>"}r+="</tr>"}r+="</tbody></table>";var l={type:"container",html:r,onclick:function(t){var n=t.target;"DIV"==n.nodeName&&e.execCommand("mceInsertContent",!1,n.firstChild.nodeValue)},onmouseover:function(e){var n=t(e.target);n&&o.find("#preview").text(n.firstChild.firstChild.data)}};o=e.windowManager.open({title:"Special character",spacing:10,padding:10,items:[l,{type:"label",name:"preview",text:" ",style:"font-size: 40px; text-align: center",border:1,minWidth:100,minHeight:80}],buttons:[{text:"Close",onclick:function(){o.close()}}]})}var n=[["160","no-break space"],["38","ampersand"],["34","quotation mark"],["162","cent sign"],["8364","euro sign"],["163","pound sign"],["165","yen sign"],["169","copyright sign"],["174","registered sign"],["8482","trade mark sign"],["8240","per mille sign"],["181","micro sign"],["183","middle dot"],["8226","bullet"],["8230","three dot leader"],["8242","minutes / feet"],["8243","seconds / inches"],["167","section sign"],["182","paragraph sign"],["223","sharp s / ess-zed"],["8249","single left-pointing angle quotation mark"],["8250","single right-pointing angle quotation mark"],["171","left pointing guillemet"],["187","right pointing guillemet"],["8216","left single quotation mark"],["8217","right single quotation mark"],["8220","left double quotation mark"],["8221","right double quotation mark"],["8218","single low-9 quotation mark"],["8222","double low-9 quotation mark"],["60","less-than sign"],["62","greater-than sign"],["8804","less-than or equal to"],["8805","greater-than or equal to"],["8211","en dash"],["8212","em dash"],["175","macron"],["8254","overline"],["164","currency sign"],["166","broken bar"],["168","diaeresis"],["161","inverted exclamation mark"],["191","turned question mark"],["710","circumflex accent"],["732","small tilde"],["176","degree sign"],["8722","minus sign"],["177","plus-minus sign"],["247","division sign"],["8260","fraction slash"],["215","multiplication sign"],["185","superscript one"],["178","superscript two"],["179","superscript three"],["188","fraction one quarter"],["189","fraction one half"],["190","fraction three quarters"],["402","function / florin"],["8747","integral"],["8721","n-ary sumation"],["8734","infinity"],["8730","square root"],["8764","similar to"],["8773","approximately equal to"],["8776","almost equal to"],["8800","not equal to"],["8801","identical to"],["8712","element of"],["8713","not an element of"],["8715","contains as member"],["8719","n-ary product"],["8743","logical and"],["8744","logical or"],["172","not sign"],["8745","intersection"],["8746","union"],["8706","partial differential"],["8704","for all"],["8707","there exists"],["8709","diameter"],["8711","backward difference"],["8727","asterisk operator"],["8733","proportional to"],["8736","angle"],["180","acute accent"],["184","cedilla"],["170","feminine ordinal indicator"],["186","masculine ordinal indicator"],["8224","dagger"],["8225","double dagger"],["192","A - grave"],["193","A - acute"],["194","A - circumflex"],["195","A - tilde"],["196","A - diaeresis"],["197","A - ring above"],["198","ligature AE"],["199","C - cedilla"],["200","E - grave"],["201","E - acute"],["202","E - circumflex"],["203","E - diaeresis"],["204","I - grave"],["205","I - acute"],["206","I - circumflex"],["207","I - diaeresis"],["208","ETH"],["209","N - tilde"],["210","O - grave"],["211","O - acute"],["212","O - circumflex"],["213","O - tilde"],["214","O - diaeresis"],["216","O - slash"],["338","ligature OE"],["352","S - caron"],["217","U - grave"],["218","U - acute"],["219","U - circumflex"],["220","U - diaeresis"],["221","Y - acute"],["376","Y - diaeresis"],["222","THORN"],["224","a - grave"],["225","a - acute"],["226","a - circumflex"],["227","a - tilde"],["228","a - diaeresis"],["229","a - ring above"],["230","ligature ae"],["231","c - cedilla"],["232","e - grave"],["233","e - acute"],["234","e - circumflex"],["235","e - diaeresis"],["236","i - grave"],["237","i - acute"],["238","i - circumflex"],["239","i - diaeresis"],["240","eth"],["241","n - tilde"],["242","o - grave"],["243","o - acute"],["244","o - circumflex"],["245","o - tilde"],["246","o - diaeresis"],["248","o slash"],["339","ligature oe"],["353","s - caron"],["249","u - grave"],["250","u - acute"],["251","u - circumflex"],["252","u - diaeresis"],["253","y - acute"],["254","thorn"],["255","y - diaeresis"],["913","Alpha"],["914","Beta"],["915","Gamma"],["916","Delta"],["917","Epsilon"],["918","Zeta"],["919","Eta"],["920","Theta"],["921","Iota"],["922","Kappa"],["923","Lambda"],["924","Mu"],["925","Nu"],["926","Xi"],["927","Omicron"],["928","Pi"],["929","Rho"],["931","Sigma"],["932","Tau"],["933","Upsilon"],["934","Phi"],["935","Chi"],["936","Psi"],["937","Omega"],["945","alpha"],["946","beta"],["947","gamma"],["948","delta"],["949","epsilon"],["950","zeta"],["951","eta"],["952","theta"],["953","iota"],["954","kappa"],["955","lambda"],["956","mu"],["957","nu"],["958","xi"],["959","omicron"],["960","pi"],["961","rho"],["962","final sigma"],["963","sigma"],["964","tau"],["965","upsilon"],["966","phi"],["967","chi"],["968","psi"],["969","omega"],["8501","alef symbol"],["982","pi symbol"],["8476","real part symbol"],["978","upsilon - hook symbol"],["8472","Weierstrass p"],["8465","imaginary part"],["8592","leftwards arrow"],["8593","upwards arrow"],["8594","rightwards arrow"],["8595","downwards arrow"],["8596","left right arrow"],["8629","carriage return"],["8656","leftwards double arrow"],["8657","upwards double arrow"],["8658","rightwards double arrow"],["8659","downwards double arrow"],["8660","left right double arrow"],["8756","therefore"],["8834","subset of"],["8835","superset of"],["8836","not a subset of"],["8838","subset of or equal to"],["8839","superset of or equal to"],["8853","circled plus"],["8855","circled times"],["8869","perpendicular"],["8901","dot operator"],["8968","left ceiling"],["8969","right ceiling"],["8970","left floor"],["8971","right floor"],["9001","left-pointing angle bracket"],["9002","right-pointing angle bracket"],["9674","lozenge"],["9824","black spade suit"],["9827","black club suit"],["9829","black heart suit"],["9830","black diamond suit"],["8194","en space"],["8195","em space"],["8201","thin space"],["8204","zero width non-joiner"],["8205","zero width joiner"],["8206","left-to-right mark"],["8207","right-to-left mark"],["173","soft hyphen"]];e.addButton("charmap",{icon:"charmap",tooltip:"Special character",onclick:t}),e.addMenuItem("charmap",{icon:"charmap",text:"Special character",onclick:t,context:"insert"})}),tinymce.PluginManager.add("code",function(e){function t(){e.windowManager.open({title:"Source code",body:{type:"textbox",name:"code",multiline:!0,minWidth:600,minHeight:500,value:e.getContent({source_view:!0}),spellcheck:!1},onSubmit:function(t){e.setContent(t.data.code)}})}e.addButton("code",{icon:"code",tooltip:"Source code",onclick:t}),e.addMenuItem("code",{icon:"code",text:"Source code",context:"tools",onclick:t})}),tinymce.PluginManager.add("contextmenu",function(e){var t;e.on("contextmenu",function(n){var r;if(n.preventDefault(),r=e.settings.contextmenu||"link image inserttable | cell row column deletetable",t)t.show();else{var i=[];tinymce.each(r.split(/[ ,]/),function(t){var n=e.menuItems[t];"|"==t&&(n={text:t}),n&&(n.shortcut="",i.push(n))});for(var s=0;s<i.length;s++)"|"==i[s].text&&(0===s||s==i.length-1)&&i.splice(s,1);t=new tinymce.ui.Menu({items:i,context:"contextmenu"}),t.renderTo(document.body)}var o={x:n.pageX,y:n.pageY};e.inline||(o=tinymce.DOM.getPos(e.getContentAreaContainer()),o.x+=n.clientX,o.y+=n.clientY),t.moveTo(o.x,o.y),e.on("remove",function(){t.remove(),t=null})})}),tinymce.PluginManager.add("directionality",function(e){function t(t){var n,r=e.dom,i=e.selection.getSelectedBlocks();i.length&&(n=r.getAttrib(i[0],"dir"),tinymce.each(i,function(e){r.getParent(e.parentNode,"*[dir='"+t+"']",r.getRoot())||(n!=t?r.setAttrib(e,"dir",t):r.setAttrib(e,"dir",null))}),e.nodeChanged())}function n(e){var t=[];return tinymce.each("h1 h2 h3 h4 h5 h6 div p".split(" "),function(n){t.push(n+"[dir="+e+"]")}),t.join(",")}e.addCommand("mceDirectionLTR",function(){t("ltr")}),e.addCommand("mceDirectionRTL",function(){t("rtl")}),e.addButton("ltr",{title:"Left to right",cmd:"mceDirectionLTR",stateSelector:n("ltr")}),e.addButton("rtl",{title:"Right to left",cmd:"mceDirectionRTL",stateSelector:n("rtl")})}),tinymce.PluginManager.add("emoticons",function(e,t){function n(){var e;return e='<table role="presentation" class="mce-grid">',tinymce.each(r,function(n){e+="<tr>",tinymce.each(n,function(n){var r=t+"/img/smiley-"+n+".gif";e+='<td><a href="#" data-mce-url="'+r+'" tabindex="-1"><img src="'+r+'" style="width: 18px; height: 18px"></a></td>'}),e+="</tr>"}),e+="</table>"}var r=[["cool","cry","embarassed","foot-in-mouth"],["frown","innocent","kiss","laughing"],["money-mouth","sealed","smile","surprised"],["tongue-out","undecided","wink","yell"]];e.addButton("emoticons",{type:"panelbutton",popoverAlign:"bc-tl",panel:{autohide:!0,html:n,onclick:function(t){var n=e.dom.getParent(t.target,"a");n&&(e.insertContent('<img src="'+n.getAttribute("data-mce-url")+'" />'),this.hide())}},tooltip:"Emoticons"})}),tinymce.PluginManager.add("fullpage",function(e){function t(){var t=n();e.windowManager.open({title:"Document properties",data:t,defaults:{type:"textbox",size:40},body:[{name:"title",label:"Title"},{name:"keywords",label:"Keywords"},{name:"description",label:"Description"},{name:"robots",label:"Robots"},{name:"author",label:"Author"},{name:"docencoding",label:"Encoding"}],onSubmit:function(e){r(tinymce.extend(t,e.data))}})}function n(){function t(e,t){var n=e.attr(t);return n||""}var n,r,s=i(),o={};return o.fontface=e.getParam("fullpage_default_fontface",""),o.fontsize=e.getParam("fullpage_default_fontsize",""),n=s.firstChild,7==n.type&&(o.xml_pi=!0,r=/encoding="([^"]+)"/.exec(n.value),r&&(o.docencoding=r[1])),n=s.getAll("#doctype")[0],n&&(o.doctype="<!DOCTYPE"+n.value+">"),n=s.getAll("title")[0],n&&n.firstChild&&(o.title=n.firstChild.value),l(s.getAll("meta"),function(e){var t,n=e.attr("name"),r=e.attr("http-equiv");n?o[n.toLowerCase()]=e.attr("content"):"Content-Type"==r&&(t=/charset\s*=\s*(.*)\s*/gi.exec(e.attr("content")),t&&(o.docencoding=t[1]))}),n=s.getAll("html")[0],n&&(o.langcode=t(n,"lang")||t(n,"xml:lang")),n=s.getAll("link")[0],n&&"stylesheet"==n.attr("rel")&&(o.stylesheet=n.attr("href")),n=s.getAll("body")[0],n&&(o.langdir=t(n,"dir"),o.style=t(n,"style"),o.visited_color=t(n,"vlink"),o.link_color=t(n,"link"),o.active_color=t(n,"alink")),o}function r(t){function n(e,t,n){e.attr(t,n?n:void 0)}function r(e){o.firstChild?o.insert(e,o.firstChild):o.append(e)}var s,o,u,f,h,p=e.dom;s=i(),o=s.getAll("head")[0],o||(f=s.getAll("html")[0],o=new c("head",1),f.firstChild?f.insert(o,f.firstChild,!0):f.append(o)),f=s.firstChild,t.xml_pi?(h='version="1.0"',t.docencoding&&(h+=' encoding="'+t.docencoding+'"'),7!=f.type&&(f=new c("xml",7),s.insert(f,s.firstChild,!0)),f.value=h):f&&7==f.type&&f.remove(),f=s.getAll("#doctype")[0],t.doctype?(f||(f=new c("#doctype",10),t.xml_pi?s.insert(f,s.firstChild):r(f)),f.value=t.doctype.substring(9,t.doctype.length-1)):f&&f.remove(),t.docencoding&&(f=null,l(s.getAll("meta"),function(e){"Content-Type"==e.attr("http-equiv")&&(f=e)}),f||(f=new c("meta",1),f.attr("http-equiv","Content-Type"),f.shortEnded=!0,r(f)),f.attr("content","text/html; charset="+t.docencoding)),f=s.getAll("title")[0],t.title?f||(f=new c("title",1),f.append(new c("#text",3)).value=t.title,r(f)):f&&f.remove(),l("keywords,description,author,copyright,robots".split(","),function(e){var n,i,o=s.getAll("meta"),u=t[e];for(n=0;n<o.length;n++)if(i=o[n],i.attr("name")==e)return u?i.attr("content",u):i.remove(),void 0;u&&(f=new c("meta",1),f.attr("name",e),f.attr("content",u),f.shortEnded=!0,r(f))}),f=s.getAll("link")[0],f&&"stylesheet"==f.attr("rel")?t.stylesheet?f.attr("href",t.stylesheet):f.remove():t.stylesheet&&(f=new c("link",1),f.attr({rel:"stylesheet",text:"text/css",href:t.stylesheet}),f.shortEnded=!0,r(f)),f=s.getAll("body")[0],f&&(n(f,"dir",t.langdir),n(f,"style",t.style),n(f,"vlink",t.visited_color),n(f,"link",t.link_color),n(f,"alink",t.active_color),p.setAttribs(e.getBody(),{style:t.style,dir:t.dir,vLink:t.visited_color,link:t.link_color,aLink:t.active_color})),f=s.getAll("html")[0],f&&(n(f,"lang",t.langcode),n(f,"xml:lang",t.langcode)),o.firstChild||o.remove(),u=(new tinymce.html.Serializer({validate:!1,indent:!0,apply_source_formatting:!0,indent_before:"head,html,body,meta,title,script,link,style",indent_after:"head,html,body,meta,title,script,link,style"})).serialize(s),a=u.substring(0,u.indexOf("</body>"))}function i(){return(new tinymce.html.DomParser({validate:!1,root_name:"#document"})).parse(a)}function s(t){function n(e){return e.replace(/<\/?[A-Z]+/g,function(e){return e.toLowerCase()})}var r,s,u,c,h=t.content,p="",v=e.dom;t.selection||"raw"==t.format&&a||t.source_view&&e.getParam("fullpage_hide_in_source_view")||(h=h.replace(/<(\/?)BODY/gi,"<$1body"),r=h.indexOf("<body"),-1!=r?(r=h.indexOf(">",r),a=n(h.substring(0,r+1)),s=h.indexOf("</body",r),-1==s&&(s=h.length),t.content=h.substring(r+1,s),f=n(h.substring(s))):(a=o(),f="\n</body>\n</html>"),u=i(),l(u.getAll("style"),function(e){e.firstChild&&(p+=e.firstChild.value)}),c=u.getAll("body")[0],c&&v.setAttribs(e.getBody(),{style:c.attr("style")||"",dir:c.attr("dir")||"",vLink:c.attr("vlink")||"",link:c.attr("link")||"",aLink:c.attr("alink")||""}),v.remove("fullpage_styles"),p&&(v.add(e.getDoc().getElementsByTagName("head")[0],"style",{id:"fullpage_styles"},p),c=v.get("fullpage_styles"),c.styleSheet&&(c.styleSheet.cssText=p)))}function o(){var t,n="",r="";return e.getParam("fullpage_default_xml_pi")&&(n+='<?xml version="1.0" encoding="'+e.getParam("fullpage_default_encoding","ISO-8859-1")+'" ?>\n'),n+=e.getParam("fullpage_default_doctype","<!DOCTYPE html>"),n+="\n<html>\n<head>\n",(t=e.getParam("fullpage_default_title"))&&(n+="<title>"+t+"</title>\n"),(t=e.getParam("fullpage_default_encoding"))&&(n+='<meta http-equiv="Content-Type" content="text/html; charset='+t+'" />\n'),(t=e.getParam("fullpage_default_font_family"))&&(r+="font-family: "+t+";"),(t=e.getParam("fullpage_default_font_size"))&&(r+="font-size: "+t+";"),(t=e.getParam("fullpage_default_text_color"))&&(r+="color: "+t+";"),n+="</head>\n<body"+(r?' style="'+r+'"':"")+">\n"}function u(t){t.selection||t.source_view&&e.getParam("fullpage_hide_in_source_view")||(t.content=tinymce.trim(a)+"\n"+tinymce.trim(t.content)+"\n"+tinymce.trim(f))}var a,f,l=tinymce.each,c=tinymce.html.Node;e.addCommand("mceFullPageProperties",t),e.addButton("fullpage",{title:"Document properties",cmd:"mceFullPageProperties"}),e.addMenuItem("fullpage",{text:"Document properties",cmd:"mceFullPageProperties",context:"file"}),e.on("BeforeSetContent",s),e.on("GetContent",u)}),tinymce.PluginManager.add("fullscreen",function(e){function t(){var e,t,n=window,r=document,i=r.body;return i.offsetWidth&&(e=i.offsetWidth,t=i.offsetHeight),n.innerWidth&&n.innerHeight&&(e=n.innerWidth,t=n.innerHeight),{w:e,h:t}}function n(){function n(){u.setStyle(c,"height",t().h-(f.clientHeight-c.clientHeight))}var f,c,h,p=document.body,d=document.documentElement;o=!o,f=e.getContainer().firstChild,c=e.getContentAreaContainer().firstChild,h=c.style,o?(r=h.width,i=h.height,h.width=h.height="100%",u.addClass(p,"mce-fullscreen"),u.addClass(d,"mce-fullscreen"),u.addClass(f,"mce-fullscreen"),u.bind(window,"resize",n),n(),s=n):(h.width=r,h.height=i,u.removeClass(p,"mce-fullscreen"),u.removeClass(d,"mce-fullscreen"),u.removeClass(f,"mce-fullscreen"),u.unbind(window,"resize",s)),e.fire("FullscreenStateChanged",{state:o})}var r,i,s,o=!1,u=tinymce.DOM;if(!e.settings.inline)return e.on("init",function(){e.addShortcut("Ctrl+Alt+F","",n)}),e.on("remove",function(){s&&u.unbind(window,"resize",s)}),e.addCommand("mceFullScreen",n),e.addMenuItem("fullscreen",{text:"Fullscreen",shortcut:"Ctrl+Alt+F",selectable:!0,onClick:n,onPostRender:function(){var t=this;e.on("FullscreenStateChanged",function(e){t.active(e.state)})},context:"view"}),e.addButton("fullscreen",{tooltip:"Fullscreen",shortcut:"Ctrl+Alt+F",onClick:n,onPostRender:function(){var t=this;e.on("FullscreenStateChanged",function(e){t.active(e.state)})}}),{isFullscreen:function(){return o}}}),tinymce.PluginManager.add("hr",function(e){e.addCommand("InsertHorizontalRule",function(){e.execCommand("mceInsertContent",!1,"<hr />")}),e.addButton("hr",{icon:"hr",tooltip:"Insert horizontal ruler",cmd:"InsertHorizontalRule"}),e.addMenuItem("hr",{icon:"hr",text:"Horizontal line",cmd:"InsertHorizontalRule",context:"insert"})}),tinymce.PluginManager.add("image",function(e){function t(e,t){function n(e,n){r.parentNode.removeChild(r),t({width:e,height:n})}var r=new Image;r.onload=function(){n(r.clientWidth,r.clientHeight)},r.onerror=function(){n()},r.src=e;var i=r.style;i.visibility="hidden",i.position="fixed",i.bottom=i.left=0,i.width=i.height="auto",document.body.appendChild(r)}function n(t){return function(){var n=e.settings.image_list;"string"==typeof n?tinymce.util.XHR.send({url:n,success:function(e){t(tinymce.util.JSON.parse(e))}}):t(n)}}function r(n){function r(){var e=[{text:"None",value:""}];return tinymce.each(n,function(t){e.push({text:t.text||t.title,value:t.value||t.url,menu:t.menu})}),e}function i(e){var t,n,r,i;t=f.find("#width")[0],n=f.find("#height")[0],r=t.value(),i=n.value(),f.find("#constrain")[0].checked()&&c&&h&&r&&i&&(e.control==t?(i=Math.round(r/c*i),n.value(i)):(r=Math.round(i/h*r),t.value(r))),c=r,h=i}function s(){function t(t){function r(){t.onload=t.onerror=null,e.selection.select(t),e.nodeChanged()}t.onload=function(){n.width||n.height||d.setAttribs(t,{width:t.clientWidth,height:t.clientHeight}),r()},t.onerror=r}var n=f.toJSON();""===n.width&&(n.width=null),""===n.height&&(n.height=null),""===n.style&&(n.style=null),n={src:n.src,alt:n.alt,width:n.width,height:n.height,style:n.style},v?d.setAttribs(v,n):(n.id="__mcenew",e.insertContent(d.createHTML("img",n)),v=d.get("__mcenew"),d.setAttrib(v,"id",null)),t(v)}function o(e){return e&&(e=e.replace(/px$/,"")),e}function u(){t(this.value(),function(e){e.width&&e.height&&(c=e.width,h=e.height,f.find("#width").value(c),f.find("#height").value(h))})}function a(){function e(e){return e.length>0&&/^[0-9]+$/.test(e)&&(e+="px"),e}var t=f.toJSON(),n=d.parseStyle(t.style);delete n.margin,n["margin-top"]=n["margin-bottom"]=e(t.vspace),n["margin-left"]=n["margin-right"]=e(t.hspace),n["border-width"]=e(t.border),f.find("#style").value(d.serializeStyle(d.parseStyle(d.serializeStyle(n))))}var f,l,c,h,p,d=e.dom,v=e.selection.getNode();c=d.getAttrib(v,"width"),h=d.getAttrib(v,"height"),"IMG"!=v.nodeName||v.getAttribute("data-mce-object")?v=null:l={src:d.getAttrib(v,"src"),alt:d.getAttrib(v,"alt"),width:c,height:h},n&&(p={name:"target",type:"listbox",label:"Image list",values:r(),onselect:function(e){var t=f.find("#alt");(!t.value()||e.lastControl&&t.value()==e.lastControl.text())&&t.value(e.control.text()),f.find("#src").value(e.control.value())}});var m=[{name:"src",type:"filepicker",filetype:"image",label:"Source",autofocus:!0,onchange:u},p,{name:"alt",type:"textbox",label:"Image description"},{type:"container",label:"Dimensions",layout:"flex",direction:"row",align:"center",spacing:5,items:[{name:"width",type:"textbox",maxLength:3,size:3,onchange:i},{type:"label",text:"x"},{name:"height",type:"textbox",maxLength:3,size:3,onchange:i},{name:"constrain",type:"checkbox",checked:!0,text:"Constrain proportions"}]}];e.settings.image_advtab?(v&&(l.hspace=o(v.style.marginLeft||v.style.marginRight),l.vspace=o(v.style.marginTop||v.style.marginBottom),l.border=o(v.style.borderWidth),l.style=e.dom.serializeStyle(e.dom.parseStyle(e.dom.getAttrib(v,"style")))),f=e.windowManager.open({title:"Insert/edit image",data:l,bodyType:"tabpanel",body:[{title:"General",type:"form",items:m},{title:"Advanced",type:"form",pack:"start",items:[{label:"Style",name:"style",type:"textbox"},{type:"form",layout:"grid",packV:"start",columns:2,padding:0,alignH:["left","right"],defaults:{type:"textbox",maxWidth:50,onchange:a},items:[{label:"Vertical space",name:"vspace"},{label:"Horizontal space",name:"hspace"},{label:"Border",name:"border"}]}]}],onSubmit:s})):f=e.windowManager.open({title:"Edit image",data:l,body:m,onSubmit:s})}e.addButton("image",{icon:"image",tooltip:"Insert/edit image",onclick:n(r),stateSelector:"img:not([data-mce-object])"}),e.addMenuItem("image",{icon:"image",text:"Insert image",onclick:n(r),context:"insert",prependToContext:!0})}),tinymce.PluginManager.add("insertdatetime",function(e){function t(t,n){function r(e,t){if(e=""+e,e.length<t)for(var n=0;n<t-e.length;n++)e="0"+e;return e}return n=n||new Date,t=t.replace("%D","%m/%d/%Y"),t=t.replace("%r","%I:%M:%S %p"),t=t.replace("%Y",""+n.getFullYear()),t=t.replace("%y",""+n.getYear()),t=t.replace("%m",r(n.getMonth()+1,2)),t=t.replace("%d",r(n.getDate(),2)),t=t.replace("%H",""+r(n.getHours(),2)),t=t.replace("%M",""+r(n.getMinutes(),2)),t=t.replace("%S",""+r(n.getSeconds(),2)),t=t.replace("%I",""+((n.getHours()+11)%12+1)),t=t.replace("%p",""+(n.getHours()<12?"AM":"PM")),t=t.replace("%B",""+e.translate(u[n.getMonth()])),t=t.replace("%b",""+e.translate(o[n.getMonth()])),t=t.replace("%A",""+e.translate(s[n.getDay()])),t=t.replace("%a",""+e.translate(i[n.getDay()])),t=t.replace("%%","%")}function n(n){var r=t(n);if(e.settings.insertdatetime_element){var i;i=/%[HMSIp]/.test(n)?t("%Y-%m-%dT%H:%M"):t("%Y-%m-%d"),r='<time datetime="'+i+'">'+r+"</time>";var s=e.dom.getParent(e.selection.getStart(),"time");if(s)return e.dom.setOuterHTML(s,r),void 0}e.insertContent(r)}var r,i="Sun Mon Tue Wed Thu Fri Sat Sun".split(" "),s="Sunday Monday Tuesday Wednesday Thursday Friday Saturday Sunday".split(" "),o="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),u="January February March April May June July August September October November December".split(" "),a=[];e.addCommand("mceInsertDate",function(){n(e.getParam("insertdate_dateformat",e.translate("%Y-%m-%d")))}),e.addCommand("mceInsertTime",function(){n(e.getParam("insertdate_timeformat",e.translate("%H:%M:%S")))}),e.addButton("inserttime",{type:"splitbutton",title:"Insert time",onclick:function(){n(r||"%H:%M:%S")},menu:a}),tinymce.each(e.settings.insertdate_formats||["%H:%M:%S","%Y-%m-%d","%I:%M:%S %p","%D"],function(e){a.push({text:t(e),onclick:function(){r=e,n(e)}})}),e.addMenuItem("insertdatetime",{icon:"date",text:"Insert date/time",menu:a,context:"insert"})}),!function(e){e.on("AddEditor",function(e){e.editor.settings.inline_styles=!1}),e.PluginManager.add("legacyoutput",function(t){t.on("init",function(){var n="p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li,table,img",r=e.explode(t.settings.font_size_style_values),i=t.schema;t.formatter.register({alignleft:{selector:n,attributes:{align:"left"}},aligncenter:{selector:n,attributes:{align:"center"}},alignright:{selector:n,attributes:{align:"right"}},alignjustify:{selector:n,attributes:{align:"justify"}},bold:[{inline:"b",remove:"all"},{inline:"strong",remove:"all"},{inline:"span",styles:{fontWeight:"bold"}}],italic:[{inline:"i",remove:"all"},{inline:"em",remove:"all"},{inline:"span",styles:{fontStyle:"italic"}}],underline:[{inline:"u",remove:"all"},{inline:"span",styles:{textDecoration:"underline"},exact:!0}],strikethrough:[{inline:"strike",remove:"all"},{inline:"span",styles:{textDecoration:"line-through"},exact:!0}],fontname:{inline:"font",attributes:{face:"%value"}},fontsize:{inline:"font",attributes:{size:function(t){return e.inArray(r,t.value)+1}}},forecolor:{inline:"font",attributes:{color:"%value"}},hilitecolor:{inline:"font",styles:{backgroundColor:"%value"}}}),e.each("b,i,u,strike".split(","),function(e){i.addValidElements(e+"[*]")}),i.getElementRule("font")||i.addValidElements("font[face|size|color|style]"),e.each(n.split(","),function(e){var t=i.getElementRule(e);t&&(t.attributes.align||(t.attributes.align={},t.attributesOrder.push("align")))})})})}(tinymce),tinymce.PluginManager.add("link",function(e){function t(t){return function(){var n=e.settings.link_list;"string"==typeof n?tinymce.util.XHR.send({url:n,success:function(e){t(tinymce.util.JSON.parse(e))}}):t(n)}}function n(t){function n(){var e=[{text:"None",value:""}];return tinymce.each(t,function(t){e.push({text:t.text||t.title,value:t.value||t.url,menu:t.menu})}),e}function r(t){var n=[{text:"None",value:""}];return tinymce.each(e.settings.rel_list,function(e){n.push({text:e.text||e.title,value:e.value,selected:t===e.value})}),n}function i(t){var n=[{text:"None",value:""}];return e.settings.target_list||n.push({text:"New window",value:"_blank"}),tinymce.each(e.settings.target_list,function(e){n.push({text:e.text||e.title,value:e.value,selected:t===e.value})}),n}function s(){a||0!==p.text.length||this.parent().parent().find("#text")[0].value(this.value())}var o,u,a,f,l,c,h,p={},d=e.selection,v=e.dom;e.focus(),o=d.getNode(),u=v.getParent(o,"a[href]"),u&&d.select(u),p.text=a=d.getContent({format:"text"}),p.href=u?v.getAttrib(u,"href"):"",p.target=u?v.getAttrib(u,"target"):"",p.rel=u?v.getAttrib(u,"rel"):"","IMG"==o.nodeName&&(p.text=a=" "),t&&(l={type:"listbox",label:"Link list",values:n(),onselect:function(e){var t=f.find("#text");(!t.value()||e.lastControl&&t.value()==e.lastControl.text())&&t.value(e.control.text()),f.find("#href").value(e.control.value())}}),e.settings.target_list!==!1&&(h={name:"target",type:"listbox",label:"Target",values:i(p.target)}),e.settings.rel_list&&(c={name:"rel",type:"listbox",label:"Rel",values:r(p.rel)}),f=e.windowManager.open({title:"Insert link",data:p,body:[{name:"href",type:"filepicker",filetype:"file",size:40,autofocus:!0,label:"Url",onchange:s,onkeyup:s},{name:"text",type:"textbox",size:40,label:"Text to display",onchange:function(){p.text=this.value()}},l,c,h],onSubmit:function(t){function n(t,n){window.setTimeout(function(){e.windowManager.confirm(t,n)},0)}function r(){i.text!=a?u?(e.focus(),u.innerHTML=i.text,v.setAttribs(u,{href:s,target:i.target?i.target:null,rel:i.rel?i.rel:null}),d.select(u)):e.insertContent(v.createHTML("a",{href:s,target:i.target?i.target:null,rel:i.rel?i.rel:null},i.text)):e.execCommand("mceInsertLink",!1,{href:s,target:i.target,rel:i.rel?i.rel:null})}var i=t.data,s=i.href;return s?s.indexOf("@")>0&&-1==s.indexOf("//")&&-1==s.indexOf("mailto:")?(n("The URL you entered seems to be an email address. Do you want to add the required mailto: prefix?",function(e){e&&(s="mailto:"+s),r()}),void 0):/^\s*www\./i.test(s)?(n("The URL you entered seems to be an external link. Do you want to add the required http:// prefix?",function(e){e&&(s="http://"+s),r()}),void 0):(r(),void 0):(e.execCommand("unlink"),void 0)}})}e.addButton("link",{icon:"link",tooltip:"Insert/edit link",shortcut:"Ctrl+K",onclick:t(n),stateSelector:"a[href]"}),e.addButton("unlink",{icon:"unlink",tooltip:"Remove link",cmd:"unlink",stateSelector:"a[href]"}),e.addShortcut("Ctrl+K","",n),this.showDialog=n,e.addMenuItem("link",{icon:"link",text:"Insert link",shortcut:"Ctrl+K",onclick:t(n),stateSelector:"a[href]",context:"insert",prependToContext:!0})}),tinymce.PluginManager.add("lists",function(e){var t=this;e.on("init",function(){function n(e){function t(t){var r,i,s;i=e[t?"startContainer":"endContainer"],s=e[t?"startOffset":"endOffset"],1==i.nodeType&&(r=b.create("span",{"data-mce-type":"bookmark"}),i.hasChildNodes()?(s=Math.min(s,i.childNodes.length-1),i.insertBefore(r,i.childNodes[s])):i.appendChild(r),i=r,s=0),n[t?"startContainer":"endContainer"]=i,n[t?"startOffset":"endOffset"]=s}var n={};return t(!0),t(),n}function r(e){function t(t){function n(e){for(var t=e.parentNode.firstChild,n=0;t;){if(t==e)return n;(1!=t.nodeType||"bookmark"!=t.getAttribute("data-mce-type"))&&n++,t=t.nextSibling}return-1}var r,i,s;r=s=e[t?"startContainer":"endContainer"],i=e[t?"startOffset":"endOffset"],1==r.nodeType&&(t?(i=n(r),r=r.parentNode):(i=n(r),r=r.parentNode),b.remove(s)),e[t?"startContainer":"endContainer"]=r,e[t?"startOffset":"endOffset"]=i}t(!0),t();var n=b.createRng();n.setStart(e.startContainer,e.startOffset),n.setEnd(e.endContainer,e.endOffset),w.setRng(n)}function i(e){return e&&/^(OL|UL)$/.test(e.nodeName)}function s(e){return e.parentNode.firstChild==e}function o(e){return e.parentNode.lastChild==e}function u(t){return t&&!!e.schema.getTextBlockElements()[t.nodeName]}function a(t,n){var r,i;if(e.settings.forced_root_block&&(n=n||e.settings.forced_root_block),i=n?b.create(n):b.createFragment(),t)for(;r=t.firstChild;)i.appendChild(r);return e.settings.forced_root_block||i.appendChild(b.create("br")),i.hasChildNodes()||tinymce.isIE||(i.innerHTML='<br data-mce-bogus="1">'),i}function f(){return tinymce.grep(w.getSelectedBlocks(),function(e){return"LI"==e.nodeName})}function l(){return tinymce.grep(w.getSelectedBlocks(),u)}function c(e,t,n){var r,i;n=n||a(t),r=b.createRng(),r.setStartAfter(t),r.setEndAfter(e),i=r.extractContents(),b.isEmpty(i)||b.insertAfter(i,e),b.isEmpty(n)||b.insertAfter(n,e),b.isEmpty(t.parentNode)&&b.remove(t.parentNode),b.remove(t)}function h(e){var t,n;if(t=e.nextSibling,t&&i(t)&&t.nodeName==e.nodeName){for(;n=t.firstChild;)e.appendChild(n);b.remove(t)}if(t=e.previousSibling,t&&i(t)&&t.nodeName==e.nodeName){for(;n=t.firstChild;)e.insertBefore(n,e.firstChild);b.remove(t)}}function p(e){tinymce.each(tinymce.grep(b.select("ol,ul",e)),function(e){var t,n=e.parentNode;"LI"==n.nodeName&&n.firstChild==e&&(t=n.previousSibling,t&&"LI"==t.nodeName&&(t.appendChild(e),b.isEmpty(n)&&b.remove(n))),i(n)&&(t=n.previousSibling,t&&"LI"==t.nodeName&&t.appendChild(e))})}function d(){var e,t=n(w.getRng(!0));return tinymce.each(f(),function(t){var n,r;return n=t.previousSibling,n&&"UL"==n.nodeName?(n.appendChild(t),void 0):n&&"LI"==n.nodeName&&i(n.lastChild)?(n.lastChild.appendChild(t),void 0):(n=t.nextSibling,n&&"UL"==n.nodeName?(n.insertBefore(t,n.firstChild),void 0):(n&&"LI"==n.nodeName&&i(t.lastChild)||(n=t.previousSibling,n&&"LI"==n.nodeName&&(r=b.create(t.parentNode.nodeName),n.appendChild(r),r.appendChild(t)),e=!0),void 0))}),r(t),e}function v(){function e(e){b.isEmpty(e)&&b.remove(e)}var t,u=n(w.getRng(!0));return tinymce.each(f(),function(n){var r,u=n.parentNode,f=u.parentNode;if(s(n)&&o(n))if("LI"==f.nodeName)b.insertAfter(n,f),e(f);else{if(!i(f))return;b.remove(u,!0)}else if(s(n))if("LI"==f.nodeName)b.insertAfter(n,f),r=b.create("LI"),r.appendChild(u),b.insertAfter(r,n),e(f);else{if(!i(f))return;f.insertBefore(n,u)}else if(o(n))if("LI"==f.nodeName)b.insertAfter(n,f);else{if(!i(f))return;b.insertAfter(n,u)}else{if("LI"==f.nodeName)u=f,r=a(n,"LI");else{if(!i(f))return;r=a(n,"LI")}c(u,n,r),p(u.parentNode)}t=!0}),r(u),t}function m(t){function s(){function t(t){var n,r,i=e.getBody();for(n=o[t?"startContainer":"endContainer"],r=o[t?"startOffset":"endOffset"],1==n.nodeType&&(n=n.childNodes[Math.min(r,n.childNodes.length-1)]||n);n.parentNode!=i;){if(u(n))return n;if(/^(TD|TH)$/.test(n.parentNode.nodeName))return n;n=n.parentNode}return n}function n(e,t){var n,r=[];if(!u(e)){for(;e&&(n=e[t?"previousSibling":"nextSibling"],!b.isBlock(n)&&n);)e=n;for(;e;)r.push(e),e=e[t?"nextSibling":"previousSibling"]}return r}var r,i,s=t(!0),a=t();i=n(s,!0),s!=a&&(i=i.concat(n(a).reverse())),tinymce.each(i,function(e){if(!b.isBlock(e)||"BR"==e.nodeName){if(!r||"BR"==e.nodeName){if("BR"==e.nodeName&&(!e.nextSibling||b.isBlock(e.nextSibling)&&"BR"!=e.nextSibling.nodeName))return b.remove(e),!1;r=b.create("p"),f.push(r),e.parentNode.insertBefore(r,e)}return"BR"!=e.nodeName?r.appendChild(e):b.remove(e),e==a?!1:void 0}})}var o=w.getRng(!0),a=n(o),f=l();s(),tinymce.each(f,function(e){var n,r;r=e.previousSibling,r&&i(r)&&r.nodeName==t?(n=r,e=b.rename(e,"LI"),r.appendChild(e)):(n=b.create(t),e.parentNode.insertBefore(n,e),n.appendChild(e),e=b.rename(e,"LI")),h(n)}),r(a)}function g(){var e=n(w.getRng(!0));tinymce.each(f(),function(e){var t,n;for(t=e;t;t=t.parentNode)i(t)&&(n=t);c(n,e)}),r(e)}function y(e){var t=b.getParent(w.getStart(),"OL,UL");if(t)if(t.nodeName==e)g(e);else{var i=n(w.getRng(!0));h(b.rename(t,e)),r(i)}else m(e)}var b=e.dom,w=e.selection;t.backspaceDelete=function(e){function t(e,t){var n=e.startContainer,r=e.startOffset;if(3==n.nodeType&&(t?r<n.data.length:r>0))return n;for(var i=new tinymce.dom.TreeWalker(e.startContainer);n=i[t?"next":"prev"]();)if(3==n.nodeType&&n.data.length>0)return n}function s(e,t){var n,r,s=e.parentNode;for(i(t.lastChild)&&(r=t.lastChild),n=t.lastChild,n&&"BR"==n.nodeName&&e.hasChildNodes()&&b.remove(n);n=e.firstChild;)t.appendChild(n);r&&t.appendChild(r),b.remove(e),b.isEmpty(s)&&b.remove(s)}if(w.isCollapsed()){var o=b.getParent(w.getStart(),"LI");if(o){var u=w.getRng(!0),a=b.getParent(t(u,e),"LI");if(a&&a!=o){var f=n(u);return e?s(a,o):s(o,a),r(f),!0}if(!a&&!e&&g(o.parentNode.nodeName))return!0}}},e.addCommand("Indent",function(){return d()?void 0:!0}),e.addCommand("Outdent",function(){return v()?void 0:!0}),e.addCommand("InsertUnorderedList",function(){y("UL")}),e.addCommand("InsertOrderedList",function(){y("OL")})}),e.on("keydown",function(e){e.keyCode==tinymce.util.VK.BACKSPACE?t.backspaceDelete()&&e.preventDefault():e.keyCode==tinymce.util.VK.DELETE&&t.backspaceDelete(!0)&&e.preventDefault()})}),tinymce.PluginManager.add("media",function(e,t){function n(e){return-1!=e.indexOf(".mp3")?"audio/mpeg":-1!=e.indexOf(".wav")?"audio/wav":-1!=e.indexOf(".mp4")?"video/mp4":-1!=e.indexOf(".webm")?"video/webm":-1!=e.indexOf(".ogg")?"video/ogg":""}function r(){function t(e){var t,i,s,o;t=n.find("#width")[0],i=n.find("#height")[0],s=t.value(),o=i.value(),n.find("#constrain")[0].checked()&&r&&a&&s&&o&&(e.control==t?(o=Math.round(s/r*o),i.value(o)):(s=Math.round(o/a*s),t.value(s))),r=s,a=o}var n,r,a,f;f=u(e.selection.getNode()),r=f.width,a=f.height,n=e.windowManager.open({title:"Insert/edit video",data:f,bodyType:"tabpanel",body:[{title:"General",type:"form",onShowTab:function(){this.fromJSON(o(this.next().find("#embed").value()))},items:[{name:"source1",type:"filepicker",filetype:"media",size:40,autofocus:!0,label:"Source"},{name:"source2",type:"filepicker",filetype:"media",size:40,label:"Alternative source"},{name:"poster",type:"filepicker",filetype:"image",size:40,label:"Poster"},{type:"container",label:"Dimensions",layout:"flex",direction:"row",align:"center",spacing:5,items:[{name:"width",type:"textbox",maxLength:3,size:3,onchange:t},{type:"label",text:"x"},{name:"height",type:"textbox",maxLength:3,size:3,onchange:t},{name:"constrain",type:"checkbox",checked:!0,text:"Constrain proportions"}]}]},{title:"Embed",type:"panel",layout:"flex",direction:"column",align:"stretch",padding:10,spacing:10,onShowTab:function(){this.find("#embed").value(s(this.parent().toJSON()))},items:[{type:"label",text:"Paste your embed code below:"},{type:"textbox",flex:1,name:"embed",value:i(),multiline:!0,label:"Source"}]}],onSubmit:function(){e.insertContent(s(this.toJSON()))}})}function i(){var t=e.selection.getNode();return t.getAttribute("data-mce-object")?e.selection.getContent():void 0}function s(r){var i="";return r.source1||(tinymce.extend(r,o(r.embed)),r.source1)?(r.source1=e.convertURL(r.source1,"source"),r.source2=e.convertURL(r.source2,"source"),r.source1mime=n(r.source1),r.source2mime=n(r.source2),r.poster=e.convertURL(r.poster,"poster"),r.flashPlayerUrl=e.convertURL(t+"/moxieplayer.swf","movie"),r.embed?i=a(r.embed,r,!0):(tinymce.each(f,function(e){var t,n,i;if(t=e.regex.exec(r.source1)){for(i=e.url,n=0;t[n];n++)i=i.replace("$"+n,function(){return t[n]});r.source1=i,r.type=e.type,r.width=e.w,r.height=e.h}}),r.width=r.width||300,r.height=r.height||150,tinymce.each(r,function(t,n){r[n]=e.dom.encode(t)}),"iframe"==r.type?i+='<iframe src="'+r.source1+'" width="'+r.width+'" height="'+r.height+'"></iframe>':-1!=r.source1mime.indexOf("audio")?e.settings.audio_template_callback?i=e.settings.audio_template_callback(r):i+='<audio controls="controls" src="'+r.source1+'">'+(r.source2?'\n<source src="'+r.source2+'"'+(r.source2mime?' type="'+r.source2mime+'"':"")+" />\n":"")+"</audio>":i=e.settings.video_template_callback?e.settings.video_template_callback(r):'<video width="'+r.width+'" height="'+r.height+'"'+(r.poster?' poster="'+r.poster+'"':"")+' controls="controls">\n'+'<source src="'+r.source1+'"'+(r.source1mime?' type="'+r.source1mime+'"':"")+" />\n"+(r.source2?'<source src="'+r.source2+'"'+(r.source2mime?' type="'+r.source2mime+'"':"")+" />\n":"")+"</video>"),i):""}function o(e){var t={};return(new tinymce.html.SaxParser({validate:!1,special:"script,noscript",start:function(e,n){t.source1||"param"!=e||(t.source1=n.map.movie),("iframe"==e||"object"==e||"embed"==e||"video"==e||"audio"==e)&&(t=tinymce.extend(n.map,t)),"source"==e&&(t.source1?t.source2||(t.source2=n.map.src):t.source1=n.map.src)}})).parse(e),t.source1=t.source1||t.src||t.data,t.source2=t.source2||"",t.poster=t.poster||"",t}function u(t){return t.getAttribute("data-mce-object")?o(e.serializer.serialize(t,{selection:!0})):{}}function a(e,t,n){function r(e,t){var n,r,i,s;for(n in t)if(i=""+t[n],e.map[n])for(r=e.length;r--;)s=e[r],s.name==n&&(i?(e.map[n]=i,s.value=i):(delete e.map[n],e.splice(r,1)));else i&&(e.push({name:n,value:i}),e.map[n]=i)}var i=new tinymce.html.Writer,s=0;return(new tinymce.html.SaxParser({validate:!1,special:"script,noscript",comment:function(e){i.comment(e)},cdata:function(e){i.cdata(e)},text:function(e,t){i.text(e,t)},start:function(e,o,u){switch(e){case"video":case"object":case"img":case"iframe":r(o,{width:t.width,height:t.height})}if(n)switch(e){case"video":r(o,{poster:t.poster,src:""}),t.source2&&r(o,{src:""});break;case"iframe":r(o,{src:t.source1});break;case"source":if(s++,2>=s&&(r(o,{src:t["source"+s],type:t["source"+s+"mime"]}),!t["source"+s]))return}i.start(e,o,u)},end:function(e){if("video"==e&&n)for(var o=1;2>=o;o++)if(t["source"+o]){var u=[];u.map={},o>s&&(r(u,{src:t["source"+o],type:t["source"+o+"mime"]}),i.start("source",u,!0))}i.end(e)}},new tinymce.html.Schema({}))).parse(e),i.getContent()}var f=[{regex:/youtu\.be\/([a-z1-9.-_]+)/,type:"iframe",w:425,h:350,url:"http://www.youtube.com/embed/$1"},{regex:/youtube\.com(.+)v=([^&]+)/,type:"iframe",w:425,h:350,url:"http://www.youtube.com/embed/$2"},{regex:/vimeo\.com\/([0-9]+)/,type:"iframe",w:425,h:350,url:"http://player.vimeo.com/video/$1?title=0&byline=0&portrait=0&color=8dc7dc"},{regex:/maps\.google\.([a-z]{2,3})\/maps\/(.+)msid=(.+)/,type:"iframe",w:425,h:350,url:'http://maps.google.com/maps/ms?msid=$2&output=embed"'}];e.on("ResolveName",function(e){var t;1==e.target.nodeType&&(t=e.target.getAttribute("data-mce-object"))&&(e.name=t)}),e.on("preInit",function(){var t=e.schema.getSpecialElements();tinymce.each("video audio iframe object".split(" "),function(e){t[e]=new RegExp("</"+e+"[^>]*>","gi")}),e.schema.addValidElements("object[id|style|width|height|classid|codebase|*],embed[id|style|width|height|type|src|*],video[*],audio[*]");var n=e.schema.getBoolAttrs();tinymce.each("webkitallowfullscreen mozallowfullscreen allowfullscreen".split(" "),function(e){n[e]={}}),e.parser.addNodeFilter("iframe,video,audio,object,embed",function(t,n){for(var r,i,s,o,u,a,f,l=t.length;l--;){for(i=t[l],s=new tinymce.html.Node("img",1),s.shortEnded=!0,a=i.attributes,r=a.length;r--;)o=a[r].name,u=a[r].value,"width"!==o&&"height"!==o&&"style"!==o&&(("data"==o||"src"==o)&&(u=e.convertURL(u,o)),s.attr("data-mce-p-"+o,u));f=i.firstChild&&i.firstChild.value,f&&(s.attr("data-mce-html",escape(f)),s.firstChild=null),s.attr({width:i.attr("width")||"300",height:i.attr("height")||("audio"==n?"30":"150"),style:i.attr("style"),src:tinymce.Env.transparentSrc,"data-mce-object":n,"class":"mce-object mce-object-"+n}),i.replace(s)}}),e.serializer.addAttributeFilter("data-mce-object",function(e,t){for(var n,r,i,s,o,u,a=e.length;a--;){for(n=e[a],r=new tinymce.html.Node(n.attr(t),1),"audio"!=n.attr(t)&&r.attr({width:n.attr("width"),height:n.attr("height")}),r.attr({style:n.attr("style")}),s=n.attributes,i=s.length;i--;){var f=s[i].name;0===f.indexOf("data-mce-p-")&&r.attr(f.substr(11),s[i].value)}o=n.attr("data-mce-html"),o&&(u=new tinymce.html.Node("#text",3),u.raw=!0,u.value=unescape(o),r.append(u)),n.replace(r)}})}),e.on("ObjectSelected",function(e){"audio"==e.target.getAttribute("data-mce-object")&&e.preventDefault()}),e.on("objectResized",function(e){var t,n=e.target;n.getAttribute("data-mce-object")&&(t=n.getAttribute("data-mce-html"),t&&(t=unescape(t),n.setAttribute("data-mce-html",escape(a(t,{width:e.width,height:e.height})))))}),e.addButton("media",{tooltip:"Insert/edit video",onclick:r,stateSelector:"img[data-mce-object=video]"}),e.addMenuItem("media",{icon:"media",text:"Insert video",onclick:r,context:"insert",prependToContext:!0})}),tinymce.PluginManager.add("nonbreaking",function(e){var t=e.getParam("nonbreaking_force_tab");if(e.addCommand("mceNonBreaking",function(){e.insertContent(e.plugins.visualchars&&e.plugins.visualchars.state?'<span data-mce-bogus="1" class="mce-nbsp">&nbsp;</span>':"&nbsp;")}),e.addButton("nonbreaking",{title:"Insert nonbreaking space",cmd:"mceNonBreaking"}),e.addMenuItem("nonbreaking",{text:"Nonbreaking space",cmd:"mceNonBreaking",context:"insert"}),t){var n=+t>1?+t:3;e.on("keydown",function(t){if(9==t.keyCode){if(t.shiftKey)return;t.preventDefault();for(var r=0;n>r;r++)e.execCommand("mceNonBreaking")}})}}),tinymce.PluginManager.add("noneditable",function(e){function t(){function t(e){var t;if(1===e.nodeType){if(t=e.getAttribute(a),t&&"inherit"!==t)return t;if(t=e.contentEditable,"inherit"!==t)return t}return null}function n(e){for(var n;e;){if(n=t(e))return"false"===n?e:null;e=e.parentNode}}function r(e){for(;e;){if(e.id===v)return e;e=e.parentNode}}function i(e){var t;if(e)for(t=new o(e,e),e=t.current();e;e=t.next())if(3===e.nodeType)return e}function s(n,r){var i,s;return"false"===t(n)&&p.isBlock(n)?(d.select(n),void 0):(s=p.createRng(),"true"===t(n)&&(n.firstChild||n.appendChild(e.getDoc().createTextNode("")),n=n.firstChild,r=!0),i=p.create("span",{id:v,"data-mce-bogus":!0},m),r?n.parentNode.insertBefore(i,n):p.insertAfter(i,n),s.setStart(i.firstChild,1),s.collapse(!0),d.setRng(s),i)}function u(e){var t,n,s,o;if(e)t=d.getRng(!0),t.setStartBefore(e),t.setEndBefore(e),n=i(e),n&&n.nodeValue.charAt(0)==m&&(n=n.deleteData(0,1)),p.remove(e,!0),d.setRng(t);else for(s=r(d.getStart());(e=p.get(v))&&e!==o;)s!==e&&(n=i(e),n&&n.nodeValue.charAt(0)==m&&(n=n.deleteData(0,1)),p.remove(e,!0)),o=e}function l(){function e(e,n){var r,i,s,u,a;if(r=f.startContainer,i=f.startOffset,3==r.nodeType){if(a=r.nodeValue.length,i>0&&a>i||(n?i==a:0===i))return}else{if(!(i<r.childNodes.length))return n?null:e;var l=!n&&i>0?i-1:i;r=r.childNodes[l],r.hasChildNodes()&&(r=r.firstChild)}for(s=new o(r,e);u=s[n?"prev":"next"]();){if(3===u.nodeType&&u.nodeValue.length>0)return;if("true"===t(u))return u}return e}var r,i,a,f,l;u(),a=d.isCollapsed(),r=n(d.getStart()),i=n(d.getEnd()),(r||i)&&(f=d.getRng(!0),a?(r=r||i,(l=e(r,!0))?s(l,!0):(l=e(r,!1))?s(l,!1):d.select(r)):(f=d.getRng(!0),r&&f.setStartBefore(r),i&&f.setEndAfter(i),d.setRng(f)))}function h(i){function s(e,t){for(;e=e[t?"previousSibling":"nextSibling"];)if(3!==e.nodeType||e.nodeValue.length>0)return e}function a(e,t){d.select(e),d.collapse(t)}function h(i){function s(e){for(var t=a;t;){if(t===e)return;t=t.parentNode}p.remove(e),l()}function o(){var r,o,u=e.schema.getNonEmptyElements();for(o=new tinymce.dom.TreeWalker(a,e.getBody());(r=i?o.prev():o.next())&&!u[r.nodeName.toLowerCase()]&&!(3===r.nodeType&&tinymce.trim(r.nodeValue).length>0);)if("false"===t(r))return s(r),!0;return n(r)?!0:!1}var u,a,f,c;if(d.isCollapsed()){if(u=d.getRng(!0),a=u.startContainer,f=u.startOffset,a=r(a)||a,c=n(a))return s(c),!1;if(3==a.nodeType&&(i?f>0:f<a.nodeValue.length))return!0;if(1==a.nodeType&&(a=a.childNodes[f]||a),o())return!1}return!0}var v,m,g,y,b=i.keyCode;if(g=d.getStart(),y=d.getEnd(),v=n(g)||n(y),v&&(112>b||b>124)&&b!=f.DELETE&&b!=f.BACKSPACE){if((tinymce.isMac?i.metaKey:i.ctrlKey)&&(67==b||88==b||86==b))return;if(i.preventDefault(),b==f.LEFT||b==f.RIGHT){var w=b==f.LEFT;if(e.dom.isBlock(v)){var E=w?v.previousSibling:v.nextSibling,S=new o(E,E),x=w?S.prev():S.next();a(x,!w)}else a(v,w)}}else if(b==f.LEFT||b==f.RIGHT||b==f.BACKSPACE||b==f.DELETE){if(m=r(g)){if(b==f.LEFT||b==f.BACKSPACE)if(v=s(m,!0),v&&"false"===t(v)){if(i.preventDefault(),b!=f.LEFT)return p.remove(v),void 0;a(v,!0)}else u(m);if(b==f.RIGHT||b==f.DELETE)if(v=s(m),v&&"false"===t(v)){if(i.preventDefault(),b!=f.RIGHT)return p.remove(v),void 0;a(v,!1)}else u(m)}if((b==f.BACKSPACE||b==f.DELETE)&&!h(b==f.BACKSPACE))return i.preventDefault(),!1}}var p=e.dom,d=e.selection,v="mce_noneditablecaret",m="";e.on("mousedown",function(n){var r=e.selection.getNode();"false"===t(r)&&r==n.target&&l()}),e.on("mouseup keyup",l),e.on("keydown",h)}function n(t){var n=s.length,r=t.content,o=tinymce.trim(i);if("raw"!=t.format){for(;n--;)r=r.replace(s[n],function(t){var n=arguments,i=n[n.length-2];return i>0&&'"'==r.charAt(i-1)?t:'<span class="'+o+'" data-mce-content="'+e.dom.encode(n[0])+'">'+e.dom.encode("string"==typeof n[1]?n[1]:n[0])+"</span>"});t.content=r}}var r,i,s,o=tinymce.dom.TreeWalker,u="contenteditable",a="data-mce-"+u,f=tinymce.util.VK;r=" "+tinymce.trim(e.getParam("noneditable_editable_class","mceEditable"))+" ",i=" "+tinymce.trim(e.getParam("noneditable_noneditable_class","mceNonEditable"))+" ",s=e.getParam("noneditable_regexp"),s&&!s.length&&(s=[s]),e.on("PreInit",function(){t(),s&&e.on("BeforeSetContent",n),e.parser.addAttributeFilter("class",function(e){for(var t,n,s=e.length;s--;)n=e[s],t=" "+n.attr("class")+" ",-1!==t.indexOf(r)?n.attr(a,"true"):-1!==t.indexOf(i)&&n.attr(a,"false")}),e.serializer.addAttributeFilter(a,function(e){for(var t,n=e.length;n--;)t=e[n],s&&t.attr("data-mce-content")?(t.name="#text",t.type=3,t.raw=!0,t.value=t.attr("data-mce-content")):(t.attr(u,null),t.attr(a,null))}),e.parser.addAttributeFilter(u,function(e){for(var t,n=e.length;n--;)t=e[n],t.attr(a,t.attr(u)),t.attr(u,null)})})}),tinymce.PluginManager.add("pagebreak",function(e){var t,n="mce-pagebreak",r=e.getParam("pagebreak_separator","<!-- pagebreak -->"),i='<img src="'+tinymce.Env.transparentSrc+'" class="'+n+'" data-mce-resize="false" />';t=new RegExp(r.replace(/[\?\.\*\[\]\(\)\{\}\+\^\$\:]/g,function(e){return"\\"+e}),"gi"),e.addCommand("mcePageBreak",function(){e.execCommand("mceInsertContent",0,i)}),e.addButton("pagebreak",{title:"Page break",cmd:"mcePageBreak"}),e.addMenuItem("pagebreak",{text:"Page break",icon:"pagebreak",cmd:"mcePageBreak",context:"insert"}),e.on("ResolveName",function(t){"IMG"==t.target.nodeName&&e.dom.hasClass(t.target,n)&&(t.name="pagebreak")}),e.on("click",function(t){t=t.target,"IMG"===t.nodeName&&e.dom.hasClass(t,n)&&e.selection.select(t)}),e.on("BeforeSetContent",function(e){e.content=e.content.replace(t,i)}),e.on("PreInit",function(){e.serializer.addNodeFilter("img",function(e){for(var t,n,i=e.length;i--;)t=e[i],n=t.attr("class"),n&&-1!==n.indexOf("mce-pagebreak")&&(t.type=3,t.value=r,t.raw=!0)})})}),!function(e,t){function n(e,t){for(var n,r=[],i=0;i<e.length;++i){if(n=u[e[i]]||s(e[i]),!n)throw"module definition dependecy not found: "+e[i];r.push(n)}t.apply(null,r)}function r(e,r,i){if("string"!=typeof e)throw"invalid module definition, module id must be defined and be a string";if(r===t)throw"invalid module definition, dependencies must be specified";if(i===t)throw"invalid module definition, definition function must be specified";n(r,function(){u[e]=i.apply(null,arguments)})}function i(e){return!!u[e]}function s(t){for(var n=e,r=t.split(/[.\/]/),i=0;i<r.length;++i){if(!n[r[i]])return;n=n[r[i]]}return n}function o(n){for(var r=0;r<n.length;r++){for(var i=e,s=n[r],o=s.split(/[.\/]/),a=0;a<o.length-1;++a)i[o[a]]===t&&(i[o[a]]={}),i=i[o[a]];i[o[o.length-1]]=u[s]}}var u={},a="tinymce/pasteplugin/Clipboard",f="tinymce/Env",l="tinymce/util/Tools",c="tinymce/util/VK",h="tinymce/pasteplugin/WordFilter",p="tinymce/html/DomParser",d="tinymce/html/Schema",v="tinymce/html/Serializer",m="tinymce/html/Node",g="tinymce/pasteplugin/Quirks",y="tinymce/pasteplugin/Plugin",b="tinymce/PluginManager";r(a,[f,l,c],function(e,t,n){function r(){return!e.gecko&&("ClipboardEvent"in window||e.webkit&&"FocusEvent"in window)}return function(i){function s(){return(new Date).getTime()}function o(e){return n.metaKeyPressed(e)&&86==e.keyCode||e.shiftKey&&45==e.keyCode}function u(e){return e.innerText||e.textContent}function a(){return s()-v<100||"text"==d.pasteFormat}function f(e,n){return t.each(n,function(t){e=t.constructor==RegExp?e.replace(t,""):e.replace(t[0],t[1])}),e}function l(t){var n=i.fire("PastePreProcess",{content:t});t=n.content,i.settings.paste_data_images||(t=t.replace(/<img src=\"data:image[^>]+>/g,"")),(i.settings.paste_remove_styles||i.settings.paste_remove_styles_if_webkit!==!1&&e.webkit)&&(t=t.replace(/ style=\"[^\"]+\"/g,"")),n.isDefaultPrevented()||i.insertContent(t)}function c(e){e=i.dom.encode(e).replace(/\r\n/g,"\n");var t=i.dom.getParent(i.selection.getStart(),i.dom.isBlock);e=t&&/^(PRE|DIV)$/.test(t.nodeName)||!i.settings.forced_root_block?f(e,[[/\n/g,"<br>"]]):f(e,[[/\n\n/g,"</p><p>"],[/^(.*<\/p>)(<p>)$/,"<p>$1"],[/\n/g,"<br />"]]);var n=i.fire("PastePreProcess",{content:e});n.isDefaultPrevented()||i.insertContent(n.content)}function h(){var e=i.dom.getViewPort().y,t=i.dom.add(i.getBody(),"div",{contentEditable:!1,"data-mce-bogus":"1",style:"position: absolute; top: "+e+"px; left: 0; width: 1px; height: 1px; overflow: hidden"},'<div contentEditable="true" data-mce-bogus="1">X</div>');return i.dom.bind(t,"beforedeactivate focusin focusout",function(e){e.stopPropagation()}),t}function p(e){i.dom.unbind(e),i.dom.remove(e)}var d=this,v;i.on("keydown",function(e){n.metaKeyPressed(e)&&e.shiftKey&&86==e.keyCode&&(v=s())}),r()?i.on("paste",function(e){function t(e,t){for(var r=0;r<n.types.length;r++)if(n.types[r]==e)return t(n.getData(e)),!0}var n=e.clipboardData;n&&(e.preventDefault(),a()?t("text/plain",c)||t("text/html",l):t("text/html",l)||t("text/plain",c))}):(e.ie?i.on("init",function(){var e=i.dom,t=0;i.on("keydown",function(n){if(o(n)&&!n.isDefaultPrevented()){var r=h();t=s(),e.bind(r,"paste",function(){setTimeout(function(){p(r),i.selection.setRng(f),a()?c(u(r.firstChild)):l(r.firstChild.innerHTML)},0)});var f=i.selection.getRng();r.firstChild.focus(),r.firstChild.innerText=""}}),i.dom.bind(i.getBody(),"paste",function(n){if(s()-t>100){var r,o=h();n.preventDefault(),e.bind(o,"paste",function(e){e.stopPropagation(),r=!0});var f=i.selection.getRng(),d=e.doc.body.createTextRange();if(d.moveToElementText(o.firstChild),d.execCommand("Paste"),p(o),!r)return i.windowManager.alert("Please use Ctrl+V/Cmd+V keyboard shortcuts to paste contents."),void 0;i.selection.setRng(f),a()?c(u(o.firstChild)):l(o.firstChild.innerHTML)}})}):(i.on("init",function(){i.dom.bind(i.getBody(),"paste",function(e){e.preventDefault(),i.windowManager.alert("Please use Ctrl+V/Cmd+V keyboard shortcuts to paste contents.")})}),i.on("keydown",function(e){if(o(e)&&!e.isDefaultPrevented()){var t=h(),n=i.selection.getRng();i.selection.select(t,!0),i.dom.bind(t,"paste",function(e){e.stopPropagation(),setTimeout(function(){p(t),i.lastRng=n,i.selection.setRng(n);var e=t.firstChild;e.lastChild&&"BR"==e.lastChild.nodeName&&e.removeChild(e.lastChild),a()?c(u(e)):l(e.innerHTML)},0)})}})),i.settings.paste_data_images||i.on("drop",function(e){var t=e.dataTransfer;t&&t.files&&t.files.length>0&&e.preventDefault()})),i.paste_block_drop&&i.on("dragend dragover draggesture dragdrop drop drag",function(e){e.preventDefault(),e.stopPropagation()}),this.paste=l,this.pasteText=c}}),r(h,[l,p,d,v,m],function(e,t,n,r,i){return function(s){var o=e.each;s.on("PastePreProcess",function(u){function a(e){o(e,function(e){c=e.constructor==RegExp?c.replace(e,""):c.replace(e[0],e[1])})}function f(e){function t(e,t,o,u){var a=e._listLevel||s;a!=s&&(s>a?n&&(n=n.parent.parent):(r=n,n=null)),n&&n.name==o?n.append(e):(r=r||n,n=new i(o,1),u>1&&n.attr("start",""+u),e.wrap(n)),e.name="li",t.value="";var f=t.next;f&&3==f.type&&(f.value=f.value.replace(/^\u00a0+/,"")),a>s&&r.lastChild.append(n),s=a}for(var n,r,s=1,o=e.getAll("p"),u=0;u<o.length;u++)if(e=o[u],"p"==e.name&&e.firstChild){for(var a="",f=e.firstChild;f&&!(a=f.value);)f=f.firstChild;if(/^\s*[\u2022\u00b7\u00a7\u00d8o\u25CF]\s*$/.test(a)){t(e,f,"ul");continue}if(/^\s*\w+\./.test(a)){var l=/([0-9])\./.exec(a),c=1;l&&(c=parseInt(l[1],10)),t(e,f,"ol",c);continue}n=null}}function l(t,n){if("p"===t.name){var r=/mso-list:\w+ \w+([0-9]+)/.exec(n);r&&(t._listLevel=parseInt(r[1],10))}if(s.getParam("paste_retain_style_properties","none")){var i="";if(e.each(s.dom.parseStyle(n),function(e,t){switch(t){case"horiz-align":return t="text-align",void 0;case"vert-align":return t="vertical-align",void 0;case"font-color":case"mso-foreground":return t="color",void 0;case"mso-background":case"mso-highlight":t="background"}("all"==h||p&&p[t])&&(i+=t+":"+e+";")}),i)return i}return null}var c=u.content,h,p;if(h=s.settings.paste_retain_style_properties,h&&(p=e.makeMap(h)),s.settings.paste_enable_default_filters!==!1&&/class="?Mso|style="[^"]*\bmso-|style='[^'']*\bmso-|w:WordDocument/i.test(u.content)){u.wordContent=!0,a([/<!--[\s\S]+?-->/gi,/<(!|script[^>]*>.*?<\/script(?=[>\s])|\/?(\?xml(:\w+)?|img|meta|link|style|\w:\w+)(?=[\s\/>]))[^>]*>/gi,[/<(\/?)s>/gi,"<$1strike>"],[/&nbsp;/gi,""],[/<span\s+style\s*=\s*"\s*mso-spacerun\s*:\s*yes\s*;?\s*"\s*>([\s\u00a0]*)<\/span>/gi,function(e,t){return t.length>0?t.replace(/./," ").slice(Math.floor(t.length/2)).split("").join(""):""}]]);var d=new n({valid_elements:"@[style],-strong/b,-em/i,-span,-p,-ol,-ul,-li,-h1,-h2,-h3,-h4,-h5,-h6,-table,-tr,-td[colspan|rowspan],-th,-thead,-tfoot,-tbody,-a[!href]"}),v=new t({},d);v.addAttributeFilter("style",function(e){for(var t=e.length,n;t--;)n=e[t],n.attr("style",l(n,n.attr("style"))),"span"!=n.name||n.attributes.length||n.unwrap()});var m=v.parse(c);f(m),u.content=(new r({},d)).serialize(m)}})}}),r(g,[f,l],function(e,t){return function(n){function r(e){n.on("PastePreProcess",function(t){t.content=e(t.content)})}function i(e,n){return t.each(n,function(t){e=t.constructor==RegExp?e.replace(t,""):e.replace(t[0],t[1])}),e}function s(e){return e=i(e,[/^[\s\S]*<!--StartFragment-->|<!--EndFragment-->[\s\S]*$/g,[/<span class="Apple-converted-space">\u00a0<\/span>/g,""],/<br>$/])}function o(e){if(!u){var r=[];t.each(n.schema.getBlockElements(),function(e,t){r.push(t)}),u=new RegExp("(?:<br>&nbsp;[\\s\\r\\n]+|<br>)*(<\\/?("+r.join("|")+")[^>]*>)(?:<br>&nbsp;[\\s\\r\\n]+|<br>)*","g")}return e=i(e,[[u,"$1"]]),e=i(e,[[/<br><br>/g,"<BR><BR>"],[/<br>/g," "],[/<BR><BR>/g,"<br>"]])}var u;e.webkit&&r(s),e.ie&&r(o)}}),r(y,[b,a,h,g],function(e,t,n,r){var i;e.add("paste",function(e){var s=this,o;s.clipboard=o=new t(e),s.quirks=new r(e),s.wordFilter=new n(e),e.settings.paste_as_text&&(s.clipboard.pasteFormat="text"),e.addCommand("mceInsertClipboardContent",function(e,t){t.content&&s.clipboard.paste(t.content),t.text&&s.clipboard.pasteText(t.text)}),e.addMenuItem("pastetext",{text:"Paste as text",selectable:!0,active:o.pasteFormat,onclick:function(){"text"==o.pasteFormat?(this.active(!1),o.pasteFormat="html"):(o.pasteFormat="text",this.active(!0),i||(e.windowManager.alert("Paste is now in plain text mode. Contents will now be pasted as plain text until you toggle this option off."),i=!0))}})})}),o([a,h,g,y])}(this),tinymce.PluginManager.add("preview",function(e){var t=e.settings;e.addCommand("mcePreview",function(){e.windowManager.open({title:"Preview",width:parseInt(e.getParam("plugin_preview_width","650"),10),height:parseInt(e.getParam("plugin_preview_height","500"),10),html:'<iframe src="javascript:\'\'" frameborder="0"></iframe>',buttons:{text:"Close",onclick:function(){this.parent().parent().close()}},onPostRender:function(){var n,r=this.getEl("body").firstChild.contentWindow.document,i="";tinymce.each(e.contentCSS,function(t){i+='<link type="text/css" rel="stylesheet" href="'+e.documentBaseURI.toAbsolute(t)+'">'});var s=t.body_id||"tinymce";-1!=s.indexOf("=")&&(s=e.getParam("body_id","","hash"),s=s[e.id]||s);var o=t.body_class||"";-1!=o.indexOf("=")&&(o=e.getParam("body_class","","hash"),o=o[e.id]||""),n="<!DOCTYPE html><html><head>"+i+"</head>"+'<body id="'+s+'" class="mce-content-body '+o+'">'+e.getContent()+"</body>"+"</html>",r.open(),r.write(n),r.close()}})}),e.addButton("preview",{title:"Preview",cmd:"mcePreview"}),e.addMenuItem("preview",{text:"Preview",cmd:"mcePreview",context:"view"})}),tinymce.PluginManager.add("print",function(e){e.addCommand("mcePrint",function(){e.getWin().print()}),e.addButton("print",{title:"Print",cmd:"mcePrint"}),e.addMenuItem("print",{text:"Print",cmd:"mcePrint",icon:"print",shortcut:"Ctrl+P",context:"file"})}),tinymce.PluginManager.add("save",function(e){function t(){var t,n;return t=tinymce.DOM.getParent(e.id,"form"),!e.getParam("save_enablewhendirty")||e.isDirty()?(tinymce.triggerSave(),(n=e.getParam("save_onsavecallback"))?(e.execCallback("save_onsavecallback",e)&&(e.startContent=tinymce.trim(e.getContent({format:"raw"})),e.nodeChanged()),void 0):(t?(e.isNotDirty=!0,(!t.onsubmit||t.onsubmit())&&("function"==typeof t.submit?t.submit():e.windowManager.alert("Error: Form submit field collision.")),e.nodeChanged()):e.windowManager.alert("Error: No form element found."),void 0)):void 0}function n(){var t,n=tinymce.trim(e.startContent);return(t=e.getParam("save_oncancelcallback"))?(e.execCallback("save_oncancelcallback",e),void 0):(e.setContent(n),e.undoManager.clear(),e.nodeChanged(),void 0)}function r(){var t=this;e.on("nodeChange",function(){t.disabled(!e.isDirty())})}e.addCommand("mceSave",t),e.addCommand("mceCancel",n),e.addButton("save",{icon:"save",text:"Save",cmd:"mceSave",disabled:!0,onPostRender:r}),e.addButton("cancel",{text:"Cancel",icon:!1,cmd:"mceCancel",disabled:!0,onPostRender:r}),e.addShortcut("ctrl+s","","mceSave")}),!function(){function e(e,t,n,r,i){function s(e,t){if(t=t||0,!e[0])throw"findAndReplaceDOMText cannot handle zero-length matches";var n=e.index;if(t>0){var r=e[t];if(!r)throw"Invalid capture group";n+=e[0].indexOf(r),e[0]=r}return[n,n+e[0].length,[e[0]]]}function o(e){var t;if(3===e.nodeType)return e.data;if(p[e.nodeName])return"";if(t="",(h[e.nodeName]||d[e.nodeName])&&(t+="\n"),e=e.firstChild)do t+=o(e);while(e=e.nextSibling);return t}function u(e,t,n){var r,i,s,o,u=[],a=0,f=e,l=t.shift(),c=0;e:for(;;){if((h[f.nodeName]||d[f.nodeName])&&a++,3===f.nodeType&&(!i&&f.length+a>=l[1]?(i=f,o=l[1]-a):r&&u.push(f),!r&&f.length+a>l[0]&&(r=f,s=l[0]-a),a+=f.length),r&&i){if(f=n({startNode:r,startNodeIndex:s,endNode:i,endNodeIndex:o,innerNodes:u,match:l[2],matchIndex:c}),a-=i.length-o,r=null,i=null,u=[],l=t.shift(),c++,!l)break}else{if(!p[f.nodeName]&&f.firstChild){f=f.firstChild;continue}if(f.nextSibling){f=f.nextSibling;continue}}for(;;){if(f.nextSibling){f=f.nextSibling;break}if(f.parentNode===e)break e;f=f.parentNode}}}function a(e){var t;if("function"!=typeof e){var n=e.nodeType?e:c.createElement(e);t=function(e,t){var r=n.cloneNode(!1);return r.setAttribute("data-mce-index",t),e&&r.appendChild(c.createTextNode(e)),r}}else t=e;return function(e){var n,r,i,s=e.startNode,o=e.endNode,u=e.matchIndex;if(s===o){var a=s;i=a.parentNode,e.startNodeIndex>0&&(n=c.createTextNode(a.data.substring(0,e.startNodeIndex)),i.insertBefore(n,a));var f=t(e.match[0],u);return i.insertBefore(f,a),e.endNodeIndex<a.length&&(r=c.createTextNode(a.data.substring(e.endNodeIndex)),i.insertBefore(r,a)),a.parentNode.removeChild(a),f}n=c.createTextNode(s.data.substring(0,e.startNodeIndex)),r=c.createTextNode(o.data.substring(e.endNodeIndex));for(var l=t(s.data.substring(e.startNodeIndex),u),h=[],p=0,d=e.innerNodes.length;d>p;++p){var v=e.innerNodes[p],m=t(v.data,u);v.parentNode.replaceChild(m,v),h.push(m)}var g=t(o.data.substring(0,e.endNodeIndex),u);return i=s.parentNode,i.insertBefore(n,s),i.insertBefore(l,s),i.removeChild(s),i=o.parentNode,i.insertBefore(g,o),i.insertBefore(r,o),i.removeChild(o),g}}var f,l,c,h,p,d,v=[],m=0;if(c=t.ownerDocument,h=i.getBlockElements(),p=i.getWhiteSpaceElements(),d=i.getShortEndedElements(),l=o(t)){if(e.global)for(;f=e.exec(l);)v.push(s(f,r));else f=l.match(e),v.push(s(f,r));return v.length&&(m=v.length,u(t,v,a(n))),m}}function t(t){function n(){var e=tinymce.ui.Factory.create({type:"window",layout:"flex",pack:"center",align:"center",onClose:function(){t.focus(),o=!1,u.unmarkAllMatches()},buttons:[{text:"Find",onclick:function(){e.find("form")[0].submit()}},{text:"Replace",disabled:!0,onclick:function(){u.replace(e.find("#replace").value())||e.statusbar.items().slice(1).disabled(!0)}},{text:"Replace all",disabled:!0,onclick:function(){u.replaceAll(e.find("#replace").value()),e.statusbar.items().slice(1).disabled(!0)}},{type:"spacer",flex:1},{text:"Prev",disabled:!0,onclick:function(){u.prev()}},{text:"Next",disabled:!0,onclick:function(){u.next()}}],title:"Find and replace",items:{type:"form",padding:20,labelGap:30,spacing:10,onsubmit:function(t){var n,r,i,s,o;return t.preventDefault(),i=e.find("#case").checked(),o=e.find("#words").checked(),s=e.find("#find").value(),s.length?(s=s.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&"),s=o?"\\b"+s+"\\b":s,r=new RegExp(s,i?"g":"gi"),n=u.markAllMatches(r),n?u.first():tinymce.ui.MessageBox.alert("Could not find the specified string."),e.statusbar.items().slice(1).disabled(0===n),void 0):(u.unmarkAllMatches(),e.statusbar.items().slice(1).disabled(!0),void 0)},items:[{type:"textbox",name:"find",size:40,label:"Find",value:t.selection.getNode().src},{type:"textbox",name:"replace",size:40,label:"Replace with"},{type:"checkbox",name:"case",text:"Match case",label:" "},{type:"checkbox",name:"words",text:"Whole words",label:" "}]}}).renderTo().reflow();o=!0}function r(e){var t=e.parentNode;t.insertBefore(e.firstChild,e),e.parentNode.removeChild(e)}function i(e,n){function r(){var r,o;for(r=n?t.getBody()[e?"firstChild":"lastChild"]:u[e?"endContainer":"startContainer"],o=new tinymce.dom.TreeWalker(r,t.getBody());r=o.current();){if(1==r.nodeType&&"SPAN"==r.nodeName&&null!==r.getAttribute("data-mce-index"))for(a=r.getAttribute("data-mce-index"),i=r.firstChild;r=o.current();){if(1==r.nodeType&&"SPAN"==r.nodeName&&null!==r.getAttribute("data-mce-index")){if(r.getAttribute("data-mce-index")!==a)return;s=r.firstChild}o[e?"next":"prev"]()}o[e?"next":"prev"]()}}var i,s,o=t.selection,u=o.getRng(!0),a=-1;return e=e!==!1,r(),i&&s&&(t.focus(),e?(u.setStart(i,0),u.setEnd(s,s.length)):(u.setStart(s,0),u.setEnd(i,i.length)),o.scrollIntoView(i.parentNode),o.setRng(u)),a}function s(e){e.parentNode.removeChild(e)}var o,u=this,a=-1;u.init=function(e){e.addMenuItem("searchreplace",{text:"Find and replace",shortcut:"Ctrl+F",onclick:n,separator:"before",context:"edit"}),e.addButton("searchreplace",{tooltip:"Find and replace",shortcut:"Ctrl+F",onclick:n}),e.shortcuts.add("Ctrl+F","",n)},u.markAllMatches=function(n){var r,i;return i=t.dom.create("span",{"class":"mce-match-marker","data-mce-bogus":1}),r=t.getBody(),u.unmarkAllMatches(r),e(n,r,i,!1,t.schema)},u.first=function(){return a=i(!0,!0),-1!==a},u.next=function(){return a=i(!0),-1!==a},u.prev=function(){return a=i(!1),-1!==a},u.replace=function(e,n,o){var u,f,l,h,p,d;if(-1===a&&(a=i(n)),d=i(n),l=t.getBody(),f=tinymce.toArray(l.getElementsByTagName("span")),f.length)for(u=0;u<f.length;u++){var v=f[u].getAttribute("data-mce-index");if(null!==v&&v.length&&(h=p=f[u].getAttribute("data-mce-index"),o||h===a))for(e.length?(f[u].firstChild.nodeValue=e,r(f[u])):s(f[u]);f[++u];)if(h=f[u].getAttribute("data-mce-index"),null!==v&&v.length){if(h!==p){u--;break}s(f[u])}}return-1==d&&(d=i(n,!0)),a=d,o&&t.selection.setCursorLocation(t.getBody(),0),t.undoManager.add(),-1!==a},u.replaceAll=function(e){u.replace(e,!0,!0)},u.unmarkAllMatches=function(){var e,n,i;for(i=t.getBody(),n=i.getElementsByTagName("span"),e=n.length;e--;)i=n[e],i.getAttribute("data-mce-index")&&r(i)},t.on("beforeaddundo keydown",function(e){return o?(e.preventDefault(),!1):void 0})}tinymce.PluginManager.add("searchreplace",t)}(),!function(e,t){function n(e,t){for(var n,r=[],i=0;i<e.length;++i){if(n=u[e[i]]||s(e[i]),!n)throw"module definition dependecy not found: "+e[i];r.push(n)}t.apply(null,r)}function r(e,r,i){if("string"!=typeof e)throw"invalid module definition, module id must be defined and be a string";if(r===t)throw"invalid module definition, dependencies must be specified";if(i===t)throw"invalid module definition, definition function must be specified";n(r,function(){u[e]=i.apply(null,arguments)})}function i(e){return!!u[e]}function s(t){for(var n=e,r=t.split(/[.\/]/),i=0;i<r.length;++i){if(!n[r[i]])return;n=n[r[i]]}return n}function o(n){for(var r=0;r<n.length;r++){for(var i=e,s=n[r],o=s.split(/[.\/]/),a=0;a<o.length-1;++a)i[o[a]]===t&&(i[o[a]]={}),i=i[o[a]];i[o[o.length-1]]=u[s]}}var u={},a="tinymce/spellcheckerplugin/DomTextMatcher",f="tinymce/spellcheckerplugin/Plugin",l="tinymce/PluginManager",c="tinymce/util/Tools",h="tinymce/ui/Menu",p="tinymce/dom/DOMUtils",d="tinymce/util/JSONRequest",v="tinymce/util/URI";r(a,[],function(){return function(e,t,n){function r(e){if(!e[0])throw"findAndReplaceDOMText cannot handle zero-length matches";var t=e.index;return[t,t+e[0].length,[e[0]]]}function i(e){var t;if(3===e.nodeType)return e.data;if(m[e.nodeName])return"";if(t="",(v[e.nodeName]||g[e.nodeName])&&(t+="\n"),e=e.firstChild)do t+=i(e);while(e=e.nextSibling);return t}function s(e,t,n){var r,i,s,o,u=[],a=0,f=e,l=t.shift(),c=0;e:for(;;){if((v[f.nodeName]||g[f.nodeName])&&a++,3===f.nodeType&&(!i&&f.length+a>=l[1]?(i=f,o=l[1]-a):r&&u.push(f),!r&&f.length+a>l[0]&&(r=f,s=l[0]-a),a+=f.length),r&&i){if(f=n({startNode:r,startNodeIndex:s,endNode:i,endNodeIndex:o,innerNodes:u,match:l[2],matchIndex:c}),a-=i.length-o,r=null,i=null,u=[],l=t.shift(),c++,!l)break}else{if(!m[f.nodeName]&&f.firstChild){f=f.firstChild;continue}if(f.nextSibling){f=f.nextSibling;continue}}for(;;){if(f.nextSibling){f=f.nextSibling;break}if(f.parentNode===e)break e;f=f.parentNode}}}function o(e){var t;if("function"!=typeof e){var n=e.nodeType?e:d.createElement(e);t=function(e,t){var r=n.cloneNode(!1);return r.setAttribute("data-mce-index",t),e&&r.appendChild(d.createTextNode(e)),r}}else t=e;return function r(e){var n,r,i,s=e.startNode,o=e.endNode,u=e.matchIndex;if(s===o){var a=s;i=a.parentNode,e.startNodeIndex>0&&(n=d.createTextNode(a.data.substring(0,e.startNodeIndex)),i.insertBefore(n,a));var f=t(e.match[0],u);return i.insertBefore(f,a),e.endNodeIndex<a.length&&(r=d.createTextNode(a.data.substring(e.endNodeIndex)),i.insertBefore(r,a)),a.parentNode.removeChild(a),f}n=d.createTextNode(s.data.substring(0,e.startNodeIndex)),r=d.createTextNode(o.data.substring(e.endNodeIndex));for(var l=t(s.data.substring(e.startNodeIndex),u),c=[],h=0,p=e.innerNodes.length;p>h;++h){var v=e.innerNodes[h],m=t(v.data,u);v.parentNode.replaceChild(m,v),c.push(m)}var g=t(o.data.substring(0,e.endNodeIndex),u);return i=s.parentNode,i.insertBefore(n,s),i.insertBefore(l,s),i.removeChild(s),i=o.parentNode,i.insertBefore(g,o),i.insertBefore(r,o),i.removeChild(o),g}}function u(e){var t=[];return a(function(n,r){e(n,r)&&t.push(n)}),c=t,this}function a(e){for(var t=0,n=c.length;n>t&&e(c[t],t)!==!1;t++);return this}function f(e){return c.length&&(p=c.length,s(t,c,o(e))),this}var l,c=[],h,p=0,d,v,m,g;if(d=t.ownerDocument,v=n.getBlockElements(),m=n.getWhiteSpaceElements(),g=n.getShortEndedElements(),h=i(t),h&&e.global)for(;l=e.exec(h);)c.push(r(l));return{text:h,count:p,matches:c,each:a,filter:u,mark:f}}}),r(f,[a,l,c,h,p,d,v],function(e,t,n,r,i,s,o){t.add("spellchecker",function(t,u){function a(e){for(var t in e)return!1;return!0}function f(e,s){var o=[],u=m[s];n.each(u,function(e){o.push({text:e,onclick:function(){t.insertContent(e),c()}})}),o.push.apply(o,[{text:"-"},{text:"Ignore",onclick:function(){p(e,s)}},{text:"Ignore all",onclick:function(){p(e,s,!0)}},{text:"Finish",onclick:d}]),y=new r({items:o,context:"contextmenu",onautohide:function(e){-1!=e.target.className.indexOf("spellchecker")&&e.preventDefault()},onhide:function(){y.remove(),y=null}}),y.renderTo(document.body);var a=i.DOM.getPos(t.getContentAreaContainer()),f=t.dom.getPos(e);a.x+=f.x,a.y+=f.y,y.moveTo(a.x,a.y+e.offsetHeight)}function l(){function n(e){return t.setProgressState(!1),a(e)?(t.windowManager.alert("No misspellings found"),g=!1,void 0):(m=e,i.filter(function(t){return!!e[t[2][0]]}).mark(t.dom.create("span",{"class":"mce-spellchecker-word","data-mce-bogus":1})),i=null,t.fire("SpellcheckStart"),void 0)}function r(e,n,r){s.sendRPC({url:(new o(u)).toAbsolute(b.spellchecker_rpc_url),method:e,params:{lang:b.spellchecker_language||"en",words:n},success:function(e){r(e)},error:function(e,n){e="JSON Parse error."==e?"Non JSON response:"+n.responseText:"Error: "+e,t.windowManager.alert(e),t.setProgressState(!1),i=null,g=!1}})}var i,f=[],l={};if(g)return d(),void 0;g=!0;var c=t.getParam("spellchecker_wordchar_pattern")||new RegExp('[^\\s!"#$%&()*+,-./:;<=>?@[\\]^_{|}`]+',"g");i=(new e(c,t.getBody(),t.schema)).each(function(e){var t=e[2][0];if(!l[t]){if(/^\d+$/.test(t)||1==t.length)return;f.push(t),l[t]=!0}}),t.setProgressState(!0);var h=b.spellchecker_callback||r;h("spellcheck",f,n)}function c(){t.dom.select("span.mce-spellchecker-word").length||d()}function h(e){var t=e.parentNode;t.insertBefore(e.firstChild,e),e.parentNode.removeChild(e)}function p(e,r,i){i?n.each(t.dom.select("span.mce-spellchecker-word"),function(e){var t=e.innerText||e.textContent;t==r&&h(e)}):h(e),c()}function d(){var e,n,r;for(g=!1,r=t.getBody(),n=r.getElementsByTagName("span"),e=n.length;e--;)r=n[e],r.getAttribute("data-mce-index")&&h(r);t.fire("SpellcheckEnd")}function v(e){var n,r,i,s=-1,o,u;for(e=""+e,n=t.getBody().getElementsByTagName("span"),r=0;r<n.length&&(i=n[r],"mce-spellchecker-word"!=i.className||(s=i.getAttribute("data-mce-index"),s===e&&(s=e,o||(o=i.firstChild),u=i.firstChild),s===e||!u));r++);var a=t.dom.createRng();return a.setStart(o,0),a.setEnd(u,u.length),t.selection.setRng(a),a}var m,g,y,b=t.settings;t.on("click",function(e){if("mce-spellchecker-word"==e.target.className){e.preventDefault();var t=v(e.target.getAttribute("data-mce-index"));f(e.target,t.toString())}}),t.addMenuItem("spellchecker",{text:"Spellcheck",context:"tools",onclick:l,selectable:!0,onPostRender:function(){var e=this;t.on("SpellcheckStart SpellcheckEnd",function(){e.active(g)})}}),t.addButton("spellchecker",{tooltip:"Spellcheck",onclick:l,onPostRender:function(){var e=this;t.on("SpellcheckStart SpellcheckEnd",function(){e.active(g)})}}),t.on("remove",function(){y&&(y.remove(),y=null)})})}),o([a,f])}(this),tinymce.PluginManager.add("tabfocus",function(e){function t(e){9===e.keyCode&&e.preventDefault()}function n(t){function n(t){function n(e){return"BODY"===e.nodeName||"hidden"!=e.type&&"none"!=e.style.display&&"hidden"!=e.style.visibility&&n(e.parentNode)}function s(e){return e.tabIndex||"INPUT"==e.nodeName||"TEXTAREA"==e.nodeName}function a(e){return!s(e)&&"-1"!=e.getAttribute("tabindex")&&n(e)}if(u=r.select(":input:enabled,*[tabindex]:not(iframe)"),i(u,function(t,n){return t.id==e.id?(o=n,!1):void 0}),t>0){for(l=o+1;l<u.length;l++)if(a(u[l]))return u[l]}else for(l=o-1;l>=0;l--)if(a(u[l]))return u[l];return null}var o,u,f,l;if(9===t.keyCode&&(f=s(e.getParam("tab_focus",e.getParam("tabfocus_elements",":prev,:next"))),1==f.length&&(f[1]=f[0],f[0]=":prev"),u=t.shiftKey?":prev"==f[0]?n(-1):r.get(f[0]):":next"==f[1]?n(1):r.get(f[1]))){var c=tinymce.get(u.id||u.name);u.id&&c?c.focus():window.setTimeout(function(){tinymce.Env.webkit||window.focus(),u.focus()},10),t.preventDefault()}}var r=tinymce.DOM,i=tinymce.each,s=tinymce.explode;e.on("init",function(){e.inline&&tinymce.DOM.setAttrib(e.getBody(),"tabIndex",null)}),e.on("keyup",t),tinymce.Env.gecko?e.on("keypress keydown",n):e.on("keydown",n)}),!function(e,t){function n(e,t){for(var n,r=[],i=0;i<e.length;++i){if(n=u[e[i]]||s(e[i]),!n)throw"module definition dependecy not found: "+e[i];r.push(n)}t.apply(null,r)}function r(e,r,i){if("string"!=typeof e)throw"invalid module definition, module id must be defined and be a string";if(r===t)throw"invalid module definition, dependencies must be specified";if(i===t)throw"invalid module definition, definition function must be specified";n(r,function(){u[e]=i.apply(null,arguments)})}function i(e){return!!u[e]}function s(t){for(var n=e,r=t.split(/[.\/]/),i=0;i<r.length;++i){if(!n[r[i]])return;n=n[r[i]]}return n}function o(n){for(var r=0;r<n.length;r++){for(var i=e,s=n[r],o=s.split(/[.\/]/),a=0;a<o.length-1;++a)i[o[a]]===t&&(i[o[a]]={}),i=i[o[a]];i[o[o.length-1]]=u[s]}}var u={},a="tinymce/tableplugin/TableGrid",f="tinymce/util/Tools",l="tinymce/Env",c="tinymce/tableplugin/Quirks",h="tinymce/util/VK",p="tinymce/tableplugin/CellSelection",d="tinymce/dom/TreeWalker",v="tinymce/tableplugin/Plugin",m="tinymce/PluginManager";r(a,[f,l],function(e,t){function n(e,t){return parseInt(e.getAttribute(t)||1,10)}var r=e.each;return function(i,s){function o(){var e=0;A=[],r(["thead","tbody","tfoot"],function(t){var i=P.select("> "+t+" tr",s);r(i,function(i,s){s+=e,r(P.select("> td, > th",i),function(e,r){var i,o,u,a;if(A[s])for(;A[s][r];)r++;for(u=n(e,"rowspan"),a=n(e,"colspan"),o=s;s+u>o;o++)for(A[o]||(A[o]=[]),i=r;r+a>i;i++)A[o][i]={part:t,real:o==s&&i==r,elm:e,rowspan:u,colspan:a}})}),e+=i.length})}function u(e,t){return e=e.cloneNode(t),e.removeAttribute("id"),e}function a(e,t){var n;return n=A[t],n?n[e]:void 0}function f(e,t,n){e&&(n=parseInt(n,10),1===n?e.removeAttribute(t,1):e.setAttribute(t,n,1))}function l(e){return e&&(P.hasClass(e.elm,"mce-item-selected")||e==_)}function c(){var e=[];return r(s.rows,function(t){r(t.cells,function(n){return P.hasClass(n,"mce-item-selected")||n==_.elm?(e.push(t),!1):void 0})}),e}function h(){var e=P.createRng();e.setStartAfter(s),e.setEndAfter(s),D.setRng(e),P.remove(s)}function p(n){var s,o={};return i.settings.table_clone_elements!==!1&&(o=e.makeMap((i.settings.table_clone_elements||"strong em b i span font h1 h2 h3 h4 h5 h6 p div").toUpperCase(),/[ ,]/)),e.walk(n,function(e){var i;return 3==e.nodeType?(r(P.getParents(e.parentNode,null,n).reverse(),function(e){o[e.nodeName]&&(e=u(e,!1),s?i&&i.appendChild(e):s=i=e,i=e)}),i&&(i.innerHTML=t.ie?"&nbsp;":'<br data-mce-bogus="1" />'),!1):void 0},"childNodes"),n=u(n,!1),f(n,"rowSpan",1),f(n,"colSpan",1),s?n.appendChild(s):t.ie||(n.innerHTML='<br data-mce-bogus="1" />'),n}function d(){var e=P.createRng(),t;return r(P.select("tr",s),function(e){0===e.cells.length&&P.remove(e)}),0===P.select("tr",s).length?(e.setStartBefore(s),e.setEndBefore(s),D.setRng(e),P.remove(s),void 0):(r(P.select("thead,tbody,tfoot",s),function(e){0===e.rows.length&&P.remove(e)}),o(),t=A[Math.min(A.length-1,O.y)],t&&(D.select(t[Math.min(t.length-1,O.x)].elm,!0),D.collapse(!0)),void 0)}function v(e,t,n,r){var i,s,o,u,a;for(i=A[t][e].elm.parentNode,o=1;n>=o;o++)if(i=P.getNext(i,"tr")){for(s=e;s>=0;s--)if(a=A[t+o][s].elm,a.parentNode==i){for(u=1;r>=u;u++)P.insertAfter(p(a),a);break}if(-1==s)for(u=1;r>=u;u++)i.insertBefore(p(i.cells[0]),i.cells[0])}}function m(){r(A,function(e,t){r(e,function(e,r){var i,s,o;if(l(e)&&(e=e.elm,i=n(e,"colspan"),s=n(e,"rowspan"),i>1||s>1)){for(f(e,"rowSpan",1),f(e,"colSpan",1),o=0;i-1>o;o++)P.insertAfter(p(e),e);v(r,t,s-1,i)}})})}function g(t,n,i){var s,u,c,h,p,v,g,y,b,w,E;if(t?(s=N(t),u=s.x,c=s.y,h=u+(n-1),p=c+(i-1)):(O=M=null,r(A,function(e,t){r(e,function(e,n){l(e)&&(O||(O={x:n,y:t}),M={x:n,y:t})})}),u=O.x,c=O.y,h=M.x,p=M.y),y=a(u,c),b=a(h,p),y&&b&&y.part==b.part){for(m(),o(),y=a(u,c).elm,f(y,"colSpan",h-u+1),f(y,"rowSpan",p-c+1),g=c;p>=g;g++)for(v=u;h>=v;v++)A[g]&&A[g][v]&&(t=A[g][v].elm,t!=y&&(w=e.grep(t.childNodes),r(w,function(e){y.appendChild(e)}),w.length&&(w=e.grep(y.childNodes),E=0,r(w,function(e){"BR"==e.nodeName&&P.getAttrib(e,"data-mce-bogus")&&E++<w.length-1&&y.removeChild(e)})),P.remove(t)));d()}}function y(e){var t,i,s,o,a,c,h,d,v;for(r(A,function(n,i){return r(n,function(n){return l(n)&&(n=n.elm,a=n.parentNode,c=u(a,!1),t=i,e)?!1:void 0}),e?!t:void 0}),o=0;o<A[0].length;o++)if(A[t][o]&&(i=A[t][o].elm,i!=s)){if(e){if(t>0&&A[t-1][o]&&(d=A[t-1][o].elm,v=n(d,"rowSpan"),v>1)){f(d,"rowSpan",v+1);continue}}else if(v=n(i,"rowspan"),v>1){f(i,"rowSpan",v+1);continue}h=p(i),f(h,"colSpan",i.colSpan),c.appendChild(h),s=i}c.hasChildNodes()&&(e?a.parentNode.insertBefore(c,a):P.insertAfter(c,a))}function b(e){var t,i;r(A,function(n){return r(n,function(n,r){return l(n)&&(t=r,e)?!1:void 0}),e?!t:void 0}),r(A,function(r,s){var o,u,a;r[t]&&(o=r[t].elm,o!=i&&(a=n(o,"colspan"),u=n(o,"rowspan"),1==a?e?(o.parentNode.insertBefore(p(o),o),v(t,s,u-1,a)):(P.insertAfter(p(o),o),v(t,s,u-1,a)):f(o,"colSpan",o.colSpan+1),i=o))})}function w(){var t=[];r(A,function(i){r(i,function(i,s){l(i)&&-1===e.inArray(t,s)&&(r(A,function(e){var t=e[s].elm,r;r=n(t,"colSpan"),r>1?f(t,"colSpan",r-1):P.remove(t)}),t.push(s))})}),d()}function E(){function e(e){var t,i,s;t=P.getNext(e,"tr"),r(e.cells,function(e){var t=n(e,"rowSpan");t>1&&(f(e,"rowSpan",t-1),i=N(e),v(i.x,i.y,1,1))}),i=N(e.cells[0]),r(A[i.y],function(e){var t;e=e.elm,e!=s&&(t=n(e,"rowSpan"),1>=t?P.remove(e):f(e,"rowSpan",t-1),s=e)})}var t;t=c(),r(t.reverse(),function(t){e(t)}),d()}function S(){var e=c();return P.remove(e),d(),e}function x(){var e=c();return r(e,function(t,n){e[n]=u(t,!0)}),e}function T(e,t){var n=c(),i=n[t?0:n.length-1],s=i.cells.length;e&&(r(A,function(e){var t;return s=0,r(e,function(e){e.real&&(s+=e.colspan),e.elm.parentNode==i&&(t=1)}),t?!1:void 0}),t||e.reverse(),r(e,function(e){var n,r=e.cells.length,o;for(n=0;r>n;n++)o=e.cells[n],f(o,"colSpan",1),f(o,"rowSpan",1);for(n=r;s>n;n++)e.appendChild(p(e.cells[r-1]));for(n=s;r>n;n++)P.remove(e.cells[n]);t?i.parentNode.insertBefore(e,i):P.insertAfter(e,i)}),P.removeClass(P.select("td.mce-item-selected,th.mce-item-selected"),"mce-item-selected"))}function N(e){var t;return r(A,function(n,i){return r(n,function(n,r){return n.elm==e?(t={x:r,y:i},!1):void 0}),!t}),t}function C(e){O=N(e)}function k(){var e,t;return e=t=0,r(A,function(n,i){r(n,function(n,r){var s,o;l(n)&&(n=A[i][r],r>e&&(e=r),i>t&&(t=i),n.real&&(s=n.colspan-1,o=n.rowspan-1,s&&r+s>e&&(e=r+s),o&&i+o>t&&(t=i+o)))})}),{x:e,y:t}}function L(e){var t,n,r,i,s,o,u,a,f,l;if(M=N(e),O&&M){for(t=Math.min(O.x,M.x),n=Math.min(O.y,M.y),r=Math.max(O.x,M.x),i=Math.max(O.y,M.y),s=r,o=i,l=n;o>=l;l++)e=A[l][t],e.real||t-(e.colspan-1)<t&&(t-=e.colspan-1);for(f=t;s>=f;f++)e=A[n][f],e.real||n-(e.rowspan-1)<n&&(n-=e.rowspan-1);for(l=n;i>=l;l++)for(f=t;r>=f;f++)e=A[l][f],e.real&&(u=e.colspan-1,a=e.rowspan-1,u&&f+u>s&&(s=f+u),a&&l+a>o&&(o=l+a));for(P.removeClass(P.select("td.mce-item-selected,th.mce-item-selected"),"mce-item-selected"),l=n;o>=l;l++)for(f=t;s>=f;f++)A[l][f]&&P.addClass(A[l][f].elm,"mce-item-selected")}}var A,O,M,_,D=i.selection,P=D.dom;s=s||P.getParent(D.getStart(),"table"),o(),_=P.getParent(D.getStart(),"th,td"),_&&(O=N(_),M=k(),_=a(O.x,O.y)),e.extend(this,{deleteTable:h,split:m,merge:g,insertRow:y,insertCol:b,deleteCols:w,deleteRows:E,cutRows:S,copyRows:x,pasteRows:T,getPos:N,setStartCell:C,setEndCell:L})}}),r(c,[h,l,f],function(e,t,n){function r(e,t){return parseInt(e.getAttribute(t)||1,10)}var i=n.each;return function(n){function s(){function t(t){function s(e,r){var i=e?"previousSibling":"nextSibling",s=n.dom.getParent(r,"tr"),u=s[i];if(u)return m(n,r,u,e),t.preventDefault(),!0;var l=n.dom.getParent(s,"table"),c=s.parentNode,h=c.nodeName.toLowerCase();if("tbody"===h||h===(e?"tfoot":"thead")){var p=o(e,l,c,"tbody");if(null!==p)return a(e,p,r)}return f(e,s,i,l)}function o(e,t,r,i){var s=n.dom.select(">"+i,t),o=s.indexOf(r);if(e&&0===o||!e&&o===s.length-1)return u(e,t);if(-1===o){var a="thead"===r.tagName.toLowerCase()?0:s.length-1;return s[a]}return s[o+(e?-1:1)]}function u(e,t){var r=e?"thead":"tfoot",i=n.dom.select(">"+r,t);return 0!==i.length?i[0]:null}function a(e,r,i){var s=l(r,e);return s&&m(n,i,s,e),t.preventDefault(),!0}function f(e,r,i,o){var u=o[i];if(u)return c(u),!0;var a=n.dom.getParent(o,"td,th");if(a)return s(e,a,t);var f=l(r,!e);return c(f),t.preventDefault(),!1}function l(e,t){var r=e&&e[t?"lastChild":"firstChild"];return r&&"BR"===r.nodeName?n.dom.getParent(r,"td,th"):r}function c(e){n.selection.setCursorLocation(e,0)}function h(){return b==e.UP||b==e.DOWN}function p(e){var t=e.selection.getNode(),n=e.dom.getParent(t,"tr");return null!==n}function d(e){for(var t=0,n=e;n.previousSibling;)n=n.previousSibling,t+=r(n,"colspan");return t}function v(e,t){var n=0,s=0;return i(e.children,function(e,i){return n+=r(e,"colspan"),s=i,n>t?!1:void 0}),s}function m(e,t,r,i){var s=d(n.dom.getParent(t,"td,th")),o=v(r,s),u=r.childNodes[o],a=l(u,i);c(a||u)}function g(e){var t=n.selection.getNode(),r=n.dom.getParent(t,"td,th"),i=n.dom.getParent(e,"td,th");return r&&r!==i&&y(r,i)}function y(e,t){return n.dom.getParent(e,"TABLE")===n.dom.getParent(t,"TABLE")}var b=t.keyCode;if(h()&&p(n)){var w=n.selection.getNode();setTimeout(function(){g(w)&&s(!t.shiftKey&&b===e.UP,w,t)},0)}}n.on("KeyDown",function(e){t(e)})}function o(){function e(e,t){var n=t.ownerDocument,r=n.createRange(),i;return r.setStartBefore(t),r.setEnd(e.endContainer,e.endOffset),i=n.createElement("body"),i.appendChild(r.cloneContents()),0===i.innerHTML.replace(/<(br|img|object|embed|input|textarea)[^>]*>/gi,"-").replace(/<[^>]+>/g,"").length}n.on("KeyDown",function(t){var r,i,s=n.dom;(37==t.keyCode||38==t.keyCode)&&(r=n.selection.getRng(),i=s.getParent(r.startContainer,"table"),i&&n.getBody().firstChild==i&&e(r,i)&&(r=s.createRng(),r.setStartBefore(i),r.setEndBefore(i),n.selection.setRng(r),t.preventDefault()))})}function u(){n.on("KeyDown SetContent VisualAid",function(){var e;for(e=n.getBody().lastChild;e;e=e.previousSibling)if(3==e.nodeType){if(e.nodeValue.length>0)break}else if(1==e.nodeType&&!e.getAttribute("data-mce-bogus"))break;e&&"TABLE"==e.nodeName&&(n.settings.forced_root_block?n.dom.add(n.getBody(),n.settings.forced_root_block,null,t.ie?"&nbsp;":'<br data-mce-bogus="1" />'):n.dom.add(n.getBody(),"br",{"data-mce-bogus":"1"}))}),n.on("PreProcess",function(e){var t=e.node.lastChild;t&&("BR"==t.nodeName||1==t.childNodes.length&&("BR"==t.firstChild.nodeName||""==t.firstChild.nodeValue))&&t.previousSibling&&"TABLE"==t.previousSibling.nodeName&&n.dom.remove(t)})}function a(){function e(e,t,n,r){var i=3,s=e.dom.getParent(t.startContainer,"TABLE"),o,u,a;return s&&(o=s.parentNode),u=t.startContainer.nodeType==i&&0===t.startOffset&&0===t.endOffset&&r&&("TR"==n.nodeName||n==o),a=("TD"==n.nodeName||"TH"==n.nodeName)&&!r,u||a}function t(){var t=n.selection.getRng(),r=n.selection.getNode(),i=n.dom.getParent(t.startContainer,"TD,TH");if(e(n,t,r,i)){i||(i=r);for(var s=i.lastChild;s.lastChild;)s=s.lastChild;t.setEnd(s,s.nodeValue.length),n.selection.setRng(t)}}n.on("KeyDown",function(){t()}),n.on("MouseDown",function(e){2!=e.button&&t()})}t.webkit&&(s(),a()),t.gecko&&(o(),u())}}),r(p,[a,d,f],function(e,t,n){return function(r){function i(){r.getBody().style.webkitUserSelect="",f&&(r.dom.removeClass(r.dom.select("td.mce-item-selected,th.mce-item-selected"),"mce-item-selected"),f=!1)}var s=r.dom,o,u,a,f=!0;return r.on("MouseDown",function(e){2!=e.button&&(i(),u=s.getParent(e.target,"td,th"),a=s.getParent(u,"table"))}),s.bind(r.getDoc(),"mouseover",function(t){var n,i,l=t.target;if(u&&(o||l!=u)&&("TD"==l.nodeName||"TH"==l.nodeName)){i=s.getParent(l,"table"),i==a&&(o||(o=new e(r,i),o.setStartCell(u),r.getBody().style.webkitUserSelect="none"),o.setEndCell(l),f=!0),n=r.selection.getSel();try{n.removeAllRanges?n.removeAllRanges():n.empty()}catch(c){}t.preventDefault()}}),r.on("MouseUp",function(){function e(e,r){var s=new t(e,e);do{if(3==e.nodeType&&0!==n.trim(e.nodeValue).length)return r?i.setStart(e,0):i.setEnd(e,e.nodeValue.length),void 0;if("BR"==e.nodeName)return r?i.setStartBefore(e):i.setEndBefore(e),void 0}while(e=r?s.next():s.prev())}var i,f=r.selection,l,c,h,p,d;if(u){if(o&&(r.getBody().style.webkitUserSelect=""),l=s.select("td.mce-item-selected,th.mce-item-selected"),l.length>0){i=s.createRng(),h=l[0],d=l[l.length-1],i.setStartBefore(h),i.setEndAfter(h),e(h,1),c=new t(h,s.getParent(l[0],"table"));do if("TD"==h.nodeName||"TH"==h.nodeName){if(!s.hasClass(h,"mce-item-selected"))break;p=h}while(h=c.next());e(p),f.setRng(i)}r.nodeChanged(),u=o=a=null}}),r.on("KeyUp",function(){i()}),{clear:i}}}),r(v,[a,c,p,f,d,l,m],function(e,t,n,r,i,s,o){function u(r){function i(e){return e?e.replace(/px$/,""):""}function o(e){return/^[0-9]+$/.test(e)&&(e+="px"),e}function u(e){a("left center right".split(" "),function(t){r.formatter.remove("align"+t,{},e)})}function f(){var e=r.dom,t,n,f;t=r.dom.getParent(r.selection.getStart(),"table"),f=!1,n={width:i(e.getStyle(t,"width")||e.getAttrib(t,"width")),height:i(e.getStyle(t,"height")||e.getAttrib(t,"height")),cellspacing:e.getAttrib(t,"cellspacing"),cellpadding:e.getAttrib(t,"cellpadding"),border:e.getAttrib(t,"border"),caption:!!e.select("caption",t)[0]},a("left center right".split(" "),function(e){r.formatter.matchNode(t,"align"+e)&&(n.align=e)}),r.windowManager.open({title:"Table properties",items:{type:"form",layout:"grid",columns:2,data:n,defaults:{type:"textbox",maxWidth:50},items:[f?{label:"Cols",name:"cols",disabled:!0}:null,f?{label:"Rows",name:"rows",disabled:!0}:null,{label:"Width",name:"width"},{label:"Height",name:"height"},{label:"Cell spacing",name:"cellspacing"},{label:"Cell padding",name:"cellpadding"},{label:"Border",name:"border"},{label:"Caption",name:"caption",type:"checkbox"},{label:"Alignment",minWidth:90,name:"align",type:"listbox",text:"None",maxWidth:null,values:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]}]},onsubmit:function(){var n=this.toJSON(),i;r.undoManager.transact(function(){r.dom.setAttribs(t,{cellspacing:n.cellspacing,cellpadding:n.cellpadding,border:n.border}),r.dom.setStyles(t,{width:o(n.width),height:o(n.height)}),i=e.select("caption",t)[0],i&&!n.caption&&e.remove(i),!i&&n.caption&&(i=e.create("caption"),s.ie||(i.innerHTML='<br data-mce-bogus="1"/>'),t.insertBefore(i,t.firstChild)),u(t),n.align&&r.formatter.apply("align"+n.align,{},t),r.focus(),r.addVisual()})}})}function l(e,t){r.windowManager.open({title:"Merge cells",body:[{label:"Cols",name:"cols",type:"textbox",size:10},{label:"Rows",name:"rows",type:"textbox",size:10}],onsubmit:function(){var n=this.toJSON();r.undoManager.transact(function(){e.merge(t,n.cols,n.rows)})}})}function c(){var e=r.dom,t,n,s=[];s=r.dom.select("td.mce-item-selected,th.mce-item-selected"),t=r.dom.getParent(r.selection.getStart(),"td,th"),!s.length&&t&&s.push(t),t=t||s[0],n={width:i(e.getStyle(t,"width")||e.getAttrib(t,"width")),height:i(e.getStyle(t,"height")||e.getAttrib(t,"height")),scope:e.getAttrib(t,"scope")},n.type=t.nodeName.toLowerCase(),a("left center right".split(" "),function(e){r.formatter.matchNode(t,"align"+e)&&(n.align=e)}),r.windowManager.open({title:"Cell properties",items:{type:"form",data:n,layout:"grid",columns:2,defaults:{type:"textbox",maxWidth:50},items:[{label:"Width",name:"width"},{label:"Height",name:"height"},{label:"Cell type",name:"type",type:"listbox",text:"None",minWidth:90,maxWidth:null,menu:[{text:"Cell",value:"td"},{text:"Header cell",value:"th"}]},{label:"Scope",name:"scope",type:"listbox",text:"None",minWidth:90,maxWidth:null,menu:[{text:"None",value:""},{text:"Row",value:"row"},{text:"Column",value:"col"},{text:"Row group",value:"rowgroup"},{text:"Column group",value:"colgroup"}]},{label:"Alignment",name:"align",type:"listbox",text:"None",minWidth:90,maxWidth:null,values:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]}]},onsubmit:function(){var t=this.toJSON();r.undoManager.transact(function(){a(s,function(n){r.dom.setAttrib(n,"scope",t.scope),r.dom.setStyles(n,{width:o(t.width),height:o(t.height)}),t.type&&n.nodeName.toLowerCase()!=t.type&&(n=e.rename(n,t.type)),u(n),t.align&&r.formatter.apply("align"+t.align,{},n)}),r.focus()})}})}function h(){var e=r.dom,t,n,s,f,l=[];t=r.dom.getParent(r.selection.getStart(),"table"),n=r.dom.getParent(r.selection.getStart(),"td,th"),a(t.rows,function(t){a(t.cells,function(r){return e.hasClass(r,"mce-item-selected")||r==n?(l.push(t),!1):void 0})}),s=l[0],f={height:i(e.getStyle(s,"height")||e.getAttrib(s,"height")),scope:e.getAttrib(s,"scope")},f.type=s.parentNode.nodeName.toLowerCase(),a("left center right".split(" "),function(e){r.formatter.matchNode(s,"align"+e)&&(f.align=e)}),r.windowManager.open({title:"Row properties",items:{type:"form",data:f,columns:2,defaults:{type:"textbox"},items:[{type:"listbox",name:"type",label:"Row type",text:"None",maxWidth:null,menu:[{text:"Header",value:"thead"},{text:"Body",value:"tbody"},{text:"Footer",value:"tfoot"}]},{type:"listbox",name:"align",label:"Alignment",text:"None",maxWidth:null,menu:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{label:"Height",name:"height"}]},onsubmit:function(){var t=this.toJSON(),n,i,s;r.undoManager.transact(function(){var f=t.type;a(l,function(a){r.dom.setAttrib(a,"scope",t.scope),r.dom.setStyles(a,{height:o(t.height)}),f!=a.parentNode.nodeName.toLowerCase()&&(n=e.getParent(a,"table"),i=a.parentNode,s=e.select(f,n)[0],s||(s=e.create(f),n.firstChild?n.insertBefore(s,n.firstChild):n.appendChild(s)),s.appendChild(a),i.hasChildNodes()||e.remove(i)),u(a),t.align&&r.formatter.apply("align"+t.align,{},a)}),r.focus()})}})}function p(e){return function(){r.execCommand(e)}}function d(e,t){var n,i,o;for(o="<table><tbody>",n=0;t>n;n++){for(o+="<tr>",i=0;e>i;i++)o+="<td>"+(s.ie?" ":"<br>")+"</td>";o+="</tr>"}o+="</tbody></table>",r.insertContent(o)}function v(e,t){function n(){e.disabled(!r.dom.getParent(r.selection.getStart(),t)),r.selection.selectorChanged(t,function(t){e.disabled(!t)})}r.initialized?n():r.on("init",n)}function m(){v(this,"table")}function g(){v(this,"td,th")}function y(){var e="";e='<table role="presentation" class="mce-grid mce-grid-border">';for(var t=0;10>t;t++){e+="<tr>";for(var n=0;10>n;n++)e+='<td><a href="#" data-mce-index="'+n+","+t+'"></a></td>';e+="</tr>"}return e+="</table>",e+='<div class="mce-text-center">0 x 0</div>'}var b,w,E=this;r.addMenuItem("inserttable",{text:"Insert table",icon:"table",context:"table",onhide:function(){r.dom.removeClass(this.menu.items()[0].getEl().getElementsByTagName("a"),"mce-active")},menu:[{type:"container",html:y(),onmousemove:function(e){var t=e.target;if("A"==t.nodeName){var n=r.dom.getParent(t,"table"),i=t.getAttribute("data-mce-index");if(i!=this.lastPos){i=i.split(","),i[0]=parseInt(i[0],10),i[1]=parseInt(i[1],10);for(var s=0;10>s;s++)for(var o=0;10>o;o++)r.dom.toggleClass(n.rows[s].childNodes[o].firstChild,"mce-active",o<=i[0]&&s<=i[1]);n.nextSibling.innerHTML=i[0]+1+" x "+(i[1]+1),this.lastPos=i}}},onclick:function(e){"A"==e.target.nodeName&&this.lastPos&&(e.preventDefault(),d(this.lastPos[0]+1,this.lastPos[1]+1),this.parent().cancel())}}]}),r.addMenuItem("tableprops",{text:"Table properties",context:"table",onPostRender:m,onclick:f}),r.addMenuItem("deletetable",{text:"Delete table",context:"table",onPostRender:m,cmd:"mceTableDelete"}),r.addMenuItem("cell",{separator:"before",text:"Cell",context:"table",menu:[{text:"Cell properties",onclick:p("mceTableCellProps"),onPostRender:g},{text:"Merge cells",onclick:p("mceTableMergeCells"),onPostRender:g},{text:"Split cell",onclick:p("mceTableSplitCells"),onPostRender:g}]}),r.addMenuItem("row",{text:"Row",context:"table",menu:[{text:"Insert row before",onclick:p("mceTableInsertRowBefore"),onPostRender:g},{text:"Insert row after",onclick:p("mceTableInsertRowAfter"),onPostRender:g},{text:"Delete row",onclick:p("mceTableDeleteRow"),onPostRender:g},{text:"Row properties",onclick:p("mceTableRowProps"),onPostRender:g},{text:"-"},{text:"Cut row",onclick:p("mceTableCutRow"),onPostRender:g},{text:"Copy row",onclick:p("mceTableCopyRow"),onPostRender:g},{text:"Paste row before",onclick:p("mceTablePasteRowBefore"),onPostRender:g},{text:"Paste row after",onclick:p("mceTablePasteRowAfter"),onPostRender:g}]}),r.addMenuItem("column",{text:"Column",context:"table",menu:[{text:"Insert column before",onclick:p("mceTableInsertColBefore"),onPostRender:g},{text:"Insert column after",onclick:p("mceTableInsertColAfter"),onPostRender:g},{text:"Delete column",onclick:p("mceTableDeleteCol"),onPostRender:g}]});var S=[];a("inserttable tableprops deletetable | cell row column".split(" "),function(e){"|"==e?S.push({text:"-"}):S.push(r.menuItems[e])}),r.addButton("table",{type:"menubutton",title:"Table",menu:S}),s.isIE||r.on("click",function(e){e=e.target,"TABLE"===e.nodeName&&(r.selection.select(e),r.nodeChanged())}),E.quirks=new t(r),r.on("Init",function(){b=r.windowManager,E.cellSelection=new n(r)}),a({mceTableSplitCells:function(e){e.split()},mceTableMergeCells:function(e){var t,n,i;i=r.dom.getParent(r.selection.getStart(),"th,td"),i&&(t=i.rowSpan,n=i.colSpan),r.dom.select("td.mce-item-selected,th.mce-item-selected").length?e.merge():l(e,i)},mceTableInsertRowBefore:function(e){e.insertRow(!0)},mceTableInsertRowAfter:function(e){e.insertRow()},mceTableInsertColBefore:function(e){e.insertCol(!0)},mceTableInsertColAfter:function(e){e.insertCol()},mceTableDeleteCol:function(e){e.deleteCols()},mceTableDeleteRow:function(e){e.deleteRows()},mceTableCutRow:function(e){w=e.cutRows()},mceTableCopyRow:function(e){w=e.copyRows()},mceTablePasteRowBefore:function(e){e.pasteRows(w,!0)},mceTablePasteRowAfter:function(e){e.pasteRows(w)},mceTableDelete:function(e){e.deleteTable()}},function(t,n){r.addCommand(n,function(){var n=new e(r);n&&(t(n),r.execCommand("mceRepaint"),E.cellSelection.clear())})}),a({mceInsertTable:function(){f()},mceTableRowProps:h,mceTableCellProps:c},function(e,t){r.addCommand(t,function(t,n){e(n)})})}var a=r.each;o.add("table",u)}),o([a,c,p,v])}(this),tinymce.PluginManager.add("template",function(e){function t(){function t(e){var t=e.control.value();t.url?tinymce.util.XHR.send({url:t.url,success:function(e){r=e,n.find("iframe")[0].html(e)}}):(r=t.content,n.find("iframe")[0].html(t.content)),n.find("#description")[0].text(e.control.value().description)}var n,r,s=[];return e.settings.templates?(tinymce.each(e.settings.templates,function(e){s.push({selected:!s.length,text:e.title,value:{url:e.url,content:e.content,description:e.description}})}),n=e.windowManager.open({title:"Insert template",body:[{type:"listbox",name:"template",flex:0,label:"Templates",values:s,onselect:t},{type:"label",name:"description",label:"Description",text:""},{type:"iframe",minWidth:600,minHeight:400,border:1}],onsubmit:function(){i(!1,r)}}),n.find("listbox")[0].fire("select"),void 0):(e.windowManager.alert("No templates defined"),void 0)}function n(t,n){function r(e,t){if(e=""+e,e.length<t)for(var n=0;n<t-e.length;n++)e="0"+e;return e}var i="Sun Mon Tue Wed Thu Fri Sat Sun".split(" "),s="Sunday Monday Tuesday Wednesday Thursday Friday Saturday Sunday".split(" "),o="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),u="January February March April May June July August September October November December".split(" ");return n=n||new Date,t=t.replace("%D","%m/%d/%Y"),t=t.replace("%r","%I:%M:%S %p"),t=t.replace("%Y",""+n.getFullYear()),t=t.replace("%y",""+n.getYear()),t=t.replace("%m",r(n.getMonth()+1,2)),t=t.replace("%d",r(n.getDate(),2)),t=t.replace("%H",""+r(n.getHours(),2)),t=t.replace("%M",""+r(n.getMinutes(),2)),t=t.replace("%S",""+r(n.getSeconds(),2)),t=t.replace("%I",""+((n.getHours()+11)%12+1)),t=t.replace("%p",""+(n.getHours()<12?"AM":"PM")),t=t.replace("%B",""+e.translate(u[n.getMonth()])),t=t.replace("%b",""+e.translate(o[n.getMonth()])),t=t.replace("%A",""+e.translate(s[n.getDay()])),t=t.replace("%a",""+e.translate(i[n.getDay()])),t=t.replace("%%","%")}function r(t){var n=e.dom,r=e.getParam("template_replace_values");s(n.select("*",t),function(e){s(r,function(t,i){n.hasClass(e,i)&&"function"==typeof r[i]&&r[i](e)})})}function i(t,i){function o(e,t){return(new RegExp("\\b"+t+"\\b","g")).test(e.className)}var u,f,l=e.dom,c=e.selection.getContent();s(e.getParam("template_replace_values"),function(e,t){"function"!=typeof e&&(i=i.replace(new RegExp("\\{\\$"+t+"\\}","g"),e))}),u=l.create("div",null,i),f=l.select(".mceTmpl",u),f&&f.length>0&&(u=l.create("div",null),u.appendChild(f[0].cloneNode(!0))),s(l.select("*",u),function(t){o(t,e.getParam("template_cdate_classes","cdate").replace(/\s+/g,"|"))&&(t.innerHTML=n(e.getParam("template_cdate_format",e.getLang("template.cdate_format")))),o(t,e.getParam("template_mdate_classes","mdate").replace(/\s+/g,"|"))&&(t.innerHTML=n(e.getParam("template_mdate_format",e.getLang("template.mdate_format")))),o(t,e.getParam("template_selected_content_classes","selcontent").replace(/\s+/g,"|"))&&(t.innerHTML=c)}),r(u),e.execCommand("mceInsertContent",!1,u.innerHTML),e.addVisual()}var s=tinymce.each;e.addCommand("mceInsertTemplate",i),e.addButton("template",{title:"Insert template",onclick:t}),e.addMenuItem("template",{text:"Insert template",onclick:t,context:"insert"}),e.on("PreProcess",function(t){var i=e.dom;s(i.select("div",t.node),function(t){i.hasClass(t,"mceTmpl")&&(s(i.select("*",t),function(t){i.hasClass(t,e.getParam("template_mdate_classes","mdate").replace(/\s+/g,"|"))&&(t.innerHTML=n(e.getParam("template_mdate_format",e.getLang("template.mdate_format"))))}),r(t))})})}),tinymce.PluginManager.add("visualblocks",function(e,t){function n(){var t=this;e.on("VisualBlocks",function(){t.active(e.dom.hasClass(e.getBody(),"mce-visualblocks"))})}var r,i,s;window.NodeList&&(e.addCommand("mceVisualBlocks",function(){var n,u=e.dom;r||(r=u.uniqueId(),n=u.create("link",{id:r,rel:"stylesheet",href:t+"/css/visualblocks.css"}),e.getDoc().getElementsByTagName("head")[0].appendChild(n)),e.on("PreviewFormats AfterPreviewFormats",function(t){s&&u.toggleClass(e.getBody(),"mce-visualblocks","afterpreviewformats"==t.type)}),u.toggleClass(e.getBody(),"mce-visualblocks"),s=e.dom.hasClass(e.getBody(),"mce-visualblocks"),i&&i.active(u.hasClass(e.getBody(),"mce-visualblocks")),e.fire("VisualBlocks")}),e.addButton("visualblocks",{title:"Show blocks",cmd:"mceVisualBlocks",onPostRender:n}),e.addMenuItem("visualblocks",{text:"Show blocks",cmd:"mceVisualBlocks",onPostRender:n,selectable:!0,context:"view",prependToContext:!0}),e.on("init",function(){e.settings.visualblocks_default_state&&e.execCommand("mceVisualBlocks",!1,null,{skip_focus:!0})}),e.on("remove",function(){e.dom.removeClass(e.getBody(),"mce-visualblocks")}))}),tinymce.PluginManager.add("visualchars",function(e){function t(t){var n,s,o,u,a,f,l=e.getBody(),c=e.selection;if(r=!r,e.fire("VisualChars",{state:r}),t&&(f=c.getBookmark()),r)for(s=[],tinymce.walk(l,function(e){3==e.nodeType&&e.nodeValue&&-1!=e.nodeValue.indexOf("")&&s.push(e)},"childNodes"),o=0;o<s.length;o++){for(u=s[o].nodeValue,u=u.replace(/(\u00a0)/g,'<span data-mce-bogus="1" class="mce-nbsp">$1</span>'),a=e.dom.create("div",null,u);n=a.lastChild;)e.dom.insertAfter(n,s[o]);e.dom.remove(s[o])}else for(s=e.dom.select("span.mce-nbsp",l),o=s.length-1;o>=0;o--)e.dom.remove(s[o],1);c.moveToBookmark(f)}function n(){var t=this;e.on("VisualChars",function(e){t.active(e.state)})}var r;e.addCommand("mceVisualChars",t),e.addButton("visualchars",{title:"Show invisible characters",cmd:"mceVisualChars",onPostRender:n}),e.addMenuItem("visualchars",{text:"Show invisible characters",cmd:"mceVisualChars",onPostRender:n,selectable:!0,context:"view",prependToContext:!0}),e.on("beforegetcontent",function(e){r&&"raw"!=e.format&&!e.draft&&(r=!0,t(!1))})}),tinymce.PluginManager.add("wordcount",function(e){function t(){e.theme.panel.find("#wordcount").text(["Words: {0}",i.getCount()])}var n,r,i=this;n=e.getParam("wordcount_countregex",/[\w\u2019\x27\-]+/g),r=e.getParam("wordcount_cleanregex",/[0-9.(),;:!?%#$?\x27\x22_+=\\\/\-]*/g),e.on("init",function(){var n=e.theme.panel&&e.theme.panel.find("#statusbar")[0];n&&window.setTimeout(function(){n.insert({type:"label",name:"wordcount",text:["Words: {0}",i.getCount()],classes:"wordcount"},0),e.on("setcontent beforeaddundo",t),e.on("keyup",function(e){32==e.keyCode&&t()})},0)}),i.getCount=function(){var t=e.getContent({format:"raw"}),i=0;if(t){t=t.replace(/\.\.\./g," "),t=t.replace(/<.[^<>]*?>/g," ").replace(/&nbsp;|&#160;/gi," "),t=t.replace(/(\w+)(&.+?;)+(\w+)/,"$1$3").replace(/&.+?;/g," "),t=t.replace(r,"");var s=t.match(n);s&&(i=s.length)}return i}}),tinymce.PluginManager.add("textcolor",function(e){function t(){var t,n,r=[];for(n=e.settings.textcolor_map||["000000","Black","993300","Burnt orange","333300","Dark olive","003300","Dark green","003366","Dark azure","000080","Navy Blue","333399","Indigo","333333","Very dark gray","800000","Maroon","FF6600","Orange","808000","Olive","008000","Green","008080","Teal","0000FF","Blue","666699","Grayish blue","808080","Gray","FF0000","Red","FF9900","Amber","99CC00","Yellow green","339966","Sea green","33CCCC","Turquoise","3366FF","Royal blue","800080","Purple","999999","Medium gray","FF00FF","Magenta","FFCC00","Gold","FFFF00","Yellow","00FF00","Lime","00FFFF","Aqua","00CCFF","Sky blue","993366","Brown","C0C0C0","Silver","FF99CC","Pink","FFCC99","Peach","FFFF99","Light yellow","CCFFCC","Pale green","CCFFFF","Pale cyan","99CCFF","Light sky blue","CC99FF","Plum","FFFFFF","White"],t=0;t<n.length;t+=2)r.push({text:n[t+1],color:n[t]});return r}function n(){var n,r,i,s,o,u,a,f,l,c=this;for(n=t(),i='<table class="mce-grid mce-grid-border mce-colorbutton-grid" role="presentation" cellspacing="0"><tbody>',s=n.length-1,o=e.settings.textcolor_rows||5,u=e.settings.textcolor_cols||8,f=0;o>f;f++){for(i+="<tr>",a=0;u>a;a++)l=f*u+a,l>s?i+="<td></td>":(r=n[l],i+='<td><div id="'+c._id+"-"+l+'"'+' data-mce-color="'+r.color+'"'+' role="option"'+' tabIndex="-1"'+' style="'+(r?"background-color: #"+r.color:"")+'"'+' title="'+r.text+'">'+"</div>"+"</td>");i+="</tr>"}return i+="</tbody></table>"}function r(t){var n,r=this.parent();(n=t.target.getAttribute("data-mce-color"))&&(r.hidePanel(),n="#"+n,r.color(n),e.execCommand(r.settings.selectcmd,!1,n))}function i(){var t=this;t._color&&e.execCommand(t.settings.selectcmd,!1,t._color)}e.addButton("forecolor",{type:"colorbutton",tooltip:"Text color",popoverAlign:"bc-tl",selectcmd:"ForeColor",panel:{html:n,onclick:r},onclick:i}),e.addButton("backcolor",{type:"colorbutton",tooltip:"Background color",popoverAlign:"bc-tl",selectcmd:"HiliteColor",panel:{html:n,onclick:r},onclick:i})}),tinymce.ThemeManager.add("modern",function(e){function t(){function t(t){var r,i=[];if(t)return c(t.split(/[ ,]/),function(t){function n(){var n=e.selection;"bullist"==s&&n.selectorChanged("ul > li",function(e,n){for(var r,i=n.parents.length;i--&&(r=n.parents[i].nodeName,"OL"!=r&&"UL"!=r););t.active("UL"==r)}),"numlist"==s&&n.selectorChanged("ol > li",function(e,n){for(var r,i=n.parents.length;i--&&(r=n.parents[i].nodeName,"OL"!=r&&"UL"!=r););t.active("OL"==r)}),t.settings.stateSelector&&n.selectorChanged(t.settings.stateSelector,function(e){t.active(e)},!0),t.settings.disabledStateSelector&&n.selectorChanged(t.settings.disabledStateSelector,function(e){t.disabled(e)})}var s;"|"==t?r=null:l.has(t)?(t={type:t},f.toolbar_items_size&&(t.size=f.toolbar_items_size),i.push(t),r=null):(r||(r={type:"buttongroup",items:[]},i.push(r)),e.buttons[t]&&(s=t,t=e.buttons[s],t.type=t.type||"button",f.toolbar_items_size&&(t.size=f.toolbar_items_size),t=l.create(t),r.items.push(t),e.initialized?n():e.on("init",n)))}),n.push({type:"toolbar",layout:"flow",items:i}),!0}for(var n=[],r=1;10>r&&t(f["toolbar"+r]);r++);return n.length||t(f.toolbar||d),n}function n(){function t(t){var n;return"|"==t?{text:"|"}:n=e.menuItems[t]}function n(n){var r,i,s,o,u;if(u=tinymce.makeMap((f.removed_menuitems||"").split(/[ ,]/)),f.menu?(i=f.menu[n],o=!0):i=p[n],i){r={text:i.title},s=[],c((i.items||"").split(/[ ,]/),function(e){var n=t(e);n&&!u[e]&&s.push(t(e))}),o||c(e.menuItems,function(e){e.context==n&&("before"==e.separator&&s.push({text:"|"}),e.prependToContext?s.unshift(e):s.push(e),"after"==e.separator&&s.push({text:"|"}))});for(var a=0;a<s.length;a++)"|"==s[a].text&&(0===a||a==s.length-1)&&s.splice(a,1);if(r.menu=s,!r.menu.length)return null}return r}var r,i=[],s=[];if(f.menu)for(r in f.menu)s.push(r);else for(r in p)s.push(r);for(var o=f.menubar?f.menubar.split(/[ ,]/):s,u=0;u<o.length;u++){var a=o[u];a=n(a),a&&i.push(a)}return i}function r(t){function n(e){var n=t.find(e)[0];n&&n.focus()}e.shortcuts.add("Alt+F9","",function(){n("menubar")}),e.shortcuts.add("Alt+F10","",function(){n("toolbar")}),e.shortcuts.add("Alt+F11","",function(){n("elementpath")}),t.on("cancel",function(){e.focus()})}function i(t,n){function r(e){return{width:e.clientWidth,height:e.clientHeight}}var i,s,o,u;i=e.getContainer(),s=e.getContentAreaContainer().firstChild,o=r(i),u=r(s),t=Math.max(f.min_width||100,t),n=Math.max(f.min_height||100,n),t=Math.min(f.max_width||65535,t),n=Math.min(f.max_height||65535,n),h.css(i,"width",t+(o.width-u.width)),h.css(s,"width",t),h.css(s,"height",n),e.fire("ResizeEditor")}function s(t,n){var r=e.getContentAreaContainer();a.resizeTo(r.clientWidth+t,r.clientHeight+n)}function o(){function i(){c&&c.moveRel&&c.visible()&&!c._fixed&&c.moveRel(e.getBody(),["tl-bl","bl-tl"])}function s(){c&&(c.show(),i(),h.addClass(e.getBody(),"mce-edit-focus"))}function o(){c&&(c.hide(),h.removeClass(e.getBody(),"mce-edit-focus"))}function u(){return c?(c.visible()||s(),void 0):(c=a.panel=l.create({type:p?"panel":"floatpanel",classes:"tinymce tinymce-inline",layout:"flex",direction:"column",autohide:!1,autofix:!0,fixed:!!p,border:1,items:[f.menubar===!1?null:{type:"menubar",border:"0 0 1 0",items:n()},f.toolbar===!1?null:{type:"panel",name:"toolbar",layout:"stack",items:t()}]}),c.renderTo(p||document.body).reflow(),r(c),s(),e.on("nodeChange",i),e.on("activate",s),e.on("deactivate",o),void 0)}var c,p;return f.fixed_toolbar_container&&(p=h.select(f.fixed_toolbar_container)[0]),f.content_editable=!0,e.on("focus",u),e.on("blur",o),e.on("remove",function(){c&&(c.remove(),c=null)}),{}}function u(s){var o,u,c;return o=a.panel=l.create({type:"panel",classes:"tinymce",style:"visibility: hidden",layout:"stack",border:1,items:[f.menubar===!1?null:{type:"menubar",border:"0 0 1 0",items:n()},f.toolbar===!1?null:{type:"panel",layout:"stack",items:t()},{type:"panel",name:"iframe",layout:"stack",classes:"edit-area",html:"",border:"1 0 0 0"}]}),f.resize!==!1&&(u={type:"resizehandle",direction:f.resize,onResizeStart:function(){var t=e.getContentAreaContainer().firstChild;c={width:t.clientWidth,height:t.clientHeight}},onResize:function(e){i(c.width+e.deltaX,c.height+e.deltaY)}}),f.statusbar!==!1&&o.add({type:"panel",name:"statusbar",classes:"statusbar",layout:"flow",border:"1 0 0 0",items:[{type:"elementpath"},u]}),o.renderBefore(s.targetNode).reflow(),f.width&&tinymce.DOM.setStyle(o.getEl(),"width",f.width),e.on("remove",function(){o.remove(),o=null}),r(o),{iframeContainer:o.find("#iframe")[0].getEl(),editorContainer:o.getEl()}}var a=this,f=e.settings,l=tinymce.ui.Factory,c=tinymce.each,h=tinymce.DOM,p={file:{title:"File",items:"newdocument"},edit:{title:"Edit",items:"undo redo | cut copy paste pastetext | selectall"},insert:{title:"Insert",items:"|"},view:{title:"View",items:"visualaid |"},format:{title:"Format",items:"bold italic underline strikethrough superscript subscript | formats | removeformat"},table:{title:"Table"},tools:{title:"Tools"}},d="undo redo | styleselect | bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | link image";a.renderUI=function(t){var n=f.skin!==!1?f.skin||"lightgray":!1;return n&&(tinymce.Env.documentMode<=7?tinymce.DOM.loadCSS(tinymce.baseURL+"/skins/"+n+"/skin.ie7.min.css"):tinymce.DOM.loadCSS(tinymce.baseURL+"/skins/"+n+"/skin.min.css"),e.contentCSS.push(tinymce.baseURL+"/skins/"+n+"/content"+(e.inline?".inline":"")+".min.css")),e.on("ProgressState",function(e){a.throbber=a.throbber||new tinymce.ui.Throbber(a.panel.getEl("body")),e.state?a.throbber.show(e.time):a.throbber.hide()}),f.inline?o(t):u(t)},a.resizeTo=i,a.resizeBy=s}),define("tinymce",function(e){return function(){var t,n;return n=function(){return this.tinyMCE.DOM.events.domLoaded=!0,this.tinyMCE},t=n.apply(e,arguments),t||e.window.tinyMCE}}(this)),define("text!js/patterns/tinymce/templates/result.xml",[],function(){return'<div class="pattern-relateditems-result pattern-relateditems-type-<%= Type %> <% if (selected) { %>pattern-active<% } %>">\n  <a href="#" class="pattern-relateditems-result-select <% if (selectable) { %>selectable<% } %>">\n    <% if (!folderish) { %>\n    <span class="pattern-relateditems-result-image">\n      <img src="<%= generateImageUrl(_item, \'thumb\') %>" />\n    </span>\n    <% } %>\n    <span class="pattern-relateditems-result-title"><%= Title %></span>\n    <span class="pattern-relateditems-result-path"><%= path %></span>\n  </a>\n  <span class="pattern-relateditems-buttons">\n    <% if (folderish) { %>\n      <a class="pattern-relateditems-result-browse" href="#" data-path="<%= path %>"></a>\n    <% } %>\n  </span>\n</div>\n'}),define("text!js/patterns/tinymce/templates/selection.xml",[],function(){return'<span class="pattern-relateditems-item pattern-relateditems-type-<%= Type %>">\n <span class="pattern-relateditems-result-image">\n   <img src="<%= generateImageUrl(_item, \'thumb\') %>" />\n </span>\n <span class="pattern-relateditems-item-title"><%= Title %></span>\n <span class="pattern-relateditems-item-path"><%= path %></span>\n</span>\'\n'}),define("text!js/patterns/tinymce/templates/link.xml",[],function(){return'<div>\n  <div class="linkModal">\n    <h1><%- insertHeading %></h1>\n    <p class="info">Drag and drop files from your desktop onto dialog to upload</p>\n\n    <div class="linkTypes pat-autotoc autotabs"\n         data-pat-autotoc="section:fieldset;levels:legend;">\n\n      <fieldset class="linkType internal">\n        <legend>Internal</legend>\n        <div>\n          <div class="form-group main">\n            <input type="text" name="internal" />\n          </div>\n        </div>\n      </fieldset>\n\n      <fieldset class="linkType external">\n        <legend>External</legend>\n        <div class="form-group main">\n          <label for="external"><%- externalText %></label>\n          <input type="text" name="external" />\n        </div>\n      </fieldset>\n\n      <fieldset class="linkType email">\n        <legend>Email</legend>\n        <div class="form-inline">\n          <div class="form-group main">\n            <label><%- emailText %></label>\n            <input type="text" name="email" />\n          </div>\n          <div class="form-group">\n            <label><%- subjectText %></label>\n            <input type="text" name="subject" />\n          </div>\n        </div>\n      </fieldset>\n\n      <fieldset class="linkType anchor">\n        <legend>Anchor</legend>\n        <div>\n          <div class="form-group main">\n            <label>Select an anchor</label>\n            <div class="input-wrapper">\n              <select name="anchor" class="pat-select2" data-pat-select2="width:500px" />\n            </div>\n          </div>\n        </div>\n      </fieldset>\n\n    </div><!-- / tabs -->\n\n    <div class="common-controls">\n      <div class="form-group">\n        <label>Target</label>\n        <select name="target">\n          <% _.each(targetList, function(target){ %>\n            <option value="<%- target.value %>"><%- target.text %></option>\n          <% }); %>\n        </select>\n      </div>\n      <div class="form-group">\n        <label><%- titleText %></label>\n        <input type="text" name="title" />\n      </div>\n    </div>\n\n    <input type="submit" class="btn" name="cancel" value="<%- cancelBtn %>" />\n    <input type="submit" class="btn btn-primary" name="insert" value="<%- insertBtn %>" />\n  </div>\n</div>\n'}),define("text!js/patterns/tinymce/templates/image.xml",[],function(){return'<div>\n  <div class="linkModal">\n    <h1><%- insertHeading %></h1>\n    <p class="info">Drag and drop files from your desktop onto dialog to upload</p>\n\n    <div class="linkTypes pat-autotoc autotabs"\n         data-pat-autotoc="section:fieldset;levels:legend;">\n\n      <fieldset class="linkType image">\n        <legend>Image</legend>\n        <div class="form-inline">\n          <div class="form-group main">\n            <input type="text" name="image" />\n          </div>\n          <div class="form-group scale">\n            <label><%- scaleText %></label>\n            <select name="scale">\n              <option value="">Original</option>\n                <% _.each(scales.split(\',\'), function(scale){ %>\n                  <% var scale = scale.split(\':\'); %>\n                  <option value="<%- scale[1] %>">\n                    <%- scale[0] %>\n                  </option>\n                <% }); %>\n            </select>\n          </div>\n        </div>\n      </fieldset>\n\n      <fieldset class="linkType externalImage">\n        <legend>External image</legend>\n        <div>\n          <div class="form-group main">\n            <label><%- externalImageText %></label>\n            <input type="text" name="externalImage" />\n          </div>\n        </div>\n      </fieldset>\n\n    </div><!-- / tabs -->\n\n    <div class="common-controls">\n      <div class="form-group title">\n        <label><%- titleText %></label>\n        <input type="text" name="title" />\n      </div>\n      <div class="form-group text">\n        <label><%- altText %></label>\n        <input type="text" name="alt" />\n      </div>\n      <div class="form-group align">\n        <label><%- imageAlignText %></label>\n        <select name="align">\n          <% _.each([\'inline\', \'right\', \'left\'], function(align){ %>\n              <option value="<%- align %>">\n              <%- align.charAt(0).toUpperCase() + align.slice(1) %>\n              </option>\n          <% }); %>\n        <select>\n      </div>\n    </div>\n\n    <input type="submit" class="btn" name="cancel" value="<%- cancelBtn %>" />\n    <input type="submit" class="btn btn-primary" name="insert" value="<%- insertBtn %>" />\n\n  </div>\n</div>\n'}),define("js/patterns/tinymce/links",["jquery","underscore","mockup-patterns-base","mockup-patterns-relateditems","mockup-patterns-modal","tinymce","mockup-patterns-dropzone","text!js/patterns/tinymce/templates/link.xml","text!js/patterns/tinymce/templates/image.xml"],function(e,t,n,r,i,s,o,u,a){var f=n.extend({defaults:{linkModal:null},init:function(){this.linkModal=this.options.linkModal,this.tinypattern=this.options.tinypattern,this.tiny=this.tinypattern.tiny,this.dom=this.tiny.dom,this.$input=this.$el.find("input")},value:function(){return this.$input.val()},toUrl:function(){return this.value()},load:function(e){this.$input.attr("value",this.tiny.dom.getAttrib(e,"data-val"))},set:function(e){this.$input.attr("value",e)},attributes:function(){return{"data-val":this.value()}}}),l=f.extend({init:function(){var e=this;f.prototype.init.call(e),e.$input.addClass("pat-relateditems"),e.createRelatedItems()},createRelatedItems:function(){this.relatedItems=new r(this.$input,this.linkModal.options.relatedItems)},value:function(){var e=this,t=e.$input.select2("data");return t&&typeof t=="object"&&(t=t[0]),t},toUrl:function(){var e=this.value();return e?this.tinypattern.generateUrl(e):null},load:function(e){var t=this.tiny.dom.getAttrib(e,"data-val");t&&this.set(t)},set:function(e){this.$input.select2("destroy"),this.$input.attr("data-relateditems",undefined),this.$input.parent().replaceWith(this.$input),this.$input.attr("value",e),this.createRelatedItems()},attributes:function(){var e=this.value();return e?{"data-val":e.UID}:{}}}),c=l.extend({toUrl:function(){var e=this.value();return this.tinypattern.generateImageUrl(e,this.linkModal.$scale.val())}}),h=f.extend({toUrl:function(){var e=this,t=e.value();if(t){var n=e.getSubject(),r="mailto:"+t;return n&&(r+="?subject="+n),r}return null},load:function(e){f.prototype.load.apply(this,[e]),this.linkModal.$subject.val(this.tiny.dom.getAttrib(e,"data-subject"))},getSubject:function(){return this.linkModal.$subject.val()},attributes:function(){var e=f.prototype.attributes.call(this);return e["data-subject"]=this.getSubject(),e}}),p=f.extend({init:function(){var e=this;f.prototype.init.call(e),e.$select=e.$el.find("select"),e.anchorNodes=[],e.anchorData=[],e.populate()},value:function(){var e=this,t=e.$select.select2("data");return t&&typeof t=="object"&&(t=t[0]),t},populate:function(){var t=this;t.$select.find("option").remove(),t.anchorNodes=[],t.anchorData=[];var n,r,i,s,o=t.tiny.dom.select("a.mceItemAnchor,img.mceItemAnchor,a.mce-item-anchor,img.mce-item-anchor");for(r=0;r<o.length;r+=1)n=o[r],i=t.tiny.dom.getAttrib(n,"name"),i||(i=t.tiny.dom.getAttrib(n,"id")),i!==""&&(t.anchorNodes.push(n),t.anchorData.push({name:i,title:i}));o=t.tiny.dom.select(t.linkModal.options.anchorSelector);if(o.length>0)for(r=0;r<o.length;r+=1){n=o[r],s=e(n).text().replace(/^\s+|\s+$/g,"");if(s==="")continue;i=s.toLowerCase().substring(0,1024),i=i.replace(/[^a-z0-9]/g,"-");var u=!1;for(r=0;r<t.anchorNodes.length;r+=1){var a=t.anchorData[r];if(a.name===i){u=!0,a.title=s;break}}u||(t.anchorData.push({name:i,title:s,newAnchor:!0}),t.anchorNodes.push(n))}if(t.anchorNodes.length>0)for(r=0;r<t.anchorData.length;r+=1){var f=t.anchorData[r];t.$select.append('<option value="'+r+'">'+f.title+"</option>")}else t.$select.append("<option>No anchors found..</option>")},getIndex:function(e){var t=this;for(var n=0;n<t.anchorData.length;n+=1){var r=t.anchorData[n];if(r.name===e)return n}return 0},toUrl:function(){var e=this,t=e.value();if(t){var n=parseInt(t,10),r=e.anchorNodes[n],i=e.anchorData[n];return i.newAnchor&&(r.innerHTML='<a name="'+i.name+'" class="mce-item-anchor"></a>'+r.innerHTML),"#"+i.name}return null},set:function(e){var t=this.getIndex(e);this.$select.select2("data",""+t)}});s.PluginManager.add("plonelink",function(e){e.addButton("plonelink",{icon:"link",tooltip:"Insert/edit link",shortcut:"Ctrl+K",onclick:e.settings.addLinkClicked,stateSelector:"a[href]"}),e.addButton("unlink",{icon:"unlink",tooltip:"Remove link(s)",cmd:"unlink",stateSelector:"a[href]"}),e.addShortcut("Ctrl+K","",e.settings.addLinkClicked),e.addMenuItem("plonelink",{icon:"link",text:"Insert link",shortcut:"Ctrl+K",onclick:e.settings.addLinkClicked,stateSelector:"a[href]",context:"insert",prependToContext:!0})});var d=n.extend({name:"linkmodal",defaults:{anchorSelector:"h1,h2,h3",linkTypes:[],initialLinkType:"internal",text:{insertHeading:"Insert Link"},linkTypeClassMapping:{internal:l,external:f,email:h,anchor:p,image:c,externalImage:f}},linkTypeTemplateMapping:{internal:u,external:u,email:u,anchor:u,image:a,externalImage:a},template:function(e){return t.template(this.linkTypeTemplateMapping[this.linkType])(e)},init:function(){var e=this;e.tinypattern=e.options.tinypattern,e.tinypattern.options.anchorSelector&&(e.options.anchorSelector=e.tinypattern.options.anchorSelector),e.tiny=e.tinypattern.tiny,e.dom=e.tiny.dom,e.linkType=e.options.initialLinkType,e.linkTypes={},e.modal=new i(e.$el,{html:e.generateModalHtml(),content:null,buttons:".btn"}),e.modal.on("shown",function(t){e.modalShown.apply(e,[t])})},generateModalHtml:function(){var e=this;return e.template({text:e.options.text,insertHeading:e.options.text.insertHeading,linkTypes:e.options.linkTypes,externalText:e.options.text.external,emailText:e.options.text.email,subjectText:e.options.text.subject,targetList:e.options.targetList,titleText:e.options.text.title,externalImageText:e.options.text.externalImage,altText:e.options.text.alt,imageAlignText:e.options.text.imageAlign,scaleText:e.options.text.scale,scales:e.options.scales,cancelBtn:e.options.text.cancelBtn,insertBtn:e.options.text.insertBtn})},isImageMode:function(){return["image","externalImage"].indexOf(this.linkType)!==-1},initElements:function(){var n=this;n.$target=e('select[name="target"]',n.modal.$modal),n.$button=e('.modal-footer input[name="insert"]',n.modal.$modal),n.$title=e('input[name="title"]',n.modal.$modal),n.$subject=e('input[name="subject"]',n.modal.$modal),n.$alt=e('input[name="alt"]',n.modal.$modal),n.$align=e('select[name="align"]',n.modal.$modal),n.$scale=e('select[name="scale"]',n.modal.$modal),t.each(n.options.linkTypes,function(t){var r=e(".linkType."+t+" .main",n.modal.$modal);n.linkTypes[t]=new n.options.linkTypeClassMapping[t](r,{linkModal:n,tinypattern:n.tinypattern})}),n.$linkTypes=e(".linkTypes",n.modal.$modal);var r=n.$linkTypes.find('input[value="'+n.linkType+'"]');r.length>0&&(r[0].checked=!0)},getLinkUrl:function(){var e=this;return e.linkTypes[e.linkType].toUrl()},getValue:function(){return this.linkTypes[this.linkType].value()},updateAnchor:function(t){var n=this,r=n.$target.val(),i=n.$title.val(),s=e.extend(!0,{},{title:i?i:null,target:r?r:null,"data-linkType":n.linkType,href:t},n.linkTypes[n.linkType].attributes());n.tiny.execCommand("mceInsertLink",!1,s)},focusElement:function(e){var t=this;t.tiny.focus(),t.tiny.selection.select(e),t.tiny.nodeChanged()},updateImage:function(t){function i(e){e.onload=e.onerror=function(){e.onload=e.onerror=null,n.focusElement(e)}}var n=this,r=e.extend(!0,{},{src:t,alt:n.$alt.val(),"class":"image-"+n.$align.val(),"data-linkType":n.linkType,"data-scale":n.$scale.val()},n.linkTypes[n.linkType].attributes());n.imgElm&&!n.imgElm.getAttribute("data-mce-object")?(r.width=n.dom.getAttrib(n.imgElm,"width"),r.height=n.dom.getAttrib(n.imgElm,"height")):n.imgElm=null,n.imgElm?n.dom.setAttribs(n.imgElm,r):(r.id="__mcenew",n.tiny.insertContent(n.dom.createHTML("img",r)),n.imgElm=n.dom.get("__mcenew"),n.dom.setAttrib(n.imgElm,"id",null)),i(n.imgElm),n.imgElm.complete&&n.focusElement(n.imgElm)},modalShown:function(t){var n=this;n.initElements(),n.initData(),n.$button.off("click").on("click",function(e){e.preventDefault(),e.stopPropagation();var t=n.getLinkUrl();if(!t)return;n.isImageMode()?n.updateImage(t):n.updateAnchor(t),n.hide()}),e('.modal-footer input[name="cancel"]',n.modal.$modal).click(function(e){e.preventDefault(),n.hide()}),n.setupDropzone()},setupDropzone:function(){var t=this;t.options.uploadUrl&&(t.dropzone=new o(t.modal.$modal,{className:"tinymce-dropzone",clickable:!1,url:t.options.uploadUrl,wrap:"inner",autoCleanResults:!0,success:function(n,r){t.tinypattern.fileUploaded(e.parseJSON(r)),t.hide()}}))},show:function(){this.modal.show()},hide:function(){this.modal.hide()},initData:function(){var e=this;e.selection=e.tiny.selection,e.tiny.focus();var t=e.imgElm=e.selection.getNode();e.anchorElm=e.dom.getParent(t,"a[href]");var n;if(e.isImageMode()){if(e.imgElm.nodeName!=="IMG"&&e.anchorElm){var r=e.anchorElm.getElementsByTagName("img");r.length>0&&(e.imgElm=r[0],e.focusElement(e.imgElm))}e.imgElm.nodeName!=="IMG"&&(e.imgElm=null);if(e.imgElm){var i=e.dom.getAttrib(e.imgElm,"src");e.$alt.val(e.dom.getAttrib(e.imgElm,"alt")),n=e.dom.getAttrib(e.imgElm,"data-linktype");if(n){e.linkType=n,e.linkTypes[e.linkType].load(e.imgElm);var s=e.dom.getAttrib(e.imgElm,"data-scale");e.$scale.val(s)}else i&&e.guessImageLink(i);var o=e.dom.getAttrib(e.imgElm,"class"),u=o.split(" ");for(var a=0;a<u.length;a+=1){var f=u[a];f.indexOf("image-")!==-1&&e.$align.val(f.replace("image-",""))}}}else if(e.anchorElm){e.focusElement(e.anchorElm);var l="";l=e.dom.getAttrib(e.anchorElm,"href"),e.$target.val(e.dom.getAttrib(e.anchorElm,"target")),e.$title.val(e.dom.getAttrib(e.anchorElm,"title")),n=e.dom.getAttrib(e.anchorElm,"data-linktype"),n?(e.linkType=n,e.linkTypes[e.linkType].load(e.anchorElm)):l&&e.guessAnchorLink(l)}},guessImageLink:function(e){var t=this;e.indexOf(t.options.prependToScalePart)!==-1?(t.linkType="image",t.$scale.val(t.tinypattern.getScaleFromUrl(e)),t.linkTypes.image.set(t.tinypattern.stripGeneratedUrl(e))):(t.linkType="externalImage",t.linkTypes.externalImage.set(e))},guessAnchorLink:function(e){var t=this;if(t.options.prependToUrl&&e.indexOf(t.options.prependToUrl)!==-1)t.linkType="internal",t.linkTypes.internal.set(t.tinypattern.stripGeneratedUrl(e));else if(e.indexOf("mailto:")!==-1){t.linkType="email";var n=e.substring("mailto:".length,e.length),r=n.split("?subject=");t.linkTypes.email.set(r[0]),r.length>1&&t.$subject.val(decodeURIComponent(r[1]))}else e[0]==="#"?(t.linkType="anchor",t.linkTypes.anchor.setRaw(e.substring(1))):(t.linkType="external",t.linkTypes.external.setRaw(e))},setSelectElement:function(e,t){e.find("option:selected").attr("selected",""),t&&e.find('option[value="'+t+'"]').attr("selected","true")},reinitialize:function(){var e=this;e.modal.options.html=e.generateModalHtml()}});return d}),define("text!js/patterns/tinymce/templates/upload.xml",[],function(){return'<div>\n  <div class="linkModal">\n    <form method="POST" class="disableAutoSubmit"\n          action="<%- uploadUrl %>"\n          enctype="multipart/form-data">\n      <h1><%- uploadHeading %></h1>\n      <div class="">\n        <input type="text" name="location" />\n      </div>\n      <p><%- uploadLocationWarning %></p>\n      <div class="control-group">\n        <label><%- file %></label>\n        <div class="controls">\n          <input type=\'file\' name=\'file\' />\n        </div>\n      </div>\n      <input type="submit" class="btn btn-primary" name="upload"\n             value="<%- uploadBtn %>" />\n      <iframe id="upload_target" name="upload_target" src=""\n              style="width:0;height:0;border:0px solid #fff;"></iframe>\n    </form>\n  </div>\n</div>\n'}),define("js/patterns/tinymce/upload",["jquery","underscore","mockup-patterns-base","mockup-patterns-relateditems","mockup-patterns-modal","tinymce","text!js/patterns/tinymce/templates/upload.xml"],function(e,t,n,r,i,s,o){s.PluginManager.add("ploneimage",function(e){e.addButton("ploneimage",{icon:"image",tooltip:"Insert/edit image",onclick:e.settings.addImageClicked,stateSelector:"img:not([data-mce-object])"}),e.addMenuItem("ploneimage",{icon:"image",text:"Insert image",onclick:e.settings.addImageClicked,context:"insert",prependToContext:!0})}),s.PluginManager.add("ploneupload",function(e){e.addButton("ploneupload",{icon:"newdocument",tooltip:"Upload file",onclick:e.settings.uploadFileClicked}),e.addMenuItem("ploneupload",{icon:"newdocument",text:"Upload file",onclick:e.settings.uploadFileClicked,context:"insert",prependToContext:!0})});var u=n.extend({name:"uploadmodal",defaults:{text:{uploadHeading:"Upload file",file:"File",uploadBtn:"Upload",uploadLocationWarning:"If you do not select a folder to upload to, the file will be uploaded to the current folder."}},template:t.template(o),init:function(){var e=this;e.tinypattern=e.options.tinypattern,e.modal=new i(e.$el,{html:e.template({uploadUrl:e.options.uploadUrl,uploadHeading:e.options.text.uploadHeading,uploadLocationWarning:e.options.text.uploadLocationWarning,file:e.options.text.file,uploadBtn:e.options.text.uploadBtn}),content:null,buttons:".btn"}),e.modal.on("shown",function(t){e.modalShown.apply(e,[t])})},show:function(){this.modal.show()},hide:function(){this.modal.hide()},modalShown:function(){var t=this;t.$uploadBtn=e('.modal-footer input[type="submit"]',t.modal.$modal),t.$form=e("form",t.modal.$modal),t.$iframe=e("iframe",t.modal.$modal),t.$location=e('[name="location"]',t.modal.$modal),t.$location.addClass("pat-relateditems").patternRelateditems(t.options.relatedItems),t.$form.on("submit",function(n){var r=t.$location.select2("data");r.length>0&&t.$form.attr("action",r[0].getURL+"/"+t.options.rel_upload_path),t.modal.loading.show(),t.$iframe.on("load",function(){var n=t.$iframe.contents();t.modal.loading.hide(),t.hide(),(!n.length||!n[0].firstChild)&&t.tinypattern.fileUploadError(),n=e(n[0].body).text(),t.tinypattern.fileUploaded(e.parseJSON(n))}),t.$form[0].target="upload_target"}),t.$uploadBtn.on("click",function(e){e.preventDefault(),t.$form.trigger("submit")})},reinitialize:function(){}});return u}),define("mockup-patterns-tinymce",["jquery","underscore","mockup-patterns-base","mockup-patterns-relateditems","mockup-patterns-modal","tinymce","mockup-patterns-autotoc","mockup-patterns-dropzone","dropzone","text!js/patterns/tinymce/templates/result.xml","text!js/patterns/tinymce/templates/selection.xml","mockup-utils","js/patterns/tinymce/links","js/patterns/tinymce/upload"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p){var d=n.extend({name:"tinymce",defaults:{relatedItems:{attributes:["UID","Title","Description","getURL","Type","path","ModificationDate"],batchSize:20,basePath:"/",vocabularyUrl:null,width:500,maximumSelectionSize:1,placeholder:"Search for item on site..."},text:{insertBtn:"Insert",cancelBtn:"Cancel",insertHeading:"Insert link",title:"Title",internal:"Internal",external:"External",email:"Email",anchor:"Anchor",subject:"Subject",image:"Image",imageAlign:"Align",scale:"Size",alt:"Alternative Text",externalImage:"External Image URI"},prependToUrl:"",appendToUrl:"",linkAttribute:"path",prependToScalePart:"/imagescale/",appendToScalePart:"",scales:"Listing (16x16):listing,Icon (32x32):icon,Tile (64x64):tile,Thumb (128x128):thumb,Mini (200x200):mini,Preview (400x400):preview,Large (768x768):large",targetList:[{text:"Open in this window / frame",value:""},{text:"Open in new window",value:"_blank"},{text:"Open in parent window / frame",value:"_parent"},{text:"Open in top frame (replaces all frames)",value:"_top"}],imageTypes:"Image",folderTypes:"Folder,Plone Site",linkableTypes:"Document,Event,File,Folder,Image,News Item,Topic",tiny:{plugins:["advlist autolink lists charmap print preview anchor ploneupload","searchreplace visualblocks code fullscreen autoresize","insertdatetime media table contextmenu paste plonelink ploneimage"],menubar:"edit table format tools view insert",toolbar:"undo redo | styleselect | bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | unlink plonelink ploneimage | ploneupload",autoresize_max_height:1500},rel_upload_path:null,folder_url:null},uploadFileClicked:function(){var t=this;if(t.uploadModal===null){var n=e("<div/>").insertAfter(t.$el);t.uploadModal=new p(n,e.extend(!0,{},t.options,{tinypattern:t,relatedItems:{baseCriteria:[{i:"Type",o:"plone.app.querystring.operation.list.contains",v:t.options.folderTypes.split(",")}],placeholder:"Select a folder to upload to..."}})),t.uploadModal.show()}else t.uploadModal.reinitialize(),t.uploadModal.show()},addLinkClicked:function(){var t=this;if(t.linkModal===null){var n=e("<div/>").insertAfter(t.$el);t.linkModal=new h(n,e.extend(!0,{},t.options,{tinypattern:t,linkTypes:["internal","external","email","anchor"]})),t.linkModal.show()}else t.linkModal.reinitialize(),t.linkModal.show()},addImageClicked:function(){var t=this;if(t.imageModal===null){var n=e.extend(!0,{},t.options,{tinypattern:t,linkTypes:["image","externalImage"],initialLinkType:"image",text:{insertHeading:"Insert Image"},relatedItems:{baseCriteria:[{i:"Type",o:"plone.app.querystring.operation.list.contains",v:t.options.imageTypes.split(",").concat(t.options.folderTypes.split(","))}],selectableTypes:t.options.imageTypes.split(","),resultTemplate:f,selectionTemplate:l}}),r=e("<div/>").insertAfter(t.$el);t.imageModal=new h(r,n),t.imageModal.show()}else t.imageModal.reinitialize(),t.imageModal.show()},generateUrl:function(e){var t=this,n=e[t.options.linkAttribute];return t.options.prependToUrl+n+t.options.appendToUrl},generateImageUrl:function(e,t){var n=this,r=n.generateUrl(e);return r+n.options.prependToScalePart+t+n.options.appendToScalePart},stripGeneratedUrl:function(e){var t=this;e=e.split(t.options.prependToScalePart,2)[0];if(t.options.prependToUrl){var n=e.split(t.options.prependToUrl,2);n.length===2&&(e=n[1])}return t.options.appendToUrl&&(e=e.split(t.options.appendToUrl)[0]),e},getScaleFromUrl:function(e){var t=this,n=e.split(t.options.prependToScalePart),r=n[0];return n.length!==2?null:(t.options.appendToScalePart?e=n[1].split(t.options.appendToScalePart)[0]:e=n[1],e.indexOf("/image_")!==-1&&(e=e.split("/image_")[1]),e)},fileUploaded:function(e){var t=this;if(e===null)return;var n=e.filename,r=n.split(".");r=r[r.length-1].toLowerCase();var i;if(["png","jpg","gif","jpeg"].indexOf(r)!==-1){i={src:t.generateImageUrl(e,"thumb"),"class":"image-inline"},i.id="__mcenew",t.tiny.insertContent(t.tiny.dom.createHTML("img",i));var s=t.tiny.dom.get("__mcenew");t.tiny.dom.setAttrib(s,"id",null)}else{i={id:"__mcenew"},t.tiny.insertContent(t.tiny.dom.createHTML("a",i));var o=t.tiny.dom.get("__mcenew");t.tiny.dom.setAttrib(o,"id",null),t.tiny.dom.setAttrib(o,"href",t.generateUrl(e)),t.tiny.dom.setHTML(o,n)}},fileUploadError:function(){alert("There was an error attempting to upload file. It is possible the file you are uploading is not allowed in the folder you are trying to add it to.")},init:function(){var e=this;e.linkModal=e.imageModal=e.uploadModal=null;var t=c.setId(e.$el),n=e.options.tiny;n.selector="#"+t,n.addLinkClicked=function(){e.addLinkClicked.apply(e,[])},n.addImageClicked=function(){e.addImageClicked.apply(e,[])},n.skin=!1,e.options.relatedItems.generateImageUrl=function(t,n){return e.generateImageUrl.apply(e,[t,n])},e.options.base_url||(e.options.base_url=window.location.href),e.options.rel_upload_path?e.options.uploadUrl=e.options.folder_url+"/"+e.options.rel_upload_path:e.options.uploadUrl=null,e.options.uploadUrl?n.uploadFileClicked=function(){e.uploadFileClicked.apply(e,[])}:(n.plugins[0]=n.plugins[0].replace("ploneupload",""),n.toolbar=n.toolbar.replace("ploneupload","")),s.init(n),e.tiny=s.get(t);var r=e.$el.parents("form");r.on("submit",function(){e.tiny.save()})}});return d}),define("text!js/patterns/tinymce/pattern.js",[],function(){return"/* TinyMCE pattern.\n *\n * Options:\n *    relatedItems(object): Related items pattern options. ({ attributes: [\"UID\", \"Title\", \"Description\", \"getURL\", \"Type\", \"path\", \"ModificationDate\"], batchSize: 20, basePath: \"/\", vocabularyUrl: null, width: 500, maximumSelectionSize: 1, placeholder: \"Search for item on site...\" })\n *    text(object): Translation strings ({ insertBtn: \"Insert\", cancelBtn: \"Cancel\", insertHeading: \"Insert link\", title: \"Title\", internal: \"Internal\", external: \"External\", email: \"Email\", anchor: \"Anchor\", subject: \"Subject\" image: \"Image\", imageAlign: \"Align\", scale: \"Size\", alt: \"Alternative Text\", externalImage: \"External Image URI\"})\n *    scales(string): TODO: is this even used ('Listing (16x16):listing,Icon (32x32):icon,Tile (64x64):tile,Thumb (128x128):thumb,Mini (200x200):mini,Preview (400x400):preview,Large (768x768):large')\n *    targetList(array): TODO ([ {text: \"Open in this window / frame\", value: \"\"}, {text: \"Open in new window\", value: \"_blank\"}, {text: \"Open in parent window / frame\", value: \"_parent\"}, {text: \"Open in top frame (replaces all frames)\", value: \"_top\"}])\n * imageTypes(string): TODO ('Image')\n *    folderTypes(string): TODO ('Folder,Plone Site')\n *    linkableTypes(string): TODO ('Document,Event,File,Folder,Image,News Item,Topic')\n *    tiny(object): TODO ({ plugins: [ \"advlist autolink lists charmap print preview anchor ploneupload\", \"usearchreplace visualblocks code fullscreen autoresize\", \"insertdatetime media table contextmenu paste plonelink ploneimage\" ], menubar: \"edit table format tools view insert\",\ntoolbar: \"undo redo | styleselect | bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | unlink plonelink ploneimage | ploneupload\", autoresize_max_height: 1500 })\n *    rel_upload_path(string): To provide upload support. (null)\n *    folder_url(string): Base url to provide upload url off of. (null)\n *    prependToUrl(string): Text to prepend to generated internal urls. ('')\n *    appendToUrl(string): Text to append to generated internal urls. ('')\n *    prependToScalePart(string): Text to prepend to generated image scale url part. ('/imagescale/')\n *    appendToScalePart(string): Text to append to generated image scale url part. ('')\n *    linkAttribute(string): Ajax response data attribute to use for url. ('path')\n *\n * Documentation:\n *    # Default\n *\n *    {{ example-1 }}\n *\n *    # With dropzone\n *\n *    {{ example-2 }}\n *\n * Example: example-1\n *    <form>\n *      <textarea class=\"pat-tinymce\"\n *          data-pat-tinymce='{\"relatedItems\": {\n *                                \"vocabularyUrl\": \"/relateditems-test.json\"\n *                                }}'></textarea>\n *    </form>\n *\n * Example: example-2\n *    <form>\n *      <textarea class=\"pat-tinymce\"\n *          data-pat-tinymce='{\"relatedItems\": {\"vocabularyUrl\": \"/relateditems-test.json\" },\n *                             \"rel_upload_path\": \"upload\",\n *                             \"folder_url\": \"http://localhost:8000/\"}'></textarea>\n *    </form>\n *\n * License:\n *    Copyright (C) 2010 Plone Foundation\n *\n *    This program is free software; you can redistribute it and/or modify it\n *    under the terms of the GNU General Public License as published by the\n *    Free Software Foundation; either version 2 of the License.\n *\n *    This program is distributed in the hope that it will be useful, but\n *    WITHOUT ANY WARRANTY; without even the implied warranty of\n *    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General\n *    Public License for more details.\n *\n *    You should have received a copy of the GNU General Public License along\n *    with this program; if not, write to the Free Software Foundation, Inc.,\n *    51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA.\n */\n\n/*global alert:true */\n\ndefine([\n  'jquery',\n  'underscore',\n  'mockup-patterns-base',\n  'mockup-patterns-relateditems',\n  'mockup-patterns-modal',\n  'tinymce',\n  'mockup-patterns-autotoc',\n  'mockup-patterns-dropzone',\n  'dropzone',\n  'text!js/patterns/tinymce/templates/result.xml',\n  'text!js/patterns/tinymce/templates/selection.xml',\n  'mockup-utils',\n  'js/patterns/tinymce/links',\n  'js/patterns/tinymce/upload'\n], function($, _,\n            Base, RelatedItems, Modal, tinymce,\n            AutoTOC, DropZone, dropzone,\n            ResultTemplate, SelectionTemplate,\n            utils, LinkModal, UploadModal) {\n  'use strict';\n\n  var TinyMCE = Base.extend({\n    name: 'tinymce',\n    defaults: {\n      relatedItems: {\n        // UID attribute is required here since we're working with related items\n        attributes: ['UID', 'Title', 'Description', 'getURL', 'Type', 'path', 'ModificationDate'],\n        batchSize: 20,\n        basePath: '/',\n        vocabularyUrl: null,\n        width: 500,\n        maximumSelectionSize: 1,\n        placeholder: 'Search for item on site...'\n      },\n      text: {\n        insertBtn: 'Insert', // so this can be configurable for different languages\n        cancelBtn: 'Cancel',\n        insertHeading: 'Insert link',\n        title: 'Title',\n        internal: 'Internal',\n        external: 'External',\n        email: 'Email',\n        anchor: 'Anchor',\n        subject: 'Subject',\n        image: 'Image',\n        imageAlign: 'Align',\n        scale: 'Size',\n        alt: 'Alternative Text',\n        externalImage: 'External Image URI'\n      },\n      // URL generation options\n      prependToUrl: '',\n      appendToUrl: '',\n      linkAttribute: 'path', // attribute to get link value from data\n      prependToScalePart: '/imagescale/', // some value here is required to be able to parse scales back\n      appendToScalePart: '',\n      scales: 'Listing (16x16):listing,Icon (32x32):icon,Tile (64x64):tile,' +\n              'Thumb (128x128):thumb,Mini (200x200):mini,Preview (400x400):preview,' +\n              'Large (768x768):large',\n      targetList: [\n        {text: 'Open in this window / frame', value: ''},\n        {text: 'Open in new window', value: '_blank'},\n        {text: 'Open in parent window / frame', value: '_parent'},\n        {text: 'Open in top frame (replaces all frames)', value: '_top'}\n      ],\n      imageTypes: 'Image',\n      folderTypes: 'Folder,Plone Site',\n      linkableTypes: 'Document,Event,File,Folder,Image,News Item,Topic',\n      tiny: {\n        plugins: [\n          'advlist autolink lists charmap print preview anchor ploneupload',\n          'searchreplace visualblocks code fullscreen autoresize',\n          'insertdatetime media table contextmenu paste plonelink ploneimage'\n        ],\n        menubar: 'edit table format tools view insert',\n        toolbar: 'undo redo | styleselect | bold italic | ' +\n                 'alignleft aligncenter alignright alignjustify | ' +\n                 'bullist numlist outdent indent | ' +\n                 'unlink plonelink ploneimage | ploneupload',\n        'autoresize_max_height': 1500\n      },\n      'rel_upload_path': null,\n      'folder_url': null\n    },\n    uploadFileClicked: function() {\n      var self = this;\n      if (self.uploadModal === null) {\n        var $el = $('<div/>').insertAfter(self.$el);\n        self.uploadModal = new UploadModal($el,\n          $.extend(true, {}, self.options, {\n            tinypattern: self,\n            relatedItems: {\n              baseCriteria: [{\n                i: 'Type',\n                o: 'plone.app.querystring.operation.list.contains',\n                v: self.options.folderTypes.split(',')\n              }],\n              placeholder: 'Select a folder to upload to...'\n            }\n          })\n        );\n        self.uploadModal.show();\n      } else {\n        self.uploadModal.reinitialize();\n        self.uploadModal.show();\n      }\n    },\n    addLinkClicked: function() {\n      var self = this;\n      if (self.linkModal === null) {\n        var $el = $('<div/>').insertAfter(self.$el);\n        self.linkModal = new LinkModal($el,\n          $.extend(true, {}, self.options, {\n            tinypattern: self,\n            linkTypes: [\n              'internal',\n              'external',\n              'email',\n              'anchor'\n            ]\n          })\n        );\n        self.linkModal.show();\n      } else {\n        self.linkModal.reinitialize();\n        self.linkModal.show();\n      }\n    },\n    addImageClicked: function() {\n      var self = this;\n      if (self.imageModal === null) {\n        var options = $.extend(true, {}, self.options, {\n          tinypattern: self,\n          linkTypes: ['image', 'externalImage'],\n          initialLinkType: 'image',\n          text: {\n            insertHeading: 'Insert Image'\n          },\n          relatedItems: {\n            baseCriteria: [{\n              i: 'Type',\n              o: 'plone.app.querystring.operation.list.contains',\n              v: self.options.imageTypes.split(',').concat(self.options.folderTypes.split(','))\n            }],\n            selectableTypes: self.options.imageTypes.split(','),\n            resultTemplate: ResultTemplate,\n            selectionTemplate: SelectionTemplate\n          }\n        });\n        var $el = $('<div/>').insertAfter(self.$el);\n        self.imageModal = new LinkModal($el, options);\n        self.imageModal.show();\n      } else {\n        self.imageModal.reinitialize();\n        self.imageModal.show();\n      }\n    },\n    generateUrl: function(data) {\n      var self = this;\n      var part = data[self.options.linkAttribute];\n      return self.options.prependToUrl + part + self.options.appendToUrl;\n    },\n    generateImageUrl: function(data, scale) {\n      var self = this;\n      var url = self.generateUrl(data);\n      return url + self.options.prependToScalePart + scale + self.options.appendToScalePart;\n    },\n    stripGeneratedUrl: function(url) {\n      // to get original attribute back\n      var self = this;\n      url = url.split(self.options.prependToScalePart, 2)[0];\n      if (self.options.prependToUrl) {\n        var parts = url.split(self.options.prependToUrl, 2);\n        if (parts.length === 2) {\n          url = parts[1];\n        }\n      }\n      if (self.options.appendToUrl) {\n        url = url.split(self.options.appendToUrl)[0];\n      }\n      return url;\n    },\n    getScaleFromUrl: function(url) {\n      var self = this;\n      var split = url.split(self.options.prependToScalePart);\n      var baseUrl = split[0];\n      if (split.length !== 2) {\n        // not valid scale, screw it\n        return null;\n      }\n      if (self.options.appendToScalePart) {\n        url = split[1].split(self.options.appendToScalePart)[0];\n      } else {\n        url = split[1];\n      }\n      if (url.indexOf('/image_') !== -1) {\n        url = url.split('/image_')[1];\n      }\n      return url;\n    },\n    fileUploaded: function(data) {\n      var self = this;\n      if (data === null) {\n        return; // bail, something is wrong here...\n      }\n      var filename = data.filename;\n      var ext = filename.split('.');\n      ext = ext[ext.length - 1].toLowerCase();\n      var attr;\n\n      if (['png', 'jpg', 'gif', 'jpeg'].indexOf(ext) !== -1) {\n        /* handle images different than others */\n        attr = {\n          src: self.generateImageUrl(data, 'thumb'),\n          'class': 'image-inline'\n        };\n        attr.id = '__mcenew';\n        self.tiny.insertContent(self.tiny.dom.createHTML('img', attr));\n        var imgElm = self.tiny.dom.get('__mcenew');\n        self.tiny.dom.setAttrib(imgElm, 'id', null);\n      } else {\n        attr = {\n          id: '__mcenew'\n        };\n        self.tiny.insertContent(self.tiny.dom.createHTML('a', attr));\n        var aElm = self.tiny.dom.get('__mcenew');\n        self.tiny.dom.setAttrib(aElm, 'id', null);\n        self.tiny.dom.setAttrib(aElm, 'href', self.generateUrl(data));\n        self.tiny.dom.setHTML(aElm, filename);\n      }\n    },\n    fileUploadError: function() {\n      /* TODO: need to be able to handle errors better? */\n      alert('There was an error attempting to upload file. ' +\n            'It is possible the file you are uploading is not allowed ' +\n            'in the folder you are trying to add it to.');\n    },\n    init: function() {\n      var self = this;\n      self.linkModal = self.imageModal = self.uploadModal = null;\n      // tiny needs an id in order to initialize. Creat it if not set.\n      var id = utils.setId(self.$el);\n      var tinyOptions = self.options.tiny;\n      tinyOptions.selector = '#' + id;\n      tinyOptions.addLinkClicked = function() {\n        self.addLinkClicked.apply(self, []);\n      };\n      tinyOptions.addImageClicked = function() {\n        self.addImageClicked.apply(self, []);\n      };\n      // XXX: disabled skin means it wont load css files which we already\n      // include in widgets.min.css\n      tinyOptions.skin = false;\n\n      self.options.relatedItems.generateImageUrl = function(data, scale) {\n        // this is so, in our result and selection template, we can\n        // access getting actual urls from related items\n        return self.generateImageUrl.apply(self, [data, scale]);\n      };\n\n      if (!self.options['base_url']) { // jshint ignore:line\n        self.options['base_url'] = window.location.href; // jshint ignore:line\n      }\n      if (self.options['rel_upload_path']) { // jshint ignore:line\n        self.options.uploadUrl = self.options['folder_url'] + '/' + self.options['rel_upload_path']; // jshint ignore:line\n      } else {\n        self.options.uploadUrl = null;\n      }\n\n      if (self.options.uploadUrl) {\n        /*\n         * disable until it works better\n         * can still upload via link and file overlays\n\n        self.dropzone = new DropZone(self.$el, {\n          className: 'tinymce-dropzone',\n          clickable: false,\n          url: self.options.uploadUrl,\n          wrap: true,\n          autoCleanResults: true,\n          success: function(e, data) {\n            self.fileUploaded($.parseJSON(data));\n          },\n          error: function() {\n            self.fileUploadError();\n          }\n        });\n        */\n\n        tinyOptions.uploadFileClicked = function() {\n          self.uploadFileClicked.apply(self, []);\n        };\n      } else {\n        // disable upload button\n        tinyOptions.plugins[0] = tinyOptions.plugins[0].replace('ploneupload', '');\n        tinyOptions.toolbar = tinyOptions.toolbar.replace('ploneupload', '');\n      }\n\n      tinymce.init(tinyOptions);\n\n      /* fixes chrome at least,\n       * still not working quite right in firefox\n      if (self.options.uploadUrl) {\n        var events = ['drop', 'dragstart', 'dragend', 'dragenter', 'dragover', 'dragleave'];\n        var iframe = self.$el.prev().find('.mce-edit-area iframe');\n        var win = $(window.frames[iframe.attr('id')]);\n        var body = iframe.contents().find('body');\n        $.each(events, function(index, ev) {\n          win.on(ev, function(e) {\n            self.dropzone.dropzone.emit(ev);\n            console.log(ev);\n          });\n          body.on(ev, function(e) {\n            self.dropzone.dropzone.emit(ev);\n            console.log(ev);\n          });\n        });\n      }*/\n      self.tiny = tinymce.get(id);\n\n      /* tiny really should be doing this by default\n       * but this fixes overlays not saving data */\n      var $form = self.$el.parents('form');\n      $form.on('submit', function() {\n        self.tiny.save();\n      });\n    }\n  });\n\n  return TinyMCE;\n\n});\n"}),define("text!js/patterns/toggle.js",[],function(){return'/* Toggle pattern.\n *\n * Options:\n *    target(string): selector of the target elements to toggle (\'undefied\')\n *    targetScope(string): selector of a target scope element in anchestors (\'global\')\n *    attribute(string): element attribute which will be toggeled (\'class\')\n *    event(string): event which will trigger toggling (\'click\')\n *\n * Documentation:\n *    # Toggle itself\n *\n *    {{ example-1 }}\n *\n *    # Toggle all targets (global scope)\n *\n *    {{ example-2 }}\n *\n *    # Toggle specific target inside a target scope\n *\n *    {{ example-3 }}\n *\n *    # Toggle more than one target inside a specific target scope\n *\n *    {{ example-4 }}\n *\n *    # Toggle an element by hover event\n *\n *    {{ example-5 }}\n *\n *    # Toggle another element than class, like \'rel\'\n *\n *    {{ example-6 }}\n *\n *    # Build a collapsable with toggle\n *\n *    {{ example-7 }}\n *\n * Example: example-1\n *    <button type="button"\n *            class="btn btn-default pat-toggle"\n *            data-pat-toggle="value:btn-lg;">This button goes bigger/smaller!</button>\n *\n * Example: example-2\n *    <div class="wrapper">\n *      <button type="button"\n *              class="btn btn-default pat-toggle"\n *              data-pat-toggle="value:label-success;target:.targetElement">This button is toggling the background of a element.</button><br />\n *      <p class="targetElement label label-default">Hello World</p>\n *    </div>\n *\n * Example: example-3\n *    <div class="wrapper">\n *      <div class="myScope">\n *        <button type="button"\n *                class="btn btn-default pat-toggle"\n *                data-pat-toggle="value:label-success;target:.targetElement;targetScope:.myScope;">toggle</button><br />\n *        <p class="targetElement label label-default">Hello World</p>\n *      </div>\n *      <div class="myScope">\n *        <button type="button"\n *                class="btn btn-default pat-toggle"\n *                data-pat-toggle="value:label-success;target:.targetElement;targetScope:.myScope;">toggle</button><br />\n *        <p class="targetElement label label-default">Hello World</p>\n *      </div>\n *    </div>\n *\n * Example: example-4\n *    <div class="wrapper">\n *      <div class="myScope">\n *        <button type="button"\n *                class="btn btn-default pat-toggle"\n *                data-pat-toggle="value:label-success;target:.targetElement;targetScope:.myScope;">toggle</button><br />\n *        <p class="targetElement label label-default">Hello World</p>\n *        <p class="targetElement label label-default">Hello again</p>\n *      </div>\n *      <div class="myScope">\n *        <button type="button"\n *                class="btn btn-default pat-toggle"\n *                data-pat-toggle="value:label-success;target:.targetElement;targetScope:.myScope;">toggle</button><br />\n *        <p class="targetElement label label-default">Hello World</p>\n *      </div>\n *    </div>\n *\n * Example: example-5\n *    <div class="wrapper">\n *      <div class="myScope">\n *        <button type="button"\n *                class="btn btn-default pat-toggle"\n *                data-pat-toggle="event:hover;value:label-success;target:.targetElement;targetScope:.myScope;">toggle</button><br />\n *        <p class="targetElement label label-default">Hello World</p>\n *      </div>\n *    </div>\n *\n * Example: example-6\n *    <div class="wrapper">\n *      <div class="myScope">\n *        <button type="button"\n *                class="btn btn-default pat-toggle"\n *                data-pat-toggle="attribute:rel; value:myRel; target:.targetElement; targetScope:.myScope">toggle</button><br />\n *        <p class="targetElement label label-default">Hello World</p>\n *      </div>\n *    </div>\n *\n * Example: example-7\n *    <div class="panel panel-default">\n *      <div class="panel-heading">\n *        <a class="btn btn-default pat-toggle"\n *           data-pat-toggle="value:in; target:.collapse; targetScope:.panel">toggle</a>\n *      </div>\n *      <div>\n *        <ul class="collapse in">\n *          <li>We use toggle for</li>\n *          <li>toggling collapsable CSS classes</li>\n *          <li>this is awesome</li>\n *        </ul>\n *      </div>\n *    </div>\n *\n *\n * License:\n *    Copyright (C) 2010 Plone Foundation\n *\n *    This program is free software; you can redistribute it and/or modify it\n *    under the terms of the GNU General Public License as published by the\n *    Free Software Foundation; either version 2 of the License.\n *\n *    This program is distributed in the hope that it will be useful, but\n *    WITHOUT ANY WARRANTY; without even the implied warranty of\n *    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General\n *    Public License for more details.\n *\n *    You should have received a copy of the GNU General Public License along\n *    with this program; if not, write to the Free Software Foundation, Inc.,\n *    51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA.\n */\n\n\ndefine([\n  \'jquery\',\n  \'mockup-patterns-base\'\n], function($, Base, undefined) {\n  \'use strict\';\n\n  var Toggle = Base.extend({\n    name: \'toggle\',\n    defaults: {\n      attribute: \'class\',\n      event: \'click\',\n      targetScope: \'global\'\n    },\n    ensureBool: function(value) {\n      if (typeof(value) === \'string\') {\n        if (value === \'true\') {\n          return true;\n        } else {\n          return false;\n        }\n      }\n      return value;\n    },\n    init: function() {\n      var self = this;\n\n      if (!self.options.target) {\n        self.$target = self.$el;\n      } else if (self.options.targetScope === \'global\') {\n        self.$target = $(self.options.target);\n      } else {\n        //self.$target = self.$el[self.options.menu](self.options.target);\n        self.$target = self.$el.parents(self.options.targetScope).first().find(self.options.target);\n      }\n\n      if (!self.$target || self.$target.size() === 0) {\n        $.error(\'No target found for "\' + self.options.target + \'".\');\n      }\n\n      self.on(self.options.event, function(e) {\n        self.toggle();\n        e.stopPropagation();\n        e.preventDefault();\n      });\n    },\n    isMarked: function() {\n      var self = this;\n      var marked = false;\n\n      for (var i = 0; i < this.$target.length; i = i + 1) {\n        if (self.options.attribute === \'class\') {\n          if (this.$target.eq(i).hasClass(this.options.value)) {\n            marked = true;\n          } else {\n            marked = false;\n            break;\n          }\n        } else {\n          if (this.$target.eq(i).attr(this.options.attribute) === this.options.value) {\n            marked = true;\n          } else {\n            marked = false;\n            break;\n          }\n        }\n      }\n      return marked;\n    },\n    toggle: function() {\n      var self = this;\n      if (self.isMarked()) {\n        self.remove();\n      } else {\n        self.add();\n      }\n    },\n    remove: function() {\n      var self = this;\n      self.trigger(\'remove-attr\');\n      if (self.options.attribute === \'class\') {\n        self.$target.removeClass(self.options.value);\n      } else {\n        self.$target.removeAttr(self.options.attribute);\n      }\n      self.trigger(\'attr-removed\');\n    },\n    add: function() {\n      var self = this;\n      self.trigger(\'add-attr\');\n      if (self.options.attribute === \'class\') {\n        self.$target.addClass(self.options.value);\n      } else {\n        self.$target.attr(self.options.attribute, self.options.value);\n      }\n      self.trigger(\'added-attr\');\n    }\n  });\n\n  return Toggle;\n\n});\n'}),define("mockup-patterns-tooltip",["jquery","mockup-patterns-base"],function(e,t,n){var r=t.extend({name:"tooltip",defaults:{attribute:"class",enterEvent:"mouseenter",exitEvent:"mouseleave"},init:function(){var e=this;e.on(e.options.enterEvent,function(t){t.stopPropagation(),e.show.apply(e,[t])}),e.on(e.options.exitEvent,function(t){t.stopPropagation(),e.hide.apply(e,[t])})},closest:function(t,n){var r;return e.each(t.parents(),function(t,i){r=e(n,i);if(r.size()!==0)return!1}),r},show:function(t){var n=e(t.target).attr("href");this.closest(this.$el,n).addClass("active")},hide:function(t){var n=e(t.target).attr("href");this.closest(this.$el,n).removeClass("active")}});return r}),define("text!js/patterns/tooltip.js",[],function(){return"/* Tooltip pattern.\n *\n * Options:\n *    enterEvent(string): Event used to trigger tooltip. ('mouseenter')\n *    exitEvent(string): Event used to dismiss tooltip. ('mouseleave')\n *\n * Documentation:\n *    # Directions\n *\n *    You can use this inside Plone or on any static page. Please check below\n *    for additional directions for non-Plone sites as there are some lines\n *    of code you need to add to the header of your webpage.\n *\n *    # Adding tooltip using Plone\n *\n *    - Make sure your viewing the page you want to add the tool tip too.\n *    - Log in\n *    - Create some text that you want to be the link that will reveal the\n *      tooltip.\n *    - Select the view html button\n *    - Find your text. and wrap that text with an href tag, and add a class\n *      and the href tag.\n *    - It should look like < a class=\"pat-tooltip\" href=\"#my-demo-tip\"> My\n *      link text </a>\n *    - Choose Save\n *\n *    Now that we have added our link we now need to add our tooltip.\n *\n *    - Choose \"edit\"\n *    - Immediently following the link click to add some text and hit your\n *      \"return\" key\n *    - Add the text that you want to be the tip.\n *    - Choose the \"edit html\" button\n *    - Find the tip text and wrap that text with a div tag, an ID tag and a\n *      class.\n *    - It should look like <div id=\"my-demo-tip\" class=\"tooltips\"> My Tip\n *      Text here </div>\n *    - Choose Save and test your tooltip.\n *\n *    Note: it's important that the href AND the ID be named exactly the same\n *    thing. This is what links them together.\n *\n *    # Example\n *\n *    {{ example-1 }}\n *\n * Example: example-1\n *    <p href=\".example-class\" class=\"pat-tooltip\">\n *      Hover over this line to see a tooltip\n *    </p>\n *    <p class=\"tooltips example-class\">\n *      Setting the .example-class in the href makes this show up\n *    </p>\n *\n * License:\n *    Copyright (C) 2010 Plone Foundation\n *\n *    This program is free software; you can redistribute it and/or modify it\n *    under the terms of the GNU General Public License as published by the\n *    Free Software Foundation; either version 2 of the License.\n *\n *    This program is distributed in the hope that it will be useful, but\n *    WITHOUT ANY WARRANTY; without even the implied warranty of\n *    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General\n *    Public License for more details.\n *\n *    You should have received a copy of the GNU General Public License along\n *    with this program; if not, write to the Free Software Foundation, Inc.,\n *    51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA.\n */\n\ndefine([\n  'jquery',\n  'mockup-patterns-base'\n], function($, Base, undefined) {\n  'use strict';\n\n  var ToolTip = Base.extend({\n    name: 'tooltip',\n    defaults: {\n      attribute: 'class',\n      enterEvent: 'mouseenter',\n      exitEvent: 'mouseleave'\n    },\n    init: function() {\n      var self = this;\n\n      self.on(self.options.enterEvent, function(e) {\n        e.stopPropagation();\n        self.show.apply(self, [e]);\n      });\n      self.on(self.options.exitEvent, function(e) {\n        e.stopPropagation();\n        self.hide.apply(self, [e]);\n      });\n\n    },\n    closest: function($el, selector) {\n      var $closest;\n      $.each($el.parents(), function(i, el) {\n        $closest = $(selector, el);\n        if ($closest.size() !== 0) {\n          return false;\n        }\n      });\n      return $closest;\n    },\n    show : function(e) {\n      var s = $(e.target).attr('href');\n      this.closest(this.$el, s).addClass('active');\n    },\n\n    hide : function(e) {\n      var s = $(e.target).attr('href');\n      this.closest(this.$el, s).removeClass('active');\n    }\n\n  });\n\n  return ToolTip;\n\n});\n"}),define("text!js/patterns/tree.js",[],function(){return'/* Tree pattern.\n *\n * Options: data(jSON): load data structure directly into tree (undefined)\n * dataUrl(jSON): Load data from remote url (undefined) autoOpen(boolean): auto\n * open tree contents (false) dragAndDrop(boolean): node drag and drop support\n * (false) selectable(boolean): if nodes can be selectable (true)\n * keyboardSupport(boolean): if keyboard naviation is allowed (true)\n *\n * Documentation: # JSON node data\n *\n *    {{ example-1 }}\n *\n *    # Remote data URL\n *\n *    {{ example-2 }}\n *\n *    # Drag and drop\n *\n *    {{ example-3 }}\n *\n * Example: example-1\n *    <div class="pat-tree"\n *         data-pat-tree=\'data:[\n *          { "label": "node1",\n *            "children": [\n *              { "label": "child1" },\n *              { "label": "child2" }\n *            ]\n *          },\n *          { "label": "node2",\n *            "children": [\n *              { "label": "child3" }\n *            ]\n *          }\n *        ];\'> </div>\n *\n * Example: example-2\n *    <div class="pat-tree"\n *         data-pat-tree="dataUrl:/tests/json/fileTree.json;\n *                        autoOpen:true"></div>\n *\n * Example: example-3\n *    <div class="pat-tree"\n *         data-pat-tree="dataUrl:/tests/json/fileTree.json;\n *                        dragAndDrop: true;\n *                        autoOpen: true"></div>\n *\n * License: Copyright (C) 2010 Plone Foundation\n *\n *    This program is free software; you can redistribute it and/or modify it\n *    under the terms of the GNU General Public License as published by the\n *    Free Software Foundation; either version 2 of the License.\n *\n *    This program is distributed in the hope that it will be useful, but\n *    WITHOUT ANY WARRANTY; without even the implied warranty of\n *    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General\n *    Public License for more details.\n *\n *    You should have received a copy of the GNU General Public License along\n *    with this program; if not, write to the Free Software Foundation, Inc.,\n *    51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA.\n */\n\n\ndefine([\n  \'jquery\',\n  \'underscore\',\n  \'mockup-patterns-base\',\n  \'mockup-utils\',\n  \'jqtree\'\n], function($, _, Base, utils) {\n  \'use strict\';\n\n  var Tree = Base.extend({\n    name: \'tree\',\n    defaults: {\n      dragAndDrop: false,\n      autoOpen: false,\n      selectable: true,\n      keyboardSupport: true\n    },\n    init: function() {\n      var self = this;\n      /* convert all bool options */\n      for (var optionKey in self.options) {\n        var def = self.defaults[optionKey];\n        if (def !== undefined && typeof(def) === \'boolean\') {\n          self.options[optionKey] = utils.bool(self.options[optionKey]);\n        }\n      }\n\n      if (self.options.dragAndDrop && self.options.onCanMoveTo === undefined) {\n        self.options.onCanMoveTo = function(moved, target, position) {\n          /* if not using folder option, just allow, otherwise, only allow if folder */\n          return target.folder === undefined || target.folder === true;\n        };\n      }\n\n      if (self.options.data && typeof(self.options.data) === \'string\') {\n        self.options.data = $.parseJSON(self.options.data);\n      }\n      self.tree = self.$el.tree(self.options);\n    }\n  });\n\n\n  return Tree;\n\n});\n'}),require(["mockup-bundles-docs"]);